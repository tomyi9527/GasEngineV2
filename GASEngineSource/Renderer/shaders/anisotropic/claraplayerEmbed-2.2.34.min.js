!function(e, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.claraplayerEmbed = t() : e.claraplayerEmbed = t()
}(this, function() {
    return function(e) {
        function t(n) {
            if (r[n])
                return r[n].exports;
            var i = r[n] = {
                exports: {},
                id: n,
                loaded: !1
            };
            return e[n].call(i.exports, i, i.exports, t),
            i.loaded = !0,
            i.exports
        }
        var r = {};
        return t.m = e,
        t.c = r,
        t.p = "/js/",
        t(0)
    }(function(e) {
        for (var t in e)
            if (Object.prototype.hasOwnProperty.call(e, t))
                switch (typeof e[t]) {
                case "function":
                    break;
                case "object":
                    e[t] = function(t) {
                        var r = t.slice(1)
                          , n = e[t[0]];
                        return function(e, t, i) {
                            n.apply(this, [e, t, i].concat(r))
                        }
                    }(e[t]);
                    break;
                default:
                    e[t] = e[e[t]]
                }
        return e
    }([/*!******************************!*\
  !*** multi claraplayerEmbed ***!
  \******************************/
    function(e, t, r) {
        e.exports = r(/*! ./src/embed.js */
        387)
    }
    , /*!********************************!*\
  !*** ./~/three/three.extra.js ***!
  \********************************/
    function(e, t, r) {
        var n = r(/*! ./three */
        364);
        n.PMREMGenerator = function(e, t, r) {
            this.sourceTexture = e,
            this.resolution = void 0 !== r ? r : 256,
            this.samplesPerLevel = void 0 !== t ? t : 16;
            var i = e.encoding === n.LinearEncoding || e.encoding === n.GammaEncoding || e.encoding === n.sRGBEncoding;
            this.sourceTexture.minFilter = i ? n.LinearFilter : n.NearestFilter,
            this.sourceTexture.magFilter = i ? n.LinearFilter : n.NearestFilter,
            this.sourceTexture.generateMipmaps = this.sourceTexture.generateMipmaps && i,
            this.cubeLods = [];
            var a = this.resolution
              , o = {
                format: this.sourceTexture.format,
                magFilter: this.sourceTexture.magFilter,
                minFilter: this.sourceTexture.minFilter,
                type: this.sourceTexture.type,
                generateMipmaps: this.sourceTexture.generateMipmaps,
                anisotropy: this.sourceTexture.anisotropy,
                encoding: this.sourceTexture.encoding
            };
            this.numLods = Math.log(a) / Math.log(2) - 2;
            for (var s = 0; s < this.numLods; s++) {
                var u = new n.WebGLRenderTargetCube(a,a,o);
                u.texture.name = "PMREMGenerator.cube" + s,
                this.cubeLods.push(u),
                a = Math.max(16, a / 2)
            }
            this.camera = new n.OrthographicCamera(-1,1,1,-1,0,1e3),
            this.shader = this.getShader(),
            this.shader.defines.SAMPLES_PER_LEVEL = this.samplesPerLevel,
            this.planeMesh = new n.Mesh(new n.PlaneGeometry(2,2,0),this.shader),
            this.planeMesh.material.side = n.DoubleSide,
            this.scene = new n.Scene,
            this.scene.add(this.planeMesh),
            this.scene.add(this.camera),
            this.shader.uniforms.envMap.value = this.sourceTexture,
            this.shader.envMap = this.sourceTexture
        }
        ,
        n.PMREMGenerator.prototype = {
            constructor: n.PMREMGenerator,
            update: function(e) {
                this.shader.uniforms.envMap.value = this.sourceTexture,
                this.shader.envMap = this.sourceTexture;
                var t = e.gammaInput
                  , r = e.gammaOutput
                  , i = e.toneMapping
                  , a = e.toneMappingExposure;
                e.toneMapping = n.LinearToneMapping,
                e.toneMappingExposure = 1,
                e.gammaInput = !1,
                e.gammaOutput = !1;
                for (var o = 0; o < this.numLods; o++) {
                    var s = o / (this.numLods - 1);
                    this.shader.uniforms.roughness.value = .9 * s,
                    this.shader.uniforms.queryScale.value.x = 0 == o ? -1 : 1;
                    var u = this.cubeLods[o].width;
                    this.shader.uniforms.mapSize.value = u,
                    this.renderToCubeMapTarget(e, this.cubeLods[o]),
                    o < 5 && (this.shader.uniforms.envMap.value = this.cubeLods[o].texture)
                }
                e.toneMapping = i,
                e.toneMappingExposure = a,
                e.gammaInput = t,
                e.gammaOutput = r
            },
            renderToCubeMapTarget: function(e, t) {
                for (var r = 0; r < 6; r++)
                    this.renderToCubeMapTargetFace(e, t, r)
            },
            renderToCubeMapTargetFace: function(e, t, r) {
                t.activeCubeFace = r,
                this.shader.uniforms.faceIndex.value = r,
                e.render(this.scene, this.camera, t, !0)
            },
            getShader: function() {
                return new n.ShaderMaterial({
                    defines: {
                        SAMPLES_PER_LEVEL: 20
                    },
                    uniforms: {
                        faceIndex: {
                            value: 0
                        },
                        roughness: {
                            value: .5
                        },
                        mapSize: {
                            value: .5
                        },
                        envMap: {
                            value: null
                        },
                        queryScale: {
                            value: new n.Vector3(1,1,1)
                        },
                        testColor: {
                            value: new n.Vector3(1,1,1)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform int faceIndex;\n\t\t\t\t\tuniform float roughness;\n\t\t\t\t\tuniform samplerCube envMap;\n\t\t\t\t\tuniform float mapSize;\n\t\t\t\t\tuniform vec3 testColor;\n\t\t\t\t\tuniform vec3 queryScale;\n\t\t\t\t\t\n\t\t\t\t\tfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\t\t\t\t\t\tfloat a = ggxRoughness + 0.0001;\n\t\t\t\t\t\ta *= a;\n\t\t\t\t\t\treturn ( 2.0 / a - 2.0 );\n\t\t\t\t\t}\n\t\t\t\t\tvec3 ImportanceSamplePhong(vec2 uv, mat3 vecSpace, float specPow) {\n\t\t\t\t\t\tfloat phi = uv.y * 2.0 * PI;\n\t\t\t\t\t\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\n\t\t\t\t\t\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n\t\t\t\t\t\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\n\t\t\t\t\t\treturn vecSpace * sampleDir;\n\t\t\t\t\t}\n\t\t\t\t\tvec3 ImportanceSampleGGX( vec2 uv, mat3 vecSpace, float Roughness )\n\t\t\t\t\t{\n\t\t\t\t\t\tfloat a = Roughness * Roughness;\n\t\t\t\t\t\tfloat Phi = 2.0 * PI * uv.x;\n\t\t\t\t\t\tfloat CosTheta = sqrt( (1.0 - uv.y) / ( 1.0 + (a*a - 1.0) * uv.y ) );\n\t\t\t\t\t\tfloat SinTheta = sqrt( 1.0 - CosTheta * CosTheta );\n\t\t\t\t\t\treturn vecSpace * vec3(SinTheta * cos( Phi ), SinTheta * sin( Phi ), CosTheta);\n\t\t\t\t\t}\n\t\t\t\t\tmat3 matrixFromVector(vec3 n) {\n\t\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\n\t\t\t\t\t\tfloat b = -n.x * n.y * a;\n\t\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\n\t\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\n\t\t\t\t\t\treturn mat3(b1, b2, n);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvec4 testColorMap(float Roughness) {\n\t\t\t\t\t\tvec4 color;\n\t\t\t\t\t\tif(faceIndex == 0)\n\t\t\t\t\t\t\tcolor = vec4(1.0,0.0,0.0,1.0);\n\t\t\t\t\t\telse if(faceIndex == 1)\n\t\t\t\t\t\t\tcolor = vec4(0.0,1.0,0.0,1.0);\n\t\t\t\t\t\telse if(faceIndex == 2)\n\t\t\t\t\t\t\tcolor = vec4(0.0,0.0,1.0,1.0);\n\t\t\t\t\t\telse if(faceIndex == 3)\n\t\t\t\t\t\t\tcolor = vec4(1.0,1.0,0.0,1.0);\n\t\t\t\t\t\telse if(faceIndex == 4)\n\t\t\t\t\t\t\tcolor = vec4(0.0,1.0,1.0,1.0);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcolor = vec4(1.0,0.0,1.0,1.0);\n\t\t\t\t\t\tcolor *= ( 1.0 - Roughness );\n\t\t\t\t\t\treturn color;\n\t\t\t\t\t}\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec3 sampleDirection;\n\t\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\n\t\t\t\t\t\tfloat offset = -1.0/mapSize;\n\t\t\t\t\t\tconst float a = -1.0;\n\t\t\t\t\t\tconst float b = 1.0;\n\t\t\t\t\t\tfloat c = -1.0 + offset;\n\t\t\t\t\t\tfloat d = 1.0 - offset;\n\t\t\t\t\t\tfloat bminusa = b - a;\n\t\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\n\t\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\n\t\t\t\t\t\tif (faceIndex==0) {\n\t\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\n\t\t\t\t\t\t} else if (faceIndex==1) {\n\t\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\n\t\t\t\t\t\t} else if (faceIndex==2) {\n\t\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\n\t\t\t\t\t\t} else if (faceIndex==3) {\n\t\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\n\t\t\t\t\t\t} else if (faceIndex==4) {\n\t\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmat3 vecSpace = matrixFromVector(normalize(sampleDirection * queryScale));\n\t\t\t\t\t\tvec3 rgbColor = vec3(0.0);\n\t\t\t\t\t\tconst int NumSamples = SAMPLES_PER_LEVEL;\n\t\t\t\t\t\tvec3 vect;\n\t\t\t\t\t\tfloat weight = 0.0;\n\t\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\n\t\t\t\t\t\t\tfloat sini = sin(float(i));\n\t\t\t\t\t\t\tfloat cosi = cos(float(i));\n\t\t\t\t\t\t\tfloat r = rand(vec2(sini, cosi));\n\t\t\t\t\t\t\tvect = ImportanceSampleGGX(vec2(float(i) / float(NumSamples), r), vecSpace, roughness);\n\t\t\t\t\t\t\tfloat dotProd = dot(vect, normalize(sampleDirection));\n\t\t\t\t\t\t\tweight += dotProd;\n\t\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap,vect)).rgb;\n\t\t\t\t\t\t\trgbColor.rgb += color;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trgbColor /= float(NumSamples);\n\t\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\n\t\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\n\t\t\t\t\t}",
                    blending: n.CustomBlending,
                    blendSrc: n.OneFactor,
                    blendDst: n.ZeroFactor,
                    blendSrcAlpha: n.OneFactor,
                    blendDstAlpha: n.ZeroFactor,
                    blendEquation: n.AddEquation
                })
            }
        },
        n.PMREMCubeUVPacker = function(e, t) {
            this.cubeLods = e,
            this.numLods = t;
            var r = 4 * e[0].width
              , i = e[0].texture
              , a = {
                format: i.format,
                magFilter: i.magFilter,
                minFilter: i.minFilter,
                type: i.type,
                generateMipmaps: i.generateMipmaps,
                anisotropy: i.anisotropy,
                encoding: i.encoding
            };
            i.encoding === n.RGBM16Encoding && (a.magFilter = n.LinearFilter,
            a.minFilter = n.LinearFilter),
            this.CubeUVRenderTarget = new n.WebGLRenderTarget(r,r,a),
            this.CubeUVRenderTarget.texture.name = "PMREMCubeUVPacker.cubeUv",
            this.CubeUVRenderTarget.texture.mapping = n.CubeUVReflectionMapping,
            this.camera = new n.OrthographicCamera(.5 * -r,.5 * r,.5 * -r,.5 * r,0,1e3),
            this.scene = new n.Scene,
            this.scene.add(this.camera),
            this.objects = [];
            var o = [];
            o.push(new n.Vector2(0,0)),
            o.push(new n.Vector2(1,0)),
            o.push(new n.Vector2(2,0)),
            o.push(new n.Vector2(0,1)),
            o.push(new n.Vector2(1,1)),
            o.push(new n.Vector2(2,1));
            var s = r;
            r = e[0].width;
            var u = 0
              , l = 4;
            this.numLods = Math.log(e[0].width) / Math.log(2) - 2;
            for (var c = 0; c < this.numLods; c++) {
                var h = .5 * (s - s / l);
                r > 16 && (l *= 2);
                for (var f = r > 16 ? 6 : 1, d = 0, p = 0, m = r, g = 0; g < f; g++) {
                    for (var v = 0; v < 6; v++) {
                        var y = this.getShader();
                        y.uniforms.envMap.value = this.cubeLods[c].texture,
                        y.envMap = this.cubeLods[c].texture,
                        y.uniforms.faceIndex.value = v,
                        y.uniforms.mapSize.value = m;
                        var M = (y.uniforms.testColor.value,
                        new n.Mesh(new n.PlaneGeometry(m,m,0),y));
                        M.position.x = o[v].x * m - h + d,
                        M.position.y = o[v].y * m - h + u + p,
                        M.material.side = n.DoubleSide,
                        this.scene.add(M),
                        this.objects.push(M)
                    }
                    p += 1.75 * m,
                    d += 1.25 * m,
                    m /= 2
                }
                u += 2 * r,
                r > 16 && (r /= 2)
            }
        }
        ,
        n.PMREMCubeUVPacker.prototype = {
            constructor: n.PMREMCubeUVPacker,
            update: function(e) {
                var t = e.gammaInput
                  , r = e.gammaOutput
                  , i = e.toneMapping
                  , a = e.toneMappingExposure;
                e.gammaInput = !1,
                e.gammaOutput = !1,
                e.toneMapping = n.LinearToneMapping,
                e.toneMappingExposure = 1,
                e.render(this.scene, this.camera, this.CubeUVRenderTarget, !1),
                e.toneMapping = i,
                e.toneMappingExposure = a,
                e.gammaInput = t,
                e.gammaOutput = r
            },
            getShader: function() {
                var e = new n.ShaderMaterial({
                    uniforms: {
                        faceIndex: {
                            value: 0
                        },
                        mapSize: {
                            value: 0
                        },
                        envMap: {
                            value: null
                        },
                        testColor: {
                            value: new n.Vector3(1,1,1)
                        }
                    },
                    vertexShader: "precision highp float;\t\t\t\t\tvarying vec2 vUv;\t\t\t\t\tvoid main() {\t\t\t\t\t\tvUv = uv;\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\t\t\t\t\t}",
                    fragmentShader: "precision highp float;\t\t\t\t\tvarying vec2 vUv;\t\t\t\t\tuniform samplerCube envMap;\t\t\t\t\tuniform float mapSize;\t\t\t\t\tuniform vec3 testColor;\t\t\t\t\tuniform int faceIndex;\t\t\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\t\tvec3 sampleDirection;\t\t\t\t\t\tvec2 uv = vUv;\t\t\t\t\t\tuv = uv * 2.0 - 1.0;\t\t\t\t\t\tuv.y *= -1.0;\t\t\t\t\t\tif(faceIndex == 0) {\t\t\t\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\t\t\t\t\t\t} else if(faceIndex == 1) {\t\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\t\t\t\t\t\t} else if(faceIndex == 2) {\t\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\t\t\t\t\t\t} else if(faceIndex == 3) {\t\t\t\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\t\t\t\t\t\t} else if(faceIndex == 4) {\t\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\t\t\t\t\t\t} else {\t\t\t\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\t\t\t\t\t\t}\t\t\t\t\t\tvec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\t\t\t\t\t\tgl_FragColor = linearToOutputTexel( color );\t\t\t\t\t}",
                    blending: n.CustomBlending,
                    premultipliedAlpha: !1,
                    blendSrc: n.OneFactor,
                    blendDst: n.ZeroFactor,
                    blendSrcAlpha: n.OneFactor,
                    blendDstAlpha: n.ZeroFactor,
                    blendEquation: n.AddEquation
                });
                return e
            }
        },
        n.CopyShader = {
            uniforms: {
                tDiffuse: {
                    value: null
                },
                opacity: {
                    value: 1
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}"].join("\n")
        },
        n.CompositeShader = {
            defines: {
                BLENDING: n.NoBlending
            },
            uniforms: {
                tSource: {
                    type: "t",
                    value: null
                },
                opacitySource: {
                    type: "f",
                    value: 1
                },
                tDestination: {
                    type: "t",
                    value: null
                },
                opacityDestination: {
                    type: "f",
                    value: 1
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tSource;", "uniform float opacitySource;", "uniform sampler2D tDestination;", "uniform float opacityDestination;", "varying vec2 vUv;", "void main() {", "vec4 d = opacityDestination * texture2D( tDestination, vUv );", "vec4 s = opacitySource * texture2D( tSource, vUv );", "#if (BLENDING == " + n.NormalBlending + ")", "gl_FragColor = d * ( 1.0 - s.a ) + s;", "#elif (BLENDING == " + n.AdditiveBlending + ")", "gl_FragColor = d + s;", "#elif (BLENDING == " + n.SubtractiveBlending + ")", "gl_FragColor = d - s;", "#elif (BLENDING == " + n.MultiplyBlending + ")", "gl_FragColor = d * s;", "#else", "gl_FragColor = s;", "#endif", "}"].join("\n")
        },
        n.GlossyMirrorShader = {
            defines: {
                SPECULAR_MAP: 0,
                ROUGHNESS_MAP: 0,
                GLOSSY_REFLECTIONS: 1,
                REFLECTION_LOD_LEVELS: 4,
                PERSPECTIVE_CAMERA: 1
            },
            uniforms: {
                metalness: {
                    type: "f",
                    value: 0
                },
                specularColor: {
                    type: "c",
                    value: new n.Color(16777215)
                },
                tSpecular: {
                    type: "t",
                    value: null
                },
                tReflection: {
                    type: "t",
                    value: null
                },
                tReflection1: {
                    type: "t",
                    value: null
                },
                tReflection2: {
                    type: "t",
                    value: null
                },
                tReflection3: {
                    type: "t",
                    value: null
                },
                tReflection4: {
                    type: "t",
                    value: null
                },
                tReflectionDepth: {
                    type: "t",
                    value: null
                },
                roughness: {
                    type: "f",
                    value: 0
                },
                distanceFade: {
                    type: "f",
                    value: .01
                },
                fresnelStrength: {
                    type: "f",
                    value: 1
                },
                reflectionTextureMatrix: {
                    type: "m4",
                    value: new n.Matrix4
                },
                mirrorCameraWorldMatrix: {
                    type: "m4",
                    value: new n.Matrix4
                },
                mirrorCameraProjectionMatrix: {
                    type: "m4",
                    value: new n.Matrix4
                },
                mirrorCameraInverseProjectionMatrix: {
                    type: "m4",
                    value: new n.Matrix4
                },
                mirrorCameraNear: {
                    type: "f",
                    value: 0
                },
                mirrorCameraFar: {
                    type: "f",
                    value: 0
                },
                screenSize: {
                    type: "v2",
                    value: new n.Vector2
                },
                mirrorNormal: {
                    type: "v3",
                    value: new n.Vector3
                },
                mirrorWorldPosition: {
                    type: "v3",
                    value: new n.Vector3
                }
            },
            vertexShader: ["uniform mat4 reflectionTextureMatrix;", "varying vec4 mirrorCoord;", "varying vec3 vecPosition;", "varying vec3 worldNormal;", "varying vec2 vUv;", "void main() {", "vUv = uv;", "vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "vecPosition = cameraPosition - worldPosition.xyz;", "worldNormal = (modelMatrix * vec4(normal,0.0)).xyz;", "mirrorCoord = reflectionTextureMatrix * worldPosition;", "gl_Position = projectionMatrix * mvPosition;", "}"].join("\n"),
            blending: n.NormalBlending,
            transparent: !0,
            fragmentShader: ["#include <common>", "#include <packing>", "#include <bsdfs>", "uniform float roughness;", "#if ROUGHNESS_MAP == 1", "uniform sampler2D tRoughness;", "#endif", "uniform float metalness;", "uniform float distanceFade;", "uniform float fresnelStrength;", "uniform vec3 specularColor;", "#if SPECULAR_MAP == 1", "uniform sampler2D tSpecular;", "#endif", "uniform sampler2D tReflection;", "#if GLOSSY_REFLECTIONS == 1", "uniform sampler2D tReflection1;", "uniform sampler2D tReflection2;", "uniform sampler2D tReflection3;", "uniform sampler2D tReflection4;", "uniform sampler2D tReflectionDepth;", "#endif", "varying vec3 vecPosition;", "varying vec3 worldNormal;", "varying vec2 vUv;", "varying vec4 mirrorCoord;", "uniform mat4 mirrorCameraProjectionMatrix;", "uniform mat4 mirrorCameraInverseProjectionMatrix;", "uniform mat4 mirrorCameraWorldMatrix;", "uniform float mirrorCameraNear;", "uniform float mirrorCameraFar;", "uniform vec2 screenSize;", "uniform vec3 mirrorNormal;", "uniform vec3 mirrorWorldPosition;", "#if GLOSSY_REFLECTIONS == 1", "float getReflectionDepth() {", "return unpackRGBAToDepth( texture2DProj( tReflectionDepth, mirrorCoord ) );", "}", "float getReflectionViewZ( const in float reflectionDepth ) {", "#if PERSPECTIVE_CAMERA == 1", "return perspectiveDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );", "#else", "return orthographicDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );", "#endif", "}", "vec3 getReflectionViewPosition( const in vec2 screenPosition, const in float reflectionDepth, const in float reflectionViewZ ) {", "float clipW = mirrorCameraProjectionMatrix[2][3] * reflectionViewZ + mirrorCameraProjectionMatrix[3][3];", "vec4 clipPosition = vec4( ( vec3( screenPosition, reflectionDepth ) - 0.5 ) * 2.0, 1.0 );", "clipPosition *= clipW;", "return ( mirrorCameraInverseProjectionMatrix * clipPosition ).xyz;", "}", "#endif", "vec4 getReflection( const in vec4 mirrorCoord, const in float lodLevel ) {", "#if GLOSSY_REFLECTIONS == 0", "return texture2DProj( tReflection, mirrorCoord );", "#else", "vec4 color0, color1;", "float alpha;", "if( lodLevel < 1.0 ) {", "color0 = texture2DProj( tReflection, mirrorCoord );", "color1 = texture2DProj( tReflection1, mirrorCoord );", "alpha = lodLevel;", "}", "else if( lodLevel < 2.0) {", "color0 = texture2DProj( tReflection1, mirrorCoord );", "color1 = texture2DProj( tReflection2, mirrorCoord );", "alpha = lodLevel - 1.0;", "}", "else if( lodLevel < 3.0 ) {", "color0 = texture2DProj( tReflection2, mirrorCoord );", "color1 = texture2DProj( tReflection3, mirrorCoord );", "alpha = lodLevel - 2.0;", "}", "else {", "color0 = texture2DProj( tReflection3, mirrorCoord );", "color1 = color0;", "alpha = 0.0;", "}", "return mix( color0, color1, alpha );", "#endif", "}", "void main() {", "vec3 specular = specularColor;", "#if SPECULAR_MAP == 1", "specular *= texture2D( tSpecular, vUv );", "#endif", "float fade = 1.0;", "#if GLOSSY_REFLECTIONS == 1", "float localRoughness = roughness;", "#if ROUGHNESS_MAP == 1", "localRoughness *= texture2D( tRoughness, vUv ).r;", "#endif", "vec2 screenPosition = gl_FragCoord.xy / screenSize;", "float reflectionDepth = getReflectionDepth();", "float reflectionViewZ = getReflectionViewZ( reflectionDepth );", "vec3 reflectionViewPosition = getReflectionViewPosition( screenPosition, reflectionDepth, reflectionViewZ );", "vec3 reflectionWorldPosition = ( mirrorCameraWorldMatrix * vec4( reflectionViewPosition, 1.0 ) ).xyz;", "vec3 closestPointOnMirror = projectOnPlane( reflectionWorldPosition, mirrorWorldPosition, mirrorNormal );", "vec3 pointOnMirror = linePlaneIntersect( cameraPosition, normalize( reflectionWorldPosition - cameraPosition ), mirrorWorldPosition, mirrorNormal );", "float distance = length( closestPointOnMirror - reflectionWorldPosition );", "localRoughness = localRoughness * distance * 0.2;", "float lodLevel = localRoughness;", "fade = 1.0 - smoothstep( 0.0, 1.0, distanceFade * distance * 0.2 );", "#else", "float lodLevel = 0.0;", "#endif", "vec4 reflection = getReflection( mirrorCoord, lodLevel );", "float dotNV = clamp( dot( normalize( worldNormal ), normalize( vecPosition ) ), EPSILON, 1.0 );", "specular = mix( vec3( 0.05 ), specular, metalness );", "vec3 fresnel;", "if( fresnelStrength < 0.0 ) {", "fresnel = mix( specular, specular * pow( dotNV, 2.0 ), -fresnelStrength ) * pow( 1.0 - roughness, 2.0 );", "} else {", "fresnel = mix( specular, F_Schlick( specular, dotNV ), fresnelStrength ) * pow( 1.0 - roughness, 2.0 );", "}", "gl_FragColor = vec4( reflection.rgb, fresnel * fade * reflection.a );", "}"].join("\n")
        },
        n.ShaderChunk.sao = ["#include <packing>", "float getDepth( const in vec2 screenPosition ) {", "#if DEPTH_PACKING == 1", "return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );", "#else", "return texture2D( tDepth, screenPosition ).x;", "#endif", "}", "vec4 setDepth( const in float depth ) {", "#if DEPTH_PACKING == 1", "return packDepthToRGBA( depth );", "#else", "return vec4( depth, 0, 0, 0 );", "#endif", "}", "float getViewZ( const in float depth ) {", "#if PERSPECTIVE_CAMERA == 1", "return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );", "#else", "return orthographicDepthToViewZ( depth, cameraNear, cameraFar );", "#endif", "}"].join("\n"),
        n.SAOShader = {
            blending: n.NoBlending,
            defines: {
                NUM_SAMPLES: 13,
                NUM_RINGS: 7,
                NORMAL_TEXTURE: 0,
                DIFFUSE_TEXTURE: 1,
                DEPTH_PACKING: 1,
                DEPTH_MIPS: 0,
                PERSPECTIVE_CAMERA: 1
            },
            extensions: {
                derivatives: !0
            },
            uniforms: {
                tDepth: {
                    type: "t",
                    value: null
                },
                tDepth1: {
                    type: "t",
                    value: null
                },
                tDepth2: {
                    type: "t",
                    value: null
                },
                tDepth3: {
                    type: "t",
                    value: null
                },
                tDiffuse: {
                    type: "t",
                    value: null
                },
                tNormal: {
                    type: "t",
                    value: null
                },
                size: {
                    type: "v2",
                    value: new n.Vector2(512,512)
                },
                cameraNear: {
                    type: "f",
                    value: 1
                },
                cameraFar: {
                    type: "f",
                    value: 100
                },
                cameraProjectionMatrix: {
                    type: "m4",
                    value: new n.Matrix4
                },
                cameraInverseProjectionMatrix: {
                    type: "m4",
                    value: new n.Matrix4
                },
                intensity: {
                    type: "f",
                    value: .1
                },
                occlusionSphereWorldRadius: {
                    type: "f",
                    value: 100
                },
                worldToScreenRatio: {
                    type: "v2",
                    value: new n.Vector2(1,1)
                },
                randomSeed: {
                    type: "f",
                    value: 0
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["#include <common>", "varying vec2 vUv;", "#if DIFFUSE_TEXTURE == 1", "uniform sampler2D tDiffuse;", "#endif", "#define MAX_MIP_LEVEL 3", "uniform sampler2D tDepth;", "#if DEPTH_MIPS == 1", "uniform sampler2D tDepth1;", "uniform sampler2D tDepth2;", "uniform sampler2D tDepth3;", "#endif", "#if NORMAL_TEXTURE == 1", "uniform sampler2D tNormal;", "#endif", "uniform float cameraNear;", "uniform float cameraFar;", "uniform mat4 cameraProjectionMatrix;", "uniform mat4 cameraInverseProjectionMatrix;", "uniform float intensity;", "uniform float occlusionSphereWorldRadius;", "uniform vec2 size;", "uniform vec2 worldToScreenRatio;", "uniform float randomSeed;", "#include <sao>", "vec4 getDefaultColor( const in vec2 screenPosition ) {", "#if DIFFUSE_TEXTURE == 1", "return texture2D( tDiffuse, vUv );", "#else", "return vec4( 1.0 );", "#endif", "}", "vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {", "float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];", "vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );", "clipPosition *= clipW;", "return ( cameraInverseProjectionMatrix * clipPosition ).xyz;", "}", "vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {", "#if NORMAL_TEXTURE == 1", "return -unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );", "#else", "return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );", "#endif", "}", "float getDepthMIP( const in vec2 screenPosition, const int mipLevel ) {", "vec4 rawDepth;", "#if DEPTH_MIPS == 0", "rawDepth = texture2D( tDepth, screenPosition );", "#else", "if( mipLevel == 0 ) {", "rawDepth = texture2D( tDepth, screenPosition );", "}", "else if( mipLevel == 1 ) {", "rawDepth = texture2D( tDepth1, screenPosition );", "}", "else if( mipLevel == 2 ) {", "rawDepth = texture2D( tDepth2, screenPosition );", "}", "else {", "rawDepth = texture2D( tDepth3, screenPosition );", "}", "#endif", "#if DEPTH_PACKING == 1", "return unpackRGBAToDepth( rawDepth );", "#else", "return rawDepth.x;", "#endif", "}", "float scaleDividedByCameraFar;", "float minResolutionMultipliedByCameraFar;", "float errorCorrectionFactor;", "float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {", "vec3 viewDelta = sampleViewPosition - centerViewPosition;", "float viewDistance2 = dot( viewDelta, viewDelta );", "return max( ( dot( centerViewNormal, viewDelta ) + centerViewPosition.z * 0.001 ) / ( viewDistance2 + 0.0001 ), 0.0 );// * smoothstep( pow2( occlusionSphereWorldRadius ), 0.0, viewDistance2 );", "}", "int getMipLevel( const in vec2 occlusionSphereScreenRadius ) {", "return int( clamp( floor( log2( length( occlusionSphereScreenRadius * size ) ) - 4.0 ), 0.0, 3.0 ) );", "}", "const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );", "const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );", "float getAmbientOcclusion( const in vec3 centerViewPosition ) {", "vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );", "vec2 invSize = 1.0 / size;", "vec2 occlusionSphereScreenRadius = occlusionSphereWorldRadius * worldToScreenRatio / centerViewPosition.z;", "float random = rand( vUv + randomSeed );", "float angle = random * PI2;", "float radiusStep = INV_NUM_SAMPLES;", "float radius = radiusStep * ( 0.5 + random );", "float occlusionSum = 0.0;", "for( int i = 0; i < NUM_SAMPLES; i ++ ) {", "radius = (float(i) + 0.5) * radiusStep;", "vec2 sampleUvOffset = vec2( cos( angle ), sin( angle ) ) * radius * occlusionSphereScreenRadius * 1.0;", "sampleUvOffset = floor( sampleUvOffset * size + vec2( 0.5 ) ) * invSize;", "if( sampleUvOffset.x == 0.0 && sampleUvOffset.y == 0.0 ) continue;", "angle += ANGLE_STEP;", "vec2 sampleUv = vUv + sampleUvOffset;", "if( sampleUv.x <= 0.0 || sampleUv.y <= 0.0 || sampleUv.x >= 1.0 || sampleUv.y >= 1.0 ) continue;", "float sampleDepth = getDepthMIP( sampleUv, int( 4.0 * radius ) );", "if( sampleDepth >= ( 1.0 - EPSILON ) ) {", "continue;", "}", "float sampleViewZ = getViewZ( sampleDepth );", "vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );", "occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );", "}", "return occlusionSum * intensity * 2.0 * occlusionSphereWorldRadius / ( float( NUM_SAMPLES ) );", "}", "void main() {", "float centerDepth = getDepth( vUv );", "if( centerDepth >= ( 1.0 - EPSILON ) ) {", "discard;", "}", "float centerViewZ = getViewZ( centerDepth );", "vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );", "float ambientOcclusion = getAmbientOcclusion( viewPosition );", "gl_FragColor = packDepthToRGBA( centerDepth );", "gl_FragColor.x = max( 1.0 - ambientOcclusion, 0.0 );", "}"].join("\n")
        },
        n.SAODepthMinifyShader = {
            blending: n.NoBlending,
            defines: {
                DEPTH_PACKING: 1
            },
            uniforms: {
                tDepth: {
                    type: "t",
                    value: null
                },
                cameraNear: {
                    type: "f",
                    value: 1
                },
                cameraFar: {
                    type: "f",
                    value: 100
                },
                size: {
                    type: "v2",
                    value: new n.Vector2(256,256)
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["#include <common>", "#include <packing>", "varying vec2 vUv;", "uniform sampler2D tDepth;", "uniform vec2 size;", "uniform float cameraNear;", "uniform float cameraFar;", "void main() {", "vec2 uv = vUv;", "vec2 invSize = 0.5 / size;", "float depth = unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, -1.0 ) ) );", "depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );", "depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) );", "depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) );", "depth *= 0.25;", "gl_FragColor = packDepthToRGBA( depth );", "}"].join("\n")
        },
        n.SAOBilaterialFilterShader = {
            blending: n.NoBlending,
            defines: {
                PERSPECTIVE_CAMERA: 1,
                KERNEL_SAMPLE_RADIUS: 4
            },
            uniforms: {
                tAODepth: {
                    type: "t",
                    value: null
                },
                tAONormal: {
                    type: "t",
                    value: null
                },
                size: {
                    type: "v2",
                    value: new n.Vector2(256,256)
                },
                kernelDirection: {
                    type: "v2",
                    value: new n.Vector2(1,0)
                },
                cameraNear: {
                    type: "f",
                    value: 1
                },
                cameraFar: {
                    type: "f",
                    value: 100
                },
                edgeSharpness: {
                    type: "f",
                    value: 3
                },
                packOutput: {
                    type: "f",
                    value: 1
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["#include <common>", "varying vec2 vUv;", "uniform sampler2D tAODepth;", "uniform sampler2D tAONormal;", "uniform vec2 size;", "uniform float cameraNear;", "uniform float cameraFar;", "uniform float edgeSharpness;", "uniform int packOutput;", "uniform vec2 kernelDirection;", "#include <packing>", "float getViewZ( const in float depth ) {", "#if PERSPECTIVE_CAMERA == 1", "return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );", "#else", "return orthographicDepthToViewZ( depth, cameraNear, cameraFar );", "#endif", "}", "void addTapInfluence( const in vec2 tapUv, const in vec3 centerNormal, const in float centerViewZ, const in float kernelWeight, inout float aoSum, inout float weightSum ) {", "vec4 depthTexel = texture2D( tAODepth, tapUv );", "float ao = depthTexel.r;", "depthTexel.r = 1.0;", "float depth = unpackRGBAToDepth( depthTexel );", "if( depth >= ( 1.0 - EPSILON ) ) {", "return;", "}", "float tapViewZ = -getViewZ( depth );", "float depthWeight = max(0.0, 1.0 - (edgeSharpness * 20.0) * abs(tapViewZ - centerViewZ));", "vec3 normal = unpackRGBToNormal(texture2D(tAONormal, tapUv).rgb);", "float normalCloseness = dot(normal, centerNormal);", "float k_normal = 4.0;", "float normalError = (1.0 - pow4( normalCloseness )) * k_normal;", "float normalWeight = max((1.0 - edgeSharpness * normalError), 0.00);", "float tapWeight = kernelWeight * ( depthWeight + normalWeight );", "aoSum += ao * tapWeight;", "weightSum += tapWeight;", "}", "float normpdf(in float x, in float sigma) {", "return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;", "}", "void main() {", "vec4 depthTexel = texture2D( tAODepth, vUv );", "float ao = depthTexel.r;", "depthTexel.r = 1.0;", "float depth = unpackRGBAToDepth( depthTexel );", "if( depth >= ( 1.0 - EPSILON ) ) {", "discard;", "}", "float centerViewZ = -getViewZ( depth );", "float weightSum = normpdf(0.0, 5.0) + 0.1;", "float aoSum = ao * weightSum;", "vec2 uvIncrement = ( kernelDirection / size );", "vec2 rTapUv = vUv, lTapUv = vUv;", "vec3 normalCenter = unpackRGBToNormal(texture2D(tAONormal, vUv).rgb);", "for( int i = 1; i <= KERNEL_SAMPLE_RADIUS; i ++ ) {", "float kernelWeight = normpdf(float(i), 5.0) + 0.1;", "rTapUv += uvIncrement;", "addTapInfluence( rTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );", "lTapUv -= uvIncrement;", "addTapInfluence( lTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );", "}", "ao = aoSum / weightSum;", "if( packOutput == 1 ) {", "gl_FragColor = depthTexel;", "gl_FragColor.r = ao;", "}", "else {", "gl_FragColor = vec4( vec3( ao ), 1.0 );", "}", "}"].join("\n")
        },
        n.BlurShader = {
            defines: {
                KERNEL_RADIUS: 4
            },
            uniforms: {
                tDiffuse: {
                    type: "t",
                    value: null
                },
                size: {
                    type: "v2",
                    value: new n.Vector2(512,512)
                },
                sampleUvOffsets: {
                    type: "v2v",
                    value: [new n.Vector2(0,0)]
                },
                sampleWeights: {
                    type: "1fv",
                    value: [1]
                }
            },
            vertexShader: ["#include <common>", "varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "uniform vec2 size;", "uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];", "uniform float sampleWeights[ KERNEL_RADIUS + 1 ];", "varying vec2 vUv;", "void main() {", "vec2 invSize = 1.0 / size;", "float weightSum = sampleWeights[0];", "vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;", "for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {", "float weight = sampleWeights[i];", "vec2 sampleUvOffset = sampleUvOffsets[i] * invSize;", "diffuseSum += ( texture2D( tDiffuse, vUv + sampleUvOffset ) + texture2D( tDiffuse, vUv - sampleUvOffset ) ) * weight;", "weightSum += 2.0 * weight;", "}", "gl_FragColor =diffuseSum / weightSum;", "}"].join("\n")
        },
        n.BlurShaderUtils = {
            createSampleWeights: function(e, t) {
                for (var r = function(e, t) {
                    return Math.exp(-(e * e) / (2 * (t * t))) / (Math.sqrt(2 * Math.PI) * t)
                }, n = [], i = 0; i <= e; i++)
                    n.push(r(i, t));
                return n
            },
            createSampleOffsets: function(e, t) {
                for (var r = [], n = 0; n <= e; n++)
                    r.push(t.clone().multiplyScalar(n));
                return r
            },
            configure: function(e, t, r, i) {
                t |= 0,
                e.defines.KERNEL_RADIUS === t && e.stdDev == r || (e.defines.KERNEL_RADIUS = t,
                e.uniforms.sampleUvOffsets.value = n.BlurShaderUtils.createSampleOffsets(t, i),
                e.uniforms.sampleWeights.value = n.BlurShaderUtils.createSampleWeights(t, r),
                e.uvIncrement = i,
                e.stdDev = r,
                e.needsUpdate = !0)
            }
        },
        n.LuminosityHighPassShader = {
            shaderID: "luminosityHighPass",
            uniforms: {
                tDiffuse: {
                    type: "t",
                    value: null
                },
                luminosityThreshold: {
                    type: "f",
                    value: 1
                },
                smoothWidth: {
                    type: "f",
                    value: 1
                },
                defaultColor: {
                    type: "c",
                    value: new n.Color(0)
                },
                defaultOpacity: {
                    type: "f",
                    value: 0
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "uniform vec3 defaultColor;", "uniform float defaultOpacity;", "uniform float luminosityThreshold;", "uniform float smoothWidth;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "vec3 luma = vec3( 0.299, 0.587, 0.114 );", "float v = dot( texel.xyz, luma );", "vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );", "float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );", "gl_FragColor = mix( outputColor, texel, alpha );", "}"].join("\n")
        },
        n.EffectComposer = function(e, t) {
            if (this.renderer = e,
            void 0 === t) {
                var r = {
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat,
                    stencilBuffer: !1
                }
                  , i = e.getSize();
                t = new n.WebGLRenderTarget(i.width,i.height,r),
                t.texture.name = "EffectComposer.rt1"
            }
            this.renderTarget1 = t,
            this.renderTarget2 = t.clone(),
            this.renderTarget2.texture.name = "EffectComposer.rt2",
            this.writeBuffer = this.renderTarget1,
            this.readBuffer = this.renderTarget2,
            this.passes = [],
            void 0 === n.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"),
            this.copyPass = new n.ShaderPass(n.CopyShader)
        }
        ,
        Object.assign(n.EffectComposer.prototype, {
            swapBuffers: function() {
                var e = this.readBuffer;
                this.readBuffer = this.writeBuffer,
                this.writeBuffer = e
            },
            addPass: function(e) {
                this.passes.push(e);
                var t = this.renderer.getSize();
                e.setSize(t.width, t.height)
            },
            insertPass: function(e, t) {
                this.passes.splice(t, 0, e)
            },
            render: function(e) {
                var t, r, i = !1, a = this.passes.length;
                for (r = 0; r < a; r++)
                    if (t = this.passes[r],
                    t.enabled !== !1) {
                        if (t.render(this.renderer, this.writeBuffer, this.readBuffer, e, i),
                        t.needsSwap) {
                            if (i) {
                                var o = this.renderer.context;
                                o.stencilFunc(o.NOTEQUAL, 1, 4294967295),
                                this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, e),
                                o.stencilFunc(o.EQUAL, 1, 4294967295)
                            }
                            this.swapBuffers()
                        }
                        void 0 !== n.MaskPass && (t instanceof n.MaskPass ? i = !0 : t instanceof n.ClearMaskPass && (i = !1))
                    }
            },
            reset: function(e) {
                if (void 0 === e) {
                    var t = this.renderer.getSize();
                    e = this.renderTarget1.clone(),
                    e.setSize(t.width, t.height)
                }
                this.renderTarget1.dispose(),
                this.renderTarget2.dispose(),
                this.renderTarget1 = e,
                this.renderTarget2 = e.clone(),
                this.writeBuffer = this.renderTarget1,
                this.readBuffer = this.renderTarget2
            },
            setSize: function(e, t) {
                this.renderTarget1.setSize(e, t),
                this.renderTarget2.setSize(e, t);
                for (var r = 0; r < this.passes.length; r++)
                    this.passes[r].setSize(e, t)
            }
        }),
        n.Pass = function() {
            this.enabled = !0,
            this.needsSwap = !0,
            this.clear = !1,
            this.renderToScreen = !1
        }
        ,
        Object.assign(n.Pass.prototype, {
            setSize: function(e, t) {},
            render: function(e, t, r, n, i) {
                console.error("THREE.Pass: .render() must be implemented in derived pass.")
            }
        }),
        n.RenderPass = function(e, t, r, i, a) {
            n.Pass.call(this),
            this.scene = e,
            this.camera = t,
            this.overrideMaterial = r,
            this.clearColor = i,
            this.clearAlpha = void 0 !== a ? a : 0,
            this.clear = !0,
            this.clearDepth = !1,
            this.needsSwap = !1
        }
        ,
        n.RenderPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.RenderPass,
            render: function(e, t, r, n, i) {
                var a = e.autoClear;
                e.autoClear = !1,
                this.scene.overrideMaterial = this.overrideMaterial;
                var o, s;
                void 0 !== this.clearColor && (o = e.getClearColor(),
                s = e.getClearAlpha(),
                e.setClearColor(this.clearColor, this.clearAlpha)),
                this.clearDepth && e.clearDepth(),
                e.renderOverride(this.overrideMaterial, this.scene, this.camera, this.renderToScreen ? null : r, this.clear),
                this.clearColor && e.setClearColor(o, s),
                this.scene.overrideMaterial = null,
                e.autoClear = a
            }
        }),
        n.MaskPass = function(e, t) {
            n.Pass.call(this),
            this.scene = e,
            this.camera = t,
            this.clear = !0,
            this.needsSwap = !1,
            this.inverse = !1
        }
        ,
        n.MaskPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.MaskPass,
            render: function(e, t, r, n, i) {
                var a = e.context
                  , o = e.state;
                o.buffers.color.setMask(!1),
                o.buffers.depth.setMask(!1),
                o.buffers.color.setLocked(!0),
                o.buffers.depth.setLocked(!0);
                var s, u;
                this.inverse ? (s = 0,
                u = 1) : (s = 1,
                u = 0),
                o.buffers.stencil.setTest(!0),
                o.buffers.stencil.setOp(a.REPLACE, a.REPLACE, a.REPLACE),
                o.buffers.stencil.setFunc(a.ALWAYS, s, 4294967295),
                o.buffers.stencil.setClear(u),
                e.render(this.scene, this.camera, r, this.clear),
                e.render(this.scene, this.camera, t, this.clear),
                o.buffers.color.setLocked(!1),
                o.buffers.depth.setLocked(!1),
                o.buffers.stencil.setFunc(a.EQUAL, 1, 4294967295),
                o.buffers.stencil.setOp(a.KEEP, a.KEEP, a.KEEP)
            }
        }),
        n.ClearMaskPass = function() {
            n.Pass.call(this),
            this.needsSwap = !1
        }
        ,
        n.ClearMaskPass.prototype = Object.create(n.Pass.prototype),
        Object.assign(n.ClearMaskPass.prototype, {
            render: function(e, t, r, n, i) {
                e.state.buffers.stencil.setTest(!1)
            }
        }),
        n.ShaderPass = function(e, t) {
            n.Pass.call(this),
            this.textureID = void 0 !== t ? t : "tDiffuse",
            e instanceof n.ShaderMaterial ? (this.uniforms = e.uniforms,
            this.material = e) : e && (this.uniforms = n.UniformsUtils.clone(e.uniforms),
            this.material = new n.ShaderMaterial({
                defines: e.defines || {},
                uniforms: this.uniforms,
                vertexShader: e.vertexShader,
                fragmentShader: e.fragmentShader
            })),
            this.camera = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.scene = new n.Scene,
            this.quad = new n.Mesh(new n.PlaneBufferGeometry(2,2),null),
            this.quad.frustumCulled = !1,
            this.scene.add(this.quad)
        }
        ,
        n.ShaderPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.ShaderPass,
            render: function(e, t, r, n, i) {
                this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = r.texture),
                this.renderToScreen ? e.renderPass(this.material) : e.renderPass(this.material, t, this.clear)
            }
        }),
        n.SAOPass = function(e, t) {
            n.Pass.call(this),
            this.scene = e,
            this.camera = t,
            this.intensity = .5,
            this.implicitNormals = !1,
            this.occlusionSphereWorldRadius = 20,
            this.blurEnabled = !0,
            this.outputOverride = null,
            this.depthMIPs = !1,
            this.downSamplingRatio = 2,
            this.blurKernelSize = 1 === this.downSamplingRatio ? 8 : 6,
            this.edgeSharpness = 1,
            this.depthMaterial = new n.MeshDepthMaterial,
            this.depthMaterial.depthPacking = n.RGBADepthPacking,
            this.depthMaterial.blending = n.NoBlending,
            this.depthMaterial.side = n.DoubleSide,
            this.normalMaterial = new n.MeshNormalMaterial,
            this.normalMaterial.side = this.depthMaterial.side,
            void 0 === n.SAOShader && console.error("THREE.SAOPass relies on THREE.SAOShader"),
            void 0 === n.CopyShader && console.error("THREE.SAOPass relies on THREE.CopyShader"),
            this.depthMinifyMaterial = new n.ShaderMaterial(n.SAODepthMinifyShader),
            this.depthMinifyMaterial.uniforms = n.UniformsUtils.clone(this.depthMinifyMaterial.uniforms),
            this.depthMinifyMaterial.defines = Object.assign({}, this.depthMinifyMaterial.defines),
            this.depthMinifyMaterial.blending = n.NoBlending,
            this.saoMaterial = new n.ShaderMaterial(n.SAOShader),
            this.saoMaterial.uniforms = n.UniformsUtils.clone(this.saoMaterial.uniforms),
            this.saoMaterial.defines = Object.assign({}, this.saoMaterial.defines),
            this.saoMaterial.defines.DIFFUSE_TEXTURE = 0,
            this.saoMaterial.defines.NORMAL_TEXTURE = this.implicitNormals ? 0 : 1,
            this.saoMaterial.defines.MODE = 2,
            this.bilateralFilterMaterial = new n.ShaderMaterial(n.SAOBilaterialFilterShader),
            this.bilateralFilterMaterial.uniforms = n.UniformsUtils.clone(this.bilateralFilterMaterial.uniforms),
            this.bilateralFilterMaterial.defines = Object.assign({}, this.bilateralFilterMaterial.defines),
            this.bilateralFilterMaterial.blending = n.NoBlending,
            this.bilateralFilterMaterial.premultipliedAlpha = !0,
            this.bilateralUpsamplerMaterial = this.getBilateralUpsamplerMaterial(),
            this.copyMaterial = new n.ShaderMaterial(n.CopyShader),
            this.copyMaterial.uniforms = n.UniformsUtils.clone(this.copyMaterial.uniforms),
            this.copyMaterial.uniforms.opacity.value = 1,
            this.copyMaterial.blending = n.NoBlending,
            this.copyMaterial.premultipliedAlpha = !0,
            this.copyMaterial.transparent = !0,
            this.copyMaterial.depthTest = !1,
            this.copyMaterial.depthWrite = !1
        }
        ,
        n.SAOPass.prototype = {
            dispose: function() {
                this.saoRenderTarget && (this.saoRenderTarget.dispose(),
                this.saoRenderTarget = null),
                this.blurIntermediateRenderTarget && (this.blurIntermediateRenderTarget.dispose(),
                this.blurIntermediateRenderTarget = null),
                this.depthRenderTarget && (this.depthRenderTarget.dispose(),
                this.depthRenderTarget = null),
                this.depth1RenderTarget && (this.depth1RenderTarget.dispose(),
                this.depth1RenderTarget = null),
                this.depth2RenderTarget && (this.depth2RenderTarget.dispose(),
                this.depth2RenderTarget = null),
                this.depth3RenderTarget && (this.depth3RenderTarget.dispose(),
                this.depth3RenderTarget = null),
                this.normalRenderTarget && (this.normalRenderTarget.dispose(),
                this.normalRenderTarget = null),
                this.normalRenderTargetFullRes && (this.normalRenderTargetFullRes.dispose(),
                this.normalRenderTargetFullRes = null),
                this.depthRenderTargetFullRes && (this.depthRenderTargetFullRes.dispose(),
                this.depthRenderTargetFullRes = null),
                this.saoRenderTargetFullRes && (this.saoRenderTargetFullRes.dispose(),
                this.saoRenderTargetFullRes = null)
            },
            setSize: function(e, t) {
                this.saoRenderTargetFullRes && this.saoRenderTargetFullRes.setSize(e, t),
                this.depthRenderTargetFullRes && this.depthRenderTargetFullRes.setSize(e, t),
                this.normalRenderTargetFullRes && this.normalRenderTargetFullRes.setSize(e, t),
                e = Math.ceil(e / this.downSamplingRatio),
                t = Math.ceil(t / this.downSamplingRatio),
                this.saoRenderTarget && this.saoRenderTarget.setSize(e, t),
                this.blurIntermediateRenderTarget && this.blurIntermediateRenderTarget.setSize(e, t),
                this.depthRenderTarget && this.depthRenderTarget.setSize(e, t),
                this.depth1RenderTarget && this.depth1RenderTarget.setSize(Math.ceil(e / 2), Math.ceil(t / 2)),
                this.depth2RenderTarget && this.depth2RenderTarget.setSize(Math.ceil(e / 4), Math.ceil(t / 4)),
                this.depth3RenderTarget && this.depth3RenderTarget.setSize(Math.ceil(e / 8), Math.ceil(t / 8)),
                this.normalRenderTarget && this.normalRenderTarget.setSize(e, t),
                this.saoMaterial.uniforms.size.value.set(e, t),
                this.bilateralFilterMaterial.uniforms.size.value.set(e, t)
            },
            updateParameters: function(e) {
                var t = 1 / (2 * Math.tan(n.Math.DEG2RAD * e.fov * .5))
                  , r = new n.Vector2(t / e.aspect,t);
                this.saoMaterial.uniforms.worldToScreenRatio.value = r,
                this.saoMaterial.uniforms.intensity.value = this.intensity,
                this.saoMaterial.uniforms.occlusionSphereWorldRadius.value = this.occlusionSphereWorldRadius,
                this.depthMinifyMaterial.uniforms.cameraNear.value = e.near,
                this.depthMinifyMaterial.uniforms.cameraFar.value = e.far,
                this.saoMaterial.uniforms.cameraNear.value = e.near,
                this.saoMaterial.uniforms.cameraFar.value = e.far,
                this.saoMaterial.uniforms.cameraProjectionMatrix.value = e.projectionMatrix,
                this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(e.projectionMatrix),
                this.bilateralFilterMaterial.uniforms.cameraNear.value = e.near,
                this.bilateralFilterMaterial.uniforms.cameraFar.value = e.far
            },
            render: function(e, t, r, i, a) {
                var o = r.width
                  , s = r.height;
                o = Math.ceil(o / this.downSamplingRatio),
                s = Math.ceil(s / this.downSamplingRatio);
                var u = r.depthBuffer && r.depthTexture ? r.depthTexture : null;
                this.saoRenderTarget || (this.saoRenderTarget = new n.WebGLRenderTarget(o,s,{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.saoRenderTargetFullRes = new n.WebGLRenderTarget(r.width,r.height,{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.blurIntermediateRenderTarget = new n.WebGLRenderTarget(o,s,{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.depth1RenderTarget = new n.WebGLRenderTarget(Math.ceil(o / 2),Math.ceil(s / 2),{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.depth2RenderTarget = new n.WebGLRenderTarget(Math.ceil(o / 4),Math.ceil(s / 4),{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.depth3RenderTarget = new n.WebGLRenderTarget(Math.ceil(o / 8),Math.ceil(s / 8),{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.normalRenderTarget = new n.WebGLRenderTarget(o,s,{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                }),
                this.normalRenderTargetFullRes = new n.WebGLRenderTarget(r.width,r.height,{
                    minFilter: n.LinearFilter,
                    magFilter: n.LinearFilter,
                    format: n.RGBAFormat
                })),
                u || this.depthRenderTarget || (this.depthRenderTarget = new n.WebGLRenderTarget(o,s,{
                    minFilter: n.NearestFilter,
                    magFilter: n.NearestFilter,
                    format: n.RGBAFormat
                }),
                this.depthRenderTargetFullRes = new n.WebGLRenderTarget(r.width,r.height,{
                    minFilter: n.NearestFilter,
                    magFilter: n.NearestFilter,
                    format: n.RGBAFormat
                })),
                this.updateParameters(this.camera);
                var l = e.getClearColor()
                  , c = e.getClearAlpha()
                  , h = e.autoClear;
                e.autoClear = !1,
                this.renderToScreen || (this.copyMaterial.uniforms.tDiffuse.value = r.texture,
                this.copyMaterial.blending = n.NoBlending,
                e.renderPass(this.copyMaterial, t, !0));
                var f = 0;
                if (!u) {
                    var d = e.getClearColor()
                      , p = e.getClearAlpha();
                    e.setClearColor(16777215, 1),
                    e.renderOverride(this.depthMaterial, this.scene, this.camera, this.depthRenderTarget, !0),
                    e.setClearColor(16777215, 1),
                    1 !== this.downSamplingRatio && (e.renderOverride(this.depthMaterial, this.scene, this.camera, this.depthRenderTargetFullRes, !0),
                    e.setClearColor(d, p)),
                    u = this.depthRenderTarget.texture,
                    f = 1
                }
                if (this.depthMIPs && (this.depthMinifyMaterial.uniforms.tDepth.value = u,
                this.depthMinifyMaterial.uniforms.size.value.set(o, s),
                e.renderPass(this.depthMinifyMaterial, this.depth1RenderTarget, !0),
                this.depthMinifyMaterial.uniforms.tDepth.value = this.depth1RenderTarget.texture,
                this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(o / 2), Math.ceil(s / 2)),
                e.renderPass(this.depthMinifyMaterial, this.depth2RenderTarget, !0),
                this.depthMinifyMaterial.uniforms.tDepth.value = this.depth2RenderTarget.texture,
                this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(o / 4), Math.ceil(s / 4)),
                e.renderPass(this.depthMinifyMaterial, this.depth3RenderTarget, !0)),
                "depth" === this.outputOverride)
                    return this.copyMaterial.uniforms.tDiffuse.value = u,
                    this.copyMaterial.blending = n.NoBlending,
                    void e.renderPass(this.copyMaterial, this.renderToScreen ? null : t, !0);
                if ("depth1" === this.outputOverride)
                    return this.copyMaterial.uniforms.tDiffuse.value = this.depth1RenderTarget.texture,
                    this.copyMaterial.blending = n.NoBlending,
                    void e.renderPass(this.copyMaterial, this.renderToScreen ? null : t, !0);
                if ("depth2" === this.outputOverride)
                    return this.copyMaterial.uniforms.tDiffuse.value = this.depth2RenderTarget.texture,
                    this.copyMaterial.blending = n.NoBlending,
                    void e.renderPass(this.copyMaterial, this.renderToScreen ? null : t, !0);
                if ("depth3" === this.outputOverride)
                    return this.copyMaterial.uniforms.tDiffuse.value = this.depth3RenderTarget.texture,
                    this.copyMaterial.blending = n.NoBlending,
                    void e.renderPass(this.copyMaterial, this.renderToScreen ? null : t, !0);
                if (!this.implicitNormals) {
                    var d = e.getClearColor()
                      , p = e.getClearAlpha();
                    e.setClearColor(new n.Color(.5,.5,1), 1),
                    e.renderOverride(this.normalMaterial, this.scene, this.camera, this.normalRenderTarget, !0),
                    1 !== this.downSamplingRatio && (e.setClearColor(new n.Color(.5,.5,1), 1),
                    e.renderOverride(this.normalMaterial, this.scene, this.camera, this.normalRenderTargetFullRes, !0)),
                    e.setClearColor(d, p)
                }
                if ("normal" === this.outputOverride)
                    return this.copyMaterial.uniforms.tDiffuse.value = this.normalRenderTarget.texture,
                    this.copyMaterial.blending = n.NoBlending,
                    void e.renderPass(this.copyMaterial, this.renderToScreen ? null : this.renderToScreen ? null : t, !0);
                this.saoMaterial.defines.DEPTH_PACKING = f,
                this.saoMaterial.defines.DEPTH_MIPS = this.depthMIPs ? 1 : 0,
                this.saoMaterial.uniforms.tNormal.value = this.normalRenderTarget.texture,
                this.saoMaterial.uniforms.tDepth.value = u,
                this.depthMIPs && (this.saoMaterial.uniforms.tDepth1.value = this.depth1RenderTarget.texture,
                this.saoMaterial.uniforms.tDepth2.value = this.depth2RenderTarget.texture,
                this.saoMaterial.uniforms.tDepth3.value = this.depth3RenderTarget.texture);
                var d = e.getClearColor()
                  , p = e.getClearAlpha();
                return e.setClearColor(16777215, 1),
                e.renderPass(this.saoMaterial, this.saoRenderTarget, !0),
                this.blurEnabled && (this.bilateralFilterMaterial.defines.KERNEL_SAMPLE_RADIUS = this.blurKernelSize,
                this.bilateralFilterMaterial.uniforms.tAODepth.value = this.saoRenderTarget.texture,
                this.bilateralFilterMaterial.uniforms.tAONormal.value = this.normalRenderTarget.texture,
                this.bilateralFilterMaterial.uniforms.kernelDirection.value = new n.Vector2(1,0),
                this.bilateralFilterMaterial.uniforms.packOutput.value = 1,
                this.bilateralFilterMaterial.uniforms.edgeSharpness.value = this.edgeSharpness,
                e.renderPass(this.bilateralFilterMaterial, this.blurIntermediateRenderTarget, !0),
                this.bilateralFilterMaterial.uniforms.tAODepth.value = this.blurIntermediateRenderTarget.texture,
                this.bilateralFilterMaterial.uniforms.kernelDirection.value = new n.Vector2(0,1),
                this.bilateralFilterMaterial.uniforms.packOutput.value = 0,
                e.renderPass(this.bilateralFilterMaterial, this.saoRenderTarget, !0)),
                this.downSamplingRatio > 1 && (this.bilateralUpsamplerMaterial.uniforms.inputTexture.value = this.saoRenderTarget.texture,
                this.bilateralUpsamplerMaterial.uniforms.NormalTextureFullRes.value = this.normalRenderTargetFullRes.texture,
                this.bilateralUpsamplerMaterial.uniforms.DepthTextureFullRes.value = this.depthRenderTargetFullRes.texture,
                this.bilateralUpsamplerMaterial.uniforms.NormalTextureHalfRes.value = this.normalRenderTarget.texture,
                this.bilateralUpsamplerMaterial.uniforms.DepthTextureHalfRes.value = this.depthRenderTarget.texture,
                this.bilateralUpsamplerMaterial.uniforms.texSize.value = new n.Vector2(this.saoRenderTarget.width,this.saoRenderTarget.height),
                this.bilateralUpsamplerMaterial.uniforms.cameraNearFar.value = new n.Vector2(this.camera.near,this.camera.far),
                e.renderPass(this.bilateralUpsamplerMaterial, this.saoRenderTargetFullRes, !0)),
                e.setClearColor(d, p),
                "sao" === this.outputOverride ? (this.copyMaterial.uniforms.tDiffuse.value = this.downSamplingRatio > 1 ? this.saoRenderTargetFullRes.texture : this.saoRenderTarget.texture,
                this.copyMaterial.blending = n.NoBlending,
                void e.renderPass(this.copyMaterial, this.renderToScreen ? null : t, !0)) : (e.autoClear = !1,
                this.copyMaterial.uniforms.tDiffuse.value = this.downSamplingRatio > 1 ? this.saoRenderTargetFullRes.texture : this.saoRenderTarget.texture,
                this.copyMaterial.blending = n.MultiplyBlending,
                this.copyMaterial.premultipliedAlpha = !0,
                e.renderPass(this.copyMaterial, this.renderToScreen ? null : t, !1),
                e.autoClear = h,
                e.setClearColor(l),
                void e.setClearAlpha(c))
            },
            getBilateralUpsamplerMaterial: function(e) {
                return new n.ShaderMaterial({
                    uniforms: {
                        inputTexture: {
                            value: null
                        },
                        NormalTextureFullRes: {
                            value: null
                        },
                        DepthTextureFullRes: {
                            value: null
                        },
                        NormalTextureHalfRes: {
                            value: null
                        },
                        DepthTextureHalfRes: {
                            value: null
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        cameraNearFar: {
                            value: new n.Vector2(.5,.5)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\t#include <packing>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D inputTexture;\n\t\t\t\t\tuniform sampler2D NormalTextureFullRes;\n\t\t\t\t\tuniform sampler2D DepthTextureFullRes;\n\t\t\t\t\tuniform sampler2D NormalTextureHalfRes;\n\t\t\t\t\tuniform sampler2D DepthTextureHalfRes;\n\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\t\t\tvoid main()\t\t\t\t\t{\t\t\t\t\t\tvec2 uvOffsets[4];\t\t\t\t\t\tuvOffsets[0] = vUv + vec2(0.0, 1.0)/texSize;\t\t\t\t\t\tuvOffsets[1] = vUv + vec2(1.0, 0.0)/texSize;\t\t\t\t\t\tuvOffsets[2] = vUv + vec2(-1.0, 0.0)/texSize;\t\t\t\t\t\tuvOffsets[3] = vUv + vec2(0.0, -1.0)/texSize;\t\t\t\t\t\t\t\t\t\t\t\tfloat depth_weights[4];\t\t\t\t\t\tfloat depth_hires = unpackRGBAToDepth(texture2D(DepthTextureFullRes, vUv));\t\t\t\t\t\tdepth_hires = -perspectiveDepthToViewZ(depth_hires, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tif(depth_hires == 1.0)\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\tfloat depth_coarse1 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[0]));\t\t\t\t\t\tdepth_coarse1 = -perspectiveDepthToViewZ(depth_coarse1, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tdepth_weights[0] = 1.0 / (0.001 + abs(depth_hires-depth_coarse1));\t\t\t\t\t\tfloat depth_coarse2 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[1]));\t\t\t\t\t\tdepth_coarse2 = -perspectiveDepthToViewZ(depth_coarse2, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tdepth_weights[1] = 1.0 / (0.001 + abs(depth_hires-depth_coarse2));\t\t\t\t\t\tfloat depth_coarse3 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[2]));\t\t\t\t\t\tdepth_coarse3 = -perspectiveDepthToViewZ(depth_coarse3, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tdepth_weights[2] = 1.0 / (0.001 + abs(depth_hires-depth_coarse3));\t\t\t\t\t\tfloat depth_coarse4 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[3]));\t\t\t\t\t\tdepth_coarse4 = -perspectiveDepthToViewZ(depth_coarse4, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tdepth_weights[3] = 1.0 / (0.001 + abs(depth_hires-depth_coarse4));\t\t\t\t\t\t\t\t\t\t\t\tfloat norm_weights[4];\t\t\t\t\t\tvec3 norm_fullRes = unpackRGBToNormal(texture2D(NormalTextureFullRes, vUv).rgb);\t\t\t\t\t\tvec3 norm_coarse1 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[0]).rgb);\t\t\t\t\t\tnorm_weights[0] = pow(abs(dot(norm_coarse1, norm_fullRes)), 32.0);\t\t\t\t\t\tvec3 norm_coarse2 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[1]).rgb);\t\t\t\t\t\tnorm_weights[1] = pow(abs(dot(norm_coarse2, norm_fullRes)), 32.0);\t\t\t\t\t\tvec3 norm_coarse3 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[2]).rgb);\t\t\t\t\t\tnorm_weights[2] = pow(abs(dot(norm_coarse3, norm_fullRes)), 32.0);\t\t\t\t\t\tvec3 norm_coarse4 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[3]).rgb);\t\t\t\t\t\tnorm_weights[3] = pow(abs(dot(norm_coarse4, norm_fullRes)), 32.0);\t\t\t\t\t\t\t\t\t\t\t\tvec3 colorOut = vec3(0.0);\t\t\t\t\t\tfloat weight_sum = 0.0;\t\t\t\t\t\tfloat weight = norm_weights[0] * depth_weights[0];\t\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[0]).rgb*weight;\t\t\t\t\t\tweight_sum += weight;\t\t\t\t\t  weight = norm_weights[1] * depth_weights[1];\t\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[1]).rgb*weight;\t\t\t\t\t\tweight_sum += weight;\t\t\t\t\t  weight = norm_weights[2] * depth_weights[2];\t\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[2]).rgb*weight;\t\t\t\t\t\tweight_sum += weight;\t\t\t\t\t  weight = norm_weights[3] * depth_weights[3];\t\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[3]).rgb*weight;\t\t\t\t\t\tweight_sum += weight;\t\t\t\t\t\tcolorOut /= weight_sum;\t\t\t\t\t\tgl_FragColor = vec4(colorOut, 1.0);\t\t\t\t\t}"
                })
            }
        },
        n.SSAARenderPass = function(e, t, r, i) {
            n.Pass.call(this),
            this.scene = e,
            this.camera = t,
            this.sampleLevel = 4,
            this.unbiased = !0,
            this.needsSwap = !1,
            this.clearColor = void 0 !== r ? r : 0,
            this.clearAlpha = void 0 !== i ? i : 0,
            void 0 === n.CopyShader && console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),
            this.overMaterial = new n.ShaderMaterial(n.CopyShader),
            this.overMaterial.uniforms = n.UniformsUtils.clone(this.overMaterial.uniforms),
            this.overMaterial.blending = n.NormalBlending,
            this.overMaterial.premultipliedAlpha = !0,
            this.overMaterial.transparent = !0,
            this.overMaterial.depthTest = !1,
            this.overMaterial.depthWrite = !1,
            this.addMaterial = new n.ShaderMaterial(n.CopyShader),
            this.addMaterial.uniforms = n.UniformsUtils.clone(this.addMaterial.uniforms),
            this.addMaterial.blending = n.AdditiveBlending,
            this.addMaterial.premultipliedAlpha = !0,
            this.addMaterial.transparent = !0,
            this.addMaterial.depthTest = !1,
            this.addMaterial.depthWrite = !1,
            this.camera2 = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.scene2 = new n.Scene,
            this.quad2 = new n.Mesh(new n.PlaneGeometry(2,2),this.copyMaterial),
            this.quad2.frustumCulled = !1,
            this.scene2.add(this.quad2)
        }
        ,
        n.SSAARenderPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.SSAARenderPass,
            dispose: function() {
                this.sampleRenderTarget && (this.sampleRenderTarget.dispose(),
                this.sampleRenderTarget = null),
                this.accumulateRenderTarget && (this.accumulateRenderTarget.dispose(),
                this.accumulateRenderTarget = null)
            },
            setSize: function(e, t) {
                this.sampleRenderTarget && this.sampleRenderTarget.setSize(e, t),
                this.accumulateRenderTarget && this.accumulateRenderTarget.setSize(e, t)
            },
            render: function(e, t, r, i, a) {
                this.sampleRenderTarget || (this.sampleRenderTarget = new n.WebGLRenderTarget(r.width,r.height,{
                    minFilter: n.NearestFilter,
                    magFilter: n.NearestFilter,
                    format: n.RGBAFormat,
                    name: "SSAARenderPass.sample"
                }),
                this.accumulateRenderTarget = new n.WebGLRenderTarget(r.width,r.height,{
                    minFilter: n.NearestFilter,
                    magFilter: n.NearestFilter,
                    format: n.RGBAFormat,
                    name: "SSAARenderPass.accumulation"
                }));
                var o = n.SSAARenderPass.JitterVectors[Math.max(0, Math.min(this.sampleLevel, 5))]
                  , s = e.autoClear;
                e.autoClear = !1;
                var u = e.getClearColor().getHex()
                  , l = e.getClearAlpha()
                  , c = 1 / o.length
                  , h = 1 / 32;
                this.addMaterial.uniforms.tDiffuse.value = this.sampleRenderTarget.texture;
                var f = r.width
                  , d = r.height;
                e.setClearColor(0, 0);
                for (var p = 0; p < o.length; p++) {
                    var m = o[p];
                    this.camera.setViewOffset && this.camera.setViewOffset(f, d, .0625 * m[0], .0625 * m[1], f, d);
                    var g = c;
                    if (this.unbiased) {
                        var v = -.5 + (p + .5) / o.length;
                        g += h * v
                    }
                    this.addMaterial.uniforms.opacity.value = g,
                    e.render(this.scene, this.camera, this.sampleRenderTarget, !0),
                    e.renderPass(this.addMaterial, this.accumulateRenderTarget, 0 === p)
                }
                this.camera.clearViewOffset && this.camera.clearViewOffset(),
                this.overMaterial.uniforms.tDiffuse.value = this.accumulateRenderTarget.texture,
                e.setClearColor(this.clearColor, this.clearAlpha),
                e.renderPass(this.overMaterial, this.renderToScreen ? null : r, this.clear),
                e.autoClear = s,
                e.setClearColor(u, l)
            }
        }),
        n.SSAARenderPass.JitterVectors = [[[0, 0]], [[4, 4], [-4, -4]], [[-2, -6], [6, -2], [-6, 2], [2, 6]], [[1, -3], [-1, 3], [5, 1], [-3, -5], [-5, 5], [-7, -1], [3, 7], [7, -7]], [[1, 1], [-1, -3], [-3, 2], [4, -1], [-5, -2], [2, 5], [5, 3], [3, -5], [-2, 6], [0, -7], [-4, -6], [-6, 4], [-8, 0], [7, -4], [6, 7], [-7, -8]], [[-4, -7], [-7, -5], [-3, -5], [-5, -4], [-1, -4], [-2, -2], [-6, -1], [-4, 0], [-7, 1], [-1, 2], [-6, 3], [-3, 3], [-7, 6], [-3, 6], [-5, 7], [-1, 7], [5, -7], [1, -6], [6, -5], [4, -4], [2, -3], [7, -2], [1, -1], [4, -1], [2, 1], [6, 2], [0, 4], [4, 4], [2, 5], [7, 5], [5, 6], [3, 7]]],
        n.ClearPass = function(e, t) {
            n.Pass.call(this),
            this.needsSwap = !1,
            this.clearColor = void 0 !== e ? e : 0,
            this.clearAlpha = void 0 !== t ? t : 0
        }
        ,
        n.ClearPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.ClearPass,
            render: function(e, t, r, n, i) {
                var a, o;
                void 0 !== this.clearColor && (a = e.getClearColor().getHex(),
                o = e.getClearAlpha(),
                e.setClearColor(this.clearColor, this.clearAlpha)),
                e.setRenderTarget(this.renderToScreen ? null : r),
                e.clear(),
                this.clearColor && e.setClearColor(a, o)
            }
        }),
        n.TexturePass = function(e, t) {
            n.Pass.call(this),
            void 0 === n.CopyShader && console.error("THREE.TexturePass relies on THREE.CopyShader");
            var r = n.CopyShader;
            this.map = e,
            this.opacity = void 0 !== t ? t : 1,
            this.uniforms = n.UniformsUtils.clone(r.uniforms),
            this.material = new n.ShaderMaterial({
                uniforms: this.uniforms,
                vertexShader: r.vertexShader,
                fragmentShader: r.fragmentShader,
                depthTest: !1,
                depthWrite: !1
            }),
            this.needsSwap = !1,
            this.camera = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.scene = new n.Scene,
            this.quad = new n.Mesh(new n.PlaneBufferGeometry(2,2),null),
            this.quad.frustumCulled = !1,
            this.scene.add(this.quad)
        }
        ,
        n.TexturePass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.TexturePass,
            render: function(e, t, r, n, i) {
                var a = e.autoClear;
                e.autoClear = !1,
                this.quad.material = this.material,
                this.uniforms.opacity.value = this.opacity,
                this.uniforms.tDiffuse.value = this.map,
                this.material.transparent = this.opacity < 1,
                e.render(this.scene, this.camera, this.renderToScreen ? null : r, this.clear),
                e.autoClear = a
            }
        }),
        n.CubeTexturePass = function(e, t, r) {
            n.Pass.call(this),
            this.camera = e,
            this.needsSwap = !1,
            this.cubeMaterial = new n.MeshCubeMaterial,
            this.cubeMesh = new n.Mesh(new n.BoxBufferGeometry(10,10,10),this.cubeMaterial),
            this.envMap = t,
            this.envMapIntensity = 1,
            this.opacity = void 0 !== r ? r : 1,
            this.roughness = 0,
            this.cubeScene = new n.Scene,
            this.cubeCamera = new n.PerspectiveCamera,
            this.cubeScene.add(this.cubeMesh)
        }
        ,
        n.CubeTexturePass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.CubeTexturePass,
            render: function(e, t, r, n, i) {
                var a = e.autoClear;
                e.autoClear = !1,
                this.cubeCamera.projectionMatrix.copy(this.camera.projectionMatrix),
                this.cubeCamera.quaternion.setFromRotationMatrix(this.camera.matrixWorld),
                this.cubeMaterial.envMap != this.envMap && (this.cubeMaterial.envMap = this.envMap,
                this.cubeMaterial.needsUpdate = !0),
                this.cubeMaterial.envMapIntensity = this.envMapIntensity,
                this.cubeMaterial.roughness = this.roughness,
                this.cubeMaterial.opacity = this.opacity,
                this.cubeMaterial.transparent = this.opacity < 1,
                e.render(this.cubeScene, this.cubeCamera, this.renderToScreen ? null : r, this.clear),
                e.autoClear = a
            }
        }),
        n.DofPass = function(e, t, r) {
            n.Pass.call(this);
            var e = void 0 !== e ? e : new n.Vector2(256,256);
            this.downSampleRes = new n.Vector2(Math.round(e.x / 2),Math.round(e.y / 2));
            var i = {
                minFilter: n.NearestFilter,
                magFilter: n.NearestFilter,
                type: n.HalfFloatType,
                format: n.RGBAFormat
            };
            this.renderTargetColorDownSample = new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),
            this.renderTargetColorDownSample.texture.generateMipmaps = !1,
            this.renderTargetCoCDownSample = new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),
            this.renderTargetCoCDownSample.texture.generateMipmaps = !1,
            this.renderTargetBlurTemp = new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),
            this.renderTargetBlurTemp.texture.generateMipmaps = !1;
            var i = {
                minFilter: n.LinearFilter,
                magFilter: n.LinearFilter,
                format: n.RGBAFormat
            };
            this.renderTargetDofBlur = new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),
            this.renderTargetDofBlur.texture.generateMipmaps = !1,
            this.renderTargetDofBlurTemp = new n.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,i),
            this.renderTargetDofBlurTemp.texture.generateMipmaps = !1,
            this.renderTargetDofCombine = new n.WebGLRenderTarget(e.x,e.y,i),
            this.renderTargetDofCombine.texture.generateMipmaps = !1,
            this.needsSwap = !1,
            this.oldClearColor = new n.Color,
            this.oldClearAlpha = 1,
            this.camera = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.scene = new n.Scene,
            this.quad = new n.Mesh(new n.PlaneBufferGeometry(2,2),null),
            this.scene.add(this.quad),
            this.focalDistance = 10,
            this.cameraNear = .1,
            this.cameraFar = 100,
            this.NearFarBlurScale = new n.Vector2(.1,.5),
            this.downSamplingMaterial = this.getColorDownSamplingMaterial(),
            this.cocMaterial = this.getCoCMaterial(),
            this.cocMaterial.uniforms.NearFarBlurScale.value = this.NearFarBlurScale,
            this.cocMaterial.uniforms.cameraNearFar.value = new n.Vector2(r.near,r.far),
            this.cocMaterial.uniforms.focalDistance.value = this.focalDistance,
            this.dilateNearCocMaterial = this.getDilateNearCocMaterial(),
            this.dilateNearCocMaterial.uniforms.NearFarBlurScale.value = this.NearFarBlurScale,
            this.dofBlurType = 1,
            this.dofBlurMaterial = 0 === this.dofBlurType ? this.getDofBlurCircularMaterial() : this.getDofBlurSeperableMaterial(),
            this.dofCombineMaterial = this.getDofCombineMaterial(),
            this.dofCombineMaterial.uniforms.NearFarBlurScale.value = this.NearFarBlurScale,
            this.dofCombineMaterial.uniforms.cameraNearFar.value = new n.Vector2(r.near,r.far),
            this.dofCombineMaterial.uniforms.focalDistance.value = this.focalDistance,
            void 0 === n.CopyShader && console.error("THREE.DofPass relies on THREE.CopyShader");
            var a = n.CopyShader;
            this.copyUniforms = n.UniformsUtils.clone(a.uniforms),
            this.materialCopy = new n.ShaderMaterial({
                uniforms: this.copyUniforms,
                vertexShader: a.vertexShader,
                fragmentShader: a.fragmentShader
            }),
            this.depthMaterial = new n.MeshDepthMaterial,
            this.depthMaterial.side = n.DoubleSide,
            this.depthMaterial.depthPacking = n.RGBADepthPacking,
            this.depthMaterial.blending = n.NoBlending,
            this.depthRenderTarget = new n.WebGLRenderTarget(e.x,e.y,{
                minFilter: n.NearesFilter,
                magFilter: n.NearesFilter,
                format: n.RGBAFormat
            }),
            this.renderScene = t,
            this.renderCamera = r
        }
        ,
        n.DofPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.DofPass,
            setSize: function(e, t) {
                this.downSampleRes = new n.Vector2(Math.round(e / 2),Math.round(t / 2));
                var r = this.downSampleRes.x
                  , i = this.downSampleRes.y;
                this.renderTargetColorDownSample.setSize(r, i),
                this.renderTargetCoCDownSample.setSize(r, i),
                this.renderTargetBlurTemp.setSize(r, i),
                this.renderTargetDofBlur.setSize(r, i),
                this.renderTargetDofBlurTemp.setSize(r, i),
                this.renderTargetDofCombine.setSize(e, t),
                this.depthRenderTarget.setSize(e, t)
            },
            changeBlurType: function(e) {
                this.dofBlurType = e,
                this.dofBlurMaterial = 0 === this.dofBlurType ? this.getDofBlurCircularMaterial() : this.getDofBlurSeperableMaterial()
            },
            render: function(e, t, r, i, a) {
                this.dilateNearCocMaterial.uniforms.texSize.value = this.downSampleRes,
                this.dofBlurMaterial.uniforms.texSize.value = this.downSampleRes,
                this.dofCombineMaterial.uniforms.texSize.value = this.downSampleRes,
                this.cocMaterial.uniforms.focalDistance.value = this.focalDistance,
                this.cocMaterial.uniforms.cameraNearFar.value.x = this.cameraNear,
                this.cocMaterial.uniforms.cameraNearFar.value.y = this.cameraFar,
                this.dofCombineMaterial.uniforms.focalDistance.value = this.focalDistance,
                this.dofCombineMaterial.uniforms.cameraNearFar.value.x = this.cameraNear,
                this.dofCombineMaterial.uniforms.cameraNearFar.value.y = this.cameraFar,
                this.oldClearColor.copy(e.getClearColor()),
                this.oldClearAlpha = e.getClearAlpha();
                var o = e.autoClear;
                e.autoClear = !0,
                a && e.context.disable(e.context.STENCIL_TEST),
                this.renderScene.overrideMaterial = this.depthMaterial,
                e.setClearColor(16777215, 1),
                e.render(this.renderScene, this.renderCamera, this.depthRenderTarget),
                this.renderScene.overrideMaterial = null,
                this.quad.material = this.downSamplingMaterial,
                this.downSamplingMaterial.uniforms.colorTexture.value = r.texture,
                e.render(this.scene, this.camera, this.renderTargetColorDownSample),
                this.quad.material = this.cocMaterial,
                this.cocMaterial.uniforms.depthTexture.value = this.depthRenderTarget.texture,
                e.render(this.scene, this.camera, this.renderTargetCoCDownSample),
                this.quad.material = this.dilateNearCocMaterial,
                this.dilateNearCocMaterial.uniforms.cocTexture.value = this.renderTargetCoCDownSample.texture,
                this.dilateNearCocMaterial.uniforms.depthTexture.value = this.depthRenderTarget.texture,
                this.dilateNearCocMaterial.uniforms.direction.value = new n.Vector2(1,0),
                e.render(this.scene, this.camera, this.renderTargetBlurTemp),
                this.dilateNearCocMaterial.uniforms.cocTexture.value = this.renderTargetBlurTemp.texture,
                this.dilateNearCocMaterial.uniforms.direction.value = new n.Vector2(0,1),
                e.render(this.scene, this.camera, this.renderTargetCoCDownSample),
                0 === this.dofBlurType ? (this.quad.material = this.dofBlurMaterial,
                this.dofBlurMaterial.uniforms.cocTexture.value = this.renderTargetCoCDownSample.texture,
                this.dofBlurMaterial.uniforms.colorTexture.value = this.renderTargetDownSample.texture,
                this.dofBlurMaterial.uniforms.depthTexture.value = this.depthRenderTarget.texture,
                e.render(this.scene, this.camera, this.renderTargetDofBlurTemp)) : (this.quad.material = this.dofBlurMaterial,
                this.dofBlurMaterial.uniforms.cocTexture.value = this.renderTargetCoCDownSample.texture,
                this.dofBlurMaterial.uniforms.colorTexture.value = this.renderTargetColorDownSample.texture,
                this.dofBlurMaterial.uniforms.direction.value = new n.Vector2(1,0),
                e.render(this.scene, this.camera, this.renderTargetDofBlur),
                this.dofBlurMaterial.uniforms.colorTexture.value = this.renderTargetDofBlur.texture,
                this.dofBlurMaterial.uniforms.direction.value = new n.Vector2(0,1),
                e.render(this.scene, this.camera, this.renderTargetDofBlurTemp)),
                this.quad.material = this.dofCombineMaterial,
                this.dofCombineMaterial.uniforms.cocTexture.value = this.renderTargetCoCDownSample.texture,
                this.dofCombineMaterial.uniforms.colorTexture.value = r.texture,
                this.dofCombineMaterial.uniforms.depthTexture.value = this.depthRenderTarget.texture,
                this.dofCombineMaterial.uniforms.blurTexture.value = this.renderTargetDofBlurTemp.texture,
                e.render(this.scene, this.camera, this.renderTargetDofCombine),
                this.quad.material = this.materialCopy,
                this.copyUniforms.tDiffuse.value = this.renderTargetDofCombine.texture,
                a && e.context.enable(e.context.STENCIL_TEST),
                e.render(this.scene, this.camera, r),
                e.setClearColor(this.oldClearColor, this.oldClearAlpha),
                e.autoClear = o
            },
            getColorDownSamplingMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        colorTexture: {
                            value: null
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\t#include <packing>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, vUv);\n\t\t\t\t\t}"
                })
            },
            getCoCMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        depthTexture: {
                            value: null
                        },
                        NearFarBlurScale: {
                            value: new n.Vector2(.5,.5)
                        },
                        cameraNearFar: {
                            value: new n.Vector2(.1,100)
                        },
                        focalDistance: {
                            value: 1
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\t#include <packing>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\tuniform float focalDistance;\t\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\t\tvec4 packDepth = texture2D(depthTexture, vUv).rgba;\t\t\t\t\t\tif(packDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packDepth);\t\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, computeCoc());\n\t\t\t\t\t}"
                })
            },
            getDilateNearCocMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        cocTexture: {
                            value: null
                        },
                        depthTexture: {
                            value: null
                        },
                        NearFarBlurScale: {
                            value: new n.Vector2(.5,.5)
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        direction: {
                            value: new n.Vector2(1,0)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\t\tuniform vec2 direction;\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\t\t\tfloat expandNear(const in vec2 offset, const in bool isBackground) {\t\t\t\t\t\tfloat coc = 0.0;\t\t\t\t\t\tvec2 sampleOffsets = MAXIMUM_BLUR_SIZE * offset / 5.0;\t\t\t\t\t\tfloat coc0 = texture2D(cocTexture, vUv).a;\t\t\t\t\t\tfloat coc1 = texture2D(cocTexture, vUv - 5.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc2 = texture2D(cocTexture, vUv - 4.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc3 = texture2D(cocTexture, vUv - 3.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc4 = texture2D(cocTexture, vUv - 2.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc5 = texture2D(cocTexture, vUv - 1.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc6 = texture2D(cocTexture, vUv + 1.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc7 = texture2D(cocTexture, vUv + 2.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc8 = texture2D(cocTexture, vUv + 3.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc9 = texture2D(cocTexture, vUv + 4.0 * sampleOffsets).a;\t\t\t\t\t\tfloat coc10 = texture2D(cocTexture, vUv + 5.0 * sampleOffsets).a;\t\t\t\t\t\t\t\t\t\t\t\t\tif(isBackground){\t\t\t\t\t\t\tcoc = abs(coc0) * 0.095474 + \t\t\t\t\t\t\t(abs(coc1) + abs(coc10)) * 0.084264 + \t\t\t\t\t\t\t(abs(coc2) + abs(coc9)) * 0.088139 + \t\t\t\t\t\t\t(abs(coc3) + abs(coc8)) * 0.091276 + \t\t\t\t\t\t\t(abs(coc4) + abs(coc7)) * 0.093585 + \t\t\t\t\t\t\t(abs(coc5) + abs(coc6)) * 0.094998;\t\t\t\t\t\t} else {\t\t\t\t\t\t\tcoc = min(coc0, 0.0);\t\t\t\t\t\t\tcoc = min(coc1 * 0.3, coc);\t\t\t\t\t\t\tcoc = min(coc2 * 0.5, coc);\t\t\t\t\t\t\tcoc = min(coc3 * 0.75, coc);\t\t\t\t\t\t\tcoc = min(coc4 * 0.8, coc);\t\t\t\t\t\t\tcoc = min(coc5 * 0.95, coc);\t\t\t\t\t\t\tcoc = min(coc6 * 0.95, coc);\t\t\t\t\t\t\tcoc = min(coc7 * 0.8, coc);\t\t\t\t\t\t\tcoc = min(coc8 * 0.75, coc);\t\t\t\t\t\t\tcoc = min(coc9 * 0.5, coc);\t\t\t\t\t\t\tcoc = min(coc10 * 0.3, coc);\t\t\t\t\t\t\tif(abs(coc0) > abs(coc))\t\t\t\t\t\t\t\tcoc = coc0;\t\t\t\t\t\t}\t\t\t\t\t\treturn coc;\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec2 offset = direction/texSize;\t\t\t\t\t\tfloat coc = expandNear(offset, texture2D(depthTexture, vUv).x == 1.0);\t\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, coc);\n\t\t\t\t\t}"
                })
            },
            getDofBlurCircularMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        colorTexture: {
                            value: null
                        },
                        cocTexture: {
                            value: null
                        },
                        depthTexture: {
                            value: null
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\t\t\tvec4 CircularBlur() {\t\t\t\t\t\t\t\t\t\t\t\tconst int NUM_SAMPLES = 16;\t\t\t\t\t\tvec2 poisson_disk_samples[NUM_SAMPLES];\t\t\t\t\t\tpoisson_disk_samples[0] = vec2(-0.399691779231, 0.728591545584);\t\t\t\t\t\tpoisson_disk_samples[1] = vec2(-0.48622557676, -0.84016533712);\t\t\t\t\t\tpoisson_disk_samples[2] = vec2(0.770309468987, -0.24906070432);\t\t\t\t\t\tpoisson_disk_samples[3] = vec2(0.556596796154, 0.820359876432);\t\t\t\t\t\tpoisson_disk_samples[4] = vec2(-0.933902004071, 0.0600539051593);\t\t\t\t\t\tpoisson_disk_samples[5] = vec2(0.330144964342, 0.207477293384);\t\t\t\t\t\tpoisson_disk_samples[6] = vec2(0.289013230975, -0.686749271417);\t\t\t\t\t\tpoisson_disk_samples[7] = vec2(-0.0832470893559, -0.187351643125);\t\t\t\t\t\tpoisson_disk_samples[8] = vec2(-0.296314525615, 0.254474834305);\t\t\t\t\t\tpoisson_disk_samples[9] = vec2(-0.850977666059, 0.484642744689);\t\t\t\t\t\tpoisson_disk_samples[10] = vec2(0.829287915319, 0.2345063545);\t\t\t\t\t\tpoisson_disk_samples[11] = vec2(-0.773042143899, -0.543741521254);\t\t\t\t\t\tpoisson_disk_samples[12] = vec2(0.0561133030864, 0.928419742597);\t\t\t\t\t\tpoisson_disk_samples[13] = vec2(-0.205799249508, -0.562072714492);\t\t\t\t\t\tpoisson_disk_samples[14] = vec2(-0.526991665882, -0.193690188118);\t\t\t\t\t\tpoisson_disk_samples[15] = vec2(-0.051789270667, -0.935374050821);\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 cocr = texture2D(cocTexture, vUv);\t\t\t\t\t\t\t\t\t\t\t\t\tfloat blurDist = MAXIMUM_BLUR_SIZE * coc.a;\t\t\t\t\t\t\t\t\t\t\t\t\tfloat rnd = PI2 * rand( vUv );\t\t\t\t\t\tfloat costheta = cos(rnd);\t\t\t\t\t\tfloat sintheta = sin(rnd);\t\t\t\t\t\tvec4 rotationMatrix = vec4(costheta, -sintheta, sintheta, costheta);\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 colorSum = vec3(0.0);\t\t\t\t\t\tfloat weightSum = 0.0;\t\t\t\t\t\t\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SAMPLES; i++) {\t\t\t\t\t\t\tvec2 ofs = poisson_disk_samples[i];\t\t\t\t\t\t\tofs = vec2(dot(ofs, rotationMatrix.xy), dot(ofs, rotationMatrix.zw) );\t\t\t\t\t\t\tvec2 texcoord = vUv + blurDist * ofs / texSize.xy;\t\t\t\t\t\t\tvec4 sample = texture2D(colorTexture, texcoord);\t\t\t\t\t\t\tfloat cocWeight = abs(sample.a);\t\t\t\t\t\t\tcocWeight *= cocWeight * cocWeight;\t\t\t\t\t\t\tcolorSum += sample.rgb * cocWeight;\t\t\t\t\t\t\tweightSum += cocWeight;\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\tcolorSum /= weightSum;\t\t\t\t\t\t\t\t\t\t\t\t\treturn vec4(colorSum, 1.0);\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tgl_FragColor = CircularBlur();\n\t\t\t\t\t}"
                })
            },
            getDofBlurSeperableMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        cocTexture: {
                            value: null
                        },
                        colorTexture: {
                            value: null
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        direction: {
                            value: new n.Vector2(.5,.5)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec2 direction;\t\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\t\t\tconst float SIGMA = 5.0;\t\t\t\t\tconst int NUM_SAMPLES = 4;\t\t\t\t\tfloat normpdf(in float x, in float sigma)\t\t\t\t\t{\t\t\t\t\t\treturn 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvec4 weightedBlur() { \t\t\t\t\t\tfloat cocIn = texture2D(cocTexture, vUv).a;\t\t\t\t\t\tfloat kernelRadius = MAXIMUM_BLUR_SIZE * cocIn;\t\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\t\tcocIn *= cocIn * cocIn;\t\t\t\t\t\tfloat centreSpaceWeight = normpdf(0.0, SIGMA) * abs(cocIn);\t\t\t\t\t\tfloat weightSum = centreSpaceWeight;\t\t\t\t\t\tvec4 centreSample = texture2D(colorTexture, vUv);\t\t\t\t\t\tvec4 diffuseSum = centreSample * weightSum;\t\t\t\t\t\tvec2 delta = invSize * kernelRadius/float(NUM_SAMPLES);\t\t\t\t\t\tfor( int i = 1; i <= NUM_SAMPLES; i ++ ) {\t\t\t\t\t\t\t\tfloat spaceWeight = normpdf(float(i), SIGMA);\t\t\t\t\t\t\t\tvec2 texcoord = direction * delta * float(i);\t\t\t\t\t\t\t\tvec4 rightSample = texture2D( colorTexture, vUv + texcoord);\t\t\t\t\t\t\t\tvec4 leftSample = texture2D( colorTexture, vUv - texcoord);\t\t\t\t\t\t\t\tfloat leftCocWeight = abs(texture2D( cocTexture, vUv - texcoord).a);\t\t\t\t\t\t\t\tfloat rightCocWeight = abs(texture2D( cocTexture, vUv + texcoord).a);\t\t\t\t\t\t\t\tleftCocWeight *= leftCocWeight * leftCocWeight;\t\t\t\t\t\t\t\trightCocWeight *= rightCocWeight * rightCocWeight;\t\t\t\t\t\t\t\tdiffuseSum += ( (leftSample * leftCocWeight) + (rightSample * rightCocWeight) ) * spaceWeight;\t\t\t\t\t\t\t\tweightSum += (spaceWeight * (leftCocWeight + rightCocWeight));\t\t\t\t\t\t}\t\t\t\t\t  return diffuseSum/weightSum;\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tgl_FragColor = weightedBlur();\n\t\t\t\t\t}"
                })
            },
            getDofCombineMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        colorTexture: {
                            value: null
                        },
                        blurTexture: {
                            value: null
                        },
                        cocTexture: {
                            value: null
                        },
                        depthTexture: {
                            value: null
                        },
                        NearFarBlurScale: {
                            value: new n.Vector2(.5,.5)
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        cameraNearFar: {
                            value: new n.Vector2(.1,100)
                        },
                        focalDistance: {
                            value: 20
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\n\t\t\t\t\t#include <packing>\n\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform sampler2D blurTexture;\n\t\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\tuniform float focalDistance;\t\t\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\t\tvec4 packedDepth = texture2D(depthTexture, vUv);\t\t\t\t\t\tif(packedDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packedDepth);\t\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec4 blur = texture2D(blurTexture, vUv);\t\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(1.5, 0.5) / texSize);\t\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-0.5, 1.5) / texSize);\t\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-1.5, -0.5) / texSize);\t\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(0.5, -1.5) / texSize);\t\t\t\t\t\tblur /= 5.0;\t\t\t\t\t\tfloat coc = abs(min(texture2D(cocTexture, vUv).a, computeCoc()));\t\t\t\t\t\tcoc = clamp(coc * coc * 8.0, 0.0, 1.0);\t\t\t\t\t\tvec4 color = mix(texture2D(colorTexture, vUv), blur, vec4(coc));\t\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t\t}"
                })
            }
        }),
        n.UnrealBloomPass = function(e, t, r, i) {
            n.Pass.call(this),
            this.strength = void 0 !== t ? t : 1,
            this.radius = r,
            this.threshold = i,
            this.resolution = void 0 !== e ? new n.Vector2(e.x,e.y) : new n.Vector2(256,256);
            var a = {
                minFilter: n.LinearFilter,
                magFilter: n.LinearFilter,
                format: n.RGBAFormat
            };
            this.renderTargetsHorizontal = [],
            this.renderTargetsVertical = [],
            this.nMips = 5;
            var o = Math.round(this.resolution.x / 2)
              , s = Math.round(this.resolution.y / 2);
            this.renderTargetBright = new n.WebGLRenderTarget(o,s,a),
            this.renderTargetBright.texture.name = "UnrealBloomPass.bright",
            this.renderTargetBright.texture.generateMipmaps = !1;
            for (var u = 0; u < this.nMips; u++) {
                var l = new n.WebGLRenderTarget(o,s,a);
                l.texture.name = "UnrealBloomPass.h" + u,
                l.texture.generateMipmaps = !1,
                this.renderTargetsHorizontal.push(l);
                var l = new n.WebGLRenderTarget(o,s,a);
                l.texture.name = "UnrealBloomPass.v" + u,
                l.texture.generateMipmaps = !1,
                this.renderTargetsVertical.push(l),
                o = Math.round(o / 2),
                s = Math.round(s / 2)
            }
            void 0 === n.LuminosityHighPassShader && console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");
            var c = n.LuminosityHighPassShader;
            this.highPassUniforms = n.UniformsUtils.clone(c.uniforms),
            this.highPassUniforms.luminosityThreshold.value = i,
            this.highPassUniforms.smoothWidth.value = .05,
            this.materialHighPassFilter = new n.ShaderMaterial({
                uniforms: this.highPassUniforms,
                vertexShader: c.vertexShader,
                fragmentShader: c.fragmentShader,
                defines: {}
            }),
            this.separableBlurMaterials = [];
            for (var h = [3, 5, 7, 9, 11], o = Math.round(this.resolution.x / 2), s = Math.round(this.resolution.y / 2), u = 0; u < this.nMips; u++)
                this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[u])),
                this.separableBlurMaterials[u].uniforms.texSize.value = new n.Vector2(o,s),
                o = Math.round(o / 2),
                s = Math.round(s / 2);
            this.compositeMaterial = this.getCompositeMaterial(this.nMips),
            this.compositeMaterial.uniforms.blurTexture1.value = this.renderTargetsVertical[0].texture,
            this.compositeMaterial.uniforms.blurTexture2.value = this.renderTargetsVertical[1].texture,
            this.compositeMaterial.uniforms.blurTexture3.value = this.renderTargetsVertical[2].texture,
            this.compositeMaterial.uniforms.blurTexture4.value = this.renderTargetsVertical[3].texture,
            this.compositeMaterial.uniforms.blurTexture5.value = this.renderTargetsVertical[4].texture,
            this.compositeMaterial.uniforms.bloomStrength.value = t,
            this.compositeMaterial.uniforms.bloomRadius.value = .1,
            this.compositeMaterial.needsUpdate = !0;
            var f = [1, .8, .6, .4, .2];
            this.compositeMaterial.uniforms.bloomFactors.value = f,
            this.bloomTintColors = [new n.Vector3(1,1,1), new n.Vector3(1,1,1), new n.Vector3(1,1,1), new n.Vector3(1,1,1), new n.Vector3(1,1,1)],
            this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors,
            void 0 === n.CopyShader && console.error("THREE.BloomPass relies on THREE.CopyShader");
            var d = n.CopyShader;
            this.copyUniforms = n.UniformsUtils.clone(d.uniforms),
            this.copyUniforms.opacity.value = 1,
            this.materialCopy = new n.ShaderMaterial({
                uniforms: this.copyUniforms,
                vertexShader: d.vertexShader,
                fragmentShader: d.fragmentShader,
                blending: n.AdditiveBlending,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            }),
            this.enabled = !0,
            this.needsSwap = !1,
            this.oldClearColor = new n.Color,
            this.oldClearAlpha = 1,
            this.camera = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.scene = new n.Scene,
            this.quad = new n.Mesh(new n.PlaneBufferGeometry(2,2),null),
            this.quad.frustumCulled = !1,
            this.scene.add(this.quad)
        }
        ,
        n.UnrealBloomPass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.UnrealBloomPass,
            dispose: function() {
                for (var e = 0; e < this.renderTargetsHorizontal.length(); e++)
                    this.renderTargetsHorizontal[e].dispose();
                for (var e = 0; e < this.renderTargetsVertical.length(); e++)
                    this.renderTargetsVertical[e].dispose();
                this.renderTargetBright.dispose()
            },
            setSize: function(e, t) {
                var r = Math.round(e / 2)
                  , i = Math.round(t / 2);
                this.renderTargetBright.setSize(r, i);
                for (var a = 0; a < this.nMips; a++)
                    this.renderTargetsHorizontal[a].setSize(r, i),
                    this.renderTargetsVertical[a].setSize(r, i),
                    this.separableBlurMaterials[a].uniforms.texSize.value = new n.Vector2(r,i),
                    r = Math.round(r / 2),
                    i = Math.round(i / 2)
            },
            render: function(e, t, r, i, a) {
                this.oldClearColor.copy(e.getClearColor()),
                this.oldClearAlpha = e.getClearAlpha();
                var o = e.autoClear;
                e.autoClear = !1,
                e.setClearColor(new n.Color(0,0,0), 0),
                a && e.context.disable(e.context.STENCIL_TEST),
                this.highPassUniforms.tDiffuse.value = r.texture,
                this.highPassUniforms.luminosityThreshold.value = this.threshold,
                this.quad.material = this.materialHighPassFilter,
                e.render(this.scene, this.camera, this.renderTargetBright, !0);
                for (var s = this.renderTargetBright, u = 0; u < this.nMips; u++)
                    this.quad.material = this.separableBlurMaterials[u],
                    this.separableBlurMaterials[u].uniforms.colorTexture.value = s.texture,
                    this.separableBlurMaterials[u].uniforms.direction.value = n.UnrealBloomPass.BlurDirectionX,
                    e.render(this.scene, this.camera, this.renderTargetsHorizontal[u], !0),
                    this.separableBlurMaterials[u].uniforms.colorTexture.value = this.renderTargetsHorizontal[u].texture,
                    this.separableBlurMaterials[u].uniforms.direction.value = n.UnrealBloomPass.BlurDirectionY,
                    e.render(this.scene, this.camera, this.renderTargetsVertical[u], !0),
                    s = this.renderTargetsVertical[u];
                this.quad.material = this.compositeMaterial,
                this.compositeMaterial.uniforms.bloomStrength.value = this.strength,
                this.compositeMaterial.uniforms.bloomRadius.value = this.radius,
                this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors,
                e.render(this.scene, this.camera, this.renderTargetsHorizontal[0], !0),
                this.quad.material = this.materialCopy,
                this.copyUniforms.tDiffuse.value = this.renderTargetsHorizontal[0].texture,
                a && e.context.enable(e.context.STENCIL_TEST),
                e.render(this.scene, this.camera, r),
                e.setClearColor(this.oldClearColor, this.oldClearAlpha),
                e.autoClear = o
            },
            getSeperableBlurMaterial: function(e) {
                return new n.ShaderMaterial({
                    defines: {
                        KERNEL_RADIUS: e,
                        SIGMA: e
                    },
                    uniforms: {
                        colorTexture: {
                            value: null
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        direction: {
                            value: new n.Vector2(.5,.5)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\t\t\t\t\tvarying vec2 vUv;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t\t}\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t\t}\t\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t\t}"
                })
            },
            getCompositeMaterial: function(e) {
                return new n.ShaderMaterial({
                    defines: {
                        NUM_MIPS: e
                    },
                    uniforms: {
                        blurTexture1: {
                            value: null
                        },
                        blurTexture2: {
                            value: null
                        },
                        blurTexture3: {
                            value: null
                        },
                        blurTexture4: {
                            value: null
                        },
                        blurTexture5: {
                            value: null
                        },
                        dirtTexture: {
                            value: null
                        },
                        bloomStrength: {
                            value: 1
                        },
                        bloomFactors: {
                            value: null
                        },
                        bloomTintColors: {
                            value: null
                        },
                        bloomRadius: {
                            value: 0
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "varying vec2 vUv;\t\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\t\tuniform float bloomStrength;\t\t\t\t\tuniform float bloomRadius;\t\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t\t}"
                })
            }
        }),
        n.UnrealBloomPass.BlurDirectionX = new n.Vector2(1,0),
        n.UnrealBloomPass.BlurDirectionY = new n.Vector2(0,1),
        n.MirrorHelper = function(e) {
            this.scene = new n.Scene,
            this.cameraOrtho = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.quad = new n.Mesh(new n.PlaneGeometry(2,2),null),
            this.scene.add(this.quad),
            this.mirror = e,
            this.numMipMaps = 4,
            this.mirrorTextureMipMaps = [],
            this.tempRenderTargets = [];
            for (var t = {
                minFilter: n.LinearFilter,
                magFilter: n.LinearFilter,
                format: n.RGBAFormat,
                stencilBuffer: !1
            }, r = e.mirrorRenderTarget, i = r.width / 2, a = r.height / 2, o = 0; o < this.numMipMaps; o++) {
                var s = new n.WebGLRenderTarget(i,a,t);
                s.texture.generateMipmaps = !1,
                this.mirrorTextureMipMaps.push(s);
                var u = new n.WebGLRenderTarget(i,a,t);
                u.texture.generateMipmaps = !1,
                this.tempRenderTargets.push(u),
                i /= 2,
                a /= 2
            }
            this.vBlurMaterial = new n.ShaderMaterial(n.BlurShader),
            this.vBlurMaterial.side = n.DoubleSide,
            this.vBlurMaterial.uniforms.size.value.set(r.width / 2, r.height / 2),
            this.vBlurMaterial.blending = n.NoBlending,
            n.BlurShaderUtils.configure(this.vBlurMaterial, 5, 3, new n.Vector2(0,1)),
            this.hBlurMaterial = this.vBlurMaterial.clone(),
            this.hBlurMaterial.side = n.DoubleSide,
            this.hBlurMaterial.uniforms.size.value.set(r.width / 2, r.height / 2),
            this.hBlurMaterial.blending = n.NoBlending,
            n.BlurShaderUtils.configure(this.hBlurMaterial, 5, 3, new n.Vector2(1,0))
        }
        ,
        n.MirrorHelper.prototype = {
            constructor: n.MirrorHelper,
            setSize: function(e, t) {
                for (var r = 0; r < this.numMipMaps; r++)
                    e /= 2,
                    t /= 2,
                    this.mirrorTextureMipMaps[r].setSize(e, t),
                    this.tempRenderTargets[r].setSize(e, t)
            },
            update: function(e) {
                for (var t = this.mirror.mirrorRenderTarget, r = 0; r < this.numMipMaps; r++) {
                    var n = this.mirrorTextureMipMaps[r]
                      , i = this.tempRenderTargets[r];
                    this.hBlurMaterial.uniforms.size.value.set(t.width, t.height),
                    this.hBlurMaterial.uniforms.tDiffuse.value = t.texture,
                    this.quad.material = this.hBlurMaterial,
                    e.render(this.scene, this.cameraOrtho, i, !0),
                    this.vBlurMaterial.uniforms.size.value.set(i.width, i.height),
                    this.vBlurMaterial.uniforms.tDiffuse.value = i.texture,
                    this.quad.material = this.vBlurMaterial,
                    e.render(this.scene, this.cameraOrtho, n, !0),
                    t = n
                }
            }
        },
        n.GlossyMirror = function(e) {
            n.Object3D.call(this),
            this.name = "mirror_" + this.id,
            e = e || {},
            this.matrixNeedsUpdate = !0;
            var t = void 0 !== e.textureWidth ? e.textureWidth : 512
              , r = void 0 !== e.textureHeight ? e.textureHeight : 512;
            this.size = new n.Vector3(t,r),
            this.localMirrorNormal = void 0 !== e.localMirrorNormal ? e.localMirrorNormal : new n.Vector3(0,0,1),
            this.distanceFade = .1,
            this.metalness = 0,
            this.specularColor = new n.Color(16777215),
            this.roughness = 0,
            this.fresnelStrength = 1,
            this.mirrorPlane = new n.Plane,
            this.mirrorWorldPosition = new n.Vector3,
            this.cameraWorldPosition = new n.Vector3,
            this.rotationMatrix = new n.Matrix4,
            this.lookAtPosition = new n.Vector3(0,0,-1),
            this.matrixNeedsUpdate = !0;
            var i = void 0 !== e.debugMode && e.debugMode;
            if (i) {
                var a = new n.ArrowHelper(new n.Vector3(0,0,1),new n.Vector3(0,0,0),10,16777088)
                  , o = new n.Geometry;
                o.vertices.push(new n.Vector3(-10,-10,0)),
                o.vertices.push(new n.Vector3(10,-10,0)),
                o.vertices.push(new n.Vector3(10,10,0)),
                o.vertices.push(new n.Vector3(-10,10,0)),
                o.vertices.push(o.vertices[0]);
                var s = new n.Line(o,new n.LineBasicMaterial({
                    color: 16777088
                }));
                this.add(a),
                this.add(s)
            }
            this.reflectionTextureMatrix = new n.Matrix4,
            this.mirrorNormal = new n.Vector3;
            var u = {
                minFilter: n.LinearFilter,
                magFilter: n.LinearFilter,
                format: n.RGBAFormat,
                stencilBuffer: !1
            };
            this.mirrorRenderTarget = new n.WebGLRenderTarget(t,r,u),
            this.mirrorRenderTarget.texture.name = "GlossyMirror.mirror",
            this.material = new n.ShaderMaterial(n.GlossyMirrorShader),
            this.material.defines = Object.assign({}, this.material.defines),
            this.material.uniforms = n.UniformsUtils.clone(this.material.uniforms),
            this.material.uniforms.tReflection.value = this.mirrorRenderTarget.texture,
            this.material.uniforms.reflectionTextureMatrix.value = this.reflectionTextureMatrix,
            this.mirrorRenderTarget.texture.generateMipmaps = !1,
            this.clipPlane = new n.Plane(this.localMirrorNormal,0),
            this.originalClipPlane = this.clipPlane.clone(),
            this.falseClipPlane = this.clipPlane.clone(),
            this.falseClipPlane.constant = 1e4,
            this.depthMaterial = new n.MeshDepthMaterial,
            this.depthMaterial.depthPacking = n.RGBADepthPacking,
            this.depthMaterial.blending = n.NoBlending,
            this.depthMaterial.side = n.FrontSide,
            this.depthRenderTarget = new n.WebGLRenderTarget(t,r,{
                minFilter: n.NearestFilter,
                magFilter: n.NearestFilter,
                format: n.RGBAFormat
            }),
            this.depthRenderTarget.texture.generateMipmaps = !1,
            this.depthRenderTarget.texture.name = "GlossyMirror.depth",
            this.material.uniforms.tReflectionDepth.value = this.depthRenderTarget.texture,
            this.material.uniforms.screenSize.value = new n.Vector2(t,r),
            this.mirrorHelper = new n.MirrorHelper(this),
            this.material.uniforms.tReflection.value = this.mirrorRenderTarget.texture,
            this.material.uniforms.tReflection1.value = this.mirrorHelper.mirrorTextureMipMaps[0].texture,
            this.material.uniforms.tReflection2.value = this.mirrorHelper.mirrorTextureMipMaps[1].texture,
            this.material.uniforms.tReflection3.value = this.mirrorHelper.mirrorTextureMipMaps[2].texture,
            this.material.uniforms.tReflection4.value = this.mirrorHelper.mirrorTextureMipMaps[3].texture,
            this.setSize(t, r)
        }
        ,
        n.GlossyMirror.prototype = Object.assign(Object.create(n.Object3D.prototype), {
            constructor: n.GlossyMirror,
            setSize: function(e, t) {
                this.size.x === e && this.size.y === t || (this.mirrorRenderTarget.setSize(e, t),
                this.depthRenderTarget.setSize(e, t),
                this.mirrorHelper.setSize(e, t),
                this.material.uniforms.screenSize.value = new n.Vector2(e,t),
                this.size.set(e, t),
                this.matrixNeedsUpdate = !0),
                this.matrixNeedsUpdate = !0
            },
            updateReflectionTextureMatrix: function(e) {
                this.updateMatrixWorld(),
                e.updateMatrixWorld(),
                this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),
                this.cameraWorldPosition.setFromMatrixPosition(e.matrixWorld),
                this.rotationMatrix.extractRotation(this.matrixWorld),
                this.mirrorNormal.copy(this.localMirrorNormal),
                this.mirrorNormal.applyMatrix4(this.rotationMatrix);
                var t = this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);
                t.reflect(this.mirrorNormal).negate(),
                t.add(this.mirrorWorldPosition),
                this.rotationMatrix.extractRotation(e.matrixWorld),
                this.lookAtPosition.set(0, 0, -1),
                this.lookAtPosition.applyMatrix4(this.rotationMatrix),
                this.lookAtPosition.add(this.cameraWorldPosition);
                var r = this.mirrorWorldPosition.clone().sub(this.lookAtPosition);
                r.reflect(this.mirrorNormal).negate(),
                r.add(this.mirrorWorldPosition),
                this.up.set(0, -1, 0),
                this.up.applyMatrix4(this.rotationMatrix),
                this.up.reflect(this.mirrorNormal).negate(),
                this.mirrorCamera.position.copy(t),
                this.mirrorCamera.up = this.up,
                this.mirrorCamera.lookAt(r),
                this.mirrorCamera.fov = e.fov,
                this.mirrorCamera.near = e.near,
                this.mirrorCamera.far = e.far,
                this.mirrorCamera.aspect = e.aspect,
                this.mirrorCamera.updateProjectionMatrix(),
                this.mirrorCamera.updateMatrixWorld(),
                this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),
                this.reflectionTextureMatrix.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
                this.reflectionTextureMatrix.multiply(this.mirrorCamera.projectionMatrix),
                this.reflectionTextureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),
                this.mirrorPlane.setFromNormalAndCoplanarPoint(this.mirrorNormal, this.mirrorWorldPosition),
                this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),
                this.material.uniforms.mirrorCameraProjectionMatrix.value.copy(this.mirrorCamera.projectionMatrix),
                this.material.uniforms.mirrorCameraInverseProjectionMatrix.value.getInverse(this.mirrorCamera.projectionMatrix),
                this.material.uniforms.mirrorCameraWorldMatrix.value.copy(e.matrixWorld),
                this.material.uniforms.mirrorCameraNear.value = this.mirrorCamera.near,
                this.material.uniforms.mirrorCameraFar.value = this.mirrorCamera.far,
                this.material.uniforms.mirrorNormal.value = this.mirrorNormal,
                this.material.uniforms.mirrorWorldPosition.value = this.mirrorWorldPosition,
                this.material.transparent = !0
            },
            render: function(e, t, r, i, a) {
                if (!r instanceof n.PerspectiveCamera && console.error("THREE.GlossyMirror: camera is not a Perspective Camera!"),
                this.setSize(i, a),
                this.mirrorCamera || (this.mirrorCamera = r.clone(),
                this.mirrorCamera.matrixAutoUpdate = !0),
                this.matrixNeedsUpdate && this.updateReflectionTextureMatrix(r),
                this.matrixNeedsUpdate = !0,
                void 0 !== this.clipPlane && (this.clipPlane.copy(this.originalClipPlane),
                this.clipPlane.applyMatrix4(this.matrixWorld),
                this.clippingPlanes = [this.clipPlane]),
                e.clippingPlanes = this.clippingPlanes,
                void 0 !== t && t instanceof n.Scene) {
                    var o = this.material.visible;
                    this.material.visible = !1,
                    e.render(t, this.mirrorCamera, this.mirrorRenderTarget, !0),
                    this.material.visible = o
                }
                t.overrideMaterial = this.depthMaterial;
                var o = this.material.visible
                  , s = e.getClearColor()
                  , u = e.getClearAlpha();
                e.setClearColor(16777215, 1),
                this.material.visible = !1,
                e.render(t, this.mirrorCamera, this.depthRenderTarget, !0),
                t.overrideMaterial = null,
                e.setClearColor(s, u),
                this.material.visible = o,
                this.material.uniforms.distanceFade.value = this.distanceFade,
                this.material.uniforms.metalness.value = this.metalness,
                this.material.uniforms.fresnelStrength.value = this.fresnelStrength,
                this.material.uniforms.specularColor.value.copy(this.specularColor),
                this.material.uniforms.roughness.value = this.roughness,
                void 0 !== this.clipPlane && this.clipPlane.copy(this.falseClipPlane),
                void 0 !== this.mirrorHelper && this.mirrorHelper.update(e)
            }
        }),
        n.OrbitControls = function(e, t) {
            function r() {
                return 2 * Math.PI / 60 / 60 * j.autoRotateSpeed
            }
            function i() {
                return Math.pow(.95, j.zoomSpeed)
            }
            function a(e) {
                F.theta -= e
            }
            function o(e) {
                F.phi -= e
            }
            function s(e) {
                j.object instanceof n.PerspectiveCamera ? G /= e : j.object instanceof n.OrthographicCamera ? (j.object.zoom = Math.max(j.minZoom, Math.min(j.maxZoom, j.object.zoom * e)),
                j.object.updateProjectionMatrix(),
                Q = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),
                j.enableZoom = !1)
            }
            function u(e) {
                j.object instanceof n.PerspectiveCamera ? G *= e : j.object instanceof n.OrthographicCamera ? (j.object.zoom = Math.max(j.minZoom, Math.min(j.maxZoom, j.object.zoom / e)),
                j.object.updateProjectionMatrix(),
                Q = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),
                j.enableZoom = !1)
            }
            function l(e) {
                H.set(e.clientX, e.clientY)
            }
            function c(e) {
                K.set(e.clientX, e.clientY)
            }
            function h(e) {
                q.set(e.clientX, e.clientY)
            }
            function f(e) {
                W.set(e.clientX, e.clientY),
                X.subVectors(W, H);
                var t = j.domElement === document ? j.domElement.body : j.domElement;
                a(2 * Math.PI * X.x / t.clientWidth * j.rotateSpeed),
                o(2 * Math.PI * X.y / t.clientHeight * j.rotateSpeed),
                H.copy(W),
                j.update()
            }
            function d(e) {
                $.set(e.clientX, e.clientY),
                ee.subVectors($, K),
                ee.y > 0 ? s(i()) : ee.y < 0 && u(i()),
                K.copy($),
                j.update()
            }
            function p(e) {
                Z.set(e.clientX, e.clientY),
                J.subVectors(Z, q),
                ne(J.x, J.y),
                q.copy(Z),
                j.update()
            }
            function m(e) {}
            function g(e) {
                e.deltaY < 0 ? u(i()) : e.deltaY > 0 && s(i()),
                j.update()
            }
            function v(e) {
                switch (e.keyCode) {
                case j.keys.UP:
                    ne(0, j.keyPanSpeed),
                    j.update();
                    break;
                case j.keys.BOTTOM:
                    ne(0, -j.keyPanSpeed),
                    j.update();
                    break;
                case j.keys.LEFT:
                    ne(j.keyPanSpeed, 0),
                    j.update();
                    break;
                case j.keys.RIGHT:
                    ne(-j.keyPanSpeed, 0),
                    j.update()
                }
            }
            function y(e) {
                H.set(e.touches[0].pageX, e.touches[0].pageY)
            }
            function M(e) {
                var t = e.touches[0].pageX - e.touches[1].pageX
                  , r = e.touches[0].pageY - e.touches[1].pageY
                  , n = Math.sqrt(t * t + r * r);
                K.set(0, n)
            }
            function w(e) {
                q.set(e.touches[0].pageX, e.touches[0].pageY)
            }
            function x(e) {
                W.set(e.touches[0].pageX, e.touches[0].pageY),
                X.subVectors(W, H);
                var t = j.domElement === document ? j.domElement.body : j.domElement;
                a(2 * Math.PI * X.x / t.clientWidth * j.rotateSpeed),
                o(2 * Math.PI * X.y / t.clientHeight * j.rotateSpeed),
                H.copy(W),
                j.update()
            }
            function A(e) {
                var t = e.touches[0].pageX - e.touches[1].pageX
                  , r = e.touches[0].pageY - e.touches[1].pageY
                  , n = Math.sqrt(t * t + r * r);
                $.set(0, n),
                ee.subVectors($, K),
                ee.y > 0 ? u(i()) : ee.y < 0 && s(i()),
                K.copy($),
                j.update()
            }
            function b(e) {
                Z.set(e.touches[0].pageX, e.touches[0].pageY),
                J.subVectors(Z, q),
                ne(J.x, J.y),
                q.copy(Z),
                j.update()
            }
            function T(e) {}
            function _(e) {
                if (j.enabled !== !1) {
                    if (e.preventDefault(),
                    e.button === j.mouseButtons.ORBIT) {
                        if (j.enableRotate === !1)
                            return;
                        l(e),
                        U = B.ROTATE
                    } else if (e.button === j.mouseButtons.ZOOM) {
                        if (j.enableZoom === !1)
                            return;
                        c(e),
                        U = B.DOLLY
                    } else if (e.button === j.mouseButtons.PAN) {
                        if (j.enablePan === !1)
                            return;
                        h(e),
                        U = B.PAN
                    }
                    U !== B.NONE && (document.addEventListener("mousemove", E, !1),
                    document.addEventListener("mouseup", S, !1),
                    j.dispatchEvent(P))
                }
            }
            function E(e) {
                if (j.enabled !== !1)
                    if (e.preventDefault(),
                    U === B.ROTATE) {
                        if (j.enableRotate === !1)
                            return;
                        f(e)
                    } else if (U === B.DOLLY) {
                        if (j.enableZoom === !1)
                            return;
                        d(e)
                    } else if (U === B.PAN) {
                        if (j.enablePan === !1)
                            return;
                        p(e)
                    }
            }
            function S(e) {
                j.enabled !== !1 && (m(e),
                document.removeEventListener("mousemove", E, !1),
                document.removeEventListener("mouseup", S, !1),
                j.dispatchEvent(z),
                U = B.NONE)
            }
            function D(e) {
                j.enabled === !1 || j.enableZoom === !1 || U !== B.NONE && U !== B.ROTATE || (e.preventDefault(),
                e.stopPropagation(),
                g(e),
                j.dispatchEvent(P),
                j.dispatchEvent(z))
            }
            function N(e) {
                j.enabled !== !1 && j.enableKeys !== !1 && j.enablePan !== !1 && v(e)
            }
            function I(e) {
                if (j.enabled !== !1) {
                    switch (e.touches.length) {
                    case 1:
                        if (j.enableRotate === !1)
                            return;
                        y(e),
                        U = B.TOUCH_ROTATE;
                        break;
                    case 2:
                        if (j.enableZoom === !1)
                            return;
                        M(e),
                        U = B.TOUCH_DOLLY;
                        break;
                    case 3:
                        if (j.enablePan === !1)
                            return;
                        w(e),
                        U = B.TOUCH_PAN;
                        break;
                    default:
                        U = B.NONE
                    }
                    U !== B.NONE && j.dispatchEvent(P)
                }
            }
            function L(e) {
                if (j.enabled !== !1)
                    switch (e.preventDefault(),
                    e.stopPropagation(),
                    e.touches.length) {
                    case 1:
                        if (j.enableRotate === !1)
                            return;
                        if (U !== B.TOUCH_ROTATE)
                            return;
                        x(e);
                        break;
                    case 2:
                        if (j.enableZoom === !1)
                            return;
                        if (U !== B.TOUCH_DOLLY)
                            return;
                        A(e);
                        break;
                    case 3:
                        if (j.enablePan === !1)
                            return;
                        if (U !== B.TOUCH_PAN)
                            return;
                        b(e);
                        break;
                    default:
                        U = B.NONE
                    }
            }
            function C(e) {
                j.enabled !== !1 && (T(e),
                j.dispatchEvent(z),
                U = B.NONE)
            }
            function O(e) {
                e.preventDefault()
            }
            this.object = e,
            this.domElement = void 0 !== t ? t : document,
            this.enabled = !0,
            this.target = new n.Vector3,
            this.minDistance = 0,
            this.maxDistance = 1 / 0,
            this.minZoom = 0,
            this.maxZoom = 1 / 0,
            this.minPolarAngle = 0,
            this.maxPolarAngle = Math.PI,
            this.minAzimuthAngle = -(1 / 0),
            this.maxAzimuthAngle = 1 / 0,
            this.enableDamping = !1,
            this.dampingFactor = .25,
            this.enableZoom = !0,
            this.zoomSpeed = 1,
            this.enableRotate = !0,
            this.rotateSpeed = 1,
            this.enablePan = !0,
            this.keyPanSpeed = 7,
            this.autoRotate = !1,
            this.autoRotateSpeed = 2,
            this.enableKeys = !0,
            this.keys = {
                LEFT: 37,
                UP: 38,
                RIGHT: 39,
                BOTTOM: 40
            },
            this.mouseButtons = {
                ORBIT: n.MOUSE.LEFT,
                ZOOM: n.MOUSE.MIDDLE,
                PAN: n.MOUSE.RIGHT
            },
            this.target0 = this.target.clone(),
            this.position0 = this.object.position.clone(),
            this.zoom0 = this.object.zoom,
            this.getPolarAngle = function() {
                return k.phi
            }
            ,
            this.getAzimuthalAngle = function() {
                return k.theta
            }
            ,
            this.reset = function() {
                j.target.copy(j.target0),
                j.object.position.copy(j.position0),
                j.object.zoom = j.zoom0,
                j.object.updateProjectionMatrix(),
                j.dispatchEvent(R),
                j.update(),
                U = B.NONE
            }
            ,
            this.update = function() {
                var t = new n.Vector3
                  , i = (new n.Quaternion).setFromUnitVectors(e.up, new n.Vector3(0,1,0))
                  , o = i.clone().inverse()
                  , s = new n.Vector3
                  , u = new n.Quaternion;
                return function() {
                    var e = j.object.position;
                    return t.copy(e).sub(j.target),
                    t.applyQuaternion(i),
                    k.setFromVector3(t),
                    j.autoRotate && U === B.NONE && a(r()),
                    k.theta += F.theta,
                    k.phi += F.phi,
                    k.theta = Math.max(j.minAzimuthAngle, Math.min(j.maxAzimuthAngle, k.theta)),
                    k.phi = Math.max(j.minPolarAngle, Math.min(j.maxPolarAngle, k.phi)),
                    k.makeSafe(),
                    k.radius *= G,
                    k.radius = Math.max(j.minDistance, Math.min(j.maxDistance, k.radius)),
                    j.target.add(Y),
                    t.setFromSpherical(k),
                    t.applyQuaternion(o),
                    e.copy(j.target).add(t),
                    j.object.lookAt(j.target),
                    j.enableDamping === !0 ? (F.theta *= 1 - j.dampingFactor,
                    F.phi *= 1 - j.dampingFactor) : F.set(0, 0, 0),
                    G = 1,
                    Y.set(0, 0, 0),
                    !!(Q || s.distanceToSquared(j.object.position) > V || 8 * (1 - u.dot(j.object.quaternion)) > V) && (j.dispatchEvent(R),
                    s.copy(j.object.position),
                    u.copy(j.object.quaternion),
                    Q = !1,
                    !0)
                }
            }(),
            this.dispose = function() {
                j.domElement.removeEventListener("contextmenu", O, !1),
                j.domElement.removeEventListener("mousedown", _, !1),
                j.domElement.removeEventListener("wheel", D, !1),
                j.domElement.removeEventListener("touchstart", I, !1),
                j.domElement.removeEventListener("touchend", C, !1),
                j.domElement.removeEventListener("touchmove", L, !1),
                document.removeEventListener("mousemove", E, !1),
                document.removeEventListener("mouseup", S, !1),
                window.removeEventListener("keydown", N, !1)
            }
            ;
            var j = this
              , R = {
                type: "change"
            }
              , P = {
                type: "start"
            }
              , z = {
                type: "end"
            }
              , B = {
                NONE: -1,
                ROTATE: 0,
                DOLLY: 1,
                PAN: 2,
                TOUCH_ROTATE: 3,
                TOUCH_DOLLY: 4,
                TOUCH_PAN: 5
            }
              , U = B.NONE
              , V = 1e-6
              , k = new n.Spherical
              , F = new n.Spherical
              , G = 1
              , Y = new n.Vector3
              , Q = !1
              , H = new n.Vector2
              , W = new n.Vector2
              , X = new n.Vector2
              , q = new n.Vector2
              , Z = new n.Vector2
              , J = new n.Vector2
              , K = new n.Vector2
              , $ = new n.Vector2
              , ee = new n.Vector2
              , te = function() {
                var e = new n.Vector3;
                return function(t, r) {
                    e.setFromMatrixColumn(r, 0),
                    e.multiplyScalar(-t),
                    Y.add(e)
                }
            }()
              , re = function() {
                var e = new n.Vector3;
                return function(t, r) {
                    e.setFromMatrixColumn(r, 1),
                    e.multiplyScalar(t),
                    Y.add(e)
                }
            }()
              , ne = function() {
                var e = new n.Vector3;
                return function(t, r) {
                    var i = j.domElement === document ? j.domElement.body : j.domElement;
                    if (j.object instanceof n.PerspectiveCamera) {
                        var a = j.object.position;
                        e.copy(a).sub(j.target);
                        var o = e.length();
                        o *= Math.tan(j.object.fov / 2 * Math.PI / 180),
                        te(2 * t * o / i.clientHeight, j.object.matrix),
                        re(2 * r * o / i.clientHeight, j.object.matrix)
                    } else
                        j.object instanceof n.OrthographicCamera ? (te(t * (j.object.right - j.object.left) / j.object.zoom / i.clientWidth, j.object.matrix),
                        re(r * (j.object.top - j.object.bottom) / j.object.zoom / i.clientHeight, j.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),
                        j.enablePan = !1)
                }
            }();
            j.domElement.addEventListener("contextmenu", O, !1),
            j.domElement.addEventListener("mousedown", _, !1),
            j.domElement.addEventListener("wheel", D, !1),
            j.domElement.addEventListener("touchstart", I, !1),
            j.domElement.addEventListener("touchend", C, !1),
            j.domElement.addEventListener("touchmove", L, !1),
            window.addEventListener("keydown", N, !1),
            this.update()
        }
        ,
        n.OrbitControls.prototype = Object.create(n.EventDispatcher.prototype),
        n.OrbitControls.prototype.constructor = n.OrbitControls,
        Object.defineProperties(n.OrbitControls.prototype, {
            center: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .center has been renamed to .target"),
                    this.target
                }
            },
            noZoom: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),
                    !this.enableZoom
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),
                    this.enableZoom = !e
                }
            },
            noRotate: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),
                    !this.enableRotate
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),
                    this.enableRotate = !e
                }
            },
            noPan: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),
                    !this.enablePan
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),
                    this.enablePan = !e
                }
            },
            noKeys: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),
                    !this.enableKeys
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),
                    this.enableKeys = !e
                }
            },
            staticMoving: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),
                    !this.enableDamping
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),
                    this.enableDamping = !e
                }
            },
            dynamicDampingFactor: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),
                    this.dampingFactor
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),
                    this.dampingFactor = e
                }
            }
        }),
        n.Color.prototype.toJSON = function() {
            return {
                r: this.r,
                g: this.g,
                b: this.b
            }
        }
        ,
        n.HDRLoader = n.RGBELoader = function(e) {
            this.manager = void 0 !== e ? e : n.DefaultLoadingManager
        }
        ,
        n.RGBELoader.prototype = Object.create(n.DataTextureLoader.prototype),
        n.RGBELoader.prototype._parser = function(e) {
            var t = -1
              , r = 1
              , i = 2
              , a = 3
              , o = 4
              , s = function(e, n) {
                switch (e) {
                case r:
                    console.error("THREE.RGBELoader Read Error: " + (n || ""));
                    break;
                case i:
                    console.error("THREE.RGBELoader Write Error: " + (n || ""));
                    break;
                case a:
                    console.error("THREE.RGBELoader Bad File Format: " + (n || ""));
                    break;
                default:
                case o:
                    console.error("THREE.RGBELoader: Error: " + (n || ""))
                }
                return t
            }
              , u = 1
              , l = 2
              , c = 4
              , h = "\n"
              , f = function(e, t, r) {
                t = t ? t : 1024;
                for (var n = e.pos, i = -1, a = 0, o = "", s = 128, u = String.fromCharCode.apply(null, new Uint16Array(e.subarray(n, n + s))); 0 > (i = u.indexOf(h)) && a < t && n < e.byteLength; )
                    o += u,
                    a += u.length,
                    n += s,
                    u += String.fromCharCode.apply(null, new Uint16Array(e.subarray(n, n + s)));
                return -1 < i && (!1 !== r && (e.pos += a + i + 1),
                o + u.slice(0, i))
            }
              , d = function(e) {
                var t, n, i = /^#\?(\S+)$/, o = /^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/, h = /^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/, d = /^\s*FORMAT=(\S+)\s*$/, p = /^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/, m = {
                    valid: 0,
                    string: "",
                    comments: "",
                    programtype: "RGBE",
                    format: "",
                    gamma: 1,
                    exposure: 1,
                    width: 0,
                    height: 0
                };
                if (e.pos >= e.byteLength || !(t = f(e)))
                    return s(r, "no header found");
                if (!(n = t.match(i)))
                    return s(a, "bad initial token");
                for (m.valid |= u,
                m.programtype = n[1],
                m.string += t + "\n"; t = f(e),
                !1 !== t; )
                    if (m.string += t + "\n",
                    "#" !== t.charAt(0)) {
                        if ((n = t.match(o)) && (m.gamma = parseFloat(n[1], 10)),
                        (n = t.match(h)) && (m.exposure = parseFloat(n[1], 10)),
                        (n = t.match(d)) && (m.valid |= l,
                        m.format = n[1]),
                        (n = t.match(p)) && (m.valid |= c,
                        m.height = parseInt(n[1], 10),
                        m.width = parseInt(n[2], 10)),
                        m.valid & l && m.valid & c)
                            break
                    } else
                        m.comments += t + "\n";
                return m.valid & l ? m.valid & c ? m : s(a, "missing image size specifier") : s(a, "missing format specifier")
            }
              , p = function(e, t, n) {
                var i, u, l, c, h, f, d, p, m, g, v, y, M, w = t, x = n;
                if (w < 8 || w > 32767 || 2 !== e[0] || 2 !== e[1] || 128 & e[2])
                    return new Uint8Array(e);
                if (w !== (e[2] << 8 | e[3]))
                    return s(a, "wrong scanline width");
                if (i = new Uint8Array(4 * t * n),
                !i || !i.length)
                    return s(o, "unable to allocate buffer space");
                for (u = 0,
                l = 0,
                p = 4 * w,
                M = new Uint8Array(4),
                f = new Uint8Array(p); x > 0 && l < e.byteLength; ) {
                    if (l + 4 > e.byteLength)
                        return s(r);
                    if (M[0] = e[l++],
                    M[1] = e[l++],
                    M[2] = e[l++],
                    M[3] = e[l++],
                    2 != M[0] || 2 != M[1] || (M[2] << 8 | M[3]) != w)
                        return s(a, "bad rgbe scanline format");
                    for (d = 0; d < p && l < e.byteLength; ) {
                        if (c = e[l++],
                        y = c > 128,
                        y && (c -= 128),
                        0 === c || d + c > p)
                            return s(a, "bad scanline data");
                        if (y)
                            for (h = e[l++],
                            m = 0; m < c; m++)
                                f[d++] = h;
                        else
                            f.set(e.subarray(l, l + c), d),
                            d += c,
                            l += c
                    }
                    for (g = w,
                    m = 0; m < g; m++)
                        v = 0,
                        i[u] = f[m + v],
                        v += w,
                        i[u + 1] = f[m + v],
                        v += w,
                        i[u + 2] = f[m + v],
                        v += w,
                        i[u + 3] = f[m + v],
                        u += 4;
                    x--
                }
                return i
            }
              , m = new Uint8Array(e);
            m.byteLength,
            m.pos = 0;
            var g = d(m);
            if (t !== g) {
                var v = g.width
                  , y = g.height
                  , M = p(m.subarray(m.pos), v, y);
                if (t !== M)
                    return {
                        width: v,
                        height: y,
                        data: M,
                        header: g.string,
                        gamma: g.gamma,
                        exposure: g.exposure,
                        format: n.RGBEFormat,
                        type: n.UnsignedByteType
                    }
            }
            return null
        }
        ,
        n.CombinedCamera = function(e, t, r, i, a) {
            n.Camera.call(this),
            this.fov = r,
            this.far = a,
            this.near = i,
            this.left = -e / 2,
            this.right = e / 2,
            this.top = t / 2,
            this.bottom = -t / 2,
            this.aspect = e / t,
            this.zoom = 1,
            this.focus = 10,
            this.view = null,
            this.hyperfocusOffset = 0,
            this.hyperfocusScale = .5,
            this.cameraO = new n.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far),
            this.cameraP = new n.PerspectiveCamera(this.fov,this.aspect,this.near,this.far),
            this.toPerspective()
        }
        ,
        n.CombinedCamera.prototype = Object.create(n.Camera.prototype),
        n.CombinedCamera.prototype.constructor = n.CombinedCamera,
        n.CombinedCamera.prototype.toPerspective = function() {
            this.cameraP.near = this.near,
            this.cameraP.far = this.far,
            this.cameraP.aspect = this.aspect,
            this.cameraP.fov = this.fov,
            this.cameraP.zoom = this.zoom,
            this.cameraP.view = this.view,
            this.cameraP.focus = this.focus,
            this.cameraP.updateProjectionMatrix(),
            this.projectionMatrix = this.cameraP.projectionMatrix,
            this.inPerspectiveMode = !0,
            this.inOrthographicMode = !1
        }
        ,
        n.CombinedCamera.prototype.toOrthographic = function() {
            var e = this.fov
              , t = this.aspect
              , r = Math.tan(e * Math.PI / 180 / 2) * (this.hyperfocusOffset + this.hyperfocusScale * (this.near + this.far))
              , n = r * t;
            this.cameraO.near = this.near,
            this.cameraO.far = this.far,
            this.cameraO.left = -n,
            this.cameraO.right = n,
            this.cameraO.top = r,
            this.cameraO.bottom = -r,
            this.cameraO.zoom = this.zoom,
            this.cameraO.view = this.view,
            this.cameraO.updateProjectionMatrix(),
            this.projectionMatrix = this.cameraO.projectionMatrix,
            this.inPerspectiveMode = !1,
            this.inOrthographicMode = !0
        }
        ,
        n.CombinedCamera.prototype.setSize = function(e, t) {
            this.aspect = e / t,
            this.left = -e / 2,
            this.right = e / 2,
            this.top = t / 2,
            this.bottom = -t / 2
        }
        ,
        n.CombinedCamera.prototype.setFov = function(e) {
            this.fov = e,
            this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic()
        }
        ,
        n.CombinedCamera.prototype.copy = function(e) {
            return n.Camera.prototype.copy.call(this, e),
            this.fov = e.fov,
            this.far = e.far,
            this.near = e.near,
            this.left = e.left,
            this.right = e.right,
            this.top = e.top,
            this.bottom = e.bottom,
            this.zoom = e.zoom,
            this.view = null === e.view ? null : Object.assign({}, e.view),
            this.aspect = e.aspect,
            this.hyperfocusOffset = e.hyperfocusOffset,
            this.hyperfocusScale = e.hyperfocusScale,
            this.cameraO.copy(e.cameraO),
            this.cameraP.copy(e.cameraP),
            this.inOrthographicMode = e.inOrthographicMode,
            this.inPerspectiveMode = e.inPerspectiveMode,
            this
        }
        ,
        n.CombinedCamera.prototype.setViewOffset = function(e, t, r, n, i, a) {
            this.view = {
                fullWidth: e,
                fullHeight: t,
                offsetX: r,
                offsetY: n,
                width: i,
                height: a
            },
            this.inPerspectiveMode ? (this.aspect = e / t,
            this.toPerspective()) : this.toOrthographic()
        }
        ,
        n.CombinedCamera.prototype.clearViewOffset = function() {
            this.view = null,
            this.updateProjectionMatrix()
        }
        ,
        n.CombinedCamera.prototype.updateProjectionMatrix = function() {
            this.inPerspectiveMode ? this.toPerspective() : (this.toPerspective(),
            this.toOrthographic())
        }
        ,
        n.CombinedCamera.prototype.setLens = function(e, t) {
            void 0 === t && (t = 35);
            var r = .5 * t / (e * Math.max(this.cameraP.aspect, 1))
              , i = 2 * n.Math.RAD2DEG * Math.atan(r);
            return this.setFov(i),
            i
        }
        ,
        n.CombinedCamera.prototype.setZoom = function(e) {
            this.zoom = e,
            this.inPerspectiveMode ? this.toPerspective() : this.toOrthographic()
        }
        ,
        n.CombinedCamera.prototype.toFrontView = function() {
            this.rotation.x = 0,
            this.rotation.y = 0,
            this.rotation.z = 0,
            this.position.x = 0,
            this.position.y = 0,
            this.position.z = -15
        }
        ,
        n.CombinedCamera.prototype.toBackView = function() {
            this.rotation.x = 0,
            this.rotation.y = Math.PI,
            this.rotation.z = 0,
            this.position.x = 0,
            this.position.y = 0,
            this.position.z = 15
        }
        ,
        n.CombinedCamera.prototype.toLeftView = function() {
            this.rotation.x = 0,
            this.rotation.y = -Math.PI / 2,
            this.rotation.z = 0,
            this.position.x = -15,
            this.position.y = 0,
            this.position.z = 0
        }
        ,
        n.CombinedCamera.prototype.toRightView = function() {
            this.rotation.x = 0,
            this.rotation.y = Math.PI / 2,
            this.rotation.z = 0,
            this.position.x = 15,
            this.position.y = 0,
            this.position.z = 0
        }
        ,
        n.CombinedCamera.prototype.toTopView = function() {
            this.rotation.x = -Math.PI / 2,
            this.rotation.y = 0,
            this.rotation.z = 0,
            this.position.x = 0,
            this.position.y = 15,
            this.position.z = 0
        }
        ,
        n.CombinedCamera.prototype.toBottomView = function() {
            this.rotation.x = Math.PI / 2,
            this.rotation.y = 0,
            this.rotation.z = 0,
            this.position.x = 0,
            this.position.y = -15,
            this.position.z = 0
        }
        ,
        n.CombinedCamera.prototype.toPerspectiveView = function() {
            this.rotation.x = -Math.PI / 4,
            this.rotation.y = -Math.PI / 4,
            this.rotation.z = 0,
            this.position.x = 4,
            this.position.y = 4,
            this.position.z = 4
        }
        ,
        n.ParallaxBarrierEffect = function(e) {
            var t = new n.OrthographicCamera(-1,1,1,-1,0,1)
              , r = new n.Scene
              , i = new n.StereoCamera
              , a = {
                minFilter: n.LinearFilter,
                magFilter: n.NearestFilter,
                format: n.RGBAFormat
            }
              , o = new n.WebGLRenderTarget(512,512,a)
              , s = new n.WebGLRenderTarget(512,512,a)
              , u = new n.ShaderMaterial({
                uniforms: {
                    mapLeft: {
                        value: o.texture
                    },
                    mapRight: {
                        value: s.texture
                    },
                    resolution: {
                        value: new n.Vector2(512,512)
                    }
                },
                vertexShader: ["varying vec2 vUv;", "void main() {", " vUv = vec2( uv.x, uv.y );", " gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
                fragmentShader: ["uniform sampler2D mapLeft;", "uniform sampler2D mapRight;", "uniform vec2 resolution;", "varying vec2 vUv;", "void main() {", " vec2 uv = vUv;", " if ( ( mod( gl_FragCoord.x + 1.0, 2.0 ) ) > 1.00 ) {", "   gl_FragColor = texture2D( mapLeft, uv );", " } else {", "   gl_FragColor = texture2D( mapRight, uv - vec2( resolution.x, 0 ) );", " }", "}"].join("\n")
            })
              , l = new n.Mesh(new n.PlaneBufferGeometry(2,2),u);
            r.add(l),
            this.setSize = function(t, r) {
                e.setSize(t, r);
                var n = e.getPixelRatio();
                u.uniforms.resolution.value.set(1 / t, 1 / r),
                o.setSize(t * n / 2 + 1, r * n),
                s.setSize(t * n / 2 + 1, r * n)
            }
            ,
            this.render = function(n, a) {
                n.updateMatrixWorld(),
                null === a.parent && a.updateMatrixWorld(),
                i.update(a),
                e.render(n, i.cameraL, o, !0),
                e.render(n, i.cameraR, s, !0),
                e.render(r, t)
            }
        }
        ,
        n.StereoEffect = function(e) {
            var t = new n.StereoCamera;
            t.aspect = .5,
            this.setEyeSeparation = function(e) {
                t.eyeSep = e
            }
            ,
            this.setSize = function(t, r) {
                e.setSize(t, r)
            }
            ,
            this.render = function(r, n) {
                r.updateMatrixWorld(),
                null === n.parent && n.updateMatrixWorld(),
                t.update(n);
                var i = e.getSize();
                e.autoClear && e.clear(),
                e.setScissorTest(!0),
                e.setScissor(0, 0, i.width / 2, i.height),
                e.setViewport(0, 0, i.width / 2, i.height),
                e.render(r, t.cameraL),
                e.setScissor(i.width / 2, 0, i.width / 2, i.height),
                e.setViewport(i.width / 2, 0, i.width / 2, i.height),
                e.render(r, t.cameraR),
                e.setScissorTest(!1)
            }
        }
        ,
        n.FXAAShader = {
            uniforms: {
                tDiffuse: {
                    value: null
                },
                resolution: {
                    value: new n.Vector2(1 / 1024,1 / 512)
                }
            },
            vertexShader: ["void main() {", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "uniform vec2 resolution;", "#define FXAA_REDUCE_MIN   (1.0/128.0)", "#define FXAA_REDUCE_MUL   (1.0/8.0)", "#define FXAA_SPAN_MAX     8.0", "void main() {", "vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;", "vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;", "vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;", "vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;", "vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );", "vec3 rgbM  = rgbaM.xyz;", "vec3 luma = vec3( 0.299, 0.587, 0.114 );", "float lumaNW = dot( rgbNW, luma );", "float lumaNE = dot( rgbNE, luma );", "float lumaSW = dot( rgbSW, luma );", "float lumaSE = dot( rgbSE, luma );", "float lumaM  = dot( rgbM,  luma );", "float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );", "float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );", "vec2 dir;", "dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));", "dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));", "float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );", "float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );", "dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),", "max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),", "dir * rcpDirMin)) * resolution;", "vec4 rgbA = (1.0/2.0) * (", "texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +", "texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));", "vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (", "texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +", "texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));", "float lumaB = dot(rgbB, vec4(luma, 0.0));", "if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {", "gl_FragColor = rgbA;", "} else {", "gl_FragColor = rgbB;", "}", "}"].join("\n")
        },
        n.OutlinePass = function(e, t, r, i) {
            this.renderScene = t,
            this.renderCamera = r,
            this.selectedObjects = void 0 !== i ? i : [],
            this.visibleEdgeColor = new n.Color(1,1,1),
            this.hiddenEdgeColor = new n.Color(.1,.04,.02),
            this.edgeGlow = 0,
            this.usePatternTexture = !1,
            this.edgeThickness = 1,
            this.edgeStrength = 3,
            this.downSampleRatio = 2,
            this.pulsePeriod = 0,
            n.Pass.call(this),
            this.resolution = void 0 !== e ? new n.Vector2(e.x,e.y) : new n.Vector2(256,256);
            var a = {
                minFilter: n.LinearFilter,
                magFilter: n.LinearFilter,
                format: n.RGBAFormat
            }
              , o = Math.round(this.resolution.x / this.downSampleRatio)
              , s = Math.round(this.resolution.y / this.downSampleRatio);
            this.maskBufferMaterial = new n.MeshBasicMaterial({
                color: 16777215
            }),
            this.maskBufferMaterial.side = n.DoubleSide,
            this.renderTargetMaskBuffer = new n.WebGLRenderTarget(this.resolution.x,this.resolution.y,a),
            this.renderTargetMaskBuffer.texture.name = "OutlinePass.mask",
            this.renderTargetMaskBuffer.texture.generateMipmaps = !1,
            this.depthMaterial = new n.MeshDepthMaterial,
            this.depthMaterial.side = n.DoubleSide,
            this.depthMaterial.depthPacking = n.RGBADepthPacking,
            this.depthMaterial.blending = n.NoBlending,
            this.prepareMaskMaterial = this.getPrepareMaskMaterial(),
            this.prepareMaskMaterial.side = n.DoubleSide,
            this.renderTargetDepthBuffer = new n.WebGLRenderTarget(this.resolution.x,this.resolution.y,a),
            this.renderTargetDepthBuffer.texture.name = "OutlinePass.depth",
            this.renderTargetDepthBuffer.texture.generateMipmaps = !1,
            this.renderTargetMaskDownSampleBuffer = new n.WebGLRenderTarget(o,s,a),
            this.renderTargetMaskDownSampleBuffer.texture.name = "OutlinePass.depthDownSample",
            this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps = !1,
            this.renderTargetBlurBuffer1 = new n.WebGLRenderTarget(o,s,a),
            this.renderTargetBlurBuffer1.texture.name = "OutlinePass.blur1",
            this.renderTargetBlurBuffer1.texture.generateMipmaps = !1,
            this.renderTargetBlurBuffer2 = new n.WebGLRenderTarget(Math.round(o / 2),Math.round(s / 2),a),
            this.renderTargetBlurBuffer2.texture.name = "OutlinePass.blur2",
            this.renderTargetBlurBuffer2.texture.generateMipmaps = !1,
            this.edgeDetectionMaterial = this.getEdgeDetectionMaterial(),
            this.renderTargetEdgeBuffer1 = new n.WebGLRenderTarget(o,s,a),
            this.renderTargetEdgeBuffer1.texture.name = "OutlinePass.edge1",
            this.renderTargetEdgeBuffer1.texture.generateMipmaps = !1,
            this.renderTargetEdgeBuffer2 = new n.WebGLRenderTarget(Math.round(o / 2),Math.round(s / 2),a),
            this.renderTargetEdgeBuffer2.texture.name = "OutlinePass.edge2",
            this.renderTargetEdgeBuffer2.texture.generateMipmaps = !1;
            var u = 4
              , l = 4;
            this.separableBlurMaterial1 = this.getSeperableBlurMaterial(u),
            this.separableBlurMaterial1.uniforms.texSize.value = new n.Vector2(o,s),
            this.separableBlurMaterial1.uniforms.kernelRadius.value = 1,
            this.separableBlurMaterial2 = this.getSeperableBlurMaterial(l),
            this.separableBlurMaterial2.uniforms.texSize.value = new n.Vector2(Math.round(o / 2),Math.round(s / 2)),
            this.separableBlurMaterial2.uniforms.kernelRadius.value = l,
            this.overlayMaterial = this.getOverlayMaterial(),
            void 0 === n.CopyShader && console.error("THREE.OutlinePass relies on THREE.CopyShader");
            var c = n.CopyShader;
            this.copyUniforms = n.UniformsUtils.clone(c.uniforms),
            this.copyUniforms.opacity.value = 1,
            this.materialCopy = new n.ShaderMaterial({
                uniforms: this.copyUniforms,
                vertexShader: c.vertexShader,
                fragmentShader: c.fragmentShader,
                blending: n.NoBlending,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            }),
            this.enabled = !0,
            this.needsSwap = !1,
            this.oldClearColor = new n.Color,
            this.oldClearAlpha = 1,
            this.camera = new n.OrthographicCamera(-1,1,1,-1,0,1),
            this.scene = new n.Scene,
            this.quad = new n.Mesh(new n.PlaneBufferGeometry(2,2),null),
            this.quad.frustumCulled = !1,
            this.scene.add(this.quad),
            this.tempPulseColor1 = new n.Color,
            this.tempPulseColor2 = new n.Color,
            this.textureMatrix = new n.Matrix4
        }
        ,
        n.OutlinePass.prototype = Object.assign(Object.create(n.Pass.prototype), {
            constructor: n.OutlinePass,
            dispose: function() {
                this.renderTargetMaskBuffer.dispose(),
                this.renderTargetDepthBuffer.dispose(),
                this.renderTargetMaskDownSampleBuffer.dispose(),
                this.renderTargetBlurBuffer1.dispose(),
                this.renderTargetBlurBuffer2.dispose(),
                this.renderTargetEdgeBuffer1.dispose(),
                this.renderTargetEdgeBuffer2.dispose()
            },
            setSize: function(e, t) {
                this.renderTargetMaskBuffer.setSize(e, t);
                var r = Math.round(e / this.downSampleRatio)
                  , i = Math.round(t / this.downSampleRatio);
                this.renderTargetMaskDownSampleBuffer.setSize(r, i),
                this.renderTargetBlurBuffer1.setSize(r, i),
                this.renderTargetEdgeBuffer1.setSize(r, i),
                this.separableBlurMaterial1.uniforms.texSize.value = new n.Vector2(r,i),
                r = Math.round(r / 2),
                i = Math.round(i / 2),
                this.renderTargetBlurBuffer2.setSize(r, i),
                this.renderTargetEdgeBuffer2.setSize(r, i),
                this.separableBlurMaterial2.uniforms.texSize.value = new n.Vector2(r,i)
            },
            changeVisibilityOfSelectedObjects: function(e) {
                function t(t) {
                    t instanceof n.Mesh && (t.visible = e)
                }
                for (var r = 0; r < this.selectedObjects.length; r++) {
                    var i = this.selectedObjects[r];
                    i.traverse(t)
                }
            },
            changeVisibilityOfNonSelectedObjects: function(e) {
                function t(e) {
                    e instanceof n.Mesh && i.push(e)
                }
                function r(t) {
                    if (t instanceof n.Mesh) {
                        for (var r = !1, a = 0; a < i.length; a++) {
                            var o = i[a].id;
                            if (o === t.id) {
                                r = !0;
                                break
                            }
                        }
                        if (!r) {
                            var s = t.visible;
                            e && !t.bVisible || (t.visible = e),
                            t.bVisible = s
                        }
                    }
                }
                for (var i = [], a = 0; a < this.selectedObjects.length; a++) {
                    var o = this.selectedObjects[a];
                    o.traverse(t)
                }
                this.renderScene.traverse(r)
            },
            updateTextureMatrix: function() {
                this.textureMatrix.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
                this.textureMatrix.multiply(this.renderCamera.projectionMatrix),
                this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)
            },
            render: function(e, t, r, i, a) {
                if (0 !== this.selectedObjects.length) {
                    this.oldClearColor.copy(e.getClearColor()),
                    this.oldClearAlpha = e.getClearAlpha();
                    var o = e.autoClear;
                    if (e.autoClear = !1,
                    a && e.context.disable(e.context.STENCIL_TEST),
                    e.setClearColor(16777215, 1),
                    this.changeVisibilityOfSelectedObjects(!1),
                    this.renderScene.overrideMaterial = this.depthMaterial,
                    e.render(this.renderScene, this.renderCamera, this.renderTargetDepthBuffer, !0),
                    this.changeVisibilityOfSelectedObjects(!0),
                    this.updateTextureMatrix(),
                    this.changeVisibilityOfNonSelectedObjects(!1),
                    this.renderScene.overrideMaterial = this.prepareMaskMaterial,
                    this.prepareMaskMaterial.uniforms.cameraNearFar.value = new n.Vector2(this.renderCamera.near,this.renderCamera.far),
                    this.prepareMaskMaterial.uniforms.depthTexture.value = this.renderTargetDepthBuffer.texture,
                    this.prepareMaskMaterial.uniforms.textureMatrix.value = this.textureMatrix,
                    e.render(this.renderScene, this.renderCamera, this.renderTargetMaskBuffer, !0),
                    this.renderScene.overrideMaterial = null,
                    this.changeVisibilityOfNonSelectedObjects(!0),
                    this.quad.material = this.materialCopy,
                    this.copyUniforms.tDiffuse.value = this.renderTargetMaskBuffer.texture,
                    e.render(this.scene, this.camera, this.renderTargetMaskDownSampleBuffer, !0),
                    this.tempPulseColor1.copy(this.visibleEdgeColor),
                    this.tempPulseColor2.copy(this.hiddenEdgeColor),
                    this.pulsePeriod > 0) {
                        var s = .625 + .75 * Math.cos(.01 * performance.now() / this.pulsePeriod) / 2;
                        this.tempPulseColor1.multiplyScalar(s),
                        this.tempPulseColor2.multiplyScalar(s)
                    }
                    this.quad.material = this.edgeDetectionMaterial,
                    this.edgeDetectionMaterial.uniforms.maskTexture.value = this.renderTargetMaskDownSampleBuffer.texture,
                    this.edgeDetectionMaterial.uniforms.texSize.value = new n.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),
                    this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value = this.tempPulseColor1,
                    this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value = this.tempPulseColor2,
                    e.render(this.scene, this.camera, this.renderTargetEdgeBuffer1, !0),
                    this.quad.material = this.separableBlurMaterial1,
                    this.separableBlurMaterial1.uniforms.colorTexture.value = this.renderTargetEdgeBuffer1.texture,
                    this.separableBlurMaterial1.uniforms.direction.value = n.OutlinePass.BlurDirectionX,
                    this.separableBlurMaterial1.uniforms.kernelRadius.value = this.edgeThickness,
                    e.render(this.scene, this.camera, this.renderTargetBlurBuffer1, !0),
                    this.separableBlurMaterial1.uniforms.colorTexture.value = this.renderTargetBlurBuffer1.texture,
                    this.separableBlurMaterial1.uniforms.direction.value = n.OutlinePass.BlurDirectionY,
                    this.quad.material = this.separableBlurMaterial2,
                    this.separableBlurMaterial2.uniforms.colorTexture.value = this.renderTargetEdgeBuffer1.texture,
                    this.separableBlurMaterial2.uniforms.direction.value = n.OutlinePass.BlurDirectionX,
                    e.render(this.scene, this.camera, this.renderTargetBlurBuffer2, !0),
                    this.separableBlurMaterial2.uniforms.colorTexture.value = this.renderTargetBlurBuffer2.texture,
                    this.separableBlurMaterial2.uniforms.direction.value = n.OutlinePass.BlurDirectionY,
                    e.render(this.scene, this.camera, this.renderTargetEdgeBuffer2, !0),
                    this.quad.material = this.overlayMaterial,
                    this.overlayMaterial.uniforms.maskTexture.value = this.renderTargetMaskBuffer.texture,
                    this.overlayMaterial.uniforms.edgeTexture1.value = this.renderTargetEdgeBuffer1.texture,
                    this.overlayMaterial.uniforms.edgeTexture2.value = this.renderTargetEdgeBuffer2.texture,
                    this.overlayMaterial.uniforms.patternTexture.value = this.patternTexture,
                    this.overlayMaterial.uniforms.edgeStrength.value = this.edgeStrength,
                    this.overlayMaterial.uniforms.edgeGlow.value = this.edgeGlow,
                    this.overlayMaterial.uniforms.usePatternTexture.value = this.usePatternTexture,
                    a && e.context.enable(e.context.STENCIL_TEST),
                    e.render(this.scene, this.camera, this.renderToScreen ? null : r, !1),
                    e.setClearColor(this.oldClearColor, this.oldClearAlpha),
                    e.autoClear = o
                }
            },
            getPrepareMaskMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        depthTexture: {
                            value: null
                        },
                        cameraNearFar: {
                            value: new n.Vector2(.5,.5)
                        },
                        textureMatrix: {
                            value: new n.Matrix4
                        }
                    },
                    vertexShader: "varying vec2 vUv;\t\t\t\t\tvarying vec4 projTexCoord;\t\t\t\t\tvarying vec4 vPosition;\t\t\t\t\tuniform mat4 textureMatrix;\t\t\t\t\tvoid main() {\t\t\t\t\t\tvUv = uv;\t\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\t\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\t\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <packing>\t\t\t\t\tvarying vec2 vUv;\t\t\t\t\tvarying vec4 vPosition;\t\t\t\t\tvarying vec4 projTexCoord;\t\t\t\t\tuniform sampler2D depthTexture;\t\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\t\t\t\t\t\tfloat viewZ = -perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\t\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\t\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\t\t\t\t\t}"
                })
            },
            getEdgeDetectionMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        maskTexture: {
                            value: null
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        visibleEdgeColor: {
                            value: new n.Vector3(1,1,1)
                        },
                        hiddenEdgeColor: {
                            value: new n.Vector3(1,1,1)
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "varying vec2 vUv;\t\t\t\t\tuniform sampler2D maskTexture;\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t\t}"
                })
            },
            getSeperableBlurMaterial: function(e) {
                return new n.ShaderMaterial({
                    defines: {
                        MAX_RADIUS: e
                    },
                    uniforms: {
                        colorTexture: {
                            value: null
                        },
                        texSize: {
                            value: new n.Vector2(.5,.5)
                        },
                        direction: {
                            value: new n.Vector2(.5,.5)
                        },
                        kernelRadius: {
                            value: 1
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "#include <common>\t\t\t\t\tvarying vec2 vUv;\t\t\t\t\tuniform sampler2D colorTexture;\t\t\t\t\tuniform vec2 texSize;\t\t\t\t\tuniform vec2 direction;\t\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t\t}\t\t\t\t\tvoid main() {\t\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t\t}\t\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\t\t\t\t\t}"
                })
            },
            getOverlayMaterial: function() {
                return new n.ShaderMaterial({
                    uniforms: {
                        maskTexture: {
                            value: null
                        },
                        edgeTexture1: {
                            value: null
                        },
                        edgeTexture2: {
                            value: null
                        },
                        patternTexture: {
                            value: null
                        },
                        edgeStrength: {
                            value: 1
                        },
                        edgeGlow: {
                            value: 1
                        },
                        usePatternTexture: {
                            value: 0
                        }
                    },
                    vertexShader: "varying vec2 vUv;\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvUv = uv;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\t}",
                    fragmentShader: "varying vec2 vUv;\t\t\t\t\tuniform sampler2D maskTexture;\t\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\t\tuniform sampler2D patternTexture;\t\t\t\t\tuniform float edgeStrength;\t\t\t\t\tuniform float edgeGlow;\t\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t\t}",
                    blending: n.AdditiveBlending,
                    depthTest: !1,
                    depthWrite: !1,
                    transparent: !0
                })
            }
        }),
        n.OutlinePass.BlurDirectionX = new n.Vector2(1,0),
        n.OutlinePass.BlurDirectionY = new n.Vector2(0,1),
        n.VREffect = function(e, t) {
            function r(e) {
                l = e,
                e.length > 0 ? u = e[0] : t && t("HMD not available")
            }
            function i() {
                var t = m.isPresenting;
                if (m.isPresenting = void 0 !== u && u.isPresenting,
                m.isPresenting) {
                    var r = u.getEyeParameters("left")
                      , n = r.renderWidth
                      , i = r.renderHeight;
                    t || (y = e.getPixelRatio(),
                    g = e.getSize(),
                    e.setPixelRatio(1),
                    e.setSize(2 * n, i, !1))
                } else
                    t && (e.setPixelRatio(y),
                    e.setSize(g.width, g.height, v))
            }
            function a(e) {
                var t = 2 / (e.leftTan + e.rightTan)
                  , r = (e.leftTan - e.rightTan) * t * .5
                  , n = 2 / (e.upTan + e.downTan)
                  , i = (e.upTan - e.downTan) * n * .5;
                return {
                    scale: [t, n],
                    offset: [r, i]
                }
            }
            function o(e, t, r, i) {
                t = void 0 === t || t,
                r = void 0 === r ? .01 : r,
                i = void 0 === i ? 1e4 : i;
                var o = t ? -1 : 1
                  , s = new n.Matrix4
                  , u = s.elements
                  , l = a(e);
                return u[0] = l.scale[0],
                u[1] = 0,
                u[2] = l.offset[0] * o,
                u[3] = 0,
                u[4] = 0,
                u[5] = l.scale[1],
                u[6] = -l.offset[1] * o,
                u[7] = 0,
                u[8] = 0,
                u[9] = 0,
                u[10] = i / (r - i) * -o,
                u[11] = i * r / (r - i),
                u[12] = 0,
                u[13] = 0,
                u[14] = o,
                u[15] = 0,
                s.transpose(),
                s
            }
            function s(e, t, r, n) {
                var i = Math.PI / 180
                  , a = {
                    upTan: Math.tan(e.upDegrees * i),
                    downTan: Math.tan(e.downDegrees * i),
                    leftTan: Math.tan(e.leftDegrees * i),
                    rightTan: Math.tan(e.rightDegrees * i)
                };
                return o(a, t, r, n)
            }
            var u, l, c, h, f = new n.Vector3, d = new n.Vector3, p = null;
            "VRFrameData"in window && (p = new window.VRFrameData),
            navigator.getVRDisplays && navigator.getVRDisplays().then(r).catch(function() {
                console.warn("THREE.VREffect: Unable to get VR Displays")
            }),
            this.isPresenting = !1,
            this.scale = 1;
            var m = this
              , g = e.getSize()
              , v = !1
              , y = e.getPixelRatio();
            this.getVRDisplay = function() {
                return u
            }
            ,
            this.setVRDisplay = function(e) {
                u = e
            }
            ,
            this.getVRDisplays = function() {
                return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),
                l
            }
            ,
            this.setSize = function(t, r, n) {
                if (g = {
                    width: t,
                    height: r
                },
                v = n,
                m.isPresenting) {
                    var i = u.getEyeParameters("left");
                    e.setPixelRatio(1),
                    e.setSize(2 * i.renderWidth, i.renderHeight, !1)
                } else
                    e.setPixelRatio(y),
                    e.setSize(t, r, n)
            }
            ;
            var M = e.domElement
              , w = [0, 0, .5, 1]
              , x = [.5, 0, .5, 1];
            window.addEventListener("vrdisplaypresentchange", i, !1),
            this.setFullScreen = function(e) {
                return new Promise(function(t, r) {
                    return void 0 === u ? void r(new Error("No VR hardware found.")) : m.isPresenting === e ? void t() : void t(e ? u.requestPresent([{
                        source: M
                    }]) : u.exitPresent())
                }
                )
            }
            ,
            this.requestPresent = function() {
                return this.setFullScreen(!0)
            }
            ,
            this.exitPresent = function() {
                return this.setFullScreen(!1)
            }
            ,
            this.requestAnimationFrame = function(e) {
                return void 0 !== u ? u.requestAnimationFrame(e) : window.requestAnimationFrame(e)
            }
            ,
            this.cancelAnimationFrame = function(e) {
                void 0 !== u ? u.cancelAnimationFrame(e) : window.cancelAnimationFrame(e)
            }
            ,
            this.submitFrame = function() {
                void 0 !== u && m.isPresenting && u.submitFrame()
            }
            ,
            this.autoSubmitFrame = !0;
            var A = new n.PerspectiveCamera;
            A.layers.enable(1);
            var b = new n.PerspectiveCamera;
            b.layers.enable(2),
            this.render = function(t, r, n, i) {
                if (u && m.isPresenting) {
                    var a = t.autoUpdate;
                    a && (t.updateMatrixWorld(),
                    t.autoUpdate = !1);
                    var o = u.getEyeParameters("left")
                      , l = u.getEyeParameters("right");
                    f.fromArray(o.offset),
                    d.fromArray(l.offset),
                    Array.isArray(t) && (console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),
                    t = t[0]);
                    var g, v, y = e.getSize(), M = u.getLayers();
                    if (M.length) {
                        var T = M[0];
                        g = null !== T.leftBounds && 4 === T.leftBounds.length ? T.leftBounds : w,
                        v = null !== T.rightBounds && 4 === T.rightBounds.length ? T.rightBounds : x
                    } else
                        g = w,
                        v = x;
                    c = {
                        x: Math.round(y.width * g[0]),
                        y: Math.round(y.height * g[1]),
                        width: Math.round(y.width * g[2]),
                        height: Math.round(y.height * g[3])
                    },
                    h = {
                        x: Math.round(y.width * v[0]),
                        y: Math.round(y.height * v[1]),
                        width: Math.round(y.width * v[2]),
                        height: Math.round(y.height * v[3])
                    },
                    n ? (e.setRenderTarget(n),
                    n.scissorTest = !0) : (e.setRenderTarget(null),
                    e.setScissorTest(!0)),
                    (e.autoClear || i) && e.clear(),
                    null === r.parent && r.updateMatrixWorld(),
                    r.matrixWorld.decompose(A.position, A.quaternion, A.scale),
                    r.matrixWorld.decompose(b.position, b.quaternion, b.scale);
                    var _ = this.scale;
                    return A.translateOnAxis(f, _),
                    b.translateOnAxis(d, _),
                    u.getFrameData ? (u.depthNear = r.near,
                    u.depthFar = r.far,
                    u.getFrameData(p),
                    A.projectionMatrix.elements = p.leftProjectionMatrix,
                    b.projectionMatrix.elements = p.rightProjectionMatrix) : (A.projectionMatrix = s(o.fieldOfView, !0, r.near, r.far),
                    b.projectionMatrix = s(l.fieldOfView, !0, r.near, r.far)),
                    n ? (n.viewport.set(c.x, c.y, c.width, c.height),
                    n.scissor.set(c.x, c.y, c.width, c.height)) : (e.setViewport(c.x, c.y, c.width, c.height),
                    e.setScissor(c.x, c.y, c.width, c.height)),
                    e.render(t, A, n, i),
                    n ? (n.viewport.set(h.x, h.y, h.width, h.height),
                    n.scissor.set(h.x, h.y, h.width, h.height)) : (e.setViewport(h.x, h.y, h.width, h.height),
                    e.setScissor(h.x, h.y, h.width, h.height)),
                    e.render(t, b, n, i),
                    n ? (n.viewport.set(0, 0, y.width, y.height),
                    n.scissor.set(0, 0, y.width, y.height),
                    n.scissorTest = !1,
                    e.setRenderTarget(null)) : (e.setViewport(0, 0, y.width, y.height),
                    e.setScissorTest(!1)),
                    a && (t.autoUpdate = !0),
                    void (m.autoSubmitFrame && m.submitFrame())
                }
                e.render(t, r, n, i)
            }
            ,
            this.dispose = function() {
                window.removeEventListener("vrdisplaypresentchange", i, !1)
            }
        }
        ,
        n.VRControls = function(e, t) {
            function r(e) {
                a = e,
                e.length > 0 ? i = e[0] : t && t("VR input not available.")
            }
            var i, a, o = this, s = new n.Matrix4, u = null;
            "VRFrameData"in window && (u = new VRFrameData),
            navigator.getVRDisplays && navigator.getVRDisplays().then(r).catch(function() {
                console.warn("THREE.VRControls: Unable to get VR Displays")
            }),
            this.scale = 1,
            this.standing = !1,
            this.userHeight = 1.6,
            this.getVRDisplay = function() {
                return i
            }
            ,
            this.setVRDisplay = function(e) {
                i = e
            }
            ,
            this.getVRDisplays = function() {
                return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),
                a
            }
            ,
            this.getStandingMatrix = function() {
                return s
            }
            ,
            this.update = function() {
                if (i) {
                    var t;
                    i.getFrameData ? (i.getFrameData(u),
                    t = u.pose) : i.getPose && (t = i.getPose()),
                    null !== t.orientation && e.quaternion.fromArray(t.orientation),
                    null !== t.position ? e.position.fromArray(t.position) : e.position.set(0, 0, 0),
                    this.standing && (i.stageParameters ? (e.updateMatrix(),
                    s.fromArray(i.stageParameters.sittingToStandingTransform),
                    e.applyMatrix(s)) : e.position.setY(e.position.y + this.userHeight)),
                    e.position.multiplyScalar(o.scale)
                }
            }
            ,
            this.resetPose = function() {
                i && i.resetPose()
            }
            ,
            this.resetSensor = function() {
                console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),
                this.resetPose()
            }
            ,
            this.zeroSensor = function() {
                console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),
                this.resetPose()
            }
            ,
            this.dispose = function() {
                i = null
            }
        }
        ,
        n.VRController = function(e, t) {
            function r(e) {
                for (var r = navigator.getGamepads(), n = 0, i = 0; n < 4; n++) {
                    var a = r[n];
                    if (a && a.id === e) {
                        if (i === t)
                            return a;
                        i++
                    }
                }
            }
            n.Object3D.call(this);
            var i, a = this, o = [0, 0], s = !1, u = !1, l = !1, c = !1;
            void 0 === t && (t = 0),
            this.matrixAutoUpdate = !1,
            this.standingMatrix = new n.Matrix4,
            this.getGamepad = function() {
                return i
            }
            ,
            this.getButtonState = function(e) {
                return "thumbpad" === e ? s : "trigger" === e ? u : "grips" === e ? l : "menu" === e ? c : void 0
            }
            ,
            this.update = function() {
                if (i = r(e, t),
                void 0 !== i && i.pose && null !== i.pose.position && null !== i.pose.orientation) {
                    var n = i.pose;
                    a.position.fromArray(n.position),
                    a.quaternion.fromArray(n.orientation),
                    a.matrix.compose(a.position, a.quaternion, a.scale),
                    a.matrix.multiplyMatrices(a.standingMatrix, a.matrix),
                    a.matrix.decompose(a.position, a.quaternion, a.scale),
                    a.matrixWorldNeedsUpdate = !0,
                    a.visible = !0
                } else
                    a.visible = !1;
                if (i) {
                    if (!i.axes || o[0] === i.axes[0] && o[1] === i.axes[1] || (o[0] = i.axes[0],
                    o[1] = i.axes[1],
                    a.dispatchEvent({
                        type: "axischanged",
                        axes: o
                    })),
                    i.buttons[0] && s !== i.buttons[0].pressed) {
                        s = i.buttons[0].pressed;
                        var h = new Event(s ? "thumbpaddown" : "thumbpadup");
                        window.dispatchEvent(h)
                    }
                    if (i.buttons[1] && u !== i.buttons[1].pressed) {
                        u = i.buttons[1].pressed;
                        var h = new Event(u ? "triggerdown" : "triggerup");
                        window.dispatchEvent(h)
                    }
                    if (i.buttons[2] && l !== i.buttons[2].pressed) {
                        l = i.buttons[2].pressed;
                        var h = new Event(l ? "gripsdown" : "gripsup");
                        window.dispatchEvent(h)
                    }
                    if (i.buttons[3] && c !== i.buttons[3].pressed) {
                        c = i.buttons[3].pressed;
                        var h = new Event(c ? "menudown" : "menuup");
                        window.dispatchEvent(h)
                    }
                }
            }
        }
        ,
        n.VRController.prototype = Object.create(n.Object3D.prototype),
        n.VRController.prototype.constructor = n.VRController,
        e.exports = n
    }
    , /*!**************************************************!*\
  !*** ./~/babel-runtime/core-js/object/assign.js ***!
  \**************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/assign */
            279),
            __esModule: !0
        }
    }
    , /*!*************************!*\
  !*** ./vendor/ramda.js ***!
  \*************************/
    function(e, t, r) {
        (function() {
            "use strict";
            var t = function(e, t) {
                switch (e) {
                case 0:
                    return function() {
                        return t.apply(this, arguments)
                    }
                    ;
                case 1:
                    return function(e) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 2:
                    return function(e, r) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 3:
                    return function(e, r, n) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 4:
                    return function(e, r, n, i) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 5:
                    return function(e, r, n, i, a) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 6:
                    return function(e, r, n, i, a, o) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 7:
                    return function(e, r, n, i, a, o, s) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 8:
                    return function(e, r, n, i, a, o, s, u) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 9:
                    return function(e, r, n, i, a, o, s, u, l) {
                        return t.apply(this, arguments)
                    }
                    ;
                case 10:
                    return function(e, r, n, i, a, o, s, u, l, c) {
                        return t.apply(this, arguments)
                    }
                    ;
                default:
                    throw new Error("First argument to _arity must be a non-negative integer no greater than ten")
                }
            }
              , r = function(e) {
                for (var t, r = []; !(t = e.next()).done; )
                    r.push(t.value);
                return r
            }
              , n = function(e, t) {
                e = e || [],
                t = t || [];
                var r, n = e.length, i = t.length, a = [];
                for (r = 0; r < n; )
                    a[a.length] = e[r],
                    r += 1;
                for (r = 0; r < i; )
                    a[a.length] = t[r],
                    r += 1;
                return a
            }
              , i = function(e, t) {
                for (var r = 0, n = t.length, i = []; r < n; )
                    e(t[r]) && (i[i.length] = t[r]),
                    r += 1;
                return i
            }
              , a = function(e) {
                return {
                    "@@transducer/value": e,
                    "@@transducer/reduced": !0
                }
            }
              , o = function(e, t) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }
              , s = Array.isArray || function(e) {
                return null != e && e.length >= 0 && "[object Array]" === Object.prototype.toString.call(e)
            }
              , u = function(e) {
                return null != e && "object" == typeof e && e["@@functional/placeholder"] === !0
            }
              , l = function(e) {
                return "[object String]" === Object.prototype.toString.call(e)
            }
              , c = function(e) {
                return "function" == typeof e["@@transducer/step"]
            }
              , h = function(e, t) {
                for (var r = 0, n = t.length, i = Array(n); r < n; )
                    i[r] = e(t[r]),
                    r += 1;
                return i
            }
              , f = function(e, t) {
                return function() {
                    return t.call(this, e.apply(this, arguments))
                }
            }
              , d = function(e) {
                return e && e["@@transducer/reduced"] ? e : {
                    "@@transducer/value": e,
                    "@@transducer/reduced": !0
                }
            }
              , p = function e(t, r, n) {
                switch (arguments.length) {
                case 1:
                    return e(t, 0, t.length);
                case 2:
                    return e(t, r, t.length);
                default:
                    for (var i = [], a = 0, o = Math.max(0, Math.min(t.length, n) - r); a < o; )
                        i[a] = t[r + a],
                        a += 1;
                    return i
                }
            }
              , m = {
                init: function() {
                    return this.xf["@@transducer/init"]()
                },
                result: function(e) {
                    return this.xf["@@transducer/result"](e)
                }
            }
              , g = function() {
                function e(e) {
                    this.f = e
                }
                return e.prototype["@@transducer/init"] = function() {
                    throw new Error("init not implemented on XWrap")
                }
                ,
                e.prototype["@@transducer/result"] = function(e) {
                    return e
                }
                ,
                e.prototype["@@transducer/step"] = function(e, t) {
                    return this.f(e, t)
                }
                ,
                function(t) {
                    return new e(t)
                }
            }()
              , v = function(e, t) {
                return function() {
                    var r = arguments.length;
                    if (0 === r)
                        return t();
                    var n = arguments[r - 1];
                    return s(n) || "function" != typeof n[e] ? t.apply(this, arguments) : n[e].apply(n, p(arguments, 0, r - 1))
                }
            }
              , y = function(e) {
                return function t(r) {
                    return 0 === arguments.length || u(r) ? t : e.apply(this, arguments)
                }
            }
              , M = function(e) {
                return function t(r, n) {
                    switch (arguments.length) {
                    case 0:
                        return t;
                    case 1:
                        return u(r) ? t : y(function(t) {
                            return e(r, t)
                        });
                    default:
                        return u(r) && u(n) ? t : u(r) ? y(function(t) {
                            return e(t, n)
                        }) : u(n) ? y(function(t) {
                            return e(r, t)
                        }) : e(r, n)
                    }
                }
            }
              , w = function(e) {
                return function t(r, n, i) {
                    switch (arguments.length) {
                    case 0:
                        return t;
                    case 1:
                        return u(r) ? t : M(function(t, n) {
                            return e(r, t, n)
                        });
                    case 2:
                        return u(r) && u(n) ? t : u(r) ? M(function(t, r) {
                            return e(t, n, r)
                        }) : u(n) ? M(function(t, n) {
                            return e(r, t, n)
                        }) : y(function(t) {
                            return e(r, n, t)
                        });
                    default:
                        return u(r) && u(n) && u(i) ? t : u(r) && u(n) ? M(function(t, r) {
                            return e(t, r, i)
                        }) : u(r) && u(i) ? M(function(t, r) {
                            return e(t, n, r)
                        }) : u(n) && u(i) ? M(function(t, n) {
                            return e(r, t, n)
                        }) : u(r) ? y(function(t) {
                            return e(t, n, i)
                        }) : u(n) ? y(function(t) {
                            return e(r, t, i)
                        }) : u(i) ? y(function(t) {
                            return e(r, n, t)
                        }) : e(r, n, i)
                    }
                }
            }
              , x = function e(r, n, i) {
                return function() {
                    for (var a = [], o = 0, s = r, l = 0; l < n.length || o < arguments.length; ) {
                        var c;
                        l < n.length && (!u(n[l]) || o >= arguments.length) ? c = n[l] : (c = arguments[o],
                        o += 1),
                        a[l] = c,
                        u(c) || (s -= 1),
                        l += 1
                    }
                    return s <= 0 ? i.apply(this, a) : t(s, e(r, a, i))
                }
            }
              , A = function(e, t, r) {
                return function() {
                    var n = arguments.length;
                    if (0 === n)
                        return r();
                    var i = arguments[n - 1];
                    if (!s(i)) {
                        var a = p(arguments, 0, n - 1);
                        if ("function" == typeof i[e])
                            return i[e].apply(i, a);
                        if (c(i)) {
                            var o = t.apply(null, a);
                            return o(i)
                        }
                    }
                    return r.apply(this, arguments)
                }
            }
              , b = function() {
                function e(e, t) {
                    this.xf = t,
                    this.f = e,
                    this.all = !0
                }
                return e.prototype["@@transducer/init"] = m.init,
                e.prototype["@@transducer/result"] = function(e) {
                    return this.all && (e = this.xf["@@transducer/step"](e, !0)),
                    this.xf["@@transducer/result"](e)
                }
                ,
                e.prototype["@@transducer/step"] = function(e, t) {
                    return this.f(t) || (this.all = !1,
                    e = d(this.xf["@@transducer/step"](e, !1))),
                    e
                }
                ,
                M(function(t, r) {
                    return new e(t,r)
                })
            }()
              , T = function() {
                function e(e, t) {
                    this.xf = t,
                    this.f = e
                }
                return e.prototype["@@transducer/init"] = m.init,
                e.prototype["@@transducer/result"] = m.result,
                e.prototype["@@transducer/step"] = function(e, t) {
                    return this.f(t) ? this.xf["@@transducer/step"](e, t) : e
                }
                ,
                M(function(t, r) {
                    return new e(t,r)
                })
            }()
              , _ = function() {
                function e(e, t) {
                    this.xf = t,
                    this.f = e,
                    this.found = !1
                }
                return e.prototype["@@transducer/init"] = m.init,
                e.prototype["@@transducer/result"] = function(e) {
                    return this.found || (e = this.xf["@@transducer/step"](e, void 0)),
                    this.xf["@@transducer/result"](e)
                }
                ,
                e.prototype["@@transducer/step"] = function(e, t) {
                    return this.f(t) && (this.found = !0,
                    e = d(this.xf["@@transducer/step"](e, t))),
                    e
                }
                ,
                M(function(t, r) {
                    return new e(t,r)
                })
            }()
              , E = function() {
                function e(e, t) {
                    this.xf = t,
                    this.f = e,
                    this.idx = -1,
                    this.found = !1
                }
                return e.prototype["@@transducer/init"] = m.init,
                e.prototype["@@transducer/result"] = function(e) {
                    return this.found || (e = this.xf["@@transducer/step"](e, -1)),
                    this.xf["@@transducer/result"](e)
                }
                ,
                e.prototype["@@transducer/step"] = function(e, t) {
                    return this.idx += 1,
                    this.f(t) && (this.found = !0,
                    e = d(this.xf["@@transducer/step"](e, this.idx))),
                    e
                }
                ,
                M(function(t, r) {
                    return new e(t,r)
                })
            }()
              , S = function() {
                function e(e, t) {
                    this.xf = t,
                    this.f = e
                }
                return e.prototype["@@transducer/init"] = m.init,
                e.prototype["@@transducer/result"] = m.result,
                e.prototype["@@transducer/step"] = function(e, t) {
                    return this.xf["@@transducer/step"](e, this.f(t))
                }
                ,
                M(function(t, r) {
                    return new e(t,r)
                })
            }()
              , D = M(A("all", b, function(e, t) {
                for (var r = 0; r < t.length; ) {
                    if (!e(t[r]))
                        return !1;
                    r += 1
                }
                return !0
            }))
              , N = M(function(e, r) {
                return t(e.length, function() {
                    return e.apply(r, arguments)
                })
            })
              , I = M(function(e, r) {
                return 1 === e ? y(r) : t(e, x(e, [], r))
            })
              , L = M(A("filter", T, i))
              , C = M(A("find", _, function(e, t) {
                for (var r = 0, n = t.length; r < n; ) {
                    if (e(t[r]))
                        return t[r];
                    r += 1
                }
            }))
              , O = M(A("findIndex", E, function(e, t) {
                for (var r = 0, n = t.length; r < n; ) {
                    if (e(t[r]))
                        return r;
                    r += 1
                }
                return -1
            }))
              , j = M(v("forEach", function(e, t) {
                for (var r = t.length, n = 0; n < r; )
                    e(t[n]),
                    n += 1;
                return t
            }))
              , R = M(function(e, t) {
                return e === t ? 0 !== e || 1 / e === 1 / t : e !== e && t !== t
            })
              , P = M(function(e, t) {
                return null != t && t.constructor === e || t instanceof e
            })
              , z = y(function(e) {
                return !!s(e) || !!e && "object" == typeof e && !(e instanceof String) && (1 === e.nodeType ? !!e.length : 0 === e.length || e.length > 0 && e.hasOwnProperty(0) && e.hasOwnProperty(e.length - 1))
            })
              , B = function() {
                var e = !{
                    toString: null
                }.propertyIsEnumerable("toString")
                  , t = ["constructor", "valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"]
                  , r = function(e, t) {
                    for (var r = 0; r < e.length; ) {
                        if (e[r] === t)
                            return !0;
                        r += 1
                    }
                    return !1
                };
                return y("function" == typeof Object.keys ? function(e) {
                    return Object(e) !== e ? [] : Object.keys(e)
                }
                : function(n) {
                    if (Object(n) !== n)
                        return [];
                    var i, a, s = [];
                    for (i in n)
                        o(i, n) && (s[s.length] = i);
                    if (e)
                        for (a = t.length - 1; a >= 0; )
                            i = t[a],
                            o(i, n) && !r(s, i) && (s[s.length] = i),
                            a -= 1;
                    return s
                }
                )
            }()
              , U = M(function(e, t) {
                for (var r = {}, n = 0; n < e.length; )
                    e[n]in t && (r[e[n]] = t[e[n]]),
                    n += 1;
                return r
            })
              , V = M(function(e, t) {
                var r = {};
                for (var n in t)
                    e(t[n], n, t) && (r[n] = t[n]);
                return r
            })
              , k = M(function(e, t) {
                return t[e]
            })
              , F = M(function(e, t) {
                for (var r = e.length, n = [], i = 0; i < r; )
                    n[i] = t[e[i]],
                    i += 1;
                return n
            })
              , G = y(function(e) {
                return l(e) ? e.split("").reverse().join("") : p(e).reverse()
            })
              , Y = w(v("slice", function(e, t, r) {
                return Array.prototype.slice.call(r, e, t)
            }))
              , Q = v("tail", Y(1, 1 / 0))
              , H = y(function(e) {
                return null === e ? "Null" : void 0 === e ? "Undefined" : Object.prototype.toString.call(e).slice(8, -1)
            })
              , W = y(function(e) {
                for (var t = B(e), r = t.length, n = [], i = 0; i < r; )
                    n[i] = e[t[i]],
                    i += 1;
                return n
            })
              , X = function e(t, n, i, a) {
                if (R(t, n))
                    return !0;
                if (H(t) !== H(n))
                    return !1;
                if (null == t || null == n)
                    return !1;
                if ("function" == typeof t.equals || "function" == typeof n.equals)
                    return "function" == typeof t.equals && t.equals(n) && "function" == typeof n.equals && n.equals(t);
                switch (H(t)) {
                case "Arguments":
                case "Array":
                case "Object":
                    break;
                case "Boolean":
                case "Number":
                case "String":
                    if (typeof t != typeof n || !R(t.valueOf(), n.valueOf()))
                        return !1;
                    break;
                case "Date":
                    if (!R(t.valueOf(), n.valueOf()))
                        return !1;
                    break;
                case "Error":
                    if (t.name !== n.name || t.message !== n.message)
                        return !1;
                    break;
                case "RegExp":
                    if (t.source !== n.source || t.global !== n.global || t.ignoreCase !== n.ignoreCase || t.multiline !== n.multiline || t.sticky !== n.sticky || t.unicode !== n.unicode)
                        return !1;
                    break;
                case "Map":
                case "Set":
                    if (!e(r(t.entries()), r(n.entries()), i, a))
                        return !1;
                    break;
                case "Int8Array":
                case "Uint8Array":
                case "Uint8ClampedArray":
                case "Int16Array":
                case "Uint16Array":
                case "Int32Array":
                case "Uint32Array":
                case "Float32Array":
                case "Float64Array":
                    break;
                case "ArrayBuffer":
                    break;
                default:
                    return !1
                }
                var s = B(t);
                if (s.length !== B(n).length)
                    return !1;
                for (var u = i.length - 1; u >= 0; ) {
                    if (i[u] === t)
                        return a[u] === n;
                    u -= 1
                }
                for (i.push(t),
                a.push(n),
                u = s.length - 1; u >= 0; ) {
                    var l = s[u];
                    if (!o(l, n) || !e(n[l], t[l], i, a))
                        return !1;
                    u -= 1
                }
                return i.pop(),
                a.pop(),
                !0
            }
              , q = function(e) {
                return function t(r) {
                    for (var n, i, a, o = [], s = 0, u = r.length; s < u; ) {
                        if (z(r[s]))
                            for (n = e ? t(r[s]) : r[s],
                            i = 0,
                            a = n.length; i < a; )
                                o[o.length] = n[i],
                                i += 1;
                        else
                            o[o.length] = r[s];
                        s += 1
                    }
                    return o
                }
            }
              , Z = function() {
                function e(e, t, r) {
                    for (var n = 0, i = r.length; n < i; ) {
                        if (t = e["@@transducer/step"](t, r[n]),
                        t && t["@@transducer/reduced"]) {
                            t = t["@@transducer/value"];
                            break
                        }
                        n += 1
                    }
                    return e["@@transducer/result"](t)
                }
                function t(e, t, r) {
                    for (var n = r.next(); !n.done; ) {
                        if (t = e["@@transducer/step"](t, n.value),
                        t && t["@@transducer/reduced"]) {
                            t = t["@@transducer/value"];
                            break
                        }
                        n = r.next()
                    }
                    return e["@@transducer/result"](t)
                }
                function r(e, t, r) {
                    return e["@@transducer/result"](r.reduce(N(e["@@transducer/step"], e), t))
                }
                var n = "undefined" != typeof Symbol ? Symbol.iterator : "@@iterator";
                return function(i, a, o) {
                    if ("function" == typeof i && (i = g(i)),
                    z(o))
                        return e(i, a, o);
                    if ("function" == typeof o.reduce)
                        return r(i, a, o);
                    if (null != o[n])
                        return t(i, a, o[n]());
                    if ("function" == typeof o.next)
                        return t(i, a, o);
                    throw new TypeError("reduce: list must be array or iterable")
                }
            }()
              , J = y(function(e) {
                return I(e.length, function() {
                    var t = 0
                      , r = arguments[0]
                      , i = arguments[arguments.length - 1]
                      , a = p(arguments);
                    return a[0] = function() {
                        var e = r.apply(this, n(arguments, [t, i]));
                        return t += 1,
                        e
                    }
                    ,
                    e.apply(this, a)
                })
            })
              , K = y(function(e) {
                return I(e.length, e)
            })
              , $ = M(function(e, t) {
                return X(e, t, [], [])
            })
              , ee = y(q(!0))
              , te = M(A("map", S, function(e, t) {
                switch (Object.prototype.toString.call(t)) {
                case "[object Function]":
                    return I(t.length, function() {
                        return e.call(this, t.apply(this, arguments))
                    });
                case "[object Object]":
                    return Z(function(r, n) {
                        return r[n] = e(t[n]),
                        r
                    }, {}, B(t));
                default:
                    return h(e, t)
                }
            }))
              , re = M(function(e, t) {
                return Z(function(r, n) {
                    return r[n] = e(t[n], n, t),
                    r
                }, {}, B(t))
            })
              , ne = w(Z)
              , ie = function() {
                var e = function(e) {
                    return {
                        "@@transducer/init": m.init,
                        "@@transducer/result": function(t) {
                            return e["@@transducer/result"](t)
                        },
                        "@@transducer/step": function(t, r) {
                            var n = e["@@transducer/step"](t, r);
                            return n["@@transducer/reduced"] ? a(n) : n
                        }
                    }
                };
                return function(t) {
                    var r = e(t);
                    return {
                        "@@transducer/init": m.init,
                        "@@transducer/result": function(e) {
                            return r["@@transducer/result"](e)
                        },
                        "@@transducer/step": function(e, t) {
                            return z(t) ? Z(r, e, t) : Z(r, e, [t])
                        }
                    }
                }
            }()
              , ae = function(e, t, r) {
                for (var n = r; n < e.length; ) {
                    if ($(e[n], t))
                        return n;
                    n += 1
                }
                return -1
            }
              , oe = M(function(e, t) {
                return te(e, ie(t))
            })
              , se = M(A("chain", oe, function(e, t) {
                return "function" == typeof t ? function() {
                    return t.call(this, e.apply(this, arguments)).apply(this, arguments)
                }
                : q(!1)(te(e, t))
            }))
              , ue = function() {
                if (0 === arguments.length)
                    throw new Error("pipe requires at least one argument");
                return t(arguments[0].length, ne(f, arguments[0], Q(arguments)))
            }
              , le = "undefined" == typeof Set ? function(e, t) {
                return ae(t, e, 0) >= 0
            }
            : function(e, t) {
                var r, n, i;
                switch (typeof e) {
                case "number":
                    if (0 === e) {
                        for (r = 0,
                        n = 1 / e; r < t.length; ) {
                            if (i = t[r],
                            0 === i && 1 / i === n)
                                return !0;
                            r += 1
                        }
                        return !1
                    }
                    return new Set(t).has(e);
                case "string":
                case "boolean":
                case "function":
                case "undefined":
                    return new Set(t).has(e);
                case "object":
                    return null === e ? new Set(t).has(e) : ae(t, e, 0) >= 0;
                default:
                    return ae(t, e, 0) >= 0
                }
            }
              , ce = function() {
                if (0 === arguments.length)
                    throw new Error("compose requires at least one argument");
                return ue.apply(this, G(arguments))
            }
              , he = M(le)
              , fe = M(function(e, t) {
                var r = {};
                for (var n in t)
                    le(n, e) || (r[n] = t[n]);
                return r
            })
              , de = {
                addIndex: J,
                all: D,
                chain: se,
                compose: ce,
                contains: he,
                curry: K,
                curryN: I,
                filter: L,
                find: C,
                findIndex: O,
                flatten: ee,
                forEach: j,
                is: P,
                map: te,
                mapObjIndexed: re,
                omit: fe,
                pick: U,
                pickBy: V,
                prop: k,
                props: F,
                reduce: ne,
                values: W
            };
            e.exports = de
        }
        ).call(this)
    }
    , /*!******************************!*\
  !*** ./src/modules/scene.js ***!
  \******************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t, r) {
            var n = (0,
            k.buildQueryObject)(t)
              , i = e.get("sceneGraph");
            if (n.id) {
                var o = i.nodes[n.id];
                return o && n.parent ? o.parent || null : o && n.child ? (0,
                k.findChild)(e, o, {
                    type: n.child,
                    shallow: !0
                }, !1, !0) || null : o ? (0,
                k.getMatch)(o, n, r) : null
            }
            if (n.from && n.from.all) {
                var s = void 0
                  , u = !0
                  , l = !1
                  , c = void 0;
                try {
                    for (var h, f = (0,
                    R.default)((0,
                    O.default)(i.nodes)); !(u = (h = f.next()).done); u = !0) {
                        var d = h.value;
                        if (s = (0,
                        k.getMatch)(i.nodes[d], n))
                            return s
                    }
                } catch (e) {
                    l = !0,
                    c = e
                } finally {
                    try {
                        !u && f.return && f.return()
                    } finally {
                        if (l)
                            throw c
                    }
                }
                return null
            }
            var p = n.from ? a(e, n.from, !0) : e.getIn(["sceneIO", "id"])
              , m = p && i.nodes[p];
            return m ? (0,
            k.findChild)(e, m, n, n.includeParent && m, r) : null
        }
        function o(e, t) {
            var r = (0,
            k.buildQueryObject)(t)
              , n = r.from ? a(e, r.from) : e.getIn(["sceneIO", "id"]);
            if (r.from && !n)
                return [];
            var i = e.get("sceneGraph").nodes[n];
            if (!i)
                throw new Error("Unknown node to filter from");
            return (0,
            k.matchChildren)(e, i, r, r.includeParent && i)
        }
        function s(e, t) {
            var r = Array.isArray(t) ? t : a(e, t);
            if (r && Array.isArray(r)) {
                if (r.length >= 2 && "eval" === r[1]) {
                    var n = (0,
                    U.getEvalSceneGraph)(e).evaluatedNodes[r[0]]
                      , i = n && n[r[2]];
                    return i && r[3] ? i[r[3]] : i
                }
                return (0,
                U.get)(e, r)
            }
        }
        function u(e, t) {
            var r = Array.isArray(t) ? t : o(e, t);
            return r ? (0,
            B.reduce)(function(t, r) {
                return t[r[0]] = (0,
                U.get)(e, r),
                t
            }, {}, r) : void 0
        }
        function l(e, t, r, n) {
            return s(e, n ? [t, r, n] : [t, r])
        }
        function c(e, t) {
            var r = s(e, {
                id: t,
                evalPlug: "Transform"
            });
            if (!r)
                return null;
            var n = r.transform
              , i = e.get("sceneGraph").nodes[t]
              , a = i && i.parent
              , o = a && c(e, a);
            return o ? (new z.Matrix4).copy(o).multiply(n) : (new z.Matrix4).copy(n)
        }
        function h(e, t, r) {
            var n = s(e, {
                id: t,
                evalPlug: "Transform"
            });
            if (!n || t === r)
                return null;
            var i = n.transform
              , a = e.get("sceneGraph").nodes[t]
              , o = a && a.parent
              , u = o && h(e, o, r);
            return u ? (new z.Matrix4).copy(u).multiply(i) : (new z.Matrix4).copy(i)
        }
        function f(e) {
            var t = e.translation
              , r = e.rotation
              , n = e.scale
              , i = e.rotateOrder
              , a = e.preRotation
              , o = e.rotatePivotOffset
              , s = e.localRotatePivot
              , u = e.scalePivotOffset
              , l = e.localScalePivot
              , c = e.shear;
            0 === n.x && (n.x = 1e-7),
            0 === n.y && (n.y = 1e-7),
            0 === n.z && (n.z = 1e-7);
            var h = new z.Vector3(0,0,0)
              , f = []
              , d = (new z.Matrix4).makeTranslation(t.x, t.y, t.z);
            f.push(d);
            var p = new z.Matrix4;
            o.equals(h) || (p.makeTranslation(o.x, o.y, o.z),
            f.push(p));
            var m = new z.Matrix4
              , g = new z.Matrix4
              , v = !1;
            s.equals(h) || (m.makeTranslation(s.x, s.y, s.z),
            f.push(m),
            g.getInverse(m, !0),
            v = !0);
            var y = new z.Matrix4;
            if (!a.equals(h)) {
                var M = (new z.Vector3).copy(a).multiplyScalar(Math.PI / 180);
                y.makeRotationFromEuler(new z.Euler(M.x,M.y,M.z,i)),
                f.push(y)
            }
            var w = (new z.Vector3).copy(r).multiplyScalar(Math.PI / 180)
              , x = (new z.Matrix4).makeRotationFromEuler(new z.Euler(w.x,w.y,w.z,i));
            f.push(x),
            v && f.push(g);
            var A = new z.Matrix4;
            u.equals(h) || (A.makeTranslation(u.x, u.y, u.z),
            f.push(A));
            var b = new z.Matrix4
              , T = new z.Matrix4
              , _ = !1;
            l.equals(h) || (b.makeTranslation(l.x, l.y, l.z),
            f.push(b),
            T.getInverse(b, !0),
            _ = !0);
            var E = c.x
              , S = c.y
              , D = c.z
              , N = (new z.Matrix4).set(1, E, S, 0, 0, 1, D, 0, 0, 0, 1, 0, 0, 0, 0, 1);
            f.push(N);
            var I = (new z.Matrix4).makeScale(n.x, n.y, n.z);
            f.push(I),
            _ && f.push(T);
            for (var L = new z.Matrix4, C = 0; C < f.length; C++)
                L.multiply(f[C]);
            return L
        }
        function d(e, t) {
            return function(r) {
                var n = Array.isArray(e) ? e : a(r, e);
                if (!n)
                    return console.warn("No matching query", e),
                    L.default.resolve();
                if (3 === n.length) {
                    if ("object" !== ("undefined" == typeof t ? "undefined" : (0,
                    N.default)(t)))
                        throw new Error("If no property is set, expect an object to merge into the operator");
                    return r.dispatch((0,
                    U.merge)(n, t))
                }
                if (4 === n.length)
                    return r.dispatch((0,
                    U.set)(n, t));
                if (2 === n.length) {
                    if ("name" !== n[1])
                        throw new Error("Can only set node name");
                    return r.dispatch((0,
                    U.set)(n, t))
                }
            }
        }
        function p(e, t) {
            return function(r) {
                var n = Array.isArray(e) ? e : o(r, e);
                return L.default.all((0,
                B.map)(function(e) {
                    return r.dispatch(d(e, t))
                }, n))
            }
        }
        function m(e) {
            for (var t = e.get("sceneGraph"), r = (0,
            O.default)(t.nodes), n = void 0, i = [], a = 0; a < r.length; a++)
                n = t.nodes[r[a]],
                n && n.warnings && n.warnings.length && i.push(n);
            return i
        }
        function g(e) {
            return function(t) {
                e.type = "Camera";
                var r = a(t, e);
                t.dispatch((0,
                U.setVRCamera)(r))
            }
        }
        function v(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return void 0 === t.cloneDependencies && (t.cloneDependencies = !0),
            function(r) {
                var n, i = Array.isArray(e) ? e : o(r, e);
                if (!i.length)
                    return console.warn("No match for clone: ", e),
                    L.default.resolve(!0);
                var s = (0,
                U.findRoot)(r, i[0])
                  , u = t.to || r.getIn(["sceneIO", "id"])
                  , l = a(r, {
                    id: s,
                    child: "Objects"
                })
                  , c = a(r, {
                    id: u,
                    child: "Objects"
                })
                  , h = (n = {},
                (0,
                S.default)(n, l, c),
                (0,
                S.default)(n, a(r, {
                    id: s,
                    child: "MaterialLibrary"
                }), a(r, {
                    id: u,
                    child: "MaterialLibrary"
                })),
                n)
                  , f = t.withNull ? r.dispatch((0,
                U.addNode)({
                    name: t.withNull,
                    parent: c,
                    type: "Null",
                    plugs: {
                        Null: [["Null", {}]],
                        Transform: [["Transform", {}]],
                        Properties: [["Default", {}]]
                    }
                })) : L.default.resolve(null);
                return f.then(function(e) {
                    return e && (h[l] = e),
                    r.dispatch((0,
                    U.clone)(i, h, {
                        cloneDependencies: t.cloneDependencies
                    })).then(function(r) {
                        return e && (r[t.withNull] = e),
                        r
                    })
                })
            }
        }
        function y() {
            return function(e) {
                function t(e) {
                    var t = r.nodes[e] && r.nodes[e].plugs
                      , i = !0
                      , a = !1
                      , o = void 0;
                    try {
                        for (var s, u = function() {
                            var e = s.value;
                            t[e].forEach(function(t, r) {
                                var i = (0,
                                F.lookupOperator)(e, t.type, [])
                                  , a = !0
                                  , o = !1
                                  , s = void 0;
                                try {
                                    for (var u, l = (0,
                                    R.default)(i.fileReferenceKeys); !(a = (u = l.next()).done); a = !0) {
                                        var c = u.value;
                                        t[c] && (n[t[c]] = !0)
                                    }
                                } catch (e) {
                                    o = !0,
                                    s = e
                                } finally {
                                    try {
                                        !a && l.return && l.return()
                                    } finally {
                                        if (o)
                                            throw s
                                    }
                                }
                            })
                        }, l = (0,
                        R.default)((0,
                        O.default)(t || {})); !(i = (s = l.next()).done); i = !0)
                            u()
                    } catch (e) {
                        a = !0,
                        o = e
                    } finally {
                        try {
                            !i && l.return && l.return()
                        } finally {
                            if (a)
                                throw o
                        }
                    }
                }
                var r = e.get("sceneGraph")
                  , n = {}
                  , i = o(e, {
                    includeParent: !0
                });
                return i.forEach(t),
                L.default.all((0,
                V.filter)(e).map(function(t) {
                    return !n[t.get("id")] && e.dispatch((0,
                    V.removeFile)(t.get("id")))
                }))
            }
        }
        function M(e, t) {
            var r = e.getTranslator();
            return r ? r.getNodeBoundingBox(t) : new z.Box3
        }
        function w() {
            return G.default
        }
        function x(e, t) {
            var r = e.getTranslator();
            return r ? r.toScreenPosition(t) : {
                x: 0,
                y: 0
            }
        }
        function A(e, t) {
            if (t)
                return s(e, {
                    name: t,
                    evalPlug: "Pass"
                });
            var r = s(e, {
                name: "Passes",
                plug: "GeneralRenderer",
                property: "curPass"
            })
              , n = s(e, {
                id: r,
                evalPlug: "Pass"
            });
            return n || s(e, {
                type: "Pass",
                evalPlug: "Pass"
            })
        }
        function b(e, t) {
            var r = t || e.getIn(["sceneIO", "id"])
              , n = o(e, {
                from: {
                    id: r
                },
                includeParent: !0
            });
            return {
                sceneGraph: (0,
                U.exportJSON)(e, n),
                assets: (0,
                V.exportJSON)(e)
            }
        }
        function T(e) {
            var t = e.name
              , r = e.type
              , n = e.parent
              , i = e.plugs;
            if (!n)
                throw new Error("addNode requires parent to be set");
            if (!r)
                throw new Error("addNode requires type to be set");
            if (!t)
                throw new Error("addNode requires name to be set");
            if (!Y[r])
                throw new Error("invalid type: " + r + " for addNode");
            var a = i || {}
              , o = !0
              , s = !1
              , u = void 0;
            try {
                for (var l, c = (0,
                R.default)((0,
                O.default)(Y[r])); !(o = (l = c.next()).done); o = !0) {
                    var h = l.value;
                    if (a[h] || (a[h] = [[Y[r][h], {}]]),
                    !a[h][0][0])
                        throw new Error("Required operator for " + h)
                }
            } catch (e) {
                s = !0,
                u = e
            } finally {
                try {
                    !o && c.return && c.return()
                } finally {
                    if (s)
                        throw u
                }
            }
            return (0,
            U.addNode)({
                name: t,
                type: r,
                plugs: a,
                parent: n
            })
        }
        function _(e, t, r) {
            var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}
              , i = arguments[4];
            if (!e)
                throw new Error("addOperator requires the id for the element receiving the operator");
            if (!t)
                throw new Error("addOperator requires the plug to be set");
            if (!r)
                throw new Error("addOperator requires the operator type to be set");
            var a = G.default[t];
            if (!a)
                throw new Error("Unknown plug: " + t);
            var o = a[r];
            if (!o)
                throw new Error("Unknown operator: " + r);
            return (0,
            U.addOperator)(e, t, [r, n, i])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var E = r(/*! babel-runtime/helpers/defineProperty */
        21)
          , S = i(E)
          , D = r(/*! babel-runtime/helpers/typeof */
        17)
          , N = i(D)
          , I = r(/*! babel-runtime/core-js/promise */
        30)
          , L = i(I)
          , C = r(/*! babel-runtime/core-js/object/keys */
        8)
          , O = i(C)
          , j = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , R = i(j);
        t.find = a,
        t.filter = o,
        t.get = s,
        t.getAll = u,
        t.getEval = l,
        t.getWorldTransform = c,
        t.getRelativeTransform = h,
        t.getLocalTransform = f,
        t.set = d,
        t.setAll = p,
        t.getWarnings = m,
        t.setVRCamera = g,
        t.clone = v,
        t.pruneAssets = y,
        t.getNodeBoundingBox = M,
        t.getAvailableOperators = w,
        t.getScreenPosition = x,
        t.getCurrentPass = A,
        t.exportJSON = b,
        t.addNode = T,
        t.addOperator = _;
        var P = r(/*! three */
        1)
          , z = n(P)
          , B = r(/*! ramda */
        3)
          , U = r(/*! ./sceneGraph */
        9)
          , V = r(/*! ./assets */
        26)
          , k = r(/*! ./utils/selectors */
        77)
          , F = r(/*! ../operators/nonImmutable */
        75)
          , G = i(F)
          , Y = {
            BinMesh: {
                BinMesh: "ProxyMesh",
                Transform: "Transform",
                Material: "Reference",
                Properties: "BinMeshProperties"
            },
            PolyMesh: {
                PolyMesh: "Box",
                Transform: "Transform",
                Material: "Reference",
                Properties: "PolyMeshProperties"
            },
            Light: {
                Light: "PointLight",
                Transform: "Transform",
                Properties: "Default"
            },
            Camera: {
                Camera: "Camera",
                Transform: "Transform",
                Properties: "Default"
            },
            Null: {
                Null: "Null",
                Transform: "Transform",
                Properties: "Default"
            },
            Model: {
                Null: "Null",
                Transform: "Transform",
                Mixer: "Mixer",
                Properties: "ModelProperties"
            },
            Material: {
                Material: "Physical",
                Properties: "MaterialProperties"
            },
            Image: {
                Image: "Image",
                Properties: "ImageProperties"
            },
            Pass: {
                Pass: "Pass"
            },
            Renderer: {
                Renderer: "WebGLRenderer"
            },
            Bone: {
                Bone: "Bone",
                Transform: "BoneTransform",
                Properties: "Default"
            },
            Annotation: {
                Annotation: "Annotation",
                Transform: "Transform",
                Properties: "Default"
            }
        }
          , Q = {
            actions: {
                set: d,
                setAll: p,
                clone: v,
                pruneAssets: y,
                setVRCamera: g,
                addOperator: _,
                addNode: T
            },
            selectors: {
                get: s,
                getAll: u,
                getWorldTransform: c,
                find: a,
                filter: o,
                getWarnings: m,
                exportJSON: b,
                getNodeBoundingBox: M,
                getCurrentPass: A,
                getAvailableOperators: w,
                getScreenPosition: x
            }
        };
        t.default = Q
    }
    , /*!*******************************!*\
  !*** ./src/modules/player.js ***!
  \*******************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e) {
            return {
                type: ke,
                payload: e
            }
        }
        function o(e) {
            return e.getIn(["player", "activeManipulator"])
        }
        function s(e, t) {
            return (0,
            Be.addCommand)({
                tool: e,
                enabled: !0
            }, t)
        }
        function u(e) {
            return (0,
            Be.removeCommand)(e)
        }
        function l(e) {
            return (0,
            Be.updateCommand)(e, {
                display: {
                    playerTools: !0
                }
            })
        }
        function c(e) {
            return (0,
            Be.updateCommand)(e, {
                display: {
                    playerTools: !1
                }
            })
        }
        function h(e, t) {
            return {
                type: UPDATE_COMMAND_OPTIONS,
                payload: {
                    name: e,
                    options: t
                }
            }
        }
        function f(e) {
            return e.getIn(["player", "rect"])
        }
        function d(e) {
            return {
                type: Qe,
                payload: e
            }
        }
        function p(e) {
            return {
                type: Ge,
                payload: e
            }
        }
        function m(e) {
            return e.getIn(["player", "camera"])
        }
        function g(e) {
            return (0,
            Te.getWorldTransform)(e, e.getIn(["player", "activeCamera"]))
        }
        function v(e) {
            return function(t) {
                return t.dispatch((0,
                Te.set)({
                    scene: !0,
                    plug: "Player",
                    property: "camera"
                }, e))
            }
        }
        function y(e) {
            return function(t) {
                if (e) {
                    var r = t.getIn(["player", "activeCamera"]);
                    t.dispatch(M(Ee.vrCameraId, r))
                } else {
                    var n = t.getIn(["player", "prevCamera"]) || Ee.virtualCameraId;
                    t.dispatch(M(n, null))
                }
            }
        }
        function M(e, t) {
            return function(r) {
                var n = (0,
                ze.default)(r, t)
                  , i = (0,
                Te.get)(r, {
                    id: t,
                    evalPlug: "Camera"
                })
                  , a = (0,
                Te.get)(r, {
                    id: t,
                    evalPlug: "Transform"
                });
                a && !a.target && (i.targetWorldMatrix = n);
                var o = (0,
                Te.get)(r, {
                    id: e,
                    evalPlug: "Camera"
                });
                o.targetWorldMatrix && (r.dispatch((0,
                Ee.merge)([Ee.virtualTargetId, "Transform", 0], (0,
                Re.default)(o.targetWorldMatrix))),
                o.targetWorldMatrix = null),
                r.dispatch({
                    type: Fe,
                    payload: {
                        id: e,
                        prevCameraId: t
                    }
                })
            }
        }
        function w(e, t) {
            return {
                type: at,
                payload: {
                    scene: e,
                    camera: t
                }
            }
        }
        function x(e) {
            return e.getIn(["player", "threeScene"])
        }
        function A(e) {
            return e.getIn(["player", "threeCamera"])
        }
        function b(e) {
            var t = x(e);
            return (0,
            Ie.default)(t)
        }
        function T(e) {
            return e.getIn(["player", "activeCamera"])
        }
        function _(e) {
            return e.getIn(["player", "tools"])
        }
        function E(e) {
            return {
                type: Ye,
                payload: e
            }
        }
        function S(e) {
            return {
                initialCameraWorldMatrix: e.getIn(["player", "initialCameraWorldMatrix"]),
                initialTargetWorldMatrix: e.getIn(["player", "initialTargetWorldMatrix"])
            }
        }
        function D() {
            return function(e) {
                var t = e.getIn(["player", "playerElement"]);
                ["requestFullscreen", "webkitRequestFullscreen", "mozRequestFullScreen", "msRequestFullscreen"].forEach(function(e) {
                    if (t[e])
                        return t[e]()
                }),
                e.dispatch({
                    type: Ze
                })
            }
        }
        function N() {
            return function(e) {
                return ["exitFullscreen", "webkitExitFullscreen", "mozCancelFullScreen", "msExitFullscreen"].forEach(function(e) {
                    if (document[e])
                        return document[e]()
                }),
                e.dispatch({
                    type: Je
                })
            }
        }
        function I() {
            return function(e) {
                return e.dispatch(L(e) ? N() : D())
            }
        }
        function L(e) {
            return e.getIn(["player", "fullScreen"])
        }
        function C(e) {
            return function(t) {
                L(t) !== e && t.dispatch({
                    type: Ke,
                    payload: e
                }),
                !e && R(t) && t.dispatch((0,
                Be.deactivateCommand)("vrMode"))
            }
        }
        function O(e) {
            return e.getIn(["player", "renderingMode"])
        }
        function j(e) {
            return e.getIn(["player", "renderingMode"]) === Ue.normal
        }
        function R(e) {
            return e.getIn(["player", "renderingMode"]) === Ue.vr
        }
        function P(e) {
            return e.getIn(["player", "renderingMode"]) === Ue.lenticular
        }
        function z(e) {
            return function(t) {
                var r = t.getIn(["player", "tools", e]);
                if (r) {
                    if (r.get("action"))
                        return r.get("action")(t);
                    var n = B(t, r);
                    return r.get("activate") && !n ? r.get("activate")(t) : r.get("deactivate") && n ? r.get("deactivate")(t) : t.dispatch(a(e))
                }
            }
        }
        function B(e, t) {
            return t.get("isActive") ? t.get("isActive")(e) : e.getIn(["player", "activeManipulator"]) === t.get("name")
        }
        function U(e, t) {
            var r = e.getIn(["player", "tools", t]);
            return r && B(e, r)
        }
        function V(e) {
            return e.getIn(["player", "tools"]).filter(function(t) {
                return B(e, t)
            })
        }
        function k(e) {
            var t = e.fullscreen
              , r = e.trackDevice;
            return function(e) {
                t && e.dispatch(D());
                var n = T(e);
                e.dispatch({
                    type: tt,
                    payload: {
                        trackDevice: r,
                        cameraId: n
                    }
                })
            }
        }
        function F() {
            return {
                type: et
            }
        }
        function G(e) {
            return e.getIn(["player", "prevCamera"])
        }
        function Y(e) {
            if (!Ue[e])
                throw new Error("Invalid Render Mode: " + e);
            return {
                type: $e,
                payload: e
            }
        }
        function Q() {
            return function(e) {
                e.dispatch(P(e) ? F() : k({}))
            }
        }
        function H() {
            return {
                type: rt,
                payload: !0
            }
        }
        function W() {
            return {
                type: rt,
                payload: !1
            }
        }
        function X() {
            return function(e) {
                console.log("toggle device tracking", !q(e)),
                e.dispatch(q(e) ? W() : H())
            }
        }
        function q(e) {
            return e.getIn(["player", "deviceTracking"])
        }
        function Z(e, t) {
            return {
                type: qe,
                payload: {
                    playerEl: e,
                    canvasEl: t
                }
            }
        }
        function J(e) {
            return {
                type: We,
                payload: e
            }
        }
        function K(e) {
            return {
                type: Xe,
                payload: e
            }
        }
        function $(e) {
            return {
                type: nt,
                payload: e
            }
        }
        function ee(e) {
            return e.getIn(["player", "activeColor"])
        }
        function te(e) {
            return e.getIn(["player", "hoverColor"])
        }
        function re(e) {
            return e.getIn(["player", "fullscreenBackgroundColor"])
        }
        function ne(e, t) {
            var r = new we.Vector3
              , n = new we.Quaternion
              , i = new we.Vector3(1,1,1);
            e.decompose(r, n, i);
            var a = new we.Vector3
              , o = new we.Quaternion;
            t.decompose(a, o, i);
            var s = new we.Vector3
              , u = new we.Quaternion;
            i.set(1, 1, 1);
            var l = new we.Matrix4;
            return function(e, t, c, h) {
                return s.lerpVectors(r, a, e / h),
                we.Quaternion.slerp(n, o, u, e / h),
                l.compose(s, u, i),
                l
            }
        }
        function ie(e, t) {
            return function(r) {
                var n = T(r);
                if (n && e) {
                    var i = ge.default.resolve()
                      , a = (0,
                    Te.find)(r, {
                        id: n,
                        plug: "Transform",
                        property: "target"
                    })
                      , o = !1;
                    if (a && (0,
                    Te.get)(r, {
                        id: n,
                        plug: "Camera",
                        property: "targeted"
                    })) {
                        var s = (0,
                        Te.get)(r, a);
                        s && (i = r.dispatch((0,
                        Te.set)({
                            id: n,
                            plug: "Camera",
                            property: "targeted"
                        }, !1)),
                        o = !0)
                    }
                    return i.then(function() {
                        var i = (0,
                        Te.getWorldTransform)(r, n)
                          , a = (0,
                        Le.initCamera)(r, !1, e)
                          , s = t || 300;
                        return new ge.default(function(t, u) {
                            r.dispatch((0,
                            _e.queueAnimation)({
                                autoplay: !0,
                                name: "Move Camera",
                                iterations: 1,
                                tracks: [{
                                    path: {
                                        id: n,
                                        evalPlug: "Transform"
                                    },
                                    duration: s,
                                    value: a,
                                    startValue: i,
                                    tween: ne(i, a),
                                    set: function(e, t) {
                                        (0,
                                        Oe.default)(r, n, t)
                                    }
                                }],
                                onEnd: function() {
                                    t(r.dispatch(v(e)).then(function() {
                                        return o ? r.dispatch((0,
                                        Te.set)({
                                            id: n,
                                            plug: "Camera",
                                            property: "targeted"
                                        }, !0)) : null
                                    }))
                                }
                            }))
                        }
                        )
                    })
                }
            }
        }
        function ae() {
            return function(e) {
                var t = e.getTranslator();
                t && t.resize()
            }
        }
        function oe(e, t, r) {
            var n = e.getTranslator();
            if (!n || !n.raycastSelect)
                return null;
            var i = t.clientX / (t.rect.width / 2) - 1
              , a = -(t.clientY / (t.rect.height / 2) - 1)
              , o = n.raycastSelect({
                x: i,
                y: a
            }, r);
            return o.map(function(e) {
                return e.id
            })
        }
        function se(e, t) {
            var r = e.getTranslator();
            if (!r || !r.raycastSelect)
                return null;
            var n = r.raycastSelect({
                x: 0,
                y: 0
            }, t);
            return n.map(function(e) {
                return e.id
            })
        }
        function ue(e) {
            return function(t) {
                t.dispatch({
                    type: it,
                    payload: e
                });
                var r = T(t);
                if (r) {
                    var n = (0,
                    Te.get)(t, {
                        id: r,
                        evalPlug: "Camera"
                    });
                    n && (n.radiusConstraint && n.radiusConstraint.radius === e || (n.newRadiusConstraint = e)),
                    t.dispatch((0,
                    Ee.touch)(r))
                }
            }
        }
        function le(e) {
            return e.getIn(["player", "canvasElement"])
        }
        function ce(e) {
            return e.getIn(["player", "constrainCameraRadius"])
        }
        function he(e) {
            return {
                type: He,
                payload: e
            }
        }
        function fe(e) {
            return e.getIn(["player", "displayThumbnail"])
        }
        function de(e) {
            return function(t) {
                var r = t.getTranslator()
                  , n = e || [(0,
                Se.getSceneId)(t)]
                  , i = r.getNodeListBoundingBox(n);
                (0,
                Le.frameSphere)(t, i.getBoundingSphere())
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.manipulators = t.RENDER_MODES = void 0;
        var pe, me = r(/*! babel-runtime/core-js/promise */
        30), ge = i(me), ve = r(/*! babel-runtime/helpers/defineProperty */
        21), ye = i(ve);
        t.useManipulator = a,
        t.getActiveManipulator = o,
        t.addTool = s,
        t.removeTool = u,
        t.showTool = l,
        t.hideTool = c,
        t.updateToolOptions = h,
        t.getRect = f,
        t.setRect = d,
        t.setCameraAttrs = p,
        t.getCameraAttrs = m,
        t.getCameraWorldTransform = g,
        t.useCamera = v,
        t.useVrCamera = y,
        t.setCamera = M,
        t.setThreeScene = w,
        t.getThreeScene = x,
        t.getThreeCamera = A,
        t.getBoundingBox = b,
        t.getCamera = T,
        t.getTools = _,
        t.setCameraPosition = E,
        t.getInitialCameraPosition = S,
        t.requestFullscreen = D,
        t.exitFullscreen = N,
        t.toggleFullscreen = I,
        t.isFullscreen = L,
        t.setFullscreen = C,
        t.getRenderingMode = O,
        t.isNormalRenderingMode = j,
        t.isVRMode = R,
        t.isLenticularMode = P,
        t.activateTool = z,
        t.isToolActive = U,
        t.getActiveTools = V,
        t.requestLenticularMode = k,
        t.requestNormalMode = F,
        t.getPrevCamera = G,
        t.setRenderMode = Y,
        t.toggleLenticularMode = Q,
        t.enableDeviceTracking = H,
        t.disableDeviceTracking = W,
        t.toggleDeviceTracking = X,
        t.isDeviceTracking = q,
        t.setPlayerElement = Z,
        t.setActiveColor = J,
        t.setHoverColor = K,
        t.setFullscreenBGColor = $,
        t.getActiveColor = ee,
        t.getHoverColor = te,
        t.getFullscreenBGColor = re,
        t.animateCameraTo = ie,
        t.resize = ae,
        t.filterNodesFromPosition = oe,
        t.filterNodesFromCenter = se,
        t.setCameraRadiusConstraint = ue,
        t.getCanvasElement = le,
        t.getCameraRadiusConstraint = ce,
        t.displayThumbnail = he,
        t.shouldDisplayThumbnail = fe,
        t.frameScene = de;
        var Me = r(/*! three */
        1)
          , we = n(Me)
          , xe = r(/*! immutable */
        11)
          , Ae = r(/*! ./utils/createReducer */
        27)
          , be = i(Ae)
          , Te = r(/*! ./scene */
        4)
          , _e = r(/*! ./animation */
        37)
          , Ee = r(/*! ./sceneGraph */
        9)
          , Se = r(/*! ./sceneIO */
        19)
          , De = r(/*! ../translators/utils/updateCameraLookAtTarget */
        38)
          , Ne = (i(De),
        r(/*! ../translators/utils/calculateBoundingBox */
        142))
          , Ie = i(Ne)
          , Le = r(/*! ../translators/camera */
        63)
          , Ce = r(/*! ../translators/utils/setMatrixOnNode */
        65)
          , Oe = i(Ce)
          , je = r(/*! ../translators/utils/decompose */
        28)
          , Re = i(je)
          , Pe = r(/*! ../translators/utils/getTargetWorldMatrix */
        33)
          , ze = i(Pe)
          , Be = r(/*! ./commands */
        44)
          , Ue = t.RENDER_MODES = {
            normal: "normal",
            vr: "vr",
            lenticular: "lenticular"
        }
          , Ve = t.manipulators = {
            orbit: "orbit",
            pan: "pan",
            zoom: "zoom",
            nodeRotate: "nodeRotate",
            nodeMove: "nodeMove",
            nodeScale: "nodeScale"
        }
          , ke = "USE_MANIPULATOR"
          , Fe = "SET_CAMERA"
          , Ge = "SET_CAMERA_ATTRS"
          , Ye = "SET_CAMERA_POSITION"
          , Qe = "SET_RECT"
          , He = "DISPLAY_THUMBNAIL"
          , We = "SET_ACTIVE_COLOR"
          , Xe = "SET_HOVER_COLOR"
          , qe = "SET_PLAYER_ELEMENT"
          , Ze = "REQUEST_FULL_SCREEN"
          , Je = "EXIT_FULL_SCREEN"
          , Ke = "SET_FULL_SCREEN"
          , $e = "SET_RENDER_MODE"
          , et = "REQUEST_NORMAL_MODE"
          , tt = "REQUEST_LENTICULAR_MODE"
          , rt = "SET_DEVICE_TRACKING"
          , nt = "SET_BACKGROUND_COLOR"
          , it = "SET_CONSTRAIN_CAMERA_RADIUS"
          , at = "SET_THREE_SCENE"
          , ot = (0,
        xe.Map)({
            activeColor: "#ffc85f",
            hoverColor: "#C08618",
            fullscreenBackgroundColor: "#FFF",
            activeManipulator: Ve.orbit,
            fullScreen: !1,
            renderingMode: Ue.normal,
            deviceTracking: !1,
            camera: (0,
            xe.Map)({
                polarAngle: null,
                azimuthAngle: null,
                boundingRadius: null
            }),
            rect: (0,
            xe.Map)({
                width: 400,
                height: 300
            }),
            initialCameraWorldMatrix: null,
            initialTargetWorldMatrix: null,
            cameraWorldMatrix: null,
            displayThumbnail: !0,
            playerElement: null,
            canvasElement: null,
            activeCamera: Ee.virtualCameraId,
            vrCamera: Ee.vrCameraId,
            threeScene: null,
            prevCamera: null,
            orientationHandler: null,
            constrainCameraRadius: null
        })
          , st = (0,
        be.default)(ot, (pe = {},
        (0,
        ye.default)(pe, ke, function(e, t) {
            return e.set("activeManipulator", t)
        }),
        (0,
        ye.default)(pe, Fe, function(e, t) {
            var r = t.id
              , n = t.prevCameraId;
            return e.set("activeCamera", r).set("prevCamera", n)
        }),
        (0,
        ye.default)(pe, Ge, function(e, t) {
            return e.mergeIn(["camera"], t)
        }),
        (0,
        ye.default)(pe, Qe, function(e, t) {
            return e.set("rect", t)
        }),
        (0,
        ye.default)(pe, Ye, function(e, t) {
            return e.merge(t)
        }),
        (0,
        ye.default)(pe, qe, function(e, t) {
            var r = t.playerEl
              , n = t.canvasEl;
            return e.set("playerElement", r).set("canvasElement", n)
        }),
        (0,
        ye.default)(pe, He, function(e, t) {
            return e.set("displayThumbnail", !!t)
        }),
        (0,
        ye.default)(pe, We, function(e, t) {
            return e.set("activeColor", t)
        }),
        (0,
        ye.default)(pe, Xe, function(e, t) {
            return e.set("hoverColor", t)
        }),
        (0,
        ye.default)(pe, nt, function(e, t) {
            return e.set("fullscreenBackgroundColor", t)
        }),
        (0,
        ye.default)(pe, Ze, function(e) {
            return e.set("fullScreen", !0)
        }),
        (0,
        ye.default)(pe, Je, function(e) {
            return e.set("fullScreen", !1)
        }),
        (0,
        ye.default)(pe, Ke, function(e, t) {
            return e.set("fullScreen", t)
        }),
        (0,
        ye.default)(pe, $e, function(e, t) {
            return e.set("renderingMode", t)
        }),
        (0,
        ye.default)(pe, tt, function(e, t) {
            var r = t.trackDevice
              , n = t.cameraId;
            return e.merge({
                renderingMode: "lenticular",
                deviceTracking: r,
                prevCamera: n
            })
        }),
        (0,
        ye.default)(pe, et, function(e) {
            return e.merge({
                renderingMode: "normal",
                deviceTracking: !1
            })
        }),
        (0,
        ye.default)(pe, rt, function(e, t) {
            return e.set("deviceTracking", t)
        }),
        (0,
        ye.default)(pe, it, function(e, t) {
            return e.set("constrainCameraRadius", t)
        }),
        (0,
        ye.default)(pe, at, function(e, t) {
            var r = t.scene
              , n = t.camera;
            return e.set("threeScene", r).set("threeCamera", n)
        }),
        pe))
          , ut = {
            reducer: st,
            actions: {
                addTool: s,
                removeTool: u,
                showTool: l,
                hideTool: c,
                useManipulator: a,
                setCameraAttrs: p,
                useCamera: v,
                setCameraPosition: E,
                animateCameraTo: ie,
                resize: ae,
                displayThumbnail: he,
                setActiveColor: J,
                requestFullscreen: D,
                exitFullscreen: N,
                setFullscreen: C,
                toggleFullscreen: I,
                setHoverColor: K,
                requestLenticularMode: k,
                enableDeviceTracking: H,
                disableDeviceTracking: W,
                toggleDeviceTracking: X,
                requestNormalMode: F,
                setFullscreenBGColor: $,
                setCameraRadiusConstraint: ue,
                updateToolOptions: h,
                setCamera: M,
                frameScene: de
            },
            selectors: {
                getCamera: T,
                getCameraAttrs: m,
                getInitialCameraPosition: S,
                getCameraWorldTransform: g,
                getActiveColor: ee,
                isFullscreen: L,
                isVRMode: R,
                isLenticularMode: P,
                getFullscreenBGColor: re,
                isDeviceTracking: q,
                shouldDisplayThumbnail: fe,
                filterNodesFromPosition: oe,
                filterNodesFromCenter: se,
                getThreeScene: x,
                getThreeCamera: A
            }
        };
        t.default = ut
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_core.js ***!
  \************************************************************/
    function(e, t) {
        var r = e.exports = {
            version: "2.4.0"
        };
        "number" == typeof __e && (__e = r)
    }
    , /*!***********************************************************!*\
  !*** ./src/polyMesh/generic/container/ObjectArrayView.js ***!
  \***********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r, n) {
            var i = e.InstanceScalarSize || n
              , a = n || i
              , o = null !== t ? t * a : null;
            if (void 0 === i || void 0 === a)
                throw Error("Can't determine element size / stride!");
            var s = r || Float32Array
              , u = c.default.maybeCreate(s, o);
            f.default.call(this, u, t || (u.length + a - i) / a | 0),
            this.type = e,
            this.stride = a,
            this.elementSize = i,
            this.tempBuffer = new Float32Array(i)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/create */
        47)
          , o = n(a)
          , s = r(/*! babel-runtime/core-js/object/assign */
        2)
          , u = n(s);
        t.default = i;
        var l = r(/*! ../utility/Arrays */
        16)
          , c = n(l)
          , h = r(/*! ./FlatArrayView */
        127)
          , f = n(h)
          , d = r(/*! ./ObjectBuffer */
        60)
          , p = n(d);
        i.prototype = (0,
        u.default)((0,
        o.default)(f.default.prototype), {
            constructor: i,
            getAt: function(e, t) {
                var r = t || new this.type;
                return r.fromArray(this.data, e * this.stride)
            },
            setAt: function(e, t) {
                t.toArray(this.data, e * this.stride)
            },
            addAt: function(e, t) {
                t.toArray(this.tempBuffer, 0);
                for (var r = 0, n = e * this.stride; r < this.elementSize; r++)
                    this.data[n + r] += this.tempBuffer[r]
            },
            multiplyScalarAt: function(e, t) {
                for (var r = 0, n = e * this.stride; r < this.elementSize; r++)
                    this.data[n + r] *= t
            },
            newCompatibleView: function(e, t) {
                return new i(this.type,t || null,e,this.stride)
            },
            newCompatibleBuffer: function() {
                return new p.default(this.type,this.data.constructor,this.stride)
            }
        }),
        i.fromObjects = function(e, t, r) {
            var n = new i(e,t.length,r);
            return c.default.copyObjects(t, n.data),
            n
        }
    }
    , /*!************************************************!*\
  !*** ./~/babel-runtime/core-js/object/keys.js ***!
  \************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/keys */
            285),
            __esModule: !0
        }
    }
    , /*!***********************************!*\
  !*** ./src/modules/sceneGraph.js ***!
  \***********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e) {
            return e.map(function(e) {
                var t = e.get("warnings").toArray()
                  , r = e.get("plugs").map(function(e, r) {
                    return e.map(function(e) {
                        var n = e.get("type")
                          , i = (0,
                        $.lookupOperator)(r, n, t)
                          , a = i.init(n, e.toJS(), e.get("name"));
                        return a
                    }).toArray()
                }).toObject()
                  , n = e.toJS();
                return n.plugs = r,
                n.warnings = t,
                n._v = 0,
                n
            }).toObject()
        }
        function o(e) {
            var t = {}
              , r = e.warnings || [];
            return (0,
            F.default)(e.plugs).forEach(function(n) {
                t[n] = e.plugs[n].map(function(e) {
                    var t = e.type
                      , i = (0,
                    $.lookupOperator)(n, t, r);
                    return i.init(t, e, e.name)
                })
            }),
            (0,
            V.default)({}, e, {
                warnings: r,
                plugs: t,
                _v: 0
            })
        }
        function s(e) {
            var t = {};
            return (0,
            F.default)(e).forEach(function(r) {
                t[r] = o(e[r])
            }),
            t
        }
        function u(e) {
            function t(e) {
                return e.hasOwnProperty("_v") || (e._v = 0),
                e
            }
            function r(t) {
                var r = t.id
                  , n = t.name
                  , i = t.type
                  , a = t.children
                  , o = t.parent
                  , s = t.plugs
                  , u = []
                  , l = (0,
                X.mapObjIndexed)(function(t, r) {
                    return e[r] ? t.map(function(e) {
                        if (!Array.isArray(e))
                            throw new Error("Expect op to be an array of 2 or 3");
                        var t = (0,
                        B.default)(e, 3)
                          , n = t[0]
                          , i = t[1]
                          , a = t[2]
                          , o = (0,
                        $.lookupOperator)(r, n, u)
                          , s = o.init(n, i, a);
                        return s
                    }) : (u = u.push("No Plug: " + r),
                    [])
                }, s)
                  , c = a || [];
                return {
                    id: r,
                    name: n,
                    type: i,
                    children: c,
                    parent: o,
                    plugs: l,
                    warnings: u,
                    _v: 0
                }
            }
            function n(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                e.nodes[he] && !t.force || (e.nodes[he] = r({
                    id: he,
                    name: "CAMERA",
                    type: "Camera",
                    plugs: {
                        Camera: [["Camera", {}]],
                        Transform: [["Transform", {}]],
                        Properties: [["Default", {}]]
                    }
                })),
                e.nodes[fe] && !t.force || (e.nodes[fe] = r({
                    id: fe,
                    name: "VR CAMERA",
                    type: "Camera",
                    plugs: {
                        Camera: [["Camera", {
                            fieldOfView: 45
                        }]],
                        Transform: [["Transform", {
                            translation: {
                                x: 0,
                                y: 1.6,
                                z: 1
                            }
                        }]],
                        Properties: [["Default", {}]]
                    }
                })),
                e.nodes[de] && !t.force || (e.nodes[de] = r({
                    id: de,
                    name: "VIRTUAL TARGET NULL",
                    type: "Null",
                    plugs: {
                        Transform: [["Transform", {}]]
                    }
                }))
            }
            function i() {
                return {
                    _v: 0,
                    nodes: {},
                    fileReferences: {
                        to: {},
                        from: {}
                    },
                    nodeReferences: {
                        to: {},
                        from: {}
                    },
                    evaluatedNodes: {},
                    loaded: !1,
                    _ev: 0
                }
            }
            function o(e, t) {
                var r = t.path
                  , n = t.value;
                if (!r.length || r.length < 2)
                    throw new Error("SET requires a path with length 2 or 4");
                var i = (0,
                B.default)(r, 4)
                  , a = i[0]
                  , o = i[1]
                  , s = i[2]
                  , u = i[3]
                  , l = e.nodes[a];
                if (2 === r.length && "name" === r[1])
                    l.name = n,
                    l._v += 1,
                    e._v += 1;
                else {
                    var c = l && l.plugs[o]
                      , h = c && c[s];
                    if (!h)
                        throw new Error("Setting data on unknown operator: " + r.join(","));
                    var f = ee.default[o][h.type];
                    f.set(h, u, n) && (l._v += 1,
                    e._v += 1)
                }
                return e
            }
            var u, l = (0,
            Z.default)({}, (u = {},
            (0,
            C.default)(u, re.ActionTypes.INIT, function(e) {
                return i()
            }),
            (0,
            C.default)(u, ce, function(e, t) {
                var r = e.nodes[t];
                return r && (r._v += 1,
                e._v += 1),
                e
            }),
            (0,
            C.default)(u, ie, o),
            (0,
            C.default)(u, ae, function(e, t) {
                var r = t.path
                  , n = t.attrs;
                if (!r.length || 3 !== r.length)
                    throw new Error("MERGE requires a path with length 3");
                if ("object" !== ("undefined" == typeof n ? "undefined" : (0,
                P.default)(n)))
                    throw new Error("MERGE requires an object to merge in");
                var i = (0,
                B.default)(r, 3)
                  , a = i[0]
                  , o = i[1]
                  , s = i[2]
                  , u = e.nodes[a]
                  , l = u && u.plugs[o]
                  , c = l && l[s]
                  , h = c && ee.default[o][c.type];
                if (!h)
                    throw new Error("Setting data on unknown operator: " + r.join(","));
                var f = !0
                  , d = !1
                  , p = void 0;
                try {
                    for (var m, g = (0,
                    j.default)((0,
                    F.default)(n)); !(f = (m = g.next()).done); f = !0) {
                        var v = m.value;
                        h.set(c, v, n[v])
                    }
                } catch (e) {
                    d = !0,
                    p = e
                } finally {
                    try {
                        !f && g.return && g.return()
                    } finally {
                        if (d)
                            throw p
                    }
                }
                return u._v += 1,
                e._v += 1,
                e
            }),
            (0,
            C.default)(u, oe, function(e, t) {
                var r = t.id
                  , n = t.node
                  , i = e.nodes[r];
                if (i) {
                    var a = i._v;
                    return e.nodes[r] = n,
                    n._v = a + 1,
                    e._v += 1,
                    e
                }
            }),
            (0,
            C.default)(u, K.ADD_NODE, function(e, n) {
                var i = n.id
                  , a = n.parent
                  , o = a && e.nodes[a];
                if (a && !o)
                    throw new Error("Unknown parent: '" + a + "'");
                if (e.nodes[i])
                    throw new Error("Adding a node that already exists: " + i);
                return e.nodes[i] = n.node ? t(n.node) : r(n),
                a && !o.children && (o.children = []),
                a && o.children.indexOf(i) === -1 && o.children.push(i),
                e._v += 1,
                e
            }),
            (0,
            C.default)(u, K.DELETE_NODE, function(e, t) {
                function r(t) {
                    var n = e.nodes[t];
                    if (n) {
                        var i = !0
                          , a = !1
                          , s = void 0;
                        try {
                            for (var u, l = (0,
                            j.default)(n.children || []); !(i = (u = l.next()).done); i = !0) {
                                var c = u.value;
                                r(c)
                            }
                        } catch (e) {
                            a = !0,
                            s = e
                        } finally {
                            try {
                                !i && l.return && l.return()
                            } finally {
                                if (a)
                                    throw s
                            }
                        }
                        var h = e.nodeReferences.from[t];
                        (0,
                        F.default)(h || {}).forEach(function(t) {
                            var r = JSON.parse(t);
                            o(e, {
                                path: r,
                                value: null
                            })
                        }),
                        delete e.nodes[t]
                    }
                    return n
                }
                var n = r(t);
                if (!n)
                    return e;
                var i = n.parent && e.nodes[n.parent];
                if (i) {
                    var a = i.children.indexOf(t);
                    a !== -1 && i.children.splice(a, 1),
                    i._v += 1
                }
                return e._v += 1,
                e
            }),
            (0,
            C.default)(u, le, function(e, t) {
                var r = t.id
                  , n = t.plug
                  , i = t.op
                  , a = e.nodes[r];
                if (!a)
                    throw new Error("Unknown node: " + r);
                var o = a.plugs[n];
                if (!o)
                    throw new Error("Unknown plug: " + n);
                if (!Array.isArray(i))
                    throw new Error("Expect op to be an array of 2 or 3");
                var s = (0,
                B.default)(i, 3)
                  , u = s[0]
                  , l = (s[1],
                s[2])
                  , c = (0,
                $.lookupOperator)(n, u, a.warnings);
                return o.push(c.init(u, i, l)),
                a._v += 1,
                e._v += 1,
                e
            }),
            (0,
            C.default)(u, se, function(e, t) {
                var r = e._v;
                for (var n in t) {
                    var i = t[n];
                    i.type === ie && o(e, i.payload)
                }
                return e._v = r + 1,
                e
            }),
            (0,
            C.default)(u, ue, function(e, t) {
                var r = t.parentId
                  , n = t.childIds
                  , i = e.nodes[r];
                return i ? ((0,
                X.forEach)(function(t) {
                    var n = e.nodes[t];
                    if (n) {
                        var a = n && n.parent
                          , o = a && e.nodes[a]
                          , s = o && o.children ? o.children.indexOf(t) : -1;
                        s !== -1 && (o.children.splice(s, 1),
                        o._v += 1),
                        i.children.push(t),
                        n.parent = r,
                        n._v += 1
                    }
                }, n.slice()),
                i._v += 1,
                e._v += 1,
                e) : (console.warn("Unknown parent for reparent: " + r),
                e)
            }),
            (0,
            C.default)(u, K.LOAD_SCENE, function(e, t) {
                var r = t.scene
                  , i = t.nodes
                  , o = r ? a(r) : s(JSON.parse(i));
                return (0,
                V.default)(e.nodes, o),
                n(e),
                e._v += 1,
                e
            }),
            (0,
            C.default)(u, K.CLEAR_SCENE, function(e, t) {
                return n(e, {
                    force: !0
                }),
                e._v += 1,
                e.nodes[t] && (e.nodes[t]._v = 0),
                e
            }),
            (0,
            C.default)(u, K.LOADED_FILE, function(e, t) {
                if (e.fileReferences.from[t]) {
                    var r = !0
                      , n = !1
                      , i = void 0;
                    try {
                        for (var a, o = (0,
                        j.default)((0,
                        F.default)(e.fileReferences.from[t])); !(r = (a = o.next()).done); r = !0) {
                            var s = a.value
                              , u = JSON.parse(s)
                              , l = (0,
                            B.default)(u, 3)
                              , c = l[0];
                            l[1],
                            l[2],
                            e.nodes[c]._v += 1
                        }
                    } catch (e) {
                        n = !0,
                        i = e
                    } finally {
                        try {
                            !r && o.return && o.return()
                        } finally {
                            if (n)
                                throw i
                        }
                    }
                    e._v += 1
                }
                return e
            }),
            (0,
            C.default)(u, K.SET_VR_CAMERA, function(e, t) {
                var r = e.get(t);
                return "Camera" === r.type ? e.set(fe, r) : e
            }),
            u));
            return l
        }
        function l(e) {
            var t = {}
              , r = !0
              , n = !1
              , i = void 0;
            try {
                for (var a, o = (0,
                j.default)((0,
                F.default)(e.plugs)); !(r = (a = o.next()).done); r = !0) {
                    var s = a.value;
                    t[s] = (0,
                    X.map)(function(e) {
                        return (0,
                        V.default)({}, e)
                    }, e.plugs[s])
                }
            } catch (e) {
                n = !0,
                i = e
            } finally {
                try {
                    !r && o.return && o.return()
                } finally {
                    if (n)
                        throw i
                }
            }
            return {
                id: W.default.v4(),
                name: e.name,
                type: e.type,
                parent: e.parent,
                children: [].concat(e.children),
                plugs: t,
                _v: 1
            }
        }
        function c(e) {
            var t = e.id
              , r = e.name
              , n = e.type
              , i = e.plugs
              , a = e.parent;
            return t || (t = W.default.v4()),
            r = r || t,
            {
                type: K.ADD_NODE,
                payload: {
                    id: t,
                    name: r,
                    type: n,
                    plugs: i,
                    parent: a
                },
                resolve: t
            }
        }
        function h(e) {
            return {
                type: K.SET_VR_CAMERA,
                payload: e
            }
        }
        function f(e) {
            return {
                type: K.DELETE_NODE,
                payload: e
            }
        }
        function d(e, t, r) {
            return {
                type: le,
                payload: {
                    id: e,
                    plug: t,
                    op: r
                }
            }
        }
        function p(e, t) {
            if (!Array.isArray(t))
                throw new Error("Expect path to be an array");
            var r = e.get("sceneGraph")
              , n = r.nodes[t[0]];
            if (t.length >= 2) {
                if ("name" === t[1] || "type" === t[1])
                    return n && n[t[1]];
                n = n && n.plugs[t[1]]
            }
            if (t.length >= 3 && (n = n && n[t[2]]),
            t.length >= 4 && n) {
                var i = (0,
                $.lookupOperator)(t[1], n.type, []);
                n = i.get(n, t[3])
            }
            return n
        }
        function m(e) {
            return e.getIn(["sceneGraph", fe])
        }
        function g(e, t) {
            return {
                type: ie,
                payload: {
                    path: e,
                    value: t
                },
                meta: {
                    remote: !0
                }
            }
        }
        function v(e, t) {
            return {
                type: ae,
                payload: {
                    path: e,
                    attrs: t
                }
            }
        }
        function y(e, t) {
            return {
                type: oe,
                payload: {
                    id: e,
                    node: t
                }
            }
        }
        function M(e) {
            return {
                type: se,
                payload: e
            }
        }
        function w(e) {
            return {
                type: ce,
                payload: e
            }
        }
        function x(e, t) {
            return {
                type: ue,
                payload: {
                    parentId: e,
                    childIds: t
                }
            }
        }
        function A(e, t) {
            var r = e.get("sceneGraph").nodes[t];
            return r && r.parent
        }
        function b(e, t) {
            var r = e.get("sceneGraph").nodes[t]
              , n = r && r.parent;
            return n ? b(e, n) : t
        }
        function T(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}
              , n = r.cloneDependencies
              , i = (0,
            X.reduce)(function(e, t) {
                return e[t] = !0,
                e
            }, {}, e)
              , a = {};
            return function(r) {
                function o(e) {
                    var n = u.nodes[e];
                    if (n && n.name,
                    n && n.plugs) {
                        var s = !0
                          , l = !1
                          , c = void 0;
                        try {
                            for (var h, f = (0,
                            j.default)((0,
                            F.default)(n.plugs)); !(s = (h = f.next()).done); s = !0) {
                                var d = h.value
                                  , p = n.plugs[d]
                                  , m = !0
                                  , g = !1
                                  , v = void 0;
                                try {
                                    for (var y, M = (0,
                                    j.default)(p); !(m = (y = M.next()).done); m = !0) {
                                        var w = y.value
                                          , x = ee.default[d][w.type];
                                        if (x) {
                                            var A = !0
                                              , b = !1
                                              , T = void 0;
                                            try {
                                                for (var _, E = (0,
                                                j.default)(x.referenceKeys); !(A = (_ = E.next()).done); A = !0) {
                                                    var S = _.value
                                                      , D = w[S];
                                                    !D || i[D] || t[D] || (i[D] = !0,
                                                    o(D))
                                                }
                                            } catch (e) {
                                                b = !0,
                                                T = e
                                            } finally {
                                                try {
                                                    !A && E.return && E.return()
                                                } finally {
                                                    if (b)
                                                        throw T
                                                }
                                            }
                                            var N = !0
                                              , I = !1
                                              , L = void 0;
                                            try {
                                                for (var C, O = (0,
                                                j.default)(x.fileReferenceKeys); !(N = (C = O.next()).done); N = !0) {
                                                    var R = C.value
                                                      , P = w[R];
                                                    P && r.getIn(["assets", P]) && (a[P] = !0)
                                                }
                                            } catch (e) {
                                                I = !0,
                                                L = e
                                            } finally {
                                                try {
                                                    !N && O.return && O.return()
                                                } finally {
                                                    if (I)
                                                        throw L
                                                }
                                            }
                                        }
                                    }
                                } catch (e) {
                                    g = !0,
                                    v = e
                                } finally {
                                    try {
                                        !m && M.return && M.return()
                                    } finally {
                                        if (g)
                                            throw v
                                    }
                                }
                            }
                        } catch (e) {
                            l = !0,
                            c = e
                        } finally {
                            try {
                                !s && f.return && f.return()
                            } finally {
                                if (l)
                                    throw c
                            }
                        }
                    }
                }
                function s(e) {
                    var r = e
                      , n = !0
                      , o = !1
                      , s = void 0;
                    try {
                        for (var u, l = function() {
                            var n = u.value
                              , o = e.plugs[n];
                            o.forEach(function(e, o) {
                                var s = ee.default[n][e.type];
                                if (s) {
                                    var u = !0
                                      , l = !1
                                      , c = void 0;
                                    try {
                                        for (var h, f = (0,
                                        j.default)(s.referenceKeys); !(u = (h = f.next()).done); u = !0) {
                                            var d = h.value
                                              , p = e[d]
                                              , m = p && (i[p] || t[p]);
                                            m && (r.plugs[n][o][d] = m)
                                        }
                                    } catch (e) {
                                        l = !0,
                                        c = e
                                    } finally {
                                        try {
                                            !u && f.return && f.return()
                                        } finally {
                                            if (l)
                                                throw c
                                        }
                                    }
                                    var g = !0
                                      , v = !1
                                      , y = void 0;
                                    try {
                                        for (var M, w = (0,
                                        j.default)(s.fileReferenceKeys); !(g = (M = w.next()).done); g = !0) {
                                            var x = M.value
                                              , A = e[x];
                                            A && a[A] && (r.plugs[n][o][x] = a[A])
                                        }
                                    } catch (e) {
                                        v = !0,
                                        y = e
                                    } finally {
                                        try {
                                            !g && w.return && w.return()
                                        } finally {
                                            if (v)
                                                throw y
                                        }
                                    }
                                }
                            })
                        }, c = (0,
                        j.default)((0,
                        F.default)(e.plugs)); !(n = (u = c.next()).done); n = !0)
                            l()
                    } catch (e) {
                        o = !0,
                        s = e
                    } finally {
                        try {
                            !n && c.return && c.return()
                        } finally {
                            if (o)
                                throw s
                        }
                    }
                    return r
                }
                var u = r.get("sceneGraph");
                n && (0,
                X.forEach)(o, e),
                (0,
                X.forEach)(function(e) {
                    return i[e] = W.default.v4()
                }, (0,
                F.default)(i)),
                (0,
                X.forEach)(function(e) {
                    return a[e] = W.default.v4()
                }, (0,
                F.default)(a)),
                (0,
                X.forEach)(function(e) {
                    var n = u.nodes[e]
                      , a = l(n);
                    a.id = i[e];
                    var o = n.parent
                      , c = o && (i[o] || t[o] || o);
                    a.parent = c,
                    a.children = [];
                    var h = !0
                      , f = !1
                      , d = void 0;
                    try {
                        for (var p, m = (0,
                        j.default)(n.children); !(h = (p = m.next()).done); h = !0) {
                            var g = p.value;
                            i[g] ? a.children.push(i[g]) : t[g] && a.children.push(t[g])
                        }
                    } catch (e) {
                        f = !0,
                        d = e
                    } finally {
                        try {
                            !h && m.return && m.return()
                        } finally {
                            if (f)
                                throw d
                        }
                    }
                    r.dispatch({
                        type: K.ADD_NODE,
                        payload: {
                            id: i[e],
                            parent: c,
                            node: s(a)
                        }
                    })
                }, (0,
                F.default)(i));
                var c = b(r, i[(0,
                F.default)(i)[0]]);
                return (0,
                X.forEach)(function(e) {
                    var t = r.getIn(["assets", e]);
                    t && r.dispatch((0,
                    J.addFile)(t.set("id", a[e]).set("sceneId", c).toJS()))
                }, (0,
                F.default)(a)),
                I.default.resolve(i)
            }
        }
        function _(e) {
            var t = (0,
            F.default)(e.plugs).map(function(t) {
                return {
                    type: t,
                    operators: e.plugs[t].map(function(e) {
                        var r = (0,
                        $.lookupOperator)(t, e.type, []);
                        return r.export(e)
                    })
                }
            });
            return {
                _id: e.id,
                name: e.name,
                type: e.type,
                plugs: t,
                nodes: []
            }
        }
        function E(e, t) {
            var r = void 0
              , n = {}
              , i = e.get("sceneGraph");
            return (0,
            X.forEach)(function(e) {
                var t = i.nodes[e];
                if (t) {
                    var a = _(t);
                    n[a._id] = a,
                    r || (r = a),
                    t.parent && n[t.parent] && n[t.parent].nodes.push(a)
                }
            }, t),
            r
        }
        function S(e, t, r) {
            var n = A(e, t)
              , i = (0,
            ne.getWorldTransform)(e, n)
              , a = new Y.Vector3
              , o = new Y.Quaternion
              , s = new Y.Vector3
              , u = new Y.Matrix4;
            if (u.copy(r),
            i) {
                var l = new Y.Matrix4;
                l.getInverse(i, !0),
                u.multiplyMatrices(l, u)
            }
            u.decompose(a, o, s);
            var c = (new Y.Euler).setFromQuaternion(o, "ZYX");
            e.dispatch(g([t, "Transform", 0, "translation"], {
                x: a.x,
                y: a.y,
                z: a.z
            })),
            e.dispatch(g([t, "Transform", 0, "rotation"], {
                x: Y.Math.radToDeg(c.x),
                y: Y.Math.radToDeg(c.y),
                z: Y.Math.radToDeg(c.z)
            }))
        }
        function D(e) {
            var t = e.get("sceneGraph");
            if (t._v === t._ev)
                return t;
            var r = e.getIn(["sceneIO", "id"]);
            return (0,
            te.evaluateSceneGraph)(e, r, t),
            t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.virtualTargetId = t.vrCameraId = t.virtualCameraId = void 0;
        var N = r(/*! babel-runtime/core-js/promise */
        30)
          , I = i(N)
          , L = r(/*! babel-runtime/helpers/defineProperty */
        21)
          , C = i(L)
          , O = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , j = i(O)
          , R = r(/*! babel-runtime/helpers/typeof */
        17)
          , P = i(R)
          , z = r(/*! babel-runtime/helpers/slicedToArray */
        39)
          , B = i(z)
          , U = r(/*! babel-runtime/core-js/object/assign */
        2)
          , V = i(U)
          , k = r(/*! babel-runtime/core-js/object/keys */
        8)
          , F = i(k);
        t.initNode = o,
        t.addNode = c,
        t.setVRCamera = h,
        t.deleteNode = f,
        t.addOperator = d,
        t.get = p,
        t.getVRCamera = m,
        t.set = g,
        t.merge = v,
        t.replace = y,
        t.multi = M,
        t.touch = w,
        t.reparent = x,
        t.findParent = A,
        t.findRoot = b,
        t.clone = T,
        t.oldNodeJSON = _,
        t.exportJSON = E,
        t.updateNodeTransform = S,
        t.getEvalSceneGraph = D;
        var G = r(/*! three */
        1)
          , Y = n(G)
          , Q = r(/*! cuid */
        158)
          , H = (i(Q),
        r(/*! node-uuid */
        348))
          , W = i(H)
          , X = (r(/*! immutable */
        11),
        r(/*! ramda */
        3))
          , q = r(/*! ./utils/createReducer */
        27)
          , Z = i(q)
          , J = r(/*! ./assets */
        26)
          , K = r(/*! ./actionTypes */
        43)
          , $ = r(/*! ../operators/nonImmutable */
        75)
          , ee = i($)
          , te = r(/*! ./utils/evalSceneGraph */
        171)
          , re = r(/*! ../store/createStore */
        61)
          , ne = r(/*! ./scene */
        4)
          , ie = "SET"
          , ae = "MERGE"
          , oe = "REPLACE"
          , se = "MULTI"
          , ue = "REPARENT"
          , le = "ADD_OPERATOR"
          , ce = "TOUCH"
          , he = "cccccccc-cccc-1ccc-accc-cccccccccccc"
          , fe = "bbbbbbbb-bbbb-0bbb-zbbb-bbbbbbbbbbbb"
          , de = "dddddddd-dddd-0ddd-addd-dddddddddddd"
          , pe = {
            reducer: u,
            actions: {
                set: g,
                merge: v,
                multi: M,
                addNode: c,
                deleteNode: f,
                reparent: x,
                clone: T,
                setVRCamera: h,
                addOperator: d
            },
            selectors: {
                get: p,
                exportJSON: E,
                getVRCamera: m
            }
        };
        t.default = pe,
        t.virtualCameraId = he,
        t.vrCameraId = fe,
        t.virtualTargetId = de
    }
    , /*!*************************************************!*\
  !*** ./src/polyMesh/geometric/model/PolyMap.js ***!
  \*************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e) {
            if (e) {
                this.faceRangeOffsets = e.faceRangeOffsets,
                this.faceValueIndices = e.faceValueIndices,
                this.values = e.values;
                var t = e.valueFaceIndices || null;
                this.valueFaceIndices = t,
                this.valueFaceIndexOffsets = t && e.valueFaceIndexOffsets || null,
                this._edgeVertexAdjacency = null,
                this._faceEdgeAdjacency = null,
                this._valueAdjacency = null,
                this._valueValueAdjacency = null,
                this._faceFaceAdjacency = null
            } else
                this.faceRangeOffsets = new Uint32Array(1),
                this.faceValueIndices = new Uint32Array(0),
                this.values = new h.default(s.Vector3,0)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/algorithm/IndexMappings */
        59)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , h = n(c)
          , f = r(/*! ../../generic/utility/Arrays */
        16)
          , d = n(f)
          , p = r(/*! ./adjacency/EdgeVertexAdjacency */
        204)
          , m = n(p)
          , g = r(/*! ./adjacency/FaceEdgeAdjacency */
        205)
          , v = n(g)
          , y = r(/*! ./adjacency/ValueAdjacency */
        207)
          , M = n(y)
          , w = r(/*! ./adjacency/FaceFaceAdjacency */
        206)
          , x = n(w);
        a.fromData = function(e, t, r) {
            var n = new a({
                faceRangeOffsets: e,
                faceValueIndices: t || l.default.identity(r.length, Uint32Array),
                values: r.repack(Float32Array)
            })
              , i = e[e.length - 1];
            if (n.faceValueIndices.length !== i)
                throw Error("Number of postition indices or unindexed data values does not match the number of face vertices!");
            return n
        }
        ,
        a.prototype = {
            constructor: a,
            isPolyMap: !0,
            findValueIndexOffset: function(e, t) {
                for (var r = this.faceRangeOffsets, n = this.faceValueIndices, i = r[e], a = r[e + 1], o = i; o !== a; ++o)
                    if (n[o] === t)
                        return o;
                return -1
            },
            get edgeVertexAdjacency() {
                return this._edgeVertexAdjacency || (this._edgeVertexAdjacency = new m.default(this)),
                this._edgeVertexAdjacency
            },
            get faceEdgeAdjacency() {
                return this._faceEdgeAdjacency || (this._faceEdgeAdjacency = new v.default(this)),
                this._faceEdgeAdjacency
            },
            get valueAdjacency() {
                return this._valueAdjacency || (this._valueAdjacency = new M.default(this)),
                this._valueAdjacency
            },
            get valueValueAdjacency() {
                return this._valueValueAdjacency || (this._valueValueAdjacency = new ValueValueAdjacency(this)),
                this._valueValueAdjacency
            },
            get faceFaceAdjacency() {
                return this._faceFaceAdjacency || (this._faceFaceAdjacency = new x.default(this)),
                this._faceFaceAdjacency
            },
            updateInverseIndex: function() {
                if (null === this.valueFaceIndices) {
                    for (var e = this.faceRangeOffsets, t = -1, r = e[0], n = this.faceValueIndices, i = this._updateValueFaceIndexOffsets(), a = i.length, o = n.length, s = new Uint32Array(o), u = 0; u !== o; ++u)
                        u === r && (r = e[++t + 1]),
                        s[i[n[u]]++] = t;
                    if (this.valueFaceIndices = s,
                    0 === i.byteOffset)
                        throw Error("Invalid .valueFaceIndexOffsets != null!");
                    this.valueFaceIndexOffsets = new Uint32Array(i.buffer,0,a)
                }
                return this
            },
            _updateValueFaceIndexOffsets: function() {
                var e = this.valueFaceIndexOffsets;
                if (null === e) {
                    var t = this.values.length
                      , r = t + 2
                      , n = new Uint32Array(r)
                      , i = n.subarray(2);
                    e = n.subarray(1),
                    l.default.histogram(this.faceValueIndices, t, i),
                    d.default.accumulate(i),
                    this.valueFaceIndices = null,
                    this.valueFaceIndexOffsets = e
                }
                return e
            },
            compactValues: function() {
                var e = this.values
                  , t = e.length;
                if (0 !== t) {
                    var r = new Uint32Array(t)
                      , n = this._compactFaceIndexOffsets(r);
                    n !== t && (this._compactData(r, n),
                    this._compactIndices(r))
                }
                return this
            },
            _compactFaceIndexOffsets: function(e) {
                for (var t = this._updateValueFaceIndexOffsets(), r = e.length, n = 0, i = 0, a = 0; a !== r; ++a) {
                    var o = t[a + 1];
                    e[a] = n,
                    i !== o && (n !== a && (t[n] = i),
                    i = o,
                    ++n)
                }
                if (t[n] = i,
                n !== r)
                    if (0 !== t.byteOffset) {
                        var s = new Uint32Array(t.buffer)
                          , u = d.default.slice(s, 0, n + 2);
                        t = u.subarray(1)
                    } else
                        t = d.default.slice(t, 0, n + 1);
                return this.valueFaceIndexOffsets = t,
                n
            },
            _compactData: function(e, t) {
                for (var r = this.values, n = r.length, i = new h.default(r.type,t), a = e[0], o = i.newRangeArray(), s = 1; s !== n; ++s) {
                    var u = e[s];
                    a !== u && (r.rangeToArray(s - 1, 1, o),
                    i.arrayToRange(o, a, 1),
                    a = u)
                }
                r.rangeToArray(n - 1, 1, o),
                i.arrayToRange(o, a, 1),
                this.values = i
            },
            _compactIndices: function(e) {
                var t = this.faceValueIndices
                  , r = t.length
                  , n = new Uint32Array(r);
                l.default.apply(t, e, n),
                this.faceValueIndices = n
            }
        }
    }
    , /*!***************************************!*\
  !*** ./~/immutable/dist/immutable.js ***!
  \***************************************/
    function(e, t, r) {
        !function(t, r) {
            e.exports = r()
        }(this, function() {
            "use strict";
            function e(e, t) {
                t && (e.prototype = Object.create(t.prototype)),
                e.prototype.constructor = e
            }
            function t(e) {
                return a(e) ? e : N(e)
            }
            function r(e) {
                return o(e) ? e : I(e)
            }
            function n(e) {
                return s(e) ? e : L(e)
            }
            function i(e) {
                return a(e) && !u(e) ? e : C(e)
            }
            function a(e) {
                return !(!e || !e[ur])
            }
            function o(e) {
                return !(!e || !e[lr])
            }
            function s(e) {
                return !(!e || !e[cr])
            }
            function u(e) {
                return o(e) || s(e)
            }
            function l(e) {
                return !(!e || !e[hr])
            }
            function c(e) {
                return e.value = !1,
                e
            }
            function h(e) {
                e && (e.value = !0)
            }
            function f() {}
            function d(e, t) {
                t = t || 0;
                for (var r = Math.max(0, e.length - t), n = new Array(r), i = 0; i < r; i++)
                    n[i] = e[i + t];
                return n
            }
            function p(e) {
                return void 0 === e.size && (e.size = e.__iterate(g)),
                e.size
            }
            function m(e, t) {
                if ("number" != typeof t) {
                    var r = t >>> 0;
                    if ("" + r !== t || 4294967295 === r)
                        return NaN;
                    t = r
                }
                return t < 0 ? p(e) + t : t
            }
            function g() {
                return !0
            }
            function v(e, t, r) {
                return (0 === e || void 0 !== r && e <= -r) && (void 0 === t || void 0 !== r && t >= r)
            }
            function y(e, t) {
                return w(e, t, 0)
            }
            function M(e, t) {
                return w(e, t, t)
            }
            function w(e, t, r) {
                return void 0 === e ? r : e < 0 ? Math.max(0, t + e) : void 0 === t ? e : Math.min(t, e)
            }
            function x(e) {
                this.next = e
            }
            function A(e, t, r, n) {
                var i = 0 === e ? t : 1 === e ? r : [t, r];
                return n ? n.value = i : n = {
                    value: i,
                    done: !1
                },
                n
            }
            function b() {
                return {
                    value: void 0,
                    done: !0
                }
            }
            function T(e) {
                return !!S(e)
            }
            function _(e) {
                return e && "function" == typeof e.next
            }
            function E(e) {
                var t = S(e);
                return t && t.call(e)
            }
            function S(e) {
                var t = e && (Ar && e[Ar] || e[br]);
                if ("function" == typeof t)
                    return t
            }
            function D(e) {
                return e && "number" == typeof e.length
            }
            function N(e) {
                return null === e || void 0 === e ? B() : a(e) ? e.toSeq() : k(e)
            }
            function I(e) {
                return null === e || void 0 === e ? B().toKeyedSeq() : a(e) ? o(e) ? e.toSeq() : e.fromEntrySeq() : U(e)
            }
            function L(e) {
                return null === e || void 0 === e ? B() : a(e) ? o(e) ? e.entrySeq() : e.toIndexedSeq() : V(e)
            }
            function C(e) {
                return (null === e || void 0 === e ? B() : a(e) ? o(e) ? e.entrySeq() : e : V(e)).toSetSeq()
            }
            function O(e) {
                this._array = e,
                this.size = e.length
            }
            function j(e) {
                var t = Object.keys(e);
                this._object = e,
                this._keys = t,
                this.size = t.length
            }
            function R(e) {
                this._iterable = e,
                this.size = e.length || e.size
            }
            function P(e) {
                this._iterator = e,
                this._iteratorCache = []
            }
            function z(e) {
                return !(!e || !e[_r])
            }
            function B() {
                return Er || (Er = new O([]))
            }
            function U(e) {
                var t = Array.isArray(e) ? new O(e).fromEntrySeq() : _(e) ? new P(e).fromEntrySeq() : T(e) ? new R(e).fromEntrySeq() : "object" == typeof e ? new j(e) : void 0;
                if (!t)
                    throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: " + e);
                return t
            }
            function V(e) {
                var t = F(e);
                if (!t)
                    throw new TypeError("Expected Array or iterable object of values: " + e);
                return t
            }
            function k(e) {
                var t = F(e) || "object" == typeof e && new j(e);
                if (!t)
                    throw new TypeError("Expected Array or iterable object of values, or keyed object: " + e);
                return t
            }
            function F(e) {
                return D(e) ? new O(e) : _(e) ? new P(e) : T(e) ? new R(e) : void 0
            }
            function G(e, t, r, n) {
                var i = e._cache;
                if (i) {
                    for (var a = i.length - 1, o = 0; o <= a; o++) {
                        var s = i[r ? a - o : o];
                        if (t(s[1], n ? s[0] : o, e) === !1)
                            return o + 1
                    }
                    return o
                }
                return e.__iterateUncached(t, r)
            }
            function Y(e, t, r, n) {
                var i = e._cache;
                if (i) {
                    var a = i.length - 1
                      , o = 0;
                    return new x(function() {
                        var e = i[r ? a - o : o];
                        return o++ > a ? b() : A(t, n ? e[0] : o - 1, e[1])
                    }
                    )
                }
                return e.__iteratorUncached(t, r)
            }
            function Q(e, t) {
                return t ? H(t, e, "", {
                    "": e
                }) : W(e)
            }
            function H(e, t, r, n) {
                return Array.isArray(t) ? e.call(n, r, L(t).map(function(r, n) {
                    return H(e, r, n, t)
                })) : X(t) ? e.call(n, r, I(t).map(function(r, n) {
                    return H(e, r, n, t)
                })) : t
            }
            function W(e) {
                return Array.isArray(e) ? L(e).map(W).toList() : X(e) ? I(e).map(W).toMap() : e
            }
            function X(e) {
                return e && (e.constructor === Object || void 0 === e.constructor)
            }
            function q(e, t) {
                if (e === t || e !== e && t !== t)
                    return !0;
                if (!e || !t)
                    return !1;
                if ("function" == typeof e.valueOf && "function" == typeof t.valueOf) {
                    if (e = e.valueOf(),
                    t = t.valueOf(),
                    e === t || e !== e && t !== t)
                        return !0;
                    if (!e || !t)
                        return !1
                }
                return !("function" != typeof e.equals || "function" != typeof t.equals || !e.equals(t))
            }
            function Z(e, t) {
                if (e === t)
                    return !0;
                if (!a(t) || void 0 !== e.size && void 0 !== t.size && e.size !== t.size || void 0 !== e.__hash && void 0 !== t.__hash && e.__hash !== t.__hash || o(e) !== o(t) || s(e) !== s(t) || l(e) !== l(t))
                    return !1;
                if (0 === e.size && 0 === t.size)
                    return !0;
                var r = !u(e);
                if (l(e)) {
                    var n = e.entries();
                    return t.every(function(e, t) {
                        var i = n.next().value;
                        return i && q(i[1], e) && (r || q(i[0], t))
                    }) && n.next().done
                }
                var i = !1;
                if (void 0 === e.size)
                    if (void 0 === t.size)
                        "function" == typeof e.cacheResult && e.cacheResult();
                    else {
                        i = !0;
                        var c = e;
                        e = t,
                        t = c
                    }
                var h = !0
                  , f = t.__iterate(function(t, n) {
                    if (r ? !e.has(t) : i ? !q(t, e.get(n, gr)) : !q(e.get(n, gr), t))
                        return h = !1,
                        !1
                });
                return h && e.size === f
            }
            function J(e, t) {
                if (!(this instanceof J))
                    return new J(e,t);
                if (this._value = e,
                this.size = void 0 === t ? 1 / 0 : Math.max(0, t),
                0 === this.size) {
                    if (Sr)
                        return Sr;
                    Sr = this
                }
            }
            function K(e, t) {
                if (!e)
                    throw new Error(t)
            }
            function $(e, t, r) {
                if (!(this instanceof $))
                    return new $(e,t,r);
                if (K(0 !== r, "Cannot step a Range by 0"),
                e = e || 0,
                void 0 === t && (t = 1 / 0),
                r = void 0 === r ? 1 : Math.abs(r),
                t < e && (r = -r),
                this._start = e,
                this._end = t,
                this._step = r,
                this.size = Math.max(0, Math.ceil((t - e) / r - 1) + 1),
                0 === this.size) {
                    if (Dr)
                        return Dr;
                    Dr = this
                }
            }
            function ee() {
                throw TypeError("Abstract")
            }
            function te() {}
            function re() {}
            function ne() {}
            function ie(e) {
                return e >>> 1 & 1073741824 | 3221225471 & e
            }
            function ae(e) {
                if (e === !1 || null === e || void 0 === e)
                    return 0;
                if ("function" == typeof e.valueOf && (e = e.valueOf(),
                e === !1 || null === e || void 0 === e))
                    return 0;
                if (e === !0)
                    return 1;
                var t = typeof e;
                if ("number" === t) {
                    if (e !== e || e === 1 / 0)
                        return 0;
                    var r = 0 | e;
                    for (r !== e && (r ^= 4294967295 * e); e > 4294967295; )
                        e /= 4294967295,
                        r ^= e;
                    return ie(r)
                }
                if ("string" === t)
                    return e.length > Pr ? oe(e) : se(e);
                if ("function" == typeof e.hashCode)
                    return e.hashCode();
                if ("object" === t)
                    return ue(e);
                if ("function" == typeof e.toString)
                    return se(e.toString());
                throw new Error("Value type " + t + " cannot be hashed.")
            }
            function oe(e) {
                var t = Ur[e];
                return void 0 === t && (t = se(e),
                Br === zr && (Br = 0,
                Ur = {}),
                Br++,
                Ur[e] = t),
                t
            }
            function se(e) {
                for (var t = 0, r = 0; r < e.length; r++)
                    t = 31 * t + e.charCodeAt(r) | 0;
                return ie(t)
            }
            function ue(e) {
                var t;
                if (Or && (t = Nr.get(e),
                void 0 !== t))
                    return t;
                if (t = e[Rr],
                void 0 !== t)
                    return t;
                if (!Cr) {
                    if (t = e.propertyIsEnumerable && e.propertyIsEnumerable[Rr],
                    void 0 !== t)
                        return t;
                    if (t = le(e),
                    void 0 !== t)
                        return t
                }
                if (t = ++jr,
                1073741824 & jr && (jr = 0),
                Or)
                    Nr.set(e, t);
                else {
                    if (void 0 !== Lr && Lr(e) === !1)
                        throw new Error("Non-extensible objects are not allowed as keys.");
                    if (Cr)
                        Object.defineProperty(e, Rr, {
                            enumerable: !1,
                            configurable: !1,
                            writable: !1,
                            value: t
                        });
                    else if (void 0 !== e.propertyIsEnumerable && e.propertyIsEnumerable === e.constructor.prototype.propertyIsEnumerable)
                        e.propertyIsEnumerable = function() {
                            return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments)
                        }
                        ,
                        e.propertyIsEnumerable[Rr] = t;
                    else {
                        if (void 0 === e.nodeType)
                            throw new Error("Unable to set a non-enumerable property on object.");
                        e[Rr] = t
                    }
                }
                return t
            }
            function le(e) {
                if (e && e.nodeType > 0)
                    switch (e.nodeType) {
                    case 1:
                        return e.uniqueID;
                    case 9:
                        return e.documentElement && e.documentElement.uniqueID
                    }
            }
            function ce(e) {
                K(e !== 1 / 0, "Cannot perform this action with an infinite size.")
            }
            function he(e) {
                return null === e || void 0 === e ? Ae() : fe(e) && !l(e) ? e : Ae().withMutations(function(t) {
                    var n = r(e);
                    ce(n.size),
                    n.forEach(function(e, r) {
                        return t.set(r, e)
                    })
                })
            }
            function fe(e) {
                return !(!e || !e[Vr])
            }
            function de(e, t) {
                this.ownerID = e,
                this.entries = t
            }
            function pe(e, t, r) {
                this.ownerID = e,
                this.bitmap = t,
                this.nodes = r
            }
            function me(e, t, r) {
                this.ownerID = e,
                this.count = t,
                this.nodes = r
            }
            function ge(e, t, r) {
                this.ownerID = e,
                this.keyHash = t,
                this.entries = r
            }
            function ve(e, t, r) {
                this.ownerID = e,
                this.keyHash = t,
                this.entry = r
            }
            function ye(e, t, r) {
                this._type = t,
                this._reverse = r,
                this._stack = e._root && we(e._root)
            }
            function Me(e, t) {
                return A(e, t[0], t[1])
            }
            function we(e, t) {
                return {
                    node: e,
                    index: 0,
                    __prev: t
                }
            }
            function xe(e, t, r, n) {
                var i = Object.create(kr);
                return i.size = e,
                i._root = t,
                i.__ownerID = r,
                i.__hash = n,
                i.__altered = !1,
                i
            }
            function Ae() {
                return Fr || (Fr = xe(0))
            }
            function be(e, t, r) {
                var n, i;
                if (e._root) {
                    var a = c(vr)
                      , o = c(yr);
                    if (n = Te(e._root, e.__ownerID, 0, void 0, t, r, a, o),
                    !o.value)
                        return e;
                    i = e.size + (a.value ? r === gr ? -1 : 1 : 0)
                } else {
                    if (r === gr)
                        return e;
                    i = 1,
                    n = new de(e.__ownerID,[[t, r]])
                }
                return e.__ownerID ? (e.size = i,
                e._root = n,
                e.__hash = void 0,
                e.__altered = !0,
                e) : n ? xe(i, n) : Ae()
            }
            function Te(e, t, r, n, i, a, o, s) {
                return e ? e.update(t, r, n, i, a, o, s) : a === gr ? e : (h(s),
                h(o),
                new ve(t,n,[i, a]))
            }
            function _e(e) {
                return e.constructor === ve || e.constructor === ge
            }
            function Ee(e, t, r, n, i) {
                if (e.keyHash === n)
                    return new ge(t,n,[e.entry, i]);
                var a, o = (0 === r ? e.keyHash : e.keyHash >>> r) & mr, s = (0 === r ? n : n >>> r) & mr, u = o === s ? [Ee(e, t, r + dr, n, i)] : (a = new ve(t,n,i),
                o < s ? [e, a] : [a, e]);
                return new pe(t,1 << o | 1 << s,u)
            }
            function Se(e, t, r, n) {
                e || (e = new f);
                for (var i = new ve(e,ae(r),[r, n]), a = 0; a < t.length; a++) {
                    var o = t[a];
                    i = i.update(e, 0, void 0, o[0], o[1])
                }
                return i
            }
            function De(e, t, r, n) {
                for (var i = 0, a = 0, o = new Array(r), s = 0, u = 1, l = t.length; s < l; s++,
                u <<= 1) {
                    var c = t[s];
                    void 0 !== c && s !== n && (i |= u,
                    o[a++] = c)
                }
                return new pe(e,i,o)
            }
            function Ne(e, t, r, n, i) {
                for (var a = 0, o = new Array(pr), s = 0; 0 !== r; s++,
                r >>>= 1)
                    o[s] = 1 & r ? t[a++] : void 0;
                return o[n] = i,
                new me(e,a + 1,o)
            }
            function Ie(e, t, n) {
                for (var i = [], o = 0; o < n.length; o++) {
                    var s = n[o]
                      , u = r(s);
                    a(s) || (u = u.map(function(e) {
                        return Q(e)
                    })),
                    i.push(u)
                }
                return Oe(e, t, i)
            }
            function Le(e, t, r) {
                return e && e.mergeDeep && a(t) ? e.mergeDeep(t) : q(e, t) ? e : t
            }
            function Ce(e) {
                return function(t, r, n) {
                    if (t && t.mergeDeepWith && a(r))
                        return t.mergeDeepWith(e, r);
                    var i = e(t, r, n);
                    return q(t, i) ? t : i
                }
            }
            function Oe(e, t, r) {
                return r = r.filter(function(e) {
                    return 0 !== e.size
                }),
                0 === r.length ? e : 0 !== e.size || e.__ownerID || 1 !== r.length ? e.withMutations(function(e) {
                    for (var n = t ? function(r, n) {
                        e.update(n, gr, function(e) {
                            return e === gr ? r : t(e, r, n)
                        })
                    }
                    : function(t, r) {
                        e.set(r, t)
                    }
                    , i = 0; i < r.length; i++)
                        r[i].forEach(n)
                }) : e.constructor(r[0])
            }
            function je(e, t, r, n) {
                var i = e === gr
                  , a = t.next();
                if (a.done) {
                    var o = i ? r : e
                      , s = n(o);
                    return s === o ? e : s
                }
                K(i || e && e.set, "invalid keyPath");
                var u = a.value
                  , l = i ? gr : e.get(u, gr)
                  , c = je(l, t, r, n);
                return c === l ? e : c === gr ? e.remove(u) : (i ? Ae() : e).set(u, c)
            }
            function Re(e) {
                return e -= e >> 1 & 1431655765,
                e = (858993459 & e) + (e >> 2 & 858993459),
                e = e + (e >> 4) & 252645135,
                e += e >> 8,
                e += e >> 16,
                127 & e
            }
            function Pe(e, t, r, n) {
                var i = n ? e : d(e);
                return i[t] = r,
                i
            }
            function ze(e, t, r, n) {
                var i = e.length + 1;
                if (n && t + 1 === i)
                    return e[t] = r,
                    e;
                for (var a = new Array(i), o = 0, s = 0; s < i; s++)
                    s === t ? (a[s] = r,
                    o = -1) : a[s] = e[s + o];
                return a
            }
            function Be(e, t, r) {
                var n = e.length - 1;
                if (r && t === n)
                    return e.pop(),
                    e;
                for (var i = new Array(n), a = 0, o = 0; o < n; o++)
                    o === t && (a = 1),
                    i[o] = e[o + a];
                return i
            }
            function Ue(e) {
                var t = Ye();
                if (null === e || void 0 === e)
                    return t;
                if (Ve(e))
                    return e;
                var r = n(e)
                  , i = r.size;
                return 0 === i ? t : (ce(i),
                i > 0 && i < pr ? Ge(0, i, dr, null, new ke(r.toArray())) : t.withMutations(function(e) {
                    e.setSize(i),
                    r.forEach(function(t, r) {
                        return e.set(r, t)
                    })
                }))
            }
            function Ve(e) {
                return !(!e || !e[Hr])
            }
            function ke(e, t) {
                this.array = e,
                this.ownerID = t
            }
            function Fe(e, t) {
                function r(e, t, r) {
                    return 0 === t ? n(e, r) : i(e, t, r)
                }
                function n(e, r) {
                    var n = r === s ? u && u.array : e && e.array
                      , i = r > a ? 0 : a - r
                      , l = o - r;
                    return l > pr && (l = pr),
                    function() {
                        if (i === l)
                            return qr;
                        var e = t ? --l : i++;
                        return n && n[e]
                    }
                }
                function i(e, n, i) {
                    var s, u = e && e.array, l = i > a ? 0 : a - i >> n, c = (o - i >> n) + 1;
                    return c > pr && (c = pr),
                    function() {
                        for (; ; ) {
                            if (s) {
                                var e = s();
                                if (e !== qr)
                                    return e;
                                s = null
                            }
                            if (l === c)
                                return qr;
                            var a = t ? --c : l++;
                            s = r(u && u[a], n - dr, i + (a << n))
                        }
                    }
                }
                var a = e._origin
                  , o = e._capacity
                  , s = Je(o)
                  , u = e._tail;
                return r(e._root, e._level, 0)
            }
            function Ge(e, t, r, n, i, a, o) {
                var s = Object.create(Wr);
                return s.size = t - e,
                s._origin = e,
                s._capacity = t,
                s._level = r,
                s._root = n,
                s._tail = i,
                s.__ownerID = a,
                s.__hash = o,
                s.__altered = !1,
                s
            }
            function Ye() {
                return Xr || (Xr = Ge(0, 0, dr))
            }
            function Qe(e, t, r) {
                if (t = m(e, t),
                t !== t)
                    return e;
                if (t >= e.size || t < 0)
                    return e.withMutations(function(e) {
                        t < 0 ? qe(e, t).set(0, r) : qe(e, 0, t + 1).set(t, r)
                    });
                t += e._origin;
                var n = e._tail
                  , i = e._root
                  , a = c(yr);
                return t >= Je(e._capacity) ? n = He(n, e.__ownerID, 0, t, r, a) : i = He(i, e.__ownerID, e._level, t, r, a),
                a.value ? e.__ownerID ? (e._root = i,
                e._tail = n,
                e.__hash = void 0,
                e.__altered = !0,
                e) : Ge(e._origin, e._capacity, e._level, i, n) : e
            }
            function He(e, t, r, n, i, a) {
                var o = n >>> r & mr
                  , s = e && o < e.array.length;
                if (!s && void 0 === i)
                    return e;
                var u;
                if (r > 0) {
                    var l = e && e.array[o]
                      , c = He(l, t, r - dr, n, i, a);
                    return c === l ? e : (u = We(e, t),
                    u.array[o] = c,
                    u)
                }
                return s && e.array[o] === i ? e : (h(a),
                u = We(e, t),
                void 0 === i && o === u.array.length - 1 ? u.array.pop() : u.array[o] = i,
                u)
            }
            function We(e, t) {
                return t && e && t === e.ownerID ? e : new ke(e ? e.array.slice() : [],t)
            }
            function Xe(e, t) {
                if (t >= Je(e._capacity))
                    return e._tail;
                if (t < 1 << e._level + dr) {
                    for (var r = e._root, n = e._level; r && n > 0; )
                        r = r.array[t >>> n & mr],
                        n -= dr;
                    return r
                }
            }
            function qe(e, t, r) {
                void 0 !== t && (t |= 0),
                void 0 !== r && (r |= 0);
                var n = e.__ownerID || new f
                  , i = e._origin
                  , a = e._capacity
                  , o = i + t
                  , s = void 0 === r ? a : r < 0 ? a + r : i + r;
                if (o === i && s === a)
                    return e;
                if (o >= s)
                    return e.clear();
                for (var u = e._level, l = e._root, c = 0; o + c < 0; )
                    l = new ke(l && l.array.length ? [void 0, l] : [],n),
                    u += dr,
                    c += 1 << u;
                c && (o += c,
                i += c,
                s += c,
                a += c);
                for (var h = Je(a), d = Je(s); d >= 1 << u + dr; )
                    l = new ke(l && l.array.length ? [l] : [],n),
                    u += dr;
                var p = e._tail
                  , m = d < h ? Xe(e, s - 1) : d > h ? new ke([],n) : p;
                if (p && d > h && o < a && p.array.length) {
                    l = We(l, n);
                    for (var g = l, v = u; v > dr; v -= dr) {
                        var y = h >>> v & mr;
                        g = g.array[y] = We(g.array[y], n)
                    }
                    g.array[h >>> dr & mr] = p
                }
                if (s < a && (m = m && m.removeAfter(n, 0, s)),
                o >= d)
                    o -= d,
                    s -= d,
                    u = dr,
                    l = null,
                    m = m && m.removeBefore(n, 0, o);
                else if (o > i || d < h) {
                    for (c = 0; l; ) {
                        var M = o >>> u & mr;
                        if (M !== d >>> u & mr)
                            break;
                        M && (c += (1 << u) * M),
                        u -= dr,
                        l = l.array[M]
                    }
                    l && o > i && (l = l.removeBefore(n, u, o - c)),
                    l && d < h && (l = l.removeAfter(n, u, d - c)),
                    c && (o -= c,
                    s -= c)
                }
                return e.__ownerID ? (e.size = s - o,
                e._origin = o,
                e._capacity = s,
                e._level = u,
                e._root = l,
                e._tail = m,
                e.__hash = void 0,
                e.__altered = !0,
                e) : Ge(o, s, u, l, m)
            }
            function Ze(e, t, r) {
                for (var i = [], o = 0, s = 0; s < r.length; s++) {
                    var u = r[s]
                      , l = n(u);
                    l.size > o && (o = l.size),
                    a(u) || (l = l.map(function(e) {
                        return Q(e)
                    })),
                    i.push(l)
                }
                return o > e.size && (e = e.setSize(o)),
                Oe(e, t, i)
            }
            function Je(e) {
                return e < pr ? 0 : e - 1 >>> dr << dr
            }
            function Ke(e) {
                return null === e || void 0 === e ? tt() : $e(e) ? e : tt().withMutations(function(t) {
                    var n = r(e);
                    ce(n.size),
                    n.forEach(function(e, r) {
                        return t.set(r, e)
                    })
                })
            }
            function $e(e) {
                return fe(e) && l(e)
            }
            function et(e, t, r, n) {
                var i = Object.create(Ke.prototype);
                return i.size = e ? e.size : 0,
                i._map = e,
                i._list = t,
                i.__ownerID = r,
                i.__hash = n,
                i
            }
            function tt() {
                return Zr || (Zr = et(Ae(), Ye()))
            }
            function rt(e, t, r) {
                var n, i, a = e._map, o = e._list, s = a.get(t), u = void 0 !== s;
                if (r === gr) {
                    if (!u)
                        return e;
                    o.size >= pr && o.size >= 2 * a.size ? (i = o.filter(function(e, t) {
                        return void 0 !== e && s !== t
                    }),
                    n = i.toKeyedSeq().map(function(e) {
                        return e[0]
                    }).flip().toMap(),
                    e.__ownerID && (n.__ownerID = i.__ownerID = e.__ownerID)) : (n = a.remove(t),
                    i = s === o.size - 1 ? o.pop() : o.set(s, void 0))
                } else if (u) {
                    if (r === o.get(s)[1])
                        return e;
                    n = a,
                    i = o.set(s, [t, r])
                } else
                    n = a.set(t, o.size),
                    i = o.set(o.size, [t, r]);
                return e.__ownerID ? (e.size = n.size,
                e._map = n,
                e._list = i,
                e.__hash = void 0,
                e) : et(n, i)
            }
            function nt(e, t) {
                this._iter = e,
                this._useKeys = t,
                this.size = e.size
            }
            function it(e) {
                this._iter = e,
                this.size = e.size
            }
            function at(e) {
                this._iter = e,
                this.size = e.size
            }
            function ot(e) {
                this._iter = e,
                this.size = e.size
            }
            function st(e) {
                var t = Dt(e);
                return t._iter = e,
                t.size = e.size,
                t.flip = function() {
                    return e
                }
                ,
                t.reverse = function() {
                    var t = e.reverse.apply(this);
                    return t.flip = function() {
                        return e.reverse()
                    }
                    ,
                    t
                }
                ,
                t.has = function(t) {
                    return e.includes(t)
                }
                ,
                t.includes = function(t) {
                    return e.has(t)
                }
                ,
                t.cacheResult = Nt,
                t.__iterateUncached = function(t, r) {
                    var n = this;
                    return e.__iterate(function(e, r) {
                        return t(r, e, n) !== !1
                    }, r)
                }
                ,
                t.__iteratorUncached = function(t, r) {
                    if (t === xr) {
                        var n = e.__iterator(t, r);
                        return new x(function() {
                            var e = n.next();
                            if (!e.done) {
                                var t = e.value[0];
                                e.value[0] = e.value[1],
                                e.value[1] = t
                            }
                            return e
                        }
                        )
                    }
                    return e.__iterator(t === wr ? Mr : wr, r)
                }
                ,
                t
            }
            function ut(e, t, r) {
                var n = Dt(e);
                return n.size = e.size,
                n.has = function(t) {
                    return e.has(t)
                }
                ,
                n.get = function(n, i) {
                    var a = e.get(n, gr);
                    return a === gr ? i : t.call(r, a, n, e)
                }
                ,
                n.__iterateUncached = function(n, i) {
                    var a = this;
                    return e.__iterate(function(e, i, o) {
                        return n(t.call(r, e, i, o), i, a) !== !1
                    }, i)
                }
                ,
                n.__iteratorUncached = function(n, i) {
                    var a = e.__iterator(xr, i);
                    return new x(function() {
                        var i = a.next();
                        if (i.done)
                            return i;
                        var o = i.value
                          , s = o[0];
                        return A(n, s, t.call(r, o[1], s, e), i)
                    }
                    )
                }
                ,
                n
            }
            function lt(e, t) {
                var r = Dt(e);
                return r._iter = e,
                r.size = e.size,
                r.reverse = function() {
                    return e
                }
                ,
                e.flip && (r.flip = function() {
                    var t = st(e);
                    return t.reverse = function() {
                        return e.flip()
                    }
                    ,
                    t
                }
                ),
                r.get = function(r, n) {
                    return e.get(t ? r : -1 - r, n)
                }
                ,
                r.has = function(r) {
                    return e.has(t ? r : -1 - r)
                }
                ,
                r.includes = function(t) {
                    return e.includes(t)
                }
                ,
                r.cacheResult = Nt,
                r.__iterate = function(t, r) {
                    var n = this;
                    return e.__iterate(function(e, r) {
                        return t(e, r, n)
                    }, !r)
                }
                ,
                r.__iterator = function(t, r) {
                    return e.__iterator(t, !r)
                }
                ,
                r
            }
            function ct(e, t, r, n) {
                var i = Dt(e);
                return n && (i.has = function(n) {
                    var i = e.get(n, gr);
                    return i !== gr && !!t.call(r, i, n, e)
                }
                ,
                i.get = function(n, i) {
                    var a = e.get(n, gr);
                    return a !== gr && t.call(r, a, n, e) ? a : i
                }
                ),
                i.__iterateUncached = function(i, a) {
                    var o = this
                      , s = 0;
                    return e.__iterate(function(e, a, u) {
                        if (t.call(r, e, a, u))
                            return s++,
                            i(e, n ? a : s - 1, o)
                    }, a),
                    s
                }
                ,
                i.__iteratorUncached = function(i, a) {
                    var o = e.__iterator(xr, a)
                      , s = 0;
                    return new x(function() {
                        for (; ; ) {
                            var a = o.next();
                            if (a.done)
                                return a;
                            var u = a.value
                              , l = u[0]
                              , c = u[1];
                            if (t.call(r, c, l, e))
                                return A(i, n ? l : s++, c, a)
                        }
                    }
                    )
                }
                ,
                i
            }
            function ht(e, t, r) {
                var n = he().asMutable();
                return e.__iterate(function(i, a) {
                    n.update(t.call(r, i, a, e), 0, function(e) {
                        return e + 1
                    })
                }),
                n.asImmutable()
            }
            function ft(e, t, r) {
                var n = o(e)
                  , i = (l(e) ? Ke() : he()).asMutable();
                e.__iterate(function(a, o) {
                    i.update(t.call(r, a, o, e), function(e) {
                        return e = e || [],
                        e.push(n ? [o, a] : a),
                        e
                    })
                });
                var a = St(e);
                return i.map(function(t) {
                    return Tt(e, a(t))
                })
            }
            function dt(e, t, r, n) {
                var i = e.size;
                if (void 0 !== t && (t |= 0),
                void 0 !== r && (r === 1 / 0 ? r = i : r |= 0),
                v(t, r, i))
                    return e;
                var a = y(t, i)
                  , o = M(r, i);
                if (a !== a || o !== o)
                    return dt(e.toSeq().cacheResult(), t, r, n);
                var s, u = o - a;
                u === u && (s = u < 0 ? 0 : u);
                var l = Dt(e);
                return l.size = 0 === s ? s : e.size && s || void 0,
                !n && z(e) && s >= 0 && (l.get = function(t, r) {
                    return t = m(this, t),
                    t >= 0 && t < s ? e.get(t + a, r) : r
                }
                ),
                l.__iterateUncached = function(t, r) {
                    var i = this;
                    if (0 === s)
                        return 0;
                    if (r)
                        return this.cacheResult().__iterate(t, r);
                    var o = 0
                      , u = !0
                      , l = 0;
                    return e.__iterate(function(e, r) {
                        if (!u || !(u = o++ < a))
                            return l++,
                            t(e, n ? r : l - 1, i) !== !1 && l !== s
                    }),
                    l
                }
                ,
                l.__iteratorUncached = function(t, r) {
                    if (0 !== s && r)
                        return this.cacheResult().__iterator(t, r);
                    var i = 0 !== s && e.__iterator(t, r)
                      , o = 0
                      , u = 0;
                    return new x(function() {
                        for (; o++ < a; )
                            i.next();
                        if (++u > s)
                            return b();
                        var e = i.next();
                        return n || t === wr ? e : t === Mr ? A(t, u - 1, void 0, e) : A(t, u - 1, e.value[1], e)
                    }
                    )
                }
                ,
                l
            }
            function pt(e, t, r) {
                var n = Dt(e);
                return n.__iterateUncached = function(n, i) {
                    var a = this;
                    if (i)
                        return this.cacheResult().__iterate(n, i);
                    var o = 0;
                    return e.__iterate(function(e, i, s) {
                        return t.call(r, e, i, s) && ++o && n(e, i, a)
                    }),
                    o
                }
                ,
                n.__iteratorUncached = function(n, i) {
                    var a = this;
                    if (i)
                        return this.cacheResult().__iterator(n, i);
                    var o = e.__iterator(xr, i)
                      , s = !0;
                    return new x(function() {
                        if (!s)
                            return b();
                        var e = o.next();
                        if (e.done)
                            return e;
                        var i = e.value
                          , u = i[0]
                          , l = i[1];
                        return t.call(r, l, u, a) ? n === xr ? e : A(n, u, l, e) : (s = !1,
                        b())
                    }
                    )
                }
                ,
                n
            }
            function mt(e, t, r, n) {
                var i = Dt(e);
                return i.__iterateUncached = function(i, a) {
                    var o = this;
                    if (a)
                        return this.cacheResult().__iterate(i, a);
                    var s = !0
                      , u = 0;
                    return e.__iterate(function(e, a, l) {
                        if (!s || !(s = t.call(r, e, a, l)))
                            return u++,
                            i(e, n ? a : u - 1, o)
                    }),
                    u
                }
                ,
                i.__iteratorUncached = function(i, a) {
                    var o = this;
                    if (a)
                        return this.cacheResult().__iterator(i, a);
                    var s = e.__iterator(xr, a)
                      , u = !0
                      , l = 0;
                    return new x(function() {
                        var e, a, c;
                        do {
                            if (e = s.next(),
                            e.done)
                                return n || i === wr ? e : i === Mr ? A(i, l++, void 0, e) : A(i, l++, e.value[1], e);
                            var h = e.value;
                            a = h[0],
                            c = h[1],
                            u && (u = t.call(r, c, a, o))
                        } while (u);return i === xr ? e : A(i, a, c, e)
                    }
                    )
                }
                ,
                i
            }
            function gt(e, t) {
                var n = o(e)
                  , i = [e].concat(t).map(function(e) {
                    return a(e) ? n && (e = r(e)) : e = n ? U(e) : V(Array.isArray(e) ? e : [e]),
                    e
                }).filter(function(e) {
                    return 0 !== e.size
                });
                if (0 === i.length)
                    return e;
                if (1 === i.length) {
                    var u = i[0];
                    if (u === e || n && o(u) || s(e) && s(u))
                        return u
                }
                var l = new O(i);
                return n ? l = l.toKeyedSeq() : s(e) || (l = l.toSetSeq()),
                l = l.flatten(!0),
                l.size = i.reduce(function(e, t) {
                    if (void 0 !== e) {
                        var r = t.size;
                        if (void 0 !== r)
                            return e + r
                    }
                }, 0),
                l
            }
            function vt(e, t, r) {
                var n = Dt(e);
                return n.__iterateUncached = function(n, i) {
                    function o(e, l) {
                        var c = this;
                        e.__iterate(function(e, i) {
                            return (!t || l < t) && a(e) ? o(e, l + 1) : n(e, r ? i : s++, c) === !1 && (u = !0),
                            !u
                        }, i)
                    }
                    var s = 0
                      , u = !1;
                    return o(e, 0),
                    s
                }
                ,
                n.__iteratorUncached = function(n, i) {
                    var o = e.__iterator(n, i)
                      , s = []
                      , u = 0;
                    return new x(function() {
                        for (; o; ) {
                            var e = o.next();
                            if (e.done === !1) {
                                var l = e.value;
                                if (n === xr && (l = l[1]),
                                t && !(s.length < t) || !a(l))
                                    return r ? e : A(n, u++, l, e);
                                s.push(o),
                                o = l.__iterator(n, i)
                            } else
                                o = s.pop()
                        }
                        return b()
                    }
                    )
                }
                ,
                n
            }
            function yt(e, t, r) {
                var n = St(e);
                return e.toSeq().map(function(i, a) {
                    return n(t.call(r, i, a, e))
                }).flatten(!0)
            }
            function Mt(e, t) {
                var r = Dt(e);
                return r.size = e.size && 2 * e.size - 1,
                r.__iterateUncached = function(r, n) {
                    var i = this
                      , a = 0;
                    return e.__iterate(function(e, n) {
                        return (!a || r(t, a++, i) !== !1) && r(e, a++, i) !== !1
                    }, n),
                    a
                }
                ,
                r.__iteratorUncached = function(r, n) {
                    var i, a = e.__iterator(wr, n), o = 0;
                    return new x(function() {
                        return (!i || o % 2) && (i = a.next(),
                        i.done) ? i : o % 2 ? A(r, o++, t) : A(r, o++, i.value, i)
                    }
                    )
                }
                ,
                r
            }
            function wt(e, t, r) {
                t || (t = It);
                var n = o(e)
                  , i = 0
                  , a = e.toSeq().map(function(t, n) {
                    return [n, t, i++, r ? r(t, n, e) : t]
                }).toArray();
                return a.sort(function(e, r) {
                    return t(e[3], r[3]) || e[2] - r[2]
                }).forEach(n ? function(e, t) {
                    a[t].length = 2
                }
                : function(e, t) {
                    a[t] = e[1]
                }
                ),
                n ? I(a) : s(e) ? L(a) : C(a)
            }
            function xt(e, t, r) {
                if (t || (t = It),
                r) {
                    var n = e.toSeq().map(function(t, n) {
                        return [t, r(t, n, e)]
                    }).reduce(function(e, r) {
                        return At(t, e[1], r[1]) ? r : e
                    });
                    return n && n[0]
                }
                return e.reduce(function(e, r) {
                    return At(t, e, r) ? r : e
                })
            }
            function At(e, t, r) {
                var n = e(r, t);
                return 0 === n && r !== t && (void 0 === r || null === r || r !== r) || n > 0
            }
            function bt(e, r, n) {
                var i = Dt(e);
                return i.size = new O(n).map(function(e) {
                    return e.size
                }).min(),
                i.__iterate = function(e, t) {
                    for (var r, n = this.__iterator(wr, t), i = 0; !(r = n.next()).done && e(r.value, i++, this) !== !1; )
                        ;
                    return i
                }
                ,
                i.__iteratorUncached = function(e, i) {
                    var a = n.map(function(e) {
                        return e = t(e),
                        E(i ? e.reverse() : e)
                    })
                      , o = 0
                      , s = !1;
                    return new x(function() {
                        var t;
                        return s || (t = a.map(function(e) {
                            return e.next()
                        }),
                        s = t.some(function(e) {
                            return e.done
                        })),
                        s ? b() : A(e, o++, r.apply(null, t.map(function(e) {
                            return e.value
                        })))
                    }
                    )
                }
                ,
                i
            }
            function Tt(e, t) {
                return z(e) ? t : e.constructor(t)
            }
            function _t(e) {
                if (e !== Object(e))
                    throw new TypeError("Expected [K, V] tuple: " + e)
            }
            function Et(e) {
                return ce(e.size),
                p(e)
            }
            function St(e) {
                return o(e) ? r : s(e) ? n : i
            }
            function Dt(e) {
                return Object.create((o(e) ? I : s(e) ? L : C).prototype)
            }
            function Nt() {
                return this._iter.cacheResult ? (this._iter.cacheResult(),
                this.size = this._iter.size,
                this) : N.prototype.cacheResult.call(this)
            }
            function It(e, t) {
                return e > t ? 1 : e < t ? -1 : 0
            }
            function Lt(e) {
                var r = E(e);
                if (!r) {
                    if (!D(e))
                        throw new TypeError("Expected iterable or array-like: " + e);
                    r = E(t(e))
                }
                return r
            }
            function Ct(e, t) {
                var r, n = function(a) {
                    if (a instanceof n)
                        return a;
                    if (!(this instanceof n))
                        return new n(a);
                    if (!r) {
                        r = !0;
                        var o = Object.keys(e);
                        Rt(i, o),
                        i.size = o.length,
                        i._name = t,
                        i._keys = o,
                        i._defaultValues = e
                    }
                    this._map = he(a)
                }, i = n.prototype = Object.create(Jr);
                return i.constructor = n,
                n
            }
            function Ot(e, t, r) {
                var n = Object.create(Object.getPrototypeOf(e));
                return n._map = t,
                n.__ownerID = r,
                n
            }
            function jt(e) {
                return e._name || e.constructor.name || "Record"
            }
            function Rt(e, t) {
                try {
                    t.forEach(Pt.bind(void 0, e))
                } catch (e) {}
            }
            function Pt(e, t) {
                Object.defineProperty(e, t, {
                    get: function() {
                        return this.get(t)
                    },
                    set: function(e) {
                        K(this.__ownerID, "Cannot set on an immutable record."),
                        this.set(t, e)
                    }
                })
            }
            function zt(e) {
                return null === e || void 0 === e ? kt() : Bt(e) && !l(e) ? e : kt().withMutations(function(t) {
                    var r = i(e);
                    ce(r.size),
                    r.forEach(function(e) {
                        return t.add(e)
                    })
                })
            }
            function Bt(e) {
                return !(!e || !e[Kr])
            }
            function Ut(e, t) {
                return e.__ownerID ? (e.size = t.size,
                e._map = t,
                e) : t === e._map ? e : 0 === t.size ? e.__empty() : e.__make(t)
            }
            function Vt(e, t) {
                var r = Object.create($r);
                return r.size = e ? e.size : 0,
                r._map = e,
                r.__ownerID = t,
                r
            }
            function kt() {
                return en || (en = Vt(Ae()))
            }
            function Ft(e) {
                return null === e || void 0 === e ? Qt() : Gt(e) ? e : Qt().withMutations(function(t) {
                    var r = i(e);
                    ce(r.size),
                    r.forEach(function(e) {
                        return t.add(e)
                    })
                })
            }
            function Gt(e) {
                return Bt(e) && l(e)
            }
            function Yt(e, t) {
                var r = Object.create(tn);
                return r.size = e ? e.size : 0,
                r._map = e,
                r.__ownerID = t,
                r
            }
            function Qt() {
                return rn || (rn = Yt(tt()))
            }
            function Ht(e) {
                return null === e || void 0 === e ? qt() : Wt(e) ? e : qt().unshiftAll(e)
            }
            function Wt(e) {
                return !(!e || !e[nn])
            }
            function Xt(e, t, r, n) {
                var i = Object.create(an);
                return i.size = e,
                i._head = t,
                i.__ownerID = r,
                i.__hash = n,
                i.__altered = !1,
                i
            }
            function qt() {
                return on || (on = Xt(0))
            }
            function Zt(e, t) {
                var r = function(r) {
                    e.prototype[r] = t[r]
                };
                return Object.keys(t).forEach(r),
                Object.getOwnPropertySymbols && Object.getOwnPropertySymbols(t).forEach(r),
                e
            }
            function Jt(e, t) {
                return t
            }
            function Kt(e, t) {
                return [t, e]
            }
            function $t(e) {
                return function() {
                    return !e.apply(this, arguments)
                }
            }
            function er(e) {
                return function() {
                    return -e.apply(this, arguments)
                }
            }
            function tr(e) {
                return "string" == typeof e ? JSON.stringify(e) : String(e)
            }
            function rr() {
                return d(arguments)
            }
            function nr(e, t) {
                return e < t ? 1 : e > t ? -1 : 0
            }
            function ir(e) {
                if (e.size === 1 / 0)
                    return 0;
                var t = l(e)
                  , r = o(e)
                  , n = t ? 1 : 0
                  , i = e.__iterate(r ? t ? function(e, t) {
                    n = 31 * n + or(ae(e), ae(t)) | 0
                }
                : function(e, t) {
                    n = n + or(ae(e), ae(t)) | 0
                }
                : t ? function(e) {
                    n = 31 * n + ae(e) | 0
                }
                : function(e) {
                    n = n + ae(e) | 0
                }
                );
                return ar(i, n)
            }
            function ar(e, t) {
                return t = Ir(t, 3432918353),
                t = Ir(t << 15 | t >>> -15, 461845907),
                t = Ir(t << 13 | t >>> -13, 5),
                t = (t + 3864292196 | 0) ^ e,
                t = Ir(t ^ t >>> 16, 2246822507),
                t = Ir(t ^ t >>> 13, 3266489909),
                t = ie(t ^ t >>> 16)
            }
            function or(e, t) {
                return e ^ t + 2654435769 + (e << 6) + (e >> 2) | 0
            }
            var sr = Array.prototype.slice;
            e(r, t),
            e(n, t),
            e(i, t),
            t.isIterable = a,
            t.isKeyed = o,
            t.isIndexed = s,
            t.isAssociative = u,
            t.isOrdered = l,
            t.Keyed = r,
            t.Indexed = n,
            t.Set = i;
            var ur = "@@__IMMUTABLE_ITERABLE__@@"
              , lr = "@@__IMMUTABLE_KEYED__@@"
              , cr = "@@__IMMUTABLE_INDEXED__@@"
              , hr = "@@__IMMUTABLE_ORDERED__@@"
              , fr = "delete"
              , dr = 5
              , pr = 1 << dr
              , mr = pr - 1
              , gr = {}
              , vr = {
                value: !1
            }
              , yr = {
                value: !1
            }
              , Mr = 0
              , wr = 1
              , xr = 2
              , Ar = "function" == typeof Symbol && Symbol.iterator
              , br = "@@iterator"
              , Tr = Ar || br;
            x.prototype.toString = function() {
                return "[Iterator]"
            }
            ,
            x.KEYS = Mr,
            x.VALUES = wr,
            x.ENTRIES = xr,
            x.prototype.inspect = x.prototype.toSource = function() {
                return this.toString()
            }
            ,
            x.prototype[Tr] = function() {
                return this
            }
            ,
            e(N, t),
            N.of = function() {
                return N(arguments)
            }
            ,
            N.prototype.toSeq = function() {
                return this
            }
            ,
            N.prototype.toString = function() {
                return this.__toString("Seq {", "}")
            }
            ,
            N.prototype.cacheResult = function() {
                return !this._cache && this.__iterateUncached && (this._cache = this.entrySeq().toArray(),
                this.size = this._cache.length),
                this
            }
            ,
            N.prototype.__iterate = function(e, t) {
                return G(this, e, t, !0)
            }
            ,
            N.prototype.__iterator = function(e, t) {
                return Y(this, e, t, !0)
            }
            ,
            e(I, N),
            I.prototype.toKeyedSeq = function() {
                return this
            }
            ,
            e(L, N),
            L.of = function() {
                return L(arguments)
            }
            ,
            L.prototype.toIndexedSeq = function() {
                return this
            }
            ,
            L.prototype.toString = function() {
                return this.__toString("Seq [", "]")
            }
            ,
            L.prototype.__iterate = function(e, t) {
                return G(this, e, t, !1)
            }
            ,
            L.prototype.__iterator = function(e, t) {
                return Y(this, e, t, !1)
            }
            ,
            e(C, N),
            C.of = function() {
                return C(arguments)
            }
            ,
            C.prototype.toSetSeq = function() {
                return this
            }
            ,
            N.isSeq = z,
            N.Keyed = I,
            N.Set = C,
            N.Indexed = L;
            var _r = "@@__IMMUTABLE_SEQ__@@";
            N.prototype[_r] = !0,
            e(O, L),
            O.prototype.get = function(e, t) {
                return this.has(e) ? this._array[m(this, e)] : t
            }
            ,
            O.prototype.__iterate = function(e, t) {
                for (var r = this._array, n = r.length - 1, i = 0; i <= n; i++)
                    if (e(r[t ? n - i : i], i, this) === !1)
                        return i + 1;
                return i
            }
            ,
            O.prototype.__iterator = function(e, t) {
                var r = this._array
                  , n = r.length - 1
                  , i = 0;
                return new x(function() {
                    return i > n ? b() : A(e, i, r[t ? n - i++ : i++])
                }
                )
            }
            ,
            e(j, I),
            j.prototype.get = function(e, t) {
                return void 0 === t || this.has(e) ? this._object[e] : t
            }
            ,
            j.prototype.has = function(e) {
                return this._object.hasOwnProperty(e)
            }
            ,
            j.prototype.__iterate = function(e, t) {
                for (var r = this._object, n = this._keys, i = n.length - 1, a = 0; a <= i; a++) {
                    var o = n[t ? i - a : a];
                    if (e(r[o], o, this) === !1)
                        return a + 1
                }
                return a
            }
            ,
            j.prototype.__iterator = function(e, t) {
                var r = this._object
                  , n = this._keys
                  , i = n.length - 1
                  , a = 0;
                return new x(function() {
                    var o = n[t ? i - a : a];
                    return a++ > i ? b() : A(e, o, r[o])
                }
                )
            }
            ,
            j.prototype[hr] = !0,
            e(R, L),
            R.prototype.__iterateUncached = function(e, t) {
                if (t)
                    return this.cacheResult().__iterate(e, t);
                var r = this._iterable
                  , n = E(r)
                  , i = 0;
                if (_(n))
                    for (var a; !(a = n.next()).done && e(a.value, i++, this) !== !1; )
                        ;
                return i
            }
            ,
            R.prototype.__iteratorUncached = function(e, t) {
                if (t)
                    return this.cacheResult().__iterator(e, t);
                var r = this._iterable
                  , n = E(r);
                if (!_(n))
                    return new x(b);
                var i = 0;
                return new x(function() {
                    var t = n.next();
                    return t.done ? t : A(e, i++, t.value)
                }
                )
            }
            ,
            e(P, L),
            P.prototype.__iterateUncached = function(e, t) {
                if (t)
                    return this.cacheResult().__iterate(e, t);
                for (var r = this._iterator, n = this._iteratorCache, i = 0; i < n.length; )
                    if (e(n[i], i++, this) === !1)
                        return i;
                for (var a; !(a = r.next()).done; ) {
                    var o = a.value;
                    if (n[i] = o,
                    e(o, i++, this) === !1)
                        break
                }
                return i
            }
            ,
            P.prototype.__iteratorUncached = function(e, t) {
                if (t)
                    return this.cacheResult().__iterator(e, t);
                var r = this._iterator
                  , n = this._iteratorCache
                  , i = 0;
                return new x(function() {
                    if (i >= n.length) {
                        var t = r.next();
                        if (t.done)
                            return t;
                        n[i] = t.value
                    }
                    return A(e, i, n[i++])
                }
                )
            }
            ;
            var Er;
            e(J, L),
            J.prototype.toString = function() {
                return 0 === this.size ? "Repeat []" : "Repeat [ " + this._value + " " + this.size + " times ]"
            }
            ,
            J.prototype.get = function(e, t) {
                return this.has(e) ? this._value : t
            }
            ,
            J.prototype.includes = function(e) {
                return q(this._value, e)
            }
            ,
            J.prototype.slice = function(e, t) {
                var r = this.size;
                return v(e, t, r) ? this : new J(this._value,M(t, r) - y(e, r))
            }
            ,
            J.prototype.reverse = function() {
                return this
            }
            ,
            J.prototype.indexOf = function(e) {
                return q(this._value, e) ? 0 : -1
            }
            ,
            J.prototype.lastIndexOf = function(e) {
                return q(this._value, e) ? this.size : -1
            }
            ,
            J.prototype.__iterate = function(e, t) {
                for (var r = 0; r < this.size; r++)
                    if (e(this._value, r, this) === !1)
                        return r + 1;
                return r
            }
            ,
            J.prototype.__iterator = function(e, t) {
                var r = this
                  , n = 0;
                return new x(function() {
                    return n < r.size ? A(e, n++, r._value) : b()
                }
                )
            }
            ,
            J.prototype.equals = function(e) {
                return e instanceof J ? q(this._value, e._value) : Z(e)
            }
            ;
            var Sr;
            e($, L),
            $.prototype.toString = function() {
                return 0 === this.size ? "Range []" : "Range [ " + this._start + "..." + this._end + (1 !== this._step ? " by " + this._step : "") + " ]"
            }
            ,
            $.prototype.get = function(e, t) {
                return this.has(e) ? this._start + m(this, e) * this._step : t
            }
            ,
            $.prototype.includes = function(e) {
                var t = (e - this._start) / this._step;
                return t >= 0 && t < this.size && t === Math.floor(t)
            }
            ,
            $.prototype.slice = function(e, t) {
                return v(e, t, this.size) ? this : (e = y(e, this.size),
                t = M(t, this.size),
                t <= e ? new $(0,0) : new $(this.get(e, this._end),this.get(t, this._end),this._step))
            }
            ,
            $.prototype.indexOf = function(e) {
                var t = e - this._start;
                if (t % this._step === 0) {
                    var r = t / this._step;
                    if (r >= 0 && r < this.size)
                        return r
                }
                return -1
            }
            ,
            $.prototype.lastIndexOf = function(e) {
                return this.indexOf(e)
            }
            ,
            $.prototype.__iterate = function(e, t) {
                for (var r = this.size - 1, n = this._step, i = t ? this._start + r * n : this._start, a = 0; a <= r; a++) {
                    if (e(i, a, this) === !1)
                        return a + 1;
                    i += t ? -n : n
                }
                return a
            }
            ,
            $.prototype.__iterator = function(e, t) {
                var r = this.size - 1
                  , n = this._step
                  , i = t ? this._start + r * n : this._start
                  , a = 0;
                return new x(function() {
                    var o = i;
                    return i += t ? -n : n,
                    a > r ? b() : A(e, a++, o)
                }
                )
            }
            ,
            $.prototype.equals = function(e) {
                return e instanceof $ ? this._start === e._start && this._end === e._end && this._step === e._step : Z(this, e)
            }
            ;
            var Dr;
            e(ee, t),
            e(te, ee),
            e(re, ee),
            e(ne, ee),
            ee.Keyed = te,
            ee.Indexed = re,
            ee.Set = ne;
            var Nr, Ir = "function" == typeof Math.imul && Math.imul(4294967295, 2) === -2 ? Math.imul : function(e, t) {
                e |= 0,
                t |= 0;
                var r = 65535 & e
                  , n = 65535 & t;
                return r * n + ((e >>> 16) * n + r * (t >>> 16) << 16 >>> 0) | 0
            }
            , Lr = Object.isExtensible, Cr = function() {
                try {
                    return Object.defineProperty({}, "@", {}),
                    !0
                } catch (e) {
                    return !1
                }
            }(), Or = "function" == typeof WeakMap;
            Or && (Nr = new WeakMap);
            var jr = 0
              , Rr = "__immutablehash__";
            "function" == typeof Symbol && (Rr = Symbol(Rr));
            var Pr = 16
              , zr = 255
              , Br = 0
              , Ur = {};
            e(he, te),
            he.of = function() {
                var e = sr.call(arguments, 0);
                return Ae().withMutations(function(t) {
                    for (var r = 0; r < e.length; r += 2) {
                        if (r + 1 >= e.length)
                            throw new Error("Missing value for key: " + e[r]);
                        t.set(e[r], e[r + 1])
                    }
                })
            }
            ,
            he.prototype.toString = function() {
                return this.__toString("Map {", "}")
            }
            ,
            he.prototype.get = function(e, t) {
                return this._root ? this._root.get(0, void 0, e, t) : t
            }
            ,
            he.prototype.set = function(e, t) {
                return be(this, e, t)
            }
            ,
            he.prototype.setIn = function(e, t) {
                return this.updateIn(e, gr, function() {
                    return t
                })
            }
            ,
            he.prototype.remove = function(e) {
                return be(this, e, gr)
            }
            ,
            he.prototype.deleteIn = function(e) {
                return this.updateIn(e, function() {
                    return gr
                })
            }
            ,
            he.prototype.update = function(e, t, r) {
                return 1 === arguments.length ? e(this) : this.updateIn([e], t, r)
            }
            ,
            he.prototype.updateIn = function(e, t, r) {
                r || (r = t,
                t = void 0);
                var n = je(this, Lt(e), t, r);
                return n === gr ? void 0 : n
            }
            ,
            he.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = 0,
                this._root = null,
                this.__hash = void 0,
                this.__altered = !0,
                this) : Ae()
            }
            ,
            he.prototype.merge = function() {
                return Ie(this, void 0, arguments)
            }
            ,
            he.prototype.mergeWith = function(e) {
                var t = sr.call(arguments, 1);
                return Ie(this, e, t)
            }
            ,
            he.prototype.mergeIn = function(e) {
                var t = sr.call(arguments, 1);
                return this.updateIn(e, Ae(), function(e) {
                    return "function" == typeof e.merge ? e.merge.apply(e, t) : t[t.length - 1]
                })
            }
            ,
            he.prototype.mergeDeep = function() {
                return Ie(this, Le, arguments)
            }
            ,
            he.prototype.mergeDeepWith = function(e) {
                var t = sr.call(arguments, 1);
                return Ie(this, Ce(e), t)
            }
            ,
            he.prototype.mergeDeepIn = function(e) {
                var t = sr.call(arguments, 1);
                return this.updateIn(e, Ae(), function(e) {
                    return "function" == typeof e.mergeDeep ? e.mergeDeep.apply(e, t) : t[t.length - 1]
                })
            }
            ,
            he.prototype.sort = function(e) {
                return Ke(wt(this, e))
            }
            ,
            he.prototype.sortBy = function(e, t) {
                return Ke(wt(this, t, e))
            }
            ,
            he.prototype.withMutations = function(e) {
                var t = this.asMutable();
                return e(t),
                t.wasAltered() ? t.__ensureOwner(this.__ownerID) : this
            }
            ,
            he.prototype.asMutable = function() {
                return this.__ownerID ? this : this.__ensureOwner(new f)
            }
            ,
            he.prototype.asImmutable = function() {
                return this.__ensureOwner()
            }
            ,
            he.prototype.wasAltered = function() {
                return this.__altered
            }
            ,
            he.prototype.__iterator = function(e, t) {
                return new ye(this,e,t)
            }
            ,
            he.prototype.__iterate = function(e, t) {
                var r = this
                  , n = 0;
                return this._root && this._root.iterate(function(t) {
                    return n++,
                    e(t[1], t[0], r)
                }, t),
                n
            }
            ,
            he.prototype.__ensureOwner = function(e) {
                return e === this.__ownerID ? this : e ? xe(this.size, this._root, e, this.__hash) : (this.__ownerID = e,
                this.__altered = !1,
                this)
            }
            ,
            he.isMap = fe;
            var Vr = "@@__IMMUTABLE_MAP__@@"
              , kr = he.prototype;
            kr[Vr] = !0,
            kr[fr] = kr.remove,
            kr.removeIn = kr.deleteIn,
            de.prototype.get = function(e, t, r, n) {
                for (var i = this.entries, a = 0, o = i.length; a < o; a++)
                    if (q(r, i[a][0]))
                        return i[a][1];
                return n
            }
            ,
            de.prototype.update = function(e, t, r, n, i, a, o) {
                for (var s = i === gr, u = this.entries, l = 0, c = u.length; l < c && !q(n, u[l][0]); l++)
                    ;
                var f = l < c;
                if (f ? u[l][1] === i : s)
                    return this;
                if (h(o),
                (s || !f) && h(a),
                !s || 1 !== u.length) {
                    if (!f && !s && u.length >= Gr)
                        return Se(e, u, n, i);
                    var p = e && e === this.ownerID
                      , m = p ? u : d(u);
                    return f ? s ? l === c - 1 ? m.pop() : m[l] = m.pop() : m[l] = [n, i] : m.push([n, i]),
                    p ? (this.entries = m,
                    this) : new de(e,m)
                }
            }
            ,
            pe.prototype.get = function(e, t, r, n) {
                void 0 === t && (t = ae(r));
                var i = 1 << ((0 === e ? t : t >>> e) & mr)
                  , a = this.bitmap;
                return 0 === (a & i) ? n : this.nodes[Re(a & i - 1)].get(e + dr, t, r, n)
            }
            ,
            pe.prototype.update = function(e, t, r, n, i, a, o) {
                void 0 === r && (r = ae(n));
                var s = (0 === t ? r : r >>> t) & mr
                  , u = 1 << s
                  , l = this.bitmap
                  , c = 0 !== (l & u);
                if (!c && i === gr)
                    return this;
                var h = Re(l & u - 1)
                  , f = this.nodes
                  , d = c ? f[h] : void 0
                  , p = Te(d, e, t + dr, r, n, i, a, o);
                if (p === d)
                    return this;
                if (!c && p && f.length >= Yr)
                    return Ne(e, f, l, s, p);
                if (c && !p && 2 === f.length && _e(f[1 ^ h]))
                    return f[1 ^ h];
                if (c && p && 1 === f.length && _e(p))
                    return p;
                var m = e && e === this.ownerID
                  , g = c ? p ? l : l ^ u : l | u
                  , v = c ? p ? Pe(f, h, p, m) : Be(f, h, m) : ze(f, h, p, m);
                return m ? (this.bitmap = g,
                this.nodes = v,
                this) : new pe(e,g,v)
            }
            ,
            me.prototype.get = function(e, t, r, n) {
                void 0 === t && (t = ae(r));
                var i = (0 === e ? t : t >>> e) & mr
                  , a = this.nodes[i];
                return a ? a.get(e + dr, t, r, n) : n
            }
            ,
            me.prototype.update = function(e, t, r, n, i, a, o) {
                void 0 === r && (r = ae(n));
                var s = (0 === t ? r : r >>> t) & mr
                  , u = i === gr
                  , l = this.nodes
                  , c = l[s];
                if (u && !c)
                    return this;
                var h = Te(c, e, t + dr, r, n, i, a, o);
                if (h === c)
                    return this;
                var f = this.count;
                if (c) {
                    if (!h && (f--,
                    f < Qr))
                        return De(e, l, f, s)
                } else
                    f++;
                var d = e && e === this.ownerID
                  , p = Pe(l, s, h, d);
                return d ? (this.count = f,
                this.nodes = p,
                this) : new me(e,f,p)
            }
            ,
            ge.prototype.get = function(e, t, r, n) {
                for (var i = this.entries, a = 0, o = i.length; a < o; a++)
                    if (q(r, i[a][0]))
                        return i[a][1];
                return n
            }
            ,
            ge.prototype.update = function(e, t, r, n, i, a, o) {
                void 0 === r && (r = ae(n));
                var s = i === gr;
                if (r !== this.keyHash)
                    return s ? this : (h(o),
                    h(a),
                    Ee(this, e, t, r, [n, i]));
                for (var u = this.entries, l = 0, c = u.length; l < c && !q(n, u[l][0]); l++)
                    ;
                var f = l < c;
                if (f ? u[l][1] === i : s)
                    return this;
                if (h(o),
                (s || !f) && h(a),
                s && 2 === c)
                    return new ve(e,this.keyHash,u[1 ^ l]);
                var p = e && e === this.ownerID
                  , m = p ? u : d(u);
                return f ? s ? l === c - 1 ? m.pop() : m[l] = m.pop() : m[l] = [n, i] : m.push([n, i]),
                p ? (this.entries = m,
                this) : new ge(e,this.keyHash,m)
            }
            ,
            ve.prototype.get = function(e, t, r, n) {
                return q(r, this.entry[0]) ? this.entry[1] : n
            }
            ,
            ve.prototype.update = function(e, t, r, n, i, a, o) {
                var s = i === gr
                  , u = q(n, this.entry[0]);
                return (u ? i === this.entry[1] : s) ? this : (h(o),
                s ? void h(a) : u ? e && e === this.ownerID ? (this.entry[1] = i,
                this) : new ve(e,this.keyHash,[n, i]) : (h(a),
                Ee(this, e, t, ae(n), [n, i])))
            }
            ,
            de.prototype.iterate = ge.prototype.iterate = function(e, t) {
                for (var r = this.entries, n = 0, i = r.length - 1; n <= i; n++)
                    if (e(r[t ? i - n : n]) === !1)
                        return !1
            }
            ,
            pe.prototype.iterate = me.prototype.iterate = function(e, t) {
                for (var r = this.nodes, n = 0, i = r.length - 1; n <= i; n++) {
                    var a = r[t ? i - n : n];
                    if (a && a.iterate(e, t) === !1)
                        return !1
                }
            }
            ,
            ve.prototype.iterate = function(e, t) {
                return e(this.entry)
            }
            ,
            e(ye, x),
            ye.prototype.next = function() {
                for (var e = this._type, t = this._stack; t; ) {
                    var r, n = t.node, i = t.index++;
                    if (n.entry) {
                        if (0 === i)
                            return Me(e, n.entry)
                    } else if (n.entries) {
                        if (r = n.entries.length - 1,
                        i <= r)
                            return Me(e, n.entries[this._reverse ? r - i : i])
                    } else if (r = n.nodes.length - 1,
                    i <= r) {
                        var a = n.nodes[this._reverse ? r - i : i];
                        if (a) {
                            if (a.entry)
                                return Me(e, a.entry);
                            t = this._stack = we(a, t)
                        }
                        continue
                    }
                    t = this._stack = this._stack.__prev
                }
                return b()
            }
            ;
            var Fr, Gr = pr / 4, Yr = pr / 2, Qr = pr / 4;
            e(Ue, re),
            Ue.of = function() {
                return this(arguments)
            }
            ,
            Ue.prototype.toString = function() {
                return this.__toString("List [", "]")
            }
            ,
            Ue.prototype.get = function(e, t) {
                if (e = m(this, e),
                e >= 0 && e < this.size) {
                    e += this._origin;
                    var r = Xe(this, e);
                    return r && r.array[e & mr]
                }
                return t
            }
            ,
            Ue.prototype.set = function(e, t) {
                return Qe(this, e, t)
            }
            ,
            Ue.prototype.remove = function(e) {
                return this.has(e) ? 0 === e ? this.shift() : e === this.size - 1 ? this.pop() : this.splice(e, 1) : this
            }
            ,
            Ue.prototype.insert = function(e, t) {
                return this.splice(e, 0, t)
            }
            ,
            Ue.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = this._origin = this._capacity = 0,
                this._level = dr,
                this._root = this._tail = null,
                this.__hash = void 0,
                this.__altered = !0,
                this) : Ye()
            }
            ,
            Ue.prototype.push = function() {
                var e = arguments
                  , t = this.size;
                return this.withMutations(function(r) {
                    qe(r, 0, t + e.length);
                    for (var n = 0; n < e.length; n++)
                        r.set(t + n, e[n])
                })
            }
            ,
            Ue.prototype.pop = function() {
                return qe(this, 0, -1)
            }
            ,
            Ue.prototype.unshift = function() {
                var e = arguments;
                return this.withMutations(function(t) {
                    qe(t, -e.length);
                    for (var r = 0; r < e.length; r++)
                        t.set(r, e[r])
                })
            }
            ,
            Ue.prototype.shift = function() {
                return qe(this, 1)
            }
            ,
            Ue.prototype.merge = function() {
                return Ze(this, void 0, arguments)
            }
            ,
            Ue.prototype.mergeWith = function(e) {
                var t = sr.call(arguments, 1);
                return Ze(this, e, t)
            }
            ,
            Ue.prototype.mergeDeep = function() {
                return Ze(this, Le, arguments)
            }
            ,
            Ue.prototype.mergeDeepWith = function(e) {
                var t = sr.call(arguments, 1);
                return Ze(this, Ce(e), t)
            }
            ,
            Ue.prototype.setSize = function(e) {
                return qe(this, 0, e)
            }
            ,
            Ue.prototype.slice = function(e, t) {
                var r = this.size;
                return v(e, t, r) ? this : qe(this, y(e, r), M(t, r))
            }
            ,
            Ue.prototype.__iterator = function(e, t) {
                var r = 0
                  , n = Fe(this, t);
                return new x(function() {
                    var t = n();
                    return t === qr ? b() : A(e, r++, t)
                }
                )
            }
            ,
            Ue.prototype.__iterate = function(e, t) {
                for (var r, n = 0, i = Fe(this, t); (r = i()) !== qr && e(r, n++, this) !== !1; )
                    ;
                return n
            }
            ,
            Ue.prototype.__ensureOwner = function(e) {
                return e === this.__ownerID ? this : e ? Ge(this._origin, this._capacity, this._level, this._root, this._tail, e, this.__hash) : (this.__ownerID = e,
                this)
            }
            ,
            Ue.isList = Ve;
            var Hr = "@@__IMMUTABLE_LIST__@@"
              , Wr = Ue.prototype;
            Wr[Hr] = !0,
            Wr[fr] = Wr.remove,
            Wr.setIn = kr.setIn,
            Wr.deleteIn = Wr.removeIn = kr.removeIn,
            Wr.update = kr.update,
            Wr.updateIn = kr.updateIn,
            Wr.mergeIn = kr.mergeIn,
            Wr.mergeDeepIn = kr.mergeDeepIn,
            Wr.withMutations = kr.withMutations,
            Wr.asMutable = kr.asMutable,
            Wr.asImmutable = kr.asImmutable,
            Wr.wasAltered = kr.wasAltered,
            ke.prototype.removeBefore = function(e, t, r) {
                if (r === t ? 1 << t : 0 === this.array.length)
                    return this;
                var n = r >>> t & mr;
                if (n >= this.array.length)
                    return new ke([],e);
                var i, a = 0 === n;
                if (t > 0) {
                    var o = this.array[n];
                    if (i = o && o.removeBefore(e, t - dr, r),
                    i === o && a)
                        return this
                }
                if (a && !i)
                    return this;
                var s = We(this, e);
                if (!a)
                    for (var u = 0; u < n; u++)
                        s.array[u] = void 0;
                return i && (s.array[n] = i),
                s
            }
            ,
            ke.prototype.removeAfter = function(e, t, r) {
                if (r === (t ? 1 << t : 0) || 0 === this.array.length)
                    return this;
                var n = r - 1 >>> t & mr;
                if (n >= this.array.length)
                    return this;
                var i;
                if (t > 0) {
                    var a = this.array[n];
                    if (i = a && a.removeAfter(e, t - dr, r),
                    i === a && n === this.array.length - 1)
                        return this
                }
                var o = We(this, e);
                return o.array.splice(n + 1),
                i && (o.array[n] = i),
                o
            }
            ;
            var Xr, qr = {};
            e(Ke, he),
            Ke.of = function() {
                return this(arguments)
            }
            ,
            Ke.prototype.toString = function() {
                return this.__toString("OrderedMap {", "}")
            }
            ,
            Ke.prototype.get = function(e, t) {
                var r = this._map.get(e);
                return void 0 !== r ? this._list.get(r)[1] : t
            }
            ,
            Ke.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = 0,
                this._map.clear(),
                this._list.clear(),
                this) : tt()
            }
            ,
            Ke.prototype.set = function(e, t) {
                return rt(this, e, t)
            }
            ,
            Ke.prototype.remove = function(e) {
                return rt(this, e, gr)
            }
            ,
            Ke.prototype.wasAltered = function() {
                return this._map.wasAltered() || this._list.wasAltered()
            }
            ,
            Ke.prototype.__iterate = function(e, t) {
                var r = this;
                return this._list.__iterate(function(t) {
                    return t && e(t[1], t[0], r)
                }, t)
            }
            ,
            Ke.prototype.__iterator = function(e, t) {
                return this._list.fromEntrySeq().__iterator(e, t)
            }
            ,
            Ke.prototype.__ensureOwner = function(e) {
                if (e === this.__ownerID)
                    return this;
                var t = this._map.__ensureOwner(e)
                  , r = this._list.__ensureOwner(e);
                return e ? et(t, r, e, this.__hash) : (this.__ownerID = e,
                this._map = t,
                this._list = r,
                this)
            }
            ,
            Ke.isOrderedMap = $e,
            Ke.prototype[hr] = !0,
            Ke.prototype[fr] = Ke.prototype.remove;
            var Zr;
            e(nt, I),
            nt.prototype.get = function(e, t) {
                return this._iter.get(e, t)
            }
            ,
            nt.prototype.has = function(e) {
                return this._iter.has(e)
            }
            ,
            nt.prototype.valueSeq = function() {
                return this._iter.valueSeq()
            }
            ,
            nt.prototype.reverse = function() {
                var e = this
                  , t = lt(this, !0);
                return this._useKeys || (t.valueSeq = function() {
                    return e._iter.toSeq().reverse()
                }
                ),
                t
            }
            ,
            nt.prototype.map = function(e, t) {
                var r = this
                  , n = ut(this, e, t);
                return this._useKeys || (n.valueSeq = function() {
                    return r._iter.toSeq().map(e, t)
                }
                ),
                n
            }
            ,
            nt.prototype.__iterate = function(e, t) {
                var r, n = this;
                return this._iter.__iterate(this._useKeys ? function(t, r) {
                    return e(t, r, n)
                }
                : (r = t ? Et(this) : 0,
                function(i) {
                    return e(i, t ? --r : r++, n)
                }
                ), t)
            }
            ,
            nt.prototype.__iterator = function(e, t) {
                if (this._useKeys)
                    return this._iter.__iterator(e, t);
                var r = this._iter.__iterator(wr, t)
                  , n = t ? Et(this) : 0;
                return new x(function() {
                    var i = r.next();
                    return i.done ? i : A(e, t ? --n : n++, i.value, i)
                }
                )
            }
            ,
            nt.prototype[hr] = !0,
            e(it, L),
            it.prototype.includes = function(e) {
                return this._iter.includes(e)
            }
            ,
            it.prototype.__iterate = function(e, t) {
                var r = this
                  , n = 0;
                return this._iter.__iterate(function(t) {
                    return e(t, n++, r)
                }, t)
            }
            ,
            it.prototype.__iterator = function(e, t) {
                var r = this._iter.__iterator(wr, t)
                  , n = 0;
                return new x(function() {
                    var t = r.next();
                    return t.done ? t : A(e, n++, t.value, t)
                }
                )
            }
            ,
            e(at, C),
            at.prototype.has = function(e) {
                return this._iter.includes(e)
            }
            ,
            at.prototype.__iterate = function(e, t) {
                var r = this;
                return this._iter.__iterate(function(t) {
                    return e(t, t, r)
                }, t)
            }
            ,
            at.prototype.__iterator = function(e, t) {
                var r = this._iter.__iterator(wr, t);
                return new x(function() {
                    var t = r.next();
                    return t.done ? t : A(e, t.value, t.value, t)
                }
                )
            }
            ,
            e(ot, I),
            ot.prototype.entrySeq = function() {
                return this._iter.toSeq()
            }
            ,
            ot.prototype.__iterate = function(e, t) {
                var r = this;
                return this._iter.__iterate(function(t) {
                    if (t) {
                        _t(t);
                        var n = a(t);
                        return e(n ? t.get(1) : t[1], n ? t.get(0) : t[0], r)
                    }
                }, t)
            }
            ,
            ot.prototype.__iterator = function(e, t) {
                var r = this._iter.__iterator(wr, t);
                return new x(function() {
                    for (; ; ) {
                        var t = r.next();
                        if (t.done)
                            return t;
                        var n = t.value;
                        if (n) {
                            _t(n);
                            var i = a(n);
                            return A(e, i ? n.get(0) : n[0], i ? n.get(1) : n[1], t)
                        }
                    }
                }
                )
            }
            ,
            it.prototype.cacheResult = nt.prototype.cacheResult = at.prototype.cacheResult = ot.prototype.cacheResult = Nt,
            e(Ct, te),
            Ct.prototype.toString = function() {
                return this.__toString(jt(this) + " {", "}")
            }
            ,
            Ct.prototype.has = function(e) {
                return this._defaultValues.hasOwnProperty(e)
            }
            ,
            Ct.prototype.get = function(e, t) {
                if (!this.has(e))
                    return t;
                var r = this._defaultValues[e];
                return this._map ? this._map.get(e, r) : r
            }
            ,
            Ct.prototype.clear = function() {
                if (this.__ownerID)
                    return this._map && this._map.clear(),
                    this;
                var e = this.constructor;
                return e._empty || (e._empty = Ot(this, Ae()))
            }
            ,
            Ct.prototype.set = function(e, t) {
                if (!this.has(e))
                    throw new Error('Cannot set unknown key "' + e + '" on ' + jt(this));
                if (this._map && !this._map.has(e)) {
                    var r = this._defaultValues[e];
                    if (t === r)
                        return this
                }
                var n = this._map && this._map.set(e, t);
                return this.__ownerID || n === this._map ? this : Ot(this, n)
            }
            ,
            Ct.prototype.remove = function(e) {
                if (!this.has(e))
                    return this;
                var t = this._map && this._map.remove(e);
                return this.__ownerID || t === this._map ? this : Ot(this, t)
            }
            ,
            Ct.prototype.wasAltered = function() {
                return this._map.wasAltered()
            }
            ,
            Ct.prototype.__iterator = function(e, t) {
                var n = this;
                return r(this._defaultValues).map(function(e, t) {
                    return n.get(t)
                }).__iterator(e, t)
            }
            ,
            Ct.prototype.__iterate = function(e, t) {
                var n = this;
                return r(this._defaultValues).map(function(e, t) {
                    return n.get(t)
                }).__iterate(e, t)
            }
            ,
            Ct.prototype.__ensureOwner = function(e) {
                if (e === this.__ownerID)
                    return this;
                var t = this._map && this._map.__ensureOwner(e);
                return e ? Ot(this, t, e) : (this.__ownerID = e,
                this._map = t,
                this)
            }
            ;
            var Jr = Ct.prototype;
            Jr[fr] = Jr.remove,
            Jr.deleteIn = Jr.removeIn = kr.removeIn,
            Jr.merge = kr.merge,
            Jr.mergeWith = kr.mergeWith,
            Jr.mergeIn = kr.mergeIn,
            Jr.mergeDeep = kr.mergeDeep,
            Jr.mergeDeepWith = kr.mergeDeepWith,
            Jr.mergeDeepIn = kr.mergeDeepIn,
            Jr.setIn = kr.setIn,
            Jr.update = kr.update,
            Jr.updateIn = kr.updateIn,
            Jr.withMutations = kr.withMutations,
            Jr.asMutable = kr.asMutable,
            Jr.asImmutable = kr.asImmutable,
            e(zt, ne),
            zt.of = function() {
                return this(arguments)
            }
            ,
            zt.fromKeys = function(e) {
                return this(r(e).keySeq())
            }
            ,
            zt.prototype.toString = function() {
                return this.__toString("Set {", "}")
            }
            ,
            zt.prototype.has = function(e) {
                return this._map.has(e)
            }
            ,
            zt.prototype.add = function(e) {
                return Ut(this, this._map.set(e, !0))
            }
            ,
            zt.prototype.remove = function(e) {
                return Ut(this, this._map.remove(e))
            }
            ,
            zt.prototype.clear = function() {
                return Ut(this, this._map.clear())
            }
            ,
            zt.prototype.union = function() {
                var e = sr.call(arguments, 0);
                return e = e.filter(function(e) {
                    return 0 !== e.size
                }),
                0 === e.length ? this : 0 !== this.size || this.__ownerID || 1 !== e.length ? this.withMutations(function(t) {
                    for (var r = 0; r < e.length; r++)
                        i(e[r]).forEach(function(e) {
                            return t.add(e)
                        })
                }) : this.constructor(e[0])
            }
            ,
            zt.prototype.intersect = function() {
                var e = sr.call(arguments, 0);
                if (0 === e.length)
                    return this;
                e = e.map(function(e) {
                    return i(e)
                });
                var t = this;
                return this.withMutations(function(r) {
                    t.forEach(function(t) {
                        e.every(function(e) {
                            return e.includes(t)
                        }) || r.remove(t)
                    })
                })
            }
            ,
            zt.prototype.subtract = function() {
                var e = sr.call(arguments, 0);
                if (0 === e.length)
                    return this;
                e = e.map(function(e) {
                    return i(e)
                });
                var t = this;
                return this.withMutations(function(r) {
                    t.forEach(function(t) {
                        e.some(function(e) {
                            return e.includes(t)
                        }) && r.remove(t)
                    })
                })
            }
            ,
            zt.prototype.merge = function() {
                return this.union.apply(this, arguments)
            }
            ,
            zt.prototype.mergeWith = function(e) {
                var t = sr.call(arguments, 1);
                return this.union.apply(this, t)
            }
            ,
            zt.prototype.sort = function(e) {
                return Ft(wt(this, e))
            }
            ,
            zt.prototype.sortBy = function(e, t) {
                return Ft(wt(this, t, e))
            }
            ,
            zt.prototype.wasAltered = function() {
                return this._map.wasAltered()
            }
            ,
            zt.prototype.__iterate = function(e, t) {
                var r = this;
                return this._map.__iterate(function(t, n) {
                    return e(n, n, r)
                }, t)
            }
            ,
            zt.prototype.__iterator = function(e, t) {
                return this._map.map(function(e, t) {
                    return t
                }).__iterator(e, t)
            }
            ,
            zt.prototype.__ensureOwner = function(e) {
                if (e === this.__ownerID)
                    return this;
                var t = this._map.__ensureOwner(e);
                return e ? this.__make(t, e) : (this.__ownerID = e,
                this._map = t,
                this)
            }
            ,
            zt.isSet = Bt;
            var Kr = "@@__IMMUTABLE_SET__@@"
              , $r = zt.prototype;
            $r[Kr] = !0,
            $r[fr] = $r.remove,
            $r.mergeDeep = $r.merge,
            $r.mergeDeepWith = $r.mergeWith,
            $r.withMutations = kr.withMutations,
            $r.asMutable = kr.asMutable,
            $r.asImmutable = kr.asImmutable,
            $r.__empty = kt,
            $r.__make = Vt;
            var en;
            e(Ft, zt),
            Ft.of = function() {
                return this(arguments)
            }
            ,
            Ft.fromKeys = function(e) {
                return this(r(e).keySeq())
            }
            ,
            Ft.prototype.toString = function() {
                return this.__toString("OrderedSet {", "}")
            }
            ,
            Ft.isOrderedSet = Gt;
            var tn = Ft.prototype;
            tn[hr] = !0,
            tn.__empty = Qt,
            tn.__make = Yt;
            var rn;
            e(Ht, re),
            Ht.of = function() {
                return this(arguments)
            }
            ,
            Ht.prototype.toString = function() {
                return this.__toString("Stack [", "]")
            }
            ,
            Ht.prototype.get = function(e, t) {
                var r = this._head;
                for (e = m(this, e); r && e--; )
                    r = r.next;
                return r ? r.value : t
            }
            ,
            Ht.prototype.peek = function() {
                return this._head && this._head.value
            }
            ,
            Ht.prototype.push = function() {
                if (0 === arguments.length)
                    return this;
                for (var e = this.size + arguments.length, t = this._head, r = arguments.length - 1; r >= 0; r--)
                    t = {
                        value: arguments[r],
                        next: t
                    };
                return this.__ownerID ? (this.size = e,
                this._head = t,
                this.__hash = void 0,
                this.__altered = !0,
                this) : Xt(e, t)
            }
            ,
            Ht.prototype.pushAll = function(e) {
                if (e = n(e),
                0 === e.size)
                    return this;
                ce(e.size);
                var t = this.size
                  , r = this._head;
                return e.reverse().forEach(function(e) {
                    t++,
                    r = {
                        value: e,
                        next: r
                    }
                }),
                this.__ownerID ? (this.size = t,
                this._head = r,
                this.__hash = void 0,
                this.__altered = !0,
                this) : Xt(t, r)
            }
            ,
            Ht.prototype.pop = function() {
                return this.slice(1)
            }
            ,
            Ht.prototype.unshift = function() {
                return this.push.apply(this, arguments)
            }
            ,
            Ht.prototype.unshiftAll = function(e) {
                return this.pushAll(e)
            }
            ,
            Ht.prototype.shift = function() {
                return this.pop.apply(this, arguments)
            }
            ,
            Ht.prototype.clear = function() {
                return 0 === this.size ? this : this.__ownerID ? (this.size = 0,
                this._head = void 0,
                this.__hash = void 0,
                this.__altered = !0,
                this) : qt()
            }
            ,
            Ht.prototype.slice = function(e, t) {
                if (v(e, t, this.size))
                    return this;
                var r = y(e, this.size)
                  , n = M(t, this.size);
                if (n !== this.size)
                    return re.prototype.slice.call(this, e, t);
                for (var i = this.size - r, a = this._head; r--; )
                    a = a.next;
                return this.__ownerID ? (this.size = i,
                this._head = a,
                this.__hash = void 0,
                this.__altered = !0,
                this) : Xt(i, a)
            }
            ,
            Ht.prototype.__ensureOwner = function(e) {
                return e === this.__ownerID ? this : e ? Xt(this.size, this._head, e, this.__hash) : (this.__ownerID = e,
                this.__altered = !1,
                this)
            }
            ,
            Ht.prototype.__iterate = function(e, t) {
                if (t)
                    return this.reverse().__iterate(e);
                for (var r = 0, n = this._head; n && e(n.value, r++, this) !== !1; )
                    n = n.next;
                return r
            }
            ,
            Ht.prototype.__iterator = function(e, t) {
                if (t)
                    return this.reverse().__iterator(e);
                var r = 0
                  , n = this._head;
                return new x(function() {
                    if (n) {
                        var t = n.value;
                        return n = n.next,
                        A(e, r++, t)
                    }
                    return b()
                }
                )
            }
            ,
            Ht.isStack = Wt;
            var nn = "@@__IMMUTABLE_STACK__@@"
              , an = Ht.prototype;
            an[nn] = !0,
            an.withMutations = kr.withMutations,
            an.asMutable = kr.asMutable,
            an.asImmutable = kr.asImmutable,
            an.wasAltered = kr.wasAltered;
            var on;
            t.Iterator = x,
            Zt(t, {
                toArray: function() {
                    ce(this.size);
                    var e = new Array(this.size || 0);
                    return this.valueSeq().__iterate(function(t, r) {
                        e[r] = t
                    }),
                    e
                },
                toIndexedSeq: function() {
                    return new it(this)
                },
                toJS: function() {
                    return this.toSeq().map(function(e) {
                        return e && "function" == typeof e.toJS ? e.toJS() : e
                    }).__toJS()
                },
                toJSON: function() {
                    return this.toSeq().map(function(e) {
                        return e && "function" == typeof e.toJSON ? e.toJSON() : e
                    }).__toJS()
                },
                toKeyedSeq: function() {
                    return new nt(this,!0)
                },
                toMap: function() {
                    return he(this.toKeyedSeq())
                },
                toObject: function() {
                    ce(this.size);
                    var e = {};
                    return this.__iterate(function(t, r) {
                        e[r] = t
                    }),
                    e
                },
                toOrderedMap: function() {
                    return Ke(this.toKeyedSeq())
                },
                toOrderedSet: function() {
                    return Ft(o(this) ? this.valueSeq() : this)
                },
                toSet: function() {
                    return zt(o(this) ? this.valueSeq() : this)
                },
                toSetSeq: function() {
                    return new at(this)
                },
                toSeq: function() {
                    return s(this) ? this.toIndexedSeq() : o(this) ? this.toKeyedSeq() : this.toSetSeq()
                },
                toStack: function() {
                    return Ht(o(this) ? this.valueSeq() : this)
                },
                toList: function() {
                    return Ue(o(this) ? this.valueSeq() : this)
                },
                toString: function() {
                    return "[Iterable]"
                },
                __toString: function(e, t) {
                    return 0 === this.size ? e + t : e + " " + this.toSeq().map(this.__toStringMapper).join(", ") + " " + t
                },
                concat: function() {
                    var e = sr.call(arguments, 0);
                    return Tt(this, gt(this, e))
                },
                includes: function(e) {
                    return this.some(function(t) {
                        return q(t, e)
                    })
                },
                entries: function() {
                    return this.__iterator(xr)
                },
                every: function(e, t) {
                    ce(this.size);
                    var r = !0;
                    return this.__iterate(function(n, i, a) {
                        if (!e.call(t, n, i, a))
                            return r = !1,
                            !1
                    }),
                    r
                },
                filter: function(e, t) {
                    return Tt(this, ct(this, e, t, !0))
                },
                find: function(e, t, r) {
                    var n = this.findEntry(e, t);
                    return n ? n[1] : r
                },
                forEach: function(e, t) {
                    return ce(this.size),
                    this.__iterate(t ? e.bind(t) : e)
                },
                join: function(e) {
                    ce(this.size),
                    e = void 0 !== e ? "" + e : ",";
                    var t = ""
                      , r = !0;
                    return this.__iterate(function(n) {
                        r ? r = !1 : t += e,
                        t += null !== n && void 0 !== n ? n.toString() : ""
                    }),
                    t
                },
                keys: function() {
                    return this.__iterator(Mr)
                },
                map: function(e, t) {
                    return Tt(this, ut(this, e, t))
                },
                reduce: function(e, t, r) {
                    ce(this.size);
                    var n, i;
                    return arguments.length < 2 ? i = !0 : n = t,
                    this.__iterate(function(t, a, o) {
                        i ? (i = !1,
                        n = t) : n = e.call(r, n, t, a, o)
                    }),
                    n
                },
                reduceRight: function(e, t, r) {
                    var n = this.toKeyedSeq().reverse();
                    return n.reduce.apply(n, arguments)
                },
                reverse: function() {
                    return Tt(this, lt(this, !0))
                },
                slice: function(e, t) {
                    return Tt(this, dt(this, e, t, !0))
                },
                some: function(e, t) {
                    return !this.every($t(e), t)
                },
                sort: function(e) {
                    return Tt(this, wt(this, e))
                },
                values: function() {
                    return this.__iterator(wr)
                },
                butLast: function() {
                    return this.slice(0, -1)
                },
                isEmpty: function() {
                    return void 0 !== this.size ? 0 === this.size : !this.some(function() {
                        return !0
                    })
                },
                count: function(e, t) {
                    return p(e ? this.toSeq().filter(e, t) : this)
                },
                countBy: function(e, t) {
                    return ht(this, e, t)
                },
                equals: function(e) {
                    return Z(this, e)
                },
                entrySeq: function() {
                    var e = this;
                    if (e._cache)
                        return new O(e._cache);
                    var t = e.toSeq().map(Kt).toIndexedSeq();
                    return t.fromEntrySeq = function() {
                        return e.toSeq()
                    }
                    ,
                    t
                },
                filterNot: function(e, t) {
                    return this.filter($t(e), t)
                },
                findEntry: function(e, t, r) {
                    var n = r;
                    return this.__iterate(function(r, i, a) {
                        if (e.call(t, r, i, a))
                            return n = [i, r],
                            !1
                    }),
                    n
                },
                findKey: function(e, t) {
                    var r = this.findEntry(e, t);
                    return r && r[0]
                },
                findLast: function(e, t, r) {
                    return this.toKeyedSeq().reverse().find(e, t, r)
                },
                findLastEntry: function(e, t, r) {
                    return this.toKeyedSeq().reverse().findEntry(e, t, r)
                },
                findLastKey: function(e, t) {
                    return this.toKeyedSeq().reverse().findKey(e, t)
                },
                first: function() {
                    return this.find(g)
                },
                flatMap: function(e, t) {
                    return Tt(this, yt(this, e, t))
                },
                flatten: function(e) {
                    return Tt(this, vt(this, e, !0))
                },
                fromEntrySeq: function() {
                    return new ot(this)
                },
                get: function(e, t) {
                    return this.find(function(t, r) {
                        return q(r, e)
                    }, void 0, t)
                },
                getIn: function(e, t) {
                    for (var r, n = this, i = Lt(e); !(r = i.next()).done; ) {
                        var a = r.value;
                        if (n = n && n.get ? n.get(a, gr) : gr,
                        n === gr)
                            return t
                    }
                    return n
                },
                groupBy: function(e, t) {
                    return ft(this, e, t)
                },
                has: function(e) {
                    return this.get(e, gr) !== gr
                },
                hasIn: function(e) {
                    return this.getIn(e, gr) !== gr
                },
                isSubset: function(e) {
                    return e = "function" == typeof e.includes ? e : t(e),
                    this.every(function(t) {
                        return e.includes(t)
                    })
                },
                isSuperset: function(e) {
                    return e = "function" == typeof e.isSubset ? e : t(e),
                    e.isSubset(this)
                },
                keyOf: function(e) {
                    return this.findKey(function(t) {
                        return q(t, e)
                    })
                },
                keySeq: function() {
                    return this.toSeq().map(Jt).toIndexedSeq()
                },
                last: function() {
                    return this.toSeq().reverse().first()
                },
                lastKeyOf: function(e) {
                    return this.toKeyedSeq().reverse().keyOf(e)
                },
                max: function(e) {
                    return xt(this, e)
                },
                maxBy: function(e, t) {
                    return xt(this, t, e)
                },
                min: function(e) {
                    return xt(this, e ? er(e) : nr)
                },
                minBy: function(e, t) {
                    return xt(this, t ? er(t) : nr, e)
                },
                rest: function() {
                    return this.slice(1)
                },
                skip: function(e) {
                    return this.slice(Math.max(0, e))
                },
                skipLast: function(e) {
                    return Tt(this, this.toSeq().reverse().skip(e).reverse())
                },
                skipWhile: function(e, t) {
                    return Tt(this, mt(this, e, t, !0))
                },
                skipUntil: function(e, t) {
                    return this.skipWhile($t(e), t)
                },
                sortBy: function(e, t) {
                    return Tt(this, wt(this, t, e))
                },
                take: function(e) {
                    return this.slice(0, Math.max(0, e))
                },
                takeLast: function(e) {
                    return Tt(this, this.toSeq().reverse().take(e).reverse())
                },
                takeWhile: function(e, t) {
                    return Tt(this, pt(this, e, t))
                },
                takeUntil: function(e, t) {
                    return this.takeWhile($t(e), t)
                },
                valueSeq: function() {
                    return this.toIndexedSeq()
                },
                hashCode: function() {
                    return this.__hash || (this.__hash = ir(this))
                }
            });
            var sn = t.prototype;
            sn[ur] = !0,
            sn[Tr] = sn.values,
            sn.__toJS = sn.toArray,
            sn.__toStringMapper = tr,
            sn.inspect = sn.toSource = function() {
                return this.toString()
            }
            ,
            sn.chain = sn.flatMap,
            sn.contains = sn.includes,
            Zt(r, {
                flip: function() {
                    return Tt(this, st(this))
                },
                mapEntries: function(e, t) {
                    var r = this
                      , n = 0;
                    return Tt(this, this.toSeq().map(function(i, a) {
                        return e.call(t, [a, i], n++, r)
                    }).fromEntrySeq())
                },
                mapKeys: function(e, t) {
                    var r = this;
                    return Tt(this, this.toSeq().flip().map(function(n, i) {
                        return e.call(t, n, i, r)
                    }).flip())
                }
            });
            var un = r.prototype;
            un[lr] = !0,
            un[Tr] = sn.entries,
            un.__toJS = sn.toObject,
            un.__toStringMapper = function(e, t) {
                return JSON.stringify(t) + ": " + tr(e)
            }
            ,
            Zt(n, {
                toKeyedSeq: function() {
                    return new nt(this,!1)
                },
                filter: function(e, t) {
                    return Tt(this, ct(this, e, t, !1))
                },
                findIndex: function(e, t) {
                    var r = this.findEntry(e, t);
                    return r ? r[0] : -1
                },
                indexOf: function(e) {
                    var t = this.keyOf(e);
                    return void 0 === t ? -1 : t
                },
                lastIndexOf: function(e) {
                    var t = this.lastKeyOf(e);
                    return void 0 === t ? -1 : t
                },
                reverse: function() {
                    return Tt(this, lt(this, !1))
                },
                slice: function(e, t) {
                    return Tt(this, dt(this, e, t, !1))
                },
                splice: function(e, t) {
                    var r = arguments.length;
                    if (t = Math.max(0 | t, 0),
                    0 === r || 2 === r && !t)
                        return this;
                    e = y(e, e < 0 ? this.count() : this.size);
                    var n = this.slice(0, e);
                    return Tt(this, 1 === r ? n : n.concat(d(arguments, 2), this.slice(e + t)))
                },
                findLastIndex: function(e, t) {
                    var r = this.findLastEntry(e, t);
                    return r ? r[0] : -1
                },
                first: function() {
                    return this.get(0)
                },
                flatten: function(e) {
                    return Tt(this, vt(this, e, !1))
                },
                get: function(e, t) {
                    return e = m(this, e),
                    e < 0 || this.size === 1 / 0 || void 0 !== this.size && e > this.size ? t : this.find(function(t, r) {
                        return r === e
                    }, void 0, t)
                },
                has: function(e) {
                    return e = m(this, e),
                    e >= 0 && (void 0 !== this.size ? this.size === 1 / 0 || e < this.size : this.indexOf(e) !== -1)
                },
                interpose: function(e) {
                    return Tt(this, Mt(this, e))
                },
                interleave: function() {
                    var e = [this].concat(d(arguments))
                      , t = bt(this.toSeq(), L.of, e)
                      , r = t.flatten(!0);
                    return t.size && (r.size = t.size * e.length),
                    Tt(this, r)
                },
                keySeq: function() {
                    return $(0, this.size)
                },
                last: function() {
                    return this.get(-1)
                },
                skipWhile: function(e, t) {
                    return Tt(this, mt(this, e, t, !1))
                },
                zip: function() {
                    var e = [this].concat(d(arguments));
                    return Tt(this, bt(this, rr, e))
                },
                zipWith: function(e) {
                    var t = d(arguments);
                    return t[0] = this,
                    Tt(this, bt(this, e, t))
                }
            }),
            n.prototype[cr] = !0,
            n.prototype[hr] = !0,
            Zt(i, {
                get: function(e, t) {
                    return this.has(e) ? e : t
                },
                includes: function(e) {
                    return this.has(e)
                },
                keySeq: function() {
                    return this.valueSeq()
                }
            }),
            i.prototype.has = sn.includes,
            i.prototype.contains = i.prototype.includes,
            Zt(I, r.prototype),
            Zt(L, n.prototype),
            Zt(C, i.prototype),
            Zt(te, r.prototype),
            Zt(re, n.prototype),
            Zt(ne, i.prototype);
            var ln = {
                Iterable: t,
                Seq: N,
                Collection: ee,
                Map: he,
                OrderedMap: Ke,
                List: Ue,
                Stack: Ht,
                Set: zt,
                OrderedSet: Ft,
                Record: Ct,
                Range: $,
                Repeat: J,
                is: q,
                fromJS: Q
            };
            return ln
        })
    }
    , /*!**************************************************!*\
  !*** ./src/polyMesh/geometric/model/PolyMesh.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            e ? (e.colorMaps || console.error("Polymesh must have initialized colorMaps container."),
            e.uvMaps || console.error("Polymesh must have initialized uvMaps container."),
            this.faceRangeOffsets = e.faceRangeOffsets,
            this.positions = e.positions,
            this.normalMap = e.normalMap,
            this.uvMaps = o.default.shallowClone(e.uvMaps),
            e.skinning && (this.skinning = e.skinning),
            e.edgeCreaseWeights && (this.edgeCreaseWeights = e.edgeCreaseWeights),
            e.materialIds && (this.materialIds = e.materialIds),
            this.colorMaps = o.default.shallowClone(e.colorMaps)) : (this.faceRangeOffsets = new Uint32Array(1),
            this.positions = new c.default,
            this.colorMaps = new o.default,
            this.uvMaps = new o.default)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../generic/container/ObjectsByName */
        20)
          , o = n(a)
          , s = r(/*! ./PolyMaps */
        45)
          , u = n(s)
          , l = r(/*! ./PolyMap */
        10)
          , c = n(l);
        i.prototype = {
            constructor: i,
            getNumFaces: function() {
                return this.faceRangeOffsets.length - 1
            },
            getNumFaceVertices: function() {
                return this.positions.faceValueIndices.length
            },
            getNumVertices: function() {
                return this.positions.values.length
            },
            getMapById: function(e) {
                return u.default.resolveMap(this, e) || null
            },
            topologyChanged: function() {
                return this.skinning && (this.skinning = null),
                this.edgeCreaseWeights && (this.edgeCreaseWeights = null),
                this.materialIds && (this.materialIds = null),
                this
            }
        },
        i.fromData = function(e, t, r, n) {
            var a = new i({
                faceRangeOffsets: e,
                positions: t.isPolyMap ? t : c.default.fromData(e, r || null, t),
                uvMaps: new o.default,
                colorMaps: new o.default
            });
            return n && (a.materialIds = n),
            a
        }
    }
    , /*!***********************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_wks.js ***!
  \***********************************************************/
    function(e, t, r) {
        var n = r(/*! ./_shared */
        98)("wks")
          , i = r(/*! ./_uid */
        74)
          , a = r(/*! ./_global */
        15).Symbol
          , o = "function" == typeof a
          , s = e.exports = function(e) {
            return n[e] || (n[e] = o && a[e] || (o ? a : i)("Symbol." + e))
        }
        ;
        s.store = n
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_export.js ***!
  \**************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_global */
        15)
          , i = r(/*! ./_core */
        6)
          , a = r(/*! ./_ctx */
        34)
          , o = r(/*! ./_hide */
        35)
          , s = "prototype"
          , u = function(e, t, r) {
            var l, c, h, f = e & u.F, d = e & u.G, p = e & u.S, m = e & u.P, g = e & u.B, v = e & u.W, y = d ? i : i[t] || (i[t] = {}), M = y[s], w = d ? n : p ? n[t] : (n[t] || {})[s];
            d && (r = t);
            for (l in r)
                c = !f && w && void 0 !== w[l],
                c && l in y || (h = c ? w[l] : r[l],
                y[l] = d && "function" != typeof w[l] ? r[l] : g && c ? a(h, n) : v && w[l] == h ? function(e) {
                    var t = function(t, r, n) {
                        if (this instanceof e) {
                            switch (arguments.length) {
                            case 0:
                                return new e;
                            case 1:
                                return new e(t);
                            case 2:
                                return new e(t,r)
                            }
                            return new e(t,r,n)
                        }
                        return e.apply(this, arguments)
                    };
                    return t[s] = e[s],
                    t
                }(h) : m && "function" == typeof h ? a(Function.call, h) : h,
                m && ((y.virtual || (y.virtual = {}))[l] = h,
                e & u.R && M && !M[l] && o(M, l, h)))
        };
        u.F = 1,
        u.G = 2,
        u.S = 4,
        u.P = 8,
        u.B = 16,
        u.W = 32,
        u.U = 64,
        u.R = 128,
        e.exports = u
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_global.js ***!
  \**************************************************************/
    function(e, t) {
        var r = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
        "number" == typeof __g && (__g = r)
    }
    , /*!************************************************!*\
  !*** ./src/polyMesh/generic/utility/Arrays.js ***!
  \************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! babel-runtime/core-js/object/freeze */
        262)
          , a = n(i)
          , o = r(/*! ./Orders */
        129)
          , s = n(o)
          , u = {
            Empty: (0,
            a.default)({
                Array: (0,
                a.default)(new Array(0)),
                Float64Array: new Float64Array(0),
                Float32Array: new Float32Array(0),
                Uint32Array: new Uint32Array(0),
                Int32Array: new Int32Array(0)
            }),
            rangeCopy: function(e, t, r, n, i) {
                for (var a = 0; a !== i; ++a)
                    r[n + a] = e[t + a];
                return r
            },
            rangeEquals: function(e, t, r, n, i) {
                for (var a = 0; a !== i; ++a)
                    if (e[t + a] !== r[n + a])
                        return !1;
                return !0
            },
            stridedCopy: function(e, t, r, n, i, a, o, s) {
                for (var u = 0; u !== s; ++u)
                    for (var l = 0; l !== o; ++l)
                        n[i + u * a + l] = e[t + u * r + l];
                return n
            },
            accumulate: function(e) {
                for (var t = 1, r = e.length; t < r; ++t)
                    e[t] += e[t - 1];
                return e
            },
            slice: function(e, t, r) {
                return void 0 !== e.slice ? e.slice(t, r) : new e.constructor(e.subarray(t, r))
            },
            clone: function(e) {
                return null !== e ? void 0 !== e.slice ? e.slice(0) : new e.constructor(e) : null
            },
            binarySearch: function(e, t, r, n) {
                for (var i = void 0 === r ? 0 : r, a = void 0 === n ? e.length - i : n, o = a; i < a; ) {
                    var s = i + a >>> 1
                      , u = e[s];
                    u < t ? i = s + 1 : a = s
                }
                return i < o && e[i] === t ? i : ~i
            },
            sort: function(e, t) {
                return void 0 !== e.sort ? e.sort(t || s.default.Numeric) : Array.prototype.sort.call(e, t || s.default.Numeric)
            },
            unique: function(e, t) {
                var r = e.length;
                if (r <= 1)
                    return e.length;
                var n = 0
                  , i = e[0];
                if (void 0 === t)
                    for (var a = 1; a !== r; ++a) {
                        var o = e[a];
                        o !== i && (i = o,
                        ++n !== a && (e[n] = o))
                    }
                else {
                    var s = t;
                    if (!optionallyBuiltMap)
                        for (var u = 1; u !== r; ++u) {
                            var l = e[u];
                            0 !== s(l, i) && (i = l,
                            ++n !== u && (e[n] = l))
                        }
                }
                return n + 1
            },
            maybeCreate: function(e, t) {
                if (!e)
                    throw Error("Missing array!");
                var r = null !== t && !isNaN(t);
                if ("function" == typeof e || e instanceof Function) {
                    if (!r)
                        throw Error("Missing or invalid length!");
                    return new e(t)
                }
                if (r && e.length < t)
                    throw Error("Array too short: " + e.length + " < " + t);
                return e
            },
            copyObjects: function(e, t, r) {
                if (!e)
                    return null;
                var n = e.length;
                if (0 === n)
                    return t;
                var i = e[0].constructor.InstanceScalarSize || r;
                if (void 0 === i)
                    throw Error("Arrays.fromObjects: Cannot determine stride!");
                for (var a = (u.maybeCreate(arrayOrType, n * i),
                0), o = 0; a !== n; ++a,
                o += i) {
                    var s = e[a];
                    void 0 !== s ? s.toArray(t, o) : (console.warn("Arrays.fromObjects: Undefined object."),
                    t.fill(0, o, o + i))
                }
                return t
            }
        };
        t.default = u
    }
    , /*!*******************************************!*\
  !*** ./~/babel-runtime/helpers/typeof.js ***!
  \*******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/symbol/iterator */
        267)
          , a = n(i)
          , o = r(/*! ../core-js/symbol */
        266)
          , s = n(o)
          , u = "function" == typeof s.default && "symbol" == typeof a.default ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof s.default && e.constructor === s.default && e !== s.default.prototype ? "symbol" : typeof e
        }
        ;
        t.default = "function" == typeof s.default && "symbol" === u(a.default) ? function(e) {
            return "undefined" == typeof e ? "undefined" : u(e)
        }
        : function(e) {
            return e && "function" == typeof s.default && e.constructor === s.default && e !== s.default.prototype ? "symbol" : "undefined" == typeof e ? "undefined" : u(e)
        }
    }
    , /*!***************************!*\
  !*** ./~/buffer/index.js ***!
  \***************************/
    function(e, t, r) {
        (function(e, n) {
            /*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
            "use strict";
            function i() {
                try {
                    var e = new Uint8Array(1);
                    return e.__proto__ = {
                        __proto__: Uint8Array.prototype,
                        foo: function() {
                            return 42
                        }
                    },
                    42 === e.foo() && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength
                } catch (e) {
                    return !1
                }
            }
            function a() {
                return e.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
            }
            function o(t, r) {
                if (a() < r)
                    throw new RangeError("Invalid typed array length");
                return e.TYPED_ARRAY_SUPPORT ? (t = new Uint8Array(r),
                t.__proto__ = e.prototype) : (null === t && (t = new e(r)),
                t.length = r),
                t
            }
            function e(t, r, n) {
                if (!(e.TYPED_ARRAY_SUPPORT || this instanceof e))
                    return new e(t,r,n);
                if ("number" == typeof t) {
                    if ("string" == typeof r)
                        throw new Error("If encoding is specified then the first argument must be a string");
                    return c(this, t)
                }
                return s(this, t, r, n)
            }
            function s(e, t, r, n) {
                if ("number" == typeof t)
                    throw new TypeError('"value" argument must not be a number');
                return "undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer ? d(e, t, r, n) : "string" == typeof t ? h(e, t, r) : p(e, t)
            }
            function u(e) {
                if ("number" != typeof e)
                    throw new TypeError('"size" argument must be a number');
                if (e < 0)
                    throw new RangeError('"size" argument must not be negative')
            }
            function l(e, t, r, n) {
                return u(t),
                t <= 0 ? o(e, t) : void 0 !== r ? "string" == typeof n ? o(e, t).fill(r, n) : o(e, t).fill(r) : o(e, t)
            }
            function c(t, r) {
                if (u(r),
                t = o(t, r < 0 ? 0 : 0 | m(r)),
                !e.TYPED_ARRAY_SUPPORT)
                    for (var n = 0; n < r; ++n)
                        t[n] = 0;
                return t
            }
            function h(t, r, n) {
                if ("string" == typeof n && "" !== n || (n = "utf8"),
                !e.isEncoding(n))
                    throw new TypeError('"encoding" must be a valid string encoding');
                var i = 0 | v(r, n);
                t = o(t, i);
                var a = t.write(r, n);
                return a !== i && (t = t.slice(0, a)),
                t
            }
            function f(e, t) {
                var r = t.length < 0 ? 0 : 0 | m(t.length);
                e = o(e, r);
                for (var n = 0; n < r; n += 1)
                    e[n] = 255 & t[n];
                return e
            }
            function d(t, r, n, i) {
                if (r.byteLength,
                n < 0 || r.byteLength < n)
                    throw new RangeError("'offset' is out of bounds");
                if (r.byteLength < n + (i || 0))
                    throw new RangeError("'length' is out of bounds");
                return r = void 0 === n && void 0 === i ? new Uint8Array(r) : void 0 === i ? new Uint8Array(r,n) : new Uint8Array(r,n,i),
                e.TYPED_ARRAY_SUPPORT ? (t = r,
                t.__proto__ = e.prototype) : t = f(t, r),
                t
            }
            function p(t, r) {
                if (e.isBuffer(r)) {
                    var n = 0 | m(r.length);
                    return t = o(t, n),
                    0 === t.length ? t : (r.copy(t, 0, 0, n),
                    t)
                }
                if (r) {
                    if ("undefined" != typeof ArrayBuffer && r.buffer instanceof ArrayBuffer || "length"in r)
                        return "number" != typeof r.length || Z(r.length) ? o(t, 0) : f(t, r);
                    if ("Buffer" === r.type && $(r.data))
                        return f(t, r.data)
                }
                throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
            }
            function m(e) {
                if (e >= a())
                    throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + a().toString(16) + " bytes");
                return 0 | e
            }
            function g(t) {
                return +t != t && (t = 0),
                e.alloc(+t)
            }
            function v(t, r) {
                if (e.isBuffer(t))
                    return t.length;
                if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t) || t instanceof ArrayBuffer))
                    return t.byteLength;
                "string" != typeof t && (t = "" + t);
                var n = t.length;
                if (0 === n)
                    return 0;
                for (var i = !1; ; )
                    switch (r) {
                    case "ascii":
                    case "latin1":
                    case "binary":
                        return n;
                    case "utf8":
                    case "utf-8":
                    case void 0:
                        return Q(t).length;
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return 2 * n;
                    case "hex":
                        return n >>> 1;
                    case "base64":
                        return X(t).length;
                    default:
                        if (i)
                            return Q(t).length;
                        r = ("" + r).toLowerCase(),
                        i = !0
                    }
            }
            function y(e, t, r) {
                var n = !1;
                if ((void 0 === t || t < 0) && (t = 0),
                t > this.length)
                    return "";
                if ((void 0 === r || r > this.length) && (r = this.length),
                r <= 0)
                    return "";
                if (r >>>= 0,
                t >>>= 0,
                r <= t)
                    return "";
                for (e || (e = "utf8"); ; )
                    switch (e) {
                    case "hex":
                        return O(this, t, r);
                    case "utf8":
                    case "utf-8":
                        return N(this, t, r);
                    case "ascii":
                        return L(this, t, r);
                    case "latin1":
                    case "binary":
                        return C(this, t, r);
                    case "base64":
                        return D(this, t, r);
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return j(this, t, r);
                    default:
                        if (n)
                            throw new TypeError("Unknown encoding: " + e);
                        e = (e + "").toLowerCase(),
                        n = !0
                    }
            }
            function M(e, t, r) {
                var n = e[t];
                e[t] = e[r],
                e[r] = n
            }
            function w(t, r, n, i, a) {
                if (0 === t.length)
                    return -1;
                if ("string" == typeof n ? (i = n,
                n = 0) : n > 2147483647 ? n = 2147483647 : n < -2147483648 && (n = -2147483648),
                n = +n,
                isNaN(n) && (n = a ? 0 : t.length - 1),
                n < 0 && (n = t.length + n),
                n >= t.length) {
                    if (a)
                        return -1;
                    n = t.length - 1
                } else if (n < 0) {
                    if (!a)
                        return -1;
                    n = 0
                }
                if ("string" == typeof r && (r = e.from(r, i)),
                e.isBuffer(r))
                    return 0 === r.length ? -1 : x(t, r, n, i, a);
                if ("number" == typeof r)
                    return r &= 255,
                    e.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? a ? Uint8Array.prototype.indexOf.call(t, r, n) : Uint8Array.prototype.lastIndexOf.call(t, r, n) : x(t, [r], n, i, a);
                throw new TypeError("val must be string, number or Buffer")
            }
            function x(e, t, r, n, i) {
                function a(e, t) {
                    return 1 === o ? e[t] : e.readUInt16BE(t * o)
                }
                var o = 1
                  , s = e.length
                  , u = t.length;
                if (void 0 !== n && (n = String(n).toLowerCase(),
                "ucs2" === n || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {
                    if (e.length < 2 || t.length < 2)
                        return -1;
                    o = 2,
                    s /= 2,
                    u /= 2,
                    r /= 2
                }
                var l;
                if (i) {
                    var c = -1;
                    for (l = r; l < s; l++)
                        if (a(e, l) === a(t, c === -1 ? 0 : l - c)) {
                            if (c === -1 && (c = l),
                            l - c + 1 === u)
                                return c * o
                        } else
                            c !== -1 && (l -= l - c),
                            c = -1
                } else
                    for (r + u > s && (r = s - u),
                    l = r; l >= 0; l--) {
                        for (var h = !0, f = 0; f < u; f++)
                            if (a(e, l + f) !== a(t, f)) {
                                h = !1;
                                break
                            }
                        if (h)
                            return l
                    }
                return -1
            }
            function A(e, t, r, n) {
                r = Number(r) || 0;
                var i = e.length - r;
                n ? (n = Number(n),
                n > i && (n = i)) : n = i;
                var a = t.length;
                if (a % 2 !== 0)
                    throw new TypeError("Invalid hex string");
                n > a / 2 && (n = a / 2);
                for (var o = 0; o < n; ++o) {
                    var s = parseInt(t.substr(2 * o, 2), 16);
                    if (isNaN(s))
                        return o;
                    e[r + o] = s
                }
                return o
            }
            function b(e, t, r, n) {
                return q(Q(t, e.length - r), e, r, n)
            }
            function T(e, t, r, n) {
                return q(H(t), e, r, n)
            }
            function _(e, t, r, n) {
                return T(e, t, r, n)
            }
            function E(e, t, r, n) {
                return q(X(t), e, r, n)
            }
            function S(e, t, r, n) {
                return q(W(t, e.length - r), e, r, n)
            }
            function D(e, t, r) {
                return 0 === t && r === e.length ? J.fromByteArray(e) : J.fromByteArray(e.slice(t, r))
            }
            function N(e, t, r) {
                r = Math.min(e.length, r);
                for (var n = [], i = t; i < r; ) {
                    var a = e[i]
                      , o = null
                      , s = a > 239 ? 4 : a > 223 ? 3 : a > 191 ? 2 : 1;
                    if (i + s <= r) {
                        var u, l, c, h;
                        switch (s) {
                        case 1:
                            a < 128 && (o = a);
                            break;
                        case 2:
                            u = e[i + 1],
                            128 === (192 & u) && (h = (31 & a) << 6 | 63 & u,
                            h > 127 && (o = h));
                            break;
                        case 3:
                            u = e[i + 1],
                            l = e[i + 2],
                            128 === (192 & u) && 128 === (192 & l) && (h = (15 & a) << 12 | (63 & u) << 6 | 63 & l,
                            h > 2047 && (h < 55296 || h > 57343) && (o = h));
                            break;
                        case 4:
                            u = e[i + 1],
                            l = e[i + 2],
                            c = e[i + 3],
                            128 === (192 & u) && 128 === (192 & l) && 128 === (192 & c) && (h = (15 & a) << 18 | (63 & u) << 12 | (63 & l) << 6 | 63 & c,
                            h > 65535 && h < 1114112 && (o = h))
                        }
                    }
                    null === o ? (o = 65533,
                    s = 1) : o > 65535 && (o -= 65536,
                    n.push(o >>> 10 & 1023 | 55296),
                    o = 56320 | 1023 & o),
                    n.push(o),
                    i += s
                }
                return I(n)
            }
            function I(e) {
                var t = e.length;
                if (t <= ee)
                    return String.fromCharCode.apply(String, e);
                for (var r = "", n = 0; n < t; )
                    r += String.fromCharCode.apply(String, e.slice(n, n += ee));
                return r
            }
            function L(e, t, r) {
                var n = "";
                r = Math.min(e.length, r);
                for (var i = t; i < r; ++i)
                    n += String.fromCharCode(127 & e[i]);
                return n
            }
            function C(e, t, r) {
                var n = "";
                r = Math.min(e.length, r);
                for (var i = t; i < r; ++i)
                    n += String.fromCharCode(e[i]);
                return n
            }
            function O(e, t, r) {
                var n = e.length;
                (!t || t < 0) && (t = 0),
                (!r || r < 0 || r > n) && (r = n);
                for (var i = "", a = t; a < r; ++a)
                    i += Y(e[a]);
                return i
            }
            function j(e, t, r) {
                for (var n = e.slice(t, r), i = "", a = 0; a < n.length; a += 2)
                    i += String.fromCharCode(n[a] + 256 * n[a + 1]);
                return i
            }
            function R(e, t, r) {
                if (e % 1 !== 0 || e < 0)
                    throw new RangeError("offset is not uint");
                if (e + t > r)
                    throw new RangeError("Trying to access beyond buffer length")
            }
            function P(t, r, n, i, a, o) {
                if (!e.isBuffer(t))
                    throw new TypeError('"buffer" argument must be a Buffer instance');
                if (r > a || r < o)
                    throw new RangeError('"value" argument is out of bounds');
                if (n + i > t.length)
                    throw new RangeError("Index out of range")
            }
            function z(e, t, r, n) {
                t < 0 && (t = 65535 + t + 1);
                for (var i = 0, a = Math.min(e.length - r, 2); i < a; ++i)
                    e[r + i] = (t & 255 << 8 * (n ? i : 1 - i)) >>> 8 * (n ? i : 1 - i)
            }
            function B(e, t, r, n) {
                t < 0 && (t = 4294967295 + t + 1);
                for (var i = 0, a = Math.min(e.length - r, 4); i < a; ++i)
                    e[r + i] = t >>> 8 * (n ? i : 3 - i) & 255
            }
            function U(e, t, r, n, i, a) {
                if (r + n > e.length)
                    throw new RangeError("Index out of range");
                if (r < 0)
                    throw new RangeError("Index out of range")
            }
            function V(e, t, r, n, i) {
                return i || U(e, t, r, 4, 3.4028234663852886e38, -3.4028234663852886e38),
                K.write(e, t, r, n, 23, 4),
                r + 4
            }
            function k(e, t, r, n, i) {
                return i || U(e, t, r, 8, 1.7976931348623157e308, -1.7976931348623157e308),
                K.write(e, t, r, n, 52, 8),
                r + 8
            }
            function F(e) {
                if (e = G(e).replace(te, ""),
                e.length < 2)
                    return "";
                for (; e.length % 4 !== 0; )
                    e += "=";
                return e
            }
            function G(e) {
                return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "")
            }
            function Y(e) {
                return e < 16 ? "0" + e.toString(16) : e.toString(16)
            }
            function Q(e, t) {
                t = t || 1 / 0;
                for (var r, n = e.length, i = null, a = [], o = 0; o < n; ++o) {
                    if (r = e.charCodeAt(o),
                    r > 55295 && r < 57344) {
                        if (!i) {
                            if (r > 56319) {
                                (t -= 3) > -1 && a.push(239, 191, 189);
                                continue
                            }
                            if (o + 1 === n) {
                                (t -= 3) > -1 && a.push(239, 191, 189);
                                continue
                            }
                            i = r;
                            continue
                        }
                        if (r < 56320) {
                            (t -= 3) > -1 && a.push(239, 191, 189),
                            i = r;
                            continue
                        }
                        r = (i - 55296 << 10 | r - 56320) + 65536
                    } else
                        i && (t -= 3) > -1 && a.push(239, 191, 189);
                    if (i = null,
                    r < 128) {
                        if ((t -= 1) < 0)
                            break;
                        a.push(r)
                    } else if (r < 2048) {
                        if ((t -= 2) < 0)
                            break;
                        a.push(r >> 6 | 192, 63 & r | 128)
                    } else if (r < 65536) {
                        if ((t -= 3) < 0)
                            break;
                        a.push(r >> 12 | 224, r >> 6 & 63 | 128, 63 & r | 128)
                    } else {
                        if (!(r < 1114112))
                            throw new Error("Invalid code point");
                        if ((t -= 4) < 0)
                            break;
                        a.push(r >> 18 | 240, r >> 12 & 63 | 128, r >> 6 & 63 | 128, 63 & r | 128)
                    }
                }
                return a
            }
            function H(e) {
                for (var t = [], r = 0; r < e.length; ++r)
                    t.push(255 & e.charCodeAt(r));
                return t
            }
            function W(e, t) {
                for (var r, n, i, a = [], o = 0; o < e.length && !((t -= 2) < 0); ++o)
                    r = e.charCodeAt(o),
                    n = r >> 8,
                    i = r % 256,
                    a.push(i),
                    a.push(n);
                return a
            }
            function X(e) {
                return J.toByteArray(F(e))
            }
            function q(e, t, r, n) {
                for (var i = 0; i < n && !(i + r >= t.length || i >= e.length); ++i)
                    t[i + r] = e[i];
                return i
            }
            function Z(e) {
                return e !== e
            }
            var J = r(/*! base64-js */
            337)
              , K = r(/*! ieee754 */
            346)
              , $ = r(/*! isarray */
            338);
            t.Buffer = e,
            t.SlowBuffer = g,
            t.INSPECT_MAX_BYTES = 50,
            e.TYPED_ARRAY_SUPPORT = void 0 !== n.TYPED_ARRAY_SUPPORT ? n.TYPED_ARRAY_SUPPORT : i(),
            t.kMaxLength = a(),
            e.poolSize = 8192,
            e._augment = function(t) {
                return t.__proto__ = e.prototype,
                t
            }
            ,
            e.from = function(e, t, r) {
                return s(null, e, t, r)
            }
            ,
            e.TYPED_ARRAY_SUPPORT && (e.prototype.__proto__ = Uint8Array.prototype,
            e.__proto__ = Uint8Array,
            "undefined" != typeof Symbol && Symbol.species && e[Symbol.species] === e && Object.defineProperty(e, Symbol.species, {
                value: null,
                configurable: !0
            })),
            e.alloc = function(e, t, r) {
                return l(null, e, t, r)
            }
            ,
            e.allocUnsafe = function(e) {
                return c(null, e)
            }
            ,
            e.allocUnsafeSlow = function(e) {
                return c(null, e)
            }
            ,
            e.isBuffer = function(e) {
                return !(null == e || !e._isBuffer)
            }
            ,
            e.compare = function(t, r) {
                if (!e.isBuffer(t) || !e.isBuffer(r))
                    throw new TypeError("Arguments must be Buffers");
                if (t === r)
                    return 0;
                for (var n = t.length, i = r.length, a = 0, o = Math.min(n, i); a < o; ++a)
                    if (t[a] !== r[a]) {
                        n = t[a],
                        i = r[a];
                        break
                    }
                return n < i ? -1 : i < n ? 1 : 0
            }
            ,
            e.isEncoding = function(e) {
                switch (String(e).toLowerCase()) {
                case "hex":
                case "utf8":
                case "utf-8":
                case "ascii":
                case "latin1":
                case "binary":
                case "base64":
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return !0;
                default:
                    return !1
                }
            }
            ,
            e.concat = function(t, r) {
                if (!$(t))
                    throw new TypeError('"list" argument must be an Array of Buffers');
                if (0 === t.length)
                    return e.alloc(0);
                var n;
                if (void 0 === r)
                    for (r = 0,
                    n = 0; n < t.length; ++n)
                        r += t[n].length;
                var i = e.allocUnsafe(r)
                  , a = 0;
                for (n = 0; n < t.length; ++n) {
                    var o = t[n];
                    if (!e.isBuffer(o))
                        throw new TypeError('"list" argument must be an Array of Buffers');
                    o.copy(i, a),
                    a += o.length
                }
                return i
            }
            ,
            e.byteLength = v,
            e.prototype._isBuffer = !0,
            e.prototype.swap16 = function() {
                var e = this.length;
                if (e % 2 !== 0)
                    throw new RangeError("Buffer size must be a multiple of 16-bits");
                for (var t = 0; t < e; t += 2)
                    M(this, t, t + 1);
                return this
            }
            ,
            e.prototype.swap32 = function() {
                var e = this.length;
                if (e % 4 !== 0)
                    throw new RangeError("Buffer size must be a multiple of 32-bits");
                for (var t = 0; t < e; t += 4)
                    M(this, t, t + 3),
                    M(this, t + 1, t + 2);
                return this
            }
            ,
            e.prototype.swap64 = function() {
                var e = this.length;
                if (e % 8 !== 0)
                    throw new RangeError("Buffer size must be a multiple of 64-bits");
                for (var t = 0; t < e; t += 8)
                    M(this, t, t + 7),
                    M(this, t + 1, t + 6),
                    M(this, t + 2, t + 5),
                    M(this, t + 3, t + 4);
                return this
            }
            ,
            e.prototype.toString = function() {
                var e = 0 | this.length;
                return 0 === e ? "" : 0 === arguments.length ? N(this, 0, e) : y.apply(this, arguments)
            }
            ,
            e.prototype.equals = function(t) {
                if (!e.isBuffer(t))
                    throw new TypeError("Argument must be a Buffer");
                return this === t || 0 === e.compare(this, t)
            }
            ,
            e.prototype.inspect = function() {
                var e = ""
                  , r = t.INSPECT_MAX_BYTES;
                return this.length > 0 && (e = this.toString("hex", 0, r).match(/.{2}/g).join(" "),
                this.length > r && (e += " ... ")),
                "<Buffer " + e + ">"
            }
            ,
            e.prototype.compare = function(t, r, n, i, a) {
                if (!e.isBuffer(t))
                    throw new TypeError("Argument must be a Buffer");
                if (void 0 === r && (r = 0),
                void 0 === n && (n = t ? t.length : 0),
                void 0 === i && (i = 0),
                void 0 === a && (a = this.length),
                r < 0 || n > t.length || i < 0 || a > this.length)
                    throw new RangeError("out of range index");
                if (i >= a && r >= n)
                    return 0;
                if (i >= a)
                    return -1;
                if (r >= n)
                    return 1;
                if (r >>>= 0,
                n >>>= 0,
                i >>>= 0,
                a >>>= 0,
                this === t)
                    return 0;
                for (var o = a - i, s = n - r, u = Math.min(o, s), l = this.slice(i, a), c = t.slice(r, n), h = 0; h < u; ++h)
                    if (l[h] !== c[h]) {
                        o = l[h],
                        s = c[h];
                        break
                    }
                return o < s ? -1 : s < o ? 1 : 0
            }
            ,
            e.prototype.includes = function(e, t, r) {
                return this.indexOf(e, t, r) !== -1
            }
            ,
            e.prototype.indexOf = function(e, t, r) {
                return w(this, e, t, r, !0)
            }
            ,
            e.prototype.lastIndexOf = function(e, t, r) {
                return w(this, e, t, r, !1)
            }
            ,
            e.prototype.write = function(e, t, r, n) {
                if (void 0 === t)
                    n = "utf8",
                    r = this.length,
                    t = 0;
                else if (void 0 === r && "string" == typeof t)
                    n = t,
                    r = this.length,
                    t = 0;
                else {
                    if (!isFinite(t))
                        throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                    t |= 0,
                    isFinite(r) ? (r |= 0,
                    void 0 === n && (n = "utf8")) : (n = r,
                    r = void 0)
                }
                var i = this.length - t;
                if ((void 0 === r || r > i) && (r = i),
                e.length > 0 && (r < 0 || t < 0) || t > this.length)
                    throw new RangeError("Attempt to write outside buffer bounds");
                n || (n = "utf8");
                for (var a = !1; ; )
                    switch (n) {
                    case "hex":
                        return A(this, e, t, r);
                    case "utf8":
                    case "utf-8":
                        return b(this, e, t, r);
                    case "ascii":
                        return T(this, e, t, r);
                    case "latin1":
                    case "binary":
                        return _(this, e, t, r);
                    case "base64":
                        return E(this, e, t, r);
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                        return S(this, e, t, r);
                    default:
                        if (a)
                            throw new TypeError("Unknown encoding: " + n);
                        n = ("" + n).toLowerCase(),
                        a = !0
                    }
            }
            ,
            e.prototype.toJSON = function() {
                return {
                    type: "Buffer",
                    data: Array.prototype.slice.call(this._arr || this, 0)
                }
            }
            ;
            var ee = 4096;
            e.prototype.slice = function(t, r) {
                var n = this.length;
                t = ~~t,
                r = void 0 === r ? n : ~~r,
                t < 0 ? (t += n,
                t < 0 && (t = 0)) : t > n && (t = n),
                r < 0 ? (r += n,
                r < 0 && (r = 0)) : r > n && (r = n),
                r < t && (r = t);
                var i;
                if (e.TYPED_ARRAY_SUPPORT)
                    i = this.subarray(t, r),
                    i.__proto__ = e.prototype;
                else {
                    var a = r - t;
                    i = new e(a,void 0);
                    for (var o = 0; o < a; ++o)
                        i[o] = this[o + t]
                }
                return i
            }
            ,
            e.prototype.readUIntLE = function(e, t, r) {
                e |= 0,
                t |= 0,
                r || R(e, t, this.length);
                for (var n = this[e], i = 1, a = 0; ++a < t && (i *= 256); )
                    n += this[e + a] * i;
                return n
            }
            ,
            e.prototype.readUIntBE = function(e, t, r) {
                e |= 0,
                t |= 0,
                r || R(e, t, this.length);
                for (var n = this[e + --t], i = 1; t > 0 && (i *= 256); )
                    n += this[e + --t] * i;
                return n
            }
            ,
            e.prototype.readUInt8 = function(e, t) {
                return t || R(e, 1, this.length),
                this[e]
            }
            ,
            e.prototype.readUInt16LE = function(e, t) {
                return t || R(e, 2, this.length),
                this[e] | this[e + 1] << 8
            }
            ,
            e.prototype.readUInt16BE = function(e, t) {
                return t || R(e, 2, this.length),
                this[e] << 8 | this[e + 1]
            }
            ,
            e.prototype.readUInt32LE = function(e, t) {
                return t || R(e, 4, this.length),
                (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3]
            }
            ,
            e.prototype.readUInt32BE = function(e, t) {
                return t || R(e, 4, this.length),
                16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3])
            }
            ,
            e.prototype.readIntLE = function(e, t, r) {
                e |= 0,
                t |= 0,
                r || R(e, t, this.length);
                for (var n = this[e], i = 1, a = 0; ++a < t && (i *= 256); )
                    n += this[e + a] * i;
                return i *= 128,
                n >= i && (n -= Math.pow(2, 8 * t)),
                n
            }
            ,
            e.prototype.readIntBE = function(e, t, r) {
                e |= 0,
                t |= 0,
                r || R(e, t, this.length);
                for (var n = t, i = 1, a = this[e + --n]; n > 0 && (i *= 256); )
                    a += this[e + --n] * i;
                return i *= 128,
                a >= i && (a -= Math.pow(2, 8 * t)),
                a
            }
            ,
            e.prototype.readInt8 = function(e, t) {
                return t || R(e, 1, this.length),
                128 & this[e] ? (255 - this[e] + 1) * -1 : this[e]
            }
            ,
            e.prototype.readInt16LE = function(e, t) {
                t || R(e, 2, this.length);
                var r = this[e] | this[e + 1] << 8;
                return 32768 & r ? 4294901760 | r : r
            }
            ,
            e.prototype.readInt16BE = function(e, t) {
                t || R(e, 2, this.length);
                var r = this[e + 1] | this[e] << 8;
                return 32768 & r ? 4294901760 | r : r
            }
            ,
            e.prototype.readInt32LE = function(e, t) {
                return t || R(e, 4, this.length),
                this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24
            }
            ,
            e.prototype.readInt32BE = function(e, t) {
                return t || R(e, 4, this.length),
                this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]
            }
            ,
            e.prototype.readFloatLE = function(e, t) {
                return t || R(e, 4, this.length),
                K.read(this, e, !0, 23, 4)
            }
            ,
            e.prototype.readFloatBE = function(e, t) {
                return t || R(e, 4, this.length),
                K.read(this, e, !1, 23, 4)
            }
            ,
            e.prototype.readDoubleLE = function(e, t) {
                return t || R(e, 8, this.length),
                K.read(this, e, !0, 52, 8)
            }
            ,
            e.prototype.readDoubleBE = function(e, t) {
                return t || R(e, 8, this.length),
                K.read(this, e, !1, 52, 8)
            }
            ,
            e.prototype.writeUIntLE = function(e, t, r, n) {
                if (e = +e,
                t |= 0,
                r |= 0,
                !n) {
                    var i = Math.pow(2, 8 * r) - 1;
                    P(this, e, t, r, i, 0)
                }
                var a = 1
                  , o = 0;
                for (this[t] = 255 & e; ++o < r && (a *= 256); )
                    this[t + o] = e / a & 255;
                return t + r
            }
            ,
            e.prototype.writeUIntBE = function(e, t, r, n) {
                if (e = +e,
                t |= 0,
                r |= 0,
                !n) {
                    var i = Math.pow(2, 8 * r) - 1;
                    P(this, e, t, r, i, 0)
                }
                var a = r - 1
                  , o = 1;
                for (this[t + a] = 255 & e; --a >= 0 && (o *= 256); )
                    this[t + a] = e / o & 255;
                return t + r
            }
            ,
            e.prototype.writeUInt8 = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 1, 255, 0),
                e.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)),
                this[r] = 255 & t,
                r + 1
            }
            ,
            e.prototype.writeUInt16LE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 2, 65535, 0),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & t,
                this[r + 1] = t >>> 8) : z(this, t, r, !0),
                r + 2
            }
            ,
            e.prototype.writeUInt16BE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 2, 65535, 0),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 8,
                this[r + 1] = 255 & t) : z(this, t, r, !1),
                r + 2
            }
            ,
            e.prototype.writeUInt32LE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 4, 4294967295, 0),
                e.TYPED_ARRAY_SUPPORT ? (this[r + 3] = t >>> 24,
                this[r + 2] = t >>> 16,
                this[r + 1] = t >>> 8,
                this[r] = 255 & t) : B(this, t, r, !0),
                r + 4
            }
            ,
            e.prototype.writeUInt32BE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 4, 4294967295, 0),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 24,
                this[r + 1] = t >>> 16,
                this[r + 2] = t >>> 8,
                this[r + 3] = 255 & t) : B(this, t, r, !1),
                r + 4
            }
            ,
            e.prototype.writeIntLE = function(e, t, r, n) {
                if (e = +e,
                t |= 0,
                !n) {
                    var i = Math.pow(2, 8 * r - 1);
                    P(this, e, t, r, i - 1, -i)
                }
                var a = 0
                  , o = 1
                  , s = 0;
                for (this[t] = 255 & e; ++a < r && (o *= 256); )
                    e < 0 && 0 === s && 0 !== this[t + a - 1] && (s = 1),
                    this[t + a] = (e / o >> 0) - s & 255;
                return t + r
            }
            ,
            e.prototype.writeIntBE = function(e, t, r, n) {
                if (e = +e,
                t |= 0,
                !n) {
                    var i = Math.pow(2, 8 * r - 1);
                    P(this, e, t, r, i - 1, -i)
                }
                var a = r - 1
                  , o = 1
                  , s = 0;
                for (this[t + a] = 255 & e; --a >= 0 && (o *= 256); )
                    e < 0 && 0 === s && 0 !== this[t + a + 1] && (s = 1),
                    this[t + a] = (e / o >> 0) - s & 255;
                return t + r
            }
            ,
            e.prototype.writeInt8 = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 1, 127, -128),
                e.TYPED_ARRAY_SUPPORT || (t = Math.floor(t)),
                t < 0 && (t = 255 + t + 1),
                this[r] = 255 & t,
                r + 1
            }
            ,
            e.prototype.writeInt16LE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 2, 32767, -32768),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & t,
                this[r + 1] = t >>> 8) : z(this, t, r, !0),
                r + 2
            }
            ,
            e.prototype.writeInt16BE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 2, 32767, -32768),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 8,
                this[r + 1] = 255 & t) : z(this, t, r, !1),
                r + 2
            }
            ,
            e.prototype.writeInt32LE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 4, 2147483647, -2147483648),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = 255 & t,
                this[r + 1] = t >>> 8,
                this[r + 2] = t >>> 16,
                this[r + 3] = t >>> 24) : B(this, t, r, !0),
                r + 4
            }
            ,
            e.prototype.writeInt32BE = function(t, r, n) {
                return t = +t,
                r |= 0,
                n || P(this, t, r, 4, 2147483647, -2147483648),
                t < 0 && (t = 4294967295 + t + 1),
                e.TYPED_ARRAY_SUPPORT ? (this[r] = t >>> 24,
                this[r + 1] = t >>> 16,
                this[r + 2] = t >>> 8,
                this[r + 3] = 255 & t) : B(this, t, r, !1),
                r + 4
            }
            ,
            e.prototype.writeFloatLE = function(e, t, r) {
                return V(this, e, t, !0, r)
            }
            ,
            e.prototype.writeFloatBE = function(e, t, r) {
                return V(this, e, t, !1, r)
            }
            ,
            e.prototype.writeDoubleLE = function(e, t, r) {
                return k(this, e, t, !0, r)
            }
            ,
            e.prototype.writeDoubleBE = function(e, t, r) {
                return k(this, e, t, !1, r)
            }
            ,
            e.prototype.copy = function(t, r, n, i) {
                if (n || (n = 0),
                i || 0 === i || (i = this.length),
                r >= t.length && (r = t.length),
                r || (r = 0),
                i > 0 && i < n && (i = n),
                i === n)
                    return 0;
                if (0 === t.length || 0 === this.length)
                    return 0;
                if (r < 0)
                    throw new RangeError("targetStart out of bounds");
                if (n < 0 || n >= this.length)
                    throw new RangeError("sourceStart out of bounds");
                if (i < 0)
                    throw new RangeError("sourceEnd out of bounds");
                i > this.length && (i = this.length),
                t.length - r < i - n && (i = t.length - r + n);
                var a, o = i - n;
                if (this === t && n < r && r < i)
                    for (a = o - 1; a >= 0; --a)
                        t[a + r] = this[a + n];
                else if (o < 1e3 || !e.TYPED_ARRAY_SUPPORT)
                    for (a = 0; a < o; ++a)
                        t[a + r] = this[a + n];
                else
                    Uint8Array.prototype.set.call(t, this.subarray(n, n + o), r);
                return o
            }
            ,
            e.prototype.fill = function(t, r, n, i) {
                if ("string" == typeof t) {
                    if ("string" == typeof r ? (i = r,
                    r = 0,
                    n = this.length) : "string" == typeof n && (i = n,
                    n = this.length),
                    1 === t.length) {
                        var a = t.charCodeAt(0);
                        a < 256 && (t = a)
                    }
                    if (void 0 !== i && "string" != typeof i)
                        throw new TypeError("encoding must be a string");
                    if ("string" == typeof i && !e.isEncoding(i))
                        throw new TypeError("Unknown encoding: " + i)
                } else
                    "number" == typeof t && (t &= 255);
                if (r < 0 || this.length < r || this.length < n)
                    throw new RangeError("Out of range index");
                if (n <= r)
                    return this;
                r >>>= 0,
                n = void 0 === n ? this.length : n >>> 0,
                t || (t = 0);
                var o;
                if ("number" == typeof t)
                    for (o = r; o < n; ++o)
                        this[o] = t;
                else {
                    var s = e.isBuffer(t) ? t : Q(new e(t,i).toString())
                      , u = s.length;
                    for (o = 0; o < n - r; ++o)
                        this[o + r] = s[o % u]
                }
                return this
            }
            ;
            var te = /[^+\/0-9A-Za-z-_]/g
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer, function() {
            return this
        }())
    }
    , /*!********************************!*\
  !*** ./src/modules/sceneIO.js ***!
  \********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            if (e.get("phase") !== ue.RENDERING)
                return e;
            var r = e.get("loadingFiles").size
              , n = e.get("loadedFiles").size
              , i = r + n
              , a = 0 === i ? 1 : (1 + n / i) / 2;
            return a < 1 ? (t("loading", a),
            e.set("progress", a)) : (t("loading", 1),
            e.set("progress", 1))
        }
        function a(e) {
            return {
                type: oe,
                payload: e
            }
        }
        function o(e) {
            return {
                type: J,
                payload: e
            }
        }
        function s(e) {
            return e.getIn(["sceneIO", "id"])
        }
        function u(e, t, r) {
            return function(n) {
                var i = n.read(t);
                return n.logPageView("/player/v2/" + e, r),
                n.dispatch({
                    type: Z.LOAD_SCENE,
                    payload: i
                })
            }
        }
        function l(e) {
            return a("Error Loading Scene")
        }
        function c() {
            return {
                type: te
            }
        }
        function h() {
            return {
                type: re
            }
        }
        function f(e, t) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}
              , n = new Date
              , i = r.waitForPublish;
            return function(r) {
                function a(e) {
                    e.readyState > 1 && (clearTimeout(s),
                    clearTimeout(l))
                }
                if (r.getIn(["sceneGraph", e]))
                    return V.default.resolve(!0);
                var o = t ? (0,
                X.fetchText)(t)(r) : r.callApi({
                    contentType: "text",
                    types: [K, $, ee],
                    url: he + "/scenes/" + e + "/published?wait=" + (i ? "true" : "false"),
                    queryKey: "SCENE" + e,
                    payload: e,
                    onReadyStateChange: a
                })
                  , s = setTimeout(function() {
                    r.error(new Error("Slow Load"), null, {
                        sceneId: e
                    })
                }, fe)
                  , l = setTimeout(function() {
                    r.error(new Error("Load Failure"), null, {
                        sceneId: e
                    })
                }, de)
                  , c = o.then(function(t) {
                    return clearTimeout(s),
                    clearTimeout(l),
                    r.dispatch(u(e, t, new Date - n))
                });
                return c
            }
        }
        function d() {
            return function(e) {
                var t = D(e)
                  , r = s(e);
                return e.callApi({
                    contentType: "text",
                    url: he + "/scenes/" + r + "/published",
                    method: "PUT",
                    body: (0,
                    B.default)({
                        content: t
                    })
                })
            }
        }
        function p(e, t) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            return function(n) {
                return n.dispatch(f(e, t, r)).then(function() {
                    return n.dispatch(o(e))
                })
            }
        }
        function m(e) {
            var t = e.getIn;
            return e.dispatch,
            t(["sceneIO", "progress"])
        }
        function g(e) {
            return e.getIn(["sceneIO", "phase"]) >= ue.PRELOADED && 0 === e.getIn(["sceneIO", "loadingFiles"]).size
        }
        function v(e) {
            return e.getIn(["sceneIO", "phase"]) >= ue.RENDERING && 0 === e.getIn(["sceneIO", "loadingFiles"]).size
        }
        function y(e) {
            return e.getIn(["sceneIO", "loaded"])
        }
        function M(e) {
            return e.getIn(["sceneIO", "phase"]) >= ue.RENDERED
        }
        function w() {
            return function(e) {
                var t = e.getIn(["sceneIO", "preloadCommands"]);
                return t.size ? (e.dispatch({
                    type: ne
                }),
                void V.default.all(t.map(function(e) {
                    return V.default.resolve(e())
                }).toArray()).then(function() {
                    e.dispatch({
                        type: ie
                    })
                }).catch(function(t) {
                    console.log("Caught plugin error: ", t.message),
                    console.log("Caught plugin error, stack: ", t.stack),
                    e.dispatch({
                        type: ie
                    })
                })) : e.dispatch({
                    type: ie
                })
            }
        }
        function x(e) {
            return {
                type: se,
                payload: e
            }
        }
        function A() {
            return {
                type: ae
            }
        }
        function b(e) {
            return {
                type: Z.LOADING_FILE,
                payload: e
            }
        }
        function T(e) {
            return {
                type: Z.LOADED_FILE,
                payload: e
            }
        }
        function _(e) {
            var t = {};
            return e.forEach(function(e) {
                t[e.type] = e.operators.map(function(e) {
                    var t = e.name
                      , r = e.type || t;
                    return [r, (0,
                    H.omit)(["_id", "primitive", "name", "type"], e), t]
                })
            }),
            t
        }
        function E(e, t) {
            (0,
            H.forEach)(function(t) {
                e.dispatch((0,
                X.addFile)((0,
                P.default)({
                    id: t._id
                }, (0,
                H.omit)(["_id", "__v"], t))))
            }, t)
        }
        function S(e, t) {
            pe(e, t, null, t),
            E(e, t.files),
            (0,
            H.mapObjIndexed)(function(t, r) {
                e.dispatch((0,
                q.addClip)(t, r))
            }, t.clips)
        }
        function D(e) {
            var t = (0,
            W.getEvalSceneGraph)(e);
            return e.write({
                nodes: (0,
                B.default)(t.nodes),
                assets: (0,
                X.getActiveAssets)(e),
                clips: e.getIn(["animation", "clips"])
            })
        }
        function N(e) {
            return {
                scene: e.get("sceneGraph").toJS(),
                assets: (0,
                X.getActiveAssets)(e).toJS()
            }
        }
        function I(e) {
            return e.getIn(["sceneIO", "errors"]).size
        }
        function L(e) {
            return e.getIn(["sceneIO", "errors"])
        }
        function C(e) {
            return e.getIn(["sceneIO", "phase"])
        }
        function O() {
            return {
                type: Z.CLEAR_SCENE
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.SCENE_PHASES = void 0;
        var j, R = r(/*! babel-runtime/core-js/object/assign */
        2), P = n(R), z = r(/*! babel-runtime/core-js/json/stringify */
        51), B = n(z), U = r(/*! babel-runtime/core-js/promise */
        30), V = n(U), k = r(/*! babel-runtime/helpers/defineProperty */
        21), F = n(k);
        t.reportError = a,
        t.useScene = o,
        t.getSceneId = s,
        t.loadScene = u,
        t.errorLoadingScene = l,
        t.markRenderingScene = c,
        t.markRenderedScene = h,
        t.fetch = f,
        t.savePublished = d,
        t.fetchAndUse = p,
        t.loadingProgress = m,
        t.areAssetsLoaded = g,
        t.areAssetsPreloaded = v,
        t.isSceneLoaded = y,
        t.isSceneRendered = M,
        t.markPreloaded = w,
        t.preloadCommand = x,
        t.markLoaded = A,
        t.markLoadingFile = b,
        t.markLoadedFile = T,
        t.convertFromJSON = S,
        t.writeScene = D,
        t.exportJSON = N,
        t.numErrors = I,
        t.getErrors = L,
        t.getScenePhase = C,
        t.clearScene = O;
        var G = r(/*! immutable */
        11)
          , Y = r(/*! ./utils/createReducer */
        27)
          , Q = n(Y)
          , H = r(/*! ramda */
        3)
          , W = r(/*! ./sceneGraph */
        9)
          , X = r(/*! ./assets */
        26)
          , q = r(/*! ./animation */
        37)
          , Z = r(/*! ./actionTypes */
        43)
          , J = "USE_SCENE"
          , K = "LOADING_SCENEGRAPH"
          , $ = "LOADED_SCENEGRAPH"
          , ee = "ERROR_LOADING_SCENEGRAPH"
          , te = "RENDERING_SCENE"
          , re = "RENDERED_SCENE"
          , ne = "PRELOADING_SCENE"
          , ie = "PRELOADED_SCENE"
          , ae = "LOADED_SCENE"
          , oe = "SCENE_ERROR"
          , se = "PRELOAD_COMMAND"
          , ue = t.SCENE_PHASES = {
            FAILED: -1,
            UNKNOWN: 0,
            LOADING_SCENEGRAPH: 1,
            LOADED_SCENEGRAPH: 2,
            RENDERING: 3,
            PRELOADING: 4,
            PRELOADED: 5,
            LOADED: 6,
            RENDERED: 7
        }
          , le = (0,
        G.Map)({
            id: null,
            errors: (0,
            G.List)(),
            phase: ue.UNKNOWN,
            progress: 0,
            loadingFiles: (0,
            G.Map)(),
            loadedFiles: (0,
            G.Map)(),
            loaded: !1,
            preloadCommands: (0,
            G.List)()
        })
          , ce = (0,
        Q.default)(le, (j = {},
        (0,
        F.default)(j, J, function(e, t) {
            return e.set("id", t)
        }),
        (0,
        F.default)(j, K, function(e, t) {
            var r = e.get("loaded") || e.get("id") && e.get("id") !== t;
            return r ? e : e.set("phase", ue.LOADING_SCENEGRAPH).set("progress", .25)
        }),
        (0,
        F.default)(j, $, function(e, t) {
            var r = e.get("loaded") || e.get("id") && e.get("id") !== t;
            return r ? e : e.set("phase", ue.LOADED_SCENEGRAPH).set("progress", .5)
        }),
        (0,
        F.default)(j, ee, function(e, t, r) {
            var n = r.action
              , i = n.error
              , a = "Error Loading Scene: " + i.status + " " + i.statusText;
            return e.updateIn(["errors"], (0,
            G.List)(), function(e) {
                return e.push(a)
            })
        }),
        (0,
        F.default)(j, te, function(e, t, r) {
            var n = r.createEvent;
            return i(e.set("phase", ue.RENDERING), n)
        }),
        (0,
        F.default)(j, Z.LOADING_FILE, function(e, t) {
            return e.setIn(["loadingFiles", t], !0)
        }),
        (0,
        F.default)(j, Z.LOADED_FILE, function(e, t, r) {
            var n = r.createEvent;
            return i(e.deleteIn(["loadingFiles", t]).setIn(["loadedFiles", t], !0), n)
        }),
        (0,
        F.default)(j, Z.LOADING_FILE_ERROR, function(e, t, r) {
            var n = r.createEvent;
            return i(e.deleteIn(["loadingFiles", t]), n)
        }),
        (0,
        F.default)(j, ne, function(e, t, r) {
            var n = r.createEvent;
            return n("preloading"),
            e.set("phase", ue.PRELOADING)
        }),
        (0,
        F.default)(j, ie, function(e, t, r) {
            var n = r.createEvent;
            return n("preloaded"),
            e.set("phase", ue.PRELOADED)
        }),
        (0,
        F.default)(j, se, function(e, t) {
            return e.updateIn(["preloadCommands"], (0,
            G.List)(), function(e) {
                return e.push(t)
            })
        }),
        (0,
        F.default)(j, ae, function(e, t, r) {
            var n = r.createEvent;
            return n("loaded"),
            e.set("loaded", !0).set("phase", ue.LOADED)
        }),
        (0,
        F.default)(j, re, function(e, t, r) {
            var n = r.createEvent;
            return n("rendered"),
            e.set("phase", ue.RENDERED)
        }),
        (0,
        F.default)(j, oe, function(e, t) {
            return e.updateIn(["errors"], (0,
            G.List)(), function(e) {
                return e.push(t)
            })
        }),
        (0,
        F.default)(j, Z.CLEAR_SCENE, function(e) {
            return le
        }),
        j))
          , he = "https://clara.io/api"
          , fe = 1e4
          , de = 3e4
          , pe = (0,
        H.curry)(function(e, t, r, n) {
            var i = n._id
              , a = n.name
              , o = n.type
              , s = _(n.plugs);
            e.dispatch((0,
            W.addNode)({
                id: i,
                name: a,
                type: o,
                plugs: s,
                parent: r
            })),
            (0,
            H.forEach)(pe(e, t, i), n.nodes)
        })
          , me = {
            reducer: ce,
            actions: {
                fetch: f,
                fetchAndUse: p,
                loadScene: u,
                useScene: o,
                reportError: a,
                preloadCommand: x,
                savePublished: d,
                clearScene: O
            },
            selectors: {
                isSceneLoaded: y,
                isSceneRendered: M,
                loadingProgress: m,
                getErrors: L,
                numErrors: I,
                getSceneId: s,
                writeScene: D
            }
        };
        t.default = me
    }
    , /*!*********************************************************!*\
  !*** ./src/polyMesh/generic/container/ObjectsByName.js ***!
  \*********************************************************/
    function(e, t) {
        "use strict";
        function r() {
            this.byName = {},
            this.namesByIndex = []
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r,
        r.prototype = {
            constructor: r,
            get length() {
                return this.namesByIndex.length
            },
            set: function(e, t) {
                var r = this.byName;
                e in r == 0 && this.namesByIndex.push(e),
                r[e] = t
            }
        },
        r.Iterator = function(e) {
            this.reset(e || null)
        }
        ,
        r.Iterator.prototype = {
            constructor: r.Iterator,
            reset: function(e) {
                return void 0 !== e && (this.container = e),
                this.name = null,
                this.index = -1,
                this.element = null,
                this
            },
            next: function() {
                var e = this.container;
                if (null === e)
                    return !1;
                var t = e.namesByIndex
                  , r = ++this.index;
                return r >= t.length ? (this.name = null,
                !1) : (this.element = e.byName[this.name = t[r]],
                !0)
            },
            add: function(e, t) {
                var r = this.namesByIndex;
                if (r.indexOf(e) !== -1)
                    throw Error("ObjectsByName: Name '" + e + "' not unique!");
                return r.push(e),
                this.byName[e] = t,
                this
            }
        },
        r.shallowClone = function() {
            var e = new r.Iterator;
            return function(t) {
                var n = new r;
                if (!t)
                    return n;
                var i = n.byName
                  , a = n.namesByIndex;
                for (a.length = t.namesByIndex.length,
                e.reset(t); e.next(); ) {
                    var o = e.name;
                    i[o] = e.element,
                    a[e.index] = o
                }
                return e.reset(null),
                n
            }
        }()
    }
    , /*!***************************************************!*\
  !*** ./~/babel-runtime/helpers/defineProperty.js ***!
  \***************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/object/define-property */
        144)
          , a = n(i);
        t.default = function(e, t, r) {
            return t in e ? (0,
            a.default)(e, t, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = r,
            e
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-dp.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_an-object */
        31)
          , i = r(/*! ./_ie8-dom-define */
        146)
          , a = r(/*! ./_to-primitive */
        101)
          , o = Object.defineProperty;
        t.f = r(/*! ./_descriptors */
        24) ? Object.defineProperty : function(e, t, r) {
            if (n(e),
            t = a(t, !0),
            n(r),
            i)
                try {
                    return o(e, t, r)
                } catch (e) {}
            if ("get"in r || "set"in r)
                throw TypeError("Accessors not supported!");
            return "value"in r && (e[t] = r.value),
            e
        }
    }
    , /*!*************************!*\
  !*** ./~/snabbdom/h.js ***!
  \*************************/
    function(e, t, r) {
        function n(e, t) {
            if (e.ns = "http://www.w3.org/2000/svg",
            void 0 !== t)
                for (var r = 0; r < t.length; ++r)
                    n(t[r].data, t[r].children)
        }
        var i = r(/*! ./vnode */
        160)
          , a = r(/*! ./is */
        107);
        e.exports = function(e, t, r) {
            var o, s, u, l = {};
            if (3 === arguments.length ? (l = t,
            a.array(r) ? o = r : a.primitive(r) && (s = r)) : 2 === arguments.length && (a.array(t) ? o = t : a.primitive(t) ? s = t : l = t),
            a.array(o))
                for (u = 0; u < o.length; ++u)
                    a.primitive(o[u]) && (o[u] = i(void 0, void 0, void 0, o[u]));
            return "s" === e[0] && "v" === e[1] && "g" === e[2] && n(l, o),
            i(e, l, o, s, void 0)
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_descriptors.js ***!
  \*******************************************************************/
    function(e, t, r) {
        e.exports = !r(/*! ./_fails */
        40)(function() {
            return 7 != Object.defineProperty({}, "a", {
                get: function() {
                    return 7
                }
            }).a
        })
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_is-object.js ***!
  \*****************************************************************/
    function(e, t) {
        e.exports = function(e) {
            return "object" == typeof e ? null !== e : "function" == typeof e
        }
    }
    , /*!*******************************!*\
  !*** ./src/modules/assets.js ***!
  \*******************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            return {
                type: Y,
                payload: e,
                meta: {
                    saveFile: t
                }
            }
        }
        function a(e) {
            return {
                type: Q,
                payload: e
            }
        }
        function o(e) {
            return (0,
            z.map)(function(t) {
                return t + "/" + e.get("hash") + e.get("suffix") + "?filename=" + e.get("name")
            }, ["https://d1mly9lp7y5o9.cloudfront.net", "https://d313sr52mgc0rk.cloudfront.net", "https://clara.io/resources"])
        }
        function s(e) {
            return function(t) {
                var r = t.getIn;
                return r(["sceneIO", "loadingFiles", e])
            }
        }
        function u(e) {
            return images[e]
        }
        function l(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return function(r) {
                var n = r.getIn(["assets", e]);
                if (n)
                    return r.callApi((0,
                    O.default)({
                        types: [F.LOADING_FILE, F.LOADED_FILE, F.LOADING_FILE_ERROR],
                        url: o(n),
                        contentType: "img",
                        payload: e,
                        queryKey: "IMAGE" + n.get("hash"),
                        fireAndForget: "undefined" == typeof t.fireAndForget
                    }, t))
            }
        }
        function c(e, t) {
            return t && l(t, {
                fireAndForget: !1
            })(e)
        }
        function h(e) {
            return function(t) {
                var r = t.getIn(["assets", e]);
                if (r.get("content"))
                    return r.get("content");
                var n = r.get("lzma") ? r.set("suffix", "lzma1") : r;
                return t.callApi({
                    types: [F.LOADING_FILE, F.LOADED_FILE, F.LOADING_FILE_ERROR],
                    url: o(n),
                    contentType: "binary",
                    payload: e,
                    queryKey: "FILE" + n.get("hash"),
                    decompress: n.get("lzma"),
                    fireAndForget: !0
                })
            }
        }
        function f(e, t) {
            return e.getIn(["assets", t, "hash"])
        }
        function d(e, t) {
            var r = e.getIn(["assets", t]);
            if (r) {
                var n = o(r);
                return n[n.length - 1]
            }
            return r
        }
        function p(e) {
            return function(t) {
                return t.callApi({
                    contentType: "text",
                    url: (0,
                    z.map)(function(t) {
                        return t + "/" + e
                    }, ["https://d1mly9lp7y5o9.cloudfront.net", "https://d313sr52mgc0rk.cloudfront.net", "https://clara.io/resources"])
                })
            }
        }
        function m(e) {
            return function(t) {
                return t.callApi({
                    contentType: "text",
                    url: "/api/scenes/" + e
                })
            }
        }
        function g(e, t) {
            return e.get("assets").find(t)
        }
        function v(e, t) {
            return e.getIn(["assets"]).filter(t || function() {
                return !0
            }
            )
        }
        function y(e) {
            return e.getIn(["assets"]).map(function(e) {
                var t = e.toJS();
                return t._id = t.id,
                delete t.id,
                t
            }).toArray()
        }
        function M(e) {
            var t = (0,
            V.getEvalSceneGraph)(e);
            return v(e, function(e, r) {
                return !!t.fileReferences.from[r]
            })
        }
        function w(e, t) {
            return Math.log(e) / Math.log(t)
        }
        function x(e) {
            return Math.pow(2, Math.ceil(w(e, 2)))
        }
        function A(e, t, r) {
            return Math.max(t, Math.min(e, r))
        }
        function b(e, t) {
            var r = {};
            return r.width = A(x(e.width), 1, t.width),
            r.height = A(x(e.height), 1, t.height),
            r
        }
        function T(e, t, r) {
            return new L.default(function(n, i) {
                var a = document.createElement("img")
                  , o = new FileReader;
                o.onload = function(i) {
                    a.src = i.target.result,
                    a.onload = function() {
                        var i = document.createElement("canvas")
                          , o = i.getContext("2d");
                        o.drawImage(a, 0, 0);
                        var s = a.width
                          , u = a.height
                          , l = b({
                            width: s,
                            height: u
                        }, {
                            width: t,
                            height: r
                        });
                        i.width = l.width,
                        i.height = l.height;
                        var c = i.getContext("2d");
                        c.drawImage(a, 0, 0, l.width, l.height),
                        n(i.toDataURL(e.type))
                    }
                }
                ,
                o.readAsDataURL(e)
            }
            )
        }
        function _(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return function(r) {
                function n(e) {
                    return r.callApi({
                        types: [H, W, X],
                        url: "https://clara.io/api/files/" + e + "/asset"
                    })
                }
                function a(e) {
                    var n = (0,
                    N.default)({
                        url: e,
                        maxSize: t.resizeTo || J,
                        sceneId: K
                    });
                    return r.callApi({
                        types: [H, W, X],
                        method: "POST",
                        url: "https://clara.io/api/files/image",
                        body: n
                    })
                }
                function o(t) {
                    var n = (0,
                    N.default)({
                        content: t,
                        name: e.name,
                        sceneId: K,
                        type: e.type
                    });
                    return E(r, {
                        body: n
                    })
                }
                function s(e) {
                    return r.dispatch(i((0,
                    O.default)({
                        id: e._id
                    }, e)))
                }
                function u(t) {
                    return r.dispatch((0,
                    V.addNode)({
                        name: t.name || e.name,
                        type: "Image",
                        parent: (0,
                        k.find)(r, {
                            name: "Material Library"
                        }),
                        plugs: {
                            Image: [["Image", {
                                glBitmapFile: t.id,
                                glOption: 1
                            }]],
                            Properties: [["ImageProperties", {}]]
                        }
                    })).then(function(e) {
                        return {
                            imageNodeId: e,
                            assetId: t.id,
                            imageSize: {
                                width: t.height,
                                height: t.width,
                                originalWidth: t.originalWidth,
                                originalHeight: t.originalHeight
                            }
                        }
                    })
                }
                if ("string" == typeof e)
                    return (0,
                    G.isUuid)(e) ? n(e).then(s).then(u) : a(e).then(s).then(u).catch(function(e) {
                        var t = void 0;
                        return t = e.status && e.status < 500 ? "Image not imported, bad url" : e.status && e.status >= 500 ? "Image not imported, internal error" : e,
                        L.default.reject(t)
                    });
                if (!e.type)
                    return L.default.reject("Expect a File");
                if ("image/jpeg" !== e.type && "image/png" !== e.type)
                    return L.default.reject("File must be a jpg or png");
                var l = t.resizeTo || J;
                return T(e, l, l).then(o).then(s).then(u)
            }
        }
        function E(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return e.callApi((0,
            O.default)({
                types: [H, W, X],
                method: "POST",
                url: "https://clara.io/api/files"
            }, t))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.NULL_SCENE_ID = void 0;
        var S, D = r(/*! babel-runtime/core-js/json/stringify */
        51), N = n(D), I = r(/*! babel-runtime/core-js/promise */
        30), L = n(I), C = r(/*! babel-runtime/core-js/object/assign */
        2), O = n(C), j = r(/*! babel-runtime/helpers/defineProperty */
        21), R = n(j);
        t.addFile = i,
        t.removeFile = a,
        t.isLoading = s,
        t.getImage = u,
        t.getOrFetchImage = l,
        t.fetchImage = c,
        t.getOrFetchBinary = h,
        t.getHash = f,
        t.getUrl = d,
        t.fetchText = p,
        t.fetchTransit = m,
        t.find = g,
        t.filter = v,
        t.exportJSON = y,
        t.getActiveAssets = M,
        t.importImage = _,
        t.importFile = E;
        var P = r(/*! immutable */
        11)
          , z = r(/*! ramda */
        3)
          , B = r(/*! ./utils/createReducer */
        27)
          , U = n(B)
          , V = r(/*! ./sceneGraph */
        9)
          , k = r(/*! ./scene */
        4)
          , F = r(/*! ./actionTypes */
        43)
          , G = r(/*! ./utils/selectors */
        77)
          , Y = "ADD_FILE"
          , Q = "REMOVE_FILE"
          , H = "IMPORTING_FILE"
          , W = "IMPORTED_FILE"
          , X = "IMPORT_FILE_ERROR"
          , q = (0,
        P.Map)({})
          , Z = (0,
        U.default)(q, (S = {},
        (0,
        R.default)(S, Y, function(e, t, r) {
            var n = r.action
              , i = r.createEvent
              , a = t.id;
            return n.meta && n.meta.saveFile && i("saveFile", t),
            e.set(a, (0,
            P.Map)(t))
        }),
        (0,
        R.default)(S, Q, function(e, t) {
            return e.delete(t)
        }),
        (0,
        R.default)(S, F.LOAD_SCENE, function(e, t) {
            var r = t.assets;
            return e.merge(r)
        }),
        S))
          , J = 4096
          , K = t.NULL_SCENE_ID = "00000000-0000-0000-0000-000000000000"
          , $ = {
            reducer: Z,
            actions: {
                addFile: i,
                removeFile: a,
                importImage: _
            },
            selectors: {
                _getHash: f,
                getUrl: d,
                filter: v,
                find: g,
                getActiveAssets: M,
                exportJSON: y,
                fetchImage: c
            }
        };
        t.default = $
    }
    , /*!********************************************!*\
  !*** ./src/modules/utils/createReducer.js ***!
  \********************************************/
    function(e, t) {
        "use strict";
        function r(e, t) {
            return function(r, n, i, a) {
                return n && t.hasOwnProperty(n.type) ? t[n.type](r, n.payload, {
                    action: n,
                    createEvent: a,
                    state: i
                }) : r || e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r
    }
    , /*!********************************************!*\
  !*** ./src/translators/utils/decompose.js ***!
  \********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            var t = new o.Vector3
              , r = new o.Quaternion
              , n = new o.Vector3;
            e.decompose(t, r, n);
            var i = (new o.Vector3).copy((new o.Euler).setFromQuaternion(r, "ZYX"));
            return i.multiplyScalar(180 / Math.PI),
            {
                translation: t,
                rotation: i
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! three */
        1)
          , o = n(a)
    }
    , /*!*************************************************!*\
  !*** ./~/babel-runtime/core-js/get-iterator.js ***!
  \*************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/get-iterator */
            274),
            __esModule: !0
        }
    }
    , /*!********************************************!*\
  !*** ./~/babel-runtime/core-js/promise.js ***!
  \********************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/promise */
            288),
            __esModule: !0
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_an-object.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25);
        e.exports = function(e) {
            if (!n(e))
                throw TypeError(e + " is not an object!");
            return e
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_to-iobject.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_iobject */
        92)
          , i = r(/*! ./_defined */
        67);
        e.exports = function(e) {
            return n(i(e))
        }
    }
    , /*!*******************************************************!*\
  !*** ./src/translators/utils/getTargetWorldMatrix.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e, t, r) {
            var n = r || (0,
            a.get)(e, {
                id: t,
                evalPlug: "Transform"
            })
              , i = (0,
            a.get)(e, {
                id: t,
                evalPlug: "Camera"
            });
            if (n && n.target) {
                var s = (0,
                a.getWorldTransform)(e, n.target.nodeId)
                  , u = i.offset;
                return s.decompose(l, c, h),
                u ? s.compose(l.add(u), c, h) : s
            }
            return (0,
            a.getWorldTransform)(e, o.virtualTargetId)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../modules/scene */
        4)
          , o = r(/*! ../../modules/sceneGraph */
        9)
          , s = r(/*! three */
        1)
          , u = n(s)
          , l = new u.Vector3
          , c = new u.Quaternion
          , h = new u.Vector3
    }
    , /*!***********************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_ctx.js ***!
  \***********************************************************/
    function(e, t, r) {
        var n = r(/*! ./_a-function */
        88);
        e.exports = function(e, t, r) {
            if (n(e),
            void 0 === t)
                return e;
            switch (r) {
            case 1:
                return function(r) {
                    return e.call(t, r)
                }
                ;
            case 2:
                return function(r, n) {
                    return e.call(t, r, n)
                }
                ;
            case 3:
                return function(r, n, i) {
                    return e.call(t, r, n, i)
                }
            }
            return function() {
                return e.apply(t, arguments)
            }
        }
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_hide.js ***!
  \************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-dp */
        22)
          , i = r(/*! ./_property-desc */
        54);
        e.exports = r(/*! ./_descriptors */
        24) ? function(e, t, r) {
            return n.f(e, t, i(1, r))
        }
        : function(e, t, r) {
            return e[t] = r,
            e
        }
    }
    , /*!**********************************!*\
  !*** ./src/modules/selection.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return {
                type: y,
                payload: e
            }
        }
        function a(e, t) {
            return e.getIn(["selection", "nodes"]).includes(t)
        }
        function o(e) {
            return e.getIn(["selection", "nodes"]).last()
        }
        function s(e) {
            return e.getIn(["selection", "nodes"]).toArray()
        }
        function u() {
            return {
                type: M
            }
        }
        function l(e) {
            return {
                type: w,
                payload: e
            }
        }
        function c(e) {
            return e.getIn(["selection", "highlightNodes"])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h, f = r(/*! babel-runtime/helpers/defineProperty */
        21), d = n(f);
        t.selectNode = i,
        t.isSelected = a,
        t.lastSelectedNode = o,
        t.getSelectedNodes = s,
        t.deselectAll = u,
        t.setHighlighting = l,
        t.isHighlighting = c;
        var p = r(/*! immutable */
        11)
          , m = r(/*! ./utils/createReducer */
        27)
          , g = n(m)
          , v = r(/*! ./actionTypes */
        43)
          , y = "SELECT_NODE"
          , M = "DESELECT_ALL"
          , w = "SET_HIGHLIGHTING"
          , x = (0,
        p.Map)({
            nodes: (0,
            p.List)(),
            highlightNodes: !1
        })
          , A = (0,
        g.default)(x, (h = {},
        (0,
        d.default)(h, y, function(e, t) {
            var r = e.get("nodes");
            return e.set("nodes", r.includes(t) ? r : r.clear().push(t))
        }),
        (0,
        d.default)(h, v.DELETE_NODE, function(e, t) {
            var r = e.get("nodes").indexOf(t);
            return r === -1 ? e : e.deleteIn(["nodes", r])
        }),
        (0,
        d.default)(h, v.CLEAR_SCENE, function(e) {
            return e.set("nodes", e.get("nodes").clear())
        }),
        (0,
        d.default)(h, M, function(e) {
            return e.set("nodes", e.get("nodes").clear())
        }),
        (0,
        d.default)(h, w, function(e, t) {
            return e.set("highlightNodes", t)
        }),
        h))
          , b = {
            reducer: A,
            actions: {
                selectNode: i,
                deselectAll: u,
                setHighlighting: l
            },
            selectors: {
                isSelected: a,
                lastSelectedNode: o
            }
        };
        t.default = b
    }
    , /*!**********************************!*\
  !*** ./src/modules/animation.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : (0,
            U.Map)();
            return (0,
            U.Map)({
                time: 0,
                startTime: null,
                playing: !1,
                autoplay: !1,
                frameTime: 0,
                animations: (0,
                U.List)(),
                clips: e,
                timelineAnimationIndex: -1,
                dynamicsWorld: null,
                dynamicBodies: {},
                kinematicBodies: {}
            })
        }
        function a(e) {
            return {
                type: J,
                payload: e
            }
        }
        function o(e) {
            return e.getIn(["animation", "time"])
        }
        function s(e) {
            return function(t) {
                var r = new Date
                  , n = e - t.getIn(["animation", "time"])
                  , i = t.getIn(["animation", "dynamicsWorld"]);
                t.getIn(["animation", "animations"]).size ? !function() {
                    var r = 0;
                    t.getIn(["animation", "animations"]).forEach(function(i, a) {
                        var o = c(t, n, e, i, a - r);
                        o || r++
                    })
                }() : t.getIn(["animation", "autoplay"]) && t.dispatch(m()),
                i && (0,
                q.updatePhysics)(t, n, e, i, t.getIn(["animation", "dynamicBodies"]), t.getIn(["animation", "kinematicBodies"])),
                t.dispatch({
                    type: Z,
                    payload: {
                        time: e,
                        startTime: r
                    }
                })
            }
        }
        function u(e, t, r, n) {
            var i = t.vs
              , a = t.ts;
            if (!a.length)
                return n;
            var o = (0,
            V.findIndex)(function(t) {
                return e <= t
            }, a);
            if (o === -1)
                return i[i.length - 1];
            if (0 === o)
                return i[0];
            var s = r(e - a[o - 1], i[o - 1], i[o], a[o] - a[o - 1]);
            return s
        }
        function l(e, t, r, n) {
            if (t.ts)
                return u(e, t, r, n);
            for (var i = {}, a = (0,
            C.default)(t), o = 0; o < a.length; o++)
                i[a[o]] = u(e, t[a[o]], r, n[a[o]]);
            return i
        }
        function c(e, t, r, n, i) {
            var a = n.tracks
              , o = n.first
              , s = n.iterations
              , u = n.duration
              , c = n.easingFn
              , h = n.easingDuration
              , f = n.playSpeed
              , d = n.easingTime
              , p = n.start
              , g = (n.set,
            r)
              , v = o && r < p + h && r > p;
            v ? (d += t * c(r - p, 0, 1, h),
            g = p + d) : d && (g = r - h + d);
            var y = f < 0;
            1 !== f && (g = (g - p) * f + p,
            y && (g += u));
            for (var M = !1, w = [], x = void new Date, A = 0; A < a.length; A++) {
                x = a[A];
                var b = x.start + p
                  , T = x.end + p;
                if (y ? g > T : g < b)
                    M = !0;
                else {
                    var _ = x.value
                      , E = x
                      , S = E.tween
                      , D = E.path
                      , N = E.keyframes
                      , I = E.duration
                      , L = E.currentValue
                      , C = E.trackSet
                      , O = x.startValue;
                    null != O || N || (O = (0,
                    G.get)(e, D),
                    e.dispatch({
                        type: ee,
                        payload: {
                            path: [i, A],
                            attrs: {
                                startValue: O
                            }
                        }
                    }));
                    var j = N ? l(g - b, N, S, L) : g > T ? _ : S(g - b, O, _, I)
                      , R = C(D, j);
                    R && w.push(R),
                    (y ? g >= b : g <= T) && (M = !0)
                }
            }
            if (w.length && e.dispatch((0,
            G.multi)(w)),
            M)
                v && e.dispatch({
                    type: te,
                    payload: {
                        index: i,
                        attrs: {
                            easingTime: d
                        }
                    }
                });
            else if (s > 1)
                e.dispatch({
                    type: te,
                    payload: {
                        index: i,
                        attrs: {
                            first: !1,
                            easingTime: 0,
                            start: r,
                            iterations: s - 1
                        }
                    }
                });
            else {
                if (n.onEnd && n.onEnd(),
                i !== e.getIn(["animation", "timelineAnimationIndex"]))
                    return e.dispatch({
                        type: re,
                        payload: i
                    }),
                    !1;
                e.dispatch({
                    type: te,
                    payload: {
                        index: i,
                        attrs: {
                            start: r
                        }
                    }
                }),
                e.dispatch(m())
            }
            return !0
        }
        function h(e) {
            return e.getIn(["animation", "playing"])
        }
        function f() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            return function(t) {
                t.dispatch({
                    type: K,
                    payload: e.autoplay
                }),
                "undefined" == typeof Ammo || t.getIn(["animation", "dynamicsWorld"]) || t.dispatch({
                    type: oe,
                    payload: (0,
                    q.initPhysics)(t)
                }),
                t.dispatch(s(t.getIn(["animation", "time"])))
            }
        }
        function d() {
            return function(e) {
                if (e.getIn(["animation", "playing"])) {
                    var t = e.getIn(["animation", "startTime"])
                      , r = e.getIn(["animation", "time"])
                      , n = t ? new Date - t : 0;
                    e.dispatch(s(r + n))
                }
            }
        }
        function p(e) {
            if (e.ts)
                return e.ts.length ? e.ts[e.ts.length - 1] : 0;
            for (var t = 0, r = void 0, n = (0,
            C.default)(e), i = 0; i < n.length; i++)
                r = e[n[i]].ts,
                t = r.length ? Math.max(r[r.length - 1], t) : t;
            return t
        }
        function m() {
            return {
                type: $
            }
        }
        function g(e, t, r) {
            var n = ((0,
            B.default)(),
            Array.isArray(r.path) ? r.path : r.path && (0,
            X.find)(e, r.path));
            if (!n && r.path && r.path.id && (delete r.path.id,
            n = (0,
            X.find)(e, r.path)),
            !n && !r.set)
                return console.log("path is not defined for track", r),
                null;
            var i = r.start || 0
              , a = r.value
              , o = r.tween || T(a, r.easing || "linear")
              , s = r.set || G.set
              , u = r.keyframes
              , l = u ? p(u) : r.duration || 0
              , c = l + i
              , h = 0 === l ? a : r.startValue
              , f = n && (0,
            G.get)(e, n);
            return {
                path: n,
                start: i,
                end: c,
                value: a,
                duration: l,
                tween: o,
                startValue: h,
                keyframes: u,
                currentValue: f,
                trackSet: s
            }
        }
        function v(e, t) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            return function(n) {
                var i = n.getIn(["animation", "clips", e]);
                i && (n.dispatch(y((0,
                P.default)({}, i.toJS(), t))),
                r.useTimeline && n.dispatch({
                    type: ie
                }))
            }
        }
        function y(e) {
            return function(t) {
                var r = t.getIn(["animation", "time"])
                  , n = e.name || "Animation"
                  , i = e.iterations || 1
                  , a = e.start || r
                  , o = e.easing || "linear"
                  , s = T(1, o)
                  , u = e.easingDuration || 0
                  , l = "undefined" != typeof e.playSpeed ? e.playSpeed : 1
                  , c = (0,
                V.filter)(function(e) {
                    return !!e
                }, (0,
                V.map)(function(e) {
                    return g(t, r, e)
                }, e.tracks))
                  , d = (0,
                V.reduce)(function(e, t) {
                    return Math.max(e, t.end)
                }, 0, c)
                  , p = e.onEnd || null;
                return t.dispatch({
                    type: ne,
                    payload: {
                        name: n,
                        start: a,
                        easingTime: 0,
                        first: !0,
                        easing: o,
                        easingFn: s,
                        easingDuration: u,
                        iterations: i,
                        tracks: c,
                        onEnd: p,
                        playSpeed: l,
                        duration: d
                    }
                }),
                e.autoplay && !h(t) && t.dispatch(f({
                    autoplay: !0
                })),
                I.default.resolve(!0)
            }
        }
        function M(e, t) {
            return function(r) {
                var n = w(e, r);
                return r.dispatch({
                    type: te,
                    payload: {
                        index: n,
                        attrs: t
                    }
                })
            }
        }
        function w(e, t) {
            return t.getIn(["animation", "animations"]).findIndex(function(t) {
                return t.name === e
            })
        }
        function x(e) {
            return function(t) {
                var r = w(e, t);
                if (r !== -1)
                    return t.dispatch({
                        type: re,
                        payload: r
                    })
            }
        }
        function A(e, t) {
            return {
                type: ae,
                payload: {
                    clip: e,
                    id: t
                }
            }
        }
        function b(e) {
            return (0,
            V.values)(e.getIn(["animation", "clips"]).toJS())
        }
        function T(e, t) {
            var r = Q.default[t];
            if (!r)
                throw new Error("Unknown easing function: " + t);
            if ("object" !== ("undefined" == typeof e ? "undefined" : (0,
            D.default)(e)))
                return r;
            var n = (0,
            C.default)(e);
            return function(e, t, i, a) {
                for (var o = {}, s = 0; s < n.length; s++) {
                    var u = n[s];
                    o[u] = r(e, t[u], i[u], a)
                }
                return o
            }
        }
        function _(e) {
            var t = e.getIn(["animation", "timelineAnimationIndex"]);
            return t < 0 ? null : e.getIn(["animation", "animations", t])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var E, S = r(/*! babel-runtime/helpers/typeof */
        17), D = n(S), N = r(/*! babel-runtime/core-js/promise */
        30), I = n(N), L = r(/*! babel-runtime/core-js/object/keys */
        8), C = n(L), O = r(/*! babel-runtime/helpers/defineProperty */
        21), j = n(O), R = r(/*! babel-runtime/core-js/object/assign */
        2), P = n(R);
        t.setFrameTime = a,
        t.getTime = o,
        t.setTime = s,
        t.isPlaying = h,
        t.startPlaying = f,
        t.incrementTime = d,
        t.stopPlaying = m,
        t.queueClip = v,
        t.queueAnimation = y,
        t.updateAnimationAttrs = M,
        t.findAnimationIndex = w,
        t.removeAnimation = x,
        t.addClip = A,
        t.getClips = b,
        t.getTimelineAnimation = _;
        var z = r(/*! cuid */
        158)
          , B = n(z)
          , U = r(/*! immutable */
        11)
          , V = r(/*! ramda */
        3)
          , k = r(/*! ./utils/createReducer */
        27)
          , F = n(k)
          , G = r(/*! ./sceneGraph */
        9)
          , Y = r(/*! ./utils/tweenFunctions */
        174)
          , Q = n(Y)
          , H = r(/*! ./actionTypes */
        43)
          , W = r(/*! ../store/createStore */
        61)
          , X = r(/*! ./scene */
        4)
          , q = r(/*! ./utils/physics */
        172)
          , Z = "SET_TIME"
          , J = "SET_FRAME_TIME"
          , K = "START_PLAYING"
          , $ = "STOP_PLAYING"
          , ee = "UPDATE_TRACK"
          , te = "UPDATE_ANIMATION"
          , re = "REMOVE_ANIMATION"
          , ne = "QUEUE_ANIMATION"
          , ie = "QUEUE_TIMELINE_ANIMATION"
          , ae = "ADD_CLIP"
          , oe = "INIT_PHYSICS"
          , se = (0,
        F.default)(i(), (E = {},
        (0,
        j.default)(E, W.ActionTypes.INIT, function(e) {
            return i()
        }),
        (0,
        j.default)(E, Z, function(e, t) {
            var r = t.time
              , n = t.startTime;
            return e.set("time", r).set("startTime", n)
        }),
        (0,
        j.default)(E, J, function(e, t) {
            var r = e.get("frameTime");
            return e.set("frameTime", r + .1 * (t - r))
        }),
        (0,
        j.default)(E, K, function(e, t) {
            return e.merge({
                playing: !0,
                autoplay: !!t
            })
        }),
        (0,
        j.default)(E, $, function(e) {
            return e.set("playing", !1)
        }),
        (0,
        j.default)(E, ee, function(e, t) {
            var r = t.path
              , n = t.attrs
              , i = e.getIn(["animations", r[0]])
              , a = i && i.tracks[r[1]];
            return a && (0,
            P.default)(a, n),
            e
        }),
        (0,
        j.default)(E, te, function(e, t) {
            var r = t.index
              , n = t.attrs
              , i = e.getIn(["animations", r]);
            return i && (0,
            P.default)(i, n),
            e
        }),
        (0,
        j.default)(E, re, function(e, t) {
            var r = e;
            return t === e.get("timelineAnimationIndex") && (r = r.set("timelineAnimationIndex", -1)),
            r.deleteIn(["animations", t])
        }),
        (0,
        j.default)(E, ne, function(e, t) {
            return e.updateIn(["animations"], (0,
            U.List)(), function(e) {
                return e.push(t)
            })
        }),
        (0,
        j.default)(E, ie, function(e, t) {
            return e.set("timelineAnimationIndex", e.get("animations").size - 1)
        }),
        (0,
        j.default)(E, ae, function(e, t) {
            var r = t.clip
              , n = t.id;
            return e.setIn(["clips", n], (0,
            U.Map)(r).set("id", n))
        }),
        (0,
        j.default)(E, H.LOAD_SCENE, function(e, t) {
            var r = t.clips;
            return r ? e.mergeIn(["clips"], r) : e
        }),
        (0,
        j.default)(E, H.CLEAR_SCENE, function(e) {
            return i(e.get("clips"))
        }),
        (0,
        j.default)(E, oe, function(e, t) {
            var r = t.dynamicsWorld
              , n = t.dynamicBodies
              , i = t.kinematicBodies;
            return e.set("dynamicsWorld", r).set("dynamicBodies", n).set("kinematicBodies", i)
        }),
        E))
          , ue = {
            reducer: se,
            actions: {
                setTime: s,
                startPlaying: f,
                stopPlaying: m,
                removeAnimation: x,
                queueAnimation: y,
                addClip: A,
                queueClip: v,
                updateAnimationAttrs: M
            },
            selectors: {
                getTime: o,
                getClips: b,
                getTimelineAnimation: _,
                isPlaying: h
            }
        };
        t.default = ue
    }
    , /*!***********************************************************!*\
  !*** ./src/translators/utils/updateCameraLookAtTarget.js ***!
  \***********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e, t, r) {
            u.setFromMatrixPosition(e),
            s.setFromMatrixPosition(t),
            c.makeTranslation(u.x, u.y, u.z),
            c.lookAt(u, s, r || l),
            c.decompose(h, d, f),
            e.decompose(u, m, p),
            e.compose(u, d, p)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! three */
        1)
          , o = n(a)
          , s = new o.Vector3
          , u = new o.Vector3
          , l = new o.Vector3(0,1,1)
          , c = new o.Matrix4
          , h = new o.Vector3
          , f = new o.Vector3
          , d = new o.Quaternion
          , p = new o.Vector3
          , m = new o.Quaternion
    }
    , /*!**************************************************!*\
  !*** ./~/babel-runtime/helpers/slicedToArray.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/is-iterable */
        260)
          , a = n(i)
          , o = r(/*! ../core-js/get-iterator */
        29)
          , s = n(o);
        t.default = function() {
            function e(e, t) {
                var r = []
                  , n = !0
                  , i = !1
                  , a = void 0;
                try {
                    for (var o, u = (0,
                    s.default)(e); !(n = (o = u.next()).done) && (r.push(o.value),
                    !t || r.length !== t); n = !0)
                        ;
                } catch (e) {
                    i = !0,
                    a = e
                } finally {
                    try {
                        !n && u.return && u.return()
                    } finally {
                        if (i)
                            throw a
                    }
                }
                return r
            }
            return function(t, r) {
                if (Array.isArray(t))
                    return t;
                if ((0,
                a.default)(Object(t)))
                    return e(t, r);
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }
        }()
    }
    , /*!*************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_fails.js ***!
  \*************************************************************/
    function(e, t) {
        e.exports = function(e) {
            try {
                return !!e()
            } catch (e) {
                return !0
            }
        }
    }
    , /*!***********************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_has.js ***!
  \***********************************************************/
    function(e, t) {
        var r = {}.hasOwnProperty;
        e.exports = function(e, t) {
            return r.call(e, t)
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-keys.js ***!
  \*******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-keys-internal */
        154)
          , i = r(/*! ./_enum-bug-keys */
        91);
        e.exports = Object.keys || function(e) {
            return n(e, i)
        }
    }
    , /*!************************************!*\
  !*** ./src/modules/actionTypes.js ***!
  \************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.LOAD_SCENE = "LOAD_SCENE",
        t.ADD_NODE = "ADDNODE",
        t.ADD_VR_CAMERA = "ADD_VR_CAMERA",
        t.SET_VR_CAMERA = "SET_VR_CAMERA",
        t.DELETE_NODE = "DELETE_NODE",
        t.LOADING_FILE = "LOADING_FILE",
        t.LOADED_FILE = "LOADED_FILE",
        t.LOADING_FILE_ERROR = "LOADING_FILE_ERROR",
        t.CLEAR_SCENE = "CLEAR_SCENE"
    }
    , /*!*********************************!*\
  !*** ./src/modules/commands.js ***!
  \*********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i() {
            return (0,
            D.Map)({
                all: {},
                allCommands: (0,
                D.List)(),
                tools: (0,
                D.List)(),
                activeCommand: null
            })
        }
        function a(e, t) {
            var r = (0,
            S.default)({}, z, e, {
                name: t
            });
            return r.display === !0 && (r.display = {
                playerTools: !0
            }),
            r
        }
        function o(e, t) {
            return {
                type: O,
                payload: {
                    command: e,
                    name: t
                }
            }
        }
        function s(e) {
            return {
                type: j,
                payload: e
            }
        }
        function u(e, t) {
            return {
                type: R,
                payload: {
                    name: e,
                    opts: t
                }
            }
        }
        function l(e, t) {
            return {
                type: P,
                payload: {
                    name: e,
                    opts: t
                }
            }
        }
        function c(e) {
            return e.getIn(["commands", "tools"])
        }
        function h(e, t) {
            var r = e.getIn(["commands", "all"]);
            return t ? (0,
            N.reduce)(function(e, n) {
                var i = r[n];
                return i.enabled && i.display[t] && (e[n] = i),
                e
            }, {}, (0,
            b.default)(r)) : r
        }
        function f(e, t) {
            return !!t.active || !!t.isActive && t.isActive(e)
        }
        function d(e, t) {
            var r = e.getIn(["commands", "all"])[t];
            return r && f(e, r)
        }
        function p(e) {
            var t = h(e)
              , r = {};
            return (0,
            x.default)(t).forEach(function(t) {
                t.widget && f(e, t) && (r[t.name] = t)
            }),
            r
        }
        function m(e) {
            return function(t) {
                var r = c(t)
                  , n = h(t)
                  , i = n[e];
                i.activate ? f(t, i) || (i.activate.call(i),
                t.dispatch(u(e, {
                    active: !0
                }))) : r.forEach(function(r) {
                    var i = n[r];
                    i.active && i.name !== e && t.dispatch(u(i.name, {
                        active: !1
                    })),
                    i.name === e && t.dispatch(u(i.name, {
                        active: !0
                    }))
                })
            }
        }
        function g(e) {
            return function(t) {
                var r = h(t)
                  , n = r[e];
                n && (n.active && t.dispatch(u(n.name, {
                    active: !1
                })),
                n.deactivate && n.deactivate.call(n))
            }
        }
        function v(e) {
            return function(t) {
                var r = t.getIn(["commands", "all"])[e];
                if (r && r.enabled) {
                    if (r.execute)
                        return r.execute(t);
                    var n = f(t, r);
                    return r.deactivate && n ? t.dispatch(g(e)) : t.dispatch(m(e))
                }
            }
        }
        function y(e, t) {
            return function(r) {
                e.forEach(function(e) {
                    r.dispatch(u(e, t))
                })
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.MOUSE_CONTROLS = void 0;
        var M, w = r(/*! babel-runtime/core-js/object/values */
        85), x = n(w), A = r(/*! babel-runtime/core-js/object/keys */
        8), b = n(A), T = r(/*! babel-runtime/helpers/defineProperty */
        21), _ = n(T), E = r(/*! babel-runtime/core-js/object/assign */
        2), S = n(E);
        t.addCommand = o,
        t.removeCommand = s,
        t.updateCommand = u,
        t.setCommandOptions = l,
        t.getTools = c,
        t.getCommands = h,
        t.isCommandActive = d,
        t.getActiveCommandsWithWidgets = p,
        t.activateCommand = m,
        t.deactivateCommand = g,
        t.runCommand = v,
        t.updateCommands = y;
        var D = r(/*! immutable */
        11)
          , N = r(/*! ramda */
        3)
          , I = r(/*! ./utils/createReducer */
        27)
          , L = n(I)
          , C = (r(/*! ./player */
        5),
        r(/*! ../store/createStore */
        61))
          , O = (t.MOUSE_CONTROLS = ["orbit", "pan", "zoom"],
        "ADD_COMMAND")
          , j = "REMOVE_COMMAND"
          , R = "UPDATE_COMMAND"
          , P = "UPDATE_COMMAND_OPTIONS;"
          , z = {
            enabled: !0,
            display: {},
            options: {},
            isEnabled: function(e, t) {
                return t.enabled
            },
            isVisible: function(e, t) {
                return t.display
            },
            command: null,
            widget: null
        }
          , B = (0,
        L.default)({}, (M = {},
        (0,
        _.default)(M, C.ActionTypes.INIT, function(e) {
            return i()
        }),
        (0,
        _.default)(M, O, function(e, t) {
            var r = t.command
              , n = t.name
              , i = a(r, n)
              , o = e.get("all");
            o[n] = i;
            var s = e.updateIn(["allCommands"], (0,
            D.List)(), function(e) {
                return e.push(n)
            });
            return i.tool && (s = s.updateIn(["tools"], (0,
            D.List)(), function(e) {
                return e.push(n)
            })),
            s
        }),
        (0,
        _.default)(M, j, function(e, t) {
            var r = e.get("all");
            delete r[t];
            var n = e.getIn(["tools"]).indexOf(t)
              , i = e.getIn(["allCommands"]).indexOf(t)
              , a = e;
            return n >= 0 && (a = a.deleteIn(["tools", n])),
            i >= 0 && (a = a.deleteIn(["allCommands", i])),
            a
        }),
        (0,
        _.default)(M, R, function(e, t) {
            var r = t.name
              , n = t.opts
              , i = e.get("all")[r];
            return i && (0,
            S.default)(i, n),
            e
        }),
        (0,
        _.default)(M, P, function(e, t) {
            var r = t.name
              , n = t.opts
              , i = e.get("all")[r];
            return i && (0,
            S.default)(i.options, n),
            e
        }),
        M))
          , U = {
            reducer: B,
            actions: {
                activateCommand: m,
                addCommand: o,
                deactivateCommand: g,
                runCommand: v,
                setCommandOptions: l,
                updateCommand: u,
                updateCommands: y,
                removeCommand: s
            },
            selectors: {}
        };
        t.default = U
    }
    , /*!**************************************************!*\
  !*** ./src/polyMesh/geometric/model/PolyMaps.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a() {
            h.default.call(this)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/object/assign */
        2)
          , s = i(o)
          , u = r(/*! babel-runtime/core-js/object/create */
        47)
          , l = i(u);
        t.default = a;
        var c = r(/*! ../../generic/container/ObjectsByName */
        20)
          , h = i(c)
          , f = r(/*! three */
        1)
          , d = n(f);
        a.prototype = (0,
        l.default)(h.default.prototype),
        a.prototype.constructor = a,
        (0,
        s.default)(a, {
            TypePosition: 1,
            TypeNormal: 2,
            TypeTangent: 4,
            TypeUV: 8,
            TypeColor: 16,
            id: function(e, t) {
                var r = a.TypeInfo[e].AnchorName;
                return null != t ? r + "." + t : r
            },
            checkId: function(e) {
                var t = a.getAnchorName(e)
                  , r = a.getMapName(e, t)
                  , n = a.getTypeInfo(t);
                if (null === n || "" === r)
                    throw Error("Invalid PolyMap ID '" + e + "'!");
                return e
            },
            getAnchorName: function(e) {
                var t = e.indexOf(".");
                return t === -1 ? e : e.slice(0, t)
            },
            getMapName: function(e, t) {
                return e === t ? null : e.slice(t.length + 1)
            },
            getTypeInfo: function(e) {
                for (var t = a.TypeInfo, r = 0, n = t.length; r !== n; ++r) {
                    var i = t[r];
                    if (null !== i && i.AnchorName === e)
                        return t[r]
                }
                return null
            },
            resolveMap: function(e, t) {
                var r = a.getAnchorName(t);
                if (t === r)
                    return e[r];
                var n = e[r];
                return n && n.byName[t.slice(r.length + 1)]
            },
            assignMap: function(e, t, r) {
                var n = a.getAnchorName(t)
                  , i = a.getMapName(t, n);
                if (null === i)
                    e[n] = r;
                else {
                    var o = e[n];
                    null === o && (o = new a,
                    e[n] = o),
                    o.set(i, r)
                }
            },
            Iterator: function(e) {
                h.default.Iterator.call(this),
                this.reset(e || null)
            }
        }),
        a.TypeInfo = [null, {
            Type: a.TypePosition,
            AnchorName: "positions",
            ElementType: d.Vector3
        }, {
            Type: a.TypeNormal,
            AnchorName: "normalMap",
            ElementType: d.Vector3
        }, null, {
            Type: a.TypeTangent,
            AnchorName: "tangentMap",
            ElementType: d.Vector3
        }, null, null, null, {
            Type: a.TypeUV,
            AnchorName: "uvMaps",
            ElementType: d.Vector2
        }, null, null, null, null, null, null, null, {
            Type: a.TypeColor,
            AnchorName: "colorMaps",
            ElementType: d.Color
        }],
        (0,
        s.default)(a, {
            IdPositions: a.id(a.TypePosition),
            IdNormals: a.id(a.TypeNormal),
            IdTangents: a.id(a.TypeTangent)
        }),
        a.Iterator.prototype = (0,
        s.default)((0,
        l.default)(h.default.Iterator.prototype), {
            constructor: a.Iterator,
            _super: h.default.Iterator.prototype,
            reset: function(e) {
                this._super.reset.call(this, null);
                var t = e || null;
                this.mesh = t,
                this.byName = t,
                this.typeId = 0
            },
            getId: function() {
                return a.id(this.typeId, this.name)
            },
            next: function() {
                if (this._super.next.call(this))
                    return !0;
                var e = this.mesh
                  , t = this.typeId
                  , r = null
                  , n = null;
                switch (t <<= 1) {
                case 0:
                    t = 1;
                case a.TypePosition:
                    r = e.positions;
                    break;
                case a.TypeNormal:
                    r = e.normalMap;
                    break;
                case a.TypeTangent:
                    r = e.tangentMap;
                    break;
                case a.TypeUV:
                    n = e.uvMaps;
                    break;
                case a.TypeColor:
                    n = e.colorMaps;
                    break;
                default:
                    return this.reset(null),
                    !1
                }
                return this.typeId = t,
                null !== n && void 0 !== n ? (this.byName = n.byName,
                this._super.reset.call(this, n).next()) : null !== r && void 0 !== r ? (this.element = r,
                this.index = t,
                this.name = null,
                !0) : this.next()
            }
        })
    }
    , /*!****************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Lathe.js ***!
  \****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i) {
            var a = new l.default(s.Vector3,(r + 1) * e.length)
              , o = new l.default(s.Vector3,(r + 1) * t.length)
              , u = 0
              , c = new Uint32Array(r * (e.length - 1) + 1)
              , f = new Uint32Array(r * (e.length - 1) * 4)
              , p = 0
              , g = new l.default(s.Vector2,(r + 1) * e.length);
            r = r || 12,
            n = n || 0,
            i = i || 2 * Math.PI;
            var y = (1 / (e.length - 1),
            1 / r);
            c[0] = 0;
            for (var M = 1, w = new s.Vector2, x = new s.Vector3, A = new s.Vector3, b = (new s.Matrix4).identity(), T = (new s.Matrix3).identity(), _ = 0, E = r; _ <= E; _++) {
                var S = n + _ * y * i;
                b.copy(b.makeRotationY(S)),
                T.getNormalMatrix(b);
                for (var D = _ * y, N = 0, I = e.length; N < I; N++) {
                    e.getAt(N, x),
                    t.getAt(N, A),
                    x.applyMatrix3(T),
                    A.applyMatrix3(T),
                    x.set(Math.round(1e3 * x.x) / 1e3, Math.round(1e3 * x.y) / 1e3, Math.round(1e3 * x.z) / 1e3),
                    A.set(Math.round(1e3 * A.x) / 1e3, Math.round(1e3 * A.y) / 1e3, Math.round(1e3 * A.z) / 1e3),
                    a.setAt(u, x),
                    o.setAt(u, A);
                    var L = N / (e.length - 1);
                    w.set(D, L),
                    g.setAt(u++, w)
                }
            }
            for (var C = e.length, O = 0, j = r; O < j; O++)
                for (var R = 0, P = e.length - 1; R < P; R++) {
                    var z = R + C * O
                      , B = z
                      , U = z + C
                      , V = z + 1 + C
                      , k = z + 1;
                    f[p++] = B,
                    f[p++] = U,
                    f[p++] = V,
                    f[p++] = k,
                    c[M++] = p
                }
            var F = new m.default({
                faceRangeOffsets: c,
                faceValueIndices: f,
                values: a
            })
              , G = new m.default({
                faceRangeOffsets: c,
                faceValueIndices: f,
                values: o
            })
              , Y = new m.default({
                faceRangeOffsets: c,
                faceValueIndices: f,
                values: g
            })
              , Q = new h.default
              , H = "default";
            Q.set(H, Y);
            var W = new d.default;
            return W.faceRangeOffsets = F.faceRangeOffsets,
            W.positions = F,
            W.normalMap = G,
            W.uvMaps = Q,
            (0,
            v.default)(new d.default(W))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectsByName */
        20)
          , h = n(c)
          , f = r(/*! ../model/PolyMesh */
        12)
          , d = n(f)
          , p = r(/*! ../model/PolyMap */
        10)
          , m = n(p)
          , g = r(/*! ../operator/cleanPolyMesh */
        208)
          , v = n(g)
    }
    , /*!**************************************************!*\
  !*** ./~/babel-runtime/core-js/object/create.js ***!
  \**************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/create */
            280),
            __esModule: !0
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iterators.js ***!
  \*****************************************************************/
    function(e, t) {
        e.exports = {}
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_to-object.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_defined */
        67);
        e.exports = function(e) {
            return Object(n(e))
        }
    }
    , /*!**************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js ***!
  \**************************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_string-at */
        314)(!0);
        r(/*! ./_iter-define */
        93)(String, "String", function(e) {
            this._t = String(e),
            this._i = 0
        }, function() {
            var e, t = this._t, r = this._i;
            return r >= t.length ? {
                value: void 0,
                done: !0
            } : (e = n(t, r),
            this._i += e.length,
            {
                value: e,
                done: !1
            })
        })
    }
    , /*!***************************************************!*\
  !*** ./~/babel-runtime/core-js/json/stringify.js ***!
  \***************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/json/stringify */
            276),
            __esModule: !0
        }
    }
    , /*!***********************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_cof.js ***!
  \***********************************************************/
    function(e, t) {
        var r = {}.toString;
        e.exports = function(e) {
            return r.call(e).slice(8, -1)
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-pie.js ***!
  \******************************************************************/
    function(e, t) {
        t.f = {}.propertyIsEnumerable
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_property-desc.js ***!
  \*********************************************************************/
    function(e, t) {
        e.exports = function(e, t) {
            return {
                enumerable: !(1 & e),
                configurable: !(2 & e),
                writable: !(4 & e),
                value: t
            }
        }
    }
    , /*!*************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js ***!
  \*************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-dp */
        22).f
          , i = r(/*! ./_has */
        41)
          , a = r(/*! ./_wks */
        13)("toStringTag");
        e.exports = function(e, t, r) {
            e && !i(e = r ? e : e.prototype, a) && n(e, a, {
                configurable: !0,
                value: t
            })
        }
    }
    , /*!***********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js ***!
  \***********************************************************************/
    function(e, t, r) {
        r(/*! ./es6.array.iterator */
        319);
        for (var n = r(/*! ./_global */
        15), i = r(/*! ./_hide */
        35), a = r(/*! ./_iterators */
        48), o = r(/*! ./_wks */
        13)("toStringTag"), s = ["NodeList", "DOMTokenList", "MediaList", "StyleSheetList", "CSSRuleList"], u = 0; u < 5; u++) {
            var l = s[u]
              , c = n[l]
              , h = c && c.prototype;
            h && !h[o] && i(h, o, l),
            a[l] = a.Array
        }
    }
    , /*!******************************!*\
  !*** ./~/process/browser.js ***!
  \******************************/
    function(e, t) {
        function r() {
            throw new Error("setTimeout has not been defined")
        }
        function n() {
            throw new Error("clearTimeout has not been defined")
        }
        function i(e) {
            if (c === setTimeout)
                return setTimeout(e, 0);
            if ((c === r || !c) && setTimeout)
                return c = setTimeout,
                setTimeout(e, 0);
            try {
                return c(e, 0)
            } catch (t) {
                try {
                    return c.call(null, e, 0)
                } catch (t) {
                    return c.call(this, e, 0)
                }
            }
        }
        function a(e) {
            if (h === clearTimeout)
                return clearTimeout(e);
            if ((h === n || !h) && clearTimeout)
                return h = clearTimeout,
                clearTimeout(e);
            try {
                return h(e)
            } catch (t) {
                try {
                    return h.call(null, e)
                } catch (t) {
                    return h.call(this, e)
                }
            }
        }
        function o() {
            m && d && (m = !1,
            d.length ? p = d.concat(p) : g = -1,
            p.length && s())
        }
        function s() {
            if (!m) {
                var e = i(o);
                m = !0;
                for (var t = p.length; t; ) {
                    for (d = p,
                    p = []; ++g < t; )
                        d && d[g].run();
                    g = -1,
                    t = p.length
                }
                d = null,
                m = !1,
                a(e)
            }
        }
        function u(e, t) {
            this.fun = e,
            this.array = t
        }
        function l() {}
        var c, h, f = e.exports = {};
        !function() {
            try {
                c = "function" == typeof setTimeout ? setTimeout : r
            } catch (e) {
                c = r
            }
            try {
                h = "function" == typeof clearTimeout ? clearTimeout : n
            } catch (e) {
                h = n
            }
        }();
        var d, p = [], m = !1, g = -1;
        f.nextTick = function(e) {
            var t = new Array(arguments.length - 1);
            if (arguments.length > 1)
                for (var r = 1; r < arguments.length; r++)
                    t[r - 1] = arguments[r];
            p.push(new u(e,t)),
            1 !== p.length || m || i(s)
        }
        ,
        u.prototype.run = function() {
            this.fun.apply(null, this.array)
        }
        ,
        f.title = "browser",
        f.browser = !0,
        f.env = {},
        f.argv = [],
        f.version = "",
        f.versions = {},
        f.on = l,
        f.addListener = l,
        f.once = l,
        f.off = l,
        f.removeListener = l,
        f.removeAllListeners = l,
        f.emit = l,
        f.binding = function(e) {
            throw new Error("process.binding is not supported")
        }
        ,
        f.cwd = function() {
            return "/"
        }
        ,
        f.chdir = function(e) {
            throw new Error("process.chdir is not supported")
        }
        ,
        f.umask = function() {
            return 0
        }
    }
    , /*!************************************!*\
  !*** ./src/modules/annotations.js ***!
  \************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            return {
                type: y,
                payload: {
                    id: e,
                    attrs: t
                }
            }
        }
        function a(e) {
            return {
                type: y,
                payload: {
                    id: e,
                    attrs: {
                        pinned: !0,
                        open: !0
                    }
                }
            }
        }
        function o(e) {
            return {
                type: y,
                payload: {
                    id: e,
                    attrs: {
                        pinned: !1,
                        open: !1
                    }
                }
            }
        }
        function s(e) {
            return {
                type: M,
                payload: e
            }
        }
        function u(e) {
            return {
                type: w,
                payload: e
            }
        }
        function l(e) {
            return e.getIn(["annotations", "customAnnotationFn"])
        }
        function c(e) {
            return e.getIn(["annotations", "customOverlayFn"])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h, f = r(/*! babel-runtime/helpers/defineProperty */
        21), d = n(f);
        t.setAnnotationProperties = i,
        t.openAnnotation = a,
        t.closeAnnotation = o,
        t.useCustomAnnotationFunction = s,
        t.useCustomOverlayFunction = u,
        t.getCustomAnnotationFunction = l,
        t.getCustomOverlayFunction = c;
        var p = r(/*! immutable */
        11)
          , m = r(/*! ./utils/createReducer */
        27)
          , g = n(m)
          , v = r(/*! ./actionTypes */
        43)
          , y = "SET_ANNOTATION_PROPERTIES"
          , M = "USE_CUSTOM_ANNOTATION_FUNCTION"
          , w = "USE_CUSTOM_OVERLAY_FUNCTION"
          , x = (0,
        p.Map)({
            customAnnotationFn: null,
            customOverlayFn: null
        })
          , A = (0,
        g.default)(x, (h = {},
        (0,
        d.default)(h, y, function(e, t) {
            var r = t.id
              , n = t.attrs
              , i = e.get("id") || (0,
            p.Map)();
            return e.set(r, i.merge(n))
        }),
        (0,
        d.default)(h, M, function(e, t) {
            return e.set("customAnnotationFn", t)
        }),
        (0,
        d.default)(h, w, function(e, t) {
            return e.set("customOverlayFn", t)
        }),
        (0,
        d.default)(h, v.CLEAR_SCENE, function(e) {
            return (0,
            p.Map)({
                customAnnotationFn: e.get("customAnnotationFn")
            })
        }),
        h))
          , b = {
            reducer: A,
            actions: {
                setAnnotationProperties: i,
                openAnnotation: a,
                closeAnnotation: o,
                useCustomAnnotationFunction: s,
                useCustomOverlayFunction: u
            },
            selectors: {
                getCustomAnnotationFunction: l
            }
        };
        t.default = b
    }
    , /*!*********************************************************!*\
  !*** ./src/polyMesh/generic/algorithm/IndexMappings.js ***!
  \*********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../utility/Arrays */
        16)
          , a = n(i)
          , o = {
            identity: function(e, t) {
                for (var r = a.default.maybeCreate(t || Uint32Array, e), n = 0; n !== e; ++n)
                    r[n] = n;
                return r
            },
            identityForReading: function(e) {
                var t = o._identityProto;
                return e > t.length && (t = o.identity(5 * e / 4 | 0),
                o._identityProto = t),
                t.subarray(0, e)
            },
            _identityProto: a.default.Empty.Uint32Array,
            inverse: function(e, t, r) {
                for (var n = a.default.maybeCreate(r || Uint32Array, t), i = 0, o = e.length; i !== o; ++i)
                    n[e[i]] = i;
                return n
            },
            apply: function(e, t, r) {
                for (var n = r || e, i = 0, a = e.length; i !== a; ++i)
                    n[i] = t[e[i]];
                return e
            },
            histogram: function(e, t, r) {
                for (var n = a.default.maybeCreate(r || Uint32Array, t), i = 0, o = e.length; i !== o; ++i)
                    ++n[e[i]];
                return n
            }
        };
        t.default = o
    }
    , /*!********************************************************!*\
  !*** ./src/polyMesh/generic/container/ObjectBuffer.js ***!
  \********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            c.default.call(this, t || Float32Array),
            this.elementSize = r || e.InstanceScalarSize,
            this.type = e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/create */
        47)
          , o = n(a)
          , s = r(/*! babel-runtime/core-js/object/assign */
        2)
          , u = n(s);
        t.default = i;
        var l = r(/*! ./BlockBuffer */
        126)
          , c = n(l)
          , h = r(/*! ./ObjectArrayView */
        7)
          , f = n(h);
        i.prototype = (0,
        u.default)((0,
        o.default)(c.default.prototype), {
            constructor: i,
            toObjectArrayViewAndClear: function() {
                return new f.default(this.type,null,this.toArrayAndClear())
            },
            getAt: function(e, t) {
                var r = t || new this.type
                  , n = e >> this.intraBlockIndexBits
                  , i = e & this.intraBlockIndexMask;
                return r.fromArray(this.blocks[n], i * this.elementSize)
            },
            setAt: function(e, t) {
                var r = e >> this.intraBlockIndexBits
                  , n = e & this.intraBlockIndexMask;
                t.toArray(this.blocks[r], n * this.elementSize)
            },
            push: function(e) {
                var t = this.length++
                  , r = this.lastBlock
                  , n = t & this.intraBlockIndexMask;
                if (0 === n) {
                    var i = this.intraBlockIndexMask + 1;
                    r = new this.arrayType(i * this.elementSize),
                    this.lastBlock = r,
                    this.blocks.push(r)
                }
                return e.toArray(r, n * this.elementSize),
                t + 1
            }
        })
    }
    , /*!**********************************!*\
  !*** ./src/store/createStore.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            e ? (f = e,
            d = t) : (f = requestAnimationFrame,
            d = window)
        }
        function a(e, t, r) {
            function n(e) {
                for (var t = arguments.length, r = Array(t > 1 ? t - 1 : 0), n = 1; n < t; n++)
                    r[n - 1] = arguments[n];
                P.push({
                    type: e,
                    args: r
                })
            }
            function o() {
                return j
            }
            function s(e) {
                return j.getIn(e)
            }
            function c(e) {
                return j.get(e)
            }
            function m() {
                return V
            }
            function g(e) {
                V = e
            }
            function v(e) {
                k = e
            }
            function y() {
                return !!k
            }
            function M() {
                for (var e = arguments.length, t = Array(e), r = 0; r < e; r++)
                    t[r] = arguments[r];
                return k.apply(void 0, [this].concat(t))
            }
            function w(e, t) {
                var r = "https://www.google-analytics.com/collect?v=1&tid=UA-38840155-1&cid=555&t=pageview&dh=" + encodeURI(window.location.hostname) + ("&dt=" + encodeURI(document.title) + "&dp=" + encodeURI(e)) + (t ? "&plt=" + t : "");
                Y.callApi({
                    contentType: "text",
                    method: "POST",
                    url: r
                }).catch(function(e) {})
            }
            function x(e) {
                B = B.concat(e)
            }
            function A() {
                C = (0,
                l.withRecords)(B, "NoneNoOp")
            }
            function b(e) {
                return C || A(),
                C.fromJSON(e)
            }
            function T(e) {
                return C || A(),
                C.toJSON(e)
            }
            function _(e) {
                U = e
            }
            function E(e, t) {
                var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                if (t && console.error(t),
                !U)
                    throw e;
                U.error(e, r),
                e.message ? (console.error(e.message),
                e.stack && console.log(e.stack)) : console.error(e)
            }
            function S(e) {
                R.push(e);
                var t = !0;
                return function() {
                    if (t) {
                        t = !1;
                        var r = R.indexOf(e);
                        R.splice(r, 1)
                    }
                }
            }
            function D() {
                function e() {
                    t ? r = !0 : (t = !0,
                    r = !1,
                    f.call(d, function() {
                        try {
                            var n = P.splice(0, P.length);
                            R.slice().forEach(function(e) {
                                return e(n)
                            })
                        } catch (e) {
                            E(e)
                        }
                        t = !1,
                        r && e()
                    }))
                }
                var t = !1
                  , r = !1;
                return e
            }
            function N(e) {
                if (!(0,
                u.default)(e))
                    throw new Error("Actions must be plain objects. Use custom middleware for async actions.");
                if ("undefined" == typeof e.type)
                    throw console.error("Invalid action: ", e),
                    new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');
                if (z)
                    throw new Error("Reducers may not dispatch actions.");
                try {
                    z = !0,
                    j = O(j, e, n)
                } catch (e) {
                    E(e)
                } finally {
                    z = !1
                }
                return F(),
                h.default.Promise.resolve(e.resolve ? e.resolve : e.payload)
            }
            function I(e) {
                this.createCanvas = e
            }
            function L(e) {
                O = e,
                N({
                    type: p.INIT
                })
            }
            if ("function" == typeof t && "undefined" == typeof r && (r = t,
            t = void 0),
            "function" == typeof r)
                return r(a)(e, t);
            var C = void 0
              , O = e
              , j = t
              , R = []
              , P = []
              , z = !1
              , B = []
              , U = !1
              , V = null
              , k = null;
            h.default.on("error", E);
            var F = D()
              , G = function(e, t) {
                var r = document.createElement("Canvas");
                return r.width = e,
                r.height = t,
                r
            };
            N({
                type: p.INIT
            });
            var Y = {
                dispatch: N,
                subscribe: S,
                getState: o,
                getIn: s,
                get: c,
                replaceReducer: L,
                setTranslator: g,
                getTranslator: m,
                addRecords: x,
                read: b,
                write: T,
                useRollbar: _,
                error: E,
                setApi: v,
                hasApi: y,
                callApi: M,
                createEvent: n,
                setRequestAnimationFrame: i,
                logPageView: w,
                createCanvas: G,
                setCreateCanvas: I
            };
            return Y
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.ActionTypes = void 0;
        var o = r(/*! babel-runtime/core-js/set-immediate */
        265);
        n(o),
        t.default = a;
        var s = r(/*! ./isPlainObject */
        133)
          , u = n(s)
          , l = r(/*! ./transitImmutable */
        237)
          , c = r(/*! rsvp */
        106)
          , h = n(c)
          , f = void 0
          , d = void 0;
        i();
        var p = t.ActionTypes = {
            INIT: "@@redux/INIT"
        }
    }
    , /*!************************************!*\
  !*** ./src/translators/bingeom.js ***!
  \************************************/
    function(e, t, r) {
        (function(e) {
            "use strict";
            function n(e) {
                return e && e.__esModule ? e : {
                    default: e
                }
            }
            function i(t) {
                if (t instanceof Uint32Array)
                    return t;
                if (t instanceof ArrayBuffer)
                    return new Uint32Array(t);
                if ("undefined" != typeof e && t instanceof e)
                    return new Uint32Array(new Uint8Array(t).buffer);
                throw new Error("Invalid bingeom type: " + ("undefined" == typeof t ? "undefined" : (0,
                b.default)(t)))
            }
            function a(e) {
                var t = e[e.length - 2];
                if (!t)
                    throw new Error("No footer in bingeom");
                var r = new Uint8Array(e.buffer)
                  , n = r.byteLength - 8;
                return r = r.subarray(n - t, n),
                JSON.parse(String.fromCharCode.apply(null, r))
            }
            function o(e) {
                return void 0 !== e && "number" == typeof e.o && "number" == typeof e.l
            }
            function s(e) {
                return e && o(e.faceCount) && o(e.faces) && o(e.positions)
            }
            function u(e, t) {
                if (!e)
                    throw new Error(t)
            }
            function l(e, t) {
                var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                if (!t)
                    return r ? new E[r].arr(0) : [];
                var n = E[r || _[t.b || 4]];
                return new n.arr(e,t.o,t.l >> n.shift)
            }
            function c(e, t) {
                return e
            }
            function h(e, t) {
                if (e.length % t !== 0)
                    throw new Error("Invalid face index array");
                for (var r = t - 2, n = 3 * (e.length * r) / t, i = new e.constructor(n), a = 0, o = 0, s = e.length; o < s; )
                    for (var u = e[o++], l = e[o++], c = r; c > 0; --c)
                        i[a++] = u,
                        i[a++] = l,
                        l = e[o++],
                        i[a++] = l;
                return i
            }
            function f(e, t) {
                for (var r = t.length, n = -(r << 1), i = r - 1; i >= 0; --i)
                    n += t[i];
                for (var a = new e.constructor(3 * n), o = 0, s = 0, u = 0, l = t.length; u < l; ++u)
                    for (var c = e[s++], h = e[s++], f = t[u] - 2; f > 0; --f)
                        a[o++] = c,
                        a[o++] = h,
                        h = e[s++],
                        a[o++] = h;
                return a
            }
            function d(e) {
                return S[e]
            }
            function p(e, t) {
                return S[e] = t,
                t
            }
            function m(e) {
                var t = i(e)
                  , r = a(t)
                  , n = t.buffer;
                u(s(r), "Invalid Polymesh Data?");
                var o = l(n, r.positions, "RawFloat32")
                  , d = l(n, r.faceCount)
                  , p = d;
                1 === d.length && (p = d[0]);
                var m = 1 === d.length ? 3 !== d[0] ? h : c : f
                  , g = m(l(n, r.faces), p)
                  , v = r.normalMap && {
                    faces: m(l(n, r.normalMap.faces), p),
                    values: l(n, r.normalMap.values, "RawFloat32")
                }
                  , y = null;
                if (r.uvMaps && (0,
                x.default)(r.uvMaps).length) {
                    y = {};
                    for (var M in r.uvMaps)
                        if (r.uvMaps.hasOwnProperty(M)) {
                            var w = r.uvMaps[M];
                            y[M] = {
                                faces: m(l(n, w.faces), p),
                                values: l(n, w.values, "RawFloat32")
                            }
                        }
                }
                return {
                    positions: o,
                    faces: g,
                    normalMap: v,
                    uvs: y
                }
            }
            function g(e) {
                function t(e, t, n, i) {
                    var u = i ? new i(t) : t
                      , l = new Uint8Array(u.buffer,u.byteOffset,t.byteLength)
                      , c = l.byteLength % 4
                      , h = 0;
                    if (c) {
                        h = 4 - c;
                        var f = new Uint8Array(l.byteLength + h);
                        f.set(l),
                        l = f
                    }
                    for (var d = null, p = 0; p < o.length; p++)
                        if (r(l, o[p])) {
                            d = s[p];
                            break
                        }
                    if (null !== d)
                        n[e] = d;
                    else {
                        var m = i ? i.BYTES_PER_ELEMENT : t.BYTES_PER_ELEMENT;
                        n[e] = {
                            b: m,
                            l: l.byteLength - h,
                            o: a
                        },
                        a += l.byteLength,
                        o.push(l),
                        s.push(n[e])
                    }
                }
                function r(e, t) {
                    if (e.length !== t.length)
                        return !1;
                    for (var r = 0; r < e.length; r++)
                        if (e[r] !== t[r])
                            return !1;
                    return !0
                }
                function n(e) {
                    for (var t = new Uint32Array(e.length - 1), r = 0; r < e.length - 1; r++)
                        t[r] = e[r + 1] - e[r];
                    return t
                }
                var i = {
                    blendShapes: {},
                    colorMaps: {}
                }
                  , a = 0
                  , o = []
                  , s = [];
                t("faces", e.positions.faceValueIndices, i),
                t("faceCount", n(e.faceRangeOffsets), i),
                t("positions", e.positions.values.data, i, Float32Array),
                e.normalMap && (i.normalMap = {},
                t("faces", e.normalMap.faceValueIndices, i.normalMap),
                t("values", e.normalMap.values.data, i.normalMap, Float32Array)),
                e.uvMaps && e.uvMaps.length && (i.uvMaps = {},
                e.uvMaps.namesByIndex.forEach(function(r) {
                    var n = e.uvMaps.byName[r];
                    i.uvMaps[r] = {},
                    t("faces", n.faceValueIndices, i.uvMaps[r]),
                    t("values", n.values.data, i.uvMaps[r], Float32Array)
                })),
                e.edgeCreaseWeights && e.edgeCreaseWeights.length && t("edgeCreaseWeights", e.edgeCreaseWeights, i, Float32Array),
                e.skinning && (i.skinning = {},
                t("positionSkinRange", e.skinning.positionSkinRange, i.skinning),
                t("skinWeights", e.skinning.skinWeights, i.skinning),
                t("poseSkinToPoseBoneTransform", e.skinning.poseSkinToPoseBoneTransform.data, i.skinning, Float32Array),
                t("skinBoneIndices", e.skinning.skinBoneIndices, i.skinning)),
                e.materialIds && t("materialIds", e.materialIds, i, Uint32Array);
                var u = (0,
                M.default)(i);
                u += {
                    0: "",
                    1: "   ",
                    2: "  ",
                    3: " "
                }[u.length % 4];
                for (var l = 0, c = new Uint8Array(a + u.length + 8), h = 0; h < o.length; h++)
                    c.set(o[h], l),
                    l += o[h].byteLength;
                for (var f = 0; f < u.length; f++)
                    c[l++] = u.charCodeAt(f);
                var d = l >> 2
                  , p = new Uint32Array(c.buffer);
                return p[d] = u.length,
                p[d + 1] = D,
                new Uint32Array(c.buffer)
            }
            function v(e, t) {
                if (t && N[t])
                    return N[t];
                var r = i(e)
                  , n = a(r)
                  , o = r.buffer;
                if (n && !n.faceCount && !n.faces && !n.positions)
                    return console.warn("Warning: PolyMesh is empty."),
                    new T.PolyMesh;
                u(s(n), "Invalid Polymesh Data?");
                var c = l(o, n.faceCount)
                  , h = new T.Importer;
                1 === c.length ? h.defaultFaceArity = c[0] : h.setFaceArities(c),
                h.collapsePositions = !1,
                h.collapseMapValues = !1;
                var f = l(o, n.faces)
                  , d = l(o, n.positions, "RawFloat32")
                  , p = T.PolyMaps.id(T.PolyMaps.TypePosition);
                if (h.setMapIndices(p, f),
                h.setMapValues(p, d),
                n.normalMap) {
                    var m = l(o, n.normalMap.faces)
                      , g = l(o, n.normalMap.values, "RawFloat32")
                      , v = T.PolyMaps.id(T.PolyMaps.TypeNormal);
                    h.setMapIndices(v, m),
                    h.setMapValues(v, g)
                }
                if (n.uvMaps && (0,
                x.default)(n.uvMaps).length)
                    for (var y in n.uvMaps)
                        if (n.uvMaps.hasOwnProperty(y)) {
                            var M = n.uvMaps[y]
                              , w = l(o, M.faces)
                              , A = l(o, M.values, "RawFloat32")
                              , b = T.PolyMaps.id(T.PolyMaps.TypeUV, y);
                            h.setMapIndices(b, w),
                            h.setMapValues(b, A)
                        }
                if (n.skinning && h.setSkinning(l(o, n.skinning.positionSkinRange, "RawUint32"), l(o, n.skinning.skinWeights, "RawFloat32"), l(o, n.skinning.skinBoneIndices, "RawUint16"), l(o, n.skinning.poseSkinToPoseBoneTransform, "RawFloat32")),
                n.edgeCreaseWeights)
                    h.setCreases(l(o, n.edgeCreaseWeights, "RawFloat32"));
                else if (n.creases) {
                    var _ = l(o, n.creases.weights, "RawFloat32")
                      , E = l(o, n.creases.edgeVertexIndices, "RawUint32");
                    h.setCreases(_, E)
                }
                n.materialIds && h.setMaterialIds(l(o, n.materialIds, "RawUint32"));
                var S = h.toMeshAndClear();
                return t && (N[t] = S),
                S
            }
            Object.defineProperty(t, "__esModule", {
                value: !0
            });
            var y = r(/*! babel-runtime/core-js/json/stringify */
            51)
              , M = n(y)
              , w = r(/*! babel-runtime/core-js/object/keys */
            8)
              , x = n(w)
              , A = r(/*! babel-runtime/helpers/typeof */
            17)
              , b = n(A);
            t.validatePolymeshData = s,
            t.checkGeometryCache = d,
            t.cacheGeometry = p,
            t.convertToPolyMesh = m,
            t.convertToBingeom = g,
            t.convertToCNSPolyMesh = v;
            var T = r(/*! ../polyMesh */
            80)
              , _ = {
                1: "RawUint8",
                2: "RawUint16",
                4: "RawUint32"
            }
              , E = {
                RawUint8: {
                    shift: 0,
                    arr: Uint8Array
                },
                RawUint16: {
                    shift: 1,
                    arr: Uint16Array
                },
                RawUint32: {
                    shift: 2,
                    arr: Uint32Array
                },
                RawFloat32: {
                    shift: 2,
                    arr: Float32Array
                }
            }
              , S = {}
              , D = 1e3
              , N = {}
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!***********************************!*\
  !*** ./src/translators/camera.js ***!
  \***********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r) {
            var n = r.x / r.y;
            e.dispatch((0,
            y.setRect)(r));
            var i = (0,
            M.get)(e, [t, "name"]);
            i && e.dispatch((0,
            d.set)({
                id: t,
                plug: "Camera",
                property: "aspectRatio"
            }, n))
        }
        function o(e, t, r, n) {
            var i = (0,
            d.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , a = (0,
            d.getWorldTransform)(e, t)
              , o = (0,
            m.default)(e, t);
            return "trackball" === i.orbitMode && (j.setFromMatrixPosition(a),
            R.set(0, 0, -1).transformDirection(a),
            P.setFromMatrixPosition(o).sub(j).normalize(),
            U.setFromUnitVectors(P, R),
            n.upPosition.applyQuaternion(U)),
            P.setFromMatrixPosition(o),
            n.pivotMatrix.setPosition(P.sub(n.offset)),
            (0,
            v.default)(a, o, n.upPosition),
            a
        }
        function s(e, t, r, n, i) {
            var o = n || M.virtualCameraId
              , s = r || M.virtualCameraId
              , c = (0,
            y.getBoundingBox)(e)
              , h = i || (0,
            y.getRect)(e)
              , p = (0,
            d.getWorldTransform)(e, s)
              , g = (0,
            m.default)(e, s)
              , w = (new f.Vector3).setFromMatrixPosition(p);
            a(e, o, h);
            var x = (0,
            d.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , A = (0,
            d.get)(e, {
                id: s,
                evalPlug: "Camera"
            })
              , b = (0,
            d.get)(e, {
                id: s,
                evalPlug: "Transform"
            })
              , T = s === o ? A : (0,
            d.get)(e, {
                id: o,
                evalPlug: "Camera"
            })
              , S = !b.target && !x.orbitTarget
              , D = s !== M.virtualCameraId
              , N = (0,
            y.getCameraAttrs)(e).toJS()
              , I = null == N.azimuthAngle && null == N.polarAngle;
            if (S && D && I) {
                var L = (new f.Vector3).setFromMatrixPosition(g)
                  , C = new f.Ray(new f.Vector3(0,0,0),new f.Vector3(0,0,-1)).applyMatrix4(p)
                  , O = C.closestPointToPoint(L);
                g.setPosition(O),
                (0,
                _.default)(e, M.virtualTargetId, g)
            }
            var j = g.clone()
              , R = (new f.Vector3).setFromMatrixPosition(j);
            w.setFromMatrixPosition(p).sub(R);
            var P = new f.Vector3(0,1,0);
            if ("trackball" === x.orbitMode) {
                P.transformDirection(p);
                var z = (new f.Vector3).copy(w).normalize()
                  , B = new f.Plane(z,0);
                P.copy(B.projectPoint(P).normalize())
            }
            var U = j.elements[13];
            U + w.length() < 0 && x.constraintCameraY && w.normalize().multiplyScalar(U),
            p.setPosition(w.add(R)),
            T.upPosition = P,
            T.pivotMatrix = j,
            T.offset = new f.Vector3(0,0,0),
            l(e, s, p, g, A, c),
            x.constraintCameraY && (0,
            E.updateSphericalRotation)(e, o, p, g, new f.Vector2(0,0));
            var V = (0,
            y.getCameraRadiusConstraint)(e);
            return V && u(e, o, T, V, p, g),
            (0,
            v.default)(p, g, P),
            t && (0,
            _.default)(e, o, p),
            p
        }
        function u(e, t, r, n, i, a) {
            var o = (0,
            y.getBoundingBox)(e)
              , s = new f.Sphere
              , u = i || (0,
            d.getWorldTransform)(e, t)
              , l = a || (0,
            m.default)(e, t)
              , c = (0,
            d.get)(e, {
                scene: !0,
                evalPlug: "Player"
            });
            if (o.getBoundingSphere(s),
            !(n <= s.radius)) {
                var h = new f.Sphere(s.center,n);
                P.setFromMatrixPosition(l),
                j.setFromMatrixPosition(u);
                var p = (new f.Vector3).subVectors(j, P)
                  , g = (new f.Vector3).crossVectors(p, r.upPosition).normalize()
                  , v = s.clampPoint(P)
                  , M = h.clampPoint(j);
                if (u.setPosition(M),
                l.setPosition(v),
                "trackball" === c.orbitMode) {
                    var w = (new f.Vector3).subVectors(M, v);
                    r.upPosition.crossVectors(g, w).normalize()
                }
                r.radiusConstraint = {
                    outerRadius: n,
                    maxBoundingSphere: h,
                    minBoundingSphere: s
                },
                r.newRadiusConstraint = null,
                (0,
                S.updateZoom)(e, 0, t, u),
                i || (0,
                _.default)(e, t, u)
            }
        }
        function l(e, t, r, n, i, a) {
            var o = (0,
            y.getCameraAttrs)(e).toJS()
              , s = o.azimuthAngle
              , u = o.polarAngle
              , l = o.boundingRadius
              , c = 0
              , h = O
              , f = 0
              , d = O;
            if (t === M.virtualCameraId && (null == s && (s = 45),
            null == u && (u = 20),
            null == l && (l = 1)),
            null != s || null != u) {
                if (B.getInverse(n, !0),
                j.setFromMatrixPosition(r).applyMatrix4(B),
                z.setFromVector3(j),
                z.theta = N(s),
                z.phi = N(90 - u),
                f = C(f || 0, c),
                d = L(d || O, h),
                z.phi = (0,
                x.default)(z.phi, f, d),
                null != l) {
                    var p = l * a.getBoundingSphere().radius;
                    z.radius = (p <= 0 ? 1 : p) / I(N(.5 * i.fieldOfView)),
                    z.radius = (p <= 0 || p === 1 / 0 ? 1 : p) / I(N(.5 * i.fieldOfView))
                }
                z.makeSafe(),
                j.setFromSpherical(z),
                z.setFromVector3(j),
                j.applyMatrix4(n),
                r.setPosition(j)
            }
        }
        function c(e, t) {
            var r = (0,
            y.getCamera)(e)
              , n = (0,
            d.get)(e, {
                id: r,
                evalPlug: "Camera"
            })
              , i = (0,
            d.get)(e, {
                evalPlug: "Player"
            })
              , a = (0,
            d.getWorldTransform)(e, r)
              , o = (0,
            m.default)(e, r)
              , s = new f.Vector3
              , u = new f.Quaternion
              , l = new f.Vector3
              , c = new f.Vector3;
            if (a.decompose(s, u, c),
            l.setFromMatrixPosition(o),
            n.offset.add(t.center).sub(l),
            o.setPosition(t.center),
            "Perspective" === n.projection) {
                var h = n.aspectRatio >= 1 ? Math.PI * n.fieldOfView / 360 : Math.atan(n.aspectRatio * Math.tan(Math.PI * n.fieldOfView / 360))
                  , p = t.radius / Math.sin(h);
                s.sub(t.center),
                s.normalize().multiplyScalar(p).add(t.center)
            } else {
                var g = Math.tan(Math.PI * n.fieldOfView / 360)
                  , w = g * Math.min(n.aspectRatio, 1)
                  , x = t.radius / w;
                e.dispatch((0,
                d.set)({
                    id: r,
                    plug: "Camera",
                    property: "orthoZoom"
                }, x))
            }
            if ("trackball" === i.orbitMode) {
                var A = new f.Vector3(0,0,-1).applyQuaternion(u).normalize()
                  , T = (new f.Vector3).subVectors(t.center, s).normalize()
                  , _ = (new f.Quaternion).setFromUnitVectors(A, T);
                n.upPosition.applyQuaternion(_)
            }
            a.compose(s, u, c),
            (0,
            v.default)(a, o, n.upPosition),
            e.dispatch((0,
            M.merge)([r, "Transform", 0], (0,
            b.default)(a))),
            e.dispatch((0,
            M.merge)([M.virtualTargetId, "Transform", 0], (0,
            b.default)(o)))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.resizeCamera = a,
        t.updateLookatTarget = o,
        t.initCamera = s,
        t.initCameraRadiusConstraint = u,
        t.frameSphere = c;
        var h = r(/*! three */
        1)
          , f = i(h)
          , d = r(/*! ../modules/scene */
        4)
          , p = r(/*! ./utils/getTargetWorldMatrix */
        33)
          , m = n(p)
          , g = r(/*! ./utils/updateCameraLookAtTarget */
        38)
          , v = n(g)
          , y = r(/*! ../modules/player */
        5)
          , M = r(/*! ../modules/sceneGraph */
        9)
          , w = r(/*! ./utils/clamp */
        82)
          , x = n(w)
          , A = r(/*! ./utils/decompose */
        28)
          , b = n(A)
          , T = r(/*! ./utils/setMatrixOnNode */
        65)
          , _ = n(T)
          , E = r(/*! ./tools/orbit */
        138)
          , S = r(/*! ./tools/zoom */
        141)
          , D = f.Math
          , N = D.degToRad
          , I = (D.radToDeg,
        Math.tan)
          , L = (Math.cos,
        Math.atan,
        Math.acos,
        Math.min)
          , C = Math.max
          , O = (Math.pow,
        Math.PI)
          , j = (Math.sqrt,
        new f.Vector3)
          , R = new f.Vector3
          , P = new f.Vector3
          , z = new f.Spherical
          , B = (new f.Spherical,
        new f.Matrix4)
          , U = (new f.Matrix4,
        new f.Quaternion)
    }
    , /*!******************************************************!*\
  !*** ./src/translators/utils/getProjectionMatrix.js ***!
  \******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            var t = new s.Matrix4;
            if ("Orthographic" !== e.projection) {
                var r = e.nearClip * Math.tan(s.Math.DEG2RAD * e.fieldOfView * .5)
                  , n = -r
                  , i = n * e.aspectRatio
                  , o = r * e.aspectRatio;
                return t.makePerspective(i, o, r, n, e.nearClip, e.farClip)
            }
            var u = a(!0, e) || {
                width: 1,
                height: 1
            };
            return t.makeOrthographic(-u.width, u.width, u.height, -u.height, e.nearClip, e.farClip),
            t
        }
        function a(e, t) {
            if (!(t && t.fieldOfView && t.orthoZoom && t.aspectRatio))
                return !1;
            var r = Math.tan(s.Math.degToRad(t.fieldOfView / 2))
              , n = r * t.orthoZoom
              , i = n * t.aspectRatio;
            return e === !0 ? {
                width: i,
                height: n
            } : {
                width: 2 * i,
                height: 2 * n
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var o = r(/*! three */
        1)
          , s = n(o)
    }
    , /*!**************************************************!*\
  !*** ./src/translators/utils/setMatrixOnNode.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            e.dispatch((0,
            a.merge)([t, "Transform", 0], (0,
            s.default)(r)))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../modules/sceneGraph */
        9)
          , o = r(/*! ./decompose */
        28)
          , s = n(o)
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_classof.js ***!
  \***************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_cof */
        52)
          , i = r(/*! ./_wks */
        13)("toStringTag")
          , a = "Arguments" == n(function() {
            return arguments
        }())
          , o = function(e, t) {
            try {
                return e[t]
            } catch (e) {}
        };
        e.exports = function(e) {
            var t, r, s;
            return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (r = o(t = Object(e), i)) ? r : a ? n(t) : "Object" == (s = n(t)) && "function" == typeof t.callee ? "Arguments" : s
        }
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_defined.js ***!
  \***************************************************************/
    function(e, t) {
        e.exports = function(e) {
            if (void 0 == e)
                throw TypeError("Can't call method on  " + e);
            return e
        }
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_for-of.js ***!
  \**************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_ctx */
        34)
          , i = r(/*! ./_iter-call */
        149)
          , a = r(/*! ./_is-array-iter */
        147)
          , o = r(/*! ./_an-object */
        31)
          , s = r(/*! ./_to-length */
        73)
          , u = r(/*! ./core.get-iterator-method */
        104)
          , l = {}
          , c = {}
          , t = e.exports = function(e, t, r, h, f) {
            var d, p, m, g, v = f ? function() {
                return e
            }
            : u(e), y = n(r, h, t ? 2 : 1), M = 0;
            if ("function" != typeof v)
                throw TypeError(e + " is not iterable!");
            if (a(v)) {
                for (d = s(e.length); d > M; M++)
                    if (g = t ? y(o(p = e[M])[0], p[1]) : y(e[M]),
                    g === l || g === c)
                        return g
            } else
                for (m = v.call(e); !(p = m.next()).done; )
                    if (g = i(m, y, p.value, t),
                    g === l || g === c)
                        return g
        }
        ;
        t.BREAK = l,
        t.RETURN = c
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_library.js ***!
  \***************************************************************/
    function(e, t) {
        e.exports = !0
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_meta.js ***!
  \************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_uid */
        74)("meta")
          , i = r(/*! ./_is-object */
        25)
          , a = r(/*! ./_has */
        41)
          , o = r(/*! ./_object-dp */
        22).f
          , s = 0
          , u = Object.isExtensible || function() {
            return !0
        }
          , l = !r(/*! ./_fails */
        40)(function() {
            return u(Object.preventExtensions({}))
        })
          , c = function(e) {
            o(e, n, {
                value: {
                    i: "O" + ++s,
                    w: {}
                }
            })
        }
          , h = function(e, t) {
            if (!i(e))
                return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
            if (!a(e, n)) {
                if (!u(e))
                    return "F";
                if (!t)
                    return "E";
                c(e)
            }
            return e[n].i
        }
          , f = function(e, t) {
            if (!a(e, n)) {
                if (!u(e))
                    return !0;
                if (!t)
                    return !1;
                c(e)
            }
            return e[n].w
        }
          , d = function(e) {
            return l && p.NEED && u(e) && !a(e, n) && c(e),
            e
        }
          , p = e.exports = {
            KEY: n,
            NEED: !1,
            fastKey: h,
            getWeak: f,
            onFreeze: d
        }
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-create.js ***!
  \*********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_an-object */
        31)
          , i = r(/*! ./_object-dps */
        309)
          , a = r(/*! ./_enum-bug-keys */
        91)
          , o = r(/*! ./_shared-key */
        97)("IE_PROTO")
          , s = function() {}
          , u = "prototype"
          , l = function() {
            var e, t = r(/*! ./_dom-create */
            90)("iframe"), n = a.length, i = "<", o = ">";
            for (t.style.display = "none",
            r(/*! ./_html */
            145).appendChild(t),
            t.src = "javascript:",
            e = t.contentWindow.document,
            e.open(),
            e.write(i + "script" + o + "document.F=Object" + i + "/script" + o),
            e.close(),
            l = e.F; n--; )
                delete l[u][a[n]];
            return l()
        };
        e.exports = Object.create || function(e, t) {
            var r;
            return null !== e ? (s[u] = n(e),
            r = new s,
            s[u] = null,
            r[o] = e) : r = l(),
            void 0 === t ? r : i(r, t)
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-sap.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14)
          , i = r(/*! ./_core */
        6)
          , a = r(/*! ./_fails */
        40);
        e.exports = function(e, t) {
            var r = (i.Object || {})[e] || Object[e]
              , o = {};
            o[e] = t(r),
            n(n.S + n.F * a(function() {
                r(1)
            }), "Object", o)
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_to-length.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-integer */
        100)
          , i = Math.min;
        e.exports = function(e) {
            return e > 0 ? i(n(e), 9007199254740991) : 0
        }
    }
    , /*!***********************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_uid.js ***!
  \***********************************************************/
    function(e, t) {
        var r = 0
          , n = Math.random();
        e.exports = function(e) {
            return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++r + n).toString(36))
        }
    }
    , /*!***************************************!*\
  !*** ./src/operators/nonImmutable.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            var n = k[e];
            if (!n)
                return r.push("Unknown plug: " + e),
                k.None.NoOp;
            var i = n[t];
            return i ? i : (r.push("Unknown Operator: " + e + ", " + t),
            k.None.NoOp)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.lookupOperator = i;
        var a = r(/*! ./makeAllOperatorsNonImmutable */
        195)
          , o = n(a)
          , s = r(/*! ./Annotation */
        111)
          , u = n(s)
          , l = r(/*! ./BinMesh */
        112)
          , c = n(l)
          , h = r(/*! ./Camera */
        113)
          , f = n(h)
          , d = r(/*! ./Environment */
        114)
          , p = n(d)
          , m = r(/*! ./GeneralRenderer */
        175)
          , g = n(m)
          , v = r(/*! ./Image */
        115)
          , y = n(v)
          , M = r(/*! ./Light */
        116)
          , w = n(M)
          , x = r(/*! ./Material */
        117)
          , A = n(x)
          , b = r(/*! ./Pass */
        176)
          , T = n(b)
          , _ = r(/*! ./Player */
        118)
          , E = n(_)
          , S = r(/*! ./PolyMesh */
        120)
          , D = n(S)
          , N = r(/*! ./Properties */
        121)
          , I = n(N)
          , L = r(/*! ./Renderer */
        193)
          , C = n(L)
          , O = r(/*! ./Transform */
        122)
          , j = n(O)
          , R = {
            schema: {}
        }
          , P = {
            Bone: R
        }
          , z = {
            Null: R
        }
          , B = {
            Action: R,
            Mixer: R
        };
        C.default["vray/create"] = R;
        var U = {
            Timeline: R
        }
          , V = {
            Viewport: R
        }
          , k = (0,
        o.default)({
            Annotation: u.default,
            BinMesh: c.default,
            Bone: P,
            Camera: f.default,
            Environment: p.default,
            GeneralRenderer: g.default,
            Light: w.default,
            Material: A.default,
            Mixer: B,
            Null: z,
            Pass: T.default,
            Player: E.default,
            PolyMesh: D.default,
            Properties: I.default,
            Renderer: C.default,
            Timeline: U,
            Transform: j.default,
            Image: y.default,
            Viewport: V
        }, {
            withNone: !0
        });
        t.default = k
    }
    , /*!**********************************!*\
  !*** ./src/components/styles.js ***!
  \**********************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = '-apple-system,".SFNSDisplay-Bold","Helvetica Neue","Roboto","Segoe UI",sans-serif'
          , n = "'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Verdana, Tahoma, sans-serif"
          , i = {
            gray: "#999",
            black: "#333",
            lightBg: "#eee",
            border: "#ccc",
            white: "#fff"
        };
        t.default = {
            root: {
                height: "100%",
                fontSize: "14px",
                fontFamily: n,
                position: "absolute",
                top: 0,
                left: 0,
                right: 0,
                bottom: 0
            },
            absoluteMaxCentered: {
                position: "absolute",
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                display: "flex",
                alignItems: "center",
                justifyContent: "center"
            },
            header: {
                display: "flex",
                flex: "0 0 auto",
                justifyContent: "center",
                margin: "0",
                backgroundColor: i.lightBg,
                fontFamily: r
            },
            mainRow: {
                display: "flex",
                flex: "1 1 100px",
                justifyContent: "center"
            },
            commandsRow: {
                flex: "0 0 auto"
            },
            statsRow: {
                flex: "0 0 auto",
                backgroundColor: i.gray,
                color: i.lightBg,
                padding: "5px"
            },
            player: {
                position: "relative",
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                height: "100%",
                width: "100%"
            },
            maxRow: {
                flex: "1 1 auto"
            },
            leftCol: {
                flex: "1 1 200px",
                maxWidth: "300px",
                overflow: "scroll"
            },
            centerCol: {
                flex: "2 2 500px",
                border: "1px solid " + i.border
            },
            rightCol: {
                flex: "1 1 200px",
                maxWidth: "300px",
                overflow: "scroll"
            },
            footer: {
                flex: "0 0 auto",
                padding: "5px",
                backgroundColor: i.lightBg,
                margin: "0"
            },
            explorerSelected: {
                backgroundColor: i.gray
            },
            explorerNotSelected: {
                backgroundColor: i.white,
                cursor: "pointer"
            }
        }
    }
    , /*!****************************************!*\
  !*** ./src/modules/utils/selectors.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return x.test(e)
        }
        function a(e) {
            return e instanceof RegExp ? e : (e = e.replace(/\*/g, "(.*)").replace(/^\"|\"$/g, ""),
            new RegExp("^" + e + "$","i"))
        }
        function o(e) {
            for (var t, r, n = void 0, i = void 0; null !== (r = _.exec(e)); )
                t = r[1].split("="),
                2 === t.length ? (i || (i = {}),
                i[t[0]] = t[1]) : n = t[0];
            return {
                property: n,
                properties: i
            }
        }
        function s(e) {
            var t = "~" === e[0]
              , r = !t && '"' === e[0] && e.slice(1).indexOf('"')
              , n = r && r !== -1
              , s = n || t ? T.exec(e.slice(t ? 1 : r + 2)) : b.exec(e)
              , u = n ? e.slice(1, r + 1) : !t && s[1]
              , l = s[2]
              , c = s[3]
              , h = s[4]
              , f = s[5]
              , d = s[6]
              , p = i(u) ? u : void 0;
            return (0,
            M.default)({
                scene: t,
                id: p,
                name: p || !u ? void 0 : a(u),
                type: l,
                filter: c,
                evalPlug: h,
                plug: f
            }, o(d), {
                includeParent: !0
            })
        }
        function u(e) {
            return "string" == typeof e ? s(e) : "object" === ("undefined" == typeof e ? "undefined" : (0,
            v.default)(e)) ? (0,
            M.default)({}, e, {
                name: e.name ? a(e.name) : void 0,
                names: e.names && Array.isArray(e.names) ? e.names.map(a) : void 0,
                includeParent: void 0 === e.includeParent ? !e.from : e.includeParent
            }) : {}
        }
        function l(e, t, r) {
            var n = c(e, t);
            return n ? r ? n.id : h(e, t) : null
        }
        function c(e, t) {
            if (void 0 !== t.id && t.id !== e.id)
                return null;
            if (void 0 !== t.name && !t.name.test(e.name))
                return null;
            if (void 0 !== t.type)
                if ("string" == typeof t.type) {
                    if (t.type !== e.type)
                        return null
                } else if (Array.isArray(t.type)) {
                    var r = !1;
                    if ((0,
                    w.contains)(e.type, t.type) ? r = !0 : t.type.indexOf && t.type.indexOf(e.type) >= 0 && (r = !0),
                    !r)
                        return null
                }
            return void 0 === t.hasPlug || e.plugs[t.hasPlug] ? e : null
        }
        function h(e, t) {
            var r = t.properties
              , n = t.property
              , i = t.operator
              , a = t.operatorIndex;
            if (t.evalPlug)
                return n ? [e.id, "eval", t.evalPlug, n] : [e.id, "eval", t.evalPlug];
            if (!t.plug)
                return "name" === n || "type" === n ? [e.id, n] : e.id;
            var o = e.plugs[t.plug];
            if (!o)
                return null;
            var s = r && (0,
            m.default)(r);
            if (!r && !n && !i && void 0 === a)
                return e.id;
            var u = void 0 !== t.operatorIndex ? t.operatorIndex : (0,
            w.findIndex)(function(e) {
                return (!n || e.hasOwnProperty(n)) && (!r || (0,
                w.all)(function(t) {
                    return e[t] === r[t]
                }, s))
            }, o);
            return u === -1 ? null : n ? [e.id, t.plug, u, n] : [e.id, t.plug, u]
        }
        function f(e, t, r, n) {
            var i = []
              , a = e.get("sceneGraph")
              , o = n && l(n, r);
            return o && i.push(o),
            (0,
            w.forEach)(function(n) {
                var o = a.nodes[n];
                if (!o)
                    throw new Error("Invalid child for '" + t.get("name") + "' - " + n);
                var s = l(o, r);
                s && i.push(s),
                r.shallow || (i = i.concat(f(e, o, r)))
            }, t.children || []),
            i
        }
        function d(e, t, r, n, i) {
            var a = void 0;
            if (n && (a = l(n, r, i)))
                return a;
            var o = e.get("sceneGraph")
              , s = (0,
            M.default)({}, r);
            s.names && (s.name = s.names[0],
            s.names = s.names.slice(1));
            var u = (0,
            w.find)(function(t) {
                var r = o.nodes[t];
                if (a = l(r, s, i || s.names && s.names.length),
                s.names) {
                    if (!a || !s.names.length)
                        return !!a;
                    if (a = d(e, r, s, null, i))
                        return !0
                } else {
                    if (a)
                        return !0;
                    if (a = !s.shallow && d(e, r, s, null, i))
                        return !0
                }
            }, t.children || []);
            return u ? a : null
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var p = r(/*! babel-runtime/core-js/object/keys */
        8)
          , m = n(p)
          , g = r(/*! babel-runtime/helpers/typeof */
        17)
          , v = n(g)
          , y = r(/*! babel-runtime/core-js/object/assign */
        2)
          , M = n(y);
        t.isUuid = i,
        t.buildQueryObject = u,
        t.getMatch = l,
        t.matchChildren = f,
        t.findChild = d;
        var w = r(/*! ramda */
        3)
          , x = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i
          , A = {
            bareName: "^([^!%[#:]*)*",
            type: "(?:%([^#!:]*))*",
            filter: "(?::([^#:]*))*",
            evalPlug: "(?:!([^#[]*))*",
            plugName: "(?:#([^[]*))*",
            attrs: "(.*)"
        }
          , b = new RegExp(A.bareName + A.type + A.filter + A.evalPlug + A.plugName + A.attrs)
          , T = new RegExp("()" + A.type + A.filter + A.evalPlug + A.plugName + A.attrs)
          , _ = /(?:\[([^\]]*)\])/g
    }
    , /*!***********************************************************!*\
  !*** ./src/polyMesh/generic/container/ScalarArrayView.js ***!
  \***********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r, n) {
            var i = void 0 === r ? 0 : r
              , a = void 0 === n ? 1 : n
              , o = (i + a - 1) / a | 0
              , s = null !== e ? (o + e) * a : null
              , u = c.default.maybeCreate(t || Uint32Array, s);
            f.default.call(this, u, null !== e ? e : (u.length - i + a - 1) / a | 0),
            this.offset = i,
            this.stride = a
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/create */
        47)
          , o = n(a)
          , s = r(/*! babel-runtime/core-js/object/assign */
        2)
          , u = n(s);
        t.default = i;
        var l = r(/*! ../utility/Arrays */
        16)
          , c = n(l)
          , h = r(/*! ./FlatArrayView */
        127)
          , f = n(h)
          , d = r(/*! ./ScalarBuffer */
        128)
          , p = n(d);
        i.prototype = (0,
        u.default)((0,
        o.default)(f.default.prototype), {
            constructor: i,
            getAt: function(e) {
                return this.array[this.offset + e * this.stride]
            },
            setAt: function(e, t) {
                this.array[this.offset + e * this.stride] = t
            },
            newCompatibleView: function(e, t) {
                return new i(t || null,e,0)
            },
            newCompatibleBuffer: function() {
                return new p.default(this.data.constructor)
            }
        })
    }
    , /*!*******************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/applyFunctionToPolyMap.js ***!
  \*******************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            var n = r || {}
              , i = new o.default(e);
            i.positions = t(i.positions, "positions", n),
            i.normalMap && (i.normalMap = t(i.normalMap, "normalMap", n));
            for (var a = new u.default, s = 0; s < e.uvMaps.length; s++) {
                var l = e.uvMaps.namesByIndex[s]
                  , c = t(e.uvMaps.byName[l], l, n);
                a.set(l, c)
            }
            return i.uvMaps = a,
            i.faceRangeOffsets = i.positions.faceRangeOffsets,
            i
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../model/PolyMesh */
        12)
          , o = n(a)
          , s = r(/*! ../../generic/container/ObjectsByName */
        20)
          , u = n(s)
    }
    , /*!*******************************!*\
  !*** ./src/polyMesh/index.js ***!
  \*******************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.ThreeExport = t.Selection = t.PolyMesh = t.PolyMaps = t.PolyMap = t.Importer = void 0,
        r(/*! ./three/ThreeInstanceScalarSize */
        228),
        r(/*! ./generic/utility/polyfill */
        200);
        var i = r(/*! ./geometric/tool/Importer */
        225)
          , a = n(i)
          , o = r(/*! ./geometric/model/PolyMesh */
        12)
          , s = n(o)
          , u = r(/*! ./geometric/model/PolyMap */
        10)
          , l = n(u)
          , c = r(/*! ./geometric/model/PolyMaps */
        45)
          , h = n(c)
          , f = r(/*! ./geometric/transient/Selection */
        226)
          , d = n(f)
          , p = r(/*! ./three/ThreeExport */
        227)
          , m = n(p);
        t.Importer = a.default,
        t.PolyMap = l.default,
        t.PolyMaps = h.default,
        t.PolyMesh = s.default,
        t.Selection = d.default,
        t.ThreeExport = m.default
    }
    , /*!*****************************************!*\
  !*** ./src/translators/tools/gizmos.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            v[e].color = new f.Color(g[e]),
            v[e].needsUpdate = !0
        }
        function a() {
            ["x", "y", "z"].forEach(i)
        }
        function o(e) {
            var t = (0,
            d.getRect)(e)
              , r = (new f.Vector3).copy(t.height < t.width ? {
                x: 0,
                y: .4,
                z: 0
            } : {
                x: .4,
                y: 0,
                z: 0
            })
              , n = (0,
            p.getSelectedNodes)(e)[0];
            if (!n)
                return 0;
            var i = (new f.Vector3).setFromMatrixPosition((0,
            m.getWorldTransform)(e, n))
              , a = (0,
            d.getThreeCamera)(e)
              , o = ((new f.Vector3).setFromMatrixPosition(a.matrix),
            (new f.Matrix4).getInverse(a.projectionMatrix, !0))
              , s = (new f.Vector3).copy(i).applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix);
            s.add(r).applyMatrix4(o).applyMatrix4(a.matrix);
            var u = s.sub(i).length();
            return u
        }
        function s() {
            a();
            var e = .08
              , t = new f.ConeGeometry(e,.25,25)
              , r = new f.CylinderGeometry(y,y,2,32)
              , n = t.clone();
            t.translate(0, 1, 0),
            n.rotateX(Math.PI),
            n.translate(0, -1, 0),
            r.merge(t),
            r.merge(n);
            var i = r.clone()
              , o = r.clone()
              , s = new f.Mesh(r,v.y);
            s.axis = "y",
            i.rotateX(Math.PI / 2);
            var u = new f.Mesh(i,v.z);
            u.axis = "z",
            o.rotateZ(Math.PI / 2);
            var l = new f.Mesh(o,v.x);
            l.axis = "x";
            var c = new f.Object3D;
            return c.add(l),
            c.add(s),
            c.add(u),
            c
        }
        function u() {
            a();
            var e = new f.TorusGeometry(1,y,16,100)
              , t = e.clone()
              , r = e.clone();
            e.rotateY(Math.PI / 2),
            t.rotateX(Math.PI / 2);
            var n = new f.Object3D
              , i = new f.Mesh(e,v.x);
            i.axis = "x";
            var o = new f.Mesh(t,v.y);
            o.axis = "y";
            var s = new f.Mesh(r,v.z);
            return s.axis = "z",
            n.add(i),
            n.add(o),
            n.add(s),
            n
        }
        function l() {
            a();
            var e = .2
              , t = new f.BoxGeometry(e,e,e)
              , r = new f.CylinderGeometry(y,y,1,32);
            r.translate(0, .5, 0),
            t.translate(0, 1, 0),
            r.merge(t);
            var n = r.clone()
              , i = r.clone()
              , o = new f.Mesh(r,v.y);
            o.axis = "y",
            n.rotateX(Math.PI / 2);
            var s = new f.Mesh(n,v.z);
            s.axis = "z",
            i.rotateZ(-Math.PI / 2);
            var u = new f.Mesh(i,v.x);
            u.axis = "x";
            var l = new f.Object3D;
            return l.add(u),
            l.add(o),
            l.add(s),
            l
        }
        function c(e, t, r) {
            var n = null
              , a = t.clientX / (t.rect.width / 2) - 1
              , o = -(t.clientY / (t.rect.height / 2) - 1)
              , s = e.raycastSelect({
                x: a,
                y: o
            }, "Widgets");
            return s && s[0] && s[0].node && s[0].node.axis ? (r && i(r),
            n = s[0].node.axis,
            v[n].color = new f.Color(1,1,0),
            v[n].needsUpdate = !0,
            e.postTranslate("normal", !0)) : r && (i(r),
            e.postTranslate("normal", !0)),
            n
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.getViewScale = o,
        t.drawMoveGizmo = s,
        t.drawRotateGizmo = u,
        t.drawScaleGizmo = l,
        t.highlightAxis = c;
        var h = r(/*! three */
        1)
          , f = n(h)
          , d = r(/*! ../../modules/player */
        5)
          , p = r(/*! ../../modules/selection */
        36)
          , m = r(/*! ../../modules/scene */
        4)
          , g = {
            x: 16711680,
            y: 65280,
            z: 255
        }
          , v = {
            x: new f.MeshStandardMaterial({
                color: g.x,
                depthTest: !1
            }),
            y: new f.MeshStandardMaterial({
                color: g.y,
                depthTest: !1
            }),
            z: new f.MeshStandardMaterial({
                color: g.z,
                depthTest: !1
            })
        }
          , y = .02
    }
    , /*!****************************************!*\
  !*** ./src/translators/utils/clamp.js ***!
  \****************************************/
    function(e, t) {
        "use strict";
        function r(e, t, r) {
            return Math.max(Math.min(e, r), t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r
    }
    , /*!****************************************!*\
  !*** ./~/babel-runtime/core-js/map.js ***!
  \****************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/map */
            277),
            __esModule: !0
        }
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/core-js/object/get-prototype-of.js ***!
  \************************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/get-prototype-of */
            284),
            __esModule: !0
        }
    }
    , /*!**************************************************!*\
  !*** ./~/babel-runtime/core-js/object/values.js ***!
  \**************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/values */
            287),
            __esModule: !0
        }
    }
    , /*!********************************************!*\
  !*** ./~/babel-runtime/helpers/extends.js ***!
  \********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/object/assign */
        2)
          , a = n(i);
        t.default = a.default || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var r = arguments[t];
                for (var n in r)
                    Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n])
            }
            return e
        }
    }
    , /*!******************************************************!*\
  !*** ./~/babel-runtime/helpers/toConsumableArray.js ***!
  \******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/array/from */
        259)
          , a = n(i);
        t.default = function(e) {
            if (Array.isArray(e)) {
                for (var t = 0, r = Array(e.length); t < e.length; t++)
                    r[t] = e[t];
                return r
            }
            return (0,
            a.default)(e)
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_a-function.js ***!
  \******************************************************************/
    function(e, t) {
        e.exports = function(e) {
            if ("function" != typeof e)
                throw TypeError(e + " is not a function!");
            return e
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_an-instance.js ***!
  \*******************************************************************/
    function(e, t) {
        e.exports = function(e, t, r, n) {
            if (!(e instanceof t) || void 0 !== n && n in e)
                throw TypeError(r + ": incorrect invocation!");
            return e
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_dom-create.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25)
          , i = r(/*! ./_global */
        15).document
          , a = n(i) && n(i.createElement);
        e.exports = function(e) {
            return a ? i.createElement(e) : {}
        }
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js ***!
  \*********************************************************************/
    function(e, t) {
        e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iobject.js ***!
  \***************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_cof */
        52);
        e.exports = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
            return "String" == n(e) ? e.split("") : Object(e)
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iter-define.js ***!
  \*******************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_library */
        69)
          , i = r(/*! ./_export */
        14)
          , a = r(/*! ./_redefine */
        155)
          , o = r(/*! ./_hide */
        35)
          , s = r(/*! ./_has */
        41)
          , u = r(/*! ./_iterators */
        48)
          , l = r(/*! ./_iter-create */
        305)
          , c = r(/*! ./_set-to-string-tag */
        55)
          , h = r(/*! ./_object-gpo */
        153)
          , f = r(/*! ./_wks */
        13)("iterator")
          , d = !([].keys && "next"in [].keys())
          , p = "@@iterator"
          , m = "keys"
          , g = "values"
          , v = function() {
            return this
        };
        e.exports = function(e, t, r, y, M, w, x) {
            l(r, t, y);
            var A, b, T, _ = function(e) {
                if (!d && e in N)
                    return N[e];
                switch (e) {
                case m:
                    return function() {
                        return new r(this,e)
                    }
                    ;
                case g:
                    return function() {
                        return new r(this,e)
                    }
                }
                return function() {
                    return new r(this,e)
                }
            }, E = t + " Iterator", S = M == g, D = !1, N = e.prototype, I = N[f] || N[p] || M && N[M], L = I || _(M), C = M ? S ? _("entries") : L : void 0, O = "Array" == t ? N.entries || I : I;
            if (O && (T = h(O.call(new e)),
            T !== Object.prototype && (c(T, E, !0),
            n || s(T, f) || o(T, f, v))),
            S && I && I.name !== g && (D = !0,
            L = function() {
                return I.call(this)
            }
            ),
            n && !x || !d && !D && N[f] || o(N, f, L),
            u[t] = L,
            u[E] = v,
            M)
                if (A = {
                    values: S ? L : _(g),
                    keys: w ? L : _(m),
                    entries: C
                },
                x)
                    for (b in A)
                        b in N || a(N, b, A[b]);
                else
                    i(i.P + i.F * (d || D), t, A);
            return A
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-gopd.js ***!
  \*******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-pie */
        53)
          , i = r(/*! ./_property-desc */
        54)
          , a = r(/*! ./_to-iobject */
        32)
          , o = r(/*! ./_to-primitive */
        101)
          , s = r(/*! ./_has */
        41)
          , u = r(/*! ./_ie8-dom-define */
        146)
          , l = Object.getOwnPropertyDescriptor;
        t.f = r(/*! ./_descriptors */
        24) ? l : function(e, t) {
            if (e = a(e),
            t = o(t, !0),
            u)
                try {
                    return l(e, t)
                } catch (e) {}
            if (s(e, t))
                return i(!n.f.call(e, t), e[t])
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-gops.js ***!
  \*******************************************************************/
    function(e, t) {
        t.f = Object.getOwnPropertySymbols
    }
    , /*!********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_redefine-all.js ***!
  \********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_hide */
        35);
        e.exports = function(e, t, r) {
            for (var i in t)
                r && e[i] ? e[i] = t[i] : n(e, i, t[i]);
            return e
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_shared-key.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_shared */
        98)("keys")
          , i = r(/*! ./_uid */
        74);
        e.exports = function(e) {
            return n[e] || (n[e] = i(e))
        }
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_shared.js ***!
  \**************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_global */
        15)
          , i = "__core-js_shared__"
          , a = n[i] || (n[i] = {});
        e.exports = function(e) {
            return a[e] || (a[e] = {})
        }
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_task.js ***!
  \************************************************************/
    function(e, t, r) {
        var n, i, a, o = r(/*! ./_ctx */
        34), s = r(/*! ./_invoke */
        303), u = r(/*! ./_html */
        145), l = r(/*! ./_dom-create */
        90), c = r(/*! ./_global */
        15), h = c.process, f = c.setImmediate, d = c.clearImmediate, p = c.MessageChannel, m = 0, g = {}, v = "onreadystatechange", y = function() {
            var e = +this;
            if (g.hasOwnProperty(e)) {
                var t = g[e];
                delete g[e],
                t()
            }
        }, M = function(e) {
            y.call(e.data)
        };
        f && d || (f = function(e) {
            for (var t = [], r = 1; arguments.length > r; )
                t.push(arguments[r++]);
            return g[++m] = function() {
                s("function" == typeof e ? e : Function(e), t)
            }
            ,
            n(m),
            m
        }
        ,
        d = function(e) {
            delete g[e]
        }
        ,
        "process" == r(/*! ./_cof */
        52)(h) ? n = function(e) {
            h.nextTick(o(y, e, 1))
        }
        : p ? (i = new p,
        a = i.port2,
        i.port1.onmessage = M,
        n = o(a.postMessage, a, 1)) : c.addEventListener && "function" == typeof postMessage && !c.importScripts ? (n = function(e) {
            c.postMessage(e + "", "*")
        }
        ,
        c.addEventListener("message", M, !1)) : n = v in l("script") ? function(e) {
            u.appendChild(l("script"))[v] = function() {
                u.removeChild(this),
                y.call(e)
            }
        }
        : function(e) {
            setTimeout(o(y, e, 1), 0)
        }
        ),
        e.exports = {
            set: f,
            clear: d
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_to-integer.js ***!
  \******************************************************************/
    function(e, t) {
        var r = Math.ceil
          , n = Math.floor;
        e.exports = function(e) {
            return isNaN(e = +e) ? 0 : (e > 0 ? n : r)(e)
        }
    }
    , /*!********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_to-primitive.js ***!
  \********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25);
        e.exports = function(e, t) {
            if (!n(e))
                return e;
            var r, i;
            if (t && "function" == typeof (r = e.toString) && !n(i = r.call(e)))
                return i;
            if ("function" == typeof (r = e.valueOf) && !n(i = r.call(e)))
                return i;
            if (!t && "function" == typeof (r = e.toString) && !n(i = r.call(e)))
                return i;
            throw TypeError("Can't convert object to primitive value")
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_wks-define.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_global */
        15)
          , i = r(/*! ./_core */
        6)
          , a = r(/*! ./_library */
        69)
          , o = r(/*! ./_wks-ext */
        103)
          , s = r(/*! ./_object-dp */
        22).f;
        e.exports = function(e) {
            var t = i.Symbol || (i.Symbol = a ? {} : n.Symbol || {});
            "_" == e.charAt(0) || e in t || s(t, e, {
                value: o.f(e)
            })
        }
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_wks-ext.js ***!
  \***************************************************************/
    function(e, t, r) {
        t.f = r(/*! ./_wks */
        13)
    }
    , /*!*******************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js ***!
  \*******************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_classof */
        66)
          , i = r(/*! ./_wks */
        13)("iterator")
          , a = r(/*! ./_iterators */
        48);
        e.exports = r(/*! ./_core */
        6).getIteratorMethod = function(e) {
            if (void 0 != e)
                return e[i] || e["@@iterator"] || a[n(e)]
        }
    }
    , /*!***************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.to-string.js ***!
  \***************************************************************************/
    function(e, t) {}
    , /*!*****************************!*\
  !*** ./~/rsvp/dist/rsvp.js ***!
  \*****************************/
    function(e, t, r) {
        (function(e, n, i) {
            /*!
	 * @overview RSVP - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2016 Yehuda Katz, Tom Dale, Stefan Penner and contributors
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE
	 * @version   3.3.3
	 */
            !function(e, r) {
                r(t)
            }(this, function(t) {
                "use strict";
                function a(e, t) {
                    for (var r = 0, n = e.length; r < n; r++)
                        if (e[r] === t)
                            return r;
                    return -1
                }
                function o(e) {
                    var t = e._promiseCallbacks;
                    return t || (t = e._promiseCallbacks = {}),
                    t
                }
                function s(e, t) {
                    return "onerror" === e ? void _e.on("error", t) : 2 !== arguments.length ? _e[e] : void (_e[e] = t)
                }
                function u(e) {
                    return "function" == typeof e || "object" == typeof e && null !== e
                }
                function l(e) {
                    return "function" == typeof e
                }
                function c(e) {
                    return "object" == typeof e && null !== e
                }
                function h() {}
                function f() {
                    setTimeout(function() {
                        for (var e = 0; e < Ie.length; e++) {
                            var t = Ie[e]
                              , r = t.payload;
                            r.guid = r.key + r.id,
                            r.childGuid = r.key + r.childId,
                            r.error && (r.stack = r.error.stack),
                            _e.trigger(t.name, t.payload)
                        }
                        Ie.length = 0
                    }, 50)
                }
                function d(e, t, r) {
                    1 === Ie.push({
                        name: e,
                        payload: {
                            key: t._guidKey,
                            id: t._id,
                            eventName: e,
                            detail: t._result,
                            childId: r && r._id,
                            label: t._label,
                            timeStamp: De(),
                            error: _e["instrument-with-stack"] ? new Error(t._label) : null
                        }
                    }) && f()
                }
                function p(e, t) {
                    var r = this;
                    if (e && "object" == typeof e && e.constructor === r)
                        return e;
                    var n = new r(g,t);
                    return A(n, e),
                    n
                }
                function m() {
                    return new TypeError("A promises callback cannot return that same promise.")
                }
                function g() {}
                function v(e) {
                    try {
                        return e.then
                    } catch (e) {
                        return je.error = e,
                        je
                    }
                }
                function y(e, t, r, n) {
                    try {
                        e.call(t, r, n)
                    } catch (e) {
                        return e
                    }
                }
                function M(e, t, r) {
                    _e.async(function(e) {
                        var n = !1
                          , i = y(r, t, function(r) {
                            n || (n = !0,
                            t !== r ? A(e, r, void 0) : T(e, r))
                        }, function(t) {
                            n || (n = !0,
                            _(e, t))
                        }, "Settle: " + (e._label || " unknown promise"));
                        !n && i && (n = !0,
                        _(e, i))
                    }, e)
                }
                function w(e, t) {
                    t._state === Ce ? T(e, t._result) : t._state === Oe ? (t._onError = null,
                    _(e, t._result)) : E(t, void 0, function(r) {
                        t !== r ? A(e, r, void 0) : T(e, r)
                    }, function(t) {
                        return _(e, t)
                    })
                }
                function x(e, t, r) {
                    t.constructor === e.constructor && r === C && e.constructor.resolve === p ? w(e, t) : r === je ? _(e, je.error) : void 0 === r ? T(e, t) : l(r) ? M(e, t, r) : T(e, t)
                }
                function A(e, t) {
                    e === t ? T(e, t) : u(t) ? x(e, t, v(t)) : T(e, t)
                }
                function b(e) {
                    e._onError && e._onError(e._result),
                    S(e)
                }
                function T(e, t) {
                    e._state === Le && (e._result = t,
                    e._state = Ce,
                    0 === e._subscribers.length ? _e.instrument && d("fulfilled", e) : _e.async(S, e))
                }
                function _(e, t) {
                    e._state === Le && (e._state = Oe,
                    e._result = t,
                    _e.async(b, e))
                }
                function E(e, t, r, n) {
                    var i = e._subscribers
                      , a = i.length;
                    e._onError = null,
                    i[a] = t,
                    i[a + Ce] = r,
                    i[a + Oe] = n,
                    0 === a && e._state && _e.async(S, e)
                }
                function S(e) {
                    var t = e._subscribers
                      , r = e._state;
                    if (_e.instrument && d(r === Ce ? "fulfilled" : "rejected", e),
                    0 !== t.length) {
                        for (var n = void 0, i = void 0, a = e._result, o = 0; o < t.length; o += 3)
                            n = t[o],
                            i = t[o + r],
                            n ? I(r, n, i, a) : i(a);
                        e._subscribers.length = 0
                    }
                }
                function D() {
                    this.error = null
                }
                function N(e, t) {
                    try {
                        return e(t)
                    } catch (e) {
                        return Re.error = e,
                        Re
                    }
                }
                function I(e, t, r, n) {
                    var i = l(r)
                      , a = void 0
                      , o = void 0
                      , s = void 0
                      , u = void 0;
                    if (i) {
                        if (a = N(r, n),
                        a === Re ? (u = !0,
                        o = a.error,
                        a = null) : s = !0,
                        t === a)
                            return void _(t, m())
                    } else
                        a = n,
                        s = !0;
                    t._state !== Le || (i && s ? A(t, a) : u ? _(t, o) : e === Ce ? T(t, a) : e === Oe && _(t, a))
                }
                function L(e, t) {
                    var r = !1;
                    try {
                        t(function(t) {
                            r || (r = !0,
                            A(e, t))
                        }, function(t) {
                            r || (r = !0,
                            _(e, t))
                        })
                    } catch (t) {
                        _(e, t)
                    }
                }
                function C(e, t, r) {
                    var n = arguments
                      , i = this
                      , a = i._state;
                    if (a === Ce && !e || a === Oe && !t)
                        return _e.instrument && d("chained", i, i),
                        i;
                    i._onError = null;
                    var o = new i.constructor(g,r)
                      , s = i._result;
                    return _e.instrument && d("chained", i, o),
                    a ? !function() {
                        var e = n[a - 1];
                        _e.async(function() {
                            return I(a, o, e, s)
                        })
                    }() : E(i, o, e, t),
                    o
                }
                function O(e, t, r) {
                    return e === Ce ? {
                        state: "fulfilled",
                        value: r
                    } : {
                        state: "rejected",
                        reason: r
                    }
                }
                function j(e, t, r, n) {
                    this._instanceConstructor = e,
                    this.promise = new e(g,n),
                    this._abortOnReject = r,
                    this._validateInput(t) ? (this._input = t,
                    this.length = t.length,
                    this._remaining = t.length,
                    this._init(),
                    0 === this.length ? T(this.promise, this._result) : (this.length = this.length || 0,
                    this._enumerate(),
                    0 === this._remaining && T(this.promise, this._result))) : _(this.promise, this._validationError())
                }
                function R(e, t) {
                    return new j(this,e,!0,t).promise
                }
                function P(e, t) {
                    var r = this
                      , n = new r(g,t);
                    if (!Se(e))
                        return _(n, new TypeError("You must pass an array to race.")),
                        n;
                    for (var i = 0; n._state === Le && i < e.length; i++)
                        E(r.resolve(e[i]), void 0, function(e) {
                            return A(n, e)
                        }, function(e) {
                            return _(n, e)
                        });
                    return n
                }
                function z(e, t) {
                    var r = this
                      , n = new r(g,t);
                    return _(n, e),
                    n
                }
                function B() {
                    throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
                }
                function U() {
                    throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
                }
                function V(e, t) {
                    this._id = ze++,
                    this._label = t,
                    this._state = void 0,
                    this._result = void 0,
                    this._subscribers = [],
                    _e.instrument && d("created", this),
                    g !== e && ("function" != typeof e && B(),
                    this instanceof V ? L(this, e) : U())
                }
                function k() {
                    this.value = void 0
                }
                function F(e) {
                    try {
                        return e.then
                    } catch (e) {
                        return Be.value = e,
                        Be
                    }
                }
                function G(e, t, r) {
                    try {
                        e.apply(t, r)
                    } catch (e) {
                        return Be.value = e,
                        Be
                    }
                }
                function Y(e, t) {
                    for (var r = {}, n = e.length, i = new Array(n), a = 0; a < n; a++)
                        i[a] = e[a];
                    for (var o = 0; o < t.length; o++) {
                        var s = t[o];
                        r[s] = i[o + 1]
                    }
                    return r
                }
                function Q(e) {
                    for (var t = e.length, r = new Array(t - 1), n = 1; n < t; n++)
                        r[n - 1] = e[n];
                    return r
                }
                function H(e, t) {
                    return {
                        then: function(r, n) {
                            return e.call(t, r, n)
                        }
                    }
                }
                function W(e, t) {
                    var r = function() {
                        for (var r = this, n = arguments.length, i = new Array(n + 1), a = !1, o = 0; o < n; ++o) {
                            var s = arguments[o];
                            if (!a) {
                                if (a = Z(s),
                                a === Ue) {
                                    var u = new V(g);
                                    return _(u, Ue.value),
                                    u
                                }
                                a && a !== !0 && (s = H(a, s))
                            }
                            i[o] = s
                        }
                        var l = new V(g);
                        return i[n] = function(e, r) {
                            e ? _(l, e) : void 0 === t ? A(l, r) : t === !0 ? A(l, Q(arguments)) : Se(t) ? A(l, Y(arguments, t)) : A(l, r)
                        }
                        ,
                        a ? q(l, i, e, r) : X(l, i, e, r)
                    };
                    return r.__proto__ = e,
                    r
                }
                function X(e, t, r, n) {
                    var i = G(r, n, t);
                    return i === Be && _(e, i.value),
                    e
                }
                function q(e, t, r, n) {
                    return V.all(t).then(function(t) {
                        var i = G(r, n, t);
                        return i === Be && _(e, i.value),
                        e
                    })
                }
                function Z(e) {
                    return !(!e || "object" != typeof e) && (e.constructor === V || F(e))
                }
                function J(e, t) {
                    return V.all(e, t)
                }
                function K(e, t, r) {
                    this._superConstructor(e, t, !1, r)
                }
                function $(e, t) {
                    return new K(V,e,t).promise
                }
                function ee(e, t) {
                    return V.race(e, t)
                }
                function te(e, t, r) {
                    this._superConstructor(e, t, !0, r)
                }
                function re(e, t) {
                    return new te(V,e,t).promise
                }
                function ne(e, t, r) {
                    this._superConstructor(e, t, !1, r)
                }
                function ie(e, t) {
                    return new ne(V,e,t).promise
                }
                function ae(e) {
                    throw setTimeout(function() {
                        throw e
                    }),
                    e
                }
                function oe(e) {
                    var t = {
                        resolve: void 0,
                        reject: void 0
                    };
                    return t.promise = new V(function(e, r) {
                        t.resolve = e,
                        t.reject = r
                    }
                    ,e),
                    t
                }
                function se(e, t, r) {
                    return V.all(e, r).then(function(e) {
                        if (!l(t))
                            throw new TypeError("You must pass a function as map's second argument.");
                        for (var n = e.length, i = new Array(n), a = 0; a < n; a++)
                            i[a] = t(e[a]);
                        return V.all(i, r)
                    })
                }
                function ue(e, t) {
                    return V.resolve(e, t)
                }
                function le(e, t) {
                    return V.reject(e, t)
                }
                function ce(e, t) {
                    return V.all(e, t)
                }
                function he(e, t) {
                    return V.resolve(e, t).then(function(e) {
                        return ce(e, t)
                    })
                }
                function fe(e, t, r) {
                    var n = Se(e) ? ce(e, r) : he(e, r);
                    return n.then(function(e) {
                        if (!l(t))
                            throw new TypeError("You must pass a function as filter's second argument.");
                        for (var n = e.length, i = new Array(n), a = 0; a < n; a++)
                            i[a] = t(e[a]);
                        return ce(i, r).then(function(t) {
                            for (var r = new Array(n), i = 0, a = 0; a < n; a++)
                                t[a] && (r[i] = e[a],
                                i++);
                            return r.length = i,
                            r
                        })
                    })
                }
                function de(e, t) {
                    We[Ve] = e,
                    We[Ve + 1] = t,
                    Ve += 2,
                    2 === Ve && Xe()
                }
                function pe() {
                    var t = e.nextTick
                      , r = e.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);
                    return Array.isArray(r) && "0" === r[1] && "10" === r[2] && (t = n),
                    function() {
                        return t(Me)
                    }
                }
                function me() {
                    return "undefined" != typeof ke ? function() {
                        ke(Me)
                    }
                    : ye()
                }
                function ge() {
                    var e = 0
                      , t = new Ye(Me)
                      , r = document.createTextNode("");
                    return t.observe(r, {
                        characterData: !0
                    }),
                    function() {
                        return r.data = e = ++e % 2
                    }
                }
                function ve() {
                    var e = new MessageChannel;
                    return e.port1.onmessage = Me,
                    function() {
                        return e.port2.postMessage(0)
                    }
                }
                function ye() {
                    return function() {
                        return setTimeout(Me, 1)
                    }
                }
                function Me() {
                    for (var e = 0; e < Ve; e += 2) {
                        var t = We[e]
                          , r = We[e + 1];
                        t(r),
                        We[e] = void 0,
                        We[e + 1] = void 0
                    }
                    Ve = 0
                }
                function we() {
                    try {
                        var e = r(/*! vertx */
                        371);
                        return ke = e.runOnLoop || e.runOnContext,
                        me()
                    } catch (e) {
                        return ye()
                    }
                }
                function xe(e, t, r) {
                    return t in e ? Object.defineProperty(e, t, {
                        value: r,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : e[t] = r,
                    e
                }
                function Ae() {
                    _e.on.apply(_e, arguments)
                }
                function be() {
                    _e.off.apply(_e, arguments)
                }
                var Te = {
                    mixin: function(e) {
                        return e.on = this.on,
                        e.off = this.off,
                        e.trigger = this.trigger,
                        e._promiseCallbacks = void 0,
                        e
                    },
                    on: function(e, t) {
                        if ("function" != typeof t)
                            throw new TypeError("Callback must be a function");
                        var r = o(this)
                          , n = void 0;
                        n = r[e],
                        n || (n = r[e] = []),
                        a(n, t) === -1 && n.push(t)
                    },
                    off: function(e, t) {
                        var r = o(this)
                          , n = void 0
                          , i = void 0;
                        return t ? (n = r[e],
                        i = a(n, t),
                        void (i !== -1 && n.splice(i, 1))) : void (r[e] = [])
                    },
                    trigger: function(e, t, r) {
                        var n = o(this)
                          , i = void 0
                          , a = void 0;
                        if (i = n[e])
                            for (var s = 0; s < i.length; s++)
                                (a = i[s])(t, r)
                    }
                }
                  , _e = {
                    instrument: !1
                };
                Te.mixin(_e);
                var Ee = void 0;
                Ee = Array.isArray ? Array.isArray : function(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                }
                ;
                var Se = Ee
                  , De = Date.now || function() {
                    return (new Date).getTime()
                }
                  , Ne = Object.create || function(e) {
                    if (arguments.length > 1)
                        throw new Error("Second argument not supported");
                    if ("object" != typeof e)
                        throw new TypeError("Argument must be an object");
                    return h.prototype = e,
                    new h
                }
                  , Ie = []
                  , Le = void 0
                  , Ce = 1
                  , Oe = 2
                  , je = new D
                  , Re = new D;
                j.prototype._validateInput = function(e) {
                    return Se(e)
                }
                ,
                j.prototype._validationError = function() {
                    return new Error("Array Methods must be provided an Array")
                }
                ,
                j.prototype._init = function() {
                    this._result = new Array(this.length)
                }
                ,
                j.prototype._enumerate = function() {
                    for (var e = this.length, t = this.promise, r = this._input, n = 0; t._state === Le && n < e; n++)
                        this._eachEntry(r[n], n)
                }
                ,
                j.prototype._settleMaybeThenable = function(e, t) {
                    var r = this._instanceConstructor
                      , n = r.resolve;
                    if (n === p) {
                        var i = v(e);
                        if (i === C && e._state !== Le)
                            e._onError = null,
                            this._settledAt(e._state, t, e._result);
                        else if ("function" != typeof i)
                            this._remaining--,
                            this._result[t] = this._makeResult(Ce, t, e);
                        else if (r === V) {
                            var a = new r(g);
                            x(a, e, i),
                            this._willSettleAt(a, t)
                        } else
                            this._willSettleAt(new r(function(t) {
                                return t(e)
                            }
                            ), t)
                    } else
                        this._willSettleAt(n(e), t)
                }
                ,
                j.prototype._eachEntry = function(e, t) {
                    c(e) ? this._settleMaybeThenable(e, t) : (this._remaining--,
                    this._result[t] = this._makeResult(Ce, t, e))
                }
                ,
                j.prototype._settledAt = function(e, t, r) {
                    var n = this.promise;
                    n._state === Le && (this._remaining--,
                    this._abortOnReject && e === Oe ? _(n, r) : this._result[t] = this._makeResult(e, t, r)),
                    0 === this._remaining && T(n, this._result)
                }
                ,
                j.prototype._makeResult = function(e, t, r) {
                    return r
                }
                ,
                j.prototype._willSettleAt = function(e, t) {
                    var r = this;
                    E(e, void 0, function(e) {
                        return r._settledAt(Ce, t, e)
                    }, function(e) {
                        return r._settledAt(Oe, t, e)
                    })
                }
                ;
                var Pe = "rsvp_" + De() + "-"
                  , ze = 0;
                V.cast = p,
                V.all = R,
                V.race = P,
                V.resolve = p,
                V.reject = z,
                V.prototype = {
                    constructor: V,
                    _guidKey: Pe,
                    _onError: function(e) {
                        var t = this;
                        _e.after(function() {
                            t._onError && _e.trigger("error", e, t._label)
                        })
                    },
                    then: C,
                    catch: function(e, t) {
                        return this.then(void 0, e, t)
                    },
                    finally: function(e, t) {
                        var r = this
                          , n = r.constructor;
                        return r.then(function(t) {
                            return n.resolve(e()).then(function() {
                                return t
                            })
                        }, function(t) {
                            return n.resolve(e()).then(function() {
                                throw t
                            })
                        }, t)
                    }
                };
                var Be = new k
                  , Ue = new k;
                K.prototype = Ne(j.prototype),
                K.prototype._superConstructor = j,
                K.prototype._makeResult = O,
                K.prototype._validationError = function() {
                    return new Error("allSettled must be called with an array")
                }
                ,
                te.prototype = Ne(j.prototype),
                te.prototype._superConstructor = j,
                te.prototype._init = function() {
                    this._result = {}
                }
                ,
                te.prototype._validateInput = function(e) {
                    return e && "object" == typeof e
                }
                ,
                te.prototype._validationError = function() {
                    return new Error("Promise.hash must be called with an object")
                }
                ,
                te.prototype._enumerate = function() {
                    var e = this
                      , t = e.promise
                      , r = e._input
                      , n = [];
                    for (var i in r)
                        t._state === Le && Object.prototype.hasOwnProperty.call(r, i) && n.push({
                            position: i,
                            entry: r[i]
                        });
                    var a = n.length;
                    e._remaining = a;
                    for (var o = void 0, s = 0; t._state === Le && s < a; s++)
                        o = n[s],
                        e._eachEntry(o.entry, o.position)
                }
                ,
                ne.prototype = Ne(te.prototype),
                ne.prototype._superConstructor = j,
                ne.prototype._makeResult = O,
                ne.prototype._validationError = function() {
                    return new Error("hashSettled must be called with an object")
                }
                ;
                var Ve = 0
                  , ke = void 0
                  , Fe = "undefined" != typeof window ? window : void 0
                  , Ge = Fe || {}
                  , Ye = Ge.MutationObserver || Ge.WebKitMutationObserver
                  , Qe = "undefined" == typeof self && "undefined" != typeof e && "[object process]" === {}.toString.call(e)
                  , He = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel
                  , We = new Array(1e3)
                  , Xe = void 0;
                Xe = Qe ? pe() : Ye ? ge() : He ? ve() : void 0 === Fe ? we() : ye();
                var qe = void 0;
                if ("object" == typeof self)
                    qe = self;
                else {
                    if ("object" != typeof i)
                        throw new Error("no global: `self` or `global` found");
                    qe = i
                }
                var Ze;
                _e.async = de,
                _e.after = function(e) {
                    return setTimeout(e, 0)
                }
                ;
                var Je = ue
                  , Ke = function(e, t) {
                    return _e.async(e, t)
                };
                if ("undefined" != typeof window && "object" == typeof window.__PROMISE_INSTRUMENTATION__) {
                    var $e = window.__PROMISE_INSTRUMENTATION__;
                    s("instrument", !0);
                    for (var et in $e)
                        $e.hasOwnProperty(et) && Ae(et, $e[et])
                }
                var tt = (Ze = {
                    cast: Je,
                    Promise: V,
                    EventTarget: Te,
                    all: J,
                    allSettled: $,
                    race: ee,
                    hash: re,
                    hashSettled: ie,
                    rethrow: ae,
                    defer: oe,
                    denodeify: W,
                    configure: s,
                    on: Ae,
                    off: be,
                    resolve: ue,
                    reject: le,
                    map: se
                },
                xe(Ze, "async", Ke),
                xe(Ze, "filter", fe),
                Ze);
                t.default = tt,
                t.cast = Je,
                t.Promise = V,
                t.EventTarget = Te,
                t.all = J,
                t.allSettled = $,
                t.race = ee,
                t.hash = re,
                t.hashSettled = ie,
                t.rethrow = ae,
                t.defer = oe,
                t.denodeify = W,
                t.configure = s,
                t.on = Ae,
                t.off = be,
                t.resolve = ue,
                t.reject = le,
                t.map = se,
                t.async = Ke,
                t.filter = fe,
                Object.defineProperty(t, "__esModule", {
                    value: !0
                })
            })
        }
        ).call(t, r(/*! ./~/process/browser.js */
        57), r(/*! ./~/timers-browserify/main.js */
        108).setImmediate, function() {
            return this
        }())
    }
    , /*!**************************!*\
  !*** ./~/snabbdom/is.js ***!
  \**************************/
    function(e, t) {
        e.exports = {
            array: Array.isArray,
            primitive: function(e) {
                return "string" == typeof e || "number" == typeof e
            }
        }
    }
    , /*!*************************************!*\
  !*** ./~/timers-browserify/main.js ***!
  \*************************************/
    function(e, t, r) {
        (function(e, n) {
            function i(e, t) {
                this._id = e,
                this._clearFn = t
            }
            var a = r(/*! process/browser.js */
            57).nextTick
              , o = Function.prototype.apply
              , s = Array.prototype.slice
              , u = {}
              , l = 0;
            t.setTimeout = function() {
                return new i(o.call(setTimeout, window, arguments),clearTimeout)
            }
            ,
            t.setInterval = function() {
                return new i(o.call(setInterval, window, arguments),clearInterval)
            }
            ,
            t.clearTimeout = t.clearInterval = function(e) {
                e.close()
            }
            ,
            i.prototype.unref = i.prototype.ref = function() {}
            ,
            i.prototype.close = function() {
                this._clearFn.call(window, this._id)
            }
            ,
            t.enroll = function(e, t) {
                clearTimeout(e._idleTimeoutId),
                e._idleTimeout = t
            }
            ,
            t.unenroll = function(e) {
                clearTimeout(e._idleTimeoutId),
                e._idleTimeout = -1
            }
            ,
            t._unrefActive = t.active = function(e) {
                clearTimeout(e._idleTimeoutId);
                var t = e._idleTimeout;
                t >= 0 && (e._idleTimeoutId = setTimeout(function() {
                    e._onTimeout && e._onTimeout()
                }, t))
            }
            ,
            t.setImmediate = "function" == typeof e ? e : function(e) {
                var r = l++
                  , n = !(arguments.length < 2) && s.call(arguments, 1);
                return u[r] = !0,
                a(function() {
                    u[r] && (n ? e.apply(null, n) : e.call(null),
                    t.clearImmediate(r))
                }),
                r
            }
            ,
            t.clearImmediate = "function" == typeof n ? n : function(e) {
                delete u[e]
            }
        }
        ).call(t, r(/*! ./~/timers-browserify/main.js */
        108).setImmediate, r(/*! ./~/timers-browserify/main.js */
        108).clearImmediate)
    }
    , /*!************************!*\
  !*** ./~/util/util.js ***!
  \************************/
    function(e, t, r) {
        (function(e, n) {
            function i(e, r) {
                var n = {
                    seen: [],
                    stylize: o
                };
                return arguments.length >= 3 && (n.depth = arguments[2]),
                arguments.length >= 4 && (n.colors = arguments[3]),
                m(r) ? n.showHidden = r : r && t._extend(n, r),
                x(n.showHidden) && (n.showHidden = !1),
                x(n.depth) && (n.depth = 2),
                x(n.colors) && (n.colors = !1),
                x(n.customInspect) && (n.customInspect = !0),
                n.colors && (n.stylize = a),
                u(n, e, n.depth)
            }
            function a(e, t) {
                var r = i.styles[t];
                return r ? "[" + i.colors[r][0] + "m" + e + "[" + i.colors[r][1] + "m" : e
            }
            function o(e, t) {
                return e
            }
            function s(e) {
                var t = {};
                return e.forEach(function(e, r) {
                    t[e] = !0
                }),
                t
            }
            function u(e, r, n) {
                if (e.customInspect && r && E(r.inspect) && r.inspect !== t.inspect && (!r.constructor || r.constructor.prototype !== r)) {
                    var i = r.inspect(n, e);
                    return M(i) || (i = u(e, i, n)),
                    i
                }
                var a = l(e, r);
                if (a)
                    return a;
                var o = Object.keys(r)
                  , m = s(o);
                if (e.showHidden && (o = Object.getOwnPropertyNames(r)),
                _(r) && (o.indexOf("message") >= 0 || o.indexOf("description") >= 0))
                    return c(r);
                if (0 === o.length) {
                    if (E(r)) {
                        var g = r.name ? ": " + r.name : "";
                        return e.stylize("[Function" + g + "]", "special")
                    }
                    if (A(r))
                        return e.stylize(RegExp.prototype.toString.call(r), "regexp");
                    if (T(r))
                        return e.stylize(Date.prototype.toString.call(r), "date");
                    if (_(r))
                        return c(r)
                }
                var v = ""
                  , y = !1
                  , w = ["{", "}"];
                if (p(r) && (y = !0,
                w = ["[", "]"]),
                E(r)) {
                    var x = r.name ? ": " + r.name : "";
                    v = " [Function" + x + "]"
                }
                if (A(r) && (v = " " + RegExp.prototype.toString.call(r)),
                T(r) && (v = " " + Date.prototype.toUTCString.call(r)),
                _(r) && (v = " " + c(r)),
                0 === o.length && (!y || 0 == r.length))
                    return w[0] + v + w[1];
                if (n < 0)
                    return A(r) ? e.stylize(RegExp.prototype.toString.call(r), "regexp") : e.stylize("[Object]", "special");
                e.seen.push(r);
                var b;
                return b = y ? h(e, r, n, m, o) : o.map(function(t) {
                    return f(e, r, n, m, t, y)
                }),
                e.seen.pop(),
                d(b, v, w)
            }
            function l(e, t) {
                if (x(t))
                    return e.stylize("undefined", "undefined");
                if (M(t)) {
                    var r = "'" + JSON.stringify(t).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
                    return e.stylize(r, "string")
                }
                return y(t) ? e.stylize("" + t, "number") : m(t) ? e.stylize("" + t, "boolean") : g(t) ? e.stylize("null", "null") : void 0
            }
            function c(e) {
                return "[" + Error.prototype.toString.call(e) + "]"
            }
            function h(e, t, r, n, i) {
                for (var a = [], o = 0, s = t.length; o < s; ++o)
                    L(t, String(o)) ? a.push(f(e, t, r, n, String(o), !0)) : a.push("");
                return i.forEach(function(i) {
                    i.match(/^\d+$/) || a.push(f(e, t, r, n, i, !0))
                }),
                a
            }
            function f(e, t, r, n, i, a) {
                var o, s, l;
                if (l = Object.getOwnPropertyDescriptor(t, i) || {
                    value: t[i]
                },
                l.get ? s = l.set ? e.stylize("[Getter/Setter]", "special") : e.stylize("[Getter]", "special") : l.set && (s = e.stylize("[Setter]", "special")),
                L(n, i) || (o = "[" + i + "]"),
                s || (e.seen.indexOf(l.value) < 0 ? (s = g(r) ? u(e, l.value, null) : u(e, l.value, r - 1),
                s.indexOf("\n") > -1 && (s = a ? s.split("\n").map(function(e) {
                    return "  " + e
                }).join("\n").substr(2) : "\n" + s.split("\n").map(function(e) {
                    return "   " + e
                }).join("\n"))) : s = e.stylize("[Circular]", "special")),
                x(o)) {
                    if (a && i.match(/^\d+$/))
                        return s;
                    o = JSON.stringify("" + i),
                    o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (o = o.substr(1, o.length - 2),
                    o = e.stylize(o, "name")) : (o = o.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"),
                    o = e.stylize(o, "string"))
                }
                return o + ": " + s
            }
            function d(e, t, r) {
                var n = 0
                  , i = e.reduce(function(e, t) {
                    return n++,
                    t.indexOf("\n") >= 0 && n++,
                    e + t.replace(/\u001b\[\d\d?m/g, "").length + 1
                }, 0);
                return i > 60 ? r[0] + ("" === t ? "" : t + "\n ") + " " + e.join(",\n  ") + " " + r[1] : r[0] + t + " " + e.join(", ") + " " + r[1]
            }
            function p(e) {
                return Array.isArray(e)
            }
            function m(e) {
                return "boolean" == typeof e
            }
            function g(e) {
                return null === e
            }
            function v(e) {
                return null == e
            }
            function y(e) {
                return "number" == typeof e
            }
            function M(e) {
                return "string" == typeof e
            }
            function w(e) {
                return "symbol" == typeof e
            }
            function x(e) {
                return void 0 === e
            }
            function A(e) {
                return b(e) && "[object RegExp]" === D(e)
            }
            function b(e) {
                return "object" == typeof e && null !== e
            }
            function T(e) {
                return b(e) && "[object Date]" === D(e)
            }
            function _(e) {
                return b(e) && ("[object Error]" === D(e) || e instanceof Error)
            }
            function E(e) {
                return "function" == typeof e
            }
            function S(e) {
                return null === e || "boolean" == typeof e || "number" == typeof e || "string" == typeof e || "symbol" == typeof e || "undefined" == typeof e
            }
            function D(e) {
                return Object.prototype.toString.call(e)
            }
            function N(e) {
                return e < 10 ? "0" + e.toString(10) : e.toString(10)
            }
            function I() {
                var e = new Date
                  , t = [N(e.getHours()), N(e.getMinutes()), N(e.getSeconds())].join(":");
                return [e.getDate(), R[e.getMonth()], t].join(" ")
            }
            function L(e, t) {
                return Object.prototype.hasOwnProperty.call(e, t)
            }
            var C = /%[sdj%]/g;
            t.format = function(e) {
                if (!M(e)) {
                    for (var t = [], r = 0; r < arguments.length; r++)
                        t.push(i(arguments[r]));
                    return t.join(" ")
                }
                for (var r = 1, n = arguments, a = n.length, o = String(e).replace(C, function(e) {
                    if ("%%" === e)
                        return "%";
                    if (r >= a)
                        return e;
                    switch (e) {
                    case "%s":
                        return String(n[r++]);
                    case "%d":
                        return Number(n[r++]);
                    case "%j":
                        try {
                            return JSON.stringify(n[r++])
                        } catch (e) {
                            return "[Circular]"
                        }
                    default:
                        return e
                    }
                }), s = n[r]; r < a; s = n[++r])
                    o += g(s) || !b(s) ? " " + s : " " + i(s);
                return o
            }
            ,
            t.deprecate = function(r, i) {
                function a() {
                    if (!o) {
                        if (n.throwDeprecation)
                            throw new Error(i);
                        n.traceDeprecation ? console.trace(i) : console.error(i),
                        o = !0
                    }
                    return r.apply(this, arguments)
                }
                if (x(e.process))
                    return function() {
                        return t.deprecate(r, i).apply(this, arguments)
                    }
                    ;
                if (n.noDeprecation === !0)
                    return r;
                var o = !1;
                return a
            }
            ;
            var O, j = {};
            t.debuglog = function(e) {
                if (x(O) && (O = n.env.NODE_DEBUG || ""),
                e = e.toUpperCase(),
                !j[e])
                    if (new RegExp("\\b" + e + "\\b","i").test(O)) {
                        var r = n.pid;
                        j[e] = function() {
                            var n = t.format.apply(t, arguments);
                            console.error("%s %d: %s", e, r, n)
                        }
                    } else
                        j[e] = function() {}
                        ;
                return j[e]
            }
            ,
            t.inspect = i,
            i.colors = {
                bold: [1, 22],
                italic: [3, 23],
                underline: [4, 24],
                inverse: [7, 27],
                white: [37, 39],
                grey: [90, 39],
                black: [30, 39],
                blue: [34, 39],
                cyan: [36, 39],
                green: [32, 39],
                magenta: [35, 39],
                red: [31, 39],
                yellow: [33, 39]
            },
            i.styles = {
                special: "cyan",
                number: "yellow",
                boolean: "yellow",
                undefined: "grey",
                null: "bold",
                string: "green",
                date: "magenta",
                regexp: "red"
            },
            t.isArray = p,
            t.isBoolean = m,
            t.isNull = g,
            t.isNullOrUndefined = v,
            t.isNumber = y,
            t.isString = M,
            t.isSymbol = w,
            t.isUndefined = x,
            t.isRegExp = A,
            t.isObject = b,
            t.isDate = T,
            t.isError = _,
            t.isFunction = E,
            t.isPrimitive = S,
            t.isBuffer = r(/*! ./support/isBuffer */
            365);
            var R = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            t.log = function() {
                console.log("%s - %s", I(), t.format.apply(t, arguments))
            }
            ,
            t.inherits = r(/*! inherits */
            347),
            t._extend = function(e, t) {
                if (!t || !b(t))
                    return e;
                for (var r = Object.keys(t), n = r.length; n--; )
                    e[r[n]] = t[r[n]];
                return e
            }
        }
        ).call(t, function() {
            return this
        }(), r(/*! ./~/process/browser.js */
        57))
    }
    , /*!*********************************!*\
  !*** ./src/components/icons.js ***!
  \*********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i() {
            return (0,
            A.default)("svg", {
                attrs: {
                    width: 0,
                    height: 0
                }
            }, [(0,
            A.default)("filter", {
                attrs: {
                    id: "glowfilter"
                }
            }, [(0,
            A.default)("feGaussianBlur", {
                attrs: {
                    in: "SourceAlpha",
                    stdDeviation: 50,
                    result: "blur"
                }
            }), (0,
            A.default)("feOffset", {
                attrs: {
                    in: "blur",
                    dx: 0,
                    dy: 0,
                    result: "offsetBlur"
                }
            }), (0,
            A.default)("feFlood", {
                attrs: {
                    "flood-color": T,
                    "flood-opacity": 1,
                    result: "offsetColor"
                }
            }), (0,
            A.default)("feComposite", {
                attrs: {
                    in: "offsetColor",
                    in2: "offsetBlur",
                    operator: "in",
                    result: "offsetBlurComposed"
                }
            }), (0,
            A.default)("feMerge", [(0,
            A.default)("feMergeNode", {
                attrs: {
                    in: "offsetBlurComposed"
                }
            }), (0,
            A.default)("feMergeNode", {
                attrs: {
                    in: "SourceGraphic"
                }
            })])])])
        }
        function a(e, t) {
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: _,
                    filter: b,
                    d: "M1024 608l-192-192v-288h-128v160l-192-192-512 512v32h128v320h320v-192h128v192h320v-320h128z"
                }
            })])
        }
        function o(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"
                }
            })])
        }
        function s(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: N
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("g", {
                attrs: {
                    transform: "matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"
                }
            })])])
        }
        function u(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"
                }
            })])
        }
        function l(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: S
                }
            }, [t.active ? (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M448 576v416l-160-160-192 192-96-96 192-192-160-160zM1024 96l-192 192 160 160h-416v-416l160 160 192-192z"
                }
            }) : (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M1024 0v416l-160-160-192 192-96-96 192-192-160-160zM448 672l-192 192 160 160h-416v-416l160 160 192-192z"
                }
            })])
        }
        function c(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M884.907 256h-748.373c-27.733 0-51.2 24.32-51.2 54.187v446.293c0 29.867 23.467 54.187 52.48 54.187h203.52c23.040 0 42.667-13.653 49.493-33.707l59.307-148.053c10.24-24.747 34.133-42.24 61.867-42.24s51.627 17.493 61.867 42.24l59.307 148.053c8.107 20.053 26.453 33.707 47.36 33.707h204.373c30.293 0 53.76-24.32 53.76-54.187v-446.293c0-29.867-23.467-54.187-53.76-54.187zM308.053 622.080c-52.053 0-94.72-43.947-94.72-97.707 0-55.040 42.667-97.707 94.72-97.707s94.293 42.667 94.293 97.707c0 53.76-42.24 97.707-94.293 97.707zM715.947 622.080c-52.053 0-94.293-43.947-94.293-97.707s42.24-97.707 94.293-97.707c52.053 0 94.72 43.947 94.72 97.707s-42.667 97.707-94.72 97.707z"
                }
            })])
        }
        function h(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: S
                }
            }, [t.active ? (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M317.143 762.857l44.571-80.571q-49.714-36-77.714-90.857t-28-116q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 95.429 147.429 244 214.286zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM746.857 220q0 4-0.571 5.143-60 107.429-180 323.429t-180.571 324l-28 50.857q-5.714 9.143-16 9.143-6.857 0-76.571-40-9.143-5.714-9.143-16 0-6.857 25.143-49.714-81.714-37.143-150.571-98.857t-119.143-140q-11.429-17.714-11.429-39.429t11.429-39.429q87.429-134.286 217.143-212t283.429-77.714q50.857 0 102.857 9.714l30.857-55.429q5.714-9.143 16-9.143 2.857 0 10.286 3.429t17.714 8.857 18.857 10.571 18 10.571 11.143 6.571q9.143 5.714 9.143 15.429zM768 475.429q0 79.429-45.143 144.857t-119.429 94l160-286.857q4.571 25.714 4.571 48zM1024 548.571q0 20-11.429 39.429-22.286 36.571-62.286 82.857-85.714 98.286-198.571 152.571t-239.714 54.286l42.286-75.429q121.143-10.286 224.286-78.286t172.286-175.429q-65.714-102.286-161.143-168l36-64q54.286 36.571 104.286 87.429t82.571 105.143q11.429 19.429 11.429 39.429z"
                }
            }) : (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M950.857 548.571q-86.857-134.857-217.714-201.714 34.857 59.429 34.857 128.571 0 105.714-75.143 180.857t-180.857 75.143-180.857-75.143-75.143-180.857q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 76 117.143 190.571 186.571t248.286 69.429 248.286-69.429 190.571-186.571zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM1024 548.571q0 19.429-11.429 39.429-80 131.429-215.143 210.571t-285.429 79.143-285.429-79.429-215.143-210.286q-11.429-20-11.429-39.429t11.429-39.429q80-130.857 215.143-210.286t285.429-79.429 285.429 79.429 215.143 210.286q11.429 20 11.429 39.429z"
                }
            })])
        }
        function f(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M395 37.2c-24.2 1.4-50.2 3.6-57.8 4.8-28.2 4.4-60.2 22.8-77.4 44.4-7.8 9.8-23.4 39-21.6 40.4 1.2 1 26.4 9.2 26.6 8.6 0.2-0.2 3.2-6.4 7-13.8 11.6-23.6 38.8-44 65.4-49.6 9.2-1.8 59.8-6 74.4-6h6.4v85.6l-16.4 1.2c-9.2 0.6-38.2 2-64.6 3.2-52.8 2.4-92.6 6.4-108 11-13 3.8-24.6 11.4-31.4 20.8-5 7-15.6 38.6-21.6 64l-2.6 10.6-8.2-1.2c-4.4-0.8-11.4-1.8-15.2-2.4l-7-1.2-17.6 88.4c-12.8 63.6-17 89-15.4 90 1.2 0.8 8.4 2.4 15.8 3.8l13.4 2.4-1.8 13.4c-1 7.4-1.8 31-2 52.4-0.2 34.6 0.2 40.4 4 51.4 15.2 45.6 59.8 72 133 78.6 24 2.2 25.2 2.2 42.6-3 62.8-18.2 121.4-24.2 219-22.4 79 1.6 130.2 8 175.6 22.4 15 4.8 17 5 38.6 3.2 73.4-6.2 118.6-32.2 134.8-77.2 4.6-13.2 6.4-64.6 3.2-95.2-1.4-12.2-2-22.6-1.6-23s6.8-2 14.2-3.6c7.4-1.4 13.8-3.2 14.4-3.6 0.4-0.6-7-40.4-16.8-88.8l-17.6-87.8-5.8 0.2c-3.4 0-10.2 0.8-15.2 1.6l-9.2 1.6-6.2-25c-9-35.4-13.2-45.8-22.2-54-8.8-8-30-18.4-43.6-21.6-15.4-3.4-63.8-7.4-120-10.2l-52.6-2.4v-85.6l5.6 1.2c3 0.6 18 1.6 33.4 2.2 15.4 0.8 34 2.6 41.6 4 28.2 5.8 54.4 26 67 51.6 3.8 7.6 7.8 13.2 9 12.8 1.4-0.4 7.2-2.4 13-4.2 5.6-2 10.4-4.6 10.4-6 0-1.6-3.4-9.4-7.4-17.4-10.6-21.4-32.6-43-54.4-53.6-9.2-4.4-23-9.4-31-11-38.2-8.2-203.8-11.6-296.2-6zM592 186c68.4 3.2 106 9 132.2 20.2 12 5.2 16.8 11.8 34.2 46.8 37.6 75 76.8 210.6 72.6 250.6-0.8 7.4-2.6 15.6-4 18.6-3.6 6.8-18.4 20.2-32.4 29.2-12.4 7.8-61.8 32-76.6 37.4-8.6 3-8.8 3-4-0.4 49.6-35 63.4-45.6 76.6-58.4 17.8-17.6 17.4-16 12.4-56-4.8-39-20-94.8-40.4-149-11-29.4-36.4-82.4-42.4-88.4-7.4-7.8-43.2-16.4-86.2-20.6-34.4-3.4-158.2-4.8-206.8-2.2-60.4 3.2-89.4 7.4-112.2 16.4-12 4.6-16.8 11.6-33.6 49.8-38 86.6-61.4 172.2-61.4 224.4v15.4l13.2 13.2c12.8 12.6 43.4 35.6 67.4 50.4 6.2 4 11.2 7.6 10.6 8-1.2 1.4-40.4-15-62.8-26.2-24.8-12.4-45-26.6-49-34.6-1.6-3-4-15.6-5.4-27.6-2.2-20-2-24.2 1.8-46.4 8-46.4 22.4-94.6 45.6-153.6 13.4-34 32-73 40.2-84.2 7.8-10.6 21.2-17 46.4-22.4 19.2-4.2 70.6-10 98-11 38.6-1.6 127.2-1.2 166 0.6zM194 656.8c0 6.4 6 33 10 45.2 21.6 63.6 98.4 169.8 171 236.8 28 25.8 44 37.4 60.8 44.2 25.2 10.4 69 15 103.6 11.2 52.2-6 69.8-16 125.6-71 90-89.2 156-193 163.8-257.8l1.4-11.4h-30.2v7.6c0 19.8-18 63.4-41.8 101.4-38 60.2-102 134.8-150 174.8-25.4 21-49.8 28.2-96.2 28.2-41.2 0-63.6-5.4-85.6-20.4-15.8-10.8-56-49.2-79-75.6-73.4-83.8-117.8-157.2-124.4-205.6l-1.4-10.4h-13.8c-10.6 0-13.8 0.6-13.8 2.8zM407.2 770.6c-1.8 7.4-3.2 13.6-3.2 14.2 0 1.6 28 7.4 55 11.4 43.2 6.4 79.6 4.6 136-6.2 12.2-2.4 22.2-4.6 22.6-5 0.4-0.2-1-6.6-2.8-14l-3.4-13.4-7.2 1c-4 0.6-17.6 3.2-30.2 5.6-33.6 6.6-93.2 6.6-126 0.2-12.6-2.6-26.2-5.2-30.2-5.8l-7.2-1-3.4 13z"
                }
            })])
        }
        function d(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"
                }
            }), (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M512 250l262 262-262 262-262-262z"
                }
            })])
        }
        function p(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: N
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("g", {
                attrs: {
                    transform: "matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"
                }
            }), (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M256 0l256 256-256 256-256-256z"
                }
            })])])
        }
        function m(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"
                }
            }), (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M375 181l200 200-200 200-200-200z"
                }
            })])
        }
        function g(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M64 0h384v1024h-384z"
                }
            }), (0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M576 0h384v1024h-384z"
                }
            })])
        }
        function v(e, t) {
            var r = t.active ? t.activeColor : _;
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: D
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M138 0L1024 512L138 1024z"
                }
            })])
        }
        function y(e, t) {
            var r = t.active ? t.activeColor : "#000";
            return (0,
            A.default)("svg", {
                attrs: (0,
                w.default)({
                    viewBox: "0 0 32 32"
                }, e),
                style: {
                    padding: E,
                    boxSizing: S
                }
            }, [(0,
            A.default)("path", {
                attrs: {
                    fill: r,
                    filter: b,
                    d: "M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 28c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM10 16c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z"
                }
            })])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var M = r(/*! babel-runtime/helpers/extends */
        86)
          , w = n(M);
        t.glowFilter = i,
        t.home = a,
        t.orbit = o,
        t.pan = s,
        t.zoom = u,
        t.fullscreen = l,
        t.vrMode = c,
        t.lenticularMode = h,
        t.deviceTracking = f,
        t.nodeRotate = d,
        t.nodeMove = p,
        t.nodeScale = m,
        t.pause = g,
        t.play = v,
        t.select = y;
        var x = r(/*! snabbdom/h */
        23)
          , A = n(x)
          , b = "url(#glowfilter)"
          , T = "#000"
          , _ = "#fff"
          , E = "0"
          , S = "border-box"
          , D = "-300 -300 1624 1624"
          , N = "-150 -150 812 812"
    }
    , /*!*************************************!*\
  !*** ./src/operators/Annotation.js ***!
  \*************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! babel-runtime/core-js/object/assign */
        2)
          , a = n(i)
          , o = {
            schema: {
                useText: {
                    type: "Boolean",
                    label: "Use Custom Text",
                    defaultValue: !1,
                    animatable: !1
                },
                text: {
                    type: "String",
                    label: "Custom Text",
                    defaultValue: "Annotation Text",
                    animatable: !1
                },
                open: {
                    type: "Boolean",
                    label: "Open by default",
                    defaultValue: !1,
                    animatable: !1
                },
                limitVisilibility: {
                    type: "Boolean",
                    label: "Limit Visibility",
                    defaultValue: !1,
                    animatable: !1
                },
                visibilityAngle: {
                    type: "Number",
                    label: "Visibility Angle",
                    defaultValue: 180,
                    step: 5,
                    minValue: 10,
                    maxValue: 360,
                    animatable: !1
                },
                directionMode: {
                    label: "Direction Mode",
                    type: "Options",
                    labels: ["Manual", "Away From Origin"],
                    values: ["manual", "awayFromOrigin"],
                    defaultValue: "manual"
                },
                directionAxis: {
                    label: "Direction",
                    type: "Options",
                    labels: ["XAxis", "YAxis", "ZAxis"],
                    values: ["x", "y", "z"],
                    defaultValue: "z"
                },
                directionTarget: {
                    type: "Node",
                    label: "Direction Target"
                }
            },
            update: function(e, t, r) {
                var n = r.node;
                (0,
                a.default)(t, e),
                e.useText || (t.text = n.name)
            }
        };
        t.default = {
            Annotation: o
        }
    }
    , /*!**********************************!*\
  !*** ./src/operators/BinMesh.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../translators/bingeom */
        62)
          , a = r(/*! ../modules/assets */
        26)
          , o = r(/*! ./PolyMesh/MeshSmooth */
        119)
          , s = n(o)
          , u = {
            schema: {
                binary: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                reducedBinary: {
                    type: "Binary",
                    label: "Reduced Binary Geometry File"
                },
                operatorDisplay: {
                    type: "Number",
                    defaultValue: 1,
                    label: "Operator Display Type"
                },
                nbLevel: {
                    type: "Number",
                    defaultValue: 1
                },
                level0: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level1: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level2: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level3: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level4: {
                    type: "Binary",
                    label: "Binary Geometry File"
                }
            },
            update: function(e, t, r) {
                var n = (r.node,
                r.store)
                  , o = r.properties
                  , s = r.previousResult
                  , u = r.loaded
                  , l = o.visible
                  , c = e.binary
                  , h = l || o.prefetch && u
                  , f = h && c && n.hasApi() && (0,
                a.getOrFetchBinary)(c)(n)
                  , d = f && (0,
                i.convertToCNSPolyMesh)(f, c);
                t.mesh = d,
                t.previousMesh = s && s.mesh
            }
        }
          , l = {
            schema: {
                geometry: {
                    label: "Mesh",
                    plug: "BinMesh",
                    type: "Plug"
                }
            },
            update: function(e, t) {
                t.mesh = e.geometry && e.geometry.mesh
            }
        };
        t.default = {
            ProxyMesh: u,
            MeshSmooth: s.default,
            Instance: l
        }
    }
    , /*!*********************************!*\
  !*** ./src/operators/Camera.js ***!
  \*********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! babel-runtime/core-js/object/assign */
        2)
          , a = n(i)
          , o = r(/*! babel-runtime/core-js/object/keys */
        8)
          , s = n(o)
          , u = {
            "-1": "[ Custom ]",
            35: "35mm",
            70: "IMAX"
        }
          , l = {
            values: [0, 1],
            labels: ["Field of View", "Focal Length"]
        }
          , c = {
            schema: {
                targeted: {
                    label: "Enable Look Target",
                    type: "Boolean",
                    defaultValue: !1
                },
                focalDepthEnabled: {
                    label: "Use Focal Depth",
                    type: "Boolean",
                    defaultValue: !1
                },
                focalDepth: {
                    label: "Focal Depth",
                    type: "Number",
                    defaultValue: 100,
                    minValue: .001,
                    animatable: !0,
                    hidden: !0
                },
                axisDirection: {
                    type: "Object",
                    hidden: !0
                },
                zoomAxis: {
                    type: "Object",
                    hidden: !0
                },
                projection: {
                    label: "Projection",
                    type: "Options",
                    defaultValue: "Perspective",
                    values: ["Perspective", "Orthographic"]
                },
                viewCtrl: {
                    type: "Options",
                    defaultValue: 0,
                    values: l.values,
                    labels: l.labels,
                    label: "View Control"
                },
                fieldOfView: {
                    label: "Field of View",
                    type: "Number",
                    defaultValue: 45,
                    minValue: 5,
                    maxValue: 179,
                    animatable: !0
                },
                focalLength: {
                    label: "Focal Length (mm)",
                    type: "Number",
                    defaultValue: 40,
                    minValue: 1,
                    maxValue: 400,
                    step: 1,
                    animatable: !0
                },
                filmSizeBox: {
                    type: "Options",
                    defaultValue: "35",
                    values: (0,
                    s.default)(u),
                    labels: u,
                    label: "Film Size"
                },
                customFilmSize: {
                    label: "Custom Film Size (mm)",
                    type: "Number",
                    defaultValue: 35,
                    step: .1,
                    minValue: 1,
                    maxValue: 1e3
                },
                fStop: {
                    label: "F-Stop",
                    type: "Number",
                    defaultValue: 2.8,
                    minValue: .7,
                    maxValue: 32,
                    step: .1
                },
                filmOffset: {
                    label: "Film Offset (mm)",
                    type: "Vec2",
                    defaultValue: {
                        x: 0,
                        y: 0
                    },
                    minValue: -1e3,
                    step: 1,
                    maxValue: 1e3
                },
                aspectRatio: {
                    label: "Aspect Ratio",
                    type: "Number",
                    defaultValue: 16 / 9,
                    step: .01,
                    minValue: .01,
                    maxValue: 10
                },
                nearClip: {
                    label: "Near Clip",
                    type: "Number",
                    step: .01,
                    defaultValue: .1,
                    minValue: .01
                },
                farClip: {
                    label: "Far Clip",
                    type: "Number",
                    defaultValue: 5e4,
                    step: 1,
                    minValue: 1e-5,
                    maxValue: 1e6
                },
                orthoZoom: {
                    label: "Ortho Zoom",
                    type: "Number",
                    defaultValue: 1,
                    minValue: .01,
                    step: .1
                },
                targetDistance: {
                    label: "Distance to Target",
                    type: "Number",
                    defaultValue: 5,
                    minValue: .01
                },
                target: {
                    label: "Virtual Target",
                    type: "Vec3",
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    hidden: !0
                },
                showFrustum: {
                    label: "Show Frustum",
                    type: "Boolean",
                    defaultValue: !1
                },
                frustumColor: {
                    label: "Frustum Color",
                    type: "Color",
                    defaultValue: {
                        r: 1,
                        g: .78,
                        b: 0
                    },
                    animatable: !0
                },
                showClipping: {
                    label: "Show Clipping",
                    type: "Boolean",
                    defaultValue: !1
                },
                showTarget: {
                    label: "Show Virtual Target",
                    type: "Boolean",
                    defaultValue: !1
                }
            },
            update: function(e, t, r) {
                var n = r.previousResult;
                (0,
                a.default)(t, e);
                var i = ["pivotMatrix", "upPosition", "radiusConstraint", "newRadiusConstraint", "offset"];
                if (n)
                    for (var o = 0; o < i.length; o++)
                        n[i[o]] && (t[i[o]] = n[i[o]]);
                var s = e.filmSizeBox;
                t.filmSize = s === -1 ? e.customFilmSize : parseFloat(s)
            }
        };
        t.default = {
            Camera: c
        }
    }
    , /*!**************************************!*\
  !*** ./src/operators/Environment.js ***!
  \**************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            values: [0, 1, 2, 3, 4],
            labels: ["Default", "Color", "Image", "CubeMap", "EnvironmentMap"]
        }
          , n = {
            schema: {
                ambientLight: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0
                    }
                },
                environmentMap: {
                    label: "Environment Map",
                    type: "Plug",
                    plug: "Material"
                },
                backgroundStyle: {
                    label: "Style",
                    type: "Options",
                    defaultValue: 0,
                    values: r.values,
                    labels: r.labels
                },
                backgroundColor: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0
                    }
                },
                backgroundOpacity: {
                    label: "Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                },
                background: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                cubeMapBlurring: {
                    label: "CubeMap Blur",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 10,
                    step: .5,
                    animatable: !0
                },
                cubeMap: {
                    label: "CubeMap",
                    type: "Plug",
                    plug: "Material"
                }
            }
        };
        t.default = {
            Environment: n
        }
    }
    , /*!********************************!*\
  !*** ./src/operators/Image.js ***!
  \********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! ramda */
        3)
          , o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../translators/asset */
        134)
          , l = r(/*! ../modules/assets */
        26)
          , c = r(/*! path */
        349)
          , h = n(c)
          , f = 1003
          , d = 1004
          , p = 1005
          , m = 1006
          , g = 1007
          , v = 1008
          , y = 3e3
          , M = 3001
          , w = 3002
          , x = 3003
          , A = 3004
          , b = 3005
          , T = {
            Original: 0,
            WebGL: 1,
            Renderer: 3
        }
          , _ = {
            values: [0, 1, 2],
            labels: ["Original", "WebGL", "Renderer"]
        }
          , E = {
            values: [0, 1, 2],
            labels: ["None", "Wrap", "Mirror"]
        }
          , S = {
            values: [f, d, p, m, g, v],
            labels: ["Nearest", "Nearest MipMap Nearest", "Nearest MipMap Linear", "Linear", "Linear MipMap Nearest", "Linear MipMap Linear"]
        }
          , D = {
            values: [y, M, w, x, A, b],
            labels: ["Linear", "sRGB", "RGBE/Radiance", "Log LUV", "RGBM 7", "RGBM 16"]
        }
          , N = {
            schema: {
                originalBitmapFile: {
                    type: "Image",
                    hidden: !0
                },
                glBitmapFile: {
                    type: "Image",
                    hidden: !0
                },
                rendererBitmapFile: {
                    type: "Image",
                    hidden: !0
                },
                hdrBitmapFile: {
                    type: "Image",
                    hidden: !0
                },
                renderOption: {
                    label: "Server Image",
                    type: "Options",
                    defaultValue: 0,
                    values: _.values,
                    labels: _.labels
                },
                glOption: {
                    label: "WebGL Image",
                    type: "Options",
                    defaultValue: 1,
                    values: _.values,
                    labels: _.labels
                },
                uOffset: {
                    type: "Number",
                    label: "U Offset",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                vOffset: {
                    type: "Number",
                    label: "V Offset",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                uTile: {
                    type: "Number",
                    label: "U Tile",
                    defaultValue: 1,
                    step: .1,
                    animatable: !0
                },
                vTile: {
                    type: "Number",
                    label: "V Tile",
                    defaultValue: 1,
                    step: .1,
                    animatable: !0
                },
                rotation: {
                    type: "Number",
                    label: "Rotation",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                wrapU: {
                    type: "Options",
                    defaultValue: 1,
                    values: E.values,
                    labels: E.labels,
                    label: "U Wrap Style"
                },
                wrapV: {
                    type: "Options",
                    defaultValue: 1,
                    values: E.values,
                    labels: E.labels,
                    label: "V Wrap Style"
                },
                invert: {
                    type: "Boolean",
                    label: "Invert",
                    defaultValue: !1,
                    animatable: !0
                },
                gainPivot: {
                    type: "Number",
                    label: "Gain Pivot",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                gain: {
                    type: "Number",
                    label: "Gain",
                    defaultValue: 1,
                    step: .1,
                    animatable: !0
                },
                brightness: {
                    type: "Number",
                    label: "Brightness",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                magFilter: {
                    type: "Options",
                    defaultValue: m,
                    values: S.values,
                    labels: S.labels,
                    label: "Magnify Filter"
                },
                minFilter: {
                    type: "Options",
                    defaultValue: v,
                    values: S.values,
                    labels: S.labels,
                    label: "Minify Filter"
                },
                generateMipMaps: {
                    label: "Use MipMaps",
                    type: "Boolean",
                    defaultValue: !0
                },
                hdrEncoding: {
                    type: "Options",
                    defaultValue: b,
                    values: D.values,
                    labels: D.labels,
                    label: "HDR Encoding"
                }
            },
            update: function(e, t, r) {
                var n = (r.node,
                r.store)
                  , i = null
                  , o = e.glOption;
                i = o == T.Original ? e.originalBitmapFile : o === T.WebGL ? e.glBitmapFile || e.originalBitmapFile : e.rendererBitmapFile || e.originalBitmapFile,
                t.asset = i,
                t.hdr = e.hdrBitmapFile;
                var s = (0,
                l.getUrl)(n, e.originalBitmapFile);
                return e.hdrBitmapFile && ".hdr" === h.default.extname(s) && (t.hdrSource = e.originalBitmapFile),
                (0,
                a.forEach)(function(r) {
                    t[r] = e[r]
                }, ["uOffset", "vOffset", "uTile", "vTile", "rotation", "wrapU", "wrapV", "gain", "gainPivot", "brightness", "magFilter", "minFilter", "generateMipMaps", "hdrEncoding", "invert"]),
                t.preferHDR = e.hdrEncoding !== y && !!e.hdrBitmapFile,
                t
            }
        }
          , I = {
            schema: {
                width: {
                    type: "Number",
                    defaultValue: 512,
                    minValue: 16,
                    maxValue: 4096,
                    step: 1,
                    label: "Width"
                },
                height: {
                    type: "Number",
                    defaultValue: 512,
                    minValue: 16,
                    maxValue: 4096,
                    step: 1,
                    label: "Height"
                },
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0,
                        a: 0
                    },
                    animatable: !0
                },
                opacity: {
                    label: "Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .1,
                    animatable: !0
                },
                uOffset: {
                    type: "Number",
                    label: "U Offset",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                vOffset: {
                    type: "Number",
                    label: "V Offset",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                uTile: {
                    type: "Number",
                    label: "U Tile",
                    defaultValue: 1,
                    step: .1,
                    animatable: !0
                },
                vTile: {
                    type: "Number",
                    label: "V Tile",
                    defaultValue: 1,
                    step: .1,
                    animatable: !0
                },
                rotation: {
                    type: "Number",
                    label: "Rotation",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                wrapU: {
                    type: "Options",
                    defaultValue: 1,
                    values: E.values,
                    labels: E.labels,
                    label: "U Wrap Style"
                },
                wrapV: {
                    type: "Options",
                    defaultValue: 1,
                    values: E.values,
                    labels: E.labels,
                    label: "V Wrap Style"
                },
                invert: {
                    type: "Boolean",
                    label: "Invert",
                    defaultValue: !1,
                    animatable: !0
                },
                gainPivot: {
                    type: "Number",
                    label: "Gain Pivot",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                gain: {
                    type: "Number",
                    label: "Gain",
                    defaultValue: 1,
                    step: .1,
                    animatable: !0
                },
                brightness: {
                    type: "Number",
                    label: "Brightness",
                    defaultValue: 0,
                    step: .1,
                    animatable: !0
                },
                magFilter: {
                    type: "Options",
                    defaultValue: s.LinearFilter,
                    values: S.values,
                    labels: S.labels,
                    label: "Magnify Filter"
                },
                minFilter: {
                    type: "Options",
                    defaultValue: s.LinearMipMapLinearFilter,
                    values: S.values,
                    labels: S.labels,
                    label: "Minify Filter"
                },
                generateMipMaps: {
                    label: "Use MipMaps",
                    type: "Boolean",
                    defaultValue: !0
                },
                hdrEncoding: {
                    type: "Options",
                    defaultValue: s.RGBM16Encoding,
                    values: D.values,
                    labels: D.labels,
                    label: "HDR Encoding"
                }
            },
            update: function(e, t, r) {
                var n = (r.node,
                e.width)
                  , i = e.height
                  , o = e.color;
                o && (o = "rgba(" + parseInt(255 * o.r) + "," + parseInt(255 * o.g) + "," + parseInt(255 * o.b) + "," + e.opacity + ")"),
                (0,
                a.forEach)(function(r) {
                    t[r] = e[r]
                }, ["uOffset", "vOffset", "uTile", "vTile", "rotation", "wrapU", "wrapV", "gain", "gainPivot", "brightness", "magFilter", "minFilter", "generateMipMaps", "hdrEncoding", "invert", "width", "height"]);
                var s = function(e) {
                    return e.fillStyle = o,
                    e.fillRect(0, 0, n, i),
                    !0
                };
                return t.canvasOperations ? t.canvasOperations.push(s) : t.canvasOperations = [s],
                t
            }
        }
          , L = {
            schema: {
                startIs: {
                    label: "Start Is",
                    type: "Options",
                    values: ["top", "left", "top-left", "bottom-left"],
                    initialValue: "top"
                },
                startColor: {
                    label: "Start Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0,
                        a: 0
                    },
                    animatable: !0
                },
                startOpacity: {
                    label: "Start Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .1,
                    animatable: !0
                },
                endColor: {
                    label: "End Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0,
                        a: 0
                    },
                    animatable: !0
                },
                endOpacity: {
                    label: "End Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .1,
                    animatable: !0
                },
                xOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "X",
                    animatable: !0
                },
                yOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "Y",
                    animatable: !0
                },
                width: {
                    type: "Number",
                    defaultValue: 512,
                    minValue: 16,
                    maxValue: 4096,
                    step: 1,
                    label: "Width"
                },
                height: {
                    type: "Number",
                    defaultValue: 512,
                    minValue: 16,
                    maxValue: 4096,
                    step: 1,
                    label: "Height"
                },
                composition: {
                    label: "Mode",
                    type: "Options",
                    values: ["source-over", "source-in", "source-out", "source-atop", "destination-over", "destination-in", "destination-out", "destination-atop", "lighter", "copy", "xor", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"],
                    initialValue: "source-over"
                }
            },
            update: function(e, t) {
                var r = e.xOffset
                  , n = e.yOffset
                  , i = e.width
                  , a = e.height
                  , o = e.startColor
                  , s = e.endColor;
                o && (o = "rgba(" + parseInt(255 * o.r) + "," + parseInt(255 * o.g) + "," + parseInt(255 * o.b) + "," + e.startOpacity + ")"),
                s && (s = "rgba(" + parseInt(255 * s.r) + "," + parseInt(255 * s.g) + "," + parseInt(255 * s.b) + "," + e.endOpacity + ")");
                var u = function(t) {
                    var u = void 0;
                    switch (e.startIs) {
                    case "top":
                        u = t.createLinearGradient(r, n, r, n + a);
                        break;
                    case "left":
                        u = t.createLinearGradient(r, n, r + i, n);
                        break;
                    case "top-left":
                        u = t.createLinearGradient(r, n, r + i, n + a);
                        break;
                    default:
                        u = t.createLinearGradient(r, n + a, r + i, n)
                    }
                    return u.addColorStop(0, o),
                    u.addColorStop(1, s),
                    t.fillStyle = u,
                    t.globalCompositeOperation = e.composition,
                    t.fillRect(r, n, i, a),
                    !0
                };
                return t.canvasOperations ? t.canvasOperations.push(u) : t.canvasOperations = [u],
                t
            }
        }
          , C = {
            schema: {
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0,
                        a: 0
                    },
                    animatable: !0
                },
                opacity: {
                    label: "Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .1,
                    animatable: !0
                },
                xOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "X",
                    animatable: !0
                },
                yOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "Y",
                    animatable: !0
                },
                width: {
                    type: "Number",
                    defaultValue: 512,
                    minValue: 16,
                    maxValue: 4096,
                    step: 1,
                    label: "Width"
                },
                height: {
                    type: "Number",
                    defaultValue: 512,
                    minValue: 16,
                    maxValue: 4096,
                    step: 1,
                    label: "Height"
                },
                composition: {
                    label: "Mode",
                    type: "Options",
                    values: ["source-over", "source-in", "source-out", "source-atop", "destination-over", "destination-in", "destination-out", "destination-atop", "lighter", "copy", "xor", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"],
                    initialValue: "source-over"
                }
            },
            update: function(e, t) {
                var r = e.xOffset
                  , n = e.yOffset
                  , i = e.width
                  , a = e.height
                  , o = e.color;
                o && (o = "rgba(" + parseInt(255 * o.r) + "," + parseInt(255 * o.g) + "," + parseInt(255 * o.b) + "," + e.opacity + ")");
                var s = function(t) {
                    return t.fillStyle = o,
                    t.globalCompositeOperation = e.composition,
                    t.fillRect(r, n, i, a),
                    !0
                };
                return t.canvasOperations ? t.canvasOperations.push(s) : t.canvasOperations = [s],
                t
            }
        }
          , O = {
            schema: {
                sourceImage: {
                    type: "Plug",
                    plug: "Image"
                },
                xOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "X Pixel",
                    animatable: !0
                },
                yOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "Y Pixel",
                    animatable: !0
                },
                xRelativeOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -10,
                    maxValue: 10,
                    step: .01,
                    label: "X Relative",
                    animatable: !0
                },
                yRelativeOffset: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -10,
                    maxValue: 10,
                    step: .01,
                    label: "Y Relative",
                    animatable: !0
                },
                offsetUnit: {
                    label: "Unit",
                    type: "Options",
                    values: ["pixel", "relative"],
                    initialValue: "absolute"
                },
                overrideSize: {
                    type: "Boolean",
                    label: "Override Default Size",
                    defaultValue: !1,
                    animatable: !0
                },
                overrideWidth: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "Override Width",
                    animatable: !0
                },
                overrideHeight: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1e4,
                    maxValue: 1e4,
                    step: 1,
                    label: "Override Height",
                    animatable: !0
                },
                overrideWidthRelative: {
                    type: "Number",
                    defaultValue: 1,
                    minValue: -100,
                    maxValue: 100,
                    step: .01,
                    label: "Relative Width",
                    animatable: !0
                },
                overrideHeightRelative: {
                    type: "Number",
                    defaultValue: 1,
                    minValue: -100,
                    maxValue: 100,
                    step: .01,
                    label: "Relative Height",
                    animatable: !0
                },
                overrideSizeUnit: {
                    label: "Unit",
                    type: "Options",
                    values: ["pixel", "relative"],
                    initialValue: "absolute"
                },
                rotation: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -3600,
                    maxValue: 3600,
                    step: 1,
                    label: "Rotation",
                    animatable: !0
                },
                horizontalAlign: {
                    type: "Options",
                    defaultValue: "left",
                    values: ["left", "center", "right"],
                    label: "Horizontal Align"
                },
                verticalAlign: {
                    type: "Options",
                    defaultValue: "top",
                    values: ["top", "middle", "bottom"],
                    label: "Vertical Align"
                },
                composition: {
                    label: "Composition",
                    type: "Options",
                    values: ["source-over", "source-in", "source-out", "source-atop", "destination-over", "destination-in", "destination-out", "destination-atop", "lighter", "copy", "xor", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"],
                    initialValue: "source-over"
                },
                tint: {
                    label: "Enabled",
                    type: "Boolean",
                    defaultValue: !1,
                    animatable: !0
                },
                tintColor: {
                    label: "Tint Color",
                    type: "Color",
                    defaultValue: 16777215,
                    animatable: !0
                },
                tintOpacity: {
                    label: "Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .01,
                    animatable: !0
                },
                tintComposition: {
                    label: "Tint Mode",
                    type: "Options",
                    values: ["source-over", "source-in", "source-out", "source-atop", "destination-over", "destination-in", "destination-out", "destination-atop", "lighter", "copy", "xor", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"],
                    initialValue: "multiply"
                }
            },
            update: function(e, t, r) {
                var n = (r.node,
                r.store,
                e.sourceImage)
                  , i = e.xOffset
                  , a = e.yOffset
                  , o = e.xRelativeOffset
                  , s = e.yRelativeOffset
                  , l = e.offsetUnit
                  , c = e.overrideSize
                  , h = e.overrideWidth
                  , f = e.overrideHeight
                  , d = e.overrideWidthRelative
                  , p = e.overrideHeightRelative
                  , m = e.overrideSizeUnit
                  , g = e.composition
                  , v = e.tint
                  , y = e.tintColor
                  , M = e.tintOpacity
                  , w = e.tintComposition
                  , x = e.rotation * Math.PI / 180
                  , A = e.horizontalAlign
                  , b = e.verticalAlign
                  , T = function(e, t, r) {
                    if (!n)
                        return !1;
                    var T = (0,
                    u.fetchTextureImage)(t, n);
                    if (!T)
                        return !1;
                    c || (h = T.width,
                    f = T.height),
                    c && "relative" === m && (h = d * r.width,
                    f = p * r.height),
                    0 == h && (h = 1),
                    0 == f && (f = 1);
                    var _ = t.createCanvas(h, f)
                      , E = _.getContext("2d");
                    if (v) {
                        var S = "rgba(" + parseInt(255 * y.r) + "," + parseInt(255 * y.g) + "," + parseInt(255 * y.b) + "," + M + ")";
                        E.fillStyle = S,
                        E.globalCompositeOperation = "source-over",
                        E.fillRect(0, 0, h, f),
                        E.globalCompositeOperation = "destination-in",
                        E.drawImage(T, 0, 0, h, f),
                        E.globalCompositeOperation = w
                    }
                    E.drawImage(T, 0, 0, h, f),
                    e.globalCompositeOperation = g,
                    "relative" === l && (i = o * r.width,
                    a = s * r.height),
                    e.translate(i, a),
                    e.rotate(x);
                    var D = void 0
                      , N = void 0;
                    switch (A) {
                    case "left":
                        D = 0;
                        break;
                    case "center":
                        D = .5 * -h;
                        break;
                    default:
                        D = -h
                    }
                    switch (b) {
                    case "top":
                        N = 0;
                        break;
                    case "middle":
                        N = .5 * -f;
                        break;
                    default:
                        N = -f
                    }
                    return e.drawImage(_, D, N, h, f),
                    !0
                };
                return t.canvasOperations ? t.canvasOperations.push(T) : t.canvasOperations = [T],
                t
            }
        }
          , j = {
            schema: {
                fontName: {
                    label: "Font Name",
                    type: "Options",
                    defaultValue: "serif",
                    values: ["serif", "sans serif", "monoscape", "custom"],
                    labels: ["Serif", "Sans Serif", "Monoscape", "Custom CSS Font"]
                },
                fontCSSSpecifier: {
                    label: "CSS Font Specifer",
                    type: "Text",
                    defaultValue: "Times New Roman, Times, serif"
                },
                text: {
                    label: "Text",
                    type: "String",
                    defaultValue: "Times New Roman, Times, serif"
                },
                fontSize: {
                    label: "Font Size",
                    type: "Number",
                    defaultValue: 100,
                    minValue: 1,
                    maxValue: 1e4,
                    step: 1,
                    animatable: !0
                },
                italic: {
                    label: "Italic",
                    type: "Boolean",
                    defaultValue: !1,
                    animatable: !0
                },
                bold: {
                    label: "Bold",
                    type: "Boolean",
                    defaultValue: !1,
                    animatable: !0
                },
                style: {
                    label: "Drawing Style",
                    type: "Options",
                    defaultValue: "solid",
                    values: ["solid", "outline"]
                },
                outlineWidth: {
                    type: "Number",
                    defaultValue: 3,
                    minValue: -10,
                    maxValue: 100,
                    step: 1,
                    label: "Outline Width",
                    animatable: !0
                },
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0
                    },
                    animatable: !0
                },
                opacity: {
                    label: "Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .01,
                    animatable: !0
                },
                positionX: {
                    type: "Number",
                    defaultValue: 256,
                    minValue: -1e3,
                    maxValue: 1e4,
                    step: 1,
                    label: "Position X",
                    animatable: !0
                },
                positionY: {
                    type: "Number",
                    defaultValue: 256,
                    minValue: -1e3,
                    maxValue: 1e4,
                    step: 1,
                    label: "Position Y",
                    animatable: !0
                },
                positionXRelative: {
                    type: "Number",
                    defaultValue: .5,
                    minValue: -10,
                    maxValue: 10,
                    step: .01,
                    label: "X Relative",
                    animatable: !0
                },
                positionYRelative: {
                    type: "Number",
                    defaultValue: .5,
                    minValue: -10,
                    maxValue: 10,
                    step: .01,
                    label: "Y Relative",
                    animatable: !0
                },
                positionUnit: {
                    label: "Unit",
                    type: "Options",
                    values: ["pixel", "relative"],
                    initialValue: "absolute"
                },
                rotation: {
                    type: "Number",
                    defaultValue: 0,
                    minValue: -3600,
                    maxValue: 3600,
                    step: 1,
                    label: "Rotation",
                    animatable: !0
                },
                horizontalAlign: {
                    type: "Options",
                    defaultValue: "center",
                    values: ["left", "center", "right"],
                    label: "Horizontal Align"
                },
                verticalAlign: {
                    type: "Options",
                    defaultValue: "middle",
                    values: ["top", "middle", "bottom"],
                    label: "Vertical Align"
                }
            },
            update: function(e, t) {
                var r = e.fontName;
                switch (r) {
                case "serif":
                    r = "Times New Roman, Times, serif";
                    break;
                case "sans serif":
                    r = "Arial, Helvetica, sans-serif";
                    break;
                case "monoscape":
                    r = "Courier New, Courier, monospace";
                    break;
                case "custom":
                    r = e.fontCSSSpecifier
                }
                var n = e.text
                  , i = e.fontSize
                  , a = e.italic
                  , o = e.bold
                  , s = e.style
                  , u = e.outlineWidth
                  , l = e.color
                  , c = e.opacity;
                l = "rgba(" + parseInt(255 * l.r) + "," + parseInt(255 * l.g) + "," + parseInt(255 * l.b) + "," + c + ")";
                var h = e.positionX
                  , f = e.positionY
                  , d = e.positionXRelative
                  , p = e.positionYRelative
                  , m = e.positionUnit
                  , g = e.horizontalAlign
                  , v = e.verticalAlign
                  , y = e.rotation * Math.PI / 180
                  , M = function(e, t, c) {
                    var M = h
                      , w = f;
                    "relative" === m && (M = d * c.width,
                    w = p * c.height),
                    e.fillStyle = l;
                    var x = a ? "italic" : "normal"
                      , A = o ? 700 : 400;
                    return e.font = x + " " + A + " " + i + "px " + r,
                    e.textAlign = g,
                    e.textBaseline = v,
                    e.translate(M, w),
                    e.rotate(y),
                    "outline" === s ? (e.lineWidth = u,
                    e.strokeStyle = l,
                    e.strokeText(n, 0, 0)) : (e.fillStyle = l,
                    e.fillText(n, 0, 0)),
                    !0
                };
                return t.canvasOperations ? t.canvasOperations.push(M) : t.canvasOperations = [M],
                t
            }
        };
        t.default = {
            Image: N,
            Canvas: I,
            CanvasLinearGradient: L,
            CanvasFill: C,
            CanvasComposite: O,
            CanvasText: j
        }
    }
    , /*!********************************!*\
  !*** ./src/operators/Light.js ***!
  \********************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            schema: {
                lightType: {
                    label: "type",
                    type: "String",
                    defaultValue: "DirectionalLight"
                },
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                },
                intensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: .8
                },
                shadow: {
                    label: "Enable",
                    type: "Boolean",
                    defaultValue: !1
                },
                shadowBias: {
                    label: "Bias",
                    type: "Number",
                    defaultValue: 0
                },
                shadowSize: {
                    label: "Map Size",
                    type: "Number",
                    defaultValue: 512
                },
                shadowCameraSize: {
                    label: "Camera Size",
                    type: "Number",
                    defaultValue: 500
                },
                shadowNearClip: {
                    label: "Near Clip",
                    type: "Number",
                    step: .01,
                    defaultValue: .1
                },
                shadowFarClip: {
                    label: "Far Clip",
                    type: "Number",
                    defaultValue: 1e3
                },
                shadowRadius: {
                    label: "Radius",
                    type: "Number",
                    defaultValue: 1
                },
                showShadowCamera: {
                    label: "Show Frustum",
                    type: "Boolean",
                    defaultValue: !1
                },
                shadowFrustumColor: {
                    label: "Frustum Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                }
            }
        }
          , n = {
            schema: {
                lightType: {
                    label: "type",
                    type: "String",
                    defaultValue: "SpotLight"
                },
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                },
                intensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: .8
                },
                distance: {
                    label: "Cutoff Distance",
                    type: "Number",
                    defaultValue: 0
                },
                coneAngle: {
                    label: "Cone Angle",
                    type: "Number",
                    defaultValue: 60
                },
                coneFalloff: {
                    label: "Cone Falloff",
                    type: "Number",
                    defaultValue: 0
                },
                decayExponent: {
                    label: "Decay Exponent",
                    type: "Number",
                    defaultValue: 0
                },
                shadow: {
                    label: "Enable",
                    type: "Boolean",
                    defaultValue: !1
                },
                shadowBias: {
                    label: "Bias",
                    type: "Number",
                    defaultValue: -0
                },
                shadowSize: {
                    label: "Map Size",
                    type: "Number",
                    defaultValue: 512
                },
                shadowNearClip: {
                    label: "Near Clip",
                    type: "Number",
                    step: .01,
                    defaultValue: .1
                },
                shadowFarClip: {
                    label: "Far Clip",
                    type: "Number",
                    defaultValue: 1e3
                },
                shadowRadius: {
                    label: "Radius",
                    type: "Number",
                    defaultValue: 1
                },
                showShadowCamera: {
                    label: "Show Frustum",
                    type: "Boolean",
                    defaultValue: !1
                },
                shadowFrustumColor: {
                    label: "Frustum Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                }
            }
        }
          , i = {
            schema: {
                lightType: {
                    label: "type",
                    type: "String",
                    defaultValue: "PointLight"
                },
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                },
                intensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: .8
                },
                distance: {
                    label: "Cutoff Distance",
                    type: "Number",
                    defaultValue: 0
                },
                decayExponent: {
                    label: "Decay Exponent",
                    type: "Number",
                    defaultValue: 0
                },
                shadow: {
                    label: "Enable",
                    type: "Boolean",
                    defaultValue: !1
                },
                shadowBias: {
                    label: "Bias",
                    type: "Number",
                    defaultValue: 0
                },
                shadowSize: {
                    label: "Map Size",
                    type: "Number",
                    defaultValue: 512
                },
                shadowNearClip: {
                    label: "Near Clip",
                    type: "Number",
                    step: .01,
                    defaultValue: .5
                },
                shadowFarClip: {
                    label: "Far Clip",
                    type: "Number",
                    defaultValue: 500
                },
                shadowRadius: {
                    label: "Radius",
                    type: "Number",
                    defaultValue: 1
                }
            }
        }
          , a = {
            schema: {
                lightType: {
                    label: "type",
                    type: "String",
                    defaultValue: "HemisphereLight"
                },
                color: {
                    label: "Sky Color",
                    type: "Color",
                    defaultValue: {
                        r: .2,
                        g: .52,
                        b: 1
                    }
                },
                gndColor: {
                    label: "Sky Color",
                    type: "Color",
                    defaultValue: {
                        r: 1,
                        g: .78,
                        b: .5
                    }
                },
                intensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: .6
                }
            }
        }
          , o = {
            schema: {
                lightType: {
                    label: "type",
                    type: "String",
                    defaultValue: "AreaLight"
                },
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                },
                intensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: 10
                },
                width: {
                    label: "Source Width",
                    type: "Number",
                    defaultValue: 1
                },
                height: {
                    label: "Source Height",
                    type: "Number",
                    defaultValue: 1
                },
                shadow: {
                    label: "Enable",
                    type: "Boolean",
                    defaultValue: !1
                }
            }
        };
        t.default = {
            DirectionalLight: r,
            SpotLight: n,
            PointLight: i,
            HemisphereLight: a,
            AreaLight: o
        }
    }
    , /*!***********************************!*\
  !*** ./src/operators/Material.js ***!
  \***********************************/
    function(e, t, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = (r(/*! ramda */
        3),
        {
            schema: {
                color: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                }
            },
            update: function(e, t) {
                return t.color = e.color
            }
        })
          , i = {
            environment: !0,
            schema: {
                baseMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                baseMapTransparent: {
                    label: "Image Transparent",
                    type: "Boolean",
                    defaultValue: !1
                },
                baseColor: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                },
                baseFalloff: {
                    label: "Falloff",
                    type: "Boolean",
                    defaultValue: !1
                },
                baseFalloffMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                baseFalloffColor: {
                    label: "Falloff Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    },
                    animatable: !0
                },
                opacityMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                opacityFactor: {
                    label: "Factor",
                    type: "Number",
                    defaultValue: 1,
                    maxValue: 1,
                    minValue: 0,
                    step: .01,
                    animatable: !0
                },
                opacityFalloffMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                opacityFalloffFactor: {
                    label: "Falloff Factor",
                    type: "Number",
                    defaultValue: 1,
                    maxValue: 1,
                    minValue: 0,
                    step: .01,
                    animatable: !0
                },
                depthWrite: {
                    label: "Depth Write",
                    type: "Boolean",
                    defaultValue: !0
                },
                depthTest: {
                    label: "Depth Test",
                    type: "Boolean",
                    defaultValue: !0
                },
                specularMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                specularColor: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: 1,
                        g: 1,
                        b: 1
                    },
                    animatable: !0
                },
                roughness: {
                    label: "Roughness",
                    type: "Number",
                    defaultValue: .25,
                    minValue: 0,
                    maxValue: 1,
                    step: .01,
                    animatable: !0
                },
                roughnessMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                metallic: {
                    label: "Metallic",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                    step: .01,
                    animatable: !0
                },
                metallicMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                clearCoat: {
                    label: "Thickness",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                    step: .01,
                    animatable: !0
                },
                clearCoatRoughness: {
                    label: "Roughness",
                    type: "Number",
                    defaultValue: .25,
                    minValue: 0,
                    maxValue: 1,
                    step: .01,
                    animatable: !0
                },
                aoMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                aoMapIntensity: {
                    label: "Factor",
                    type: "Number",
                    defaultValue: 1,
                    maxValue: 1,
                    minValue: 0,
                    step: .01,
                    animatable: !0
                },
                lightMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                ambientColor2: {
                    label: "Color",
                    type: "Color",
                    animatable: !0,
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0
                    }
                },
                emissiveMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                emissiveColor: {
                    label: "Color",
                    type: "Color",
                    animatable: !0,
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0
                    }
                },
                emissiveScale: {
                    label: "Scale",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 100,
                    step: .1,
                    animatable: !0
                },
                emissiveLabel: {
                    type: "Label",
                    align: "right",
                    defaultValue: "Emissive uses the second UV channel."
                },
                translucencyColor: {
                    label: "Color",
                    type: "Color",
                    animatable: !0,
                    defaultValue: {
                        r: 0,
                        g: 0,
                        b: 0
                    }
                },
                translucencyMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                translucencyNormalAlpha: {
                    label: "Normal Alpha",
                    type: "Number",
                    defaultValue: .75,
                    minValue: 0,
                    maxValue: 1,
                    step: .05,
                    animatable: !0
                },
                translucencyNormalPower: {
                    label: "Normal Power",
                    type: "Number",
                    defaultValue: 2,
                    minValue: .01,
                    maxValue: 100,
                    step: .05,
                    animatable: !0
                },
                translucencyViewAlpha: {
                    label: "View Alpha",
                    type: "Number",
                    defaultValue: .75,
                    minValue: 0,
                    maxValue: 1,
                    step: .05,
                    animatable: !0
                },
                translucencyViewPower: {
                    label: "View Power",
                    type: "Number",
                    defaultValue: 2,
                    minValue: .01,
                    maxValue: 100,
                    step: .05,
                    animatable: !0
                },
                bumpMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                bumpFactor: {
                    label: "Scale Factor",
                    type: "Number",
                    defaultValue: .03,
                    minValue: -5,
                    maxValue: 5,
                    step: .001,
                    animatable: !0
                },
                normalMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                normalFactor: {
                    label: "Scale Factor",
                    type: "Number",
                    defaultValue: 1,
                    minValue: -100,
                    maxValue: 100,
                    step: .001,
                    animatable: !0
                },
                normalRedFlip: {
                    label: "Red Channel Flip",
                    type: "Boolean",
                    defaultValue: !1
                },
                normalGreenFlip: {
                    label: "Green Channel Flip",
                    type: "Boolean",
                    defaultValue: !1
                },
                anisotropyLabel: {
                    type: "Label",
                    align: "right",
                    defaultValue: "Anisotropy requires the Tangent operator."
                },
                anisotropyMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                anisotropy: {
                    label: "Offset",
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1,
                    maxValue: 1,
                    step: .025,
                    animatable: !0
                },
                anisotropyRotationMap: {
                    label: "Image",
                    type: "Plug",
                    plug: "Image"
                },
                anisotropyRotation: {
                    label: "Rotation Offset",
                    type: "Number",
                    defaultValue: 0,
                    minValue: -1,
                    maxValue: 1,
                    step: .025,
                    animatable: !0
                },
                overrideEnvironment: {
                    label: "Override Environment",
                    type: "Boolean",
                    defaultValue: !1
                }
            }
        }
          , a = {
            schema: {
                defaultColor: {
                    label: "Default Color",
                    type: "Color",
                    defaultValue: {
                        r: 1,
                        g: 1,
                        b: 1
                    }
                },
                reference: {
                    type: "Plug",
                    plug: "Material",
                    label: "Reference"
                }
            },
            update: function(e, t) {
                t.color = e.defaultColor
            }
        }
          , o = {
            schema: {
                defaultColor: {
                    label: "Default Color",
                    type: "Color",
                    defaultValue: {
                        r: 1,
                        g: 1,
                        b: 1
                    }
                },
                reference: {
                    type: "Plug",
                    plug: "Material",
                    label: "Reference"
                }
            },
            update: function(e, t) {
                return e.reference ? e.reference : void (t.defaultColor = e.defaultColor)
            }
        }
          , s = {
            schema: {
                thumbnailImage: {
                    label: "Thumbnail",
                    type: "Plug",
                    plug: "Image"
                },
                irradianceCubeMap: {
                    label: "Irradiance",
                    type: "Plug",
                    plug: "Material"
                },
                specularCubeMap: {
                    label: "Specular",
                    type: "Plug",
                    plug: "Material"
                },
                intensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: .001,
                    maxValue: 100,
                    step: .1,
                    animatable: !0
                }
            }
        }
          , u = {
            schema: {
                map0: {
                    label: "Map ( x)",
                    type: "Plug",
                    plug: "Image"
                },
                map1: {
                    label: "Map (-x)",
                    type: "Plug",
                    plug: "Image"
                },
                map2: {
                    label: "Map ( y)",
                    type: "Plug",
                    plug: "Image"
                },
                map3: {
                    label: "Map (-y)",
                    type: "Plug",
                    plug: "Image"
                },
                map4: {
                    label: "Map ( z)",
                    type: "Plug",
                    plug: "Image"
                },
                map5: {
                    label: "Map (-z)",
                    type: "Plug",
                    plug: "Image"
                }
            },
            update: function(e, t, r) {
                r.node,
                t.maps = [e.map0, e.map1, e.map2, e.map3, e.map4, e.map5]
            }
        }
          , l = {
            schema: {
                webgl: {
                    type: "Plug",
                    label: "WebGL Material",
                    plug: "Material"
                },
                vray: {
                    type: "Plug",
                    label: "VRay Material",
                    plug: "Material"
                }
            },
            update: function(e, t) {
                return e.webgl || t
            }
        }
          , c = {
            schema: {
                diffuseColor: {
                    label: "Color",
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    }
                }
            }
        }
          , h = {
            schema: {
                defaultColor: {
                    label: "Default Color",
                    type: "Color",
                    defaultValue: {
                        r: .5,
                        g: .5,
                        b: .5
                    }
                },
                material0: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 0"
                },
                material1: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 1"
                },
                material2: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 2"
                },
                material3: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 3"
                },
                material4: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 4"
                },
                material5: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 5"
                },
                material6: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 6"
                },
                material7: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 7"
                },
                material8: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 8"
                },
                material9: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 9"
                },
                material10: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 10"
                },
                material11: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 11"
                },
                material12: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 12"
                },
                material13: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 13"
                },
                material14: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 14"
                },
                material15: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 15"
                },
                material16: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 16"
                },
                material17: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 17"
                },
                material18: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 18"
                },
                material19: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 19"
                },
                material20: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 20"
                },
                material21: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 21"
                },
                material22: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 22"
                },
                material23: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 23"
                },
                material24: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 24"
                },
                material25: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 25"
                },
                material26: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 26"
                },
                material27: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 27"
                },
                material28: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 28"
                },
                material29: {
                    type: "Plug",
                    plug: "Material",
                    label: "Material ID 29"
                },
                multiID: {
                    type: "Boolean",
                    label: "Is MultiID",
                    defaultValue: !0
                }
            }
        }
          , f = {
            schema: {
                visMatZipFile: {
                    type: "File",
                    hidden: !0
                },
                viewColor: {
                    type: "Color",
                    defaultValue: {
                        r: .94,
                        g: .94,
                        b: .94
                    },
                    label: "Viewport Color"
                }
            }
        };
        t.default = {
            Material: n,
            Physical: i,
            MaterialReference: a,
            Reference: o,
            EnvironmentMap: s,
            CubeMap: u,
            Standard: c,
            ProxyReference: l,
            MultiID: h,
            "vray/VRmat": f
        }
    }
    , /*!*********************************!*\
  !*** ./src/operators/Player.js ***!
  \*********************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            schema: {
                autoRotate: {
                    label: "Auto-Rotate Camera",
                    type: "Boolean",
                    defaultValue: !1
                },
                autoRotateNode: {
                    label: "Rotate Node",
                    type: "Node"
                },
                autoRotateSpeed: {
                    label: "Rotate Speed (seconds)",
                    type: "Number",
                    minValue: 1,
                    maxValue: 60,
                    defaultValue: 12
                },
                autoRotateDirection: {
                    label: "Rotate Direction",
                    type: "Options",
                    values: ["-", "+"],
                    labels: ["Clockwise", "Counter-clockwise"],
                    defaultValue: "-"
                },
                camera: {
                    label: "Camera",
                    type: "Node"
                },
                constraintCameraY: {
                    label: "Constrain Camera to Positive Y",
                    type: "Boolean",
                    defaultValue: !1
                },
                orbitTarget: {
                    label: "Orbit Target",
                    type: "Node"
                },
                orbitMode: {
                    label: "Orbit Mode",
                    type: "Options",
                    values: ["gyroscope", "trackball", "firstPerson"],
                    labels: ["Gyropscope", "Trackball", "First Person"],
                    defaultValue: "gyroscope"
                },
                toneMapStyle: {
                    label: "Style",
                    type: "Options",
                    values: ["Linear", "Reinhard", "Cineon", "Filmic"],
                    defaultValue: "Linear"
                },
                toneMapExposureGain: {
                    label: "Exposure Gain",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 20,
                    step: .1
                },
                toneMapWhitePoint: {
                    label: "White Point",
                    type: "Number",
                    defaultValue: 4,
                    minValue: 0,
                    maxValue: 20,
                    step: .1
                },
                dofPass: {
                    label: "Enabled",
                    type: "Boolean",
                    defaultValue: !1
                },
                dofMaxBlur: {
                    label: "Max Blur",
                    type: "Number",
                    defaultValue: 10,
                    minValue: 0,
                    maxValue: 100,
                    step: .1
                },
                saoPass: {
                    label: "Enabled",
                    type: "Boolean",
                    defaultValue: !1
                },
                saoIntensity: {
                    label: "Intensity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1e3,
                    step: .1
                },
                saoScale: {
                    label: "Scale",
                    type: "Number",
                    defaultValue: 24,
                    minValue: 0,
                    maxValue: 1e3,
                    step: .1
                },
                bloomPass: {
                    label: "Enabled",
                    type: "Boolean",
                    defaultValue: !1
                },
                bloomThreshold: {
                    label: "Luminance Threshold",
                    type: "Number",
                    defaultValue: .9,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                },
                reflectiveFloor: {
                    label: "Enabled",
                    type: "Boolean",
                    defaultValue: !1
                },
                reflectiveFloorWidth: {
                    label: "Width",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1e3,
                    step: 1
                },
                reflectiveFloorRoughness: {
                    label: "Roughness",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 10,
                    step: .1
                },
                reflectiveFloorMetallic: {
                    label: "Metallic",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                },
                reflectiveFloorFade: {
                    label: "Fade",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1e4,
                    step: .1
                },
                reflectiveFloorHeight: {
                    label: "Height",
                    type: "Number",
                    defaultValue: 0,
                    minValue: -100,
                    maxValue: 100,
                    step: .1
                },
                reflectiveFloorOpacity: {
                    label: "Opacity",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                },
                reflectiveFloorFresnel: {
                    label: "Fresnel Strength",
                    type: "Number",
                    defaultValue: 1,
                    minValue: -1,
                    maxValue: 1,
                    step: .1
                },
                reflectiveFloorExcludeServer: {
                    label: "Exclude on Server",
                    type: "Boolean",
                    defaultValue: !1
                },
                configurator: {
                    label: "Configurator",
                    type: "String",
                    hidden: !0,
                    defaultValue: "{}"
                },
                gravity: {
                    label: "Gravity",
                    type: "Vec3",
                    step: 1,
                    defaultValue: [0, -9.8, 0]
                }
            }
        };
        t.default = {
            Player: r
        }
    }
    , /*!**********************************************!*\
  !*** ./src/operators/PolyMesh/MeshSmooth.js ***!
  \**********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/operator/subdivision */
        214)
          , a = n(i)
          , o = {
            schema: {
                subdivisions: {
                    label: "Subdivisions",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 4
                },
                smoothByMaterialIds: {
                    label: "Smooth by Material Ids",
                    type: "Boolean",
                    defaultValue: !0
                }
            },
            update: function(e, t) {
                var r = t.mesh
                  , n = void 0 !== e.subdivisions ? e.subdivisions : 1;
                if (!r)
                    return t;
                for (var i = 0; i < n; i++)
                    r = (0,
                    a.default)(r, e.smoothByMaterialIds);
                return t.mesh = r,
                t
            }
        };
        t.default = o
    }
    , /*!*****************************************!*\
  !*** ./src/operators/PolyMesh/index.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ./Mesh */
        183)
          , a = n(i)
          , o = r(/*! ./TransformVertices */
        190)
          , s = n(o)
          , u = r(/*! ./MeshSmooth */
        119)
          , l = n(u)
          , c = r(/*! ./UVMap */
        191)
          , h = n(c)
          , f = r(/*! ./UVTransform */
        192)
          , d = n(f)
          , p = r(/*! ./Skin */
        186)
          , m = n(p)
          , g = r(/*! ./Box */
        177)
          , v = n(g)
          , y = r(/*! ./Sphere */
        188)
          , M = n(y)
          , w = r(/*! ./Cone */
        179)
          , x = n(w)
          , A = r(/*! ./Capsule */
        178)
          , b = n(A)
          , T = r(/*! ./Cylinder */
        180)
          , _ = n(T)
          , E = r(/*! ./Plane */
        184)
          , S = n(E)
          , D = r(/*! ./Torus */
        189)
          , N = n(D)
          , I = r(/*! ./Disk */
        181)
          , L = n(I)
          , C = r(/*! ./ProxyMesh */
        185)
          , O = n(C)
          , j = r(/*! ./Instance */
        182)
          , R = n(j)
          , P = r(/*! ./SortFacesByAxis */
        187)
          , z = n(P);
        t.default = {
            Mesh: a.default,
            MeshSmooth: l.default,
            Skin: m.default,
            TransformVertices: s.default,
            UVMap: h.default,
            UVTransform: d.default,
            Box: v.default,
            Sphere: M.default,
            Cone: x.default,
            Capsule: b.default,
            Cylinder: _.default,
            Plane: S.default,
            Torus: N.default,
            Disk: L.default,
            ProxyMesh: O.default,
            Instance: R.default,
            SortFacesByAxis: z.default
        }
    }
    , /*!*************************************!*\
  !*** ./src/operators/Properties.js ***!
  \*************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            schema: {
                doubleSided: {
                    label: "Double Sided",
                    type: "Boolean",
                    defaultValue: !1
                },
                visible: {
                    label: "Visible",
                    type: "Boolean",
                    defaultValue: !0,
                    animatable: !0
                },
                prefetch: {
                    label: "Pre-fetch mesh",
                    type: "Boolean",
                    defaultValue: !1
                },
                castShadow: {
                    label: "Cast Shadow",
                    type: "Boolean",
                    defaultValue: !0
                },
                receiveShadow: {
                    label: "Receive Shadow",
                    type: "Boolean",
                    defaultValue: !0
                }
            }
        }
          , n = {
            schema: {
                prefetch: {
                    label: "Pre-fetch Material",
                    type: "Boolean",
                    defaultValue: !1
                }
            }
        }
          , i = {
            schema: {
                prefetch: {
                    label: "Pre-fetch Image",
                    type: "Boolean",
                    defaultValue: !1
                }
            }
        }
          , a = {
            schema: {
                visible: {
                    label: "Visible",
                    type: "Boolean",
                    defaultValue: !0,
                    animatable: !0
                }
            }
        }
          , o = ["Static", "Kinematic", "Dynamic"]
          , s = ["Box", "Convex", "Mesh"]
          , u = ["Bounding Box", "Convex Hull", "Mesh (Non-Dynamic)"]
          , l = {
            schema: {
                collisionShape: {
                    label: "Collision Shape",
                    type: "Options",
                    display: "Dropdown",
                    values: s,
                    labels: u,
                    defaultValue: "Convex"
                },
                motionType: {
                    label: "Motion Type",
                    type: "Options",
                    display: "Dropdown",
                    values: o,
                    labels: o,
                    defaultValue: "Dynamic"
                },
                mass: {
                    label: "Mass",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    step: 1
                },
                linearDamping: {
                    label: "Linear Damping",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                },
                angularDamping: {
                    label: "Angular Damping",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                },
                linearFactor: {
                    label: "Linear Factor",
                    type: "Vec3",
                    defaultValue: [1, 1, 1]
                },
                angularFactor: {
                    label: "Angular Factor",
                    type: "Vec3",
                    defaultValue: [1, 1, 1]
                },
                linearVelocity: {
                    label: "Linear Velocity",
                    type: "Vec3",
                    defaultValue: [0, 0, 0]
                },
                angularVelocity: {
                    label: "Angular Velocity",
                    type: "Vec3",
                    defaultValue: [0, 0, 0]
                },
                linearSleepingThreshold: {
                    label: "Linear Sleep Threshold",
                    type: "Number",
                    defaultValue: .8,
                    minValue: 0,
                    step: .1
                },
                angularSleepingThreshold: {
                    label: "Angular Sleep Threshold",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    step: .1
                },
                friction: {
                    label: "Friction",
                    type: "Number",
                    defaultValue: .5,
                    minValue: 0,
                    step: .1
                },
                rollingFriction: {
                    label: "Rolling Friction",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    step: .1
                },
                restitution: {
                    label: "Bounce",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 1,
                    step: .1
                }
            }
        };
        t.default = {
            Default: a,
            PolyMeshProperties: r,
            MaterialProperties: n,
            ImageProperties: i,
            RigidBodyProperties: l
        }
    }
    , /*!************************************!*\
  !*** ./src/operators/Transform.js ***!
  \************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! three */
        1)
          , a = n(i)
          , o = r(/*! ../modules/scene */
        4)
          , s = {
            schema: {
                translation: {
                    label: "Translation",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                rotation: {
                    label: "Rotation",
                    type: "Vec3",
                    step: 1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                scale: {
                    label: "Scale",
                    type: "Vec3",
                    step: .01,
                    defaultValue: {
                        x: 1,
                        y: 1,
                        z: 1
                    },
                    animatable: !0
                },
                shear: {
                    label: "Shear",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                rotateOrder: {
                    label: "Rotate Order",
                    type: "Options",
                    display: "Dropdown",
                    values: ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"],
                    defaultValue: "ZYX"
                },
                preRotation: {
                    label: "Pre-Rotation",
                    type: "Vec3",
                    step: 1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                },
                rotatePivotOffset: {
                    label: "Rotate Pivot Offset",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                },
                scalePivotOffset: {
                    label: "Scale Pivot Offset",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                },
                localRotatePivot: {
                    label: "Local Rotate Pivot",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                },
                localScalePivot: {
                    label: "Local Scale Pivot",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                }
            },
            update: function(e, t) {
                t.transform = (0,
                o.getLocalTransform)(e)
            }
        }
          , u = {
            schema: {
                target: {
                    label: "LookAt Target",
                    type: "Plug",
                    plug: "Transform"
                },
                orientation: {
                    label: "Orientation",
                    type: "Vec3",
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                lookAtAxis: {
                    label: "Look Axis",
                    type: "Options",
                    display: "Dropdown",
                    defaultValue: "Z",
                    labels: ["X", "Y", "Z"],
                    values: ["X", "Y", "Z"]
                },
                flipLookAtAxis: {
                    label: "Flip Look Axis",
                    type: "Boolean",
                    defaultValue: !0
                },
                upAxis: {
                    label: "Up Axis",
                    type: "Options",
                    display: "Dropdown",
                    defaultValue: "Y",
                    labels: ["X", "Y", "Z"],
                    values: ["X", "Y", "Z"]
                },
                flipUpAxis: {
                    label: "Flip Up Axis",
                    type: "Boolean",
                    defaultValue: !1
                }
            }
        }
          , l = {
            schema: {
                translation: {
                    label: "Translation",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                rotation: {
                    label: "Rotation",
                    type: "Vec3",
                    step: 1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                scale: {
                    label: "Scale",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 1,
                        y: 1,
                        z: 1
                    },
                    animatable: !0
                },
                rotateOrder: {
                    label: "Rotate Order",
                    type: "Options",
                    display: "Dropdown",
                    values: ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"],
                    defaultValue: "ZYX"
                },
                preRotation: {
                    label: "Pre-Rotation",
                    type: "Vec3",
                    step: 1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                },
                rotateAxis: {
                    label: "Rotate Axis",
                    type: "Vec3",
                    step: 1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    }
                }
            },
            update: function(e, t, r) {
                var n = (r.node,
                e.translation)
                  , i = e.rotation
                  , o = e.scale
                  , s = (e.rotateOrder,
                e.preRotation)
                  , u = e.rotateAxis;
                0 === o.x && (o.x = 1e-7),
                0 === o.y && (o.y = 1e-7),
                0 === o.z && (o.z = 1e-7);
                var l = (new a.Matrix4).makeTranslation(n.x, n.y, n.z)
                  , c = (new a.Vector3).copy(i).multiplyScalar(Math.PI / 180)
                  , h = (new a.Matrix4).makeRotationFromEuler(new a.Euler(c.x,c.y,c.z,"ZYX"))
                  , f = (new a.Matrix4,
                (new a.Matrix4).makeScale(o.x, o.y, o.z))
                  , d = (new a.Vector3).copy(s).multiplyScalar(Math.PI / 180)
                  , p = (new a.Matrix4).makeRotationFromEuler(new a.Euler(d.x,d.y,d.z,"ZYX"))
                  , m = (new a.Vector3).copy(u).multiplyScalar(Math.PI / 180)
                  , g = (new a.Matrix4).makeRotationFromEuler(new a.Euler(m.x,m.y,m.z,"ZYX"));
                t.transform = (new a.Matrix4).multiply(l).multiply(p).multiply(h).multiply(g).multiply(f)
            }
        };
        t.default = {
            Transform: s,
            BoneTransform: l,
            LookAt: u
        }
    }
    , /*!*******************************************!*\
  !*** ./src/operators/makeAllOperators.js ***!
  \*******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            var r = t.withNone
              , n = (0,
            b.mapObjIndexed)(function(e, t) {
                return (0,
                b.mapObjIndexed)(function(e, r) {
                    return a(t, e, r)
                }, e)
            }, e);
            return r && (n.None = {
                NoOp: a("None", {
                    schema: {}
                }, "NoOp")
            }),
            n
        }
        function a(e, t, r) {
            var n = (0,
            b.map)(function(e, t) {
                return _.default[e.type] ? (0,
                x.default)({
                    type: e.type,
                    schema: e
                }, _.default[e.type](e)) : {
                    set: function(e) {
                        return e
                    },
                    get: function(e) {
                        return e
                    }
                }
            }, t.schema)
              , i = (0,
            M.default)(n)
              , a = (0,
            b.map)(function(e, t) {
                return e.defaultValue
            }, n);
            a.type = r,
            a.name = r;
            var o = (0,
            b.pickBy)(function(e, t) {
                return e.isReference
            }, n)
              , u = (0,
            b.pickBy)(function(e, t) {
                return e.isFileReference
            }, n)
              , c = function(a) {
                function c() {
                    return (0,
                    l.default)(this, c),
                    (0,
                    d.default)(this, (c.__proto__ || (0,
                    s.default)(c)).apply(this, arguments))
                }
                return (0,
                v.default)(c, a),
                (0,
                h.default)(c, [{
                    key: "keys",
                    value: function() {
                        return i
                    }
                }, {
                    key: "getProperties",
                    value: function() {
                        return n
                    }
                }, {
                    key: "getReferences",
                    value: function() {
                        var e = this;
                        return (0,
                        A.Map)((0,
                        b.pickBy)(function(e) {
                            return !!e
                        }, (0,
                        b.mapObjIndexed)(function(t, r) {
                            return e.get(r)
                        }, o)))
                    }
                }, {
                    key: "getFileReferences",
                    value: function() {
                        var e = this;
                        return (0,
                        A.Map)((0,
                        b.pickBy)(function(e) {
                            return !!e
                        }, (0,
                        b.mapObjIndexed)(function(t, r) {
                            return e.get(r)
                        }, u)))
                    }
                }, {
                    key: "typeOf",
                    value: function(e) {
                        return t.schema[e] && t.schema[e].type
                    }
                }, {
                    key: "set",
                    value: function(e, t) {
                        var r = n[e] ? n[e].set(t) : t;
                        return (0,
                        m.default)(c.prototype.__proto__ || (0,
                        s.default)(c.prototype), "set", this).call(this, e, r)
                    }
                }, {
                    key: "export",
                    value: function() {
                        var t = this
                          , i = (0,
                        b.mapObjIndexed)(function(e, r) {
                            var n = t.get(r);
                            return u[r] || o[r] ? n ? n.get("id") : null : n
                        }, n);
                        return i.name = r,
                        i.primitive = e,
                        i
                    }
                }, {
                    key: "doUpdate",
                    value: function(e, n, i) {
                        var a = t.update ? t.update.call(t, e, n, i) : e.mergeInto(e, n);
                        return a || console.error("Operator not returning its result: ", r, t),
                        a || (0,
                        A.Map)()
                    }
                }], [{
                    key: "keys",
                    value: function() {
                        return i
                    }
                }]),
                c
            }((0,
            A.Record)(a, e + r));
            return c
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/object/get-prototype-of */
        84)
          , s = n(o)
          , u = r(/*! babel-runtime/helpers/classCallCheck */
        268)
          , l = n(u)
          , c = r(/*! babel-runtime/helpers/createClass */
        269)
          , h = n(c)
          , f = r(/*! babel-runtime/helpers/possibleConstructorReturn */
        272)
          , d = n(f)
          , p = r(/*! babel-runtime/helpers/get */
        270)
          , m = n(p)
          , g = r(/*! babel-runtime/helpers/inherits */
        271)
          , v = n(g)
          , y = r(/*! babel-runtime/core-js/object/keys */
        8)
          , M = n(y)
          , w = r(/*! babel-runtime/core-js/object/assign */
        2)
          , x = n(w);
        t.default = i;
        var A = r(/*! immutable */
        11)
          , b = r(/*! ramda */
        3)
          , T = r(/*! ./schemaTypes */
        124)
          , _ = n(T)
    }
    , /*!**************************************!*\
  !*** ./src/operators/schemaTypes.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return e ? e.isVector3 ? e : e.hasOwnProperty("x") ? new h.Vector3(e.x,e.y,e.z) : Array.isArray(e) ? new h.Vector3(e[0],e[1],e[2]) : new h.Vector3 : new h.Vector3
        }
        function a(e) {
            return e ? e.isVector2 ? e : e.hasOwnProperty("x") ? new h.Vector2(e.x,e.y) : Array.isArray(e) ? new h.Vector2(e[0],e[1]) : new h.Vector2 : new h.Vector2
        }
        function o(e) {
            return e ? Array.isArray(e) ? new h.Color(e[0],e[1],e[2]) : e.hasOwnProperty("r") ? new h.Color(e.r,e.g,e.b) : (0,
            c.default)(e) ? new h.Color(e) : new h.Color : new h.Color
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r(/*! babel-runtime/core-js/json/stringify */
        51)
          , u = n(s)
          , l = r(/*! babel-runtime/core-js/number/is-integer */
        261)
          , c = n(l)
          , h = r(/*! three */
        1)
          , f = {
            Boolean: function(e) {
                var t = e.defaultValue || !1;
                return {
                    defaultValue: t,
                    set: function(e) {
                        return null == e ? t : !!e
                    }
                }
            },
            Label: function(e) {
                return {
                    set: function(e) {
                        return "string" == typeof e ? e : ""
                    }
                }
            },
            Number: function(e) {
                function t(t) {
                    return e.apply(this, arguments)
                }
                return t.toString = function() {
                    return e.toString()
                }
                ,
                t
            }(function(e) {
                var t = e.minValue
                  , r = e.maxValue
                  , n = e.defaultValue || 0
                  , i = void 0;
                return i = void 0 !== t && void 0 !== r ? function(e) {
                    return Math.min(Math.max(t, e), r)
                }
                : void 0 !== t ? function(e) {
                    return Math.max(e, t)
                }
                : void 0 !== r ? function(e) {
                    return Math.min(e, r)
                }
                : function(e) {
                    return e
                }
                ,
                {
                    defaultValue: n,
                    set: function(e) {
                        var t = Number(e);
                        return isNaN(t) ? n : Math.round(1e4 * i(t)) / 1e4
                    }
                }
            }),
            Integer: function(e) {
                var t = e.minValue
                  , r = e.maxValue
                  , n = e.defaultValue || 0
                  , i = void 0;
                return i = void 0 !== t && void 0 !== r ? function(e) {
                    return Math.min(Math.max(t, e), r)
                }
                : void 0 !== t ? function(e) {
                    return Math.max(e, t)
                }
                : void 0 !== r ? function(e) {
                    return Math.min(e, r)
                }
                : function(e) {
                    return e
                }
                ,
                {
                    defaultValue: n,
                    set: function(e) {
                        var t = Number(e);
                        return isNaN(t) ? n : Math.round(i(t))
                    }
                }
            },
            Plug: function(e) {
                if (!e.plug)
                    throw new Error("plug property expects a `plug` property");
                return {
                    isPlugReference: e.plug,
                    set: function(e) {
                        return e && e.id ? e.id : e
                    }
                }
            },
            Options: function(e) {
                var t = e.defaultValue;
                return {
                    defaultValue: t,
                    set: function(e) {
                        return null == e ? t : e
                    }
                }
            },
            Image: function(e) {
                return {
                    isFileReference: !0,
                    set: function(e) {
                        return e && e.id ? e.id : e
                    }
                }
            },
            Binary: function(e) {
                return {
                    isFileReference: !0,
                    set: function(e) {
                        return e && e.id ? e.id : e
                    }
                }
            },
            File: function(e) {
                return {
                    isFileReference: !0,
                    set: function(e) {
                        return e && e.id ? e.id : e
                    }
                }
            },
            Object: function(e) {
                var t = e.defaultValue || {};
                return {
                    set: function(e) {
                        return e || t
                    },
                    equals: function(e, t) {
                        return (0,
                        u.default)(e) === (0,
                        u.default)(t)
                    }
                }
            },
            String: function(e) {
                var t = e.defaultValue || "";
                return {
                    defaultValue: t,
                    set: function(e) {
                        return "string" == typeof e ? e : t
                    }
                }
            },
            Node: function(e) {
                return {
                    isNodeReference: !0,
                    set: function(e) {
                        return e && e.id ? e.id : e
                    }
                }
            },
            NodeList: function(e) {
                return {
                    isReferenceList: !0,
                    set: function(e) {
                        return Array.isArray(e) ? e.map(function(e) {
                            return e && e.id ? e.id : e
                        }) : []
                    },
                    equals: function(e, t) {
                        return (0,
                        u.default)(e) === (0,
                        u.default)(t)
                    }
                }
            },
            Vec2: function(e) {
                var t = a(e.defaultValue);
                return {
                    defaultValue: t,
                    set: function(e) {
                        return a(e || t)
                    },
                    get: function(e) {
                        return e.clone()
                    },
                    equals: function(e, t) {
                        return e.equals(t)
                    }
                }
            },
            Color: function(e) {
                var t = o(e.defaultValue);
                return {
                    defaultValue: t,
                    set: function(e) {
                        return o(e || t)
                    },
                    get: function(e) {
                        return e.clone()
                    },
                    equals: function(e, t) {
                        return e.equals(t)
                    }
                }
            },
            Vec3: function(e) {
                var t = i(e.defaultValue);
                return {
                    defaultValue: t,
                    set: function(e) {
                        return i(e || t)
                    },
                    get: function(e) {
                        return e.clone()
                    },
                    equals: function(e, t) {
                        return e.equals(t)
                    }
                }
            }
        };
        t.default = f
    }
    , /*!**************************************************!*\
  !*** ./src/polyMesh/generic/container/BitSet.js ***!
  \**************************************************/
    function(e, t) {
        "use strict";
        function r(e) {
            this.data = new Uint32Array(e + 31 >>> 5),
            this.length = e,
            this.byteView = null
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r,
        r.prototype = {
            constructor: r,
            clear: function() {
                return this.data.fill(0),
                this
            },
            fill: function(e, t) {
                var r = this.data
                  , n = void 0 !== e ? e : 0
                  , i = void 0 !== t ? n + t : this.length
                  , a = n >>> 5
                  , o = i >>> 5
                  , s = -2147483648 >> ~n
                  , u = (1 << i) - 1;
                return a === o ? r[a] |= s & u : (r[a] |= s,
                ++a !== o && r.fill(-1, a, o),
                r[o] |= u),
                this
            },
            include: function(e) {
                this.data[e >>> 5] |= 1 << e
            },
            exclude: function(e) {
                this.data[e >>> 5] &= ~(1 << e)
            },
            contains: function(e) {
                return 0 !== (this.data[e >>> 5] & 1 << e)
            },
            swap: function(e, t) {
                var r = this.data
                  , n = e >>> 5
                  , i = 1 << e
                  , a = t >>> 5
                  , o = 1 << t
                  , s = 0 !== (r[n] & i)
                  , u = 0 !== (r[a] & o);
                s !== u && (s ? (r[n] &= ~i,
                r[a] |= o) : (r[n] |= i,
                r[a] &= ~o))
            },
            testAndInclude: function(e) {
                var t = this.data
                  , r = e >>> 5
                  , n = 1 << e
                  , i = t[r];
                return t[r] = i | n,
                0 !== (i & n)
            },
            includeFromArray: function(e, t, r) {
                for (var n = this.data, i = t || 0, a = r || e.length; i < a; ++i) {
                    var o = e[i];
                    n[o >>> 5] |= 1 << o
                }
                return this
            },
            containsAnyIn: function(e, t, r) {
                for (var n = !1, i = this.data, a = t || 0, o = r || e.length; a < o && !n; ++a) {
                    var s = e[a];
                    n = 0 !== (i[s >>> 5] & 1 << s)
                }
                return n
            },
            countSetBits: function(e, t) {
                var n = 0
                  , i = void 0 !== e ? e : 0
                  , a = void 0 !== t ? t : this.length;
                if (0 === (a - i & -16384))
                    n = this.countSetBitsInShortRange(i, a);
                else if (i < a) {
                    var o = this.byteView
                      , s = r._ByteBitCount;
                    null === o && (o = new Uint8Array(this.data.buffer),
                    this.byteView = o);
                    var u = i >>> 3
                      , l = a >>> 3
                      , c = -2147483648 >> 31 - (7 & i)
                      , h = (1 << (7 & a)) - 1;
                    n = s[o[u] & c];
                    for (var f = u + 1; f !== l; ++f)
                        n += s[o[f]];
                    n += s[o[l] & h]
                }
                return n
            },
            countSetBitsInShortRange: function(e, t) {
                var r = 0
                  , n = this.data
                  , i = e
                  , a = i >>> 5
                  , o = n[a] >> i;
                for (r = 1 & o; ++i !== t; )
                    0 !== (31 & i) ? o >>= 1 : o = 0 | n[++a],
                    r += 1 & o;
                return r
            },
            toIndexArray: function(e) {
                for (var t = new Uint32Array(void 0 === e ? this.countSetBits() : e), r = 0, n = 0, i = this.data, a = 0, o = i.length; a !== o; ++a) {
                    for (var s = i[a], u = r; 0 !== s; s >>>= 1,
                    ++u)
                        0 !== (1 & s) && (t[n++] = u);
                    r += 32
                }
                return t
            }
        },
        r._ByteBitCount = function() {
            for (var e = new Uint8Array(256), t = 0; 256 !== t; ++t) {
                for (var r = 0, n = t; 0 !== n; n >>>= 1)
                    0 !== (1 & n) && ++r;
                e[t] = r
            }
            return e
        }()
    }
    , /*!*******************************************************!*\
  !*** ./src/polyMesh/generic/container/BlockBuffer.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            this.blocks = [],
            this.lastBlock = null,
            this.arrayType = e;
            var r = t || 12;
            this.intraBlockIndexBits = r,
            this.intraBlockIndexMask = (1 << r) - 1,
            this.length = 0
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../utility/Arrays */
        16)
          , o = n(a);
        i.prototype = {
            constructor: i,
            elementSize: 1,
            toArrayAndClear: function() {
                var e = this.toArray();
                return this.clear(),
                e
            },
            newRangeArray: function(e) {
                var t = e || 1;
                return new this.arrayType(t * this.elementSize)
            },
            rangeToArray: function(e, t, r, n) {
                for (var i = this.intraBlockIndexMask, a = this.elementSize, o = e >> this.intraBlockIndexBits, s = e & i, u = this.blocks[o], l = r || new this.arrayType(t * a), c = void 0 === n ? 0 : n, h = 0; h < t; ++h) {
                    for (var f = s * a, d = f + a; f !== d; ++f)
                        l[c++] = u[f];
                    0 === (++s & i) && (u = this.blocks[++o])
                }
                return l
            },
            arrayToRange: function(e, t, r, n) {
                for (var i = this.intraBlockIndexMask, a = this.elementSize, o = t >> this.intraBlockIndexBits, s = t & i, u = this.blocks[o], l = void 0 === n ? 0 : n, c = 0; c < r; ++c) {
                    for (var h = s * a, f = h + a; h !== f; ++h)
                        u[h] = e[l++];
                    0 === (++s & i) && (u = this.blocks[++o])
                }
                return this
            },
            pushArrayRange: function(e, t, r) {
                for (var n = this.intraBlockIndexMask, i = this.elementSize, a = this.length, o = this.lastBlock, s = void 0 === r ? 0 : r, u = 0; u < t; ++u) {
                    if (0 === (a &= n)) {
                        var l = n + 1;
                        o = new this.arrayType(l * i),
                        this.lastBlock = o,
                        this.blocks.push(o)
                    }
                    for (var c = a++ * i, h = c + i; c !== h; ++c)
                        o[c] = e[s++]
                }
                return this.length += t
            },
            clear: function() {
                return this.blocks = [],
                this.length = 0,
                this.lastBlock = null,
                this
            },
            toArray: function(e, t) {
                for (var r = void 0 === t ? 0 : t, n = this.elementSize, i = this.length * n + r, a = o.default.maybeCreate(e || this.arrayType, i), s = this.blocks, u = (1 << this.intraBlockIndexBits) * n, l = Math.max(s.length - 1, 0), c = 0; c !== l; ++c)
                    a.set(s[c], r),
                    r += u;
                var h = i - r;
                return 0 !== h && a.set(s[l].subarray(0, h), r),
                a
            }
        }
    }
    , /*!*********************************************************!*\
  !*** ./src/polyMesh/generic/container/FlatArrayView.js ***!
  \*********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            this.data = e,
            this.length = t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../utility/Arrays */
        16)
          , o = n(a)
          , s = r(/*! ../utility/Orders */
        129)
          , u = n(s);
        i.prototype = {
            constructor: i,
            offset: 0,
            stride: 1,
            elementSize: 1,
            newRangeArray: function(e) {
                var t = e || 1;
                return new this.data.constructor(t * this.elementSize)
            },
            rangeToArray: function(e, t, r, n) {
                for (var i = this.data, a = this.stride, o = this.elementSize, s = r || new this.data.constructor(t * this.elementSize), u = n || 0, l = this.offset + e * a, c = l + t * a; l < c; l += a)
                    for (var h = l, f = l + o; h !== f; ++h)
                        s[u++] = i[h];
                return s
            },
            arrayToRange: function(e, t, r, n) {
                for (var i = this.data, a = this.stride, o = this.elementSize, s = n || 0, u = this.offset + t * a, l = u + r * a; u < l; u += a)
                    for (var c = u, h = u + o; c !== h; ++c)
                        i[c] = e[s++];
                return this
            },
            toArray: function(e, t) {
                var r = this.stride
                  , n = this.length
                  , i = this.elementSize
                  , a = void 0 === t ? 0 : t
                  , s = a + n * i;
                if (r === i) {
                    var u = this.data
                      , l = this.offset
                      , c = l + n * i;
                    if (0 === a && (void 0 === e || e === this.data.constructor))
                        return o.default.slice(u, l, c);
                    var h = o.default.maybeCreate(e, s);
                    return h.set(u.subarray(l, c), a),
                    h
                }
                var f = o.default.maybeCreate(e, s);
                return this.rangeToArray(0, n, f, t)
            },
            fromArray: function(e, t) {
                var r = this.stride
                  , n = this.length
                  , i = this.elementSize
                  , a = void 0 === t ? 0 : t
                  , o = a + n * i;
                if (r !== i)
                    return this.arrayToRange(e, 0, n, a);
                var s = 0 === a && e.length === o ? e : e.subarray(a, o);
                return this.data.set(s, this.offset),
                this
            },
            repack: function(e) {
                var t = this.data.constructor
                  , r = e || t;
                return this.stride === this.elementSize && r === t || this.forceRepack(e),
                this
            },
            forceRepack: function(e) {
                return this.data = this.toArray(e),
                this.offset = 0,
                this.stride = this.elementSize,
                this
            },
            clone: function() {
                return this.newCompatibleView(this.toArray(), this.length)
            },
            newCompatibleView: function(e, t) {
                throw Error("not implemented")
            },
            newCompatibleBuffer: function() {
                throw Error("not implemented")
            },
            newCompareAtIndices: function() {
                return u.default.derefedTuplesIn(this.data, this.elementSize, this.stride)
            },
            newCompareAtIndicesStable: function() {
                return u.default.derefedTuplesStableIn(this.data, this.elementSize, this.stride)
            }
        }
    }
    , /*!********************************************************!*\
  !*** ./src/polyMesh/generic/container/ScalarBuffer.js ***!
  \********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            c.default.call(this, e || Uint32Array)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/create */
        47)
          , o = n(a)
          , s = r(/*! babel-runtime/core-js/object/assign */
        2)
          , u = n(s);
        t.default = i;
        var l = r(/*! ./BlockBuffer */
        126)
          , c = n(l);
        i.prototype = (0,
        u.default)((0,
        o.default)(c.default.prototype), {
            constructor: i,
            getAt: function(e) {
                var t = e >> this.intraBlockIndexBits
                  , r = e & this.intraBlockIndexMask;
                return this.blocks[t][r]
            },
            setAt: function(e, t) {
                var r = e >> this.intraBlockIndexBits
                  , n = e & this.intraBlockIndexMask;
                return this.blocks[r][n] = t,
                this
            },
            push: function(e) {
                var t = this.length++
                  , r = this.lastBlock
                  , n = t & this.intraBlockIndexMask;
                if (0 === n) {
                    var i = this.intraBlockIndexMask + 1;
                    r = new this.arrayType(i),
                    this.lastBlock = r,
                    this.blocks.push(r)
                }
                return r[n] = e,
                t + 1
            }
        })
    }
    , /*!************************************************!*\
  !*** ./src/polyMesh/generic/utility/Orders.js ***!
  \************************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            Numeric: function(e, t) {
                return e - t
            },
            Natural: function(e, t) {
                return e < t ? -1 : t < e ? 1 : 0
            },
            derefedNumbersIn: function(e) {
                return function(t, r) {
                    return e[t] - e[r]
                }
            },
            derefedTuplesIn: function(e, t, n) {
                if (!t)
                    throw Error("Invalid element size!");
                var i = n || t;
                return 1 === i && 1 === t ? r.derefNumbersIn(e) : function(r, n) {
                    for (var a = r * i, o = n * i, s = e[a] - e[o], u = 1; u !== t && 0 === s; ++u)
                        s = e[a + u] - e[o + u];
                    return s
                }
            },
            derefedNumbersStableIn: function(e) {
                return function(t, r) {
                    var n = e[t] - e[r];
                    return 0 !== n ? n : t - r
                }
            },
            derefedTuplesStableIn: function(e, t, n) {
                if (!t)
                    throw Error("Invalid element size!");
                var i = n || t;
                return 1 === i && 1 === t ? r.derefNumbersStableIn(e) : function(r, n) {
                    for (var a = r * i, o = n * i, s = e[a] - e[o], u = 1; u !== t && 0 === s; ++u)
                        s = e[a + u] - e[o + u];
                    return 0 !== s ? s : r - n
                }
            }
        };
        t.default = r
    }
    , /*!********************************************************************!*\
  !*** ./src/polyMesh/geometric/algorithm/SimpleFanTriangulation.js ***!
  \********************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            this.mesh = e,
            this.groups = null;
            for (var t = 0, r = e.faceRangeOffsets, n = r[0], i = 0, a = 1, o = r.length; a < o; ++a) {
                var s = r[a]
                  , u = s - n;
                u >= 3 && (t += u - 2),
                i = Math.max(i, u),
                n = s
            }
            this.startFaceIndices = this.getStartFaceIndices(e.positions, i),
            this.numTriangles = t
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! three */
        1)
          , o = n(a);
        i.prototype = {
            constructor: i,
            getStartFaceIndices: function(e, t) {
                for (var r, n, i, a = this.mesh.faceRangeOffsets, s = this.mesh.faceRangeOffsets.length - 1, u = new Uint32Array(s), l = new Float32Array(t), c = e.faceValueIndices, h = e.values, f = new o.Vector3, d = new o.Vector3, p = new o.Vector3, m = new o.Vector3, g = new o.Vector3, v = new o.Vector3, y = new o.Vector3, M = new o.Vector3, w = new o.Vector3, x = 0, A = a.length - 1; x < A; ++x) {
                    var b = a[x]
                      , T = a[x + 1]
                      , _ = T - b;
                    if (!(_ <= 3)) {
                        var E, S = c[b + (_ - 1)], D = c[b], N = c[b + 1 % _];
                        h.getAt(S, g),
                        h.getAt(D, v),
                        h.getAt(N, y),
                        d.copy(v).sub(g),
                        p.copy(y).sub(v),
                        w.copy(p).cross(d);
                        for (var I = 0; I < _; ++I) {
                            E = S,
                            S = D,
                            D = N,
                            N = c[b + (I + 2) % _],
                            n = m,
                            m = g,
                            g = v,
                            v = y,
                            y = n,
                            h.getAt(N, y),
                            r = f,
                            f = d,
                            d = p,
                            p = r,
                            p.copy(y).sub(v),
                            i = M,
                            M = w,
                            w = i,
                            w.copy(p).cross(d);
                            var L = M.dot(w);
                            l[I] = L
                        }
                        for (var I = 0; I < _; ++I) {
                            var L = l[I]
                              , C = l[(I + 1) % _];
                            if (L >= 0 && C >= 0) {
                                u[x] = (I + 1) % _;
                                break
                            }
                        }
                    }
                }
                return u
            },
            translateIndices: function(e, t) {
                var r = this.mesh.faceRangeOffsets
                  , n = t.data
                  , i = t.offset
                  , a = t.stride
                  , o = null
                  , s = null
                  , u = null
                  , l = null;
                if (this.mesh.materialIds) {
                    o = this.mesh.materialIds;
                    for (var c = r.length - 1, s = new Uint32Array(c), h = 0; h < s.length; h++)
                        s[h] = h;
                    s.sort(function(e, t) {
                        return o[e] - o[t]
                    });
                    var f = o[s[c - 1]] + 1;
                    u = new Uint32Array(f);
                    for (var h = 0; h < f; h++)
                        u[h] = n.length;
                    l = new Uint32Array(f)
                }
                for (var h = 0; h < this.startFaceIndices.length; ++h) {
                    var d = h;
                    s && (d = s[h]);
                    for (var p = this.startFaceIndices[d], m = r[d], g = r[d + 1], v = g - m, y = 0; y < v - 2; ++y) {
                        if (o) {
                            var M = o[d];
                            u[M] = Math.min(u[M], i),
                            l[M] = Math.max(l[M], i + 2 * a)
                        }
                        n[i] = e[m + p],
                        i += a,
                        n[i] = e[m + (p + y + 1) % v],
                        i += a,
                        n[i] = e[m + (p + y + 2) % v],
                        i += a
                    }
                }
                if (o) {
                    for (var h = 0; h < l.length; h++)
                        l[h] = l[h] - u[h] + 1;
                    this.groups = {
                        groupStarts: u,
                        groupCounts: l
                    }
                }
            },
            translateMaterialIds: function(e) {
                for (var t = this.mesh.faceRangeOffsets, r = this.mesh.materialIds, n = t[0], i = 1, a = t.length; i < a; ++i) {
                    for (var o = r[i - 1], s = t[i], u = s - n, l = u >= 3 ? u - 2 : 0, c = writeIndex + l * stride; writeIndex !== c; writeIndex += stride)
                        outputArray[writeIndex] = o;
                    n = s
                }
            },
            translateToUnindexedValues: function(e, t, r) {
                var n = this.mesh.faceRangeOffsets
                  , i = 0
                  , a = e.newRangeArray(1)
                  , o = null
                  , s = null
                  , u = null
                  , l = null;
                if (this.mesh.materialIds) {
                    o = this.mesh.materialIds;
                    for (var c = n.length - 1, s = new Uint32Array(c), h = 0; h < s.length; h++)
                        s[h] = h;
                    s.sort(function(e, t) {
                        return o[e] - o[t]
                    });
                    var f = o[s[c - 1]] + 1;
                    u = new Uint32Array(f);
                    for (var h = 0; h < f; h++)
                        u[h] = t.length;
                    l = new Uint32Array(f)
                }
                for (var h = 0; h < this.startFaceIndices.length; ++h) {
                    var d = h;
                    s && (d = s[h]);
                    for (var p = this.startFaceIndices[d], m = n[d], g = n[d + 1], v = g - m, y = 0; y < v - 2; ++y) {
                        if (o) {
                            var M = o[d];
                            u[M] = Math.min(u[M], i),
                            l[M] = Math.max(l[M], i + 2)
                        }
                        t.arrayToRange(e.rangeToArray(r[m + p], 1, a), i, 1),
                        t.arrayToRange(e.rangeToArray(r[m + (p + y + 1) % v], 1, a), i + 1, 1),
                        t.arrayToRange(e.rangeToArray(r[m + (p + y + 2) % v], 1, a), i + 2, 1),
                        i += 3
                    }
                }
                if (o) {
                    for (var h = 0; h < l.length; h++)
                        l[h] = l[h] - u[h] + 1;
                    this.groups = {
                        groupStarts: u,
                        groupCounts: l
                    }
                }
            }
        }
    }
    , /*!*******************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/removeDuplicateNormals.js ***!
  \*******************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r) {
            if (!e.normalMap)
                return e;
            for (var n = t || !0, i = r || !1, a = e.positions.faceValueIndices, o = e.positions.values, u = new Uint32Array(e.normalMap.faceValueIndices), c = e.normalMap.values, f = 0, p = void 0, g = void 0, v = [], y = 0; y < o.length; y++)
                v[y] = [];
            for (var M = 0; M < a.length; M++)
                v[a[M]].push(M);
            for (var w = 0; w < v.length; w++)
                for (var x = 0; x < v[w].length; x++) {
                    p = u[v[w][x]];
                    for (var A = 0; A < v[w].length; A++)
                        g = u[v[w][x + A]],
                        p !== g && c.getAt(p).dot(c.getAt(g)) > .99 && (u[v[w][x + A]] = p,
                        f++)
                }
            i && console.log("Normal Duplicates Found: " + f);
            var b = c;
            if (n && f) {
                var T = new h.default(s.Vector3)
                  , _ = new Int32Array(c.length);
                _.fill(-1);
                for (var E = 0, S = 0; S < u.length; S++)
                    _[u[S]] === -1 && (T.push(c.getAt(u[S])),
                    _[u[S]] = E++),
                    u[S] = _[u[S]];
                var D = new l.default(s.Vector3,E);
                D.fromArray(T.toArray()),
                b = D,
                i && console.log("" + c.length + " normal values reduced to " + D.length + ", duplicates removed: " + (c.length - D.length))
            }
            var N = new m.default({
                faceRangeOffsets: e.faceRangeOffsets,
                faceValueIndices: u,
                values: b
            })
              , I = new d.default(e);
            return I.normalMap = N,
            I
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectBuffer */
        60)
          , h = n(c)
          , f = r(/*! ../model/PolyMesh */
        12)
          , d = n(f)
          , p = r(/*! ../model/PolyMap */
        10)
          , m = n(p)
    }
    , /*!******************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/removeDuplicateValues.js ***!
  \******************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t) {
            var r = t || !1
              , n = new Uint32Array(e.positions.faceValueIndices)
              , i = e.positions.values
              , a = new d.default(l.Vector3)
              , o = new s.default
              , u = 0
              , c = 0
              , f = 0
              , p = new l.Vector3
              , g = new l.Vector3
              , y = new l.Box3;
            y.setFromArray(new Float32Array(i.data));
            for (var M = y.getSize().length() * Math.pow(2, 17), w = 0; w < n.length; w++)
                i.getAt(n[w], p),
                g.subVectors(p, y.min).multiplyScalar(M),
                c = 1e12 * g.x + 1e5 * g.y + g.z,
                o.has(c) ? f = o.get(c) : (o.set(c, u),
                f = u,
                a.push(p),
                u++),
                n[w] = f;
            if (r && console.log("" + i.length + " values reduced to " + u + ", duplicates removed: " + (i.length - u)),
            i.length === u)
                return e;
            var x = new h.default(l.Vector3,u);
            x.fromArray(a.toArray());
            var A = new v.default({
                faceRangeOffsets: e.faceRangeOffsets,
                faceValueIndices: n,
                values: x
            })
              , b = new m.default(e);
            return b.positions = A,
            b.topologyChanged(),
            b
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/map */
        83)
          , s = i(o);
        t.default = a;
        var u = r(/*! three */
        1)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , h = i(c)
          , f = r(/*! ../../generic/container/ObjectBuffer */
        60)
          , d = i(f)
          , p = r(/*! ../model/PolyMesh */
        12)
          , m = i(p)
          , g = r(/*! ../model/PolyMap */
        10)
          , v = i(g)
    }
    , /*!************************************!*\
  !*** ./src/store/isPlainObject.js ***!
  \************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (!e || "object" !== ("undefined" == typeof e ? "undefined" : (0,
            u.default)(e)))
                return !1;
            var t = "function" == typeof e.constructor ? (0,
            o.default)(e) : Object.prototype;
            if (null === t)
                return !0;
            var r = t.constructor;
            return "function" == typeof r && r instanceof r && l(r) === c
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/get-prototype-of */
        84)
          , o = n(a)
          , s = r(/*! babel-runtime/helpers/typeof */
        17)
          , u = n(s);
        t.default = i;
        var l = function(e) {
            return Function.prototype.toString.call(e)
        }
          , c = l(Object)
    }
    , /*!**********************************!*\
  !*** ./src/translators/asset.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e, t, r) {
            var n = t.asset
              , i = t.hdr;
            return r && t.preferHDR && i ? i : n
        }
        function a(e, t, r) {
            var n = i(e, t, r);
            return n && (0,
            s.getOrFetchImage)(n)(e)
        }
        function o(e, t) {
            var r = t.hdrSource;
            if (!r)
                return null;
            var n = (0,
            s.getOrFetchBinary)(r)(e);
            if (!n)
                return null;
            var i = new Uint8Array(n)
              , a = (new l.RGBELoader)._parser(i);
            return a
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.getAssetIdFromImage = i,
        t.fetchTextureImage = a,
        t.fetchHDRSourceData = o;
        var s = r(/*! ../modules/assets */
        26)
          , u = r(/*! three */
        1)
          , l = n(u)
    }
    , /*!*******************************************!*\
  !*** ./src/translators/tools/nodeMove.js ***!
  \*******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            var r = !1;
            return {
                label: "Move Node",
                enabled: !0,
                display: {
                    playerTools: !1
                },
                options: {
                    displayGizmo: !0,
                    mode: "free",
                    plane: {
                        normal: {
                            x: 0,
                            y: 1,
                            z: 0
                        },
                        constant: 0
                    }
                },
                tool: {
                    hover: function(e) {
                        this.active && (r = (0,
                        d.highlightAxis)(t, e, r))
                    },
                    drag: function(t) {
                        if (1 !== t.which || !this.active || t.metaKey)
                            return !1;
                        var n = this;
                        return {
                            momentum: !r,
                            handle: function(t) {
                                switch (n.options.mode) {
                                case "plane":
                                    T(e, t.deltaX, t.deltaY, n.options.plane);
                                    break;
                                case "objects":
                                    b(e, t.clientX, t.clientY, n.options.objects);
                                    break;
                                default:
                                    o(e, t.deltaX, t.deltaY, r)
                                }
                            }
                        }
                    }
                },
                widget: {
                    draw: function(t) {
                        t.add((0,
                        d.drawMoveGizmo)());
                        var r = (0,
                        d.getViewScale)(e);
                        t.scale.set(r, r, r)
                    },
                    position: function t(r) {
                        var n = (0,
                        f.getSelectedNodes)(e);
                        if (!n.length)
                            return void (r.visible = !1);
                        r.visible = !0;
                        var i = n[0]
                          , a = (0,
                        h.getWorldTransform)(e, i)
                          , t = new u.Vector3;
                        t.setFromMatrixPosition(a),
                        r.position.set(t.x, t.y, t.z);
                        var o = (0,
                        d.getViewScale)(e);
                        r.scale.set(o, o, o)
                    }
                }
            }
        }
        function o(e, t, r, n) {
            var i = (0,
            f.getSelectedNodes)(e);
            if (i.length) {
                var a = i[0]
                  , o = (0,
                c.getCameraWorldTransform)(e)
                  , s = (0,
                h.getWorldTransform)(e, a);
                if (s) {
                    var l = (0,
                    h.getWorldTransform)(e, (0,
                    h.find)(e, {
                        id: a,
                        parent: !0
                    }))
                      , d = (new u.Vector3).setFromMatrixPosition(s);
                    if (M.copy((0,
                    m.default)(e, a, t, r)),
                    n) {
                        var p = new u.Vector3(0,0,0);
                        p[n] = 1;
                        var w = (new u.Vector3).setFromMatrixPosition(o).sub(d)
                          , x = new u.Vector3(0,0,0)
                          , A = (new u.Plane).setFromCoplanarPoints(w, p, x);
                        M.projectOnPlane(A.normal);
                        var b = (new u.Vector3).subVectors(M, w);
                        M.projectOnVector(p).normalize();
                        var T = w.angleTo(M)
                          , _ = g - w.angleTo(b)
                          , E = g - T - _
                          , S = w.length() * v(_) / v(E);
                        M.multiplyScalar(S)
                    }
                    d.add(M),
                    s.setPosition(d),
                    l && s.premultiply(y.getInverse(l)),
                    d.setFromMatrixPosition(s),
                    e.dispatch((0,
                    h.set)({
                        id: a,
                        plug: "Transform",
                        property: "translation"
                    }, d))
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.moveNodeOnPlane = t.moveNodeOnObjects = void 0,
        t.default = a,
        t.moveNodeFree = o;
        var s = r(/*! three */
        1)
          , u = i(s)
          , l = r(/*! ../utils/getProjectionMatrix */
        64)
          , c = (n(l),
        r(/*! ../../modules/player */
        5))
          , h = r(/*! ../../modules/scene */
        4)
          , f = r(/*! ../../modules/selection */
        36)
          , d = r(/*! ./gizmos */
        81)
          , p = r(/*! ./utils/getProjectedPoint */
        140)
          , m = n(p)
          , g = Math.PI
          , v = Math.sin
          , y = (new u.Matrix4,
        new u.Matrix4,
        new u.Matrix4,
        new u.Matrix4)
          , M = (new u.Vector3,
        new u.Vector3)
          , w = (new u.Vector3(0,1,0),
        function() {
            var e = new u.Matrix4
              , t = new u.Matrix4;
            return function(r, n, i, a, o) {
                e.compose(i, a, o);
                var s = (0,
                h.find)(r, {
                    id: n,
                    parent: !0
                })
                  , u = (0,
                h.getWorldTransform)(r, s);
                u && (t.getInverse(u, !0),
                e.premultiply(t),
                e.decompose(i, a, o))
            }
        }())
          , x = function() {
            var e = new u.Vector3
              , t = new u.Quaternion
              , r = new u.Euler;
            return function(n, i, a) {
                var o = (0,
                h.get)(n, {
                    id: i,
                    plug: "Transform",
                    property: "scale"
                })
                  , s = (0,
                h.get)(n, {
                    id: i,
                    plug: "Transform",
                    property: "rotation"
                })
                  , u = (0,
                h.get)(n, {
                    id: i,
                    plug: "Transform",
                    property: "rotateOrder"
                });
                e.set(o.x, o.y, o.z),
                r.set(s, u),
                t.setFromEuler(r),
                w(n, i, a, t, e),
                n.dispatch((0,
                h.set)({
                    id: i,
                    plug: "Transform",
                    property: "translation"
                }, a))
            }
        }()
          , A = function() {
            var e = new u.Vector3
              , t = new u.Matrix4;
            return function(r, n) {
                e.setFromMatrixPosition((0,
                h.getWorldTransform)(r, n));
                var i = (0,
                c.getThreeCamera)(r);
                return t.getInverse(i.matrix, !0).premultiply(i.projectionMatrix),
                e.applyMatrix4(t),
                e
            }
        }()
          , b = t.moveNodeOnObjects = function() {
            return new u.Quaternion,
            function(e, t, r, n) {
                var i = (0,
                c.getRect)(e)
                  , a = (0,
                f.getSelectedNodes)(e)[0];
                if (a) {
                    var o = {
                        x: 2 * t / i.width - 1,
                        y: -2 * r / i.height + 1
                    }
                      , s = e.getTranslator().raycastSelect(o)
                      , u = (0,
                    h.filter)(e, {
                        from: {
                            id: a
                        }
                    })
                      , l = s.find(function(e) {
                        var t = n.findIndex(function(t) {
                            return t === e.id && t !== a && u.indexOf(t) < 0
                        });
                        return t >= 0
                    });
                    if (l) {
                        var d = l.data[0].point;
                        x(e, a, d)
                    }
                }
            }
        }()
          , T = t.moveNodeOnPlane = function() {
            var e = new u.Vector3
              , t = (new u.Quaternion,
            new u.Plane)
              , r = new u.Vector3;
            return function(n, i, a, o) {
                var s = (0,
                c.getRect)(n)
                  , u = (0,
                f.getSelectedNodes)(n)[0];
                if (u) {
                    var l = A(n, u)
                      , d = o.normal;
                    r.set(d.x, d.y, d.z),
                    t.set(r, o.constant);
                    var p = {
                        x: l.x + 2 * i / s.width,
                        y: l.y - 2 * a / s.height
                    }
                      , m = n.getTranslator().getCameraMouseRay(p).ray;
                    m.intersectsPlane(t) && (m.intersectPlane(t, e),
                    n.dispatch((0,
                    h.set)({
                        id: u
                    })),
                    x(n, u, e))
                }
            }
        }()
    }
    , /*!*********************************************!*\
  !*** ./src/translators/tools/nodeRotate.js ***!
  \*********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            var r = !1;
            return {
                label: "Rotate Node",
                enabled: !0,
                display: {
                    playerTools: !1
                },
                options: {},
                tool: {
                    hover: function(e) {
                        this.active && (r = (0,
                        f.highlightAxis)(t, e, r))
                    },
                    drag: function(t) {
                        return !(1 !== t.which || !this.active || t.metaKey) && {
                            momentum: !r,
                            handle: function(t) {
                                o(e, t.deltaX, t.deltaY, r)
                            }
                        }
                    }
                },
                widget: {
                    draw: function(t) {
                        t.add((0,
                        f.drawRotateGizmo)());
                        var r = (0,
                        f.getViewScale)(e);
                        t.scale.set(r, r, r)
                    },
                    position: function t(r) {
                        var n = (0,
                        h.getSelectedNodes)(e);
                        if (!n.length)
                            return void (r.visible = !1);
                        r.visible = !0;
                        var i = n[0]
                          , a = (0,
                        c.getWorldTransform)(e, i)
                          , t = new u.Vector3;
                        t.setFromMatrixPosition(a),
                        r.position.set(t.x, t.y, t.z);
                        var o = (0,
                        f.getViewScale)(e);
                        r.scale.set(o, o, o)
                    }
                }
            }
        }
        function o(e, t, r, n) {
            var i = (0,
            l.getRect)(e)
              , a = (0,
            h.getSelectedNodes)(e);
            if (a.length) {
                var o = a[0]
                  , s = (0,
                c.getWorldTransform)(e, o);
                if (s) {
                    var f = (0,
                    l.getCameraWorldTransform)(e);
                    s.decompose(M, y, w),
                    A.setFromMatrixPosition(f);
                    var d = (0,
                    p.default)(e, o)
                      , b = (new u.Vector3).set(2 * t / i.x / d, -2 * r / i.y / d, 0);
                    if (b.length() > 1)
                        b.normalize();
                    else if (0 === b.length())
                        return;
                    var T = b.length();
                    b.transformDirection(f).multiplyScalar(T);
                    var _ = (new u.Vector3).subVectors(A, M).normalize();
                    if (n) {
                        var E = new u.Vector3(0,0,0);
                        E[n] = 1,
                        b.projectOnPlane(E),
                        _.projectOnPlane(E)
                    }
                    var S = g(1 - b.lengthSq());
                    b.addScaledVector(_, S).normalize();
                    var D = (new u.Quaternion).setFromUnitVectors(_, b);
                    y.premultiply(D),
                    s.compose(M, y, w);
                    var N = (0,
                    c.getWorldTransform)(e, (0,
                    c.find)(e, {
                        id: o,
                        parent: !0
                    }));
                    N && (v.getInverse(N, !0),
                    s.premultiply(v)),
                    s.decompose(M, y, w),
                    x.setFromQuaternion(y, "ZYX"),
                    e.dispatch((0,
                    c.set)({
                        id: o,
                        plug: "Transform",
                        property: "rotation"
                    }, x.toVector3().multiplyScalar(180 / m)))
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a,
        t.rotateNode = o;
        var s = r(/*! three */
        1)
          , u = i(s)
          , l = r(/*! ../../modules/player */
        5)
          , c = r(/*! ../../modules/scene */
        4)
          , h = r(/*! ../../modules/selection */
        36)
          , f = r(/*! ./gizmos */
        81)
          , d = r(/*! ./utils/getBoundingRadius */
        139)
          , p = n(d)
          , m = (Math.min,
        Math.PI)
          , g = Math.sqrt
          , v = new u.Matrix4
          , y = new u.Quaternion
          , M = new u.Vector3
          , w = new u.Vector3
          , x = new u.Euler
          , A = new u.Vector3
    }
    , /*!********************************************!*\
  !*** ./src/translators/tools/nodeScale.js ***!
  \********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            var r = !1;
            return {
                label: "Scale Node",
                enabled: !0,
                display: {
                    playerTools: !1
                },
                options: {},
                tool: {
                    hover: function(e) {
                        this.active && (r = (0,
                        f.highlightAxis)(t, e, r))
                    },
                    drag: function(t) {
                        return !(1 !== t.which || !this.active || t.metaKey) && {
                            momentum: !r,
                            handle: function(t) {
                                o(e, t, r)
                            }
                        }
                    }
                },
                widget: {
                    draw: function(t) {
                        t.add((0,
                        f.drawScaleGizmo)());
                        var r = (0,
                        f.getViewScale)(e);
                        t.scale.set(r, r, r)
                    },
                    position: function t(r) {
                        var n = (0,
                        h.getSelectedNodes)(e);
                        if (!n.length)
                            return void (r.visible = !1);
                        r.visible = !0;
                        var i = n[0]
                          , a = (0,
                        c.getWorldTransform)(e, i)
                          , t = new u.Vector3;
                        t.setFromMatrixPosition(a),
                        r.position.set(t.x, t.y, t.z);
                        var o = (0,
                        f.getViewScale)(e);
                        r.scale.set(o, o, o)
                    }
                }
            }
        }
        function o(e, t, r) {
            var n = (0,
            l.getRect)(e)
              , i = (0,
            h.getSelectedNodes)(e);
            if (i.length) {
                var a = i[0]
                  , o = (0,
                c.get)(e, {
                    id: a,
                    plug: "Transform",
                    property: "scale"
                });
                if (o) {
                    var s = v((0,
                    g.default)(e, a), A) || A
                      , f = t.delta || t.deltaX / 30 - t.deltaY / 30
                      , d = v(x(2 * f / n.y / s, .001), -.001)
                      , m = y(2, 100 * d)
                      , b = (0,
                    c.getWorldTransform)(e, a)
                      , T = (new u.Vector3).setFromMatrixPosition(b)
                      , _ = (new u.Vector3).copy(o)
                      , E = (0,
                    l.getCameraWorldTransform)(e);
                    if (r) {
                        var S = new u.Vector3(0,0,0);
                        S[r] = 1;
                        var D = (0,
                        p.default)(e, a, t.deltaX, t.deltaY);
                        D.projectOnVector(S);
                        var N = (new u.Vector3).setFromMatrixPosition(E).sub(T)
                          , I = new u.Vector3(0,0,0)
                          , L = (new u.Plane).setFromCoplanarPoints(N, S, I);
                        D.projectOnPlane(L.normal);
                        var C = (new u.Vector3).subVectors(D, N);
                        D.projectOnVector(S).normalize();
                        var O = N.angleTo(D)
                          , j = M - N.angleTo(C)
                          , R = M - O - j
                          , P = N.length() * w(j) / w(R);
                        D.multiplyScalar(P),
                        S.set(1, 1, 1),
                        S[r] = 1 + 2 * D[r] / _[r],
                        _.multiply(S)
                    } else {
                        var z = v(_.length(), A);
                        _.setLength(z * m)
                    }
                    e.dispatch((0,
                    c.set)({
                        id: a,
                        plug: "Transform",
                        property: "scale"
                    }, _))
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a,
        t.scaleNode = o;
        var s = r(/*! three */
        1)
          , u = i(s)
          , l = r(/*! ../../modules/player */
        5)
          , c = r(/*! ../../modules/scene */
        4)
          , h = r(/*! ../../modules/selection */
        36)
          , f = r(/*! ./gizmos */
        81)
          , d = r(/*! ./utils/getProjectedPoint */
        140)
          , p = n(d)
          , m = r(/*! ./utils/getBoundingRadius */
        139)
          , g = n(m)
          , v = Math.max
          , y = Math.pow
          , M = Math.PI
          , w = Math.sin
          , x = Math.min
          , A = (Math.sqrt,
        1e-6)
    }
    , /*!****************************************!*\
  !*** ./src/translators/tools/orbit.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i) {
            var a = (0,
            v.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , o = (0,
            v.get)(e, {
                id: t,
                evalPlug: "Camera"
            })
              , c = (0,
            g.getRect)(e)
              , h = {
                trackball: u,
                firstPerson: l
            }
              , f = h[a.orbitMode] || s;
            f(e, a, t, o, n, r, c, i)
        }
        function o(e, t) {
            return {
                label: "Orbit",
                active: !0,
                enabled: !0,
                display: {
                    playerTools: !0
                },
                options: {},
                tool: {
                    drag: function(t) {
                        return !(1 !== t.which || !this.active && !t.metaKey) && {
                            momentum: !0,
                            handle: function(t) {
                                var r = t.deltaX
                                  , n = t.deltaY
                                  , i = (0,
                                g.getCamera)(e)
                                  , o = (0,
                                g.getCameraWorldTransform)(e)
                                  , s = (0,
                                A.default)(e, i);
                                a(e, i, o, s, new h.Vector2(r,n)),
                                e.dispatch((0,
                                y.merge)([i, "Transform", 0], (0,
                                m.default)(o))),
                                (0,
                                v.get)(e, {
                                    id: i,
                                    evalPlug: "Transform"
                                }).target || e.dispatch((0,
                                y.merge)([y.virtualTargetId, "Transform", 0], (0,
                                m.default)(s)))
                            }
                        }
                    }
                }
            }
        }
        function s(e, t, r, n, i, a, o, s) {
            var u = s.x
              , l = s.y;
            D.setFromMatrixPosition(i),
            S.setFromMatrixPosition(a).sub(D);
            var c = (new h.Spherical).setFromVector3(S)
              , f = 2 * _ * (-u / o.x);
            c.theta += f;
            var p = 2 * _ * (-l / o.y);
            c.phi += p;
            var m = void 0;
            if (m = D.y / S.length() <= 1 && t.constraintCameraY ? b(-D.y / S.length()) : _,
            c.phi = (0,
            d.default)(c.phi, 0, m),
            c.makeSafe(),
            S.setFromSpherical(c).add(D),
            n.radiusConstraint) {
                var g = n.radiusConstraint
                  , v = g.maxBoundingSphere
                  , y = g.minBoundingSphere
                  , M = (new h.Vector3).subVectors(D, S);
                if (y.containsPoint(S)) {
                    var x = new h.Ray(S,M.multiplyScalar(-1))
                      , A = x.intersectSphere(y).addScaledVector(M, .001);
                    S.copy(A)
                } else if (!v.containsPoint(S)) {
                    var T = new h.Ray(S,M)
                      , E = T.intersectSphere(v).addScaledVector(M, .001);
                    S.copy(E)
                }
            }
            a.setPosition(S),
            (0,
            w.default)(a, i, n.upPosition)
        }
        function u(e, t, r, n, i, a, o, s) {
            var u = s.x
              , l = s.y
              , c = T(o.x, o.y)
              , f = n.pivotMatrix
              , d = (new h.Vector3).setFromMatrixPosition(f)
              , p = (new h.Vector3).set(-2 * u / c, 2 * l / c, 0);
            if (p.length() > 1 && p.normalize(),
            0 !== p.x || 0 !== p.y) {
                var m = p.length();
                p.transformDirection(a).multiplyScalar(m),
                S.setFromMatrixPosition(a).sub(d),
                D.setFromMatrixPosition(i).sub(d);
                var g = (new h.Vector3).copy(S).normalize()
                  , v = E(1 - p.lengthSq());
                p.addScaledVector(g, v).normalize();
                var y = (new h.Vector3).crossVectors(g, p).normalize()
                  , M = g.angleTo(p)
                  , x = (new h.Quaternion).setFromAxisAngle(y, M);
                if (S.applyQuaternion(x).add(d),
                D.applyQuaternion(x).add(d),
                n.upPosition.applyQuaternion(x),
                n.offset.applyQuaternion(x),
                n.radiusConstraint) {
                    var A = n.radiusConstraint
                      , b = A.maxBoundingSphere
                      , _ = A.minBoundingSphere
                      , N = (new h.Vector3).subVectors(D, S);
                    if (_.containsPoint(S)) {
                        var I = new h.Ray(S,(new h.Vector3).copy(N).multiplyScalar(-1))
                          , L = I.intersectSphere(_).addScaledVector(N, -.001);
                        S.copy(L)
                    } else if (!b.containsPoint(S)) {
                        var C = new h.Ray(S,N)
                          , O = C.intersectSphere(b).addScaledVector(N, .001);
                        S.copy(O)
                    }
                    if (!_.containsPoint(D)) {
                        var j = (new h.Vector3).crossVectors(N, n.upPosition)
                          , R = _.clampPoint(D)
                          , P = (new h.Vector3).subVectors(R, D);
                        R.addScaledVector(P, .001),
                        n.upPosition.crossVectors(j, N.subVectors(R, S)).normalize(),
                        D.copy(R)
                    }
                }
                a.setPosition(S),
                i.setPosition(D),
                (0,
                w.default)(a, i, n.upPosition)
            }
        }
        function l(e, t, r, n, i, a, o, s) {
            var u = s.x
              , l = s.y;
            S.setFromMatrixPosition(a),
            D.setFromMatrixPosition(i).sub(S);
            var c = (new h.Spherical).setFromVector3(D)
              , f = 2 * _ * (-u / o.x);
            c.theta += f;
            var d = 2 * _ * (l / o.y);
            c.phi += d,
            c.makeSafe(),
            D.setFromSpherical(c).add(S),
            i.setPosition(D),
            (0,
            w.default)(a, i, n.upPosition)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.updateSphericalRotation = a,
        t.default = o;
        var c = r(/*! three */
        1)
          , h = i(c)
          , f = r(/*! ../utils/clamp */
        82)
          , d = n(f)
          , p = r(/*! ../utils/decompose */
        28)
          , m = n(p)
          , g = r(/*! ../../modules/player */
        5)
          , v = r(/*! ../../modules/scene */
        4)
          , y = r(/*! ../../modules/sceneGraph */
        9)
          , M = r(/*! ../utils/updateCameraLookAtTarget */
        38)
          , w = n(M)
          , x = r(/*! ../utils/getTargetWorldMatrix */
        33)
          , A = n(x)
          , b = (Math.tan,
        Math.cos,
        Math.atan,
        Math.acos)
          , T = Math.min
          , _ = (Math.max,
        Math.pow,
        Math.PI)
          , E = Math.sqrt
          , S = new h.Vector3
          , D = new h.Vector3;
        new h.Spherical,
        new h.Spherical,
        new h.Matrix4,
        new h.Matrix4
    }
    , /*!**********************************************************!*\
  !*** ./src/translators/tools/utils/getBoundingRadius.js ***!
  \**********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e, t) {
            var r = (0,
            u.getThreeCamera)(e);
            (0,
            s.getWorldTransform)(e, t),
            l.setFromMatrixPosition(r.matrix);
            var n = e.getTranslator().getNodeBoundingBox(t).getBoundingSphere(f).radius;
            return h.subVectors(l, c),
            h.z = -h.length(),
            h.y = n,
            h.x = 0,
            h.applyMatrix4(r.projectionMatrix),
            h.z = 0,
            h.length()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! three */
        1)
          , o = n(a)
          , s = r(/*! ../../../modules/scene */
        4)
          , u = r(/*! ../../../modules/player */
        5)
          , l = new o.Vector3
          , c = new o.Vector3
          , h = new o.Vector3
          , f = new o.Sphere
    }
    , /*!**********************************************************!*\
  !*** ./src/translators/tools/utils/getProjectedPoint.js ***!
  \**********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n) {
            var i = (0,
            c.getCamera)(e)
              , a = (0,
            c.getCameraWorldTransform)(e)
              , o = (0,
            l.default)((0,
            h.get)(e, {
                id: i,
                evalPlug: "Camera"
            }));
            f.getInverse(a, !0),
            d.copy(o).multiply(f);
            var s = (0,
            h.getWorldTransform)(e, t);
            if (s) {
                var u = (0,
                c.getRect)(e);
                return (0,
                h.getWorldTransform)(e, (0,
                h.find)(e, {
                    id: t,
                    parent: !0
                })),
                m.setFromMatrixPosition(s),
                v.set(r, -n).divide(u).multiplyScalar(2),
                g.copy(m).applyMatrix4(d),
                g.x = 0,
                g.y = 0,
                y.set(v.x, v.y, g.z),
                p.getInverse(d, !0),
                g.applyMatrix4(p),
                y.applyMatrix4(p).sub(g),
                y
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../utils/getProjectionMatrix */
        64)
          , l = n(u)
          , c = r(/*! ../../../modules/player */
        5)
          , h = r(/*! ../../../modules/scene */
        4)
          , f = new s.Matrix4
          , d = new s.Matrix4
          , p = new s.Matrix4
          , m = new s.Vector3
          , g = new s.Vector3
          , v = new s.Vector2
          , y = new s.Vector3
    }
    , /*!***************************************!*\
  !*** ./src/translators/tools/zoom.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            function r(t) {
                var r = t.delta
                  , n = t.deltaX
                  , i = t.deltaY
                  , a = void 0 !== r ? r : n / 30 + -i / 30
                  , s = (0,
                d.getCamera)(e)
                  , u = (0,
                p.getWorldTransform)(e, s);
                o(e, -a, s, u),
                e.dispatch((0,
                m.merge)([s, "Transform", 0], (0,
                f.default)(u)))
            }
            return {
                label: "Zoom",
                enabled: !0,
                display: {
                    playerTools: !0
                },
                options: {},
                tool: {
                    drag: function(e) {
                        return !(!this.active && !e.ctrlKey) && {
                            momentum: !0,
                            handle: function(e) {
                                var t = {
                                    delta: void 0 !== e.delta ? e.delta : e.deltaX / 30 + -e.deltaY / 30
                                };
                                r(t)
                            }
                        }
                    },
                    pinch: function(e) {
                        r(e)
                    },
                    scroll: function(t) {
                        (0,
                        x.default)(e) && r(t)
                    }
                }
            }
        }
        function o(e, t, r, n) {
            var i = (0,
            p.get)(e, {
                id: r,
                evalPlug: "Camera"
            })
              , a = (0,
            p.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , o = (0,
            M.default)(e, r)
              , s = (0,
            d.getRect)(e)
              , l = t / s.y
              , h = b(2, 100 * l);
            if ("Perspective" === i.projection) {
                _.setFromMatrixPosition(n),
                E.setFromMatrixPosition(o),
                S.copy(_).sub(E);
                var f = A(S.length(), T)
                  , m = f * h;
                if (i.radiusConstraint) {
                    var g = i.radiusConstraint
                      , y = g.maxBoundingSphere
                      , w = g.minBoundingSphere
                      , x = (new u.Vector3).copy(S).normalize()
                      , D = (new u.Vector3).copy(x).multiplyScalar(-1)
                      , N = new u.Ray(_,D)
                      , I = new u.Ray(_,x)
                      , L = new u.Vector3
                      , C = new u.Vector3;
                    N.intersectSphere(w, L),
                    I.intersectSphere(y, C);
                    var O = L.sub(E).length()
                      , j = C.sub(E).length();
                    m = (0,
                    c.default)(m, O + .001, j - .001)
                }
                S.multiplyScalar(m / f),
                _.copy(E).add(S),
                _.y < 0 && a.constraintCameraY && "trackball" !== a.orbitMode && ((new u.Vector3).crossVectors(S, i.upPosition).normalize(),
                _.y = 0,
                S.copy(_).sub(E)),
                n.setPosition(_),
                (0,
                v.default)(n, o, i.upPosition)
            } else if ("Orthographic" === i.projection) {
                var R = (0,
                p.get)(e, {
                    id: r,
                    plug: "Camera",
                    property: "orthoZoom"
                });
                e.dispatch((0,
                p.set)({
                    id: r,
                    plug: "Camera",
                    property: "orthoZoom"
                }, R * h))
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a,
        t.updateZoom = o;
        var s = r(/*! three */
        1)
          , u = i(s)
          , l = r(/*! ../utils/clamp */
        82)
          , c = n(l)
          , h = r(/*! ../utils/decompose */
        28)
          , f = n(h)
          , d = r(/*! ../../modules/player */
        5)
          , p = r(/*! ../../modules/scene */
        4)
          , m = r(/*! ../../modules/sceneGraph */
        9)
          , g = r(/*! ../utils/updateCameraLookAtTarget */
        38)
          , v = n(g)
          , y = r(/*! ../utils/getTargetWorldMatrix */
        33)
          , M = n(y)
          , w = r(/*! ./utils/cameraControl */
        252)
          , x = n(w)
          , A = (Math.tan,
        Math.cos,
        Math.atan,
        Math.acos,
        Math.min,
        Math.max)
          , b = Math.pow
          , T = (Math.PI,
        Math.sqrt,
        1e-6)
          , _ = new u.Vector3
          , E = new u.Vector3
          , S = new u.Vector3
    }
    , /*!*******************************************************!*\
  !*** ./src/translators/utils/calculateBoundingBox.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            var t = new o.Box3
              , r = new o.Box3;
            if (!e)
                return r;
            var n = e;
            return e.children.forEach(function(e) {
                "Object3D" === e.type && "Objects" === e.name && (n = e)
            }),
            r.makeEmpty(),
            e.updateMatrixWorld(!0),
            n.traverse(function(e) {
                if (e.visible && e.geometry) {
                    var n = e.geometry;
                    null === n.boundingBox && n.computeBoundingBox(),
                    n.boundingBox.isEmpty() === !1 && (t.copy(n.boundingBox),
                    e.matrix.compose(e.position, e.quaternion, e.scale),
                    e.updateMatrixWorld(!0),
                    t.applyMatrix4(e.matrixWorld),
                    r.union(t))
                }
            }),
            r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! three */
        1)
          , o = n(a)
    }
    , /*!****************************************************!*\
  !*** ./src/translators/utils/vrControlsWrapper.js ***!
  \****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e, t) {
            this.offset = new o.Vector3(0,0,0),
            this.rotationalOffset = new o.Quaternion(0,0,0,1),
            this.threeVRControls = new o.VRControls(e,t),
            this.setOffset = function(e) {
                this.offset.copy(e)
            }
            ,
            this.setRotationalOffset = function(e) {
                this.rotationalOffset.copy(e)
            }
            ,
            this.update = function() {
                this.threeVRControls.update(),
                e.quaternion.premultiply(this.rotationalOffset),
                e.position.applyQuaternion(this.rotationalOffset),
                e.position.add(this.offset)
            }
            ,
            this.setStanding = function(e) {
                this.threeVRControls.standing = e
            }
            ,
            this.resetPose = function() {
                this.threeVRControls.resetPose()
            }
            ,
            this.getStandingMatrix = function() {
                return this.threeVRControls.standingMatrix
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! three */
        1)
          , o = n(a)
    }
    , /*!***********************************************************!*\
  !*** ./~/babel-runtime/core-js/object/define-property.js ***!
  \***********************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/define-property */
            281),
            __esModule: !0
        }
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_html.js ***!
  \************************************************************/
    function(e, t, r) {
        e.exports = r(/*! ./_global */
        15).document && document.documentElement
    }
    , /*!**********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js ***!
  \**********************************************************************/
    function(e, t, r) {
        e.exports = !r(/*! ./_descriptors */
        24) && !r(/*! ./_fails */
        40)(function() {
            /*! ./_dom-create */
            return 7 != Object.defineProperty(r(90)("div"), "a", {
                get: function() {
                    return 7
                }
            }).a
        })
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js ***!
  \*********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_iterators */
        48)
          , i = r(/*! ./_wks */
        13)("iterator")
          , a = Array.prototype;
        e.exports = function(e) {
            return void 0 !== e && (n.Array === e || a[i] === e)
        }
    }
    , /*!****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_is-array.js ***!
  \****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_cof */
        52);
        e.exports = Array.isArray || function(e) {
            return "Array" == n(e)
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iter-call.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_an-object */
        31);
        e.exports = function(e, t, r, i) {
            try {
                return i ? t(n(r)[0], r[1]) : t(r)
            } catch (t) {
                var a = e.return;
                throw void 0 !== a && n(a.call(e)),
                t
            }
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iter-detect.js ***!
  \*******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_wks */
        13)("iterator")
          , i = !1;
        try {
            var a = [7][n]();
            a.return = function() {
                i = !0
            }
            ,
            Array.from(a, function() {
                throw 2
            })
        } catch (e) {}
        e.exports = function(e, t) {
            if (!t && !i)
                return !1;
            var r = !1;
            try {
                var a = [7]
                  , o = a[n]();
                o.next = function() {
                    return {
                        done: r = !0
                    }
                }
                ,
                a[n] = function() {
                    return o
                }
                ,
                e(a)
            } catch (e) {}
            return r
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iter-step.js ***!
  \*****************************************************************/
    function(e, t) {
        e.exports = function(e, t) {
            return {
                value: t,
                done: !!e
            }
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-gopn.js ***!
  \*******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-keys-internal */
        154)
          , i = r(/*! ./_enum-bug-keys */
        91).concat("length", "prototype");
        t.f = Object.getOwnPropertyNames || function(e) {
            return n(e, i)
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-gpo.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_has */
        41)
          , i = r(/*! ./_to-object */
        49)
          , a = r(/*! ./_shared-key */
        97)("IE_PROTO")
          , o = Object.prototype;
        e.exports = Object.getPrototypeOf || function(e) {
            return e = i(e),
            n(e, a) ? e[a] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? o : null
        }
    }
    , /*!****************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js ***!
  \****************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_has */
        41)
          , i = r(/*! ./_to-iobject */
        32)
          , a = r(/*! ./_array-includes */
        294)(!1)
          , o = r(/*! ./_shared-key */
        97)("IE_PROTO");
        e.exports = function(e, t) {
            var r, s = i(e), u = 0, l = [];
            for (r in s)
                r != o && n(s, r) && l.push(r);
            for (; t.length > u; )
                n(s, r = t[u++]) && (~a(l, r) || l.push(r));
            return l
        }
    }
    , /*!****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_redefine.js ***!
  \****************************************************************/
    function(e, t, r) {
        e.exports = r(/*! ./_hide */
        35)
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_set-species.js ***!
  \*******************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_global */
        15)
          , i = r(/*! ./_core */
        6)
          , a = r(/*! ./_object-dp */
        22)
          , o = r(/*! ./_descriptors */
        24)
          , s = r(/*! ./_wks */
        13)("species");
        e.exports = function(e) {
            var t = "function" == typeof i[e] ? i[e] : n[e];
            o && t && !t[s] && a.f(t, s, {
                configurable: !0,
                get: function() {
                    return this
                }
            })
        }
    }
    , /*!********************************************!*\
  !*** ./~/crypto-browserify/create-hash.js ***!
  \********************************************/
    function(e, t, r) {
        (function(t) {
            function n(e) {
                return function() {
                    var r = []
                      , n = {
                        update: function(e, n) {
                            return t.isBuffer(e) || (e = new t(e,n)),
                            r.push(e),
                            this
                        },
                        digest: function(n) {
                            var i = t.concat(r)
                              , a = e(i);
                            return r = null,
                            n ? a.toString(n) : a
                        }
                    };
                    return n
                }
            }
            var i = r(/*! sha.js */
            354)
              , a = n(r(/*! ./md5 */
            342))
              , o = n(r(/*! ripemd160 */
            351));
            e.exports = function(e) {
                return "md5" === e ? new a : "rmd160" === e ? new o : i(e)
            }
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!*************************************!*\
  !*** ./~/cuid/dist/browser-cuid.js ***!
  \*************************************/
    function(e, t, r) {
        !function(t) {
            "use strict";
            var r = "cuid"
              , n = 0
              , i = 4
              , a = 36
              , o = Math.pow(a, i)
              , s = function(e, t) {
                var r = "000000000" + e;
                return r.substr(r.length - t)
            }
              , u = function() {
                return s((Math.random() * o << 0).toString(a), i)
            }
              , l = function() {
                return n = n < o ? n : 0,
                n++,
                n - 1
            }
              , c = function() {
                var e, t = "c", r = (new Date).getTime().toString(a), n = c.fingerprint(), o = u() + u();
                return e = s(l().toString(a), i),
                t + r + e + n + o
            };
            c.slug = function() {
                var e, t = (new Date).getTime().toString(36), r = c.fingerprint().slice(0, 1) + c.fingerprint().slice(-1), n = u().slice(-2);
                return e = l().toString(36).slice(-4),
                t.slice(-2) + e + r + n
            }
            ,
            c.globalCount = function() {
                var e = function() {
                    var e, t = 0;
                    for (e in window)
                        t++;
                    return t
                }();
                return c.globalCount = function() {
                    return e
                }
                ,
                e
            }
            ,
            c.fingerprint = function() {
                return s((navigator.mimeTypes.length + navigator.userAgent.length).toString(36) + c.globalCount().toString(36), 4)
            }
            ,
            t.register ? t.register(r, c) : e.exports = c
        }(this.applitude || this)
    }
    , /*!*************************************!*\
  !*** ./~/detect-browser/browser.js ***!
  \*************************************/
    function(e, t, r) {
        var n = r(/*! ./lib/detectBrowser */
        345);
        e.exports = n(navigator.userAgent)
    }
    , /*!*****************************!*\
  !*** ./~/snabbdom/vnode.js ***!
  \*****************************/
    function(e, t) {
        e.exports = function(e, t, r, n, i) {
            var a = void 0 === t ? void 0 : t.key;
            return {
                sel: e,
                data: t,
                children: r,
                text: n,
                elm: i,
                key: a
            }
        }
    }
    , /*!***************************!*\
  !*** ./src/autoRotate.js ***!
  \***************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            var t = (0,
            o.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , r = t && t.autoRotateNode;
            if (!t || !t.autoRotate || !r)
                return !1;
            var n = "+" === t.autoRotateDirection ? 360 : -360
              , i = (0,
            o.find)(e, {
                id: r,
                plug: "Transform",
                property: "rotation"
            })
              , a = (0,
            o.get)(e, {
                id: r,
                plug: "Transform",
                property: "rotation"
            });
            i && a && !u && (u = !0,
            e.dispatch((0,
            s.queueAnimation)({
                name: "autoRotate",
                autoplay: !0,
                iterations: 1 / 0,
                easingDuration: 3e3,
                tracks: [{
                    path: i,
                    start: 0,
                    duration: 1e3 * t.autoRotateSpeed,
                    value: {
                        x: a.x,
                        y: a.y + n,
                        z: a.z
                    }
                }]
            })))
        }
        function i(e) {
            u = !1,
            e.dispatch((0,
            s.removeAnimation)("autoRotate"))
        }
        function a(e) {
            var t = void 0
              , r = {
                start: function() {
                    var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 5e3;
                    t = setTimeout(function() {
                        n(e)
                    }, r)
                },
                stop: function() {
                    i(e),
                    clearTimeout(t)
                },
                mousedown: function() {
                    return r.stop()
                },
                mouseup: function() {
                    return r.start()
                }
            };
            return {
                enabled: !0,
                tool: r
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.startAutoRotate = n,
        t.stopAutoRotate = i,
        t.autoRotateTool = a;
        var o = r(/*! ./modules/scene */
        4)
          , s = r(/*! ./modules/animation */
        37)
          , u = !1
    }
    , /*!**************************************!*\
  !*** ./src/components/annotation.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            var r = (0,
            h.getRect)(e)
              , n = t.position(e)
              , i = n.position
              , a = n.normal
              , s = n.alpha;
            if (!i)
                return !1;
            var u = r.width * i.x
              , l = r.height * i.y
              , c = !(u < 0 || u > r.width - 24 || l < 0 || l > r.height - 24) && t.visible;
            return (0,
            o.default)({}, t.annotation, {
                id: t.id,
                alpha: s,
                normal: a,
                position: i,
                top: r.height - l,
                right: r.width - u,
                bottom: l,
                left: u,
                visible: c
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/helpers/extends */
        86)
          , o = n(a);
        t.getAnnotationProperties = i,
        t.default = function(e) {
            var t = ((0,
            h.getRect)(e),
            (0,
            l.filter)(function(e) {
                return e
            }));
            return function(r) {
                function n(t) {
                    t.preventDefault(),
                    e.dispatch((0,
                    f.setAnnotationProperties)(o, {
                        open: !w || !M,
                        pinned: !w
                    }))
                }
                function i(t) {
                    w || e.dispatch((0,
                    f.setAnnotationProperties)(o, {
                        open: !0
                    }))
                }
                function a(t) {
                    w || e.dispatch((0,
                    f.setAnnotationProperties)(o, {
                        open: !1
                    }))
                }
                var o = r.id
                  , s = r.text
                  , l = r.left
                  , h = r.bottom
                  , d = r.visible
                  , p = r.position
                  , m = (r.normal,
                r.alpha);
                if (void 0 === p)
                    return (0,
                    u.default)("span");
                var v = e.getIn(["annotations", o]) || (0,
                c.Map)({
                    open: r.open,
                    pinned: r.open
                })
                  , M = v.get("open")
                  , w = v.get("pinned")
                  , x = p.y > .5 ? "t" : "b"
                  , A = p.x < .6 ? "l" : "r"
                  , b = [x, A].join("")
                  , T = [(0,
                u.default)("img", {
                    style: {
                        cursor: "pointer"
                    },
                    props: {
                        width: 24,
                        height: 24,
                        src: "https://clara.io/img/annotation-" + (M ? "open" : "closed") + "-2.svg"
                    }
                })];
                if (M) {
                    var _ = {
                        fontSize: "12px",
                        padding: "10px",
                        color: "#fff",
                        backgroundColor: "#000",
                        borderRadius: "3px",
                        opacity: "0.8",
                        cursor: "pointer",
                        lineHeight: 1.3,
                        width: s.length > 10 ? s.length > 50 ? "200px" : "150px" : "100px"
                    };
                    T.push((0,
                    u.default)("div", {
                        style: y[b]
                    }, t(["l" === A && (0,
                    u.default)("div", {
                        key: b,
                        style: g[b]
                    }), (0,
                    u.default)("div", {
                        key: "text",
                        style: _,
                        on: {
                            click: n
                        }
                    }, s), "r" === A && (0,
                    u.default)("div", {
                        key: b,
                        style: g[b]
                    })])))
                }
                return (0,
                u.default)("div", {
                    key: o,
                    style: {
                        visibility: d ? "visible" : "hidden",
                        opacity: m,
                        position: "absolute",
                        left: Math.round(l) + "px",
                        bottom: Math.round(h) + "px"
                    },
                    on: {
                        click: n,
                        mouseover: i,
                        mouseout: a
                    }
                }, T)
            }
        }
        ;
        var s = r(/*! snabbdom/h */
        23)
          , u = n(s)
          , l = r(/*! ramda */
        3)
          , c = r(/*! immutable */
        11)
          , h = r(/*! ../modules/player */
        5)
          , f = r(/*! ../modules/annotations */
        58)
          , d = ((0,
        c.Map)({
            open: !1,
            pinned: !1
        }),
        "5px solid #333")
          , p = "5px solid transparent"
          , m = {
            position: "absolute",
            display: "inline-block",
            borderTop: p,
            borderLeft: p,
            borderRight: p,
            borderBottom: p,
            height: 0,
            width: 0,
            top: "",
            bottom: "",
            right: "",
            left: ""
        }
          , g = {
            tl: (0,
            o.default)({}, m, {
                borderRight: d,
                top: "12px",
                left: "-10px",
                marginTop: "-5px"
            }),
            bl: (0,
            o.default)({}, m, {
                borderRight: d,
                bottom: "8px",
                left: "-10px",
                marginTop: "-5px"
            }),
            tr: (0,
            o.default)({}, m, {
                borderLeft: d,
                top: "12px",
                right: "-10px",
                marginTop: "-5px"
            }),
            br: (0,
            o.default)({}, m, {
                borderLeft: d,
                bottom: "8px",
                right: "-10px",
                marginTop: "-5px"
            })
        }
          , v = {
            position: "absolute",
            textAlign: "left",
            left: "",
            top: "",
            bottom: "",
            right: "",
            transition: "opacity 0.3s ease-out",
            webkitTransition: "opacity 0.3s ease-out",
            fontFamily: "sans-serif",
            delayed: {
                opacity: 1
            },
            remove: {
                opacity: 0
            }
        }
          , y = {
            tl: (0,
            o.default)({}, v, {
                left: "30px",
                top: "0"
            }),
            bl: (0,
            o.default)({}, v, {
                left: "30px",
                bottom: "0"
            }),
            tr: (0,
            o.default)({}, v, {
                right: "30px",
                top: "0"
            }),
            br: (0,
            o.default)({}, v, {
                right: "30px",
                bottom: "0"
            })
        }
    }
    , /*!**********************************!*\
  !*** ./src/components/canvas.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            e.preventDefault()
        }
        function a(e) {
            function t(e) {
                a && u.forEach(function(t) {
                    return a(t, e.elm)
                }),
                o && o(e.elm)
            }
            var r = e.getTranslator()
              , n = (0,
            d.isSceneRendered)(e);
            r.update();
            var a = (0,
            p.getCustomAnnotationFunction)(e)
              , o = (0,
            p.getCustomOverlayFunction)(e)
              , u = (0,
            c.filter)(function(e) {
                return !!e
            }, (0,
            c.map)(function(t) {
                return (0,
                h.getAnnotationProperties)(e, t)
            }, (0,
            s.default)(r.getAnnotations())))
              , g = a || o ? [(0,
            l.default)("div.annotations", {
                style: {
                    position: "absolute",
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0,
                    pointerEvents: "none"
                },
                hook: {
                    insert: t,
                    update: t
                }
            })] : (0,
            c.map)((0,
            f.default)(e), u);
            return (0,
            l.default)("div", {
                style: {
                    position: "relative",
                    display: n ? "block" : "none"
                },
                on: {
                    contextmenu: i
                },
                hook: {
                    insert: m(e, r)
                }
            }, g)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/object/values */
        85)
          , s = n(o);
        t.default = a;
        var u = r(/*! snabbdom/h */
        23)
          , l = n(u)
          , c = r(/*! ramda */
        3)
          , h = r(/*! ./annotation */
        162)
          , f = n(h)
          , d = r(/*! ../modules/sceneIO */
        19)
          , p = r(/*! ../modules/annotations */
        58)
          , m = function(e, t) {
            return function(e) {
                function r() {
                    t.resize()
                }
                t.attach(e.elm),
                window.addEventListener("resize", r)
            }
        }
    }
    , /*!*********************************!*\
  !*** ./src/components/error.js ***!
  \*********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return (0,
            o.default)("div", {
                key: "error",
                style: u.default.absoluteMaxCentered
            }, [(0,
            o.default)("div", {
                style: {
                    flex: "0 0 100%"
                }
            }, (0,
            l.getErrors)(e).map(function(e) {
                return (0,
                o.default)("h2", e)
            }).toArray())])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! snabbdom/h */
        23)
          , o = n(a)
          , s = (r(/*! ramda */
        3),
        r(/*! ./styles */
        76))
          , u = n(s)
          , l = r(/*! ../modules/sceneIO */
        19)
    }
    , /*!********************************************!*\
  !*** ./src/components/manipulatorTools.js ***!
  \********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e) {
            var t = (0,
            p.getHoverColor)(e)
              , r = y ? "" : "\ndiv.claraplayer ul.tools li:not(.active):hover svg path {\n  fill: " + t + ";\n}\n";
            return (0,
            c.default)("style", {
                props: {
                    innerHTML: r
                }
            })
        }
        function o(e) {
            function t(t) {
                return function(r) {
                    e.dispatch((0,
                    m.runCommand)(t));
                    var n = (0,
                    p.getCanvasElement)(e);
                    n && n.focus()
                }
            }
            var r = (0,
            m.getCommands)(e, "playerTools")
              , n = (0,
            p.getActiveColor)(e)
              , i = [a(e), (0,
            c.default)("ul.tools", {
                style: {
                    position: "relative",
                    bottom: 0,
                    left: 0,
                    listStyleType: "none",
                    padding: "0 5px",
                    margin: 0,
                    zIndex: 2147483647
                }
            }, [d.glowFilter()].concat((0,
            h.map)(function(i) {
                var a = r[i]
                  , o = a.isActive ? a.isActive(e) : a.active
                  , s = a.active && a.activeLabel ? a.activeLabel : a.label
                  , u = d[a.options.icon || i]
                  , l = [];
                return "function" == typeof u ? l.push(u({
                    width: 34,
                    height: 34,
                    title: s
                }, {
                    active: o,
                    activeColor: n
                })) : l.push((0,
                c.default)("span", {
                    style: {
                        color: o ? n : "#fff"
                    }
                }, s)),
                (0,
                c.default)("li" + (o ? ".active" : ""), {
                    attrs: {
                        title: s
                    },
                    on: {
                        click: t(i)
                    },
                    style: {
                        cursor: "pointer",
                        float: "left",
                        borderRadius: "5px",
                        padding: "5px",
                        boxSizing: "border-box"
                    }
                }, l)
            }, (0,
            u.default)(r))))]
              , o = (0,
            v.default)(e);
            return o && i.push(o),
            (0,
            c.default)("span", {
                style: {
                    position: "absolute",
                    left: "5px",
                    right: "5px",
                    bottom: "5px",
                    display: "flex",
                    flexWrap: "nowrap",
                    height: "54px"
                }
            }, i)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r(/*! babel-runtime/core-js/object/keys */
        8)
          , u = i(s);
        t.hoverStyle = a,
        t.default = o;
        var l = r(/*! snabbdom/h */
        23)
          , c = i(l)
          , h = r(/*! ramda */
        3)
          , f = r(/*! ./icons */
        110)
          , d = n(f)
          , p = r(/*! ../modules/player */
        5)
          , m = r(/*! ../modules/commands */
        44)
          , g = r(/*! ./timeline */
        168)
          , v = i(g)
          , y = !!("ontouchstart"in window) || window.navigator.msMaxTouchPoints > 0
    }
    , /*!**********************************!*\
  !*** ./src/components/marker.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r, n) {
            function i(e) {
                e.stopPropagation()
            }
            var a = {
                width: "0",
                height: "100%",
                position: "absolute",
                left: t + "%",
                top: "0",
                pointerEvents: "auto",
                cursor: "pointer"
            }
              , s = {
                boxSizing: "border-box",
                position: "absolute",
                zIndex: "1070",
                display: "block",
                visibility: "visible",
                fontSize: "12px",
                fontWeight: "normal",
                lineHeight: "1.4",
                top: "-32px",
                left: "-25px",
                width: "50px",
                height: "22px",
                marginTop: "-3px",
                padding: "5px 0",
                opacity: "1"
            };
            n || (s.opacity = "0",
            s.transition = "opacity 0.15s linear");
            var u = {
                maxWidth: "200px",
                padding: "3px 8px",
                color: "#ffffff",
                textAlign: "center",
                textDecoration: "none",
                backgroundColor: "#000000",
                borderRadius: "4px",
                boxShadow: "#000 0 0 5px",
                margin: "0 auto",
                userSelect: "none",
                WebkitUserSelect: "none",
                MozUserSelect: "none"
            }
              , l = {
                boxSizing: "border-box",
                position: "absolute",
                width: "0",
                height: "0",
                bottom: "-10px",
                left: "50%",
                marginLeft: "-5px",
                borderWidth: "5px 5px 0",
                borderTopColor: "#000000",
                borderRightColor: "transparent",
                borderBottomColor: "transparent",
                borderLeftColor: "transparent",
                borderStyle: "solid"
            };
            return (0,
            o.default)("div.marker", {
                style: a,
                on: {
                    mousedown: i,
                    touchstart: i
                }
            }, [(0,
            o.default)("div.tooltip", {
                style: s
            }, [(0,
            o.default)("div.tooltip-arrow", {
                style: l
            }), (0,
            o.default)("div.tooltip-inner", {
                style: u
            }, (r * t / 1e5).toFixed(1))])])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! snabbdom/h */
        23)
          , o = n(a)
    }
    , /*!************************************!*\
  !*** ./src/components/progress.js ***!
  \************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i() {
            var e, t;
            return "undefined" == typeof performace ? function() {}
            : function(r, n) {
                e && t || (e || (e = (new Date).getTime() - performance.timing.navigationStart),
                n < 1 || (t = (new Date).getTime() - performance.timing.navigationStart,
                console.log("Page loaded in " + e + "ms and rendered in " + t + "ms")))
            }
        }
        function a(e) {
            var t = (0,
            f.loadingProgress)(e)
              , r = v * (1 - t);
            return d(e, t),
            (0,
            l.default)("div", {
                style: (0,
                s.default)({}, h.default.absoluteMaxCentered, {
                    backgroundColor: "transparent",
                    boxSizing: "border-box"
                })
            }, [(0,
            l.default)("div", {
                style: m
            }, [(0,
            l.default)("svg", {
                attrs: w
            }, [(0,
            l.default)("circle", {
                attrs: y
            }), (0,
            l.default)("circle", {
                props: {
                    id: "bar"
                },
                attrs: (0,
                s.default)({}, M, {
                    "stroke-dashoffset": r
                })
            })])])])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/helpers/extends */
        86)
          , s = n(o);
        t.default = a;
        var u = r(/*! snabbdom/h */
        23)
          , l = n(u)
          , c = r(/*! ./styles */
        76)
          , h = n(c)
          , f = r(/*! ../modules/sceneIO */
        19)
          , d = i()
          , p = "#646766"
          , m = {
            flex: "0 0 25%"
        }
          , g = 90
          , v = Math.PI * g * 2
          , y = {
            r: g,
            cx: 100,
            cy: 100,
            fill: "transparent",
            "stroke-dasharray": v,
            "stroke-dashoffset": 0,
            "stroke-width": "1em",
            stroke: "#eee"
        }
          , M = {
            r: g,
            cx: 100,
            cy: 100,
            fill: "transparent",
            stroke: p,
            transition: "stroke-dashoffset 1s linear",
            "stroke-width": "1em",
            "stroke-dashoffset": v,
            "stroke-dasharray": v
        }
          , w = {
            height: "100%",
            width: "100%",
            viewport: "0 0 100 100",
            viewBox: "0 0 200 200"
        }
    }
    , /*!************************************!*\
  !*** ./src/components/timeline.js ***!
  \************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            function t(t, r) {
                var n = t.width
                  , i = t.left;
                return function(t) {
                    p = !0,
                    d && window.clearTimeout(d),
                    d = window.setTimeout(function() {
                        p = !1,
                        e.dispatch({
                            type: "POKE"
                        })
                    }, 2e3);
                    var a = r ? t.touches[0].pageX : t.pageX
                      , o = Math.max(Math.min((a - i) / n, 1), 0)
                      , s = o * w + M;
                    e.dispatch((0,
                    h.setTime)(s))
                }
            }
            function r(r) {
                p = !0,
                d && window.clearTimeout(d),
                d = window.setTimeout(function() {
                    p = !1,
                    e.dispatch({
                        type: "POKE"
                    })
                }, 2e3),
                null !== f && (window.removeEventListener("mousemove", f),
                window.removeEventListener("mouseup", n),
                window.removeEventListener("touchmove", f),
                window.removeEventListener("touchend", n));
                var i = !!r.touches
                  , a = i ? r.touches[0].clientX : r.clientX
                  , o = "ruler" === r.target.className ? r.target : r.target.parentNode
                  , s = o.getBoundingClientRect()
                  , u = (a - s.left) / s.width * w + M;
                e.dispatch((0,
                h.setTime)(u)),
                f = t(s, i),
                i ? (window.addEventListener("touchmove", f),
                window.addEventListener("touchend", n)) : (window.addEventListener("mousemove", f),
                window.addEventListener("mouseup", n))
            }
            function n(e) {
                window.removeEventListener("mousemove", f),
                window.removeEventListener("mouseup", n),
                window.removeEventListener("touchmove", f),
                window.removeEventListener("touchend", n),
                f = null
            }
            var i = {
                flex: "1 1 auto",
                position: "relative",
                bottom: 0,
                right: 0,
                borderRadius: "5px",
                padding: "0 20px"
            }
              , a = {
                boxSizing: "border-box",
                backgroundColor: "rgba(0, 0, 0, 0.2)",
                border: "1px solid #ccc",
                position: "relative",
                top: "17px",
                left: "56px",
                height: "10px",
                width: "calc(100% - 55px)",
                cursor: "pointer"
            }
              , u = (0,
            c.getActiveColor)(e)
              , m = (0,
            c.getHoverColor)(e)
              , g = {
                width: 34,
                height: 34,
                title: "play"
            }
              , v = {
                active: !1,
                activeColor: u
            }
              , y = (0,
            h.getTimelineAnimation)(e);
            if (!y)
                return null;
            var M = y.start
              , w = y.duration / Math.abs(y.playSpeed)
              , x = 100 * Math.max(Math.min(((0,
            h.getTime)(e) - M) / w, 1), 0)
              , A = {
                backgroundColor: u,
                width: "calc(" + x + "% - 2px)",
                height: "6px",
                position: "absolute",
                left: "1px",
                top: "1px",
                cursor: "pointer"
            }
              , b = {
                position: "relative",
                display: "inline-block",
                verticalAlign: "middle",
                top: "-5px",
                cursor: "pointer"
            }
              , T = "\n    div.claraplayer div div svg:hover path {\n    fill: " + m + ";\n  }"
              , _ = (0,
            h.isPlaying)(e) ? (0,
            s.pause)(g, v) : (0,
            s.play)(g, v)
              , E = (0,
            h.isPlaying)(e) ? function() {
                return e.dispatch((0,
                h.stopPlaying)())
            }
            : function() {
                return e.dispatch((0,
                h.startPlaying)())
            }
            ;
            return (0,
            o.default)("div", {
                style: i
            }, [(0,
            o.default)("style", {
                props: {
                    innerHTML: T
                }
            }), (0,
            o.default)("div.ruler", {
                style: a,
                on: {
                    mousedown: r,
                    touchstart: r
                }
            }, [(0,
            o.default)("div.played", {
                style: A
            }), (0,
            l.default)(e, x, w, p)]), (0,
            o.default)("div", {
                style: b,
                on: {
                    click: E
                }
            }, [_])])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! snabbdom/h */
        23)
          , o = n(a)
          , s = r(/*! ./icons */
        110)
          , u = r(/*! ./marker */
        166)
          , l = n(u)
          , c = r(/*! ../modules/player */
        5)
          , h = r(/*! ../modules/animation */
        37)
          , f = null
          , d = null
          , p = !1
    }
    , /*!**************************************!*\
  !*** ./src/modules/configuration.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            var t = e.tags
              , r = e.value;
            return function(e) {
                return b.default.all((0,
                T.filter)(e, t).map(function(t) {
                    return e.dispatch((0,
                    T.set)({
                        id: t,
                        plug: "Properties",
                        property: "visible"
                    }, r))
                }))
            }
        }
        function a(e) {
            var t = e.tags;
            return function(e) {
                var r = (0,
                T.find)(e, {
                    name: t,
                    type: "Camera"
                });
                return r ? e.dispatch((0,
                _.animateCameraTo)(r, 500)) : b.default.resolve(!0)
            }
        }
        function o(e) {
            var t = e.tags
              , r = e.value;
            return function(e) {
                var n = (0,
                T.get)(e, {
                    name: r,
                    evalPlug: "Material",
                    property: "id"
                });
                return b.default.all((0,
                T.filter)(e, t).map(function(t) {
                    return e.dispatch((0,
                    T.set)({
                        id: t,
                        plug: "Material",
                        property: "reference"
                    }, n))
                }))
            }
        }
        function s(e) {
            var t = e.tags;
            return function(e) {
                var r = (0,
                E.getClips)(e).filter(function(e) {
                    return e.name === t
                });
                return b.default.all(r.map(function(t) {
                    return e.dispatch((0,
                    E.queueClip)(t.id, {
                        autoplay: !0
                    }))
                }))
            }
        }
        function u(e) {
            var t = e.tags
              , r = e.value;
            return function(e) {
                e.dispatch((0,
                T.set)(t, r))
            }
        }
        function l(e, t) {
            return function(r) {
                var n = c(r)[e.trim()];
                if (!n)
                    throw new Error("Option: " + e + " does not exist");
                var i = n[t.trim()];
                if (!i)
                    throw new Error("Variant: " + t + " does not exist within option: " + e);
                return b.default.all(i.map(function(e) {
                    var t = e.action
                      , n = e.tags
                      , i = e.value
                      , a = I[t];
                    return a && "" !== n && r.dispatch(a({
                        tags: n,
                        value: i
                    }))
                }))
            }
        }
        function c(e) {
            var t = (0,
            S.getSceneId)(e);
            return N[t] || !function() {
                var r = (0,
                T.get)(e, D);
                try {
                    r = JSON.parse(r)
                } catch (e) {
                    r = {}
                }
                (0,
                x.default)(r).map(function(e) {
                    var t = r[e];
                    (0,
                    x.default)(t).map(function(e) {
                        null === t[e] && (t[e] = [])
                    })
                }),
                N[t] = r
            }(),
            N[t]
        }
        function h(e, t) {
            var r = c(e);
            (0,
            M.default)(r, t)
        }
        function f(e, t) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}
              , n = c(e);
            (0,
            M.default)(n[t], r)
        }
        function d(e, t) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [];
            f(e, (0,
            v.default)({}, t, r))
        }
        function p(e, t) {
            f(e, (0,
            v.default)({}, t, void 0))
        }
        function m(e, t, r) {
            var n = c(e);
            return n && n[t] ? n[r] : []
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var g = r(/*! babel-runtime/helpers/defineProperty */
        21)
          , v = n(g)
          , y = r(/*! babel-runtime/core-js/object/assign */
        2)
          , M = n(y)
          , w = r(/*! babel-runtime/core-js/object/keys */
        8)
          , x = n(w)
          , A = r(/*! babel-runtime/core-js/promise */
        30)
          , b = n(A);
        t.executeVariant = l,
        t.getOptions = c,
        t.setOptions = h,
        t.putOption = f,
        t.putVariant = d,
        t.removeVariant = p,
        t.getVariant = m;
        var T = r(/*! ./scene */
        4)
          , _ = (r(/*! ./annotations */
        58),
        r(/*! ./player */
        5))
          , E = r(/*! ./animation */
        37)
          , S = r(/*! ./sceneIO */
        19)
          , D = {
            type: "Scene",
            plug: "Player",
            property: "configurator"
        }
          , N = {}
          , I = {
            "set-visibility": i,
            "set-property": u,
            "assign-material": o,
            "move-camera": a,
            "play-clip": s
        }
          , L = {
            actions: {
                executeVariant: l
            },
            selectors: {
                getOptions: c,
                setOptions: h,
                putOption: f,
                putVariant: d,
                removeVariant: p,
                getVariant: m
            }
        };
        t.default = L
    }
    , /*!********************************!*\
  !*** ./src/modules/plugins.js ***!
  \********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            try {
                var n = function() {
                    var n = function(t) {
                        var r = new Function("api",t || "");
                        return r(e.getIn(["plugins", "api"]))
                    }
                      , i = r.content
                      , a = r.loadFromServer
                      , o = r.url;
                    return a ? (console.log("Load plugin from server", o),
                    {
                        v: new T.default.Promise(function(r, i) {
                            e.callApi({
                                types: [E, S, N],
                                url: o,
                                payload: t,
                                queryKey: "PLUGINexternal" + t,
                                contentType: "external"
                            }).then(function(e) {
                                console.log("fetched external plugin", "undefined" == typeof e ? "undefined" : (0,
                                m.default)(e), e && e.length);
                                try {
                                    var t = n(e);
                                    t || console.log("External plugin must be a function that returns an object"),
                                    r(t || {})
                                } catch (e) {
                                    console.log("Error building plugin", e),
                                    e.stack && console.log(e.stack),
                                    r({})
                                }
                            }).catch(function(e) {
                                console.log("Error loading external plugin", e),
                                r({})
                            })
                        }
                        )
                    }) : {
                        v: v.default.resolve(n(i))
                    }
                }();
                if ("object" === ("undefined" == typeof n ? "undefined" : (0,
                m.default)(n)))
                    return n.v
            } catch (e) {
                console.log("error", e)
            }
        }
        function a(e) {
            return function(t) {
                var r = t.getIn(["sceneIO", "id"]);
                if (!r)
                    return v.default.reject("No scene attached");
                var n = t.getIn(["plugins", "api"]);
                return n && n[e] ? v.default.resolve(n[e]) : t.callApi({
                    types: [E, S, N],
                    url: "https://clara.io/api/scenes/" + r + "/plugins/" + e,
                    payload: e,
                    queryKey: "PLUGIN" + e
                }).then(function(r) {
                    return i(t, e, r).then(function(r) {
                        return t.dispatch({
                            type: D,
                            payload: {
                                name: e,
                                plugin: r
                            }
                        }),
                        r
                    })
                })
            }
        }
        function o(e, t) {
            var r = e.getIn(["plugins", "plugins", t]);
            return r ? v.default.resolve(r) : e.dispatch(a(t))
        }
        function s(e) {
            return {
                type: _,
                payload: e
            }
        }
        function u(e, t, r) {
            try {
                var n = function() {
                    var n = function(e) {
                        return console.log(e),
                        v.default.resolve(!0)
                    }
                      , i = t.split("/")
                      , a = (0,
                    d.default)(i, 2)
                      , s = a[0]
                      , u = a[1]
                      , l = "string" == typeof r ? JSON.parse(r) : r;
                    return {
                        v: function() {
                            return console.log("Get plugin", s, "for command", u),
                            o(e, s).then(function(e) {
                                return console.log("Fetched plugin", !!e, "object" === ("undefined" == typeof e ? "undefined" : (0,
                                m.default)(e)) && (0,
                                h.default)(e)),
                                e ? e[u] ? "function" != typeof e[u] ? n("Command: " + u + " in plugin: " + s + " is not a function") : Array.isArray(l) ? v.default.resolve(e[u].apply(e, l)) : v.default.resolve(e[u](l)) : n("Unknown command: " + u + " for plugin: " + s) : n("Error getting plugin: " + s)
                            })
                        }
                    }
                }();
                if ("object" === ("undefined" == typeof n ? "undefined" : (0,
                m.default)(n)))
                    return n.v
            } catch (e) {
                return function() {
                    console.error(e)
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l, c = r(/*! babel-runtime/core-js/object/keys */
        8), h = n(c), f = r(/*! babel-runtime/helpers/slicedToArray */
        39), d = n(f), p = r(/*! babel-runtime/helpers/typeof */
        17), m = n(p), g = r(/*! babel-runtime/core-js/promise */
        30), v = n(g), y = r(/*! babel-runtime/helpers/defineProperty */
        21), M = n(y);
        t.get = o,
        t.setApi = s,
        t.getSetupCommand = u;
        var w = r(/*! immutable */
        11)
          , x = r(/*! ./utils/createReducer */
        27)
          , A = n(x)
          , b = r(/*! rsvp */
        106)
          , T = n(b)
          , _ = "SET_API"
          , E = "LOADING_PLUGIN"
          , S = "LOADED_PLUGIN"
          , D = "SET_PLUGIN"
          , N = "LOADING_PLUGIN_ERROR"
          , I = (0,
        w.Map)({
            api: null,
            plugins: (0,
            w.Map)(),
            loading: (0,
            w.Map)()
        })
          , L = (0,
        A.default)(I, (l = {},
        (0,
        M.default)(l, _, function(e, t) {
            return e.set("api", t)
        }),
        (0,
        M.default)(l, E, function(e, t) {
            return e.setIn(["loading", t], !0)
        }),
        (0,
        M.default)(l, S, function(e, t, r) {
            return r.action,
            e.setIn(["loading", t], !1)
        }),
        (0,
        M.default)(l, D, function(e, t) {
            var r = t.name
              , n = t.plugin;
            return e.setIn(["plugins", r], n)
        }),
        l))
          , C = {
            reducer: L,
            actions: {
                loadPlugin: a
            },
            selectors: {
                get: o,
                getSetupCommand: u
            }
        };
        t.default = C
    }
    , /*!*********************************************!*\
  !*** ./src/modules/utils/evalSceneGraph.js ***!
  \*********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t, r, n, i, a) {
            var o = e.from
              , s = e.to
              , u = (0,
            y.default)([t, r, n, i])
              , l = s[u];
            if (l) {
                var c = !0
                  , h = !1
                  , f = void 0;
                try {
                    for (var d, m = (0,
                    g.default)(l); !(c = (d = m.next()).done); c = !0) {
                        var v = d.value;
                        a.indexOf(v) === -1 && (delete o[v][u],
                        (0,
                        p.default)(o[v]).length || delete o[v])
                    }
                } catch (e) {
                    h = !0,
                    f = e
                } finally {
                    try {
                        !c && m.return && m.return()
                    } finally {
                        if (h)
                            throw f
                    }
                }
            }
            var M = !0
              , w = !1
              , x = void 0;
            try {
                for (var A, b = (0,
                g.default)(a); !(M = (A = b.next()).done); M = !0) {
                    var T = A.value;
                    o[T] || (o[T] = {}),
                    o[T][u] = !0
                }
            } catch (e) {
                w = !0,
                x = e
            } finally {
                try {
                    !M && b.return && b.return()
                } finally {
                    if (w)
                        throw x
                }
            }
            s[u] = a
        }
        function o(e, t, r, n, i, a, o, s) {
            var u = t.from
              , l = t.to
              , c = o[a];
            c && e && !e.nodes[c] && (console.warn("No reference to:", c, "from", r, n, i, a),
            o[a] = c = null);
            var h = (0,
            y.default)([r, n, i, a])
              , f = l[h];
            f ? f !== c && (delete u[f][h],
            c ? (u[c] || (u[c] = {}),
            u[c][h] = s || !0,
            l[h] = c) : ((0,
            p.default)(u[f]).length || delete u[f],
            delete l[h])) : c && (u[c] || (u[c] = {}),
            u[c][h] = s || !0,
            l[h] = c)
        }
        function s(e, t) {
            var r = [];
            return t.children.forEach(function(t) {
                e.nodes[t] && (r = r.concat(s(e, e.nodes[t])))
            }),
            (0,
            p.default)(t.plugs).forEach(function(e) {
                var n = b[e];
                n && t.plugs[e].forEach(function(e) {
                    if (n.indexOf(e.type) >= 0)
                        return r.push(t.id),
                        r
                })
            }),
            r
        }
        function u(e, t, r) {
            function n(e, t) {
                if (_[e] && !E[e])
                    throw console.error("Circular reference, updating", r.nodes[e].name),
                    new Error("Circular reference: " + e);
                b[e] && !_[e] && u(e, b[e]);
                var n = E[e] || r.evaluatedNodes[e];
                return t && (n = n && n[t]),
                n
            }
            function i(e) {
                if (M[e])
                    return M[e];
                b[e] && !_[e] && u(e, b[e]);
                var t = n(e, "Transform");
                if (!t)
                    return null;
                var a = r.nodes[e]
                  , o = a && a.parent
                  , s = o && i(o);
                return M[e] = s ? (new w.Matrix4).copy(s).multiply(t.transform) : (new w.Matrix4).copy(t.transform),
                M[e]
            }
            function u(s, u) {
                function l(u) {
                    var l = c.plugs[u]
                      , d = h[u]
                      , m = d ? d._v : 0;
                    h[u] = l.reduce(function(l, m, v) {
                        var y = (0,
                        A.lookupOperator)(u, m.type, [])
                          , M = !0
                          , w = !1
                          , x = void 0;
                        try {
                            for (var b, T = (0,
                            g.default)(y.fileReferenceKeys); !(M = (b = T.next()).done); M = !0) {
                                var _ = b.value;
                                o(null, r.fileReferences, s, u, v, _, m)
                            }
                        } catch (e) {
                            w = !0,
                            x = e
                        } finally {
                            try {
                                !M && T.return && T.return()
                            } finally {
                                if (w)
                                    throw x
                            }
                        }
                        var E = !0
                          , S = !1
                          , D = void 0;
                        try {
                            for (var N, I = (0,
                            g.default)(y.nodeReferenceKeys); !(E = (N = I.next()).done); E = !0) {
                                var L = N.value;
                                o(r, r.nodeReferences, s, u, v, L, m)
                            }
                        } catch (e) {
                            S = !0,
                            D = e
                        } finally {
                            try {
                                !E && I.return && I.return()
                            } finally {
                                if (S)
                                    throw D
                            }
                        }
                        var C = {}
                          , O = !0
                          , j = !1
                          , R = void 0;
                        try {
                            for (var P, z = (0,
                            g.default)((0,
                            p.default)(y.plugReferences)); !(O = (P = z.next()).done); O = !0) {
                                var B = P.value;
                                o(r, r.nodeReferences, s, u, v, B, m, y.plugReferences[B]),
                                m[B] && (C[B] = n(m[B], y.plugReferences[B]))
                            }
                        } catch (e) {
                            j = !0,
                            R = e
                        } finally {
                            try {
                                !O && z.return && z.return()
                            } finally {
                                if (j)
                                    throw R
                            }
                        }
                        var U = !0
                          , V = !1
                          , k = void 0;
                        try {
                            for (var F, G = (0,
                            g.default)(y.nodeReferenceListKeys); !(U = (F = G.next()).done); U = !0) {
                                var Y = F.value;
                                a(r.nodeReferences, s, u, v, Y, m[Y])
                            }
                        } catch (e) {
                            V = !0,
                            k = e
                        } finally {
                            try {
                                !U && G.return && G.return()
                            } finally {
                                if (V)
                                    throw k
                            }
                        }
                        return y.environment && (o(r, r.nodeReferences, s, u, v, "environment", {
                            environment: t
                        }, "Environment"),
                        C.environment = n(t, "Environment")),
                        y.update((0,
                        f.default)({}, m, C), l, {
                            sceneId: t,
                            node: c,
                            store: e,
                            properties: h.Properties,
                            getWorldTransform: i,
                            previousResult: d,
                            loaded: r.loaded
                        })
                    }, {}),
                    h[u]._v = m + 1
                }
                var c = r.nodes[s];
                if (c) {
                    var h = r.evaluatedNodes[s];
                    if (!h) {
                        h = r.evaluatedNodes[s] = {
                            name: c.name,
                            _ev: 0,
                            plugs: []
                        },
                        c.plugs.Properties && h.plugs.push("Properties"),
                        c.plugs.Transform && h.plugs.push("Transform");
                        var d = !0
                          , m = !1
                          , v = void 0;
                        try {
                            for (var y, M = (0,
                            g.default)((0,
                            p.default)(c.plugs)); !(d = (y = M.next()).done); d = !0) {
                                var w = y.value;
                                "Properties" !== w && "Transform" !== w && h.plugs.push(w)
                            }
                        } catch (e) {
                            m = !0,
                            v = e
                        } finally {
                            try {
                                !d && M.return && M.return()
                            } finally {
                                if (m)
                                    throw v
                            }
                        }
                    }
                    E[s] = h,
                    _[s] = !0;
                    var x = 0
                      , T = !0
                      , S = !1
                      , D = void 0;
                    try {
                        for (var N, I = (0,
                        g.default)(h.plugs); !(T = (N = I.next()).done); T = !0) {
                            var L = N.value;
                            u !== !0 && u !== L || l(L),
                            x += h[L]._v
                        }
                    } catch (e) {
                        S = !0,
                        D = e
                    } finally {
                        try {
                            !T && I.return && I.return()
                        } finally {
                            if (S)
                                throw D
                        }
                    }
                    h._v = c._v,
                    h._ev = x,
                    delete _[s],
                    delete b[s]
                }
            }
            function l(e, t) {
                if (v[e]) {
                    var r = !0
                      , n = !1
                      , i = void 0;
                    try {
                        for (var a, o = (0,
                        g.default)((0,
                        p.default)(v[e])); !(r = (a = o.next()).done); r = !0) {
                            var s = a.value
                              , u = v[e][s]
                              , h = JSON.parse(s)
                              , f = (0,
                            c.default)(h, 4)
                              , d = f[0]
                              , m = f[1];
                            f[2],
                            f[3],
                            t && u !== !0 && u !== t || (b[d] ? b[d] !== m && (b[d] = !0,
                            l(d, m)) : (b[d] = m,
                            l(d, m)))
                        }
                    } catch (e) {
                        n = !0,
                        i = e
                    } finally {
                        try {
                            !r && o.return && o.return()
                        } finally {
                            if (n)
                                throw i
                        }
                    }
                }
            }
            var h = (new Date,
            (0,
            p.default)(r.nodes))
              , d = (0,
            p.default)(r.evaluatedNodes)
              , m = r.nodeReferences
              , v = m.from
              , y = (m.to,
            !r.loaded && (0,
            x.isSceneLoaded)(e));
            r.loaded || (r.loaded = y);
            var M = {}
              , b = {}
              , T = {}
              , _ = {}
              , E = {}
              , S = !0
              , D = !1
              , N = void 0;
            try {
                for (var I, L = (0,
                g.default)(h); !(S = (I = L.next()).done); S = !0) {
                    var C = I.value;
                    r.evaluatedNodes[C] && r.evaluatedNodes[C]._v === r.nodes[C]._v || (b[C] = !0,
                    s(r, r.nodes[C]).forEach(function(e) {
                        b[e] = !0
                    }))
                }
            } catch (e) {
                D = !0,
                N = e
            } finally {
                try {
                    !S && L.return && L.return()
                } finally {
                    if (D)
                        throw N
                }
            }
            var O = !0
              , j = !1
              , R = void 0;
            try {
                for (var P, z = (0,
                g.default)(d); !(O = (P = z.next()).done); O = !0) {
                    var B = P.value;
                    r.nodes[B] || (T[B] = !0)
                }
            } catch (e) {
                j = !0,
                R = e
            } finally {
                try {
                    !O && z.return && z.return()
                } finally {
                    if (j)
                        throw R
                }
            }
            if (y) {
                var U = !0
                  , V = !1
                  , k = void 0;
                try {
                    for (var F, G = (0,
                    g.default)(h); !(U = (F = G.next()).done); U = !0) {
                        var Y = F.value
                          , Q = r.evaluatedNodes[Y];
                        Q && Q.Properties && Q.Properties.prefetch && (b[Y] = r.nodes[Y].type)
                    }
                } catch (e) {
                    V = !0,
                    k = e
                } finally {
                    try {
                        !U && G.return && G.return()
                    } finally {
                        if (V)
                            throw k
                    }
                }
            }
            var H = !0
              , W = !1
              , X = void 0;
            try {
                for (var q, Z = (0,
                g.default)((0,
                p.default)(b)); !(H = (q = Z.next()).done); H = !0) {
                    var J = q.value;
                    v[J] && l(J)
                }
            } catch (e) {
                W = !0,
                X = e
            } finally {
                try {
                    !H && Z.return && Z.return()
                } finally {
                    if (W)
                        throw X
                }
            }
            var K = !0
              , $ = !1
              , ee = void 0;
            try {
                for (var te, re = (0,
                g.default)((0,
                p.default)(T)); !(K = (te = re.next()).done); K = !0) {
                    var ne = te.value;
                    delete r.evaluatedNodes[ne]
                }
            } catch (e) {
                $ = !0,
                ee = e
            } finally {
                try {
                    !K && re.return && re.return()
                } finally {
                    if ($)
                        throw ee
                }
            }
            var ie = !0
              , ae = !1
              , oe = void 0;
            try {
                for (var se, ue = (0,
                g.default)((0,
                p.default)(b)); !(ie = (se = ue.next()).done); ie = !0) {
                    var le = se.value;
                    b[le] && u(le, b[le])
                }
            } catch (e) {
                ae = !0,
                oe = e
            } finally {
                try {
                    !ie && ue.return && ue.return()
                } finally {
                    if (ae)
                        throw oe
                }
            }
            r._ev = r._v
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var l = r(/*! babel-runtime/helpers/slicedToArray */
        39)
          , c = i(l)
          , h = r(/*! babel-runtime/core-js/object/assign */
        2)
          , f = i(h)
          , d = r(/*! babel-runtime/core-js/object/keys */
        8)
          , p = i(d)
          , m = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , g = i(m)
          , v = r(/*! babel-runtime/core-js/json/stringify */
        51)
          , y = i(v);
        t.updateReferenceList = a,
        t.updateReference = o,
        t.evaluateSceneGraph = u;
        var M = r(/*! three */
        1)
          , w = n(M)
          , x = r(/*! ../sceneIO */
        19)
          , A = r(/*! ../../operators/nonImmutable */
        75)
          , b = {
            PolyMesh: ["UVMap"]
        }
    }
    , /*!**************************************!*\
  !*** ./src/modules/utils/physics.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e) {
            var t = new Ammo.btDefaultCollisionConfiguration
              , r = new Ammo.btCollisionDispatcher(t)
              , n = new Ammo.btDbvtBroadphase
              , i = new Ammo.btSequentialImpulseConstraintSolver
              , a = new Ammo.btDiscreteDynamicsWorld(r,n,i,t)
              , o = (0,
            v.get)(e, {
                plug: "Player",
                property: "gravity"
            });
            return o || (o = new m.Vector3(0,-9.8,0)),
            a.setGravity(new Ammo.btVector3(o.x,o.y,o.z)),
            a
        }
        function o(e) {
            var t = e.getOrigin()
              , r = e.getRotation()
              , n = new m.Vector3(t.x(),t.y(),t.z())
              , i = new m.Quaternion(r.x(),r.y(),r.z(),r.w())
              , a = new m.Vector3(1,1,1)
              , o = new m.Matrix4;
            return o.compose(n, i, a),
            o
        }
        function s(e) {
            for (var t = new Ammo.btConvexHullShape, r = e.positions.values, n = new m.Vector3, i = 0; i < r.length; i++) {
                r.getAt(i, n);
                var a = new Ammo.btVector3(n.x,n.y,n.z);
                t.addPoint(a)
            }
            return t
        }
        function u(e, t, r) {
            var n = t.getTranslator().getThreeObject(r)
              , i = null;
            n && n.userData && n.userData.triangulation && (i = n.userData.triangulation.mesh),
            i || (i = (0,
            x.default)(e));
            for (var a = i.positions.values, o = i.positions.faceValueIndices, s = new Ammo.btTriangleMesh(!0,!0), u = new m.Vector3, l = new m.Vector3, c = new m.Vector3, h = 0; h < o.length; h += 3) {
                a.getAt(h, u),
                a.getAt(h + 1, l),
                a.getAt(h + 2, c);
                var f = new Ammo.btVector3(u.x,u.y,u.z)
                  , d = new Ammo.btVector3(l.x,l.y,l.z)
                  , p = new Ammo.btVector3(c.x,c.y,c.z);
                s.addTriangle(f, d, p, !1)
            }
            var g = new Ammo.btBvhTriangleMeshShape(s,!0,!0);
            return g
        }
        function l(e, t) {
            var r = new Ammo.btVector3((t.max.x - t.min.x) / 2,(t.max.y - t.min.y) / 2,(t.max.z - t.min.z) / 2);
            return new Ammo.btBoxShape(r)
        }
        function c(e) {
            function t(t, a) {
                var o = !1
                  , c = !1;
                "Kinematic" === t.motionType && (o = !0),
                "Static" === t.motionType && (c = !0);
                var h = null
                  , f = null
                  , d = (0,
                v.getWorldTransform)(e, a);
                d.decompose(A, b, T);
                var p = t.collisionShape;
                if ("Mesh" === p) {
                    var g = (0,
                    v.get)(e, {
                        id: a,
                        evalPlug: "PolyMesh",
                        property: "mesh"
                    });
                    g && (h = u(g, e, a),
                    h.setLocalScaling(new Ammo.btVector3(T.x,T.y,T.z)))
                } else if ("Box" === p) {
                    var y = (0,
                    v.getNodeBoundingBox)(e, a);
                    h = l(a, y);
                    var w = new m.Vector3((y.max.x + y.min.x) / 2,(y.max.y + y.min.y) / 2,(y.max.z + y.min.z) / 2);
                    f = (new m.Matrix4).getInverse(d, !0),
                    f.multiply((new m.Matrix4).makeTranslation(w.x, w.y, w.z))
                } else {
                    var x = (0,
                    v.get)(e, {
                        id: a,
                        evalPlug: "PolyMesh",
                        property: "mesh"
                    });
                    x && (h = s(x),
                    h.setLocalScaling(new Ammo.btVector3(T.x,T.y,T.z)),
                    h.setMargin(0))
                }
                if (!h) {
                    var _ = (0,
                    v.get)(e, {
                        id: a,
                        property: "name"
                    });
                    console.warn("Could not create collision shape for '" + _ + "', defaulting to a unit sphere"),
                    h = new Ammo.btSphereShape(1)
                }
                f && d.multiply(f),
                d.decompose(A, b, T);
                var E = new Ammo.btTransform;
                E.setIdentity(),
                E.setOrigin(new Ammo.btVector3(A.x,A.y,A.z)),
                E.setRotation(new Ammo.btQuaternion(b.x,b.y,b.z,b.w));
                var S = o || c ? 0 : t.mass
                  , D = 0 !== S
                  , N = new Ammo.btVector3(0,0,0);
                D && h.calculateLocalInertia(S, N);
                var I = new Ammo.btDefaultMotionState(E)
                  , L = new Ammo.btRigidBodyConstructionInfo(S,I,h,N);
                L.m_linearDamping = t.linearDamping,
                L.m_angularDamping = t.angularDamping,
                L.m_friction = t.friction,
                L.m_rollingFriction = t.rollingFriction,
                L.m_linearSleepingThreshold = t.linearSleepingThreshold,
                L.m_angularSleepingThreshold = t.angularSleepingThreshold,
                L.m_restitution = t.restitution;
                var C = new Ammo.btRigidBody(L);
                o && (C.setCollisionFlags(C.getCollisionFlags() | M.default.BODYFLAG_KINEMATIC_OBJECT),
                C.setActivationState(M.default.BODYSTATE_DISABLE_DEACTIVATION)),
                i.addRigidBody(C),
                o ? r[a] = {
                    body: C,
                    shapeLocalTransform: f
                } : c || (n[a] = {
                    body: C,
                    shapeLocalTransform: f
                })
            }
            var r = {}
              , n = {}
              , i = a(e)
              , o = (0,
            v.getAll)(e, {
                plug: "Properties",
                properties: {
                    name: "RigidBodyProperties"
                }
            });
            return (0,
            g.mapObjIndexed)(t, o),
            {
                dynamicsWorld: i,
                kinematicBodies: r,
                dynamicBodies: n
            }
        }
        function h(e, t, r, n, i, a) {
            n.stepSimulation(t / 1e3, E, _);
            var s = new Ammo.btTransform
              , u = new Ammo.btQuaternion
              , l = new Ammo.btVector3
              , c = (new m.Quaternion,
            new m.Euler);
            (0,
            d.default)(a).forEach(function(t) {
                var r = a[t].body
                  , n = (0,
                v.getWorldTransform)(e, t)
                  , i = a[t].shapeLocalTransform;
                i && n.premultiply(i),
                n.decompose(A, b, T);
                var o = r.getMotionState()
                  , s = r.getWorldTransform();
                l.setX(A.x),
                l.setY(A.y),
                l.setZ(A.z),
                u.setX(b.x),
                u.setY(b.y),
                u.setZ(b.z),
                u.setW(b.w),
                s.setOrigin(l),
                s.setRotation(u),
                o.setWorldTransform(s)
            }),
            (0,
            d.default)(i).forEach(function(t) {
                var r = i[t].body;
                r.getMotionState().getWorldTransform(s);
                var n = o(s)
                  , a = e.get("sceneGraph").nodes[t].parent
                  , u = (0,
                v.getWorldTransform)(e, a);
                u && n.premultiply((new m.Matrix4).getInverse(u, !0));
                var l = i[t].shapeLocalTransform;
                l && n.premultiply((new m.Matrix4).getInverse(l, !0)),
                n.decompose(A, b, T),
                e.dispatch((0,
                v.set)({
                    id: t,
                    plug: "Transform",
                    property: "translation"
                }, [A.x, A.y, A.z])),
                c.setFromQuaternion(b, "ZYX"),
                e.dispatch((0,
                v.set)({
                    id: t,
                    plug: "Transform",
                    property: "rotation"
                }, [m.Math.RAD2DEG * c.x, m.Math.RAD2DEG * c.y, m.Math.RAD2DEG * c.z]))
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var f = r(/*! babel-runtime/core-js/object/keys */
        8)
          , d = i(f);
        t.initPhysics = c,
        t.updatePhysics = h;
        var p = r(/*! three */
        1)
          , m = n(p)
          , g = r(/*! ramda */
        3)
          , v = r(/*! ../scene */
        4)
          , y = r(/*! ./physicsConstants */
        173)
          , M = i(y)
          , w = r(/*! ../../polyMesh/geometric/operator/triangulateMesh */
        215)
          , x = i(w)
          , A = new m.Vector3
          , b = new m.Quaternion
          , T = new m.Vector3
          , _ = 1 / 60
          , E = 4
    }
    , /*!***********************************************!*\
  !*** ./src/modules/utils/physicsConstants.js ***!
  \***********************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            BODYTYPE_STATIC: "Static",
            BODYTYPE_DYNAMIC: "Dynamic",
            BODYTYPE_KINEMATIC: "Kinematic",
            BODYFLAG_STATIC_OBJECT: 1,
            BODYFLAG_KINEMATIC_OBJECT: 2,
            BODYFLAG_NORESPONSE_OBJECT: 4,
            BODYSTATE_ACTIVE_TAG: 1,
            BODYSTATE_ISLAND_SLEEPING: 2,
            BODYSTATE_WANTS_DEACTIVATION: 3,
            BODYSTATE_DISABLE_DEACTIVATION: 4,
            BODYSTATE_DISABLE_SIMULATION: 5,
            BODYGROUP_NONE: 0,
            BODYGROUP_DEFAULT: 1,
            BODYGROUP_DYNAMIC: 1,
            BODYGROUP_STATIC: 2,
            BODYGROUP_KINEMATIC: 4,
            BODYGROUP_ENGINE_1: 8,
            BODYGROUP_TRIGGER: 16,
            BODYGROUP_ENGINE_2: 32,
            BODYGROUP_ENGINE_3: 64,
            BODYGROUP_USER_1: 128,
            BODYGROUP_USER_2: 256,
            BODYGROUP_USER_3: 512,
            BODYGROUP_USER_4: 1024,
            BODYGROUP_USER_5: 2048,
            BODYGROUP_USER_6: 4096,
            BODYGROUP_USER_7: 8192,
            BODYGROUP_USER_8: 16384,
            BODYMASK_NONE: 0,
            BODYMASK_ALL: 65535,
            BODYMASK_STATIC: 2,
            BODYMASK_NOT_STATIC: 65533,
            BODYMASK_NOT_STATIC_KINEMATIC: 65529
        };
        t.default = r
    }
    , /*!*********************************************!*\
  !*** ./src/modules/utils/tweenFunctions.js ***!
  \*********************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            linear: function(e, t, r, n) {
                var i = r - t;
                return i * e / n + t
            },
            easeInQuad: function(e, t, r, n) {
                var i = r - t;
                return i * (e /= n) * e + t
            },
            easeOutQuad: function(e, t, r, n) {
                var i = r - t;
                return -i * (e /= n) * (e - 2) + t
            },
            easeInOutQuad: function(e, t, r, n) {
                var i = r - t;
                return (e /= n / 2) < 1 ? i / 2 * e * e + t : -i / 2 * (--e * (e - 2) - 1) + t
            },
            easeInCubic: function(e, t, r, n) {
                var i = r - t;
                return i * (e /= n) * e * e + t
            },
            easeOutCubic: function(e, t, r, n) {
                var i = r - t;
                return i * ((e = e / n - 1) * e * e + 1) + t
            },
            easeInOutCubic: function(e, t, r, n) {
                var i = r - t;
                return (e /= n / 2) < 1 ? i / 2 * e * e * e + t : i / 2 * ((e -= 2) * e * e + 2) + t
            },
            easeInQuart: function(e, t, r, n) {
                var i = r - t;
                return i * (e /= n) * e * e * e + t
            },
            easeOutQuart: function(e, t, r, n) {
                var i = r - t;
                return -i * ((e = e / n - 1) * e * e * e - 1) + t
            },
            easeInOutQuart: function(e, t, r, n) {
                var i = r - t;
                return (e /= n / 2) < 1 ? i / 2 * e * e * e * e + t : -i / 2 * ((e -= 2) * e * e * e - 2) + t
            },
            easeInQuint: function(e, t, r, n) {
                var i = r - t;
                return i * (e /= n) * e * e * e * e + t
            },
            easeOutQuint: function(e, t, r, n) {
                var i = r - t;
                return i * ((e = e / n - 1) * e * e * e * e + 1) + t
            },
            easeInOutQuint: function(e, t, r, n) {
                var i = r - t;
                return (e /= n / 2) < 1 ? i / 2 * e * e * e * e * e + t : i / 2 * ((e -= 2) * e * e * e * e + 2) + t
            },
            easeInSine: function(e, t, r, n) {
                var i = r - t;
                return -i * Math.cos(e / n * (Math.PI / 2)) + i + t
            },
            easeOutSine: function(e, t, r, n) {
                var i = r - t;
                return i * Math.sin(e / n * (Math.PI / 2)) + t
            },
            easeInOutSine: function(e, t, r, n) {
                var i = r - t;
                return -i / 2 * (Math.cos(Math.PI * e / n) - 1) + t
            },
            easeInExpo: function(e, t, r, n) {
                var i, a = r - t;
                return null !== (i = 0 === e) ? i : {
                    b: a * Math.pow(2, 10 * (e / n - 1)) + t
                }
            },
            easeOutExpo: function(e, t, r, n) {
                var i, a = r - t;
                return null !== (i = e === n) ? i : t + {
                    c: a * (-Math.pow(2, -10 * e / n) + 1) + t
                }
            },
            easeInOutExpo: function(e, t, r, n) {
                var i = r - t;
                return (e /= n / 2) < 1 ? i / 2 * Math.pow(2, 10 * (e - 1)) + t : i / 2 * (-Math.pow(2, -10 * --e) + 2) + t
            },
            easeInCirc: function(e, t, r, n) {
                var i = r - t;
                return -i * (Math.sqrt(1 - (e /= n) * e) - 1) + t
            },
            easeOutCirc: function(e, t, r, n) {
                var i = r - t;
                return i * Math.sqrt(1 - (e = e / n - 1) * e) + t
            },
            easeInOutCirc: function(e, t, r, n) {
                var i = r - t;
                return (e /= n / 2) < 1 ? -i / 2 * (Math.sqrt(1 - e * e) - 1) + t : i / 2 * (Math.sqrt(1 - (e -= 2) * e) + 1) + t
            },
            easeInElastic: function(e, t, r, n) {
                var i, a, o, s = r - t;
                return o = 1.70158,
                a = 0,
                i = s,
                0 === e || 1 === (e /= n),
                a || (a = .3 * n),
                i < Math.abs(s) ? (i = s,
                o = a / 4) : o = a / (2 * Math.PI) * Math.asin(s / i),
                -(i * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * n - o) * (2 * Math.PI) / a)) + t
            },
            easeOutElastic: function(e, t, r, n) {
                var i, a, o, s = r - t;
                return o = 1.70158,
                a = 0,
                i = s,
                0 === e || 1 === (e /= n),
                a || (a = .3 * n),
                i < Math.abs(s) ? (i = s,
                o = a / 4) : o = a / (2 * Math.PI) * Math.asin(s / i),
                i * Math.pow(2, -10 * e) * Math.sin((e * n - o) * (2 * Math.PI) / a) + s + t
            },
            easeInOutElastic: function(e, t, r, n) {
                var i, a, o, s = r - t;
                return o = 1.70158,
                a = 0,
                i = s,
                0 === e || 2 === (e /= n / 2),
                a || (a = n * (.3 * 1.5)),
                i < Math.abs(s) ? (i = s,
                o = a / 4) : o = a / (2 * Math.PI) * Math.asin(s / i),
                e < 1 ? -.5 * (i * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * n - o) * (2 * Math.PI) / a)) + t : i * Math.pow(2, -10 * (e -= 1)) * Math.sin((e * n - o) * (2 * Math.PI) / a) * .5 + s + t
            },
            easeInBack: function(e, t, r, n, i) {
                var a = r - t;
                return void 0 === i && (i = 1.70158),
                a * (e /= n) * e * ((i + 1) * e - i) + t
            },
            easeOutBack: function(e, t, r, n, i) {
                var a = r - t;
                return void 0 === i && (i = 1.70158),
                a * ((e = e / n - 1) * e * ((i + 1) * e + i) + 1) + t
            },
            easeInOutBack: function(e, t, r, n, i) {
                var a = r - t;
                return void 0 === i && (i = 1.70158),
                (e /= n / 2) < 1 ? a / 2 * (e * e * (((i *= 1.525) + 1) * e - i)) + t : a / 2 * ((e -= 2) * e * (((i *= 1.525) + 1) * e + i) + 2) + t
            },
            easeInBounce: function(e, t, n, i) {
                var a, o = n - t;
                return a = r.easeOutBounce(i - e, 0, o, i),
                o - a + t
            },
            easeOutBounce: function(e, t, r, n) {
                var i = r - t;
                return (e /= n) < 1 / 2.75 ? i * (7.5625 * e * e) + t : e < 2 / 2.75 ? i * (7.5625 * (e -= 1.5 / 2.75) * e + .75) + t : e < 2.5 / 2.75 ? i * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) + t : i * (7.5625 * (e -= 2.625 / 2.75) * e + .984375) + t
            },
            easeInOutBounce: function(e, t, n, i) {
                var a, o = n - t;
                return e < i / 2 ? (a = r.easeInBounce(2 * e, 0, o, i),
                .5 * a + t) : (a = r.easeOutBounce(2 * e - i, 0, o, i),
                .5 * a + .5 * o + t)
            }
        };
        t.default = r
    }
    , /*!******************************************!*\
  !*** ./src/operators/GeneralRenderer.js ***!
  \******************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            values: [0, 1, 2, 3, 4, 5, 6, 7],
            labels: ["[ Custom ]", "HD 720", "HD 1080", "640x480", "Full 1024", "1k Square", "2k Square", "Retina"]
        }
          , n = {
            schema: {
                res: {
                    label: "Resolution",
                    type: "Options",
                    defaultValue: "1",
                    values: r.values,
                    labels: r.labels
                },
                res_w: {
                    label: "Custom Width",
                    type: "Number",
                    defaultValue: 1280,
                    minValue: 100,
                    isInteger: !0
                },
                res_h: {
                    label: "Custom Height",
                    type: "Number",
                    defaultValue: 720,
                    minValue: 100,
                    isInteger: !0
                },
                output_dir: {
                    label: "Output directory",
                    type: "Text"
                },
                curPass: {
                    label: "Current Pass",
                    type: "Node"
                },
                frm_start: {
                    label: "Start Frame",
                    type: "Number",
                    defaultValue: 1
                },
                frm_last: {
                    label: "Last Frame",
                    type: "Number",
                    defaultValue: 24
                },
                frm_by: {
                    label: "By Frame",
                    type: "Number",
                    defaultValue: 1
                },
                ren_start: {
                    label: "Start number",
                    type: "Number",
                    defaultValue: 1,
                    isInteger: !0
                },
                ren_by: {
                    label: "By Frame",
                    type: "Number",
                    defaultValue: 1,
                    isInteger: !0
                },
                frm_pad: {
                    label: "Frame padding",
                    type: "Number",
                    defaultValue: 1,
                    minValue: 0,
                    maxValue: 10,
                    isInteger: !0
                }
            }
        };
        t.default = {
            GeneralRenderer: n
        }
    }
    , /*!*******************************!*\
  !*** ./src/operators/Pass.js ***!
  \*******************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function(e) {
            return "Camera" === e.get("type")
        }
          , n = function(e) {
            return "Renderer" === e.get("type")
        }
          , i = {
            schema: {
                activated: {
                    label: "Activated",
                    type: "Boolean",
                    defaultValue: !0
                },
                filename: {
                    label: "Filename",
                    type: "Text",
                    defaultValue: null
                },
                fileFormat: {
                    label: "File Format",
                    type: "Text",
                    defaultValue: null
                },
                over_res: {
                    label: "On",
                    type: "Boolean",
                    defaultValue: !1
                },
                over_res_x: {
                    label: "Image Width",
                    type: "Number",
                    defaultValue: 1280,
                    isInteger: !0
                },
                over_res_y: {
                    label: "Image Height",
                    type: "Number",
                    defaultValue: 720,
                    isInteger: !0
                },
                render_cam: {
                    type: "Node",
                    label: "Camera",
                    filter: r
                },
                render_red: {
                    type: "Node",
                    label: "Renderer",
                    filter: n
                }
            }
        };
        t.default = {
            Pass: i
        }
    }
    , /*!***************************************!*\
  !*** ./src/operators/PolyMesh/Box.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Box */
        216)
          , a = n(i)
          , o = {
            schema: {
                depth: {
                    type: "Number",
                    label: "Depth",
                    defaultValue: 1,
                    step: .1,
                    minValue: 0,
                    animatable: !0
                },
                width: {
                    type: "Number",
                    label: "Width",
                    defaultValue: 1,
                    step: .1,
                    minValue: 0,
                    animatable: !0
                },
                height: {
                    type: "Number",
                    label: "Height",
                    defaultValue: 1,
                    step: .1,
                    minValue: 0,
                    animatable: !0
                },
                depthSegments: {
                    type: "Number",
                    label: "Depth Segments",
                    defaultValue: 1,
                    minValue: 1,
                    isInteger: !0,
                    animatable: !0,
                    i18n: {
                        en: {},
                        xn: {
                            label: "XXX"
                        },
                        hn: {
                            label: "DX"
                        }
                    }
                },
                widthSegments: {
                    type: "Number",
                    label: "Width Segments",
                    defaultValue: 1,
                    minValue: 1,
                    isInteger: !0,
                    animatable: !0
                },
                heightSegments: {
                    type: "Number",
                    label: "Height Segments",
                    defaultValue: 1,
                    minValue: 1,
                    isInteger: !0,
                    animatable: !0
                }
            },
            update: function(e, t) {
                var r = e.width
                  , n = e.height
                  , i = e.depth
                  , o = e.widthSegments
                  , s = e.heightSegments
                  , u = e.depthSegments;
                t.mesh = (0,
                a.default)(r, n, i, o, s, u)
            }
        };
        t.default = o
    }
    , /*!*******************************************!*\
  !*** ./src/operators/PolyMesh/Capsule.js ***!
  \*******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Capsule */
        217)
          , a = n(i)
          , o = {
            schema: {
                radius: {
                    type: "Number",
                    label: "Radius",
                    defaultValue: .5,
                    minValue: .1,
                    step: .1
                },
                height: {
                    type: "Number",
                    label: "Height",
                    defaultValue: 1,
                    minValue: .1,
                    step: .1
                },
                radiusSegments: {
                    label: "Radial Segments",
                    type: "Integer",
                    defaultValue: 12,
                    minValue: 4,
                    maxValue: 100
                },
                heightSegments: {
                    label: "Height Segments",
                    type: "Integer",
                    defaultValue: 10,
                    minValue: 1,
                    maxValue: 100
                }
            },
            update: function(e, t) {
                var r = e.radius
                  , n = e.height
                  , i = e.radiusSegments
                  , o = e.heightSegments;
                t.mesh = (0,
                a.default)(r, n, i, o)
            }
        };
        t.default = o
    }
    , /*!****************************************!*\
  !*** ./src/operators/PolyMesh/Cone.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Cone */
        218)
          , a = n(i)
          , o = {
            schema: {
                base: {
                    type: "Number",
                    label: "Base Radius",
                    defaultValue: .5,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                height: {
                    type: "Number",
                    label: "Height",
                    defaultValue: 1,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                radiusSegments: {
                    label: "Radial Segments",
                    type: "Integer",
                    defaultValue: 12,
                    minValue: 3,
                    maxValue: 200,
                    animatable: !0
                },
                heightSegments: {
                    label: "Height Segments",
                    type: "Integer",
                    defaultValue: 1,
                    minValue: 1,
                    maxValue: 200,
                    animatable: !0
                },
                openEnded: {
                    label: "Open Base",
                    type: "Boolean",
                    defaultValue: !1,
                    animatable: !0
                }
            },
            update: function(e, t) {
                var r = e.base
                  , n = e.height
                  , i = e.radiusSegments;
                e.heightSegments,
                t.mesh = (0,
                a.default)(r, i, n)
            }
        };
        t.default = o
    }
    , /*!********************************************!*\
  !*** ./src/operators/PolyMesh/Cylinder.js ***!
  \********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Cylinder */
        219)
          , a = n(i)
          , o = {
            schema: {
                radiusTop: {
                    type: "Number",
                    label: "Top Radius",
                    defaultValue: .5,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                radiusBottom: {
                    type: "Number",
                    label: "Bottom Radius",
                    defaultValue: .5,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                height: {
                    type: "Number",
                    label: "Height",
                    defaultValue: 1,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                radiusSegments: {
                    label: "Radial Segments",
                    type: "Integer",
                    defaultValue: 24,
                    minValue: 3,
                    maxValue: 200,
                    animatable: !0
                },
                heightSegments: {
                    label: "Height Segments",
                    type: "Integer",
                    defaultValue: 1,
                    minValue: 1,
                    maxValue: 200,
                    animatable: !0
                },
                openEnded: {
                    label: "Open Ended",
                    type: "Boolean",
                    defaultValue: !1,
                    animatable: !0
                }
            },
            update: function(e, t) {
                var r = e.radiusTop
                  , n = e.radiusBottom
                  , i = e.height
                  , o = e.radiusSegments
                  , s = e.heightSegments
                  , u = e.openEnded;
                t.mesh = (0,
                a.default)(r, n, i, o, s, u)
            }
        };
        t.default = o
    }
    , /*!****************************************!*\
  !*** ./src/operators/PolyMesh/Disk.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Disk */
        220)
          , a = n(i)
          , o = {
            schema: {
                radius: {
                    type: "Number",
                    label: "Radius",
                    defaultValue: .5,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                segments: {
                    type: "Integer",
                    label: "Segments",
                    defaultValue: 12,
                    minValue: 3,
                    maxValue: 200,
                    animatable: !0
                },
                thetaStart: {
                    label: "Theta Start",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                thetaLength: {
                    label: "Theta Length",
                    type: "Number",
                    defaultValue: 360,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                removeDuplicate: {
                    label: "Remove Duplicate Vertices",
                    type: "Boolean",
                    defaultValue: !1,
                    hidden: !0
                }
            },
            update: function(e, t) {
                var r = e.radius
                  , n = e.segments
                  , i = e.thetaStart
                  , o = e.thetaLength;
                t.mesh = (0,
                a.default)(r, n, i, o)
            }
        };
        t.default = o
    }
    , /*!********************************************!*\
  !*** ./src/operators/PolyMesh/Instance.js ***!
  \********************************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            schema: {
                geometry: {
                    label: "Mesh",
                    plug: "PolyMesh",
                    type: "Plug"
                }
            },
            update: function(e, t) {
                t.mesh = e.geometry && e.geometry.mesh
            }
        };
        t.default = r
    }
    , /*!****************************************!*\
  !*** ./src/operators/PolyMesh/Mesh.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = r(/*! ../../translators/bingeom */
        62)
          , i = r(/*! ../../modules/assets */
        26)
          , a = {
            schema: {
                geometry: {
                    type: "File",
                    label: "PolyMesh Geometry File"
                }
            },
            update: function(e, t, r) {
                var a = (r.node,
                r.store)
                  , o = r.properties
                  , s = r.previousResult
                  , u = r.loaded
                  , l = o.visible
                  , c = e.geometry
                  , h = l || o.prefetch && u
                  , f = h && c
                  , d = f && a.hasApi() && (0,
                i.getOrFetchBinary)(f)(a)
                  , p = d && (0,
                n.convertToCNSPolyMesh)(d, f);
                return t.mesh = p,
                t.previousMesh = s && s.mesh,
                t
            }
        };
        t.default = a
    }
    , /*!*****************************************!*\
  !*** ./src/operators/PolyMesh/Plane.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Plane */
        221)
          , a = n(i)
          , o = {
            schema: {
                width: {
                    label: "Width",
                    type: "Number",
                    defaultValue: 4,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                height: {
                    label: "Height",
                    type: "Number",
                    defaultValue: 4,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                widthSegments: {
                    type: "Number",
                    label: "Width Segments",
                    defaultValue: 1,
                    minValue: 1,
                    isInteger: !0,
                    animatable: !0
                },
                heightSegments: {
                    type: "Number",
                    label: "Height Segments",
                    defaultValue: 1,
                    minValue: 1,
                    isInteger: !0,
                    animatable: !0
                }
            },
            update: function(e, t) {
                var r = e.width
                  , n = e.height
                  , i = e.widthSegments
                  , o = e.heightSegments;
                t.mesh = (0,
                a.default)(r, n, i, o)
            }
        };
        t.default = o
    }
    , /*!*********************************************!*\
  !*** ./src/operators/PolyMesh/ProxyMesh.js ***!
  \*********************************************/
    function(e, t, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = r(/*! ../../translators/bingeom */
        62)
          , i = r(/*! ../../modules/assets */
        26)
          , a = {
            schema: {
                binary: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                reducedBinary: {
                    type: "Binary",
                    label: "Reduced Binary Geometry File"
                },
                operatorDisplay: {
                    type: "Number",
                    defaultValue: 1,
                    label: "Operator Display Type"
                },
                nbLevel: {
                    type: "Number",
                    defaultValue: 1
                },
                level0: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level1: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level2: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level3: {
                    type: "Binary",
                    label: "Binary Geometry File"
                },
                level4: {
                    type: "Binary",
                    label: "Binary Geometry File"
                }
            },
            update: function(e, t, r) {
                var a = (r.node,
                r.store)
                  , o = r.properties
                  , s = r.previousResult
                  , u = r.loaded
                  , l = o.visible
                  , c = e.binary
                  , h = l || o.prefetch && u
                  , f = h && c && a.hasApi() && (0,
                i.getOrFetchBinary)(c)(a)
                  , d = f && (0,
                n.convertToCNSPolyMesh)(f, c);
                t.mesh = d,
                t.previousMesh = s && s.mesh
            }
        };
        t.default = a
    }
    , /*!****************************************!*\
  !*** ./src/operators/PolyMesh/Skin.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r, n) {
            if (!e || !e.skinning)
                return e;
            var i = e.skinning
              , a = i.applyTransforms(e.positions.values, t, r, n)
              , s = new o.default({
                faceRangeOffsets: e.faceRangeOffsets,
                faceValueIndices: e.positions.faceValueIndices,
                values: a
            })
              , l = new u.default(e);
            return l.positions = s,
            l
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! ../../polyMesh/geometric/model/PolyMap */
        10)
          , o = n(a)
          , s = r(/*! ../../polyMesh/geometric/model/PolyMesh */
        12)
          , u = n(s)
          , l = {
            schema: {
                boneNodeList: {
                    type: "NodeList",
                    label: "Select Bones",
                    plug: "Bone"
                },
                optionalRootBone: {
                    type: "Node",
                    label: "Optional Root Bone",
                    defaultValue: null,
                    filter: function(e) {
                        return e.isBone()
                    }
                }
            },
            update: function(e, t, r) {
                var n = r.node
                  , a = r.getWorldTransform
                  , o = a(n.id)
                  , s = e.boneNodeList
                  , u = e.optionalRootBone
                  , l = -1;
                if (0 === s.length)
                    return t;
                var c = s.map(function(e) {
                    return a(e)
                });
                if (u)
                    for (var h = 0, f = s.length; h < f; h++) {
                        var d = s[h];
                        if (d == u) {
                            l = h;
                            break
                        }
                    }
                var p = t.mesh
                  , m = o;
                t.mesh = i(p, m, c, l)
            }
        };
        t.default = l
    }
    , /*!***************************************************!*\
  !*** ./src/operators/PolyMesh/SortFacesByAxis.js ***!
  \***************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/operator/sortFacesByAxis */
        213)
          , a = n(i)
          , o = {
            schema: {
                axis: {
                    label: "Direction",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 1,
                        y: 1,
                        z: 0
                    },
                    animatable: !0
                }
            },
            update: function(e, t, r) {
                var n = (r.store,
                e.axis.normalize())
                  , i = t.mesh;
                t.mesh = (0,
                a.default)(i, n)
            }
        };
        t.default = o
    }
    , /*!******************************************!*\
  !*** ./src/operators/PolyMesh/Sphere.js ***!
  \******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Sphere */
        222)
          , a = n(i)
          , o = {
            schema: {
                radius: {
                    label: "Radius",
                    type: "Number",
                    defaultValue: .5,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                widthSegments: {
                    label: "Longitudinal Segments",
                    type: "Integer",
                    defaultValue: 24,
                    minValue: 3,
                    maxValue: 200,
                    step: 1,
                    animatable: !0
                },
                heightSegments: {
                    label: "Latitudinal Segments",
                    type: "Integer",
                    defaultValue: 24,
                    minValue: 3,
                    maxValue: 200,
                    step: 1,
                    animatable: !0
                },
                phiStart: {
                    label: "Phi Start",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                phiLength: {
                    label: "Phi Length",
                    type: "Number",
                    defaultValue: 360,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                thetaStart: {
                    label: "Theta Start",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 180,
                    step: 10,
                    animatable: !0
                },
                thetaLength: {
                    label: "Theta Length",
                    type: "Number",
                    defaultValue: 180,
                    minValue: 0,
                    maxValue: 180,
                    step: 10,
                    animatable: !0
                }
            },
            update: function(e, t) {
                var r = e.radius
                  , n = e.widthSegments
                  , i = e.heightSegments
                  , o = e.phiStart
                  , s = e.phiLength
                  , u = e.thetaStart
                  , l = e.thetaLength;
                t.mesh = (0,
                a.default)(r, n, i, o, s, u, l)
            }
        };
        t.default = o
    }
    , /*!*****************************************!*\
  !*** ./src/operators/PolyMesh/Torus.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../polyMesh/geometric/primitives/Torus */
        223)
          , a = n(i)
          , o = {
            schema: {
                radius: {
                    label: "Radius",
                    type: "Number",
                    defaultValue: .3,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                tube: {
                    label: "Tube Radius",
                    type: "Number",
                    defaultValue: .2,
                    minValue: 0,
                    step: .1,
                    animatable: !0
                },
                radialSegments: {
                    label: "Longitudinal Segments",
                    type: "Integer",
                    defaultValue: 24,
                    minValue: 3,
                    step: 1,
                    animatable: !0
                },
                tubularSegments: {
                    label: "Latitudinal Segments",
                    type: "Integer",
                    defaultValue: 24,
                    minValue: 3,
                    step: 1,
                    animatable: !0
                },
                phiStart: {
                    label: "Phi Start",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                phiLength: {
                    label: "Phi Length",
                    type: "Number",
                    defaultValue: 360,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                thetaStart: {
                    label: "Theta Start",
                    type: "Number",
                    defaultValue: 0,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                },
                thetaLength: {
                    label: "Theta Length",
                    type: "Number",
                    defaultValue: 360,
                    minValue: 0,
                    maxValue: 360,
                    step: 10,
                    animatable: !0
                }
            },
            update: function(e, t) {
                var r = e.radius
                  , n = e.tube
                  , i = e.radialSegments
                  , o = e.tubularSegments
                  , s = e.phiStart
                  , u = e.phiLength
                  , l = e.thetaStart
                  , c = e.thetalength;
                t.mesh = (0,
                a.default)(r, n, i, o, s, u, l, c)
            }
        };
        t.default = o
    }
    , /*!*****************************************************!*\
  !*** ./src/operators/PolyMesh/TransformVertices.js ***!
  \*****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""
              , t = e.split(",")
              , r = []
              , n = void 0
              , i = void 0
              , a = void 0
              , o = void 0
              , u = void 0;
            for (n = 0; n < t.length; n++)
                if (u = t[n],
                u.indexOf("-") !== -1) {
                    var l = u.split("-")
                      , c = (0,
                    s.default)(l, 2);
                    for (a = c[0],
                    o = c[1],
                    a = Number(a),
                    o = Number(o),
                    i = a; i <= o; i++)
                        r.push(i)
                } else
                    r.push(Number(u));
            return r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/helpers/slicedToArray */
        39)
          , s = i(o)
          , u = (r(/*! immutable */
        11),
        r(/*! three */
        1))
          , l = n(u)
          , c = r(/*! ../../polyMesh */
        80)
          , h = {
            schema: {
                translation: {
                    label: "Translation",
                    type: "Vec3",
                    step: .1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0
                },
                rotation: {
                    label: "Rotation",
                    type: "Vec3",
                    step: 1,
                    defaultValue: {
                        x: 0,
                        y: 0,
                        z: 0
                    },
                    animatable: !0,
                    hidden: !0
                },
                scale: {
                    label: "Scale",
                    type: "Vec3",
                    minValue: 1e-4,
                    step: .1,
                    defaultValue: {
                        x: 1,
                        y: 1,
                        z: 1
                    },
                    animatable: !0,
                    hidden: !0
                },
                updateNormals: {
                    label: "Update Normals",
                    type: "Boolean",
                    defaultValue: !0,
                    hidden: !0
                },
                vertexIndices: {
                    label: "Selection",
                    type: "String",
                    defaultValue: ""
                }
            },
            update: function(e, t) {
                var r = t.mesh;
                if (!r)
                    return t;
                var n = (Math.random(),
                c.Selection.Vertices,
                a(e.vertexIndices))
                  , i = new c.Selection(n,c.Selection.Vertices)
                  , o = new c.PolyMesh(r)
                  , s = new c.PolyMap(c.PolyMaps.resolveMap(r, "positions"))
                  , u = s.values.clone();
                s.values = u,
                c.PolyMaps.assignMap(o, "positions", s);
                for (var h = c.Selection.getIndices(r, c.Selection.Vertices, "positions", i), f = 0, d = h.length; f !== d; ++f) {
                    var p = h[f];
                    u.setAt(p, u.getAt(p, new l.Vector3).add(e.translation))
                }
                t.mesh = o
            }
        };
        t.default = h
    }
    , /*!*****************************************!*\
  !*** ./src/operators/PolyMesh/UVMap.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            t = t || {};
            var r = t.rotation.multiplyScalar(180 / Math.PI) || new d.Vector3
              , n = t.scale || new d.Vector3(1,1,1)
              , i = t.center || new d.Vector3
              , a = void 0 !== t.uvProjectionMode ? t.uvProjectionMode : 0
              , c = void 0 !== t.alignmentAxis ? t.alignmentAxis : 1
              , h = void 0 !== t.mapChannel ? t.mapChannel : "default"
              , f = void 0 !== t.uTile ? t.uTile : 1
              , p = void 0 !== t.vTile ? t.vTile : 1
              , g = (new d.Quaternion).setFromEuler((new d.Euler).setFromVector3(r, "ZYX"));
            if (t.worldSpace) {
                var y = new d.Vector3
                  , w = new d.Quaternion
                  , A = new d.Vector3
                  , b = (new d.Matrix4).getInverse(t.nodeTransform);
                b.decompose(A, w, y),
                n.multiply(y),
                g.premultiply(w)
            }
            for (var T = (new d.Matrix4).makeRotationFromQuaternion(g), _ = (new d.Matrix4).getInverse(T), E = e.faceRangeOffsets, S = e.positions.faceValueIndices, D = e.positions.values, N = new Uint32Array(S.length), I = new M.default(d.Vector2,S.length), L = new d.Vector3, C = new d.Vector3, O = new d.Vector3, j = new d.Vector2, R = 0, P = 0, z = 0, B = 1; B < E.length; B++) {
                P = E[B],
                O.multiplyScalar(0);
                for (var U = R; U < P; U++) {
                    var V = U + 1;
                    V >= P && (V = R),
                    D.getAt(S[U], L),
                    D.getAt(S[V], C),
                    O.x += (L.y - C.y) * (L.z + C.z),
                    O.y += (L.z - C.z) * (L.x + C.x),
                    O.z += (L.x - C.x) * (L.y + C.y)
                }
                O.normalize();
                for (var k = R; k < P; k++) {
                    switch (D.getAt(S[k], L),
                    L.sub(i),
                    L.applyMatrix4(_),
                    a) {
                    case 0:
                        s(L, c, n, j);
                        break;
                    case 1:
                        o(L, O, n, j);
                        break;
                    case 2:
                        u(L, c, n, j);
                        break;
                    case 3:
                        l(L, c, n, j);
                        break;
                    default:
                        j.set(0, 0)
                    }
                    1 !== f && (j.x *= f),
                    1 !== p && (j.y *= p),
                    N[k] = z,
                    I.setAt(z++, j)
                }
                R = P
            }
            var F = new m.default(e)
              , G = new v.default({
                faceRangeOffsets: E,
                faceValueIndices: N,
                values: I
            });
            return F.uvMaps || (F.uvMaps = new x.default),
            F.uvMaps.set(h, G),
            F
        }
        function o(e, t, r, n) {
            var i = 0
              , a = 0
              , o = e.x
              , s = e.y
              , u = e.z
              , l = Math.abs(t.x)
              , c = Math.abs(t.y)
              , h = Math.abs(t.z);
            return l >= c && l >= h && (i = -u / r.z + .5,
            a = s / r.y + .5),
            c >= l && c >= h && (i = o / r.x + .5,
            a = -u / r.z + .5),
            h >= l && h >= c && (i = o / r.x + .5,
            a = s / r.y + .5),
            t.x < 0 && (i = -i + 1),
            t.y < 0 && (i = -i + 1),
            t.z < 0 && (i = -i + 1),
            n.set(i, a),
            n
        }
        function s(e, t, r, n) {
            var i = 0 === t ? -e.z : e.x
              , a = 1 === t ? -e.z : e.y;
            return i = i / r.x + .5,
            a = a / r.y + .5,
            n.set(i, a),
            n
        }
        function u(e, t, r, n) {
            var i = void 0
              , a = void 0;
            switch (t) {
            case 0:
                i = c(e.z / r.z, e.x / r.x, -e.y / r.y),
                a = -e.x / r.x + .5;
                break;
            case 1:
                i = c(e.x / r.x, e.y / r.y, e.z / r.z),
                a = e.y / r.y + .5;
                break;
            case 2:
                i = c(-e.x / r.x, e.z / r.z, -e.y / r.y),
                a = -e.z / r.z + .5
            }
            return i /= 2 * Math.PI,
            n.set(i, a),
            n
        }
        function l(e, t, r, n) {
            var i = void 0
              , a = void 0
              , o = void 0;
            switch (t) {
            case 0:
                i = h(e.z / r.z, e.x / r.x, -e.y / r.y);
                break;
            case 1:
                i = h(e.x / r.x, -e.y / r.y, e.z / r.z);
                break;
            case 2:
                i = h(-e.x / r.x, e.z / r.z, -e.y / r.y)
            }
            return o = i.lon / (2 * Math.PI),
            a = .5 - i.lat / Math.PI,
            n.set(o, a),
            n
        }
        function c(e, t, r) {
            var n = void 0;
            return 0 === e && 0 === r ? n = 0 : (n = Math.atan2(e, r),
            n < 0 && (n += 2 * Math.PI)),
            n
        }
        function h(e, t, r) {
            var n = void 0
              , i = void 0;
            if (0 === e && 0 === r)
                n = 0,
                i = 0 !== t ? t < 0 ? -(Math.PI / 2) : Math.PI / 2 : 0;
            else {
                n = Math.atan2(e, r),
                n < 0 && (n += 2 * Math.PI);
                var a = Math.sqrt(e * e + r * r);
                i = Math.atan2(t, a)
            }
            return {
                lon: n,
                lat: i
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var f = (r(/*! immutable */
        11),
        r(/*! three */
        1))
          , d = i(f)
          , p = r(/*! ../../polyMesh/geometric/model/PolyMesh */
        12)
          , m = n(p)
          , g = r(/*! ../../polyMesh/geometric/model/PolyMap */
        10)
          , v = n(g)
          , y = r(/*! ../../polyMesh/generic/container/ObjectArrayView */
        7)
          , M = n(y)
          , w = r(/*! ../../polyMesh/generic/container/ObjectsByName */
        20)
          , x = n(w)
          , A = {
            schema: {
                mWidth: {
                    type: "Number",
                    label: "Width",
                    defaultValue: 1,
                    step: .1,
                    minValue: 0,
                    animatable: !0
                },
                mHeight: {
                    type: "Number",
                    label: "Height",
                    defaultValue: 1,
                    step: .1,
                    minValue: 0,
                    animatable: !0
                },
                mLength: {
                    type: "Number",
                    label: "Length",
                    defaultValue: 1,
                    step: .1,
                    minValue: 0,
                    animatable: !0
                },
                center: {
                    label: "Center",
                    type: "Vec3",
                    step: .1,
                    defaultValue: new d.Vector3(0,0,0),
                    animatable: !0
                },
                rotation: {
                    label: "Rotation",
                    type: "Vec3",
                    step: 1,
                    minValue: -360,
                    maxValue: 360,
                    defaultValue: new d.Vector3(0,0,0),
                    animatable: !0
                },
                uTile: {
                    label: "U Tile",
                    type: "Number",
                    step: .1,
                    defaultValue: 1,
                    animatable: !0
                },
                vTile: {
                    label: "V Tile",
                    type: "Number",
                    step: .1,
                    defaultValue: 1,
                    animatable: !0
                },
                uvProjectionMode: {
                    label: "Projection",
                    type: "Options",
                    display: "Radio",
                    values: [],
                    labels: ["Planar", "Box", "Cylindrical", "Spherical"],
                    defaultValue: 0
                },
                xAxis: {
                    label: "Align Local Axis",
                    type: "Options",
                    display: "Radio",
                    values: [],
                    labels: ["X", "Y", "Z", "Average Normals"],
                    defaultValue: 1
                },
                autoFit: {
                    label: "Auto Fit",
                    type: "Button"
                },
                autoAlign: {
                    label: "Auto Align",
                    type: "Button"
                },
                autoFitAlign: {
                    label: "Best Fit",
                    type: "Button"
                },
                autoCenter: {
                    label: "Auto Center",
                    type: "Button"
                },
                resetUVs: {
                    label: "Reset",
                    type: "Button"
                },
                worldRelative: {
                    label: "Project in World Space",
                    type: "Boolean",
                    defaultValue: !1
                }
            },
            update: function(e, t, r) {
                var n = r.getWorldTransform
                  , i = r.node
                  , o = t.mesh;
                if (!o)
                    return t;
                var s = {};
                s.uTile = e.uTile,
                s.vTile = e.vTile,
                s.uvProjectionMode = e.uvProjectionMode,
                s.alignmentAxis = e.xAxis,
                s.center = e.center,
                s.rotation = e.rotation,
                s.mapChannel = e.uvMapChannel,
                s.scale = new d.Vector3(e.mWidth,e.mHeight,e.mLength),
                s.nodeTransform = n(i.id),
                s.worldSpace = e.worldRelative,
                t.mesh = a(o, s)
            }
        };
        t.default = A
    }
    , /*!***********************************************!*\
  !*** ./src/operators/PolyMesh/UVTransform.js ***!
  \***********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i, a) {
            var o = new s.Matrix4;
            if (o.multiply((new s.Matrix4).makeTranslation(a.x, a.y, 0)),
            o.multiply((new s.Matrix4).makeRotationZ(s.Math.degToRad(e))),
            r)
                o.multiply((new s.Matrix4).makeScale(n.x, n.y, 0));
            else {
                var u = function(e) {
                    return 0 == e ? 1 : 1 / e
                };
                o.multiply((new s.Matrix4).makeScale(u(t.x), u(t.y), 0))
            }
            return o.multiply((new s.Matrix4).makeTranslation(-a.x, -a.y, 0)),
            o.multiply((new s.Matrix4).makeTranslation(i.x, i.y, 0)),
            o
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../polyMesh/geometric/model/PolyMesh */
        12)
          , l = n(u)
          , c = r(/*! ../../polyMesh/geometric/model/PolyMap */
        10)
          , h = n(c)
          , f = r(/*! ../../polyMesh/generic/container/ObjectArrayView */
        7)
          , d = n(f)
          , p = {
            Scale: 0,
            Tiling: 1
        }
          , m = {
            name: "UVTransform",
            label: "UV Transform",
            schema: {
                rotation: {
                    label: "Rotation",
                    type: "Number",
                    step: .1,
                    minValue: -360,
                    maxValue: 360,
                    defaultValue: 0,
                    animatable: !0
                },
                scaleMode: {
                    label: "Scale Mode",
                    type: "Options",
                    display: "Dropdown",
                    labels: ["Scale", "Tiling"],
                    values: [p.Scale, p.Tiling],
                    defaultValue: p.Scale
                },
                tiling: {
                    label: "Tiling",
                    type: "Vec2",
                    step: .1,
                    defaultValue: new s.Vector2(1,1),
                    animatable: !0
                },
                scale: {
                    label: "Scale",
                    type: "Vec2",
                    step: .1,
                    defaultValue: new s.Vector2(1,1),
                    animatable: !0
                },
                translation: {
                    label: "Translation",
                    type: "Vec2",
                    step: .1,
                    defaultValue: new s.Vector2(0,0),
                    animatable: !0
                },
                pivotCenter: {
                    label: "Pivot Center",
                    type: "Vec2",
                    step: .1,
                    defaultValue: new s.Vector2(0,0),
                    animatable: !0
                },
                uvMapChannel: {
                    label: "UV Channel",
                    type: "String",
                    defaultValue: "default"
                }
            },
            update: function(e, t) {
                var r = t.mesh;
                if (!r)
                    return t;
                var n = e.uvMapChannel || "default"
                  , i = r.uvMaps ? r.uvMaps.byName[n] : null;
                if (!i)
                    return t;
                for (var o = new s.Vector3, u = new s.Vector2, c = new d.default(s.Vector2,i.values.length), f = e.rotation, m = e.scaleMode, g = e.scale, v = e.tiling, y = e.translation, M = e.pivotCenter, w = a(f, v, m === p.Scale, g, y, M), x = 0; x < i.values.length; x++)
                    i.values.getAt(x, u),
                    o.set(u.x, u.y, 0),
                    o.applyMatrix4(w),
                    u.set(o.x, o.y),
                    c.setAt(x, u);
                var A = new l.default(r)
                  , b = new h.default({
                    faceRangeOffsets: r.faceRangeOffsets,
                    faceValueIndices: i.faceValueIndices,
                    values: c
                });
                A.uvMaps.set(n, b),
                t.mesh = A
            }
        };
        t.default = m
    }
    , /*!***********************************!*\
  !*** ./src/operators/Renderer.js ***!
  \***********************************/
    function(e, t) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = {
            schema: {
                format: {
                    type: "Options",
                    defaultValue: "jpeg",
                    values: ["jpeg", "png"],
                    labels: ["JPEG", "PNG"],
                    label: "Output Format"
                },
                v2renderer: {
                    type: "Boolean",
                    defaultValue: !1,
                    label: "v2 renderer"
                }
            }
        };
        t.default = {
            WebGLRenderer: r
        }
    }
    , /*!********************************!*\
  !*** ./src/operators/index.js ***!
  \********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ./makeAllOperators */
        123)
          , a = (n(i),
        r(/*! ./minimal */
        196))
          , o = n(a);
        t.default = o.default
    }
    , /*!*******************************************************!*\
  !*** ./src/operators/makeAllOperatorsNonImmutable.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            var r = t.withNone
              , n = (0,
            f.mapObjIndexed)(function(e, t) {
                return (0,
                f.mapObjIndexed)(function(e, r) {
                    return a(t, e, r)
                }, e)
            }, e);
            return r && (n.None = {
                NoOp: a("None", {
                    schema: {}
                }, "NoOp")
            }),
            n
        }
        function a(e, t, r) {
            var n = []
              , i = []
              , a = []
              , o = []
              , u = {}
              , c = (0,
            f.mapObjIndexed)(function(e, t) {
                var r = p.default[e.type] ? (0,
                h.default)({
                    type: e.type,
                    schema: e
                }, p.default[e.type](e)) : {
                    set: function(e) {
                        return e
                    }
                };
                return r.isFileReference && n.push(t),
                r.isNodeReference && (a.push(t),
                i.push(t)),
                r.isPlugReference && (u[t] = r.isPlugReference,
                i.push(t)),
                r.isReferenceList && o.push(t),
                r
            }, t.schema)
              , d = (0,
            l.default)(c);
            return {
                keys: d,
                referenceKeys: i,
                fileReferenceKeys: n,
                nodeReferenceKeys: a,
                nodeReferenceListKeys: o,
                plugReferences: u,
                environment: t.environment,
                getProperties: function() {
                    return c
                },
                typeOf: function(e) {
                    return t.schema[e] && t.schema[e].type
                },
                set: function(e, t, r) {
                    var n = c[t] ? c[t].set(r) : r
                      , i = c[t] && c[t].equals ? !c[t].equals(n, e[t]) : n !== e[t];
                    return i && (e[t] = c[t] && c[t].get ? c[t].get(n) : n),
                    i
                },
                export: function(t) {
                    return (0,
                    h.default)({}, t, {
                        name: r,
                        primitive: e
                    })
                },
                get: function(e, t) {
                    return c[t] && c[t].get ? c[t].get(e[t]) : e[t]
                },
                init: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
                      , r = arguments[2]
                      , n = {
                        type: e,
                        name: r || e
                    }
                      , i = !0
                      , a = !1
                      , o = void 0;
                    try {
                        for (var u, l = (0,
                        s.default)(d); !(i = (u = l.next()).done); i = !0) {
                            var h = u.value;
                            n[h] = c[h].set(t[h])
                        }
                    } catch (e) {
                        a = !0,
                        o = e
                    } finally {
                        try {
                            !i && l.return && l.return()
                        } finally {
                            if (a)
                                throw o
                        }
                    }
                    return n
                },
                update: function(e, r, n) {
                    var i = t.update ? t.update.call(t, e, r, n) : (0,
                    h.default)(r, e)
                      , a = i || r;
                    return a.nodeId || (a.nodeId = n.node.id),
                    a.id || (a.id = n.node.id),
                    a._v = n.node._v,
                    a
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , s = n(o)
          , u = r(/*! babel-runtime/core-js/object/keys */
        8)
          , l = n(u)
          , c = r(/*! babel-runtime/core-js/object/assign */
        2)
          , h = n(c);
        t.default = i;
        var f = r(/*! ramda */
        3)
          , d = r(/*! ./schemaTypes */
        124)
          , p = n(d)
    }
    , /*!**********************************!*\
  !*** ./src/operators/minimal.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ./makeAllOperators */
        123)
          , a = n(i)
          , o = r(/*! ./Annotation */
        111)
          , s = n(o)
          , u = r(/*! ./BinMesh */
        112)
          , l = n(u)
          , c = r(/*! ./Camera */
        113)
          , h = n(c)
          , f = r(/*! ./Environment */
        114)
          , d = n(f)
          , p = r(/*! ./Image */
        115)
          , m = n(p)
          , g = r(/*! ./Light */
        116)
          , v = n(g)
          , y = r(/*! ./Material */
        117)
          , M = n(y)
          , w = r(/*! ./Player */
        118)
          , x = n(w)
          , A = r(/*! ./PolyMesh */
        120)
          , b = n(A)
          , T = r(/*! ./Properties */
        121)
          , _ = n(T)
          , E = r(/*! ./Transform */
        122)
          , S = n(E)
          , D = {
            schema: {}
        }
          , N = {
            Bone: D
        }
          , I = {
            Null: D
        }
          , L = {
            Pass: D
        }
          , C = {
            Action: D,
            Mixer: D
        }
          , O = {
            "vray/create": D,
            WebGLRenderer: D
        }
          , j = {
            Timeline: D
        }
          , R = {
            GeneralRenderer: D
        }
          , P = {
            Viewport: D
        }
          , z = (0,
        a.default)({
            Annotation: s.default,
            BinMesh: l.default,
            Bone: N,
            Camera: h.default,
            Environment: d.default,
            GeneralRenderer: R,
            Light: v.default,
            Material: M.default,
            Mixer: C,
            Null: I,
            Pass: L,
            Player: x.default,
            PolyMesh: b.default,
            Properties: _.default,
            Renderer: O,
            Timeline: j,
            Transform: S.default,
            Image: m.default,
            Viewport: P
        }, {
            withNone: !0
        });
        t.default = z
    }
    , /*!*************************************!*\
  !*** ./src/operators/primitives.js ***!
  \*************************************/
    function(e, t, r) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.Color = t.Vec3 = t.Vec2 = t.OperatorReference = t.PlugReference = t.NodeReference = t.FileReference = void 0;
        var n = r(/*! immutable */
        11)
          , i = t.FileReference = (0,
        n.Record)({
            id: ""
        }, "FileReference")
          , a = t.NodeReference = (0,
        n.Record)({
            id: ""
        }, "NodeReference")
          , o = t.PlugReference = (0,
        n.Record)({
            id: "",
            plug: ""
        }, "PlugReference")
          , s = t.OperatorReference = (0,
        n.Record)({
            id: "",
            plug: "",
            index: 0
        }, "OperatorReference")
          , u = t.Vec2 = (0,
        n.Record)({
            x: 0,
            y: 0
        }, "Vec2")
          , l = t.Vec3 = (0,
        n.Record)({
            x: 0,
            y: 0,
            z: 0
        }, "Vec3")
          , c = t.Color = (0,
        n.Record)({
            r: 0,
            g: 0,
            b: 0
        }, "Color");
        t.default = {
            FileReference: i,
            NodeReference: a,
            PlugReference: o,
            OperatorReference: s,
            Vec2: u,
            Vec3: l,
            Color: c
        }
    }
    , /*!************************************************************!*\
  !*** ./src/polyMesh/generic/algorithm/GlobalCompaction.js ***!
  \************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            var r = e.length
              , n = o.default.sort(f.default.identity(r), e.newCompareAtIndicesStable())
              , i = 0
              , a = null
              , s = e.newCompareAtIndices();
            if (t)
                i = o.default.unique(n, s);
            else {
                a = new Uint32Array(r);
                for (var l = 0, c = 0, h = n[0], d = 1; d < r; ++d) {
                    var p = n[d];
                    if (0 !== s(p, h)) {
                        for (var m = c; m !== d; ++m)
                            a[n[m]] = h;
                        c = d,
                        h = p,
                        ++l !== d && (n[l] = p)
                    }
                }
                for (var g = c; g !== r; ++g)
                    a[n[g]] = h;
                i = l + 1
            }
            var v = new u.default(r).includeFromArray(n, 0, i).toIndexArray(i);
            if (null !== a) {
                var y = n
                  , M = f.default.inverse(v, null, y);
                f.default.apply(a, M)
            }
            this.targetToSourceMap = v,
            this.sourceToTargetMap = a
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../utility/Arrays */
        16)
          , o = n(a)
          , s = r(/*! ../container/BitSet */
        125)
          , u = n(s)
          , l = r(/*! ../container/ObjectArrayView */
        7)
          , c = n(l)
          , h = r(/*! ./IndexMappings */
        59)
          , f = n(h);
        i.prototype = {
            constructor: i,
            compactedValues: function(e) {
                for (var t = this.targetToSourceMap, r = t.length, n = new c.default(e.type,r), i = e.newRangeArray(), a = 0; a !== r; ++a)
                    e.rangeToArray(t[a], 1, i),
                    n.arrayToRange(i, a, 1);
                return n
            },
            indices: function(e) {
                return new Uint32Array(this.sourceToTargetMap)
            },
            transcribeIndices: function(e) {
                return f.default.apply(e, this.sourceToTargetMap)
            }
        }
    }
    , /*!*****************************************************!*\
  !*** ./src/polyMesh/generic/algorithm/MergeSort.js ***!
  \*****************************************************/
    function(e, t) {
        "use strict";
        function r(e, t) {
            this.ping = new e(t),
            this.pong = new e(t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r,
        r.apply = function(e) {
            var t = new r(e.constructor,e.length);
            t.sortRange(e, 0, e.length)
        }
        ,
        r.prototype = {
            constructor: r,
            sortRange: function(e, t, r) {
                var n = r - t;
                if (n <= 4)
                    return void (n >= 2 && this._handleShortRange(e, t, n));
                for (var i = e, a = t, o = r, s = this.ping, u = 0, l = 1, c = 2, h = !0; h; ) {
                    for (var f = (n + l - 1) / l >> 1, d = a, p = a + c, m = 0; m <= 1; ++m) {
                        for (var g = 1; g !== f; ++g,
                        d += l,
                        p += c)
                            for (var v = d + l, y = v, M = i[d], w = i[v], x = !0; x; )
                                if (w < M)
                                    if (s[u++] = w,
                                    ++v === p) {
                                        for (s[u++] = M; ++d !== y; )
                                            s[u++] = i[d];
                                        x = !1
                                    } else
                                        w = i[v];
                                else if (s[u++] = M,
                                ++d === y) {
                                    for (s[u++] = w; ++v !== p; )
                                        s[u++] = i[v];
                                    x = !1
                                } else
                                    M = i[d];
                        if (0 === m)
                            if (f = 2,
                            p > o)
                                p = o;
                            else if (p !== o)
                                for (var A = u + c, b = p; b !== o; ++b)
                                    s[A++] = i[b]
                    }
                    if (s !== e)
                        if (l = c,
                        c <<= 1,
                        i = s,
                        a = 0,
                        o = n,
                        c < n) {
                            var T = this.ping;
                            s = s === T ? this.pong : T,
                            u = 0
                        } else
                            s = e,
                            u = t;
                    else
                        h = !1
                }
            },
            _handleShortRange: function(e, t, r) {
                var n = e[t]
                  , i = e[t + 1];
                switch (r) {
                case 2:
                    i < n && (e[t] = i,
                    e[t + 1] = n);
                    break;
                case 3:
                    var a = e[t + 2];
                    if (i < n) {
                        var o = n;
                        n = i,
                        i = o
                    }
                    if (a < i) {
                        var s = i;
                        i = a,
                        a = s
                    }
                    if (i < n) {
                        var u = n;
                        n = i,
                        i = u
                    }
                    e[t] = n,
                    e[t + 1] = i,
                    e[t + 2] = a;
                    break;
                case 4:
                    var l = e[t + 2]
                      , c = e[t + 3];
                    if (i < n) {
                        var h = n;
                        n = i,
                        i = h
                    }
                    if (c < l) {
                        var f = l;
                        l = c,
                        c = f
                    }
                    if (l < n) {
                        var d = n;
                        n = l,
                        l = d
                    }
                    if (c < i) {
                        var p = i;
                        i = c,
                        c = p
                    }
                    if (l < i) {
                        var m = i;
                        i = l,
                        l = m
                    }
                    e[t] = n,
                    e[t + 1] = i,
                    e[t + 2] = l,
                    e[t + 3] = c
                }
            }
        }
    }
    , /*!**************************************************!*\
  !*** ./src/polyMesh/generic/utility/polyfill.js ***!
  \**************************************************/
    function(e, t) {
        "use strict";
        [Uint32Array, Int32Array, Uint8Array, Int8Array].forEach(function(e) {
            e.prototype.fill || Object.defineProperty(e.prototype, "fill", {
                value: function(e, t, r) {
                    t = t || 0,
                    r = r || this.length;
                    for (var n = t; n < r; n++)
                        this[n] = e;
                    return this
                }
            }),
            e.prototype.slice || Object.defineProperty(e.prototype, "slice", {
                value: function(e, t) {
                    for (var r = void 0 === e ? 0 : e, n = void 0 === t ? this.length : t, i = n - r, a = new this.constructor(i), o = 0; r < n; )
                        a[o] = this[r],
                        ++o,
                        ++r;
                    return a
                }
            }),
            e.prototype.sort || Object.defineProperty(e.prototype, "sort", {
                value: function(e) {
                    function t(t, r) {
                        return t !== t && r !== r ? 0 : t !== t ? 1 : r !== r ? -1 : void 0 !== e ? e(t, r) : t < r ? -1 : t > r ? 1 : 0
                    }
                    return Array.prototype.sort.call(this, t)
                }
            })
        })
    }
    , /*!***************************************************************!*\
  !*** ./src/polyMesh/geometric/algorithm/ImportConversions.js ***!
  \***************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ../../generic/utility/Arrays */
        16)
          , a = n(i)
          , o = r(/*! ../../generic/algorithm/GlobalCompaction */
        198)
          , s = n(o)
          , u = {
            collapsePositions: function(e, t) {
                var r = new s.default(e)
                  , n = r.compactedValues(e);
                return t && r.transcribeIndices(t),
                n
            },
            collapseMapVertexValues: function(e, t) {
                for (var r = e.positions.updateInverseIndex(), n = (e.faceRangeOffsets,
                r.faceValueIndices), i = r.faceRangeOffsets, o = -1, s = 0, u = r.valueFaceIndexOffsets, l = r.valueFaceIndices, c = t.values, h = c.data, f = c.elementSize, d = t.faceValueIndices, p = 0, m = e.getNumFaceVertices(); p !== m; ++p) {
                    var g = n[p]
                      , v = d[p]
                      , y = v * f;
                    p === s && (s = i[++o + 1]);
                    for (var M = u[g], w = u[g + 1], x = M; x !== w; ++x) {
                        var A = l[x];
                        if (A === o)
                            break;
                        var b = r.findValueIndexOffset(A, g)
                          , T = d[b];
                        T !== v && a.default.rangeEquals(h, y, h, T * f, f) && (d[p] = T)
                    }
                }
            }
        };
        t.default = u
    }
    , /*!************************************************************!*\
  !*** ./src/polyMesh/geometric/algorithm/RenderIndexing.js ***!
  \************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            for (var r = [], n = [], i = new o.default.Iterator(e); i.next(); ) {
                var a = i.element
                  , s = i.getId();
                t && t.indexOf(s) === -1 || (r.push(s),
                n.push({
                    map: a,
                    faceIndices: a.updateInverseIndex().valueFaceIndices,
                    facesOffset: 0
                }))
            }
            for (var u = e.getNumFaceVertices(), l = n.length, c = new Uint32Array(u), h = new Uint32Array(u * l), f = 0, d = 0, p = e.faceRangeOffsets, m = -1, g = 0, v = n[l - 1], y = v.faceIndices, M = l - 2, w = 0; w !== u; ++w) {
                w === g && (g = p[++m + 1]);
                for (var x = !0, A = 0, b = 0; b !== l; ++b) {
                    var T = n[b]
                      , a = T.map
                      , _ = a.faceValueIndices[w];
                    if (h[f + b] = _,
                    x) {
                        var E = a.valueFaceIndexOffsets[_]
                          , S = a.valueFaceIndices[E];
                        T.facesOffset = E,
                        x = S !== m
                    }
                }
                if (x) {
                    var D = v.facesOffset
                      , N = 0
                      , I = !0;
                    do {
                        N = y[D++],
                        I = N !== m,
                        x = I;
                        for (var b = M; I && b !== -1; --b) {
                            for (var T = n[b], L = T.facesOffset, C = T.faceIndices, O = C[L]; O < N; )
                                O = C[++L];
                            O !== N && (I = !1),
                            O === m ? x = !1 : T.facesOffset = L
                        }
                    } while (x && !I);x = I,
                    A = N
                }
                if (x) {
                    var j = n[0].map
                      , R = j.findValueIndexOffset(A, j.faceValueIndices[w])
                      , P = c[R];
                    c[w] = P
                } else
                    c[w] = d++,
                    f += l
            }
            this.mesh = e,
            this.mapIds = r,
            this.renderIndices = c,
            this.valueIndices = h.slice(0, f),
            this.numVertices = d
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../model/PolyMaps */
        45)
          , o = n(a);
        i.prototype = {
            constructor: i,
            getMapValues: function(e, t) {
                var r = this.mapIds
                  , n = r.indexOf(e)
                  , i = this.numVertices
                  , a = this.valueIndices;
                if (n === -1)
                    throw Error("Map with id '" + e + "' not found!");
                var s = o.default.resolveMap(this.mesh, e)
                  , u = s.values;
                if (t.length < i)
                    throw Error("Data won't fit!");
                for (var l = n, c = r.length, h = new t.type, f = 0; f !== i; ++f) {
                    var d = a[l + f * c];
                    t.setAt(f, u.getAt(d, h))
                }
            }
        }
    }
    , /*!**************************************************!*\
  !*** ./src/polyMesh/geometric/model/Skinning.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e) {
            this.positionSkinRange = e.positionSkinRange,
            this.skinWeights = e.skinWeights,
            this.skinBoneIndices = e.skinBoneIndices,
            this.poseSkinToPoseBoneTransform = e.poseSkinToPoseBoneTransform
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u);
        a.prototype = {
            constructor: a,
            applyTransforms: function(e, t, r, n) {
                return this.deform(this.createFinalTransforms(t, r, n), e)
            },
            createFinalTransforms: function(e, t, r) {
                var n = this.poseSkinToPoseBoneTransform
                  , i = (new s.Matrix4).getInverse(e, !0)
                  , a = new Array(n.length);
                if ((new s.Matrix4).identity(),
                0 === n.length)
                    return a;
                var o = void 0
                  , u = void 0
                  , l = void 0;
                r > -1 && (o = t[r],
                u = (new s.Matrix4).getInverse(o, !0),
                l = (new s.Matrix4).getInverse(n.getAt(r), !0));
                for (var c = new s.Matrix4, h = new s.Matrix4, f = (new s.Matrix4,
                0), d = n.length; f < d; f++) {
                    var p = t[f];
                    r > -1 ? (c.multiplyMatrices(u, p),
                    h.multiplyMatrices(l, c)) : h.multiplyMatrices(i, p),
                    a[f] = (new s.Matrix4).multiplyMatrices(h, n.getAt(f))
                }
                return a
            },
            deform: function(e, t) {
                for (var r = this.positionSkinRange, n = this.skinWeights, i = this.skinBoneIndices, a = new l.default(s.Vector3,t.length), o = new s.Vector3, u = new s.Vector3, c = 0; c < t.length; c++) {
                    t.getAt(c, o),
                    u.multiplyScalar(0);
                    for (var h = r[c]; h < r[c + 1]; h++)
                        t.getAt(c, o),
                        o.applyMatrix4(e[i[h]]),
                        o.multiplyScalar(n[h]),
                        u.addVectors(u, o);
                    r[c + 1] - r[c] === 0 && u.copy(o),
                    a.setAt(c, u)
                }
                return a
            }
        }
    }
    , /*!***********************************************************************!*\
  !*** ./src/polyMesh/geometric/model/adjacency/EdgeVertexAdjacency.js ***!
  \***********************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            this.polyMap = e,
            this.edgeHighVertexIndices = null,
            this.edgePivotRangeOffsets = null,
            this.edgeVertices = null,
            this._compactEdgeLowToHighMap(this._buildEdgeLowToHighMap()),
            this._inverseMapping()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../../generic/algorithm/MergeSort */
        199)
          , o = n(a)
          , s = r(/*! ../../../generic/utility/Arrays */
        16)
          , u = n(s);
        i.prototype = {
            constructor: i,
            getNumEdges: function() {
                return this.edgeHighVertexIndices.length
            },
            findEdgeId: function(e, t) {
                var r = e
                  , n = t;
                n < r && (r = t,
                n = e);
                var i = this.edgePivotRangeOffsets;
                return u.default.binarySearch(this.edgeHighVertexIndices, n, i[r], i[r + 1])
            },
            getVerticesForEdge: function(e) {
                return {
                    v: this.edgeVertices[2 * e],
                    vNext: this.edgeVertices[2 * e + 1]
                }
            },
            _inverseMapping: function() {
                for (var e = this.getNumEdges(), t = new Uint32Array(2 * e), r = 0; r < this.edgePivotRangeOffsets.length - 1; r++)
                    for (var n = this.edgePivotRangeOffsets[r], i = this.edgePivotRangeOffsets[r + 1], a = n; a <= i; a++) {
                        var o = this.edgeHighVertexIndices[a];
                        t[2 * a + 0] = r,
                        t[2 * a + 1] = o
                    }
                this.edgeVertices = t
            },
            _buildEdgeLowToHighMap: function() {
                for (var e = this.polyMap.faceRangeOffsets, t = this.polyMap.faceValueIndices, r = this.polyMap.values.length, n = new Uint32Array(r + 2), i = n.subarray(2), a = e[0], o = 0, s = 1, l = e.length; s !== l; ++s) {
                    for (var c = e[s], h = t[c - 1], f = a; f !== c; ++f) {
                        var d = t[f]
                          , p = d < h ? d : h
                          , m = ++i[p];
                        m > o && (o = m),
                        h = d
                    }
                    a = c
                }
                u.default.accumulate(i);
                var g = n.subarray(1)
                  , v = new Uint32Array(g[r]);
                a = e[0];
                for (var y = 1, M = e.length; y !== M; ++y) {
                    for (var w = e[y], x = t[w - 1], A = a; A !== w; ++A) {
                        var b = t[A]
                          , T = x
                          , _ = b;
                        _ < T && (T = b,
                        _ = x),
                        v[g[T]++] = _,
                        x = b
                    }
                    a = w
                }
                return this.edgePivotRangeOffsets = n,
                this.edgeHighVertexIndices = v,
                o
            },
            _compactEdgeLowToHighMap: function(e) {
                for (var t = this.edgePivotRangeOffsets, r = this.edgeHighVertexIndices, n = new o.default(Uint32Array,e), i = this.polyMap.values.length + 1, a = 0, s = 0, l = 0, c = 1; c !== i; ++c) {
                    if (a = t[c],
                    s !== a) {
                        n.sortRange(r, s, a);
                        var h = r[s];
                        r[l++] = h;
                        for (var f = s + 1; f < a; ++f) {
                            var d = r[f];
                            d !== h && (r[l++] = d,
                            h = d)
                        }
                    }
                    t[c] = l,
                    s = a
                }
                this.edgeHighVertexIndices = u.default.slice(r, 0, l),
                this.edgePivotRangeOffsets = t.subarray(0, i)
            }
        }
    }
    , /*!*********************************************************************!*\
  !*** ./src/polyMesh/geometric/model/adjacency/FaceEdgeAdjacency.js ***!
  \*********************************************************************/
    function(e, t) {
        "use strict";
        function r(e) {
            this.polyMap = e,
            this.faceEdgeIndices = null,
            this.edgeFaceCounts = null,
            this.edgeFaceIndices = null,
            this._compute()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r,
        r.prototype = {
            constructor: r,
            getEdgeIdFromFaceValueIndex: function(e) {
                return this.faceEdgeIndices[e]
            },
            getNumFacesForEdgeId: function(e) {
                return this.edgeFaceCounts[e]
            },
            getFaceForEdgeId: function(e, t) {
                return this.edgeFaceIndices[2 * e + t]
            },
            checkValidity: function() {
                for (var e = !0, t = 0; t < this.edgeFaceCounts.length; t++)
                    this.edgeFaceCounts[t] > 2 && (e = !1);
                return e
            },
            _compute: function() {
                for (var e = this.polyMap, t = e.edgeVertexAdjacency, r = e.faceRangeOffsets, n = e.faceValueIndices, i = t.edgeHighVertexIndices.length, a = new Uint32Array(i), o = new Uint32Array(2 * i), s = new Uint32Array(n.length), u = 0; u < r.length - 1; u++)
                    for (var l = r[u], c = r[u + 1], h = c - l, f = n[l], d = 0; d < h; d++) {
                        var p = f;
                        f = n[l + (d + 1) % h];
                        var m = t.findEdgeId(p, f)
                          , g = l + d;
                        s[g] = m,
                        o[2 * m + a[m]] = u,
                        a[m]++
                    }
                return this.faceEdgeIndices = s,
                this.edgeFaceCounts = a,
                this.edgeFaceIndices = o,
                this
            }
        }
    }
    , /*!*********************************************************************!*\
  !*** ./src/polyMesh/geometric/model/adjacency/FaceFaceAdjacency.js ***!
  \*********************************************************************/
    function(e, t) {
        "use strict";
        function r(e) {
            this.polyMap = e,
            this.faceFaceCounts = null,
            this.faceFaceIndices = null,
            this._compute()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r,
        r.prototype = {
            constructor: r,
            getAdjacentFaces: function(e) {
                for (var t = this.faceFaceCounts[e + 1] - this.faceFaceCounts[e], r = new Uint32Array(t), n = this.faceFaceCounts[e], i = 0; n < this.faceFaceCounts[e + 1]; n++,
                i++)
                    r[i] = this.faceFaceIndices[n];
                return r
            },
            adjacentFacesOnVertex: function e(t, r) {
                for (var n = this.getAdjacentFaces(t), i = this.polyMap.faceRangeOffsets, a = this.polyMap.faceValueIndices, e = [], o = 0; o < n.length; o++)
                    for (var s = i[n[o]]; s < i[n[o] + 1]; s++)
                        if (a[s] === r) {
                            e.push(n[o]);
                            break
                        }
                return e
            },
            _compute: function() {
                for (var e = this.polyMap.faceRangeOffsets, t = (this.polyMap.faceValueIndices,
                this.polyMap.faceEdgeAdjacency), r = new Uint32Array(e.length), n = [], i = 0; i < e.length - 1; i++) {
                    for (var a = [], o = e[i]; o < e[i + 1]; o++) {
                        var s = t.getEdgeIdFromFaceValueIndex(o)
                          , u = t.getNumFacesForEdgeId(s);
                        if (u > 1) {
                            var l = t.getFaceForEdgeId(s, 0);
                            l === i && (l = t.getFaceForEdgeId(s, 1)),
                            a.push(l)
                        }
                    }
                    r[i + 1] = r[i] + a.length,
                    n.push.apply(n, a)
                }
                return this.faceFaceCounts = r,
                this.faceFaceIndices = Uint32Array.from(n),
                this
            }
        }
    }
    , /*!******************************************************************!*\
  !*** ./src/polyMesh/geometric/model/adjacency/ValueAdjacency.js ***!
  \******************************************************************/
    function(e, t) {
        "use strict";
        function r(e) {
            this.polyMap = e,
            this._compute()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r,
        r.prototype = {
            constructor: r,
            getNumEdgesForVertex: function(e) {
                var t = this.valueEdgeOffsets[e]
                  , r = this.valueEdgeOffsets[e + 1]
                  , n = r - t;
                return n
            },
            getEdgeForVertexId: function(e, t) {
                var r = this.valueEdgeOffsets[e];
                return this.valueEdgeIndices[r + t]
            },
            getAdjacentValues: function(e) {
                for (var t = this.polyMap.edgeVertexAdjacency, r = [], n = this.getNumEdgesForVertex(e), i = 0; i < n; i++) {
                    var a = this.getEdgeForVertexId(e, i)
                      , o = t.getVerticesForEdge(a)
                      , s = o.v === e ? o.vNext : o.v;
                    r.push(s)
                }
                return r
            },
            getAdjacentFaceValuesIndicesOnFace: function(e, t) {
                var r = []
                  , n = this.polyMap.faceRangeOffsets[t]
                  , i = this.polyMap.faceRangeOffsets[t + 1]
                  , a = i - n;
                if (a < 3)
                    return r;
                var o = e === i - 1 ? n : e + 1
                  , s = e === n ? i - 1 : e - 1;
                return r.push(s),
                r.push(o),
                r
            },
            getNumFacesForVertex: function(e) {
                var t = this.valueFaceOffsets[e]
                  , r = this.valueFaceOffsets[e + 1]
                  , n = r - t;
                return n
            },
            getFaceForVertexId: function(e, t) {
                var r = this.valueFaceOffsets[e];
                return this.valueFaceIndices[r + t]
            },
            _compute: function() {
                for (var e = this.polyMap, t = (e.faceRangeOffsets,
                e.faceValueIndices,
                e.edgeVertexAdjacency), r = new Uint32Array(e.values.length), n = new Uint32Array(e.values.length), i = t.getNumEdges(), a = new Uint8Array(i), o = 0; o < e.faceRangeOffsets.length - 1; o++)
                    for (var s = e.faceRangeOffsets[o], u = e.faceRangeOffsets[o + 1], l = u - s, c = e.faceValueIndices[s], h = 0; h < l; h++) {
                        var f = c;
                        c = e.faceValueIndices[s + (h + 1) % l];
                        var d = t.findEdgeId(f, c);
                        r[f]++,
                        0 === a[d] && (a[d] = 1,
                        n[f]++,
                        n[c]++)
                    }
                for (var p = 0, m = 0, g = new Uint32Array(r.length + 1), v = new Uint32Array(n.length + 1), y = 0; y < r.length; y++)
                    g[y] = p,
                    p += r[y],
                    r[y] = 0,
                    v[y] = m,
                    m += n[y],
                    n[y] = 0;
                g[r.length] = p,
                v[n.length] = m;
                for (var M = new Uint32Array(p), w = new Uint32Array(m), x = 0; x < e.faceRangeOffsets.length - 1; x++)
                    for (var A = e.faceRangeOffsets[x], b = e.faceRangeOffsets[x + 1], T = b - A, _ = e.faceValueIndices[A], E = 0; E < T; E++) {
                        var S = _;
                        _ = e.faceValueIndices[A + (E + 1) % T];
                        var D = t.findEdgeId(S, _);
                        M[g[S] + r[S]++] = x,
                        1 === a[D] && (a[D] = 2,
                        w[v[S] + n[S]++] = D,
                        w[v[_] + n[_]++] = D)
                    }
                this.valueFaceOffsets = g,
                this.valueFaceIndices = M,
                this.valueEdgeOffsets = v,
                this.valueEdgeIndices = w
            }
        }
    }
    , /*!**********************************************************!*\
  !*** ./src/polyMesh/geometric/operator/cleanPolyMesh.js ***!
  \**********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return (0,
            c.default)((0,
            u.default)((0,
            o.default)(e)))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../operator/removeDuplicateValues */
        132)
          , o = n(a)
          , s = r(/*! ../operator/removeDuplicateIndices */
        210)
          , u = n(s)
          , l = r(/*! ../operator/removeInvalidSurfaces */
        211)
          , c = n(l)
          , h = r(/*! ../operator/removeDuplicateNormals */
        131);
        n(h)
    }
    , /*!***************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/polyMeshValidation.js ***!
  \***************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (d("positions", e.positions.values, function(e) {
                return !c(e)
            }),
            e.normalMap && d("normalMap", e.normalMap.values, function(e) {
                return !c(e) && !h(e)
            }),
            e.uvMaps)
                for (var t = (new s.default,
                0); t < e.uvMaps.length; t++) {
                    var r = e.uvMaps.namesByIndex[t];
                    d("uvMap[" + r + "]", e.uvMaps.byName[r].values, function(e) {
                        return !f(e)
                    })
                }
            return e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , o = (n(a),
        r(/*! ../../generic/container/ObjectsByName */
        20))
          , s = n(o)
          , u = r(/*! ../model/PolyMap */
        10)
          , l = (n(u),
        r(/*! ../model/PolyMesh */
        12))
          , c = (n(l),
        function(e) {
            return isNaN(e.x) || isNaN(e.y) || isNaN(e.z)
        }
        )
          , h = function(e) {
            return 0 === e.length()
        }
          , f = function(e) {
            return isNaN(e.x) || isNaN(e.y)
        }
          , d = function(e, t, r) {
            for (var n = new t.type, i = new t.type, a = 0; a < t.length; a++)
                t.getAt(a, n),
                r(n) || t.setAt(a, i)
        }
    }
    , /*!*******************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/removeDuplicateIndices.js ***!
  \*******************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t) {
            var r = t || !1
              , n = new Uint32Array(e.positions.faceRangeOffsets)
              , i = new Uint32Array(e.positions.faceValueIndices)
              , a = new Uint32Array(e.normalMap.faceValueIndices)
              , o = []
              , u = [];
            if (e.uvMaps)
                for (var c = 0; c < e.uvMaps.length; c++)
                    o.push(e.uvMaps.namesByIndex[c]),
                    u.push(new Uint32Array(e.uvMaps.byName[o[c]].faceValueIndices));
            for (var h = 0, f = 0, p = 0, m = 0, v = 0, M = new l.default, w = 1; w < n.length; w++) {
                p = n[w],
                m = p - f,
                v = m,
                M.clear();
                for (var x = 0; x < m; x++)
                    M.set(i[f + x], f + x);
                if (v = M.size,
                1 === v)
                    r && m > 1 && console.log("Face " + w + " has only 1 unique value. Reducing to a point..."),
                    n[w] = n[w - 1] + 1,
                    i[h++] = i[f];
                else {
                    r && 2 === m && console.log("Face " + w + " has only 2 unique values. Reducing to a line..."),
                    n[w] = n[w - 1] + v;
                    var A = M.entries()
                      , b = void 0
                      , T = !0
                      , _ = !1
                      , E = void 0;
                    try {
                        for (var S, D = (0,
                        s.default)(A); !(T = (S = D.next()).done); T = !0) {
                            b = S.value,
                            a[h] = a[b[1]];
                            for (var N = 0; N < u.length; N++)
                                u[N][h] = u[N][b[1]];
                            i[h++] = b[0]
                        }
                    } catch (e) {
                        _ = !0,
                        E = e
                    } finally {
                        try {
                            !T && D.return && D.return()
                        } finally {
                            if (_)
                                throw E
                        }
                    }
                }
                f = p
            }
            r && console.log("" + i.length + " index values reduced to " + h + ", duplicates removed: " + (i.length - h));
            var I = new Uint32Array(i.subarray(0, h))
              , L = new Uint32Array(a.subarray(0, h))
              , C = new y.default({
                faceRangeOffsets: n,
                faceValueIndices: I,
                values: e.positions.values
            })
              , O = new g.default;
            O.positions = C,
            O.faceRangeOffsets = O.positions.faceRangeOffsets;
            var j = new y.default({
                faceRangeOffsets: O.faceRangeOffsets,
                faceValueIndices: L,
                values: e.normalMap.values
            });
            if (O.normalMap = j,
            e.uvMaps) {
                for (var R = new d.default, P = 0; P < e.uvMaps.length; P++) {
                    var z = e.uvMaps.namesByIndex[P]
                      , B = new y.default({
                        faceRangeOffsets: O.faceRangeOffsets,
                        faceValueIndices: u[P],
                        values: e.uvMaps.byName[z].values
                    });
                    R.set(z, B)
                }
                O.uvMaps = R
            }
            return O
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , s = i(o)
          , u = r(/*! babel-runtime/core-js/map */
        83)
          , l = i(u);
        t.default = a;
        var c = r(/*! three */
        1)
          , h = (n(c),
        r(/*! ../../generic/container/ObjectArrayView */
        7))
          , f = (i(h),
        r(/*! ../../generic/container/ObjectsByName */
        20))
          , d = i(f)
          , p = r(/*! ../../generic/container/ObjectBuffer */
        60)
          , m = (i(p),
        r(/*! ../model/PolyMesh */
        12))
          , g = i(m)
          , v = r(/*! ../model/PolyMap */
        10)
          , y = i(v)
    }
    , /*!******************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/removeInvalidSurfaces.js ***!
  \******************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            function r(e, t, r) {
                for (var n = r.withLogging || !1, i = new Uint32Array(e.faceRangeOffsets), a = new Uint32Array(e.faceValueIndices), o = e.values, s = 0, u = 0, l = 0, h = 1, f = 0, d = 1; d < i.length; d++) {
                    if (s = i[d],
                    l = s - u,
                    l > 2) {
                        i[h] = i[h - 1] + l,
                        h++;
                        for (var p = 0; p < l; p++)
                            a[f++] = a[u + p]
                    } else
                        n && console.log("Removed face " + d + " of size " + l);
                    u = s
                }
                var m = new Uint32Array(i.subarray(0, h))
                  , g = new Uint32Array(a.subarray(0, f))
                  , v = new c.default({
                    faceRangeOffsets: m,
                    faceValueIndices: g,
                    values: o
                });
                return v
            }
            var n = {
                withLogging: t
            }
              , i = (0,
            p.default)(e, r, n);
            return t && console.log("" + (e.faceRangeOffsets.length - 1) + " faces reduced to " + (i.faceRangeOffsets.length - 1) + ", faces removed: " + (e.faceRangeOffsets.length - i.faceRangeOffsets.length)),
            (0,
            f.default)(i).topologyChanged()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = (i(o),
        r(/*! ../../generic/container/ObjectsByName */
        20))
          , u = (n(s),
        r(/*! ../model/PolyMesh */
        12))
          , l = (n(u),
        r(/*! ../model/PolyMap */
        10))
          , c = n(l)
          , h = r(/*! ../operator/removeUnusedValues */
        212)
          , f = n(h)
          , d = r(/*! ./applyFunctionToPolyMap */
        79)
          , p = n(d)
    }
    , /*!***************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/removeUnusedValues.js ***!
  \***************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t) {
            for (var r = t || !1, n = new Uint32Array(e.positions.faceValueIndices), i = e.positions.values, a = new h.default(l.Vector3,i.length), o = new s.default, u = 0, c = 0, f = new l.Vector3, p = 0; p < n.length; p++)
                o.has(n[p]) ? c = o.get(n[p]) : (o.set(n[p], u),
                c = u,
                i.getAt(n[p], f),
                a.setAt(u, f),
                u++),
                n[p] = c;
            if (r && console.log("" + i.length + " values reduced to " + u + ", unused values removed: " + (i.length - u)),
            i.length === u)
                return e;
            var g = new h.default(l.Vector3,u);
            g.fromArray(a.toArray());
            var v = new m.default({
                faceRangeOffsets: e.faceRangeOffsets,
                faceValueIndices: n,
                values: g
            })
              , y = new d.default(e);
            return y.positions = v,
            y
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/map */
        83)
          , s = i(o);
        t.default = a;
        var u = r(/*! three */
        1)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , h = i(c)
          , f = r(/*! ../model/PolyMesh */
        12)
          , d = i(f)
          , p = r(/*! ../model/PolyMap */
        10)
          , m = i(p)
    }
    , /*!************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/sortFacesByAxis.js ***!
  \************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r) {
            function n(e, t, r) {
                for (var n = r.newFaceRangeOffsets, i = r.reMapping, a = e.faceRangeOffsets, o = e.faceValueIndices, s = new Uint32Array(o.length), u = 0, c = 0; c < i.length; c++)
                    for (var h = a[i[c]]; h < a[i[c] + 1]; h++)
                        s[u++] = o[h];
                var f = new l.default({
                    faceRangeOffsets: n,
                    faceValueIndices: s,
                    values: e.values
                });
                return f
            }
            var i = r || !1;
            if (!t || !e)
                return e;
            if (0 === t.x && 0 === t.y && 0 === t.z)
                return e;
            for (var a = e.faceRangeOffsets, o = new Uint32Array(e.faceRangeOffsets.length), u = new Uint32Array(e.positions.faceValueIndices), c = e.positions.values, f = [], d = [], p = new s.Vector3, m = new s.Vector3, g = 0; g < a.length - 1; g++) {
                f[g] = g;
                var v = a[g]
                  , y = a[g + 1];
                p.set(0, 0, 0);
                for (var M = v; M < y; M++)
                    c.getAt(u[M], m),
                    p.add(m);
                p.multiplyScalar(1 / (y - v)),
                d[g] = p.dot(t)
            }
            f.sort(function(e, t) {
                return d[t] - d[e]
            });
            for (var w = 0; w < f.length; w++)
                o[w + 1] = o[w] + (a[f[w] + 1] - a[f[w]]);
            if (i) {
                console.log("Face List [old][new]:");
                for (var x = 0; x < f.length; x++) {
                    for (var A = [], b = [], T = a[x]; T < a[x + 1]; T++)
                        A.push(u[T]);
                    for (var _ = a[f[x]]; _ < a[f[x] + 1]; _++)
                        b.push(u[_]);
                    console.log(A, b)
                }
            }
            var E = {
                newFaceRangeOffsets: o,
                reMapping: f
            };
            return (0,
            h.default)(e, n, E).topologyChanged()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../model/PolyMap */
        10)
          , l = n(u)
          , c = r(/*! ./applyFunctionToPolyMap */
        79)
          , h = n(c)
    }
    , /*!********************************************************!*\
  !*** ./src/polyMesh/geometric/operator/subdivision.js ***!
  \********************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            (0,
            p.default)(e);
            var r = (0,
            g.default)(e)
              , n = new Uint8Array(r.positions.faceValueIndices.length);
            if (r.normalMap && y(r.normalMap, n),
            r.edgeCreaseWeights)
                for (var i = r.positions.faceEdgeAdjacency, a = 0; a < i.faceEdgeIndices.length; a++) {
                    var o = i.faceEdgeIndices[a];
                    n[a] = n[a] || (r.edgeCreaseWeights[o] > 0 ? 1 : 0)
                }
            if (t && r.materialIds)
                for (var s = r.positions.faceEdgeAdjacency, l = 0; l < s.faceEdgeIndices.length; l++) {
                    var c = s.faceEdgeIndices[l];
                    2 === s.getNumFacesForEdgeId(c) && r.materialIds[s.getFaceForEdgeId(c, 0)] !== r.materialIds[s.getFaceForEdgeId(c, 1)] && (n[l] += 1)
                }
            var h = M(r.positions, n)
              , d = new f.default;
            if (d.positions = v(r.positions, null, n, h),
            d.faceRangeOffsets = d.positions.faceRangeOffsets,
            r.normalMap && (d.normalMap = v(r.normalMap, d.faceRangeOffsets, n, h)),
            r.uvMaps) {
                for (var m = new u.default, w = 0; w < r.uvMaps.length; w++) {
                    var x = r.uvMaps.namesByIndex[w]
                      , A = new Uint8Array(r.uvMaps.byName[x].faceValueIndices.length);
                    y(r.uvMaps.byName[x], A);
                    for (var b = M(r.uvMaps.byName[x], A), T = 0; T < b.length; T++)
                        b[T] = b[T] || h[T];
                    m.set(x, v(r.uvMaps.byName[x], d.faceRangeOffsets, A, b))
                }
                d.uvMaps = m
            }
            return d.topologyChanged(),
            d
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , o = n(a)
          , s = r(/*! ../../generic/container/ObjectsByName */
        20)
          , u = n(s)
          , l = r(/*! ../model/PolyMap */
        10)
          , c = n(l)
          , h = r(/*! ../model/PolyMesh */
        12)
          , f = n(h)
          , d = r(/*! ./polyMeshValidation */
        209)
          , p = n(d)
          , m = r(/*! ./removeDuplicateNormals */
        131)
          , g = n(m)
          , v = function(e, t, r, n) {
            for (var i = e.edgeVertexAdjacency, a = e.valueAdjacency, s = e.faceEdgeAdjacency, u = e.values, l = u.type, h = u.length, f = e.faceRangeOffsets, d = f.length - 1, p = e.faceValueIndices, m = i.getNumEdges(), g = p.length, v = new Uint8Array(e.values.length), y = 0; y < n.length; y++)
                v[p[y]] = n[y];
            if (!t) {
                t = new Uint32Array(g + 1);
                for (var M = 0; M < t.length; M++)
                    t[M] = 4 * M
            }
            for (var w = 4 * g, x = new Uint32Array(w), A = h, b = A + m, T = h + m + d, _ = new o.default(l,T), E = new Uint8Array(h), S = new Uint8Array(h), D = new Uint8Array(m), N = new Uint8Array(m), I = new l, L = new l, C = new l, O = new l, j = new l, R = new l, P = 0, z = new Uint8Array(m), B = new Uint8Array(h), U = 0; U < d; U++) {
                var V = f[U]
                  , k = f[U + 1]
                  , F = k - V
                  , G = p[V]
                  , Y = p[V + 1 % F]
                  , Q = i.findEdgeId(G, Y);
                I.multiplyScalar(0);
                for (var H = 0; H < F; H++) {
                    var W = G;
                    G = Y,
                    Y = p[V + (H + 2) % F];
                    var X = Q;
                    Q = i.findEdgeId(G, Y),
                    D[X]++,
                    S[W]++,
                    0 === N[X] && (N[X] = 1,
                    E[W]++,
                    E[G]++,
                    r[V + H] && (z[X] = 1,
                    B[W]++,
                    B[G]++)),
                    u.getAt(W, L),
                    I.add(L),
                    x[P++] = A + X,
                    x[P++] = G,
                    x[P++] = A + Q,
                    x[P++] = b + U
                }
                I.multiplyScalar(1 / F),
                _.setAt(b + U, I)
            }
            for (var q = 0; q < m; q++) {
                var Z = i.edgeVertices[2 * q]
                  , J = i.edgeVertices[2 * q + 1];
                u.getAt(Z, O),
                u.getAt(J, L),
                O.add(L);
                var K = 2
                  , $ = s.edgeFaceCounts[q];
                if (!(z[q] || 2 !== $ || v[Z] && v[J]))
                    for (var ee = 0; ee < $; ee++) {
                        var te = s.edgeFaceIndices[2 * q + ee];
                        _.getAt(b + te, L),
                        O.add(L),
                        K++
                    }
                O.multiplyScalar(1 / K),
                _.setAt(A + q, O)
            }
            for (var re = !0, ne = 0; ne < h; ne++) {
                u.getAt(ne, C);
                var ie = E[ne] !== S[ne];
                if (0 !== E[ne] && v[ne] < 1) {
                    var ae = a.valueEdgeOffsets[ne]
                      , oe = a.valueEdgeOffsets[ne + 1]
                      , se = oe - ae;
                    j.multiplyScalar(0);
                    var ue = 0;
                    if (re && ie || B[ne]) {
                        for (var le = 0; le < se; le++) {
                            var ce = a.valueEdgeIndices[ae + le];
                            if (z[ce]) {
                                var he = i.edgeVertices[2 * ce];
                                he === ne && (he = i.edgeVertices[2 * ce + 1]),
                                u.getAt(he, L),
                                j.add(L),
                                ue++
                            }
                        }
                        C.multiplyScalar(.75).add(j.multiplyScalar(.25 / ue))
                    } else {
                        for (var fe = 0; fe < se; fe++) {
                            var de = a.valueEdgeIndices[ae + fe]
                              , pe = i.edgeVertices[2 * de];
                            pe === ne && (pe = i.edgeVertices[2 * de + 1]),
                            u.getAt(pe, L),
                            j.add(L),
                            ue++
                        }
                        j.multiplyScalar(1 / (ue * ue));
                        var me = a.valueFaceOffsets[ne]
                          , ge = a.valueFaceOffsets[ne + 1]
                          , ve = ge - me;
                        R.multiplyScalar(0);
                        for (var ye = 0, Me = 0; Me < ve; Me++) {
                            var we = a.valueFaceIndices[me + Me];
                            _.getAt(b + we, L),
                            R.add(L),
                            ye++
                        }
                        R.multiplyScalar(1 / (ye * ye)),
                        C.multiplyScalar((ye - 2) / ye),
                        C.add(j),
                        C.add(R)
                    }
                }
                _.setAt(ne, C)
            }
            var xe = {
                faceRangeOffsets: t,
                faceValueIndices: x,
                values: _
            };
            return new c.default(xe)
        }
          , y = function(e, t) {
            for (var r = e.faceEdgeAdjacency, n = 0; n < r.faceEdgeIndices.length; n++) {
                var i = r.faceEdgeIndices[n];
                t[n] = 2 !== r.edgeFaceCounts[i] ? 1 : 0
            }
        }
          , M = function(e, t) {
            for (var r = e.edgeVertexAdjacency, n = new Uint8Array(e.faceValueIndices.length), i = new Uint8Array(e.values.length), a = new Uint8Array(r.getNumEdges()), o = 0; o < e.faceRangeOffsets.length - 1; o++)
                for (var s = e.faceRangeOffsets[o], u = e.faceRangeOffsets[o + 1], l = u - s, c = e.faceValueIndices[s], h = 0; h < l; h++) {
                    var f = c;
                    c = e.faceValueIndices[s + (h + 1) % l];
                    var d = r.findEdgeId(f, c);
                    0 === a[d] && (a[d] = 1,
                    t[s + h] && (i[f]++,
                    i[c]++))
                }
            for (var p = 0; p < n.length; p++) {
                var m = e.faceValueIndices[p];
                i[m] > 2 && (n[p] = 1)
            }
            return n
        }
    }
    , /*!************************************************************!*\
  !*** ./src/polyMesh/geometric/operator/triangulateMesh.js ***!
  \************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            function t(e, t, r) {
                var n = r.newFaceRangeOffsets
                  , i = r.triangulation
                  , a = new u.default(3 * i.numTriangles);
                i.translateIndices(e.faceValueIndices, a);
                var s = a.data;
                return new o.default({
                    faceRangeOffsets: n,
                    faceValueIndices: s,
                    values: e.values
                })
            }
            for (var r = new c.default(e), n = new Uint32Array(r.numTriangles + 1), i = 1; i < n.length; i++)
                n[i] = n[i - 1] + 3;
            var a = {
                newFaceRangeOffsets: n,
                triangulation: r
            };
            return (0,
            f.default)(e, t, a).topologyChanged()
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../model/PolyMap */
        10)
          , o = n(a)
          , s = r(/*! ../../generic/container/ScalarArrayView */
        78)
          , u = n(s)
          , l = r(/*! ../algorithm/SimpleFanTriangulation */
        130)
          , c = n(l)
          , h = r(/*! ./applyFunctionToPolyMap */
        79)
          , f = n(h)
    }
    , /*!**************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Box.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i, a) {
            function o(e) {
                p[O] = e,
                O++
            }
            function u(e) {
                g.setAt(j, e),
                j++
            }
            function c(e, t) {
                M.setAt(R, e),
                y.setAt(R, t),
                R++
            }
            n = Math.floor(n) || 1,
            i = Math.floor(i) || 1,
            a = Math.floor(a) || 1;
            var f = new Uint32Array(n * i * 2 + n * a * 2 + i * a * 2 + 1)
              , p = new Uint32Array(4 * (n * i * 2 + n * a * 2 + i * a * 2))
              , g = new l.default(s.Vector3,(n + 1) * (i + 1) * 2 + (n + 1) * (a + 1) * 2 + (i + 1) * (a + 1) * 2)
              , y = new l.default(s.Vector3,(n + 1) * (i + 1) * 2 + (n + 1) * (a + 1) * 2 + (i + 1) * (a + 1) * 2)
              , M = new l.default(s.Vector2,(n + 1) * (i + 1) * 2 + (n + 1) * (a + 1) * 2 + (i + 1) * (a + 1) * 2)
              , w = e / n
              , x = t / i
              , A = r / a
              , b = e / 2
              , T = t / 2
              , _ = r / 2
              , E = void 0
              , S = void 0
              , D = void 0
              , N = 0
              , I = new s.Vector3
              , L = new s.Vector3
              , C = new s.Vector2
              , O = 0;
            for (D = 0,
            E = 0; D < f.length; D++,
            E += 4)
                f[D] = E;
            for (D = 0; D < 2; D++) {
                for (S = 0; S < i; S++)
                    for (E = 0; E < n; E++)
                        o(N + S * (n + 1) + E),
                        o(N + S * (n + 1) + E + 1),
                        o(N + (S + 1) * (n + 1) + E + 1),
                        o(N + (S + 1) * (n + 1) + E);
                N += (n + 1) * (i + 1)
            }
            for (S = 0; S < 2; S++) {
                for (E = 0; E < n; E++)
                    for (D = 0; D < a; D++)
                        o(N + E * (a + 1) + D),
                        o(N + E * (a + 1) + D + 1),
                        o(N + (E + 1) * (a + 1) + D + 1),
                        o(N + (E + 1) * (a + 1) + D);
                N += (n + 1) * (a + 1)
            }
            for (E = 0; E < 2; E++) {
                for (D = 0; D < a; D++)
                    for (S = 0; S < i; S++)
                        o(N + D * (i + 1) + S),
                        o(N + D * (i + 1) + S + 1),
                        o(N + (D + 1) * (i + 1) + S + 1),
                        o(N + (D + 1) * (i + 1) + S);
                N += (a + 1) * (i + 1)
            }
            var j = 0
              , R = 0;
            for (D = -1; D < 2; D += 2)
                for (S = 0; S < i + 1; S++) {
                    var P = -1 * D * S * x + D * T;
                    for (E = 0; E < n + 1; E++) {
                        var z = E * w - b;
                        I.set(z, P, -1 * D * _),
                        u(I),
                        L.set(0, 0, -1 * D),
                        C.set(E / n, S / i),
                        c(C, L)
                    }
                }
            for (S = -1; S < 2; S += 2)
                for (E = 0; E < n + 1; E++) {
                    var B = -1 * E * S * w + S * b;
                    for (D = 0; D < a + 1; D++) {
                        var U = D * A - _;
                        I.set(B, -1 * S * T, U),
                        u(I),
                        L.set(0, -1 * S, 0),
                        C.set(E / n, D / a),
                        c(C, L)
                    }
                }
            for (E = -1; E < 2; E += 2)
                for (D = 0; D < a + 1; D++) {
                    var V = -1 * E * D * A + E * _;
                    for (S = 0; S < i + 1; S++) {
                        var k = S * x - T;
                        I.set(-1 * E * b, k, V),
                        u(I),
                        L.set(-1 * E, 0, 0),
                        C.set(D / a, S / i),
                        c(C, L)
                    }
                }
            var F = new m.default({
                faceRangeOffsets: f,
                faceValueIndices: p,
                values: g
            })
              , G = new m.default({
                faceRangeOffsets: f,
                faceValueIndices: p,
                values: y
            })
              , Y = new m.default({
                faceRangeOffsets: f,
                faceValueIndices: p,
                values: M
            })
              , Q = new h.default;
            Q.set("default", Y);
            var H = new d.default;
            return H.faceRangeOffsets = f,
            H.positions = F,
            H.normalMap = G,
            H.uvMaps = Q,
            (0,
            v.default)(H)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectsByName */
        20)
          , h = n(c)
          , f = r(/*! ../model/PolyMesh */
        12)
          , d = n(f)
          , p = r(/*! ../model/PolyMap */
        10)
          , m = n(p)
          , g = r(/*! ../operator/removeDuplicateValues */
        132)
          , v = n(g)
    }
    , /*!******************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Capsule.js ***!
  \******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i, a) {
            e = void 0 !== e ? e : 20,
            t = void 0 !== t ? t : 100,
            r = Math.max(1, Math.floor(r || 8)),
            n = Math.max(1, Math.floor(n || 8)),
            i = s.Math.clamp(i || 0, 0, 2 * Math.PI),
            a = s.Math.clamp(a || 2 * Math.PI, 0, 2 * Math.PI - i);
            for (var o = t / n, u = t / 2, c = 1 / r, f = new l.default(s.Vector3,n + 1 + 2 * (r + 1)), d = new l.default(s.Vector3,n + 1 + 2 * (r + 1)), p = new s.Vector3, m = new s.Vector3, g = 0, v = r; g <= v; g++) {
                var y = g * (Math.PI / 2) * c;
                p.set(e * Math.sin(y), -e * Math.cos(y) - u, 0),
                m.set(Math.sin(y), -Math.cos(y), 0),
                f.setAt(g, p),
                d.setAt(g, m.normalize())
            }
            m.set(1, 0, 0);
            for (var M = 0, w = n; M <= w; M++)
                p.set(e, M * o - u, 0),
                f.setAt(M + r + 1, p),
                d.setAt(M + r + 1, m);
            for (var x = 0, A = r; x <= A; x++) {
                var b = Math.PI / 2 + x * (Math.PI / 2) * c;
                p.set(e * Math.sin(b), -e * Math.cos(b) + u, 0),
                m.set(Math.sin(b), -Math.cos(b), 0),
                f.setAt(x + r + n + 2, p),
                d.setAt(x + r + n + 2, m.normalize())
            }
            var T = r < 3 ? 3 : r;
            return (0,
            h.default)(f, d, T, i, a)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ./Lathe */
        46)
          , h = n(c)
    }
    , /*!***************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Cone.js ***!
  \***************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i) {
            e = e || 50,
            t = Math.max(1, Math.floor(t || 8));
            var a = e / t
              , o = r / t;
            n = s.Math.clamp(n || 0, 0, 2 * Math.PI),
            i = s.Math.clamp(i || 2 * Math.PI, 0, 2 * Math.PI - n);
            for (var u = new l.default(s.Vector3,2 * (t + 1)), c = new l.default(s.Vector3,2 * (t + 1)), f = new s.Vector3(0,-1,0), d = new s.Vector3, p = 0, m = t; p <= m; p++)
                d.set(p * a, -r / 2, 0),
                u.setAt(p, d),
                c.setAt(p, f);
            f.set(r, e, 0),
            f.normalize();
            for (var g = 0, v = t; g <= v; g++)
                d.set(e - g * a, g * o - r / 2, 0),
                u.setAt(t + 1 + g, d),
                c.setAt(t + 1 + g, f);
            var y = t < 3 ? 3 : t;
            return (0,
            h.default)(u, c, y, n, i)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ./Lathe */
        46)
          , h = n(c)
    }
    , /*!*******************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Cylinder.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i, a, o, u) {
            e = void 0 !== e ? e : 20,
            t = void 0 !== t ? t : 20,
            r = void 0 !== r ? r : 100,
            a = a || !1,
            n = Math.max(1, Math.floor(n || 8)),
            i = Math.max(1, Math.floor(i || 8)),
            o = s.Math.clamp(o || 0, 0, 2 * Math.PI),
            u = s.Math.clamp(u || 2 * Math.PI, 0, 2 * Math.PI - o);
            var c = r / i
              , f = r / 2
              , d = (t - e) / r
              , p = e / n
              , m = t / n
              , g = void 0
              , v = void 0;
            a ? (g = new l.default(s.Vector3,i + 1),
            v = new l.default(s.Vector3,i + 1)) : (g = new l.default(s.Vector3,i + 1 + 2 * (n + 1)),
            v = new l.default(s.Vector3,i + 1 + 2 * (n + 1)));
            var y = new s.Vector3
              , M = new s.Vector3(0,-1,0);
            if (!a)
                for (var w = 0, x = n; w <= x; w++)
                    y.set(w * p, -1 * f, 0),
                    g.setAt(w, y),
                    v.setAt(w, M);
            M.set(r, e - t, 0),
            M.normalize();
            for (var A = 0, b = i; A <= b; A++)
                y.set(d * A * c + e, A * c - f, 0),
                a ? (g.setAt(A, y),
                v.setAt(A, M)) : (g.setAt(A + n + 1, y),
                v.setAt(A + n + 1, M));
            if (!a) {
                M.set(0, 1, 0);
                for (var T = 0, _ = n; T <= _; T++)
                    y.set(t - T * m, 1 * f, 0),
                    g.setAt(T + n + i + 2, y),
                    v.setAt(T + n + i + 2, M)
            }
            var E = n < 3 ? 3 : n;
            return (0,
            h.default)(g, v, E, o, u)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ./Lathe */
        46)
          , h = n(c)
    }
    , /*!***************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Disk.js ***!
  \***************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n) {
            e = e || 50,
            t = Math.max(1, Math.floor(t || 8));
            var i = e / t;
            r = s.Math.clamp(r || 0, 0, 2 * Math.PI),
            n = s.Math.clamp(n || 2 * Math.PI, 0, 2 * Math.PI - r);
            for (var a = new l.default(s.Vector3,t + 1), o = new l.default(s.Vector3,t + 1), u = new s.Vector3(0,1,0), c = new s.Vector3, f = 0, d = t; f <= d; f++)
                c.set(e - f * i, 0, 0),
                a.setAt(f, c),
                o.setAt(f, u);
            var p = t < 3 ? 3 : t;
            return (0,
            h.default)(a, o, p, r, n)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ./Lathe */
        46)
          , h = n(c)
    }
    , /*!****************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Plane.js ***!
  \****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n) {
            r = Math.floor(r),
            n = Math.floor(n);
            var i = new Uint32Array(r * n + 1)
              , a = new Uint32Array(r * n * 4)
              , o = new l.default(s.Vector3,(r + 1) * (n + 1))
              , u = new l.default(s.Vector3,(r + 1) * (n + 1))
              , c = new l.default(s.Vector2,(r + 1) * (n + 1))
              , f = e / r
              , p = t / n
              , g = e / 2
              , v = t / 2
              , y = void 0
              , M = void 0
              , w = new s.Vector3
              , x = new s.Vector3(0,1,0)
              , A = new s.Vector2;
            for (y = 0,
            M = 0; y < i.length; y++,
            M += 4)
                i[y] = M;
            for (y = 0; y < n; y++)
                for (M = 0; M < r; M++)
                    a[4 * (y * r + M)] = y * (r + 1) + M,
                    a[4 * (y * r + M) + 1] = y * (r + 1) + M + 1,
                    a[4 * (y * r + M) + 2] = (y + 1) * (r + 1) + M + 1,
                    a[4 * (y * r + M) + 3] = (y + 1) * (r + 1) + M;
            for (y = 0; y < n + 1; y++) {
                var b = y * p - v;
                for (M = 0; M < r + 1; M++) {
                    var T = M * f - g;
                    w.set(T, 0, -b),
                    o.setAt(y * (r + 1) + M, w),
                    u.setAt(y * (r + 1) + M, x),
                    A.set(M / r, y / n),
                    c.setAt(y * (r + 1) + M, A)
                }
            }
            var _ = new m.default({
                faceRangeOffsets: i,
                faceValueIndices: a,
                values: o
            })
              , E = new m.default({
                faceRangeOffsets: i,
                faceValueIndices: a,
                values: u
            })
              , S = new m.default({
                faceRangeOffsets: i,
                faceValueIndices: a,
                values: c
            })
              , D = new h.default
              , N = "default";
            D.set(N, S);
            var I = new d.default;
            return I.faceRangeOffsets = i,
            I.positions = _,
            I.normalMap = E,
            I.uvMaps = D,
            I
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ../../generic/container/ObjectsByName */
        20)
          , h = n(c)
          , f = r(/*! ../model/PolyMesh */
        12)
          , d = n(f)
          , p = r(/*! ../model/PolyMap */
        10)
          , m = n(p)
    }
    , /*!*****************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Sphere.js ***!
  \*****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i, a, o) {
            e = e || 50,
            t = Math.max(3, Math.floor(t || 8)),
            r = Math.max(2, Math.floor(r || 6)),
            n = s.Math.clamp(n || 0, 0, 2 * Math.PI),
            i = s.Math.clamp(i || 2 * Math.PI, 0, 2 * Math.PI - n),
            a = s.Math.clamp(a || 0, 0, Math.PI),
            o = s.Math.clamp(o || Math.PI, 0, Math.PI - a);
            for (var u = 1 / r, c = new l.default(s.Vector3,r + 1), f = new l.default(s.Vector3,r + 1), d = new s.Vector3, p = 0, m = r; p <= m; p++) {
                var g = a + p * u * o;
                d.set(e * Math.sin(g), -e * Math.cos(g), 0),
                c.setAt(p, d),
                f.setAt(p, d.normalize())
            }
            return (0,
            h.default)(c, f, t, n, i)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ./Lathe */
        46)
          , h = n(c)
    }
    , /*!****************************************************!*\
  !*** ./src/polyMesh/geometric/primitives/Torus.js ***!
  \****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t, r, n, i, a, o, u) {
            r = Math.floor(r) || 1,
            n = Math.floor(n) || 1,
            e = e || 100,
            t = t || 40,
            r = Math.max(r || 8, 3),
            n = Math.max(n || 6, 3),
            i = s.Math.clamp(i || 0, 0, 2 * Math.PI),
            a = s.Math.clamp(a || 2 * Math.PI, 0, 2 * Math.PI - i),
            o = s.Math.clamp(o || 0, 0, 2 * Math.PI),
            u = s.Math.clamp(u || 2 * Math.PI, 0, 2 * Math.PI - o);
            for (var c = 1 / n, f = new l.default(s.Vector3,n + 1), d = new l.default(s.Vector3,n + 1), p = new s.Vector3, m = new s.Vector3, g = 0, v = n; g <= v; g++) {
                var y = o + g * c * u;
                p.set(e + t * Math.cos(y), t * Math.sin(y), 0),
                m.set(Math.cos(y), Math.sin(y), 0),
                f.setAt(g, p),
                d.setAt(g, m.normalize())
            }
            return (0,
            h.default)(f, d, r, i, a)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ./Lathe */
        46)
          , h = n(c)
    }
    , /*!*************************************************!*\
  !*** ./src/polyMesh/geometric/tool/Exporter.js ***!
  \*************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            this.mesh = e,
            this.triangulation = null,
            this.renderIndexing = null
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../generic/utility/Arrays */
        16)
          , o = n(a)
          , s = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , u = n(s)
          , l = r(/*! ../../generic/container/ScalarArrayView */
        78)
          , c = n(l)
          , h = r(/*! ../../generic/algorithm/IndexMappings */
        59)
          , f = n(h)
          , d = r(/*! ../algorithm/RenderIndexing */
        202)
          , p = n(d)
          , m = r(/*! ../algorithm/SimpleFanTriangulation */
        130)
          , g = n(m);
        i.prototype = {
            constructor: i,
            reindexForRendering: function(e) {
                if (null !== this.triangulation)
                    throw Error("Reindex must come before triangulation!");
                return this.renderIndexing = new p.default(this.mesh,e),
                this
            },
            triangulate: function(e) {
                var t = e || g.default;
                return this.triangulation = new t(this.mesh,this.renderIndexing),
                this
            },
            getNumFaces: function() {
                var e = this.triangulation;
                return null === e ? this.mesh.getNumFaces() : e.numTriangles
            },
            getNumFaceVertices: function() {
                return null === this.triangulation ? this.mesh.getNumFaceVertices() : 3 * this.getNumFaces()
            },
            getNumMapValues: function(e) {
                var t = this.renderIndexing;
                return null !== t ? t.numVertices : this.mesh.getMapById(e).values.length
            },
            getFaceArities: function(e, t, r) {
                if (null !== this.triangulation)
                    throw Error("No face arity export for triangular meshes!");
                var n = new c.default(this.getNumFaces(),e,t,r)
                  , i = this.mesh.faceRangeOffsets
                  , a = i.length;
                if (a > 1)
                    for (var o = i[0], s = 1; s !== a; ++s) {
                        var u = i[s];
                        n.setAt(s - 1, u - o),
                        o = u
                    }
                return n.data
            },
            getMaterialIds: function(e, t, r) {
                var n = null
                  , i = this.mesh.materialIDs;
                if (null === i)
                    return null;
                if (null === this.triangulation) {
                    var a = t || 0
                      , o = r || 1
                      , s = e || i.data.constructor;
                    if (0 === a && 1 === o && s === i.data.constructor)
                        return i;
                    n = new c.default(i.length,s,a,o),
                    n.fromArray(i)
                } else
                    this.triangulation.translateMaterialIds(i, n);
                return n.data
            },
            getMapValues: function(e, t, r, n) {
                var i = null
                  , a = this.renderIndexing
                  , o = this.mesh.getMapById(e).values
                  , s = o.type
                  , u = r || 0
                  , l = n || s.InstanceScalarSize
                  , c = t || o.data.constructor;
                if (null === a && 0 === u && l === s.InstanceScalarSize && c === o.data.constructor)
                    i = o;
                else {
                    var h = null === a ? o.length : a.numVertices;
                    i = this._offsetObjects(s, h, c, u, l),
                    null !== a ? a.getMapValues(e, i) : i.fromArray(o.data)
                }
                return i.data
            },
            getGroups: function() {
                var e = this.triangulation
                  , t = e.groups;
                return t
            },
            getMapIndices: function(e, t, r, n) {
                var i = null
                  , a = this.renderIndexing
                  , o = this.triangulation
                  , s = null !== a ? a.renderIndices : this.mesh.getMapById(e).faceValueIndices;
                if (null === o) {
                    var u = r || 0
                      , l = n || 1
                      , h = t || s.constructor;
                    if (0 === u && 1 === l && h === s.constructor)
                        return s;
                    i = new c.default(s.length,h,u,l),
                    i.fromArray(s)
                } else
                    i = new c.default(3 * this.triangulation.numTriangles,t,r,n),
                    o.translateIndices(s, i);
                return i.data
            },
            getUnindexedMapValues: function(e, t, r, n, i) {
                var a = null
                  , o = this.mesh.getMapById(e)
                  , s = o.values
                  , u = s.type
                  , l = o.faceValueIndices
                  , c = this.triangulation;
                if (t && null !== c)
                    a = this._offsetObjects(u, 3 * c.numTriangles, r || s.data.constructor, n, i),
                    c.translateToUnindexedValues(s, a, l);
                else {
                    a = this._offsetObjects(u, l.length, r || s.data.constructor, n, i);
                    for (var h = s.newRangeArray(1), f = 0, d = l.length; f !== d; ++f)
                        a.arrayToRange(s.rangeToArray(l[f], 1, h), f, 1)
                }
                return a.data
            },
            getTriangulatingIndices: function(e, t, r) {
                var n = this.triangulation;
                if (null === n)
                    return null;
                var i = new c.default(this.getNumFaceVertices(),e,t,r)
                  , a = this.getNumFaceVertices()
                  , o = f.default.identityForReading(a);
                return n.translateIndices(o, i),
                i.data
            },
            _offsetObjects: function(e, t, r, n, i) {
                var a = n || 0
                  , s = i || e.InstanceScalarSize
                  , l = a / s | 0
                  , c = (l + t) * s
                  , h = o.default.maybeCreate(r, c)
                  , f = 0 === a ? h : h.subarray(a);
                return new u.default(e,null,f,s)
            }
        }
    }
    , /*!*************************************************!*\
  !*** ./src/polyMesh/geometric/tool/Importer.js ***!
  \*************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a() {
            this.defaultFaceArity = 3,
            this.collapsePositions = !0,
            this.collapseMapValues = !0,
            this.faceArities = null,
            this.materialIds = null,
            this.mapIds = [],
            this.mapValues = {},
            this.mapIndices = {},
            this.skinning = null,
            this.creases = null
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../generic/container/ObjectArrayView */
        7)
          , l = n(u)
          , c = r(/*! ../../generic/container/ScalarArrayView */
        78)
          , h = n(c)
          , f = r(/*! ../../generic/utility/Arrays */
        16)
          , d = n(f)
          , p = r(/*! ../model/PolyMaps */
        45)
          , m = n(p)
          , g = r(/*! ../model/PolyMap */
        10)
          , v = n(g)
          , y = r(/*! ../model/PolyMesh */
        12)
          , M = n(y)
          , w = r(/*! ../model/Skinning */
        203)
          , x = n(w)
          , A = r(/*! ../algorithm/ImportConversions */
        201)
          , b = n(A);
        a.prototype = {
            constructor: a,
            setFaceArities: function(e, t, r, n) {
                return this.faceArities = new h.default(t || null,e,r,n),
                this
            },
            setMaterialIds: function(e) {
                for (var t = 0; t < e.length; t++)
                    if (e[t] > 0) {
                        this.materialIds = e;
                        break
                    }
                return this
            },
            setMapValues: function(e, t, r, n, i) {
                var a = m.default.checkId(e)
                  , o = this.mapIds;
                return o.indexOf(a) === -1 && o.push(a),
                this.mapValues[a] = new l.default(m.default.getTypeInfo(m.default.getAnchorName(e)).ElementType,r || null,n ? t.subarray(n) : t,i),
                this
            },
            setMapIndices: function(e, t, r, n, i) {
                return this.mapIndices[m.default.checkId(e)] = new h.default(r || null,t,n,i),
                this
            },
            setSkinning: function(e, t, r, n) {
                return this.skinning = {},
                this.skinning.positionSkinRange = e,
                this.skinning.skinWeights = t,
                this.skinning.skinBoneIndices = r,
                this.skinning.poseSkinToPoseBoneTransform = new l.default(s.Matrix4,null,n),
                this
            },
            setCreases: function(e, t) {
                this.creases = {
                    weights: e,
                    edges: t
                }
            },
            toMeshAndClear: function() {
                var e = this.mapIds
                  , t = this.mapValues
                  , r = this.mapIndices
                  , n = m.default.IdPositions
                  , i = t[n]
                  , o = this.faceArities
                  , s = this.materialIds;
                if (!i)
                    throw Error("No positions!");
                var u = r[n] || null
                  , l = u ? u.length : i.length
                  , c = null;
                if (null === o) {
                    var h = this.defaultFaceArity
                      , f = l / h | 0;
                    o = new Uint32Array(f + 1).fill(h, 1)
                } else
                    o = o.toArray(Uint32Array, 1);
                c = d.default.accumulate(o);
                for (var p = 0; p !== e.length; ++p) {
                    var g = e[p];
                    if (g !== n) {
                        var y = r[g];
                        void 0 !== y && y.forceRepack(Uint32Array)
                    }
                }
                var w = null;
                this.collapsePositions ? (null !== u && (w = u.repack(Uint32Array).data),
                i = b.default.collapsePositions(i, w)) : null !== u && (w = u.repack(Uint32Array).data);
                for (var A = M.default.fromData(c, i, w, s), T = 0; T !== e.length; ++T) {
                    var _ = e[T];
                    if (_ !== n) {
                        var E = r[_]
                          , S = t[_]
                          , D = v.default.fromData(c, E.data, S);
                        this.collapseMapValues && (b.default.collapseMapVertexValues(A, D),
                        D.compactValues()),
                        m.default.assignMap(A, _, D)
                    }
                }
                if (this.skinning && (A.skinning = new x.default(this.skinning)),
                this.creases) {
                    var N = this.creases
                      , I = N.weights
                      , L = N.edges;
                    if (L) {
                        for (var C = A.positions.edgeVertexAdjacency, O = new Float32Array(C.getNumEdges()), j = 0, R = 0; j < L.length; j += 2,
                        R++)
                            O[C.findEdgeId(L[j], L[j + 1])] = I[R];
                        A.edgeCreaseWeights = O
                    } else
                        A.edgeCreaseWeights = I
                }
                return a.call(this),
                A
            }
        }
    }
    , /*!*******************************************************!*\
  !*** ./src/polyMesh/geometric/transient/Selection.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            this.indices = e,
            this.meaning = t,
            this.mapId = r || u.default.IdPositions
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = i;
        var a = r(/*! ../../generic/utility/Arrays */
        16)
          , o = n(a)
          , s = r(/*! ../model/PolyMaps */
        45)
          , u = n(s)
          , l = r(/*! ../../generic/container/ScalarBuffer */
        128)
          , c = n(l)
          , h = r(/*! ../../generic/container/BitSet */
        125)
          , f = n(h)
          , d = r(/*! ../../generic/algorithm/IndexMappings */
        59)
          , p = n(d);
        i.Faces = 0,
        i.Vertices = 1,
        i.Edges = 2,
        i.prototype = {
            constructor: i,
            getIndices: function(e, t, r) {
                var n = this.indices
                  , a = i.ConversionTable
                  , o = a[this.meaning][t];
                return null !== o && (n = o.call(null, e, n, this.mapId, r || u.default.IdPositions)),
                n
            }
        },
        i.newRandomSelection = function(e, t, r, n, a) {
            for (var o = i.getNumElements(r, n, a), s = t * o | 0, u = new f.default(o).fill(0, s), l = e, c = 0, h = o - 1; c < h; ++c)
                l = 22695477 * l + 1 >>> 0,
                u.swap(c, c + (1073741823 & l) % (o - c));
            return new i(u.toIndexArray(),n,a)
        }
        ,
        i.getIndices = function(e, t, r, n) {
            var a = u.default.IdPositions
              , o = n;
            return "string" == typeof r ? a = r : o = r,
            o ? o.getIndices(e, t, a) : p.default.identityForReading(i.getNumElements(e, t, a))
        }
        ,
        i.getNumElements = function(e, t, r) {
            switch (t) {
            case i.Faces:
                return e.getNumFaces();
            case i.Vertices:
                return u.default.resolveMap(e, r || u.default.IdPositions).values.length;
            case i.Edges:
                return u.default.resolveMap(e, r || u.default.IdPositions).getNumEdges();
            default:
                throw Error("Bad meaning argument!")
            }
        }
        ,
        i.convFacesToVertices = function(e, t, r, n) {
            for (var i = u.default.resolveMap(e, n), a = new f.default(i.values.length), o = e.faceRangeOffsets, s = i.faceValueIndices, l = 0, c = t.length; l !== c; ++l) {
                var h = t[l]
                  , d = o[h]
                  , p = o[h + 1];
                a.includeFromArray(s, d, p)
            }
            return a.toIndexArray()
        }
        ,
        i.convFacesToEdges = function(e, t, r, n) {
            for (var i = u.default.resolveMap(e, n), a = new f.default(i.getNumEdges()), o = e.faceRangeOffsets, s = i.faceValueIndices, l = 0, c = t.length; l !== c; ++l) {
                var h = t[l]
                  , d = o[h]
                  , p = o[h + 1];
                if (d !== p)
                    for (var m = s[p - 1], g = d; g !== p; ++g) {
                        var v = s[g];
                        a.include(i.findEdgeId(m, v)),
                        m = v
                    }
            }
            return a.toIndexArray()
        }
        ,
        i.convVerticesToFaces = function(e, t, r, n) {
            for (var i = new c.default(Uint32Array), a = e.faceRangeOffsets, s = u.default.resolveMap(e, r).faceValueIndices, l = e.getNumFaces(), h = 0; h !== l; ++h) {
                for (var f = a[h], d = a[h + 1], p = !0, m = f; m !== d && p; ++m)
                    p = -1 < o.default.binarySearch(t, s[m]);
                p && i.push(h)
            }
            return i.toArrayAndClear()
        }
        ,
        i.convVerticesToVertices = function(e, t, r, n) {
            if (r === n)
                return t;
            for (var i = u.default.resolveMap(e, n), a = new f.default(i.values.length), o = i.faceValueIndices, s = u.default.resolveMap(e, r).updateInverseIndex(), l = s.valueFaceIndexOffsets, c = s.valueFaceIndices, h = 0, d = t.length; h !== d; ++h)
                for (var p = t[h], m = l[p], g = l[p + 1], v = m; v !== g; ++v) {
                    var y = s.findValueIndexOffset(c[v], p);
                    a.include(o[y])
                }
            return a.toIndexArray()
        }
        ,
        i.convVerticesToEdges = function(e, t, r, n) {
            for (var i = u.default.resolveMap(e, n), a = new f.default(i.getNumEdges()), s = e.faceRangeOffsets, l = u.default.resolveMap(e, r).faceValueIndices, c = e.getNumFaces(), h = 0; h !== c; ++h) {
                var d = s[h]
                  , p = s[h + 1];
                if (d !== p) {
                    for (var m = l[--p], g = -1 < o.default.binarySearch(t, m), v = m, y = g, M = d; M !== p; ++M) {
                        var w = l[M]
                          , x = -1 < o.default.binarySearch(t, w);
                        y && x && a.include(i.findEdgeId(v, w)),
                        v = w,
                        y = x
                    }
                    y && g && a.include(i.findEdgeId(v, m))
                }
            }
            return a.toIndexArray()
        }
        ,
        i.convEdgesToFaces = function(e, t, r, n) {
            var a = i.convEdgesToVertices(e, t, r, r);
            return i.convVerticesToFaces(e, a, r, "")
        }
        ,
        i.convEdgesToVertices = function(e, t, r, n) {
            var a = i.convEdgesToVerticesOfSameMap(e, t, r);
            return i.convVerticesToVertices(e, a, r, n)
        }
        ,
        i.convEdgesToEdges = function(e, t, r, n) {
            return r === n ? t : (i.convEdgesToVerticesOfSameMap(e, t, r),
            i.convVerticesToEdges(e, t, r, n))
        }
        ,
        i.convEdgesToVerticesOfSameMap = function(e, t, r) {
            for (var n = u.default.resolveMap(e, r).updateEdgeMap(), i = n.edgePivotRangeOffsets, a = n.edgeHighVertexIndices, s = new f.default(n.values.length), l = 0, c = t.length; l !== c; ++l) {
                var h = t[l]
                  , d = a[h]
                  , p = o.default.binarySearch(i, h + 1);
                p < 0 && (p = ~p);
                var m = p - 1;
                s.include(d),
                s.include(m)
            }
            return s.toIndexArray()
        }
        ,
        i.ConversionTable = [[null, i.convFacesToVertices, i.convFacesToEdges], [i.convVerticesToFaces, i.convVerticesToVertices, i.convVerticesToEdges], [i.convEdgesToFaces, i.convEdgesToVertices, i.convEdgesToEdges]]
    }
    , /*!*******************************************!*\
  !*** ./src/polyMesh/three/ThreeExport.js ***!
  \*******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! ../geometric/model/PolyMaps */
        45)
          , o = i(a)
          , s = r(/*! ../geometric/tool/Exporter */
        224)
          , u = i(s)
          , l = r(/*! three */
        1)
          , c = n(l)
          , h = {
            NoIndices: 0,
            SimpleIndices: 1,
            CompactIndices: 2,
            exportBufferGeometry: function(e, t, r, n, i, a, s, u) {
                var l = new c.BufferGeometry
                  , f = []
                  , d = h._prepare(e, f, t, r, n, i, a, s)
                  , p = d.exporter
                  , m = d.triangulationChanged
                  , g = o.default.IdPositions
                  , v = {};
                if (t !== h.NoIndices) {
                    var y = t === h.SimpleIndices ? p.getTriangulatingIndices() : p.getMapIndices(g);
                    l.setIndex(new c.BufferAttribute(y,1,!1))
                }
                if (r) {
                    for (var M = 0, w = 0; w !== f.length; ++w)
                        M += f[w].itemSize;
                    var x = 0;
                    switch (t) {
                    case h.NoIndices:
                        x = p.getNumFaceVertices();
                        break;
                    case h.SimpleIndices:
                        x = p.mesh.getNumFaceVertices();
                        break;
                    case h.CompactIndices:
                        x = p.getNumMapValues(o.default.IdPositions)
                    }
                    for (var A = new Float32Array(M * x), b = new c.InterleavedBuffer(A,M), T = 0, w = 0; w !== f.length; ++w) {
                        var _ = f[w]
                          , E = _.itemSize
                          , S = _.mapId;
                        t !== h.CompactIndices ? p.getUnindexedMapValues(S, t === h.NoIndices, A, T, M) : p.getMapValues(S, A, T, M),
                        l.addAttribute(_.threeName, new c.InterleavedBufferAttribute(b,E,T)),
                        T += E
                    }
                } else
                    for (var w = 0; w !== f.length; ++w) {
                        var A, _ = f[w], D = t === h.NoIndices, N = o.default.resolveMap(e, _.mapId), I = i && o.default.resolveMap(i, _.mapId);
                        A = I === N && u ? u[_.mapId] : t !== h.CompactIndices ? p.getUnindexedMapValues(_.mapId, D) : p.getMapValues(_.mapId),
                        v[_.mapId] = A,
                        l.addAttribute(_.threeName, new c.BufferAttribute(A,_.itemSize,_.normalized))
                    }
                var L = p.getGroups();
                if (e.materialIds && L)
                    for (var w = 0; w < L.groupCounts.length; w++)
                        L.groupCounts[w] > 0 && l.addGroup(L.groupStarts[w], L.groupCounts[w], w);
                else
                    l.addGroup(0, 3 * p.triangulation.numTriangles, 0);
                return {
                    geometry: l,
                    triangulation: p.triangulation,
                    renderIndexing: p.renderIndexing,
                    triangulationChanged: m,
                    valueMap: v
                }
            },
            _prepare: function(e, t, r, n, i, a, s, l) {
                for (var c = new u.default(e), f = [], d = !a || !s || a.positions.faceValueIndices !== e.positions.faceValueIndices, p = !a || !l, m = 0, g = new o.default.Iterator(e); g.next(); ) {
                    var v = ""
                      , y = 3
                      , M = !1;
                    switch (g.typeId) {
                    case o.default.TypePosition:
                        v = "position";
                        break;
                    case o.default.TypeTangent:
                        if (!i)
                            break;
                        v = "tangent";
                        break;
                    case o.default.TypeNormal:
                        v = "normal";
                        break;
                    case o.default.TypeUV:
                        if (g.index >= 2)
                            break;
                        v = "uv" + (0 !== g.index ? g.index + 1 : ""),
                        y = 2;
                        break;
                    case o.default.TypeColor:
                        if (g.index >= 1)
                            break;
                        v = "color",
                        M = !0
                    }
                    if (!(!v || n && M)) {
                        var w = g.getId();
                        f.push(w),
                        t.push({
                            mapId: w,
                            threeName: v,
                            itemSize: y,
                            normalized: M
                        }),
                        ++m
                    }
                }
                for (var x = 0; x < t.length && !p; x++) {
                    var A = o.default.resolveMap(a, t[x].mapId)
                      , b = o.default.resolveMap(e, t[x].mapId);
                    A.faceValueIndices !== b.faceValueIndices && (p = !0)
                }
                r !== h.CompactIndices || p ? r === h.CompactIndices && p && c.reindexForRendering(f) : (l.mesh = e,
                c.renderIndexing = l);
                var T = !1;
                return d ? (c.triangulate(),
                T = !0) : c.triangulation = s,
                {
                    exporter: c,
                    triangulationChanged: T
                }
            }
        };
        t.default = h
    }
    , /*!*******************************************************!*\
  !*** ./src/polyMesh/three/ThreeInstanceScalarSize.js ***!
  \*******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        var i = r(/*! three */
        1)
          , a = n(i);
        a.Vector2.InstanceScalarSize = 2,
        a.Vector3.InstanceScalarSize = 3,
        a.Vector4.InstanceScalarSize = 4,
        a.Color.InstanceScalarSize = 3,
        a.Quaternion.InstanceScalarSize = 4,
        a.Matrix3.InstanceScalarSize = 9,
        a.Matrix4.InstanceScalarSize = 16
    }
    , /*!**************************!*\
  !*** ./src/store/api.js ***!
  \**************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r, n, a) {
            function o(e) {
                return t.length ? i(t[0], t.slice(1), r, n, {
                    contentType: s,
                    method: u,
                    body: l
                }) : void n(e)
            }
            var s = a.contentType
              , u = a.method
              , l = a.body
              , c = a.onReadyStateChange;
            if ("img" === s)
                !function() {
                    var t = new Image;
                    t.crossOrigin = "anonymous",
                    t.addEventListener("load", function(e) {
                        r(t)
                    }),
                    t.addEventListener("error", o),
                    t.src = e
                }();
            else {
                if ("external" === s)
                    throw new Error("External Script support not allowed in the browser");
                !function() {
                    var t = new XMLHttpRequest
                      , n = u || "GET";
                    "GET" !== n && (t.withCredentials = !0),
                    t.open(n, e, !0),
                    l && t.setRequestHeader("Content-Type", "application/json"),
                    "binary" === s && (t.responseType = "arraybuffer"),
                    c && (t.onreadystatechange = function() {
                        c(t)
                    }
                    ),
                    t.onload = function(e) {
                        var n = t.response;
                        t.status >= 200 && t.status < 400 ? ("json" === s && (n = JSON.parse(n)),
                        r(n)) : o(t)
                    }
                    ,
                    t.onerror = o,
                    t.send(l)
                }()
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! ./apiBase */
        230)
          , o = n(a)
          , s = (0,
        o.default)(i);
        t.default = s
    }
    , /*!******************************!*\
  !*** ./src/store/apiBase.js ***!
  \******************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return function(t, r) {
                var n = r.types
                  , i = r.url
                  , a = r.fireAndForget
                  , s = r.payload
                  , h = r.queryKey
                  , m = (r.requestPayload,
                r.cache,
                r.method)
                  , g = r.contentType
                  , v = r.body
                  , y = r.files
                  , M = r.success
                  , w = r.failure
                  , x = r.decompress
                  , A = r.onReadyStateChange
                  , b = Array.isArray(i) ? i : [i];
                g || (g = "json");
                var T = n || ["IGN", "IGN", "IGN"]
                  , _ = (0,
                u.default)(T, 3)
                  , E = _[0]
                  , S = _[1]
                  , D = _[2];
                if (h) {
                    if (d[h])
                        return a ? d[h] : o.default.resolve(d[h]);
                    if (p[h])
                        return a ? (p[h].push({
                            payload: s,
                            store: t
                        }),
                        void t.dispatch({
                            type: E,
                            payload: s
                        })) : new f.default.Promise(function(e, r) {
                            p[h].push({
                                payload: s,
                                store: t,
                                resolve: e,
                                reject: r
                            }),
                            t.dispatch({
                                type: E,
                                payload: s
                            })
                        }
                        );
                    p[h] = [{
                        payload: s,
                        store: t
                    }]
                }
                t.dispatch({
                    type: E,
                    payload: s
                });
                var N = new f.default.Promise(function(r, n) {
                    function i(e, r) {
                        var i = r || u
                          , a = i.failureType
                          , o = i.failure
                          , s = i.queryKey
                          , l = i.payload;
                        s ? ((0,
                        c.forEach)(function(t) {
                            var r = t.payload
                              , n = t.store
                              , i = t.reject;
                            n.dispatch({
                                type: a,
                                payload: r,
                                error: e
                            }),
                            i && i(e)
                        }, p[s]),
                        delete p[s]) : t.dispatch({
                            type: a,
                            payload: l,
                            error: e
                        }),
                        o && o(e),
                        n(e)
                    }
                    function a(e, n) {
                        var i = n || u
                          , a = i.successType
                          , o = (i.sucess,
                        i.queryKey)
                          , s = i.payload;
                        o ? (d[o] = e,
                        (0,
                        c.forEach)(function(t) {
                            var r = t.payload
                              , n = t.store
                              , i = t.resolve;
                            n.dispatch({
                                type: a,
                                payload: r,
                                response: e
                            }),
                            i && i(e)
                        }, p[o]),
                        delete p[o]) : t.dispatch({
                            type: a,
                            payload: s,
                            response: e
                        }),
                        M && M(e),
                        r(e)
                    }
                    function o(e) {
                        x ? (0,
                        l.lzmaDecompressor)(e, u, a, i) : a(e)
                    }
                    var u = {
                        queryKey: h,
                        payload: s,
                        successType: S,
                        success: M,
                        failureType: D,
                        failure: w
                    };
                    e(b[0], b.slice(1), o, i, {
                        contentType: g,
                        method: m,
                        body: v,
                        files: y,
                        onReadyStateChange: A
                    })
                }
                );
                return a ? null : N
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/promise */
        30)
          , o = n(a)
          , s = r(/*! babel-runtime/helpers/slicedToArray */
        39)
          , u = n(s);
        t.default = i;
        var l = r(/*! ./utils/lzmaDecompressor */
        238)
          , c = r(/*! ramda */
        3)
          , h = r(/*! rsvp */
        106)
          , f = n(h)
          , d = {}
          , p = {}
    }
    , /*!**************************************!*\
  !*** ./src/store/applyMiddleware.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i() {
            for (var e = arguments.length, t = Array(e), r = 0; r < e; r++)
                t[r] = arguments[r];
            return function(e) {
                return function(r, n, i) {
                    var a = e(r, n, i)
                      , s = a.dispatch
                      , c = []
                      , h = {
                        get: a.get,
                        getIn: a.getIn,
                        getState: a.getState,
                        getTranslator: a.getTranslator,
                        getDerived: a.getDerived,
                        dispatch: function(e) {
                            return s(e)
                        },
                        read: a.read,
                        write: a.write,
                        hasApi: a.hasApi,
                        callApi: a.callApi,
                        logPageView: a.logPageView,
                        error: a.error,
                        createCanvas: a.createCanvas
                    };
                    return c = t.map(function(e) {
                        return e(h)
                    }),
                    s = l.compose.apply(void 0, (0,
                    u.default)(c))(a.dispatch),
                    (0,
                    o.default)({}, a, {
                        dispatch: s
                    })
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/assign */
        2)
          , o = n(a)
          , s = r(/*! babel-runtime/helpers/toConsumableArray */
        87)
          , u = n(s);
        t.default = i;
        var l = r(/*! ramda */
        3)
    }
    , /*!*****************************************************!*\
  !*** ./src/store/bindActionCreatorsAndSelectors.js ***!
  \*****************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            return (0,
            l.map)(function(t) {
                return function() {
                    return e(t.apply(void 0, arguments))
                }
            }, t)
        }
        function a(e, t) {
            return (0,
            l.map)(function(t) {
                return function() {
                    for (var r = arguments.length, n = Array(r), i = 0; i < r; i++)
                        n[i] = arguments[i];
                    return t.apply(void 0, [e].concat(n))
                }
            }, t)
        }
        function o(e, t) {
            return (0,
            l.map)(function(t) {
                return (0,
                u.default)({}, i(e.dispatch, t.actions), a(e, t.selectors))
            }, t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r(/*! babel-runtime/core-js/object/assign */
        2)
          , u = n(s);
        t.default = o;
        var l = r(/*! ramda */
        3)
    }
    , /*!***************************************!*\
  !*** ./src/store/clientMiddleware.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            return (0,
            l.default)(e) && "undefined" != typeof e.type
        }
        function a(e) {
            var t = e.dispatch;
            return function(r) {
                return function(n) {
                    if ("function" == typeof n)
                        return n(e);
                    if (!i(n) || !(0,
                    s.default)(n.payload) || n.error)
                        return r(n);
                    var a = n.type
                      , o = n.payload
                      , u = n.meta;
                    return t({
                        type: a + "_" + c,
                        meta: u
                    }),
                    o.then(function(e) {
                        return t({
                            type: a + "_" + h,
                            payload: e,
                            meta: u
                        })
                    }, function(e) {
                        return t({
                            type: a + "_" + f,
                            payload: o,
                            error: e,
                            meta: u
                        })
                    })
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! ./isPromise */
        236)
          , s = n(o)
          , u = r(/*! ./isPlainObject */
        133)
          , l = n(u)
          , c = "PENDING"
          , h = "FULFILLED"
          , f = "REJECTED"
    }
    , /*!************************************!*\
  !*** ./src/store/createReducer.js ***!
  \************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! babel-runtime/core-js/object/keys */
        8)
          , a = n(i);
        t.default = function(e, t) {
            var r = (0,
            a.default)(e)
              , n = (0,
            s.reduce)(function(t, r) {
                return t.set(r, e[r]())
            }, (0,
            o.Map)(), r);
            return function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : n
                  , i = arguments[1]
                  , a = arguments[2];
                return (0,
                s.reduce)(function(t, r) {
                    var n = t.get(r)
                      , s = e[r](n, i, t, a);
                    return (0,
                    o.is)(n, s) ? t : t.set(r, s)
                }, t, r)
            }
        }
        ;
        var o = r(/*! immutable */
        11)
          , s = r(/*! ramda */
        3)
    }
    , /*!****************************!*\
  !*** ./src/store/index.js ***!
  \****************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r, n) {
            var i = (0,
            l.default)(e, t)
              , a = (0,
            s.chain)(s.values, (0,
            s.values)(t)).concat((0,
            s.values)(r))
              , u = (0,
            d.default)(i, h.default.apply(void 0, (0,
            o.default)(n)));
            return u.addRecords(a),
            u
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/helpers/toConsumableArray */
        87)
          , o = n(a);
        t.default = i;
        var s = r(/*! ramda */
        3)
          , u = r(/*! ./createReducer */
        234)
          , l = n(u)
          , c = r(/*! ./applyMiddleware */
        231)
          , h = n(c)
          , f = r(/*! ./createStore */
        61)
          , d = n(f)
    }
    , /*!********************************!*\
  !*** ./src/store/isPromise.js ***!
  \********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (null !== e && "object" === ("undefined" == typeof e ? "undefined" : (0,
            o.default)(e)))
                return "function" == typeof e.then
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/helpers/typeof */
        17)
          , o = n(a);
        t.default = i
    }
    , /*!***************************************!*\
  !*** ./src/store/transitImmutable.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            return p.default.reader("json", {
                mapBuilder: {
                    init: function() {
                        return {}
                    },
                    add: function(e, t, r) {
                        return e[t] = r,
                        e
                    },
                    finalize: function(e) {
                        return e
                    }
                },
                handlers: {
                    iM: function(e) {
                        for (var t = {}, r = 0; r < e.length; r += 2)
                            t[e[r]] = e[r + 1];
                        return new g.default.Map(t)
                    },
                    iL: function(e) {
                        return g.default.List(e)
                    },
                    iR: function(r) {
                        var n = e[r[0]];
                        if (!n) {
                            var i = "Tried to deserialize Record type named `" + r[0] + "`, but no type with that name was passed to withRecords()";
                            if (t)
                                return console && console.error(i),
                                new e[t];
                            throw new Error(i)
                        }
                        for (var a = {}, o = 1; o < r.length; o += 2)
                            a[r[o]] = r[o + 1];
                        return new n(a)
                    }
                }
            })
        }
        function a(e) {
            return y.write(e)
        }
        function o(e) {
            return v.read(e)
        }
        function s(e) {
            var t = l(e, []);
            return {
                toJSON: function(e) {
                    return t.write(e)
                },
                fromJSON: o
            }
        }
        function u(e, t, r) {
            var n = {};
            e.forEach(function(e) {
                var t = new e({});
                if (!t._name)
                    throw new Error("Cannot (de)serialize Record() without a name field");
                n[t._name] = e
            });
            var a = l(r, n)
              , o = i(n, t);
            return {
                toJSON: function(e) {
                    return a.write(e)
                },
                fromJSON: function(e) {
                    return o.read(e)
                }
            }
        }
        function l(e, t) {
            var r = p.default.map([g.default.Map, p.default.makeWriteHandler({
                tag: function() {
                    return "iM"
                },
                rep: function(t) {
                    var r = 0
                      , n = new Array(2 * t.size);
                    return e && (t = t.filter(e)),
                    t.forEach(function(e, t) {
                        n[r++] = t,
                        n[r++] = e
                    }),
                    n
                }
            }), g.default.List, p.default.makeWriteHandler({
                tag: function() {
                    return "iL"
                },
                rep: function(t) {
                    return e && (t = t.filter(e)),
                    t.toArray()
                }
            }), Function, p.default.makeWriteHandler({
                tag: function() {
                    return "_"
                },
                rep: function() {
                    return null
                }
            })]);
            return (0,
            f.default)(t).forEach(function(n) {
                r.set(t[n], c(n, t[n], e))
            }),
            p.default.writer("json", {
                handlers: r
            })
        }
        function c(e, t, r) {
            var n = new t;
            return p.default.makeWriteHandler({
                tag: function() {
                    return "iR"
                },
                rep: function(t) {
                    var i = new Array;
                    return i.push(e),
                    r && (t = t.filter(r)),
                    t.forEach(function(e, t) {
                        var r = n.get(t);
                        r === e || g.default.is(r, e) || (i.push(t),
                        i.push(e))
                    }),
                    i
                }
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = r(/*! babel-runtime/core-js/object/keys */
        8)
          , f = n(h);
        t.toJSON = a,
        t.fromJSON = o,
        t.withFilter = s,
        t.withRecords = u;
        var d = r(/*! transit-js */
        369)
          , p = n(d)
          , m = r(/*! immutable */
        11)
          , g = n(m)
          , v = i([])
          , y = l(!1, [])
    }
    , /*!*********************************************!*\
  !*** ./src/store/utils/lzmaDecompressor.js ***!
  \*********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (m.length > 0) {
                var t = m.shift();
                t.meta.idx = e,
                g[e].postMessage(t)
            } else
                g[e].postMessage("CLOSE"),
                delete g[e]
        }
        function a(e, t, r, n) {
            var a = -1
              , o = 0
              , u = ((0,
            f.find)(function(e) {
                return e ? o++ : a = o,
                !e
            }, g),
            g.length);
            if (m.length > 0 || "undefined" != typeof Worker && Worker && u >= y && a === -1)
                m.push({
                    buffer: e,
                    meta: t
                });
            else if ("undefined" != typeof Worker && Worker && l.default && "safari" !== l.default.name) {
                var c = new Worker(URL.createObjectURL(v))
                  , d = a === -1 ? g.length : a;
                c.onmessage = function(e) {
                    "SUCCESS" === e.data.type ? (r(e.data.buffer, e.data.meta),
                    i(e.data.meta.idx)) : n(e.data.error, e.data.meta)
                }
                ,
                c.postMessage({
                    buffer: e,
                    meta: (0,
                    s.default)({}, t, {
                        idx: d
                    })
                }),
                g[d] = c
            } else {
                var p = {
                    data: new Uint8Array(e),
                    offset: 0,
                    readByte: function() {
                        return this.data[this.offset++]
                    }
                }
                  , M = {
                    data: [],
                    offset: 0,
                    writeByte: function(e) {
                        this.data[this.offset++] = e
                    }
                };
                try {
                    h.default.decompressFile(p, M);
                    var w = new Uint8Array(M.data);
                    r(w.buffer, t)
                } catch (e) {
                    n(e)
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/object/assign */
        2)
          , s = n(o);
        t.lzmaDecompressor = a;
        var u = r(/*! detect-browser */
        159)
          , l = n(u)
          , c = r(/*! ../../../vendor/lzma */
        368)
          , h = n(c)
          , f = r(/*! ramda */
        3)
          , d = '\n//From Repository: https://github.com/jcmellado/js-lzma\n/*\nCopyright (c) 2011 Juan Mellado\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\nReferences:\n- "LZMA SDK" by Igor Pavlov\n  http://www.7-zip.org/sdk.html\n*/\n\nvar LZMA = LZMA || {};\n\nLZMA.OutWindow = function(){\n  this._windowSize = 0;\n};\n\nLZMA.OutWindow.prototype.create = function(windowSize){\n  if ( (!this._buffer) || (this._windowSize !== windowSize) ){\n    this._buffer = [];\n  }\n  this._windowSize = windowSize;\n  this._pos = 0;\n  this._streamPos = 0;\n};\n\nLZMA.OutWindow.prototype.flush = function(){\n  var size = this._pos - this._streamPos;\n  if (size !== 0){\n    while(size --){\n      this._stream.writeByte(this._buffer[this._streamPos ++]);\n    }\n    if (this._pos >= this._windowSize){\n      this._pos = 0;\n    }\n    this._streamPos = this._pos;\n  }\n};\n\nLZMA.OutWindow.prototype.releaseStream = function(){\n  this.flush();\n  this._stream = null;\n};\n\nLZMA.OutWindow.prototype.setStream = function(stream){\n  this.releaseStream();\n  this._stream = stream;\n};\n\nLZMA.OutWindow.prototype.init = function(solid){\n  if (!solid){\n    this._streamPos = 0;\n    this._pos = 0;\n  }\n};\n\nLZMA.OutWindow.prototype.copyBlock = function(distance, len){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  while(len --){\n    if (pos >= this._windowSize){\n      pos = 0;\n    }\n    this._buffer[this._pos ++] = this._buffer[pos ++];\n    if (this._pos >= this._windowSize){\n      this.flush();\n    }\n  }\n};\n\nLZMA.OutWindow.prototype.putByte = function(b){\n  this._buffer[this._pos ++] = b;\n  if (this._pos >= this._windowSize){\n    this.flush();\n  }\n};\n\nLZMA.OutWindow.prototype.getByte = function(distance){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  return this._buffer[pos];\n};\n\nLZMA.RangeDecoder = function(){\n};\n\nLZMA.RangeDecoder.prototype.setStream = function(stream){\n  this._stream = stream;\n};\n\nLZMA.RangeDecoder.prototype.releaseStream = function(){\n  this._stream = null;\n};\n\nLZMA.RangeDecoder.prototype.init = function(){\n  var i = 5;\n\n  this._code = 0;\n  this._range = -1;\n\n  while(i --){\n    this._code = (this._code << 8) | this._stream.readByte();\n  }\n};\n\nLZMA.RangeDecoder.prototype.decodeDirectBits = function(numTotalBits){\n  var result = 0, i = numTotalBits, t;\n\n  while(i --){\n    this._range >>>= 1;\n    t = (this._code - this._range) >>> 31;\n    this._code -= this._range & (t - 1);\n    result = (result << 1) | (1 - t);\n\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n  }\n\n  return result;\n};\n\nLZMA.RangeDecoder.prototype.decodeBit = function(probs, index){\n  var prob = probs[index],\n      newBound = (this._range >>> 11) * prob;\n\n  if ( (this._code ^ 0x80000000) < (newBound ^ 0x80000000) ){\n    this._range = newBound;\n    probs[index] += (2048 - prob) >>> 5;\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n    return 0;\n  }\n\n  this._range -= newBound;\n  this._code -= newBound;\n  probs[index] -= prob >>> 5;\n  if ( (this._range & 0xff000000) === 0){\n    this._code = (this._code << 8) | this._stream.readByte();\n    this._range <<= 8;\n  }\n  return 1;\n};\n\nLZMA.initBitModels = function(probs, len){\n  while(len --){\n    probs[len] = 1024;\n  }\n};\n\nLZMA.BitTreeDecoder = function(numBitLevels){\n  this._models = [];\n  this._numBitLevels = numBitLevels;\n};\n\nLZMA.BitTreeDecoder.prototype.init = function(){\n  LZMA.initBitModels(this._models, 1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.decode = function(rangeDecoder){\n  var m = 1, i = this._numBitLevels;\n\n  while(i --){\n    m = (m << 1) | rangeDecoder.decodeBit(this._models, m);\n  }\n  return m - (1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.reverseDecode = function(rangeDecoder){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < this._numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(this._models, m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.reverseDecode2 = function(models, startIndex, rangeDecoder, numBitLevels){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(models, startIndex + m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.LenDecoder = function(){\n  this._choice = [];\n  this._lowCoder = [];\n  this._midCoder = [];\n  this._highCoder = new LZMA.BitTreeDecoder(8);\n  this._numPosStates = 0;\n};\n\nLZMA.LenDecoder.prototype.create = function(numPosStates){\n  for (; this._numPosStates < numPosStates; ++ this._numPosStates){\n    this._lowCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n    this._midCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n  }\n};\n\nLZMA.LenDecoder.prototype.init = function(){\n  var i = this._numPosStates;\n  LZMA.initBitModels(this._choice, 2);\n  while(i --){\n    this._lowCoder[i].init();\n    this._midCoder[i].init();\n  }\n  this._highCoder.init();\n};\n\nLZMA.LenDecoder.prototype.decode = function(rangeDecoder, posState){\n  if (rangeDecoder.decodeBit(this._choice, 0) === 0){\n    return this._lowCoder[posState].decode(rangeDecoder);\n  }\n  if (rangeDecoder.decodeBit(this._choice, 1) === 0){\n    return 8 + this._midCoder[posState].decode(rangeDecoder);\n  }\n  return 16 + this._highCoder.decode(rangeDecoder);\n};\n\nLZMA.Decoder2 = function(){\n  this._decoders = [];\n};\n\nLZMA.Decoder2.prototype.init = function(){\n  LZMA.initBitModels(this._decoders, 0x300);\n};\n\nLZMA.Decoder2.prototype.decodeNormal = function(rangeDecoder){\n  var symbol = 1;\n\n  do{\n    symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.Decoder2.prototype.decodeWithMatchByte = function(rangeDecoder, matchByte){\n  var symbol = 1, matchBit, bit;\n\n  do{\n    matchBit = (matchByte >> 7) & 1;\n    matchByte <<= 1;\n    bit = rangeDecoder.decodeBit(this._decoders, ( (1 + matchBit) << 8) + symbol);\n    symbol = (symbol << 1) | bit;\n    if (matchBit !== bit){\n      while(symbol < 0x100){\n        symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n      }\n      break;\n    }\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.LiteralDecoder = function(){\n};\n\nLZMA.LiteralDecoder.prototype.create = function(numPosBits, numPrevBits){\n  var i;\n\n  if (this._coders\n    && (this._numPrevBits === numPrevBits)\n    && (this._numPosBits === numPosBits) ){\n    return;\n  }\n  this._numPosBits = numPosBits;\n  this._posMask = (1 << numPosBits) - 1;\n  this._numPrevBits = numPrevBits;\n\n  this._coders = [];\n\n  i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i] = new LZMA.Decoder2();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.init = function(){\n  var i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i].init();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.getDecoder = function(pos, prevByte){\n  return this._coders[( (pos & this._posMask) << this._numPrevBits)\n    + ( (prevByte & 0xff) >>> (8 - this._numPrevBits) )];\n};\n\nLZMA.Decoder = function(){\n  this._outWindow = new LZMA.OutWindow();\n  this._rangeDecoder = new LZMA.RangeDecoder();\n  this._isMatchDecoders = [];\n  this._isRepDecoders = [];\n  this._isRepG0Decoders = [];\n  this._isRepG1Decoders = [];\n  this._isRepG2Decoders = [];\n  this._isRep0LongDecoders = [];\n  this._posSlotDecoder = [];\n  this._posDecoders = [];\n  this._posAlignDecoder = new LZMA.BitTreeDecoder(4);\n  this._lenDecoder = new LZMA.LenDecoder();\n  this._repLenDecoder = new LZMA.LenDecoder();\n  this._literalDecoder = new LZMA.LiteralDecoder();\n  this._dictionarySize = -1;\n  this._dictionarySizeCheck = -1;\n\n  this._posSlotDecoder[0] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[1] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[2] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[3] = new LZMA.BitTreeDecoder(6);\n};\n\nLZMA.Decoder.prototype.setDictionarySize = function(dictionarySize){\n  if (dictionarySize < 0){\n    return false;\n  }\n  if (this._dictionarySize !== dictionarySize){\n    this._dictionarySize = dictionarySize;\n    this._dictionarySizeCheck = Math.max(this._dictionarySize, 1);\n    this._outWindow.create( Math.max(this._dictionarySizeCheck, 4096) );\n  }\n  return true;\n};\n\nLZMA.Decoder.prototype.setLcLpPb = function(lc, lp, pb){\n  var numPosStates = 1 << pb;\n\n  if (lc > 8 || lp > 4 || pb > 4){\n    return false;\n  }\n\n  this._literalDecoder.create(lp, lc);\n\n  this._lenDecoder.create(numPosStates);\n  this._repLenDecoder.create(numPosStates);\n  this._posStateMask = numPosStates - 1;\n\n  return true;\n};\n\nLZMA.Decoder.prototype.init = function(){\n  var i = 4;\n\n  this._outWindow.init(false);\n\n  LZMA.initBitModels(this._isMatchDecoders, 192);\n  LZMA.initBitModels(this._isRep0LongDecoders, 192);\n  LZMA.initBitModels(this._isRepDecoders, 12);\n  LZMA.initBitModels(this._isRepG0Decoders, 12);\n  LZMA.initBitModels(this._isRepG1Decoders, 12);\n  LZMA.initBitModels(this._isRepG2Decoders, 12);\n  LZMA.initBitModels(this._posDecoders, 114);\n\n  this._literalDecoder.init();\n\n  while(i --){\n    this._posSlotDecoder[i].init();\n  }\n\n  this._lenDecoder.init();\n  this._repLenDecoder.init();\n  this._posAlignDecoder.init();\n  this._rangeDecoder.init();\n};\n\nLZMA.Decoder.prototype.decode = function(inStream, outStream, outSize){\n  var state = 0, rep0 = 0, rep1 = 0, rep2 = 0, rep3 = 0, nowPos64 = 0, prevByte = 0,\n      posState, decoder2, len, distance, posSlot, numDirectBits;\n\n  this._rangeDecoder.setStream(inStream);\n  this._outWindow.setStream(outStream);\n\n  this.init();\n\n  while(outSize < 0 || nowPos64 < outSize){\n    posState = nowPos64 & this._posStateMask;\n\n    if (this._rangeDecoder.decodeBit(this._isMatchDecoders, (state << 4) + posState) === 0){\n      decoder2 = this._literalDecoder.getDecoder(nowPos64 ++, prevByte);\n\n      if (state >= 7){\n        prevByte = decoder2.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(rep0) );\n      }else{\n        prevByte = decoder2.decodeNormal(this._rangeDecoder);\n      }\n      this._outWindow.putByte(prevByte);\n\n      state = state < 4? 0: state - (state < 10? 3: 6);\n\n    }else{\n\n      if (this._rangeDecoder.decodeBit(this._isRepDecoders, state) === 1){\n        len = 0;\n        if (this._rangeDecoder.decodeBit(this._isRepG0Decoders, state) === 0){\n          if (this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (state << 4) + posState) === 0){\n            state = state < 7? 9: 11;\n            len = 1;\n          }\n        }else{\n          if (this._rangeDecoder.decodeBit(this._isRepG1Decoders, state) === 0){\n            distance = rep1;\n          }else{\n            if (this._rangeDecoder.decodeBit(this._isRepG2Decoders, state) === 0){\n              distance = rep2;\n            }else{\n              distance = rep3;\n              rep3 = rep2;\n            }\n            rep2 = rep1;\n          }\n          rep1 = rep0;\n          rep0 = distance;\n        }\n        if (len === 0){\n          len = 2 + this._repLenDecoder.decode(this._rangeDecoder, posState);\n          state = state < 7? 8: 11;\n        }\n      }else{\n        rep3 = rep2;\n        rep2 = rep1;\n        rep1 = rep0;\n\n        len = 2 + this._lenDecoder.decode(this._rangeDecoder, posState);\n        state = state < 7? 7: 10;\n\n        posSlot = this._posSlotDecoder[len <= 5? len - 2: 3].decode(this._rangeDecoder);\n        if (posSlot >= 4){\n\n          numDirectBits = (posSlot >> 1) - 1;\n          rep0 = (2 | (posSlot & 1) ) << numDirectBits;\n\n          if (posSlot < 14){\n            rep0 += LZMA.reverseDecode2(this._posDecoders,\n                rep0 - posSlot - 1, this._rangeDecoder, numDirectBits);\n          }else{\n            rep0 += this._rangeDecoder.decodeDirectBits(numDirectBits - 4) << 4;\n            rep0 += this._posAlignDecoder.reverseDecode(this._rangeDecoder);\n            if (rep0 < 0){\n              if (rep0 === -1){\n                break;\n              }\n              return false;\n            }\n          }\n        }else{\n          rep0 = posSlot;\n        }\n      }\n\n      if (rep0 >= nowPos64 || rep0 >= this._dictionarySizeCheck){\n        return false;\n      }\n\n      this._outWindow.copyBlock(rep0, len);\n      nowPos64 += len;\n      prevByte = this._outWindow.getByte(0);\n    }\n  }\n\n  this._outWindow.flush();\n  this._outWindow.releaseStream();\n  this._rangeDecoder.releaseStream();\n\n  return true;\n};\n\nLZMA.Decoder.prototype.setDecoderProperties = function(properties){\n  var value, lc, lp, pb, dictionarySize;\n\n  if (properties.size < 5){\n    return false;\n  }\n\n  value = properties.readByte();\n  lc = value % 9;\n  value = ~~(value / 9);\n  lp = value % 5;\n  pb = ~~(value / 5);\n\n  if ( !this.setLcLpPb(lc, lp, pb) ){\n    return false;\n  }\n\n  dictionarySize = properties.readByte();\n  dictionarySize |= properties.readByte() << 8;\n  dictionarySize |= properties.readByte() << 16;\n  dictionarySize += properties.readByte() * 16777216;\n\n  return this.setDictionarySize(dictionarySize);\n};\n\nLZMA.decompress = function(properties, inStream, outStream, outSize){\n  var decoder = new LZMA.Decoder();\n\n  if ( !decoder.setDecoderProperties(properties) ){\n    throw "Incorrect stream properties";\n  }\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\nLZMA.decompressFile = function(inStream, outStream){\n  var decoder = new LZMA.Decoder(), outSize;\n\n  if ( !decoder.setDecoderProperties(inStream) ){\n    throw "Incorrect stream properties";\n  }\n\n  outSize = inStream.readByte();\n  outSize |= inStream.readByte() << 8;\n  outSize |= inStream.readByte() << 16;\n  outSize += inStream.readByte() * 16777216;\n\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\n//export default LZMA;\n\n\n'
          , p = "\nfunction decompressBuffer(buffer){\n  var inStream = {\n    data: new Uint8Array(buffer),\n    offset: 0,\n    readByte: function() {\n      return this.data[this.offset++]\n    },\n  }\n  var outStream = {\n    data:[],\n    offset: 0,\n    writeByte: function(val) {\n      this.data[this.offset++] = val\n    },\n  }\n  LZMA.decompressFile(inStream, outStream);\n  var uintGeomArray = new Uint8Array(outStream.data);\n  return uintGeomArray.buffer;\n}\n\nself.onmessage = function( event ) {\n  if(event.data==='CLOSE') {\n    self.close();\n    return;\n  }\n\n  try {\n    var decompBuffer = decompressBuffer(event.data.buffer);\n    self.postMessage({type:'SUCCESS', buffer:decompBuffer, meta:event.data.meta});\n  } catch(e) {\n    self.postMessage({type:'FAILURE', error:e, meta:event.data.meta});\n  }\n\n};\n"
          , m = []
          , g = []
          , v = void 0;
        try {
            v = new Blob([d, p],{
                type: "application/javascript"
            })
        } catch (e) {
            window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder,
            v = new BlobBuilder,
            v.append(d),
            v.append(p),
            v = v.getBlob()
        }
        var y = Math.max(window.navigator.hardwareConcurrency - 1, 1)
    }
    , /*!***************************************!*\
  !*** ./src/translators/annotation.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t, r, n) {
            var i = (new h.Matrix4).getInverse(t)
              , a = (new h.Matrix4).multiply(i).multiply(e)
              , o = (new h.Matrix4).multiply(r).multiply(i).multiply(e)
              , s = new h.Vector3(0,0,0)
              , u = n
              , l = s.clone().applyMatrix4(a)
              , c = u.clone().applyMatrix4(a)
              , f = (new h.Vector3).subVectors(c, l).normalize()
              , d = s.clone().applyMatrix4(o);
            return d.addScalar(1).multiplyScalar(.5),
            {
                position: d,
                normal: f
            }
        }
        function o(e, t, r, n) {
            return function(i) {
                var o = (0,
                f.getWorldTransform)(i, e)
                  , u = (0,
                d.getCamera)(i)
                  , c = (0,
                f.get)(i, {
                    id: u,
                    evalPlug: "Camera"
                })
                  , p = (0,
                f.getWorldTransform)(i, u);
                if (!p)
                    return {};
                var g = (0,
                m.default)(c)
                  , v = a(o, p, g, s(i, e, t, r, n))
                  , y = (0,
                f.get)(i, {
                    id: e,
                    evalPlug: "Annotation"
                })
                  , M = 1;
                if (y.limitVisilibility) {
                    var w = Math.min(.5 * y.visibilityAngle, 180)
                      , x = new h.Vector3(0,0,-1)
                      , A = (x.dot(v.normal),
                    h.Math.radToDeg(Math.acos(x.dot(v.normal))));
                    A > w ? M = 0 : A > .75 * w && (M = (w - A) / (.25 * w))
                }
                return (0,
                l.default)({
                    alpha: M
                }, v)
            }
        }
        function s(e, t, r, n, i) {
            var a = null;
            if (r) {
                var o = new h.Vector3(0,0,0);
                i && (o = (new h.Vector3).setFromMatrixPosition((0,
                f.getWorldTransform)(e, i)));
                var s = (0,
                f.getWorldTransform)(e, t)
                  , u = (new h.Vector3).setFromMatrixPosition(s);
                a = o.clone().sub(u).normalize();
                var l = new h.Matrix4;
                l.getInverse(s),
                a.applyMatrix4(l).normalize()
            } else
                a = new h.Vector3,
                a[n] = -1;
            return a
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var u = r(/*! babel-runtime/core-js/object/assign */
        2)
          , l = i(u);
        t.getScreenPositionNormalAlpha = o;
        var c = r(/*! three */
        1)
          , h = n(c)
          , f = r(/*! ../modules/scene */
        4)
          , d = r(/*! ../modules/player */
        5)
          , p = r(/*! ./utils/getProjectionMatrix */
        64)
          , m = i(p)
    }
    , /*!**********************************!*\
  !*** ./src/translators/light.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            var t = e.lightType;
            switch (t) {
            case "DirectionalLight":
                var r = new u.DirectionalLight(e.color.getHex(),e.intensity,e.decayExponent);
                return r.position.set(0, 0, 0),
                r.target.position.set(0, 0, -1),
                r.add(r.target),
                e.shadow && o(e, r),
                r;
            case "PointLight":
                var n = new u.PointLight(e.color.getHex(),e.intensity,e.distance);
                return e.shadow && o(e, n),
                n;
            case "SpotLight":
                var i = new u.SpotLight(e.color.getHex(),e.intensity,e.distance,e.coneAngle * Math.PI / 180,e.coneFalloff / 100,e.decayExponent);
                return i.position.set(0, 0, 0),
                i.target.position.set(0, 0, -1),
                i.add(i.target),
                e.shadow && o(e, i),
                i;
            case "HemisphereLight":
                var a = new u.HemisphereLight(e.color.getHex(),e.gndColor.getHex(),e.intensity);
                a.rotateZ(-Math.PI / 2);
                var s = new u.Object3D;
                return s.add(a),
                s;
            case "AreaLight":
                return;
            default:
                throw new Error("Unknown light type: " + t)
            }
        }
        function a(e, t) {
            t.intensity = e.intensity
        }
        function o(e, t) {
            t.castShadow = !0,
            t.shadow.bias = e.shadowBias,
            t.shadow.radius = e.shadowRadius,
            t.shadow.mapSize.width = e.shadowSize,
            t.shadow.mapSize.height = e.shadowSize,
            t.shadow.camera.near = e.shadowNearClip,
            t.shadow.camera.far = e.shadowFarClip,
            "DirectionalLight" === t.type && (t.shadow.camera.left = -e.shadowCameraSize,
            t.shadow.camera.right = e.shadowCameraSize,
            t.shadow.camera.top = e.shadowCameraSize,
            t.shadow.camera.bottom = -e.shadowCameraSize)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.createLight = i,
        t.updateLight = a;
        var s = r(/*! three */
        1)
          , u = n(s)
    }
    , /*!*****************************************!*\
  !*** ./src/translators/manipulators.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            var n = v.default.stream();
            return e.addEventListener(t, n),
            r ? v.default.map(r, n) : n
        }
        function a(e, t, r) {
            var n = v.default.stream();
            return e.addEventListener(t, n),
            v.default.transduce(r, n)
        }
        function o(e) {
            return e.touches && 1 === e.touches.length
        }
        function s(e) {
            return e.touches && 2 === e.touches.length
        }
        function u(e, t) {
            var r = v.default.stream()(0)
              , n = v.default.combine(function(e, t) {
                return e.end() ? t() : e()
            }, [e, r])
              , i = 1;
            return v.default.on(function() {
                var t = c(1e3 / 60)
                  , n = new Date
                  , a = .2;
                if (!e())
                    return r.end(!0);
                var o = e()
                  , s = o.deltaX
                  , u = o.deltaY;
                v.default.map(function(e) {
                    i <= .005 ? (r.end(!0),
                    t.end(!0)) : (i = Math.exp(10 * -(1 - a) * (Date.now() - n) / 1e3),
                    r({
                        deltaX: s * i,
                        deltaY: u * i
                    }))
                }, t)
            }, e.end),
            n
        }
        function l(e, t, r) {
            function n(e) {
                var t = M.getBoundingClientRect();
                w = {
                    x: t.left + window.pageXOffset,
                    y: t.top + window.pageYOffset
                },
                x = e
            }
            function l(e) {
                return T && (T.lastMove = new Date),
                e
            }
            function c(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return function(r) {
                    if (b[e]) {
                        for (var n, i, a, o = A.length - 1; o >= 0; o--)
                            if (n = A[o],
                            i = n.tool,
                            n.enabled && i[e])
                                if (a = i[e].call(n, r),
                                t.findFirst) {
                                    if (a !== !1)
                                        break
                                } else if (!t.doAll && a === !1)
                                    break;
                        return a
                    }
                }
            }
            function f(e) {
                return {
                    rect: x,
                    clientX: e.clientX - w.x + window.pageXOffset,
                    clientY: e.clientY - w.y + window.pageYOffset,
                    deltaX: e.movementX,
                    deltaY: e.movementY,
                    originalEvent: e,
                    which: e.which,
                    altKey: e.altKey,
                    ctrlKey: e.ctrlKey,
                    metaKey: e.metaKey,
                    shiftKey: e.shiftKey
                }
            }
            function p(e) {
                if (!e.touches || !e.touches.length)
                    return e;
                e.preventDefault();
                var t = e.srcElement.getBoundingClientRect();
                return {
                    which: 1,
                    rect: x,
                    clientX: e.touches[0].clientX - t.left,
                    clientY: e.touches[0].clientY - t.top,
                    originalEvent: e
                }
            }
            function g(e) {
                return e.preventDefault(),
                {
                    a: {
                        x: e.touches[0].clientX,
                        y: e.touches[0].clientY
                    },
                    b: {
                        x: e.touches[1].clientX,
                        y: e.touches[1].clientY
                    }
                }
            }
            var M = r.parentNode.parentNode
              , w = {
                x: 0,
                y: 0
            }
              , x = {
                width: 0,
                height: 0
            }
              , A = []
              , b = {}
              , T = !1
              , _ = !1;
            v.default.on(c("dragenter"), i(r, "dragenter")),
            v.default.on(c("dragover"), i(r, "dragover")),
            v.default.on(c("dragleave"), i(r, "dragleave")),
            v.default.on(c("dblclick"), i(r, "dblclick"));
            var E = {};
            v.default.on(function(e) {
                E[e.key] || (c("keydown")(e),
                E[e.key] = setInterval(function() {
                    return c("keyheld")(e)
                }, 17))
            }, i(r, "keydown")),
            v.default.on(function(e) {
                E[e.key] && (clearInterval(E[e.key]),
                delete E[e.key]),
                c("keyup")(e)
            }, i(r, "keyup"));
            var S = (i(r, "click", f),
            i(r, "mousedown", f))
              , D = i(r, "mousemove", f)
              , N = i(window, "mouseup", f)
              , I = v.default.stream()
              , L = v.default.stream()
              , C = a(r, "touchstart", (0,
            y.compose)((0,
            y.filter)(o), (0,
            y.map)(p)))
              , O = i(r, "touchend", p);
            v.default.on(function(e) {
                function t(e) {
                    e.preventDefault();
                    var t = {
                        rect: x,
                        clientX: e.clientX - w.x,
                        clientY: e.clientY - w.y,
                        originalEvent: e,
                        which: e.which,
                        altKey: e.altKey,
                        ctrlKey: e.ctrlKey,
                        metaKey: e.metaKey,
                        shiftKey: e.shiftKey
                    };
                    return void 0 === e.movementX ? (t.deltaX = null === n ? 0 : e.clientX - n,
                    t.deltaY = null === n ? 0 : e.clientY - i) : (t.deltaX = e.movementX,
                    t.deltaY = e.movementY),
                    n = e.clientX,
                    i = e.clientY,
                    t
                }
                e.originalEvent.target.focus(),
                c("mousedown")(e),
                _ = {
                    start: new Date,
                    event: e
                };
                var r = c("drag", {
                    findFirst: !0
                })(e);
                if (r) {
                    T = {
                        lastMove: new Date
                    };
                    var n = null
                      , i = null;
                    I = a(window, "mousemove", (0,
                    y.compose)((0,
                    y.map)(l), (0,
                    y.map)(t))),
                    L.end(!0),
                    L = r.momentum ? u(I, N) : I,
                    L.map(r.handle)
                }
            }, S),
            v.default.on(function(e) {
                function t(e) {
                    var t = (0,
                    m.default)(e, {
                        deltaX: e.clientX - i,
                        deltaY: e.clientY - s
                    });
                    return i = e.clientX,
                    s = e.clientY,
                    t
                }
                c("mousedown")(e),
                _ = {
                    start: new Date,
                    event: e
                };
                var n = c("drag", {
                    findFirst: !0
                })(e);
                if (n) {
                    T = {
                        lastMove: new Date
                    };
                    var i = e.clientX
                      , s = e.clientY;
                    I = a(r, "touchmove", (0,
                    y.compose)((0,
                    y.filter)(o), (0,
                    y.map)(l), (0,
                    y.map)(p), (0,
                    y.map)(t))),
                    L.end(!0),
                    L = n.momentum ? u(I, O) : I,
                    L.map(n.handle)
                }
            }, C);
            var j = v.default.merge(O, N);
            v.default.on(function(e) {
                if (T && (I.end(!0),
                new Date - T.lastMove > 200 && L.end(!0)),
                c("mouseup")(e),
                _ && new Date - _.start < 300) {
                    var t = Math.abs(e.clientX - _.event.clientX)
                      , r = Math.abs(e.clientY - _.event.clientY);
                    isNaN(t) ? c("click")(_.event) : t <= 5 && r <= 5 && c("click")(e)
                }
                T = !1,
                _ = !1
            }, j),
            v.default.on(c("hover"), v.default.transduce((0,
            y.filter)(function() {
                return !T && b.hover
            }), D));
            var R = c("scroll");
            i(r, "wheel", function(e) {
                b.scroll && (e.preventDefault(),
                R({
                    delta: -e.deltaY / (Math.abs(e.wheelDelta) || 200),
                    originalEvent: e
                }))
            });
            var P = h(function(e) {
                var t = e
                  , n = a(r, "touchmove", (0,
                y.compose)((0,
                y.filter)(s), (0,
                y.map)(g), (0,
                y.map)(function(e) {
                    var r = {
                        pinchX: e.b.x - t.b.x - (e.a.x - t.a.x),
                        pinchY: t.a.y - e.a.y - (t.b.y - e.b.y),
                        dragX: (e.a.x - t.a.x + (e.b.x - t.b.x)) / 2,
                        dragY: (e.a.y - t.a.y + (e.b.y - t.b.y)) / 2,
                        a: e.a,
                        b: e.b
                    };
                    return t = e,
                    r
                })));
                return v.default.endsOn(O, n),
                n
            }, a(r, "touchstart", (0,
            y.compose)((0,
            y.filter)(s), (0,
            y.map)(g))));
            return v.default.on(function(e) {
                var t = e.pinchX
                  , r = e.pinchY
                  , n = e.dragX
                  , i = e.dragY
                  , a = e.a
                  , o = e.b;
                Math.abs(t) + Math.abs(r) > Math.abs(n) + Math.abs(i) ? c("pinch")({
                    deltaX: a.x > o.x ? -t : t,
                    deltaY: a.y > o.y ? r : -r
                }) : c("swipe")({
                    deltaX: n,
                    deltaY: i
                })
            }, P),
            {
                resize: n,
                updateTools: function(e) {
                    A = e,
                    b = {},
                    (0,
                    y.forEach)(function(e) {
                        (0,
                        d.default)(e.tool).forEach(function(e) {
                            return b[e] = !0
                        })
                    }, A)
                }
            }
        }
        function c(e) {
            function t() {
                if (!r.end()) {
                    var i = Date.now();
                    n += e,
                    r(i),
                    setTimeout(t, n - i)
                }
            }
            var r = v.default.stream()
              , n = Date.now();
            return t(),
            r
        }
        function h(e, t) {
            return v.default.combine(function(t, r) {
                v.default.map(r, e(t()))
            }, [t])
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var f = r(/*! babel-runtime/core-js/object/keys */
        8)
          , d = n(f)
          , p = r(/*! babel-runtime/core-js/object/assign */
        2)
          , m = n(p);
        t.initManipulators = l;
        var g = r(/*! ../../vendor/flyd */
        367)
          , v = n(g)
          , y = r(/*! ramda */
        3)
    }
    , /*!**************************************!*\
  !*** ./src/translators/materials.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t, r) {
            var n = e.getTranslator().textureCache
              , i = n[t] && n[t].image;
            return i && i._v === r._v ? n[t].value : null
        }
        function o(e, t, r, n) {
            var i = e.getTranslator().textureCache;
            return i[t] && i[t].value.dispose(),
            i[t] = {
                image: r,
                value: n
            },
            n
        }
        function s(e, t, r, n, i) {
            var s = r.maps
              , u = r.nodeId
              , l = a(e, u, r);
            if (l)
                return l;
            var c = !1
              , h = !1;
            i && s[0].preferHDR && (c = !0),
            c && b && s[0].hdrSource && (h = !0);
            var f = s.map(function(t) {
                var r = h ? A.fetchHDRSourceData : A.fetchTextureImage
                  , n = r(e, t, !0);
                if (n && h) {
                    var i = new x.DataTexture(n.data,n.width,n.height);
                    i.encoding = x.RGBEEncoding,
                    i.generateMipmaps = !1,
                    i.type = x.UnsignedByteType,
                    i.minFilter = x.NearestFilter,
                    i.magFilter = x.NearestFilter,
                    i.format = x.RGBEFormat,
                    n = i
                }
                return n
            });
            if (!(0,
            M.all)(function(e) {
                return !!e
            }, f))
                return null;
            var d = new x.CubeTexture;
            if (d.images = f,
            d.flipY = !1,
            d.needsUpdate = !0,
            c && (d.encoding = h ? x.RGBEEncoding : s[0].hdrEncoding,
            d.generateMipmaps = !1),
            n)
                return o(e, u, r, d);
            var p = h ? x.NearestFilter : x.LinearFilter
              , m = new x.PMREMGenerator(d,t.isMobile ? 20 : 64);
            m.update(t),
            m.cubeLods[0].texture.magFilter = p,
            m.cubeLods[0].texture.minFilter = p;
            var g = new x.PMREMCubeUVPacker(m.cubeLods);
            return g.update(t),
            g.CubeUVRenderTarget.texture.magFilter = p,
            g.CubeUVRenderTarget.texture.minFilter = p,
            o(e, u, r, g.CubeUVRenderTarget.texture)
        }
        function u(e, t) {
            if (t) {
                var r = t.nodeId;
                a(e, r, t) || (t.maps ? (0,
                M.map)((0,
                M.curry)(A.fetchTextureImage)(e), t.maps) : (0,
                A.fetchTextureImage)(e, t))
            }
        }
        function l(e, t, r, n, i) {
            if (!r)
                return n && (n.texture = null),
                null;
            var u = "envMap" === i || "emissiveMap" === i;
            if (r.maps)
                return s(e, t, r, !1, u);
            var l = !1
              , c = !1;
            u && r.preferHDR && (l = !0),
            l && b && r.hdrSource && (c = !0);
            var h = (0,
            g.default)({}, r)
              , f = r.nodeId
              , d = a(e, f, r);
            if (!d) {
                if (d = c ? new x.DataTexture : new x.Texture,
                d.meta = {
                    nodeId: f
                },
                r.canvasOperations)
                    !function() {
                        d.meta.source = "canvas operator";
                        var t = r.canvasOperations
                          , n = e.createCanvas(r.width, r.height)
                          , i = n.getContext("2d")
                          , a = t.reduce(function(t, r) {
                            i.save();
                            var a = t && r(i, e, n);
                            return i.restore(),
                            a
                        }, !0);
                        a && (d.image = n)
                    }();
                else {
                    d.meta.source = "image fetch";
                    var p = c ? A.fetchHDRSourceData : A.fetchTextureImage;
                    d.image = p(e, r)
                }
                if (!d.image)
                    return n && (n.texture = null),
                    null;
                d.transparent = !0;
                var m = {
                    0: x.ClampToEdgeWrapping,
                    1: x.RepeatWrapping,
                    2: x.MirroredRepeatWrapping
                };
                d.wrapS = m[h.wrapU],
                d.wrapT = m[h.wrapV],
                d.generateMipmaps = !l && h.generateMipMaps,
                d.anisotropy = d.generateMipmaps ? 16 : 1,
                d.magFilter = c ? x.NearestFilter : h.magFilter,
                d.minFilter = c ? x.NearestFilter : h.minFilter,
                d.encoding = l ? userHDRSource ? x.RGBEEncoding : h.hdrEncoding : x.sRGBEncoding,
                x.Math.nearestPowerOfTwo(d.image.width) === d.image.width && x.Math.nearestPowerOfTwo(d.image.height) === d.image.height || (d.wrapS = x.ClampToEdgeWrapping,
                d.wrapT = x.ClampToEdgeWrapping,
                d.generateMipmaps = !1,
                d.anisotropy = 1,
                d.anisotropy = 1,
                d.magFilter = c ? x.NearestFilter : x.LinearFilter,
                d.minFilter = c ? x.NearestFilter : x.LinearFilter),
                d.needsUpdate = !0,
                o(e, f, r, d)
            }
            return n ? (n.texture && n.texture.dispose(),
            n.texture = d,
            n.uvTransform = !0,
            n.uvOffset = new x.Vector2(h.uOffset,h.vOffset),
            n.uvRepeat = new x.Vector2(h.uTile,h.vTile),
            n.texelTransform = !0,
            n.texelInvert = h.invert,
            n.texelScale = h.gain,
            n.texelOffset = h.brightness,
            n) : d
        }
        function c(e, t, r, n) {
            function i(r, n) {
                var i = l(e, t, r, a[n] || new x.MaterialMap, n);
                i && !a[n] && (a[n] = i)
            }
            var a = n && n instanceof x.MeshPhysicalMaterial ? n : new x.MeshPhysicalMaterial({});
            if (!r)
                return a;
            if ("MultiID" === r.type) {
                for (var o = [], s = 0; s < 30; s++) {
                    var u = n && n.materials && n.materials[s];
                    if (r["material" + s])
                        o.push(c(e, t, r["material" + s], u));
                    else {
                        var h = {
                            defaultColor: r.defaultColor
                        };
                        o.push(c(e, t, h, u))
                    }
                }
                return a = new x.MultiMaterial(o)
            }
            if (r.defaultColor)
                return a.color = r.defaultColor,
                a;
            if (!r.baseColor)
                return r.diffuseColor && (a.color = r.diffuseColor),
                a;
            var d = {
                color: "baseColor",
                aoMapIntensity: "aoMapIntensity",
                bumpScale: "bumpFactor",
                emissive: "emissiveColor",
                falloff: "baseFalloff",
                falloffColor: "baseFalloffColor",
                metalness: "metallic",
                roughness: "roughness",
                clearCoat: "clearCoat",
                clearCoatRoughness: "clearCoatRoughness",
                opacity: "opacityFactor",
                falloffOpacity: "opacityFalloffFactor",
                transparent: "baseMapTransparent"
            }
              , m = ["depthTest", "depthWrite"]
              , g = {
                map: "baseMap",
                bumpMap: "bumpMap",
                aoMap: "aoMap",
                emissiveMap: "emissiveMap",
                lightMap: "lightMap",
                metalnessMap: "metallicMap",
                normalMap: "normalMap",
                alphaMap: "opacityMap",
                roughnessMap: "roughnessMap",
                falloffMap: "baseFalloffMap",
                falloffAlphaMap: "opacityFalloffMap"
            }
              , v = !0
              , y = !1
              , M = void 0;
            try {
                for (var w, A = (0,
                p.default)((0,
                f.default)(g)); !(v = (w = A.next()).done); v = !0) {
                    var b = w.value;
                    i(r[g[b]], b + "Slot")
                }
            } catch (e) {
                y = !0,
                M = e
            } finally {
                try {
                    !v && A.return && A.return()
                } finally {
                    if (y)
                        throw M
                }
            }
            var T = !0
              , _ = !1
              , E = void 0;
            try {
                for (var S, D = (0,
                p.default)((0,
                f.default)(d)); !(T = (S = D.next()).done); T = !0) {
                    var N = S.value;
                    a[N] = r[d[N]]
                }
            } catch (e) {
                _ = !0,
                E = e
            } finally {
                try {
                    !T && D.return && D.return()
                } finally {
                    if (_)
                        throw E
                }
            }
            var I = !0
              , L = !1
              , C = void 0;
            try {
                for (var O, j = (0,
                p.default)(m); !(I = (O = j.next()).done); I = !0) {
                    var R = O.value;
                    a[R] = r[R]
                }
            } catch (e) {
                L = !0,
                C = e
            } finally {
                try {
                    !I && j.return && j.return()
                } finally {
                    if (L)
                        throw C
                }
            }
            r.emissiveScale && (a.emissive = a.emissive.clone(),
            a.emissive.multiplyScalar(r.emissiveScale)),
            a.transparent = a.opacity < 1 || !!r.opacityMap || r.baseMapTransparent || r.opacityFalloffFactor < 1 || !!r.opacityFalloffMap;
            var P = r.specularColor;
            a.reflectivity = .33333 * (P.r + P.g + P.b),
            a.clearCoat *= .25,
            a.normalScale.x = (r.normalRedFlip ? -1 : 1) * r.normalFactor,
            a.normalScale.y = (r.normalGreenFlip ? -1 : 1) * r.normalFactor,
            a.blending = x.NormalBlending,
            a.premultipliedAlpha = !0,
            a.side = x.DoubleSide;
            var z = r.environment && r.environment.environmentMap;
            return z && (i(z.specularCubeMap, "envMap"),
            a.envMapIntensity = void 0 !== z.intensity ? z.intensity : 1),
            a.needsUpdate = !0,
            a
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var h = r(/*! babel-runtime/core-js/object/keys */
        8)
          , f = i(h)
          , d = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , p = i(d)
          , m = r(/*! babel-runtime/core-js/object/assign */
        2)
          , g = i(m);
        t.getCubeMapTexture = s,
        t.getTextureImage = u,
        t.assignTexture = l,
        t.primitiveToMaterial = c;
        var v = r(/*! detect-browser */
        159)
          , y = i(v)
          , M = r(/*! ramda */
        3)
          , w = r(/*! three */
        1)
          , x = n(w)
          , A = r(/*! ./asset */
        134)
          , b = y.default && "ie" === y.default.name
    }
    , /*!*************************************!*\
  !*** ./src/translators/polyMesh.js ***!
  \*************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t, r, n) {
            for (var i, a, o = new e(n.length * r), s = 0; s < n.length; s++) {
                i = n[s] * r,
                a = s * r;
                for (var u = 0; u < r; u++)
                    o[a + u] = t[i + u]
            }
            return new c.BufferAttribute(o,r)
        }
        function o(e) {
            var t = e.faces
              , r = e.positions
              , n = e.normalMap
              , i = e.uvs
              , o = new c.BufferGeometry;
            if (o.addAttribute("position", a(Float32Array, r, 3, t)),
            n && o.addAttribute("normal", a(Float32Array, n.values, 3, n.faces)),
            i) {
                var s = (0,
                u.default)(i);
                if (s.sort(),
                s.length >= 1) {
                    var l = i[s[0]];
                    o.addAttribute("uv", a(Float32Array, l.values, 2, l.faces))
                }
                if (s.length >= 2) {
                    var l = i[s[1]];
                    o.addAttribute("uv2", a(Float32Array, l.values, 2, l.faces))
                }
            }
            return o
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r(/*! babel-runtime/core-js/object/keys */
        8)
          , u = i(s);
        t.polyMeshToBufferGeometry = o;
        var l = r(/*! three */
        1)
          , c = n(l)
    }
    , /*!**********************************!*\
  !*** ./src/translators/three.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t, r) {
            function n() {
                return se.getContext()
            }
            function i(t, r) {
                var n = (0,
                N.getRenderingMode)(e);
                if (ce && n !== N.RENDER_MODES.vr) {
                    var i = ce.parentNode.getBoundingClientRect();
                    t = i.width,
                    r = i.height
                } else
                    n === N.RENDER_MODES.vr && (t = window.innerWidth,
                    r = window.innerHeight);
                if (!(t < 10 || r < 10)) {
                    me.set(t, r),
                    n !== N.RENDER_MODES.vr && ((0,
                    x.resizeCamera)(e, ye, me),
                    se.setSize(me.width, me.height)),
                    null !== be && be.setSize(me.width, me.height);
                    var a = se.getPixelRatio();
                    Le.setSize(me.width * a, me.height * a),
                    ve && ve.resize(me),
                    r && 0 !== r && (te.aspect = t / r,
                    te.updateProjectionMatrix()),
                    ke.uniforms.resolution.value.set(1 / (me.width * a), 1 / (me.height * a))
                }
            }
            function a(t) {
                ce = t,
                ce.insertBefore(se.domElement, ce.firstChild),
                se.domElement.tabIndex = 1,
                he = ce.parentElement,
                e.dispatch((0,
                N.setPlayerElement)(he, se.domElement)),
                i()
            }
            function o(t) {
                t ? _e = (0,
                P.default)(e, Ee) : (window.removeEventListener("deviceorientation", _e),
                _e = null)
            }
            function s() {
                function t(t, r) {
                    var n = e.getIn(["player", t]);
                    De[t] !== n && (r(n, De[t]),
                    De[t] = n)
                }
                t("deviceTracking", o)
            }
            function l(e) {
                var t = e && fe[e];
                Qe.selectedObjects = t ? [t] : []
            }
            function h() {
                var e = Date.now();
                Ze = qe > 0 ? e - qe : -1,
                qe = e
            }
            function d() {
                var t = (0,
                N.getRenderingMode)(e);
                Xe && clearTimeout(Xe),
                h();
                var r = (0,
                N.getCamera)(e);
                if (ye !== r && (ye = r,
                Me = ye,
                we = ye,
                Y(ye, $.evaluatedNodes[ye], $.nodes[ye], !0)),
                Me !== we && Y(ye, $.evaluatedNodes[ye], $.nodes[ye], !0),
                s(),
                ve && (m(),
                O()),
                Ne = (0,
                L.getSelectedNodes)(e),
                l((0,
                L.isHighlighting)(e) && Ne.length ? Ne[0] : null),
                Te && Te.data.reflectiveFloor && (be.distanceFade = Te.data.reflectiveFloorFade,
                be.roughness = Te.data.reflectiveFloorRoughness,
                be.metalness = Te.data.reflectiveFloorMetallic,
                be.opacity = Te.data.reflectiveFloorOpacity,
                be.fresnelStrength = Te.data.reflectiveFloorFresnel,
                be.reflectivity = .5,
                se.setClearColor(Pe.clearColor, Pe.clearAlpha),
                be.render(se, ee, te, me.width, me.height)),
                je.camera = te,
                t === N.RENDER_MODES.normal)
                    se.setClearColor(16777215),
                    Pe.enabled = !1,
                    ke.enabled = !1,
                    Re.enabled = !0,
                    Le.render();
                else if (t === N.RENDER_MODES.vr) {
                    if (Pe.enabled = !0,
                    ke.enabled = !0,
                    Re.enabled = !1,
                    !Ee.vrEffect)
                        throw new Error("Expect vr mode to initialize vrEffect");
                    Ee.vrEffect.render(ee, te, null, !0)
                } else
                    t === N.RENDER_MODES.lenticular && We.render(ee, te);
                t === N.RENDER_MODES.normal && (!Ie || Ze > 0) && (Xe = setTimeout(function() {
                    h(),
                    Re.sampleLevel = 2,
                    Le.render(),
                    Re.sampleLevel = 1,
                    qe = -1
                }, 4 * Math.max(Ze, 100)))
            }
            function m() {
                var t = (0,
                I.getCommands)(e);
                ge !== (0,
                I.getTools)(e) && (ge = (0,
                I.getTools)(e),
                ve.updateTools(ge.map(function(e) {
                    return t[e]
                }).toArray()))
            }
            function v(e, t, r) {
                fe[r] = new g.Object3D,
                fe[r].name = t,
                fe.widgets.add(fe[r]),
                e.options.displayGizmo !== !1 && e.widget.draw.call(e, fe[r])
            }
            function b(e, t, r, n) {
                var i = e.widget;
                i && i.remove && i.remove.call(e, t),
                fe.widgets.remove(t),
                delete fe[n]
            }
            function O() {
                var t = (0,
                I.getCommands)(e)
                  , r = (0,
                I.getActiveCommandsWithWidgets)(e);
                fe.widgets.children.forEach(function(e) {
                    r[e.name] || b(t[e.name], e, e.name, "widgetsRoot-" + e.name)
                }),
                (0,
                p.default)(r).forEach(function(e) {
                    var t = e.name
                      , r = e.widget
                      , n = "widgetsRoot-" + t;
                    fe[n] || v(e, t, n),
                    r && r.position && r.position.call(e, fe[n])
                })
            }
            function R() {
                Ae = !0;
                var r = $.evaluatedNodes[(0,
                E.getSceneId)(e)].Player;
                if (!r.orbitTarget) {
                    var n = (0,
                    j.default)(ee).getCenter();
                    (isNaN(n.x) || isNaN(n.y) || isNaN(n.z)) && n.set(0, 0, 0),
                    (0,
                    T.default)(e, S.virtualTargetId, (new g.Matrix4).makeTranslation(n.x, n.y, n.z))
                }
                t || (ve = (0,
                A.initManipulators)(e, this, se.domElement),
                ve.resize(me)),
                fe.widgets = new g.Object3D,
                fe.widgets.name = "Widgets",
                ee.add(fe.widgets)
            }
            function F() {
                return pe
            }
            function G(e, t, r, n) {
                var i = t && t.parent
                  , a = i && fe[i] || ee;
                if (r.name = t.name,
                r.nodeId = e,
                fe[e]) {
                    if (n)
                        return;
                    for (var o = [].concat(fe[e].children), s = 0; s < o.length; s++)
                        fe[e].remove(o[s]),
                        r.add(o[s]);
                    a.remove(fe[e]),
                    fe[e].geometry && fe[e].geometry.dispose()
                }
                fe[e] = r,
                a.add(fe[e])
            }
            function Y(e, t, r, n) {
                var i = r.type
                  , a = Ke[i] || [];
                de[e] || (de[e] = {});
                var o = {}
                  , s = void 0
                  , l = void 0
                  , h = !0
                  , f = !1
                  , d = void 0;
                try {
                    for (var p, m = (0,
                    c.default)(a); !(h = (p = m.next()).done); h = !0) {
                        var g = p.value
                          , v = Array.isArray(g) ? g : [g, g]
                          , y = (0,
                        u.default)(v, 2);
                        s = y[0],
                        l = y[1];
                        var M = t[s];
                        (n || !M || M._v !== de[e][s] || o[s]) && ($e[s] && (o = $e[s]),
                        Je[l] ? (Je[l](e, M, r, t.Properties, t),
                        de[e][s] = M && M._v) : console.warn("Unknown plug translator for: ", s, r.name))
                    }
                } catch (e) {
                    f = !0,
                    d = e
                } finally {
                    try {
                        !h && m.return && m.return()
                    } finally {
                        if (f)
                            throw d
                    }
                }
            }
            function Q(e) {
                var t = fe[e]
                  , r = pe[e];
                (t || r) && delete de[e],
                t ? (delete fe[e],
                t.parent.remove(t),
                t.geometry && t.geometry.dispose(),
                t.material && (t.material.dispose ? t.material.dispose() : t.material.materials.forEach(function(e) {
                    e.dispose()
                }))) : r && delete pe[e]
            }
            function H(e) {
                return (0,
                j.default)(fe[e])
            }
            function W(t) {
                var r = (new g.Box3).makeEmpty();
                return t.reduce(function(t, r) {
                    var n = r === (0,
                    E.getSceneId)(e) ? (0,
                    j.default)(ee) : H(r);
                    return t.union(n)
                }, r)
            }
            function X(e) {
                return fe[e]
            }
            function q(e) {
                var t = new g.Raycaster;
                return t.setFromCamera(e, te),
                t
            }
            function Z(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "Objects"
                  , r = arguments[2]
                  , n = arguments[3]
                  , i = []
                  , a = r && n ? new g.Raycaster(r,n) : q(e)
                  , o = ee;
                return o = (0,
                C.isUuid)(t) && fe[t] ? fe[t] : ee.children.find(function(e) {
                    return "Object3D" === e.type && e.name === t
                }),
                o.traverse(function(e) {
                    if (e.visible && e.geometry) {
                        null === e.geometry.boundingBox && e.geometry.computeBoundingBox();
                        var t = e.geometry;
                        if (t.boundingBox.isEmpty() === !1) {
                            e.matrix.compose(e.position, e.quaternion, e.scale),
                            e.updateMatrixWorld(!0);
                            var r = a.intersectObject(e);
                            r.length > 0 && i.push({
                                id: e.nodeId,
                                node: e,
                                data: r
                            })
                        }
                    }
                }),
                i.sort(function(e, t) {
                    return e.data[0].distance - t.data[0].distance
                }),
                i
            }
            function J(e) {
                if (e) {
                    var t = fe[e];
                    if (t) {
                        var r = .5 * se.context.canvas.width
                          , n = .5 * se.context.canvas.height;
                        t.updateMatrixWorld();
                        var i = (0,
                        j.default)(t);
                        et.makeEmpty();
                        for (var a = 0; a < 8; a++)
                            tt.set(i[Math.floor(a / 4) ? "max" : "min"].x, i[Math.floor(a / 2) % 2 ? "max" : "min"].y, i[a % 2 ? "max" : "min"].z),
                            tt.project(te),
                            et.expandByPoint(tt);
                        var o = {
                            top: (et.max.y - 1) * -n,
                            left: (et.min.x + 1) * r,
                            width: (et.max.x - et.min.x) * r,
                            height: (et.max.y - et.min.y) * n
                        };
                        return o.x = o.left + o.width / 2,
                        o.y = o.top + o.height / 2,
                        o
                    }
                }
                return null
            }
            function K() {
                Ae = null,
                ye = S.virtualCameraId,
                Me = S.virtualCameraId,
                we = null,
                xe = null,
                de = {}
            }
            var $ = e.get("sceneGraph")
              , ee = new g.Scene
              , te = new g.CombinedCamera(1,1,75,.1,1e3)
              , re = {
                antialias: !1,
                precision: "highp",
                alpha: !0,
                preserveDrawingBuffer: !0
            };
            t && (re.canvas = {
                style: {},
                addEventListener: function() {}
            },
            re.context = t);
            var ne = !1
              , ie = !1
              , ae = !1
              , oe = !1
              , se = new g.WebGLRenderer(re);
            se.setClearColor(16777215),
            se.autoResizeTextures = !1,
            se.gammaInput = !0,
            se.gammaOutput = !0,
            se.toneMapping = g.ReinhardToneMapping,
            se.physicallyCorrectLights = !0,
            se.shadowMap.enabled = !0,
            se.shadowMap.type = g.PCFSoftShadowMap;
            var ue = 1;
            if (ue = window.devicePixelRatio,
            window.navigator) {
                var le = window.navigator.userAgent;
                ne = /iPad|iPhone|iPod/.test(le),
                ie = /Android/i.test(le),
                ae = /IEMobile|Windows Phone|Lumia/i.test(le),
                oe = ne || ie || ae || /Blackberry|webOS/i.test(le)
            }
            se.setPixelRatio(ue),
            se.isMobile = oe,
            e.dispatch((0,
            N.setThreeScene)(ee, te, se));
            var ce = null
              , he = null
              , fe = {}
              , de = {}
              , pe = {}
              , me = new g.Vector2(400,300)
              , ge = []
              , ve = null
              , ye = S.virtualCameraId
              , Me = S.virtualCameraId
              , we = null
              , xe = null
              , Ae = null
              , be = null
              , Te = null
              , _e = void 0
              , Ee = {}
              , Se = {}
              , De = {}
              , Ne = (0,
            L.getSelectedNodes)(e)
              , Ie = !!t
              , Le = new g.EffectComposer(se)
              , Ce = new g.ClearPass;
            Ce.enabled = !0,
            Le.addPass(Ce);
            var Oe = new g.TexturePass;
            Oe.clear = !1,
            Oe.enabled = !1,
            Le.addPass(Oe);
            var je = new g.CubeTexturePass(ee,te);
            je.clear = !1,
            je.enabled = !1,
            Le.addPass(je);
            var Re = new g.SSAARenderPass(ee,te);
            Re.clear = !1,
            Re.sampleLevel = Ie ? 2 : 1,
            Re.unbiased = !0,
            Re.enabled = !0,
            Le.addPass(Re);
            var Pe = new g.RenderPass(ee,te);
            Le.addPass(Pe);
            var ze = window.innerWidth
              , Be = window.innerHeight
              , Ue = ze * ue
              , Ve = Be * ue
              , ke = new g.ShaderPass(g.FXAAShader);
            ke.uniforms.resolution.value.set(1 / Ue, 1 / Ve),
            Le.addPass(ke);
            var Fe = new g.SAOPass(ee,te);
            Fe.downSamplingRatio = 1,
            Fe.intensity = 3,
            Fe.occlusionSphereWorldRadius = 2,
            Fe.blurEnabled = !0,
            Fe.manualCompositing = !1,
            Fe.blurKernelSize = (1 === Fe.downSamplingRatio,
            6 + (Ie ? 2 : 0)),
            Fe.enabled = !0,
            oe || Le.addPass(Fe);
            var Ge = new g.DofPass(new g.Vector2(Ue,Ve),ee,te);
            Le.addPass(Ge);
            var Ye = new g.UnrealBloomPass(new g.Vector2(Ue,Ve),1.5,1,1);
            Le.addPass(Ye);
            var Qe = new g.OutlinePass(new g.Vector2(Ue,Ve),ee,te);
            Qe.edgeStrength = 10,
            Qe.edgeGlow = 0,
            Qe.edgeThickness = 1,
            Qe.pulsePeriod = 0,
            Qe.visibleEdgeColor = new g.Color(0,1,0),
            Qe.hiddenEdgeColor = new g.Color(0,1,0),
            Le.addPass(Qe);
            var He = new g.ShaderPass(g.CopyShader);
            He.renderToScreen = !0,
            Le.addPass(He);
            var We = new g.ParallaxBarrierEffect(se);
            We.setSize(Ue, Ue);
            var Xe = null
              , qe = -1
              , Ze = -1
              , Je = {
                PolyMesh: function(t, r, n, i) {
                    var a = i.visible
                      , o = i.castShadow
                      , s = i.receiveShadow
                      , u = r.mesh
                      , l = r.previousMesh
                      , c = se.extensions.get("OES_element_index_uint") ? z.ThreeExport.CompactIndices : z.ThreeExport.NoIndices
                      , h = !1
                      , f = fe[t]
                      , d = f && f.userData.triangulation
                      , p = f && f.userData.renderIndexing
                      , m = f && f.userData.valueMap
                      , v = u && z.ThreeExport.exportBufferGeometry(u, c, h, null, l, d, p, m)
                      , M = void 0
                      , w = void 0
                      , x = void 0
                      , A = void 0
                      , b = void 0;
                    v && (M = v.geometry,
                    w = v.triangulation,
                    x = v.triangulationChanged,
                    A = v.renderIndexing,
                    b = v.valueMap);
                    var T = void 0;
                    x || !f ? T = M && new g.Mesh(M,(0,
                    y.primitiveToMaterial)(e)) : (T = f,
                    M && (T.geometry.dispose(),
                    T.geometry = M)),
                    T && (T.visible = a,
                    T.castShadow = o,
                    T.receiveShadow = s,
                    T.userData.triangulation = w,
                    T.userData.renderIndexing = A,
                    T.userData.valueMap = b),
                    G(t, n, T || new g.Object3D)
                },
                Light: function(e, t, r, n) {
                    var i = fe[e];
                    i ? (0,
                    M.updateLight)(t, i) : (i = (0,
                    M.createLight)(t),
                    i && (i.visible = n.visible,
                    G(e, r, i)))
                },
                Bone: function(e, t, r) {
                    fe[e] || G(e, r, new g.Object3D)
                },
                Null: function(e, t, r) {
                    fe[e] || G(e, r, new g.Object3D)
                },
                PrefetchMaterialNull: function(e, t, r, n) {
                    Ae && n.prefetch && !fe[e] && G(e, r, new g.Object3D)
                },
                Transform: function(e, t, r) {
                    t && t.transform && fe[e] && (0,
                    w.setMatrixOn)(fe[e], t.transform)
                },
                Material: function(t, r) {
                    fe[t] && (fe[t].material && fe[t].material.materials && fe[t].material.materials.forEach(function(e) {
                        e.dispose()
                    }),
                    fe[t].material = (0,
                    y.primitiveToMaterial)(e, se, r, fe[t].material))
                },
                Image: function(t, r, n, i) {
                    Ae && i.prefetch && (0,
                    y.getTextureImage)(e, r)
                },
                Environment: function(t, r) {
                    var n = r.backgroundStyle;
                    switch (Ce.enabled = !1,
                    je.enabled = !1,
                    n) {
                    case B:
                        Ce.enabled = !0,
                        Ce.clearColor = r.backgroundColor,
                        Ce.clearAlpha = r.backgroundOpacity;
                        break;
                    case U:
                        Oe.enabled = !0,
                        Oe.map = (0,
                        y.assignTexture)(e, se, r.background);
                        break;
                    case V:
                    case k:
                        Ce.enabled = !0,
                        Ce.clearColor = 0,
                        Ce.clearAlpha = 0,
                        je.enabled = !0;
                        var i = void 0
                          , a = void 0;
                        n === k ? (i = r.environmentMap,
                        i && (i = i.specularCubeMap),
                        a = r.environmentMapBlurring) : (i = r.cubeMap,
                        a = r.cubeMapBlurring),
                        i ? (je.envMap = (0,
                        y.getCubeMapTexture)(e, se, i, !0),
                        je.envMapIntensity = 1,
                        je.opacity = r.backgroundOpacity,
                        je.roughness = r.cubeMapBlurring) : je.enabled = !1;
                        break;
                    default:
                        Ce.enabled = !0,
                        Ce.clearColor = new g.Color(1,1,1),
                        Ce.clearAlpha = 0
                    }
                },
                Player: function(t, r, n) {
                    if (r.camera && r.camera !== Me && $.nodes[r.camera]) {
                        var i = $.nodes[r.camera]
                          , a = $.nodes[ye]
                          , o = (0,
                        S.initNode)(i)
                          , s = o.plugs.Transform.find(function(e) {
                            return e.target
                        });
                        s && (o.plugs.Camera[0].targeted = !0),
                        e.dispatch((0,
                        S.replace)(ye, (0,
                        f.default)(a, {
                            plugs: o.plugs
                        }))),
                        Me = r.camera
                    }
                    r.orbitTarget && r.orbitTarget !== xe && (xe = r.orbitTarget,
                    (0,
                    T.default)(e, S.virtualTargetId, (0,
                    D.getWorldTransform)(e, xe)));
                    var u = {
                        Linear: g.LinearToneMapping,
                        Reinhard: g.ReinhardToneMapping,
                        Cineon: g.CineonToneMapping,
                        Filmic: g.Uncharted2ToneMapping
                    };
                    if (se.toneMapping = u[r.toneMapStyle],
                    se.toneMappingExposure = r.toneMapExposureGain,
                    se.toneMappingWhitePoint = r.toneMapWhitePoint,
                    se.gammaInput = !0,
                    se.gammaOutput = !0,
                    se.autoClear = !1,
                    Fe.enabled = r.saoPass,
                    Fe.intensity = r.saoIntensity,
                    Fe.occlusionSphereWorldRadius = r.saoScale,
                    Ye.enabled = r.bloomPass,
                    Ye.threshold = r.bloomThreshold,
                    Ge.enabled = r.dofPass,
                    r.reflectiveFloor && (!r.reflectiveFloorExcludeServer,
                    !0)) {
                        if (!be) {
                            var l = new g.PlaneBufferGeometry(1,1);
                            be = new g.GlossyMirror({
                                clipBias: .003,
                                textureWidth: 1024,
                                textureHeight: 1024,
                                color: 7829367,
                                localMirrorNormal: new g.Vector3(0,1,0)
                            }),
                            Te = new g.Mesh(l,be.material)
                        }
                        be.specularColor = new g.Color(16777215),
                        Te.scale.x = r.reflectiveFloorWidth,
                        Te.scale.y = r.reflectiveFloorWidth,
                        Te.rotation.x = .5 * -Math.PI,
                        Te.position.y = r.reflectiveFloorHeight,
                        Te.data = r,
                        Te.parent || ee.add(Te)
                    } else
                        Te && Te.parent && ee.remove(Te)
                },
                Camera: function(t, r, n) {
                    t === ye && Ae && (te.fov = r.fieldOfView,
                    te.aspect = r.aspectRatio,
                    te.near = r.nearClip,
                    te.far = r.farClip,
                    "Orthographic" === r.projection ? (Fe.enabled = !1,
                    Re.enabled = !0,
                    Ge.enabled = !1,
                    ee.remove(Te),
                    te.zoom = 1 / r.orthoZoom,
                    te.hyperfocusOffset = 1,
                    te.hyperfocusScale = 0,
                    te.inPerspectiveMode = !1,
                    te.inOrthographicMode = !0,
                    te.isOrthographicCamera = !0,
                    te.isPerspectiveCamera = !1) : (te.isOrthographicCamera = !1,
                    te.isPerspectiveCamera = !0,
                    te.inPerspectiveMode = !0,
                    te.inOrthographicMode = !1,
                    Ge.focalDepth = r.focalDepthEnabled ? r.focalDepth : r.targetDistance),
                    te.updateProjectionMatrix()),
                    r.newRadiusConstraint && (0,
                    x.initCameraRadiusConstraint)(e, t, r, r.newRadiusConstraint)
                },
                CameraTransform: function(t, r, n, i, a) {
                    if (t === ye && Ae) {
                        we === Me && a.Camera.upPosition || ((0,
                        x.initCamera)(e, !0, Me, t, me),
                        we = Me);
                        var o = a.Camera
                          , s = (0,
                        N.getRenderingMode)(e)
                          , u = r.target && o.targeted && o.upPosition && s !== N.RENDER_MODES.vr && !De.deviceTracking ? (0,
                        x.updateLookatTarget)(e, t, r, o) : r.transform;
                        (0,
                        w.setMatrixOn)(te, u)
                    }
                },
                Annotation: function(e, t, r, n) {
                    var i = "awayFromOrigin" === t.directionMode;
                    pe[e] = {
                        id: e,
                        annotation: t,
                        position: (0,
                        _.getScreenPositionNormalAlpha)(e, i, t.directionAxis, t.directionTarget),
                        visible: n.visible
                    }
                }
            };
            Je.BinMesh = Je.PolyMesh;
            var Ke = {
                Scene: ["Player", "Environment"],
                BinMesh: ["BinMesh", "Transform", "Material"],
                PolyMesh: ["PolyMesh", "Transform", "Material"],
                Light: ["Light", "Transform"],
                Camera: [["Transform", "CameraTransform"], "Camera"],
                Null: ["Null", "Transform"],
                Model: ["Null", "Transform"],
                Objects: ["Null"],
                MaterialLibrary: ["Null"],
                Material: ["PrefetchMaterialNull", "Material"],
                Image: ["Image"],
                Renderers: [],
                Passes: [],
                Pass: [],
                Renderer: [],
                Bone: ["Bone", "Transform"],
                Annotation: ["Annotation"]
            }
              , $e = {
                PolyMesh: {
                    Material: !0,
                    Transform: !0
                },
                BinMesh: {
                    Material: !0,
                    Transform: !0
                }
            }
              , et = new g.Box2
              , tt = new g.Vector3;
            return {
                attach: a,
                resize: i,
                translate: Y,
                deleteNode: Q,
                raycastSelect: Z,
                getCameraMouseRay: q,
                getNodeBoundingBox: H,
                getNodeListBoundingBox: W,
                getThreeObject: X,
                toScreenPosition: J,
                postTranslate: d,
                onLoad: R,
                getAnnotations: F,
                getContext: n,
                reset: K,
                scene: ee,
                camera: te,
                renderer: se,
                externals: Ee,
                textureCache: Se
            }
        }
        function o(e, t) {
            return (0,
            v.createTranslator)(e, a, t)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r(/*! babel-runtime/helpers/slicedToArray */
        39)
          , u = i(s)
          , l = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , c = i(l)
          , h = r(/*! babel-runtime/core-js/object/assign */
        2)
          , f = i(h)
          , d = r(/*! babel-runtime/core-js/object/values */
        85)
          , p = i(d);
        t.default = o;
        var m = r(/*! three */
        1)
          , g = n(m)
          , v = r(/*! ./translator */
        255)
          , y = (r(/*! ./bingeom */
        62),
        r(/*! ./materials */
        242))
          , M = (r(/*! ./polyMesh */
        243),
        r(/*! ./light */
        240))
          , w = r(/*! ./transform */
        254)
          , x = r(/*! ./camera */
        63)
          , A = r(/*! ./manipulators */
        241)
          , b = r(/*! ./utils/setMatrixOnNode */
        65)
          , T = i(b)
          , _ = r(/*! ./annotation */
        239)
          , E = r(/*! ../modules/sceneIO */
        19)
          , S = r(/*! ../modules/sceneGraph */
        9)
          , D = r(/*! ../modules/scene */
        4)
          , N = r(/*! ../modules/player */
        5)
          , I = r(/*! ../modules/commands */
        44)
          , L = r(/*! ../modules/selection */
        36)
          , C = r(/*! ../modules/utils/selectors */
        77)
          , O = r(/*! ./utils/calculateBoundingBox */
        142)
          , j = i(O)
          , R = r(/*! ./utils/deviceTracking */
        256)
          , P = i(R)
          , z = r(/*! ../polyMesh */
        80)
          , B = 1
          , U = 2
          , V = 3
          , k = 4
    }
    , /*!**************************************************!*\
  !*** ./src/translators/tools/firstPersonMode.js ***!
  \**************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t) {
            function r(e, t) {
                s[e] += t,
                a = new c.Vector3(s.x,s.y,s.z).normalize().multiplyScalar(T)
            }
            function n() {
                h = Date.now() - l,
                h = w(1, x(1e-5, h / _));
                var e = -(h - 1) * (h - 1) + 1;
                a.normalize().multiplyScalar(T * e)
            }
            var i = null
              , a = new c.Vector3(0,0,0)
              , s = {
                x: 0,
                y: 0,
                z: 0
            }
              , l = void 0
              , h = void 0;
            return {
                name: "firstPersonMode",
                active: !1,
                enabled: !0,
                options: {
                    movementMode: "fly",
                    keyboardEnabled: !0
                },
                display: {
                    playerTools: !1
                },
                heldKeys: [],
                tool: {
                    keydown: function(e) {
                        var t = A[e.key];
                        if (t && this.active) {
                            this.heldKeys.push(e.key);
                            var n = (0,
                            u.default)(b[t], 2)
                              , i = n[0]
                              , a = n[1];
                            this.heldKeys.length <= 1 && (l = Date.now()),
                            r(i, a)
                        }
                    },
                    keyup: function(e) {
                        var t = A[e.key];
                        if (t && this.active) {
                            var n = this.heldKeys.indexOf(e.key);
                            this.heldKeys.splice(n, 1);
                            var i = (0,
                            u.default)(b[t], 2)
                              , a = i[0]
                              , o = i[1];
                            r(a, -o)
                        }
                    },
                    keyheld: function(r) {
                        var i = this.heldKeys[0];
                        if (r.key === i && this.options.keyboardEnabled) {
                            n();
                            var s = o(e, a, this.options.movementMode);
                            s && t.externals.vrControls && t.externals.vrControls.offset.add(s)
                        }
                    }
                },
                activate: function() {
                    i || (i = (0,
                    p.get)(e, {
                        scene: !0,
                        plug: "Player",
                        property: "orbitMode"
                    })),
                    e.dispatch((0,
                    p.set)({
                        scene: !0,
                        plug: "Player",
                        property: "orbitMode"
                    }, "firstPerson"))
                },
                deactivate: function() {
                    e.dispatch((0,
                    p.set)({
                        scene: !0,
                        plug: "Player",
                        property: "orbitMode"
                    }, i)),
                    i = null
                }
            }
        }
        function o(e, t, r) {
            var n = (0,
            p.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , i = (0,
            d.getCamera)(e)
              , a = (0,
            d.getCameraWorldTransform)(e)
              , o = (0,
            y.default)(e, i)
              , s = (0,
            p.get)(e, {
                id: i,
                evalPlug: "Camera"
            });
            if (o && a && s.upPosition) {
                var u = new c.Vector3
                  , l = new c.Vector3;
                u.setFromMatrixPosition(a),
                l.setFromMatrixPosition(o);
                var h = (new c.Vector3).subVectors(l, u).normalize();
                "plane" === r && h.projectOnPlane(E).normalize();
                var m = (new c.Vector3).crossVectors(h, E).normalize()
                  , v = (new c.Vector3).addScaledVector(h, t.y).addScaledVector(m, t.x);
                return v.y < -u.y && n.constraintCameraY && (v.y = -u.y),
                u.add(v),
                l.add(v),
                a.setPosition(u),
                o.setPosition(l),
                (0,
                g.default)(a, o, s.upPosition),
                e.dispatch((0,
                M.merge)([i, "Transform", 0], (0,
                f.default)(a))),
                (0,
                p.get)(e, {
                    id: i,
                    evalPlug: "Transform"
                }).target || e.dispatch((0,
                M.merge)([M.virtualTargetId, "Transform", 0], (0,
                f.default)(o))),
                v
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = r(/*! babel-runtime/helpers/slicedToArray */
        39)
          , u = i(s);
        t.default = a;
        var l = r(/*! three */
        1)
          , c = n(l)
          , h = (r(/*! ../camera */
        63),
        r(/*! ../utils/decompose */
        28))
          , f = i(h)
          , d = r(/*! ../../modules/player */
        5)
          , p = r(/*! ../../modules/scene */
        4)
          , m = r(/*! ../utils/updateCameraLookAtTarget */
        38)
          , g = i(m)
          , v = r(/*! ../utils/getTargetWorldMatrix */
        33)
          , y = i(v)
          , M = r(/*! ../../modules/sceneGraph */
        9)
          , w = (Math.tan,
        Math.cos,
        Math.atan,
        Math.acos,
        Math.min)
          , x = Math.max
          , A = (Math.pow,
        Math.PI,
        Math.sqrt,
        {
            w: "FORWARD",
            a: "LEFT",
            s: "BACKWARD",
            d: "RIGHT",
            ArrowUp: "FORWARD",
            ArrowLeft: "LEFT",
            ArrowDown: "BACKWARD",
            ArrowRight: "RIGHT"
        })
          , b = {
            FORWARD: ["y", 1],
            BACKWARD: ["y", -1],
            LEFT: ["x", -1],
            RIGHT: ["x", 1]
        }
          , T = .2
          , _ = 2e3
          , E = new c.Vector3(0,1,0)
    }
    , /*!*********************************************!*\
  !*** ./src/translators/tools/fullscreen.js ***!
  \*********************************************/
    function(e, t, r) {
        "use strict";
        function n(e, t) {
            return {
                enabled: !0,
                display: !0,
                options: {},
                isActive: i.isFullscreen,
                activate: function() {
                    var t = e.getIn(["player", "playerElement"]);
                    ["requestFullscreen", "webkitRequestFullscreen", "mozRequestFullScreen", "msRequestFullscreen"].forEach(function(e) {
                        if (t[e])
                            return t[e]()
                    }),
                    e.dispatch((0,
                    i.setFullscreen)(!0))
                },
                deactivate: function() {
                    ["exitFullscreen", "webkitExitFullscreen", "mozCancelFullScreen", "msExitFullscreen"].forEach(function(e) {
                        if (document[e])
                            return document[e]()
                    }),
                    e.dispatch((0,
                    i.setFullscreen)(!1))
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = n;
        var i = r(/*! ../../modules/player */
        5)
    }
    , /*!***************************************!*\
  !*** ./src/translators/tools/home.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            return {
                label: "Home",
                enabled: !0,
                display: {
                    playerTools: !0
                },
                options: {},
                execute: function() {
                    var r = (0,
                    u.get)(e, {
                        scene: !0,
                        evalPlug: "Player"
                    })
                      , n = void 0;
                    if (r.orbitTarget)
                        n = (0,
                        u.getWorldTransform)(e, r.orbitTarget);
                    else {
                        var i = t.getNodeListBoundingBox([(0,
                        c.getSceneId)(e)]).getCenter();
                        (isNaN(i.x) || isNaN(i.y) || isNaN(i.z)) && i.set(0, 0, 0),
                        n = (new s.Matrix4).setPosition(i)
                    }
                    (0,
                    d.default)(e, l.virtualTargetId, n),
                    (0,
                    h.initCamera)(e, !0, r && r.camera)
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../modules/scene */
        4)
          , l = (r(/*! ../../modules/player */
        5),
        r(/*! ../../modules/sceneGraph */
        9))
          , c = r(/*! ../../modules/sceneIO */
        19)
          , h = r(/*! ../camera */
        63)
          , f = r(/*! ../utils/setMatrixOnNode */
        65)
          , d = n(f)
    }
    , /*!****************************************!*\
  !*** ./src/translators/tools/index.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = r(/*! ./orbit */
        138)
          , a = n(i)
          , o = r(/*! ./pan */
        250)
          , s = n(o)
          , u = r(/*! ./zoom */
        141)
          , l = n(u)
          , c = r(/*! ./nodeMove */
        135)
          , h = n(c)
          , f = r(/*! ./nodeRotate */
        136)
          , d = n(f)
          , p = r(/*! ./nodeScale */
        137)
          , m = n(p)
          , g = r(/*! ./nodeManipulate */
        249)
          , v = n(g)
          , y = r(/*! ./select */
        251)
          , M = n(y)
          , w = r(/*! ./fullscreen */
        246)
          , x = n(w)
          , A = r(/*! ./home */
        247)
          , b = n(A)
          , T = r(/*! ./vrMode */
        253)
          , _ = n(T)
          , E = r(/*! ./firstPersonMode */
        245)
          , S = n(E)
          , D = {
            orbit: a.default,
            pan: s.default,
            zoom: l.default,
            home: b.default,
            nodeMove: h.default,
            nodeRotate: d.default,
            nodeScale: m.default,
            nodeManipulate: v.default,
            select: M.default,
            fullscreen: x.default,
            vrMode: _.default,
            firstPersonMode: S.default
        };
        t.default = D
    }
    , /*!*************************************************!*\
  !*** ./src/translators/tools/nodeManipulate.js ***!
  \*************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            var r = !1;
            return {
                enabled: !0,
                display: {
                    playerTools: !1
                },
                options: {
                    displayGizmo: !0,
                    mode: "free",
                    plane: {
                        normal: {
                            x: 0,
                            y: 1,
                            z: 0
                        },
                        constant: 0
                    }
                },
                tool: {
                    drag: function(t) {
                        var n = this;
                        if (!this.active)
                            return !1;
                        if (1 == t.which) {
                            var i = function() {
                                var t = n;
                                return {
                                    v: {
                                        momentum: !r,
                                        handle: function(n) {
                                            switch (t.options.mode) {
                                            case "plane":
                                                (0,
                                                s.moveNodeOnPlane)(e, n.deltaX, n.deltaY, t.options.plane);
                                                break;
                                            case "objects":
                                                (0,
                                                s.moveNodeOnObjects)(e, n.clientX, n.clientY, t.options.objects);
                                                break;
                                            default:
                                                (0,
                                                s.moveNodeFree)(e, n.deltaX, n.deltaY, r)
                                            }
                                        }
                                    }
                                }
                            }();
                            if ("object" === ("undefined" == typeof i ? "undefined" : (0,
                            o.default)(i)))
                                return i.v
                        } else if (3 == t.which)
                            return {
                                momentum: !r,
                                handle: function(t) {
                                    (0,
                                    l.rotateNode)(e, t.deltaX, t.deltaY, r)
                                }
                            }
                    },
                    scroll: function(t) {
                        this.active && (0,
                        u.scaleNode)(e, t, r)
                    }
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/helpers/typeof */
        17)
          , o = n(a);
        t.default = i;
        var s = r(/*! ./nodeMove */
        135)
          , u = r(/*! ./nodeScale */
        137)
          , l = r(/*! ./nodeRotate */
        136)
    }
    , /*!**************************************!*\
  !*** ./src/translators/tools/pan.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            function r(t) {
                var r = t.deltaX
                  , n = t.deltaY
                  , i = 1;
                i = window.devicePixelRatio,
                o(e, new u.Vector2(r / i,n / i))
            }
            return {
                label: "Pan",
                enabled: !0,
                display: {
                    playerTools: !0
                },
                options: {},
                tool: {
                    drag: function(e) {
                        return !(!this.active && 2 !== e.which && 3 !== e.which && !e.shiftKey) && {
                            momentum: !0,
                            handle: function(e) {
                                r(e)
                            }
                        }
                    },
                    swipe: function(e) {
                        r(e)
                    }
                }
            }
        }
        function o(e, t) {
            var r = (0,
            h.getCamera)(e)
              , n = (0,
            f.get)(e, {
                id: r,
                evalPlug: "Camera"
            })
              , i = (0,
            f.get)(e, {
                scene: !0,
                evalPlug: "Player"
            })
              , a = (0,
            M.default)(e, r)
              , o = (0,
            f.getWorldTransform)(e, r)
              , s = (0,
            h.getRect)(e)
              , l = (0,
            v.default)((0,
            f.get)(e, {
                id: r,
                evalPlug: "Camera"
            }))
              , p = (new u.Vector2).copy(t).divide(s).multiplyScalar(2);
            p.x *= -1;
            var g = (new u.Matrix4).getInverse(o, !0);
            if (w.copy(l).multiply(g),
            A.setFromMatrixPosition(a).applyMatrix4(w),
            x.getInverse(w, !0),
            _.set(0, 0, A.z).applyMatrix4(x),
            T.set(p.x, p.y, A.z).applyMatrix4(x),
            b.copy(T).sub(_),
            n.radiusConstraint && b.length() > 0) {
                var y = n.radiusConstraint
                  , I = y.maxBoundingSphere
                  , L = y.minBoundingSphere;
                S.setFromMatrixPosition(o),
                D.setFromMatrixPosition(a);
                var C = (new u.Vector3).copy(b).normalize()
                  , O = new u.Ray(S,C)
                  , j = new u.Ray(D,C)
                  , R = j.intersectSphere(L).sub(D).length() - .001
                  , P = O.intersectSphere(L);
                P = P ? P.sub(S).length() - .001 : 1 / 0;
                var z = O.intersectSphere(I).sub(S).length() - .001
                  , B = Math.min(b.length(), R, P, z);
                b.normalize().multiplyScalar(B)
            }
            E.makeTranslation(b.x, b.y, b.z),
            N.addVectors(n.offset, b),
            n.offset = N,
            a.multiplyMatrices(E, a),
            o.multiplyMatrices(E, o),
            i.constraintCameraY && "trackball" !== i.orbitMode && (S.setFromMatrixPosition(o),
            D.setFromMatrixPosition(a),
            S.y < 0 && (D.y -= S.y,
            S.y = 0),
            a.setPosition(D),
            o.setPosition(S)),
            (0,
            m.default)(o, a, n.upPosition),
            e.dispatch((0,
            d.merge)([r, "Transform", 0], (0,
            c.default)(o))),
            e.dispatch((0,
            d.merge)([d.virtualTargetId, "Transform", 0], (0,
            c.default)(a)))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var s = r(/*! three */
        1)
          , u = i(s)
          , l = r(/*! ../utils/decompose */
        28)
          , c = n(l)
          , h = r(/*! ../../modules/player */
        5)
          , f = r(/*! ../../modules/scene */
        4)
          , d = r(/*! ../../modules/sceneGraph */
        9)
          , p = r(/*! ../utils/updateCameraLookAtTarget */
        38)
          , m = n(p)
          , g = r(/*! ../utils/getProjectionMatrix */
        64)
          , v = n(g)
          , y = r(/*! ../utils/getTargetWorldMatrix */
        33)
          , M = n(y)
          , w = (Math.tan,
        Math.cos,
        Math.atan,
        Math.acos,
        Math.min,
        Math.max,
        Math.pow,
        Math.PI,
        Math.sqrt,
        new u.Matrix4)
          , x = new u.Matrix4
          , A = new u.Vector3
          , b = new u.Vector3
          , T = new u.Vector3
          , _ = new u.Vector3
          , E = new u.Matrix4
          , S = new u.Vector3
          , D = new u.Vector3
          , N = new u.Vector3
    }
    , /*!*****************************************!*\
  !*** ./src/translators/tools/select.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e, t) {
            return {
                label: "Select",
                enabled: !0,
                display: {
                    playerTools: !1
                },
                options: {},
                tool: {
                    click: function(t) {
                        var r = (0,
                        i.filterNodesFromPosition)(e, t);
                        r.length && e.dispatch((0,
                        a.selectNode)(r[0]))
                    },
                    drag: function(e) {
                        return !(1 !== e.which || !this.active) && {
                            momentum: !1,
                            handle: function(e) {}
                        }
                    }
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = n;
        var i = r(/*! ../../modules/player */
        5)
          , a = r(/*! ../../modules/selection */
        36)
    }
    , /*!******************************************************!*\
  !*** ./src/translators/tools/utils/cameraControl.js ***!
  \******************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            var t = (0,
            i.getCommands)(e)
              , r = !1;
            return ["orbit", "pan", "zoom"].forEach(function(e) {
                r = r || t[e].active
            }),
            r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = n;
        var i = r(/*! ../../../modules/commands */
        44)
    }
    , /*!*****************************************!*\
  !*** ./src/translators/tools/vrMode.js ***!
  \*****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t) {
            var r = (0,
            c.getCamera)(e)
              , n = (0,
            m.default)(e)
              , i = (new l.Vector3).setFromMatrixPosition(n)
              , a = i.sub(t.position).length();
            i.set(0, 0, -a).applyQuaternion(t.quaternion).add(t.position);
            var o = new l.Vector3(0,1,0).applyQuaternion(t.quaternion);
            n.setPosition(i);
            var s = (0,
            y.get)(e, {
                id: r,
                evalPlug: "Camera"
            });
            s.upPosition = o,
            e.dispatch((0,
            v.merge)([r, "Transform", 0], (0,
            d.default)(t.matrix.clone()))),
            (0,
            y.get)(e, {
                id: r,
                evalPlug: "Transform"
            }).target || e.dispatch((0,
            v.merge)([v.virtualTargetId, "Transform", 0], (0,
            d.default)(n)))
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/helpers/typeof */
        17)
          , s = i(o);
        t.default = function(e, t) {
            function r(e) {
                return function(e) {
                    if (v.armObject) {
                        var t = v.getReticlePosition().clone();
                        t.y = 0;
                        var r = N.position.clone()
                          , n = t.addScaledVector(x.offset, 2).sub(r);
                        n.y = 0,
                        x.setOffset(n)
                    }
                }
            }
            function n(t) {
                return function(r) {
                    if (v.armObject) {
                        var n = ((0,
                        c.getCamera)(e),
                        v.getReticlePosition().clone());
                        n.y = 0,
                        t.position.add(n),
                        t.updateMatrix();
                        var i = t.position.clone();
                        x.setOffset(i)
                    }
                }
            }
            function i(e) {
                e.add(b),
                e.add(T),
                C = !0
            }
            function o(e) {
                D = n(e),
                window.addEventListener("touchend", D),
                S = r(e),
                window.addEventListener("thumbpadup", S)
            }
            function u() {
                window.removeEventListener("touchend", D),
                window.removeEventListener("thumbpadup", S),
                D = null,
                S = null
            }
            function f() {
                e.dispatch((0,
                h.activateCommand)("firstPersonMode")),
                e.dispatch((0,
                h.setCommandOptions)("firstPersonMode", {
                    movementMode: "plane"
                }))
            }
            function d() {
                e.dispatch((0,
                h.deactivateCommand)("firstPersonMode")),
                e.dispatch((0,
                h.setCommandOptions)("firstPersonMode", {
                    movementMode: L
                }))
            }
            var p = void 0
              , g = void 0
              , v = void 0
              , M = void 0
              , x = void 0
              , A = void 0
              , b = void 0
              , T = void 0
              , _ = void 0
              , E = void 0
              , S = void 0
              , D = void 0
              , N = void 0
              , I = void 0
              , L = void 0
              , C = !1
              , O = !1
              , j = !1
              , R = (t.scene,
            t.camera)
              , P = !1;
            return window.navigator.getVRDisplays().then(function(t) {
                t.length && (P = t[0].capabilities.canPresent,
                A = t[0].capabilities.hasExternalDisplay,
                e.dispatch((0,
                h.updateCommand)("vrMode", {
                    enabled: P
                })),
                g = t[0])
            }),
            {
                label: "VR mode",
                activeLabel: "Exit VR Mode",
                enabled: P,
                display: {
                    playerTools: !0
                },
                options: {
                    planeEnabled: !1,
                    navigationEnabled: !0,
                    keyboardEnabled: !0
                },
                isActive: c.isVRMode,
                widget: {
                    draw: function(e) {
                        var t = new l.PlaneGeometry(20,20,1,1)
                          , r = new l.MeshBasicMaterial({
                            color: 6710886
                        });
                        r.transparent = !0,
                        //!this.options.planeEnabled;
                        r.opacity = this.options.planeEnabled ? 1 : 0,
                        M = new l.Mesh(t,r),
                        M.rotation.x = .5 * -Math.PI,
                        v = new l.Reticle(R),
                        v.addCollider(M),
                        this.options.navigationEnabled && e.add(v.armObject),
                        e.add(v.dot),
                        e.add(M),
                        A && b && T && !C && i(e),
                        O = this.options.navigationEnabled,
                        this.options.navigationEnabled && o(e)
                    },
                    remove: function(e) {
                        this.options.navigationEnabled && u()
                    },
                    position: function(t) {
                        O !== this.options.navigationEnabled && (this.options.navigationEnabled ? (o(t),
                        t.add(v.armObject)) : (u(t),
                        t.remove(v.armObject)),
                        O = this.options.navigationEnabled),
                        j !== this.options.keyboardEnabled && (this.options.keyboardEnabled ? f() : d(),
                        j = this.options.keyboardEnabled),
                        x && (x.update(),
                        t.position.copy(x.offset)),
                        N && (N.updateMatrix(),
                        a(e, N)),
                        v.update(t),
                        b && T && !C && i(t),
                        A && b && T && _ ? (b.update(),
                        T.update(),
                        b.position.applyQuaternion(x.rotationalOffset),
                        T.position.applyQuaternion(x.rotationalOffset),
                        b.quaternion.premultiply(x.rotationalOffset),
                        T.quaternion.premultiply(x.rotationalOffset),
                        b.updateMatrix(),
                        T.updateMatrix(),
                        _.update()) : E && E.update();
                        var r = new l.Vector3(0,0,-1).applyQuaternion(R.quaternion)
                          , n = Math.min(r.y, 0)
                          , s = 1 - Math.sqrt(1 - n * n);
                        this.options.planeEnabled && (M.material.opacity = s),
                        Math.round(2 * t.position.x) / 2 - t.position.x,
                        Math.round(2 * t.position.z) / 2 - t.position.z,
                        t.updateMatrix()
                    }
                },
                activate: function() {
                    var t = this
                      , r = e.getTranslator();
                    if (I = (0,
                    h.isCommandActive)(e, "firstPersonMode"),
                    g) {
                        var n = function() {
                            if (p = new l.VREffect(r.renderer),
                            p.setVRDisplay(g),
                            r.externals.vrEffect = p,
                            !g.capabilities.canPresent)
                                return {
                                    v: void 0
                                };
                            var n = (0,
                            c.getCamera)(e)
                              , i = (new l.Vector3).setFromMatrixPosition((0,
                            y.getWorldTransform)(e, n));
                            i.y = 0;
                            var o = (new l.Vector3).setFromMatrixPosition((0,
                            m.default)(e, n)).sub(i);
                            o.y = 0,
                            o.normalize();
                            var s = (new l.Quaternion).setFromUnitVectors(new l.Vector3(0,0,-1), o);
                            return N = r.camera.clone(),
                            x = new w.default(N),
                            e.dispatch((0,
                            c.useVrCamera)(!0)),
                            {
                                v: p.requestPresent().then(function() {
                                    return L = (0,
                                    h.getCommands)(e).firstPersonMode.options.movementMode,
                                    t.options.keyboardEnabled ? f() : d(),
                                    j = t.options.keyboardEnabled,
                                    x.setOffset(i),
                                    x.setRotationalOffset(s),
                                    r.externals.vrControls = x,
                                    x.setStanding(!0),
                                    x.resetPose(),
                                    x.update(),
                                    N.updateMatrix(),
                                    a(e, N),
                                    A ? (b = new l.VRController("OpenVR Gamepad",0),
                                    b.standingMatrix = x.getStandingMatrix(),
                                    T = new l.VRController("OpenVR Gamepad",1),
                                    T.standingMatrix = x.getStandingMatrix(),
                                    _ = new l.VRController("Oculus Remote")) : E = new l.VRController("Daydream Controller"),
                                    e.dispatch((0,
                                    c.setRenderMode)(c.RENDER_MODES.vr)),
                                    e.dispatch((0,
                                    h.updateCommands)(h.MOUSE_CONTROLS, {
                                        enabled: !1
                                    })),
                                    e.setRequestAnimationFrame(g.requestAnimationFrame, g),
                                    g
                                }).catch(function(e) {
                                    throw console.log("Error Activating VR"),
                                    e
                                })
                            }
                        }();
                        if ("object" === ("undefined" == typeof n ? "undefined" : (0,
                        s.default)(n)))
                            return n.v
                    }
                },
                deactivate: function() {
                    var t = e.getTranslator();
                    g.isPresenting && p.exitPresent(),
                    e.setRequestAnimationFrame(),
                    I || d(),
                    e.dispatch((0,
                    c.setRenderMode)(c.RENDER_MODES.normal)),
                    e.dispatch((0,
                    h.updateCommands)(h.MOUSE_CONTROLS, {
                        enabled: !0
                    })),
                    e.dispatch((0,
                    c.useVrCamera)(!1)),
                    N = null,
                    x = null,
                    A ? (b = null,
                    T = null,
                    _ = null,
                    C = !1) : E = null,
                    v.removeCollider(M),
                    t.renderer.setScissorTest(!1)
                }
            }
        }
        ;
        var u = r(/*! three */
        1)
          , l = n(u);
        r(/*! webvr-polyfill */
        366),
        r(/*! ../utils/reticle */
        257);
        var c = r(/*! ../../modules/player */
        5)
          , h = r(/*! ../../modules/commands */
        44)
          , f = r(/*! ../utils/decompose */
        28)
          , d = i(f)
          , p = r(/*! ../utils/getTargetWorldMatrix */
        33)
          , m = i(p)
          , g = r(/*! ../utils/updateCameraLookAtTarget */
        38)
          , v = (i(g),
        r(/*! ../../modules/sceneGraph */
        9))
          , y = r(/*! ../../modules/scene */
        4)
          , M = r(/*! ../utils/vrControlsWrapper */
        143)
          , w = i(M)
    }
    , /*!**************************************!*\
  !*** ./src/translators/transform.js ***!
  \**************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e, t, r, n) {
            e.position.set(t.x, t.y, t.z),
            e.rotation.set(r.x, r.y, r.z, "ZYX"),
            e.scale.set(n.x, n.y, n.z)
        }
        function a(e, t) {
            var r = new s.Vector3
              , n = new s.Quaternion
              , a = new s.Vector3;
            t.decompose(r, n, a);
            var o = (new s.Vector3).copy((new s.Euler).setFromQuaternion(n, "ZYX"));
            i(e, r, o, a)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.setMatrixOn = a;
        var o = r(/*! three */
        1)
          , s = n(o)
    }
    , /*!***************************************!*\
  !*** ./src/translators/translator.js ***!
  \***************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t, r) {
            function n(t) {
                function r(e) {
                    var t = n.nodes[e];
                    if (t) {
                        var o = n.evaluatedNodes[e]
                          , u = g[e];
                        u && u._v === o._v && u._ev === o._ev || (s.translate(e, o, t),
                        a += 1),
                        i[e] = {
                            _v: o._v,
                            _ev: o._ev
                        };
                        var l = !0
                          , h = !1
                          , f = void 0;
                        try {
                            for (var d, p = (0,
                            c.default)(t.children); !(l = (d = p.next()).done); l = !0) {
                                var m = d.value;
                                r(m)
                            }
                        } catch (e) {
                            h = !0,
                            f = e
                        } finally {
                            try {
                                !l && p.return && p.return()
                            } finally {
                                if (h)
                                    throw f
                            }
                        }
                    }
                }
                var n = (0,
                f.getEvalSceneGraph)(e);
                if (m === n._ev)
                    return 0;
                var i = {}
                  , a = 0;
                r(t),
                n.nodes[f.virtualCameraId] && r(f.virtualCameraId),
                n.nodes[f.vrCameraId] && r(f.vrCameraId);
                var o = !0
                  , l = !1
                  , h = void 0;
                try {
                    for (var d, p = (0,
                    c.default)((0,
                    u.default)(g)); !(o = (d = p.next()).done); o = !0) {
                        var v = d.value;
                        i[v] || s.deleteNode(v)
                    }
                } catch (e) {
                    l = !0,
                    h = e
                } finally {
                    try {
                        !o && p.return && p.return()
                    } finally {
                        if (l)
                            throw h
                    }
                }
                return g = i,
                m = n._ev,
                a
            }
            function i() {
                s.reset();
                var e = !0
                  , t = !1
                  , r = void 0;
                try {
                    for (var n, i = (0,
                    c.default)((0,
                    u.default)(g)); !(e = (n = i.next()).done); e = !0) {
                        var a = n.value;
                        s.deleteNode(a)
                    }
                } catch (e) {
                    t = !0,
                    r = e
                } finally {
                    try {
                        !e && i.return && i.return()
                    } finally {
                        if (t)
                            throw r
                    }
                }
                m = null,
                g = {}
            }
            var a = {}
              , s = t(e, r, a)
              , l = void e.get("player")
              , m = null
              , g = {};
            return e.getIn(["player", "renderingMode"]),
            (0,
            o.default)({}, p, s, {
                update: function() {
                    var t = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    (0,
                    h.getSceneId)(e))
                      , r = (0,
                    h.getScenePhase)(e);
                    if (!t)
                        return void (l = null);
                    (t !== l || r < h.SCENE_PHASES.RENDERING) && (i(),
                    l = t);
                    var a = n(t)
                      , o = r >= h.SCENE_PHASES.RENDERING
                      , u = r >= h.SCENE_PHASES.PRELOADING
                      , c = r >= h.SCENE_PHASES.LOADED
                      , f = r >= h.SCENE_PHASES.RENDERED;
                    !o && a && e.dispatch((0,
                    h.markRenderingScene)()),
                    c && !f && e.dispatch((0,
                    h.markRenderedScene)()),
                    !c && u && (0,
                    h.areAssetsLoaded)(e) && (s.onLoad(),
                    e.dispatch((0,
                    h.markLoaded)())),
                    !u && (0,
                    h.areAssetsPreloaded)(e) && e.dispatch((0,
                    h.markPreloaded)()),
                    u && s.postTranslate(),
                    e.dispatch((0,
                    d.incrementTime)())
                }
            })
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var a = r(/*! babel-runtime/core-js/object/assign */
        2)
          , o = n(a)
          , s = r(/*! babel-runtime/core-js/object/keys */
        8)
          , u = n(s)
          , l = r(/*! babel-runtime/core-js/get-iterator */
        29)
          , c = n(l);
        t.createTranslator = i;
        var h = r(/*! ../modules/sceneIO */
        19)
          , f = r(/*! ../modules/sceneGraph */
        9)
          , d = r(/*! ../modules/animation */
        37)
          , p = {
            onLoad: function() {},
            postTranslate: function() {},
            handleStateChanges: function() {}
        }
    }
    , /*!*************************************************!*\
  !*** ./src/translators/utils/deviceTracking.js ***!
  \*************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function a(e, t) {
            function r() {
                a && a.update(),
                i.updateMatrix(),
                n(i)
            }
            function n(t) {
                var r = (0,
                u.getCamera)(e)
                  , n = (0,
                p.default)(e)
                  , i = (new s.Vector3).setFromMatrixPosition(n)
                  , a = i.sub(t.position).length();
                i.set(0, 0, -a).applyQuaternion(t.quaternion).add(t.position);
                var o = new s.Vector3(0,1,0).applyQuaternion(t.quaternion);
                n.setPosition(i);
                var h = (0,
                l.get)(e, {
                    id: r,
                    evalPlug: "Camera"
                });
                h.upPosition = o,
                e.dispatch((0,
                c.set)([r, "Transform", 0, "rotation"], (0,
                f.default)(t.matrix.clone()).rotation)),
                (0,
                l.get)(e, {
                    id: r,
                    evalPlug: "Transform"
                }).target || e.dispatch((0,
                c.merge)([c.virtualTargetId, "Transform", 0], (0,
                f.default)(n)))
            }
            var i = new s.Camera
              , a = new g.default(i);
            return t.vrControls = a,
            window.addEventListener("deviceorientation", r),
            r
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = a;
        var o = r(/*! three */
        1)
          , s = i(o)
          , u = r(/*! ../../modules/player */
        5)
          , l = r(/*! ../../modules/scene */
        4)
          , c = r(/*! ../../modules/sceneGraph */
        9)
          , h = r(/*! ./decompose */
        28)
          , f = n(h)
          , d = r(/*! ./getTargetWorldMatrix */
        33)
          , p = n(d)
          , m = r(/*! ./vrControlsWrapper */
        143)
          , g = n(m)
    }
    , /*!******************************************!*\
  !*** ./src/translators/utils/reticle.js ***!
  \******************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        var i = r(/*! three */
        1)
          , a = n(i);
        a.Reticle = function(e) {
            var t = {};
            t.armObject = null,
            t.reticleObject = null,
            t.dot = null,
            t.intersection = null,
            t.colliders = [];
            var r = new a.MeshBasicMaterial({
                color: "#a9a9a9",
                transparent: !0,
                opacity: 0
            })
              , n = new a.MeshBasicMaterial({
                color: "#ff0000",
                transparent: !0,
                opacity: .7
            });
            return t.createDefaultObject = function(e, t, n) {
                if (n)
                    var i = new a.SphereGeometry(.007,32,t);
                else
                    var i = new a.TorusGeometry(.2,.04,16,100);
                var o = new a.Mesh(i,r);
                return o.position.copy(e),
                o.rotation.x = .5 * -Math.PI,
                o
            }
            ,
            t.init = function(e) {
                this.camera = e,
                this.armObject = new a.Object3D,
                this.reticleObject = this.createDefaultObject(new a.Vector3(0,0,-.5), .01, !1),
                this.armObject.add(this.reticleObject),
                this.dot = this.createDefaultObject(new a.Vector3(0,0,-.5), .01, !0),
                this.camera.add(this.armObject),
                this.camera.add(this.dot),
                this.startClock()
            }
            ,
            t.getReticlePosition = function() {
                return t.reticleObject.position
            }
            ,
            t.remvoeFromList = function(e, t) {
                var r = t.indexOf(e);
                r > -1 && t.splice(r, 1)
            }
            ,
            t.addCollider = function(e) {
                this.colliders.push(e)
            }
            ,
            t.removeCollider = function(e) {
                this.remvoeFromList(e, t.colliders)
            }
            ,
            t.update = function(e) {
                var t = new a.Vector3;
                this.camera.getWorldDirection(t);
                var i = new a.Raycaster(this.camera.position,t)
                  , o = i.intersectObjects(this.colliders);
                o.length > 0 ? (this.intersection = o[0],
                this.reticleObject.position.copy(this.intersection.point),
                e && this.reticleObject.position.sub(e.position),
                this.reticleObject.material = n,
                this.dot.material.opacity = 0) : (this.dot.material.opacity = 1,
                this.reticleObject.material = r)
            }
            ,
            t.startClock = function() {
                this.clock = new a.Clock(!0)
            }
            ,
            t.init(e),
            t
        }
    }
    , /*!***********************************!*\
  !*** ./src/utils/eventEmitter.js ***!
  \***********************************/
    function(e, t) {
        "use strict";
        function r() {
            function e(e, t, r) {
                return (i[e] || (i[e] = [])).push({
                    fn: t,
                    ctx: r
                }),
                this
            }
            function t(t, r, i) {
                function a() {
                    n(t, a),
                    r.apply(i, arguments)
                }
                return a._ = r,
                e(t, a, i)
            }
            function r(e) {
                var t = [].slice.call(arguments, 1)
                  , r = (i[e] || []).slice()
                  , n = 0
                  , a = r.length;
                for (n; n < a; n++)
                    r[n].fn.apply(r[n].ctx, t);
                return this
            }
            function n(e, t) {
                var r = i[e]
                  , n = [];
                if (r && t)
                    for (var a = 0, o = r.length; a < o; a++)
                        r[a].fn !== t && r[a].fn._ !== t && n.push(r[a]);
                return n.length ? i[e] = n : delete i[e],
                this
            }
            var i = {};
            return {
                on: e,
                once: t,
                emit: r,
                off: n
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = r
    }
    , /*!***********************************************!*\
  !*** ./~/babel-runtime/core-js/array/from.js ***!
  \***********************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/array/from */
            273),
            __esModule: !0
        }
    }
    , /*!************************************************!*\
  !*** ./~/babel-runtime/core-js/is-iterable.js ***!
  \************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/is-iterable */
            275),
            __esModule: !0
        }
    }
    , /*!******************************************************!*\
  !*** ./~/babel-runtime/core-js/number/is-integer.js ***!
  \******************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/number/is-integer */
            278),
            __esModule: !0
        }
    }
    , /*!**************************************************!*\
  !*** ./~/babel-runtime/core-js/object/freeze.js ***!
  \**************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/freeze */
            282),
            __esModule: !0
        }
    }
    , /*!***********************************************************************!*\
  !*** ./~/babel-runtime/core-js/object/get-own-property-descriptor.js ***!
  \***********************************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/get-own-property-descriptor */
            283),
            __esModule: !0
        }
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/core-js/object/set-prototype-of.js ***!
  \************************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/object/set-prototype-of */
            286),
            __esModule: !0
        }
    }
    , /*!**************************************************!*\
  !*** ./~/babel-runtime/core-js/set-immediate.js ***!
  \**************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/set-immediate */
            289),
            __esModule: !0
        }
    }
    , /*!*******************************************!*\
  !*** ./~/babel-runtime/core-js/symbol.js ***!
  \*******************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/symbol */
            290),
            __esModule: !0
        }
    }
    , /*!****************************************************!*\
  !*** ./~/babel-runtime/core-js/symbol/iterator.js ***!
  \****************************************************/
    function(e, t, r) {
        e.exports = {
            default: r(/*! core-js/library/fn/symbol/iterator */
            291),
            __esModule: !0
        }
    }
    , /*!***************************************************!*\
  !*** ./~/babel-runtime/helpers/classCallCheck.js ***!
  \***************************************************/
    function(e, t) {
        "use strict";
        t.__esModule = !0,
        t.default = function(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
    }
    , /*!************************************************!*\
  !*** ./~/babel-runtime/helpers/createClass.js ***!
  \************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/object/define-property */
        144)
          , a = n(i);
        t.default = function() {
            function e(e, t) {
                for (var r = 0; r < t.length; r++) {
                    var n = t[r];
                    n.enumerable = n.enumerable || !1,
                    n.configurable = !0,
                    "value"in n && (n.writable = !0),
                    (0,
                    a.default)(e, n.key, n)
                }
            }
            return function(t, r, n) {
                return r && e(t.prototype, r),
                n && e(t, n),
                t
            }
        }()
    }
    , /*!****************************************!*\
  !*** ./~/babel-runtime/helpers/get.js ***!
  \****************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/object/get-prototype-of */
        84)
          , a = n(i)
          , o = r(/*! ../core-js/object/get-own-property-descriptor */
        263)
          , s = n(o);
        t.default = function e(t, r, n) {
            null === t && (t = Function.prototype);
            var i = (0,
            s.default)(t, r);
            if (void 0 === i) {
                var o = (0,
                a.default)(t);
                return null === o ? void 0 : e(o, r, n)
            }
            if ("value"in i)
                return i.value;
            var u = i.get;
            return void 0 !== u ? u.call(n) : void 0
        }
    }
    , /*!*********************************************!*\
  !*** ./~/babel-runtime/helpers/inherits.js ***!
  \*********************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../core-js/object/set-prototype-of */
        264)
          , a = n(i)
          , o = r(/*! ../core-js/object/create */
        47)
          , s = n(o)
          , u = r(/*! ../helpers/typeof */
        17)
          , l = n(u);
        t.default = function(e, t) {
            if ("function" != typeof t && null !== t)
                throw new TypeError("Super expression must either be null or a function, not " + ("undefined" == typeof t ? "undefined" : (0,
                l.default)(t)));
            e.prototype = (0,
            s.default)(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }),
            t && (a.default ? (0,
            a.default)(e, t) : e.__proto__ = t)
        }
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/helpers/possibleConstructorReturn.js ***!
  \**************************************************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        t.__esModule = !0;
        var i = r(/*! ../helpers/typeof */
        17)
          , a = n(i);
        t.default = function(e, t) {
            if (!e)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" !== ("undefined" == typeof t ? "undefined" : (0,
            a.default)(t)) && "function" != typeof t ? e : t
        }
    }
    , /*!************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/array/from.js ***!
  \************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.string.iterator */
        50),
        r(/*! ../../modules/es6.array.from */
        318),
        e.exports = r(/*! ../../modules/_core */
        6).Array.from
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/get-iterator.js ***!
  \**************************************************************/
    function(e, t, r) {
        r(/*! ../modules/web.dom.iterable */
        56),
        r(/*! ../modules/es6.string.iterator */
        50),
        e.exports = r(/*! ../modules/core.get-iterator */
        316)
    }
    , /*!*************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/is-iterable.js ***!
  \*************************************************************/
    function(e, t, r) {
        r(/*! ../modules/web.dom.iterable */
        56),
        r(/*! ../modules/es6.string.iterator */
        50),
        e.exports = r(/*! ../modules/core.is-iterable */
        317)
    }
    , /*!****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/json/stringify.js ***!
  \****************************************************************/
    function(e, t, r) {
        var n = r(/*! ../../modules/_core */
        6)
          , i = n.JSON || (n.JSON = {
            stringify: JSON.stringify
        });
        e.exports = function(e) {
            return i.stringify.apply(i, arguments)
        }
    }
    , /*!*****************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/map.js ***!
  \*****************************************************/
    function(e, t, r) {
        r(/*! ../modules/es6.object.to-string */
        105),
        r(/*! ../modules/es6.string.iterator */
        50),
        r(/*! ../modules/web.dom.iterable */
        56),
        r(/*! ../modules/es6.map */
        320),
        r(/*! ../modules/es7.map.to-json */
        332),
        e.exports = r(/*! ../modules/_core */
        6).Map
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/number/is-integer.js ***!
  \*******************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.number.is-integer */
        321),
        e.exports = r(/*! ../../modules/_core */
        6).Number.isInteger
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/assign.js ***!
  \***************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.assign */
        322),
        e.exports = r(/*! ../../modules/_core */
        6).Object.assign
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/create.js ***!
  \***************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.create */
        323);
        var n = r(/*! ../../modules/_core */
        6).Object;
        e.exports = function(e, t) {
            return n.create(e, t)
        }
    }
    , /*!************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/define-property.js ***!
  \************************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.define-property */
        324);
        var n = r(/*! ../../modules/_core */
        6).Object;
        e.exports = function(e, t, r) {
            return n.defineProperty(e, t, r)
        }
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/freeze.js ***!
  \***************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.freeze */
        325),
        e.exports = r(/*! ../../modules/_core */
        6).Object.freeze
    }
    , /*!************************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/get-own-property-descriptor.js ***!
  \************************************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.get-own-property-descriptor */
        326);
        var n = r(/*! ../../modules/_core */
        6).Object;
        e.exports = function(e, t) {
            return n.getOwnPropertyDescriptor(e, t)
        }
    }
    , /*!*************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/get-prototype-of.js ***!
  \*************************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.get-prototype-of */
        327),
        e.exports = r(/*! ../../modules/_core */
        6).Object.getPrototypeOf
    }
    , /*!*************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/keys.js ***!
  \*************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.keys */
        328),
        e.exports = r(/*! ../../modules/_core */
        6).Object.keys
    }
    , /*!*************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/set-prototype-of.js ***!
  \*************************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.object.set-prototype-of */
        329),
        e.exports = r(/*! ../../modules/_core */
        6).Object.setPrototypeOf
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/object/values.js ***!
  \***************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es7.object.values */
        333),
        e.exports = r(/*! ../../modules/_core */
        6).Object.values
    }
    , /*!*********************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/promise.js ***!
  \*********************************************************/
    function(e, t, r) {
        r(/*! ../modules/es6.object.to-string */
        105),
        r(/*! ../modules/es6.string.iterator */
        50),
        r(/*! ../modules/web.dom.iterable */
        56),
        r(/*! ../modules/es6.promise */
        330),
        e.exports = r(/*! ../modules/_core */
        6).Promise
    }
    , /*!***************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/set-immediate.js ***!
  \***************************************************************/
    function(e, t, r) {
        r(/*! ../modules/web.immediate */
        336),
        e.exports = r(/*! ../modules/_core */
        6).setImmediate
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/symbol/index.js ***!
  \**************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.symbol */
        331),
        r(/*! ../../modules/es6.object.to-string */
        105),
        r(/*! ../../modules/es7.symbol.async-iterator */
        334),
        r(/*! ../../modules/es7.symbol.observable */
        335),
        e.exports = r(/*! ../../modules/_core */
        6).Symbol
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/fn/symbol/iterator.js ***!
  \*****************************************************************/
    function(e, t, r) {
        r(/*! ../../modules/es6.string.iterator */
        50),
        r(/*! ../../modules/web.dom.iterable */
        56),
        e.exports = r(/*! ../../modules/_wks-ext */
        103).f("iterator")
    }
    , /*!**************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js ***!
  \**************************************************************************/
    function(e, t) {
        e.exports = function() {}
    }
    , /*!***************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_array-from-iterable.js ***!
  \***************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_for-of */
        68);
        e.exports = function(e, t) {
            var r = [];
            return n(e, !1, r.push, r, t),
            r
        }
    }
    , /*!**********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_array-includes.js ***!
  \**********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-iobject */
        32)
          , i = r(/*! ./_to-length */
        73)
          , a = r(/*! ./_to-index */
        315);
        e.exports = function(e) {
            return function(t, r, o) {
                var s, u = n(t), l = i(u.length), c = a(o, l);
                if (e && r != r) {
                    for (; l > c; )
                        if (s = u[c++],
                        s != s)
                            return !0
                } else
                    for (; l > c; c++)
                        if ((e || c in u) && u[c] === r)
                            return e || c || 0;
                return !e && -1
            }
        }
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_array-methods.js ***!
  \*********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_ctx */
        34)
          , i = r(/*! ./_iobject */
        92)
          , a = r(/*! ./_to-object */
        49)
          , o = r(/*! ./_to-length */
        73)
          , s = r(/*! ./_array-species-create */
        297);
        e.exports = function(e, t) {
            var r = 1 == e
              , u = 2 == e
              , l = 3 == e
              , c = 4 == e
              , h = 6 == e
              , f = 5 == e || h
              , d = t || s;
            return function(t, s, p) {
                for (var m, g, v = a(t), y = i(v), M = n(s, p, 3), w = o(y.length), x = 0, A = r ? d(t, w) : u ? d(t, 0) : void 0; w > x; x++)
                    if ((f || x in y) && (m = y[x],
                    g = M(m, x, v),
                    e))
                        if (r)
                            A[x] = g;
                        else if (g)
                            switch (e) {
                            case 3:
                                return !0;
                            case 5:
                                return m;
                            case 6:
                                return x;
                            case 2:
                                A.push(m)
                            }
                        else if (c)
                            return !1;
                return h ? -1 : l || c ? c : A
            }
        }
    }
    , /*!*********************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_array-species-constructor.js ***!
  \*********************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25)
          , i = r(/*! ./_is-array */
        148)
          , a = r(/*! ./_wks */
        13)("species");
        e.exports = function(e) {
            var t;
            return i(e) && (t = e.constructor,
            "function" != typeof t || t !== Array && !i(t.prototype) || (t = void 0),
            n(t) && (t = t[a],
            null === t && (t = void 0))),
            void 0 === t ? Array : t
        }
    }
    , /*!****************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_array-species-create.js ***!
  \****************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_array-species-constructor */
        296);
        e.exports = function(e, t) {
            return new (n(e))(t)
        }
    }
    , /*!*************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_collection-strong.js ***!
  \*************************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_object-dp */
        22).f
          , i = r(/*! ./_object-create */
        71)
          , a = r(/*! ./_redefine-all */
        96)
          , o = r(/*! ./_ctx */
        34)
          , s = r(/*! ./_an-instance */
        89)
          , u = r(/*! ./_defined */
        67)
          , l = r(/*! ./_for-of */
        68)
          , c = r(/*! ./_iter-define */
        93)
          , h = r(/*! ./_iter-step */
        151)
          , f = r(/*! ./_set-species */
        156)
          , d = r(/*! ./_descriptors */
        24)
          , p = r(/*! ./_meta */
        70).fastKey
          , m = d ? "_s" : "size"
          , g = function(e, t) {
            var r, n = p(t);
            if ("F" !== n)
                return e._i[n];
            for (r = e._f; r; r = r.n)
                if (r.k == t)
                    return r
        };
        e.exports = {
            getConstructor: function(e, t, r, c) {
                var h = e(function(e, n) {
                    s(e, h, t, "_i"),
                    e._i = i(null),
                    e._f = void 0,
                    e._l = void 0,
                    e[m] = 0,
                    void 0 != n && l(n, r, e[c], e)
                });
                return a(h.prototype, {
                    clear: function() {
                        for (var e = this, t = e._i, r = e._f; r; r = r.n)
                            r.r = !0,
                            r.p && (r.p = r.p.n = void 0),
                            delete t[r.i];
                        e._f = e._l = void 0,
                        e[m] = 0
                    },
                    delete: function(e) {
                        var t = this
                          , r = g(t, e);
                        if (r) {
                            var n = r.n
                              , i = r.p;
                            delete t._i[r.i],
                            r.r = !0,
                            i && (i.n = n),
                            n && (n.p = i),
                            t._f == r && (t._f = n),
                            t._l == r && (t._l = i),
                            t[m]--
                        }
                        return !!r
                    },
                    forEach: function(e) {
                        s(this, h, "forEach");
                        for (var t, r = o(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.n : this._f; )
                            for (r(t.v, t.k, this); t && t.r; )
                                t = t.p
                    },
                    has: function(e) {
                        return !!g(this, e)
                    }
                }),
                d && n(h.prototype, "size", {
                    get: function() {
                        return u(this[m])
                    }
                }),
                h
            },
            def: function(e, t, r) {
                var n, i, a = g(e, t);
                return a ? a.v = r : (e._l = a = {
                    i: i = p(t, !0),
                    k: t,
                    v: r,
                    p: n = e._l,
                    n: void 0,
                    r: !1
                },
                e._f || (e._f = a),
                n && (n.n = a),
                e[m]++,
                "F" !== i && (e._i[i] = a)),
                e
            },
            getEntry: g,
            setStrong: function(e, t, r) {
                c(e, t, function(e, t) {
                    this._t = e,
                    this._k = t,
                    this._l = void 0
                }, function() {
                    for (var e = this, t = e._k, r = e._l; r && r.r; )
                        r = r.p;
                    return e._t && (e._l = r = r ? r.n : e._t._f) ? "keys" == t ? h(0, r.k) : "values" == t ? h(0, r.v) : h(0, [r.k, r.v]) : (e._t = void 0,
                    h(1))
                }, r ? "entries" : "values", !r, !0),
                f(t)
            }
        }
    }
    , /*!**************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_collection-to-json.js ***!
  \**************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_classof */
        66)
          , i = r(/*! ./_array-from-iterable */
        293);
        e.exports = function(e) {
            return function() {
                if (n(this) != e)
                    throw TypeError(e + "#toJSON isn't generic");
                return i(this)
            }
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_collection.js ***!
  \******************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_global */
        15)
          , i = r(/*! ./_export */
        14)
          , a = r(/*! ./_meta */
        70)
          , o = r(/*! ./_fails */
        40)
          , s = r(/*! ./_hide */
        35)
          , u = r(/*! ./_redefine-all */
        96)
          , l = r(/*! ./_for-of */
        68)
          , c = r(/*! ./_an-instance */
        89)
          , h = r(/*! ./_is-object */
        25)
          , f = r(/*! ./_set-to-string-tag */
        55)
          , d = r(/*! ./_object-dp */
        22).f
          , p = r(/*! ./_array-methods */
        295)(0)
          , m = r(/*! ./_descriptors */
        24);
        e.exports = function(e, t, r, g, v, y) {
            var M = n[e]
              , w = M
              , x = v ? "set" : "add"
              , A = w && w.prototype
              , b = {};
            return m && "function" == typeof w && (y || A.forEach && !o(function() {
                (new w).entries().next()
            })) ? (w = t(function(t, r) {
                c(t, w, e, "_c"),
                t._c = new M,
                void 0 != r && l(r, v, t[x], t)
            }),
            p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","), function(e) {
                var t = "add" == e || "set" == e;
                e in A && (!y || "clear" != e) && s(w.prototype, e, function(r, n) {
                    if (c(this, w, e),
                    !t && y && !h(r))
                        return "get" == e && void 0;
                    var i = this._c[e](0 === r ? 0 : r, n);
                    return t ? this : i
                })
            }),
            "size"in A && d(w.prototype, "size", {
                get: function() {
                    return this._c.size
                }
            })) : (w = g.getConstructor(t, e, v, x),
            u(w.prototype, r),
            a.NEED = !0),
            f(w, e),
            b[e] = w,
            i(i.G + i.W + i.F, b),
            y || g.setStrong(w, e, v),
            w
        }
    }
    , /*!***********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_create-property.js ***!
  \***********************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_object-dp */
        22)
          , i = r(/*! ./_property-desc */
        54);
        e.exports = function(e, t, r) {
            t in e ? n.f(e, t, i(0, r)) : e[t] = r
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_enum-keys.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-keys */
        42)
          , i = r(/*! ./_object-gops */
        95)
          , a = r(/*! ./_object-pie */
        53);
        e.exports = function(e) {
            var t = n(e)
              , r = i.f;
            if (r)
                for (var o, s = r(e), u = a.f, l = 0; s.length > l; )
                    u.call(e, o = s[l++]) && t.push(o);
            return t
        }
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_invoke.js ***!
  \**************************************************************/
    function(e, t) {
        e.exports = function(e, t, r) {
            var n = void 0 === r;
            switch (t.length) {
            case 0:
                return n ? e() : e.call(r);
            case 1:
                return n ? e(t[0]) : e.call(r, t[0]);
            case 2:
                return n ? e(t[0], t[1]) : e.call(r, t[0], t[1]);
            case 3:
                return n ? e(t[0], t[1], t[2]) : e.call(r, t[0], t[1], t[2]);
            case 4:
                return n ? e(t[0], t[1], t[2], t[3]) : e.call(r, t[0], t[1], t[2], t[3])
            }
            return e.apply(r, t)
        }
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_is-integer.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25)
          , i = Math.floor;
        e.exports = function(e) {
            return !n(e) && isFinite(e) && i(e) === e
        }
    }
    , /*!*******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_iter-create.js ***!
  \*******************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_object-create */
        71)
          , i = r(/*! ./_property-desc */
        54)
          , a = r(/*! ./_set-to-string-tag */
        55)
          , o = {};
        r(/*! ./_hide */
        35)(o, r(/*! ./_wks */
        13)("iterator"), function() {
            return this
        }),
        e.exports = function(e, t, r) {
            e.prototype = n(o, {
                next: i(1, r)
            }),
            a(e, t + " Iterator")
        }
    }
    , /*!*************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_keyof.js ***!
  \*************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-keys */
        42)
          , i = r(/*! ./_to-iobject */
        32);
        e.exports = function(e, t) {
            for (var r, a = i(e), o = n(a), s = o.length, u = 0; s > u; )
                if (a[r = o[u++]] === t)
                    return r
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_microtask.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_global */
        15)
          , i = r(/*! ./_task */
        99).set
          , a = n.MutationObserver || n.WebKitMutationObserver
          , o = n.process
          , s = n.Promise
          , u = "process" == r(/*! ./_cof */
        52)(o);
        e.exports = function() {
            var e, t, r, l = function() {
                var n, i;
                for (u && (n = o.domain) && n.exit(); e; ) {
                    i = e.fn,
                    e = e.next;
                    try {
                        i()
                    } catch (n) {
                        throw e ? r() : t = void 0,
                        n
                    }
                }
                t = void 0,
                n && n.enter()
            };
            if (u)
                r = function() {
                    o.nextTick(l)
                }
                ;
            else if (a) {
                var c = !0
                  , h = document.createTextNode("");
                new a(l).observe(h, {
                    characterData: !0
                }),
                r = function() {
                    h.data = c = !c
                }
            } else if (s && s.resolve) {
                var f = s.resolve();
                r = function() {
                    f.then(l)
                }
            } else
                r = function() {
                    i.call(n, l)
                }
                ;
            return function(n) {
                var i = {
                    fn: n,
                    next: void 0
                };
                t && (t.next = i),
                e || (e = i,
                r()),
                t = i
            }
        }
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-assign.js ***!
  \*********************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_object-keys */
        42)
          , i = r(/*! ./_object-gops */
        95)
          , a = r(/*! ./_object-pie */
        53)
          , o = r(/*! ./_to-object */
        49)
          , s = r(/*! ./_iobject */
        92)
          , u = Object.assign;
        e.exports = !u || r(/*! ./_fails */
        40)(function() {
            var e = {}
              , t = {}
              , r = Symbol()
              , n = "abcdefghijklmnopqrst";
            return e[r] = 7,
            n.split("").forEach(function(e) {
                t[e] = e
            }),
            7 != u({}, e)[r] || Object.keys(u({}, t)).join("") != n
        }) ? function(e, t) {
            for (var r = o(e), u = arguments.length, l = 1, c = i.f, h = a.f; u > l; )
                for (var f, d = s(arguments[l++]), p = c ? n(d).concat(c(d)) : n(d), m = p.length, g = 0; m > g; )
                    h.call(d, f = p[g++]) && (r[f] = d[f]);
            return r
        }
        : u
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-dps.js ***!
  \******************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-dp */
        22)
          , i = r(/*! ./_an-object */
        31)
          , a = r(/*! ./_object-keys */
        42);
        e.exports = r(/*! ./_descriptors */
        24) ? Object.defineProperties : function(e, t) {
            i(e);
            for (var r, o = a(t), s = o.length, u = 0; s > u; )
                n.f(e, r = o[u++], t[r]);
            return e
        }
    }
    , /*!***********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-gopn-ext.js ***!
  \***********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-iobject */
        32)
          , i = r(/*! ./_object-gopn */
        152).f
          , a = {}.toString
          , o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []
          , s = function(e) {
            try {
                return i(e)
            } catch (e) {
                return o.slice()
            }
        };
        e.exports.f = function(e) {
            return o && "[object Window]" == a.call(e) ? s(e) : i(n(e))
        }
    }
    , /*!***********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_object-to-array.js ***!
  \***********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_object-keys */
        42)
          , i = r(/*! ./_to-iobject */
        32)
          , a = r(/*! ./_object-pie */
        53).f;
        e.exports = function(e) {
            return function(t) {
                for (var r, o = i(t), s = n(o), u = s.length, l = 0, c = []; u > l; )
                    a.call(o, r = s[l++]) && c.push(e ? [r, o[r]] : o[r]);
                return c
            }
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_set-proto.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25)
          , i = r(/*! ./_an-object */
        31)
          , a = function(e, t) {
            if (i(e),
            !n(t) && null !== t)
                throw TypeError(t + ": can't set as prototype!")
        };
        e.exports = {
            set: Object.setPrototypeOf || ("__proto__"in {} ? function(e, t, n) {
                try {
                    n = r(/*! ./_ctx */
                    34)(Function.call, r(/*! ./_object-gopd */
                    94).f(Object.prototype, "__proto__").set, 2),
                    n(e, []),
                    t = !(e instanceof Array)
                } catch (e) {
                    t = !0
                }
                return function(e, r) {
                    return a(e, r),
                    t ? e.__proto__ = r : n(e, r),
                    e
                }
            }({}, !1) : void 0),
            check: a
        }
    }
    , /*!***************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_species-constructor.js ***!
  \***************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_an-object */
        31)
          , i = r(/*! ./_a-function */
        88)
          , a = r(/*! ./_wks */
        13)("species");
        e.exports = function(e, t) {
            var r, o = n(e).constructor;
            return void 0 === o || void 0 == (r = n(o)[a]) ? t : i(r)
        }
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_string-at.js ***!
  \*****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-integer */
        100)
          , i = r(/*! ./_defined */
        67);
        e.exports = function(e) {
            return function(t, r) {
                var a, o, s = String(i(t)), u = n(r), l = s.length;
                return u < 0 || u >= l ? e ? "" : void 0 : (a = s.charCodeAt(u),
                a < 55296 || a > 56319 || u + 1 === l || (o = s.charCodeAt(u + 1)) < 56320 || o > 57343 ? e ? s.charAt(u) : a : e ? s.slice(u, u + 2) : (a - 55296 << 10) + (o - 56320) + 65536)
            }
        }
    }
    , /*!****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/_to-index.js ***!
  \****************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-integer */
        100)
          , i = Math.max
          , a = Math.min;
        e.exports = function(e, t) {
            return e = n(e),
            e < 0 ? i(e + t, 0) : a(e, t)
        }
    }
    , /*!************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js ***!
  \************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_an-object */
        31)
          , i = r(/*! ./core.get-iterator-method */
        104);
        e.exports = r(/*! ./_core */
        6).getIterator = function(e) {
            var t = i(e);
            if ("function" != typeof t)
                throw TypeError(e + " is not iterable!");
            return n(t.call(e))
        }
    }
    , /*!***********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js ***!
  \***********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_classof */
        66)
          , i = r(/*! ./_wks */
        13)("iterator")
          , a = r(/*! ./_iterators */
        48);
        e.exports = r(/*! ./_core */
        6).isIterable = function(e) {
            var t = Object(e);
            return void 0 !== t[i] || "@@iterator"in t || a.hasOwnProperty(n(t))
        }
    }
    , /*!*********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.array.from.js ***!
  \*********************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_ctx */
        34)
          , i = r(/*! ./_export */
        14)
          , a = r(/*! ./_to-object */
        49)
          , o = r(/*! ./_iter-call */
        149)
          , s = r(/*! ./_is-array-iter */
        147)
          , u = r(/*! ./_to-length */
        73)
          , l = r(/*! ./_create-property */
        301)
          , c = r(/*! ./core.get-iterator-method */
        104);
        i(i.S + i.F * !r(/*! ./_iter-detect */
        150)(function(e) {
            Array.from(e)
        }), "Array", {
            from: function(e) {
                var t, r, i, h, f = a(e), d = "function" == typeof this ? this : Array, p = arguments.length, m = p > 1 ? arguments[1] : void 0, g = void 0 !== m, v = 0, y = c(f);
                if (g && (m = n(m, p > 2 ? arguments[2] : void 0, 2)),
                void 0 == y || d == Array && s(y))
                    for (t = u(f.length),
                    r = new d(t); t > v; v++)
                        l(r, v, g ? m(f[v], v) : f[v]);
                else
                    for (h = y.call(f),
                    r = new d; !(i = h.next()).done; v++)
                        l(r, v, g ? o(h, m, [i.value, v], !0) : i.value);
                return r.length = v,
                r
            }
        })
    }
    , /*!*************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js ***!
  \*************************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_add-to-unscopables */
        292)
          , i = r(/*! ./_iter-step */
        151)
          , a = r(/*! ./_iterators */
        48)
          , o = r(/*! ./_to-iobject */
        32);
        e.exports = r(/*! ./_iter-define */
        93)(Array, "Array", function(e, t) {
            this._t = o(e),
            this._i = 0,
            this._k = t
        }, function() {
            var e = this._t
              , t = this._k
              , r = this._i++;
            return !e || r >= e.length ? (this._t = void 0,
            i(1)) : "keys" == t ? i(0, r) : "values" == t ? i(0, e[r]) : i(0, [r, e[r]])
        }, "values"),
        a.Arguments = a.Array,
        n("keys"),
        n("values"),
        n("entries")
    }
    , /*!**************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.map.js ***!
  \**************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_collection-strong */
        298);
        e.exports = r(/*! ./_collection */
        300)("Map", function(e) {
            return function() {
                return e(this, arguments.length > 0 ? arguments[0] : void 0)
            }
        }, {
            get: function(e) {
                var t = n.getEntry(this, e);
                return t && t.v
            },
            set: function(e, t) {
                return n.def(this, 0 === e ? 0 : e, t)
            }
        }, n, !0)
    }
    , /*!****************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.number.is-integer.js ***!
  \****************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14);
        n(n.S, "Number", {
            isInteger: r(/*! ./_is-integer */
            304)
        })
    }
    , /*!************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.assign.js ***!
  \************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14);
        n(n.S + n.F, "Object", {
            assign: r(/*! ./_object-assign */
            308)
        })
    }
    , /*!************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.create.js ***!
  \************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14);
        n(n.S, "Object", {
            create: r(/*! ./_object-create */
            71)
        })
    }
    , /*!*********************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js ***!
  \*********************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14);
        n(n.S + n.F * !r(/*! ./_descriptors */
        24), "Object", {
            defineProperty: r(/*! ./_object-dp */
            22).f
        })
    }
    , /*!************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.freeze.js ***!
  \************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_is-object */
        25)
          , i = r(/*! ./_meta */
        70).onFreeze;
        r(/*! ./_object-sap */
        72)("freeze", function(e) {
            return function(t) {
                return e && n(t) ? e(i(t)) : t
            }
        })
    }
    , /*!*********************************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.get-own-property-descriptor.js ***!
  \*********************************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-iobject */
        32)
          , i = r(/*! ./_object-gopd */
        94).f;
        r(/*! ./_object-sap */
        72)("getOwnPropertyDescriptor", function() {
            return function(e, t) {
                return i(n(e), t)
            }
        })
    }
    , /*!**********************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.get-prototype-of.js ***!
  \**********************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-object */
        49)
          , i = r(/*! ./_object-gpo */
        153);
        r(/*! ./_object-sap */
        72)("getPrototypeOf", function() {
            return function(e) {
                return i(n(e))
            }
        })
    }
    , /*!**********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.keys.js ***!
  \**********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_to-object */
        49)
          , i = r(/*! ./_object-keys */
        42);
        r(/*! ./_object-sap */
        72)("keys", function() {
            return function(e) {
                return i(n(e))
            }
        })
    }
    , /*!**********************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.object.set-prototype-of.js ***!
  \**********************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14);
        n(n.S, "Object", {
            setPrototypeOf: r(/*! ./_set-proto */
            312).set
        })
    }
    , /*!******************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.promise.js ***!
  \******************************************************************/
    function(e, t, r) {
        "use strict";
        var n, i, a, o = r(/*! ./_library */
        69), s = r(/*! ./_global */
        15), u = r(/*! ./_ctx */
        34), l = r(/*! ./_classof */
        66), c = r(/*! ./_export */
        14), h = r(/*! ./_is-object */
        25), f = r(/*! ./_a-function */
        88), d = r(/*! ./_an-instance */
        89), p = r(/*! ./_for-of */
        68), m = r(/*! ./_species-constructor */
        313), g = r(/*! ./_task */
        99).set, v = r(/*! ./_microtask */
        307)(), y = "Promise", M = s.TypeError, w = s.process, x = s[y], w = s.process, A = "process" == l(w), b = function() {}, T = !!function() {
            try {
                var e = x.resolve(1)
                  , t = (e.constructor = {})[r(/*! ./_wks */
                13)("species")] = function(e) {
                    e(b, b)
                }
                ;
                return (A || "function" == typeof PromiseRejectionEvent) && e.then(b)instanceof t
            } catch (e) {}
        }(), _ = function(e, t) {
            return e === t || e === x && t === a
        }, E = function(e) {
            var t;
            return !(!h(e) || "function" != typeof (t = e.then)) && t
        }, S = function(e) {
            return _(x, e) ? new D(e) : new i(e)
        }, D = i = function(e) {
            var t, r;
            this.promise = new e(function(e, n) {
                if (void 0 !== t || void 0 !== r)
                    throw M("Bad Promise constructor");
                t = e,
                r = n
            }
            ),
            this.resolve = f(t),
            this.reject = f(r)
        }
        , N = function(e) {
            try {
                e()
            } catch (e) {
                return {
                    error: e
                }
            }
        }, I = function(e, t) {
            if (!e._n) {
                e._n = !0;
                var r = e._c;
                v(function() {
                    for (var n = e._v, i = 1 == e._s, a = 0, o = function(t) {
                        var r, a, o = i ? t.ok : t.fail, s = t.resolve, u = t.reject, l = t.domain;
                        try {
                            o ? (i || (2 == e._h && O(e),
                            e._h = 1),
                            o === !0 ? r = n : (l && l.enter(),
                            r = o(n),
                            l && l.exit()),
                            r === t.promise ? u(M("Promise-chain cycle")) : (a = E(r)) ? a.call(r, s, u) : s(r)) : u(n)
                        } catch (e) {
                            u(e)
                        }
                    }; r.length > a; )
                        o(r[a++]);
                    e._c = [],
                    e._n = !1,
                    t && !e._h && L(e)
                })
            }
        }, L = function(e) {
            g.call(s, function() {
                var t, r, n, i = e._v;
                if (C(e) && (t = N(function() {
                    A ? w.emit("unhandledRejection", i, e) : (r = s.onunhandledrejection) ? r({
                        promise: e,
                        reason: i
                    }) : (n = s.console) && n.error && n.error("Unhandled promise rejection", i)
                }),
                e._h = A || C(e) ? 2 : 1),
                e._a = void 0,
                t)
                    throw t.error
            })
        }, C = function(e) {
            if (1 == e._h)
                return !1;
            for (var t, r = e._a || e._c, n = 0; r.length > n; )
                if (t = r[n++],
                t.fail || !C(t.promise))
                    return !1;
            return !0
        }, O = function(e) {
            g.call(s, function() {
                var t;
                A ? w.emit("rejectionHandled", e) : (t = s.onrejectionhandled) && t({
                    promise: e,
                    reason: e._v
                })
            })
        }, j = function(e) {
            var t = this;
            t._d || (t._d = !0,
            t = t._w || t,
            t._v = e,
            t._s = 2,
            t._a || (t._a = t._c.slice()),
            I(t, !0))
        }, R = function(e) {
            var t, r = this;
            if (!r._d) {
                r._d = !0,
                r = r._w || r;
                try {
                    if (r === e)
                        throw M("Promise can't be resolved itself");
                    (t = E(e)) ? v(function() {
                        var n = {
                            _w: r,
                            _d: !1
                        };
                        try {
                            t.call(e, u(R, n, 1), u(j, n, 1))
                        } catch (e) {
                            j.call(n, e)
                        }
                    }) : (r._v = e,
                    r._s = 1,
                    I(r, !1))
                } catch (e) {
                    j.call({
                        _w: r,
                        _d: !1
                    }, e)
                }
            }
        };
        T || (x = function(e) {
            d(this, x, y, "_h"),
            f(e),
            n.call(this);
            try {
                e(u(R, this, 1), u(j, this, 1))
            } catch (e) {
                j.call(this, e)
            }
        }
        ,
        n = function(e) {
            this._c = [],
            this._a = void 0,
            this._s = 0,
            this._d = !1,
            this._v = void 0,
            this._h = 0,
            this._n = !1
        }
        ,
        n.prototype = r(/*! ./_redefine-all */
        96)(x.prototype, {
            then: function(e, t) {
                var r = S(m(this, x));
                return r.ok = "function" != typeof e || e,
                r.fail = "function" == typeof t && t,
                r.domain = A ? w.domain : void 0,
                this._c.push(r),
                this._a && this._a.push(r),
                this._s && I(this, !1),
                r.promise
            },
            catch: function(e) {
                return this.then(void 0, e)
            }
        }),
        D = function() {
            var e = new n;
            this.promise = e,
            this.resolve = u(R, e, 1),
            this.reject = u(j, e, 1)
        }
        ),
        c(c.G + c.W + c.F * !T, {
            Promise: x
        }),
        r(/*! ./_set-to-string-tag */
        55)(x, y),
        r(/*! ./_set-species */
        156)(y),
        a = r(/*! ./_core */
        6)[y],
        c(c.S + c.F * !T, y, {
            reject: function(e) {
                var t = S(this)
                  , r = t.reject;
                return r(e),
                t.promise
            }
        }),
        c(c.S + c.F * (o || !T), y, {
            resolve: function(e) {
                if (e instanceof x && _(e.constructor, this))
                    return e;
                var t = S(this)
                  , r = t.resolve;
                return r(e),
                t.promise
            }
        }),
        c(c.S + c.F * !(T && r(/*! ./_iter-detect */
        150)(function(e) {
            x.all(e).catch(b)
        })), y, {
            all: function(e) {
                var t = this
                  , r = S(t)
                  , n = r.resolve
                  , i = r.reject
                  , a = N(function() {
                    var r = []
                      , a = 0
                      , o = 1;
                    p(e, !1, function(e) {
                        var s = a++
                          , u = !1;
                        r.push(void 0),
                        o++,
                        t.resolve(e).then(function(e) {
                            u || (u = !0,
                            r[s] = e,
                            --o || n(r))
                        }, i)
                    }),
                    --o || n(r)
                });
                return a && i(a.error),
                r.promise
            },
            race: function(e) {
                var t = this
                  , r = S(t)
                  , n = r.reject
                  , i = N(function() {
                    p(e, !1, function(e) {
                        t.resolve(e).then(r.resolve, n)
                    })
                });
                return i && n(i.error),
                r.promise
            }
        })
    }
    , /*!*****************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es6.symbol.js ***!
  \*****************************************************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! ./_global */
        15)
          , i = r(/*! ./_has */
        41)
          , a = r(/*! ./_descriptors */
        24)
          , o = r(/*! ./_export */
        14)
          , s = r(/*! ./_redefine */
        155)
          , u = r(/*! ./_meta */
        70).KEY
          , l = r(/*! ./_fails */
        40)
          , c = r(/*! ./_shared */
        98)
          , h = r(/*! ./_set-to-string-tag */
        55)
          , f = r(/*! ./_uid */
        74)
          , d = r(/*! ./_wks */
        13)
          , p = r(/*! ./_wks-ext */
        103)
          , m = r(/*! ./_wks-define */
        102)
          , g = r(/*! ./_keyof */
        306)
          , v = r(/*! ./_enum-keys */
        302)
          , y = r(/*! ./_is-array */
        148)
          , M = r(/*! ./_an-object */
        31)
          , w = r(/*! ./_to-iobject */
        32)
          , x = r(/*! ./_to-primitive */
        101)
          , A = r(/*! ./_property-desc */
        54)
          , b = r(/*! ./_object-create */
        71)
          , T = r(/*! ./_object-gopn-ext */
        310)
          , _ = r(/*! ./_object-gopd */
        94)
          , E = r(/*! ./_object-dp */
        22)
          , S = r(/*! ./_object-keys */
        42)
          , D = _.f
          , N = E.f
          , I = T.f
          , L = n.Symbol
          , C = n.JSON
          , O = C && C.stringify
          , j = "prototype"
          , R = d("_hidden")
          , P = d("toPrimitive")
          , z = {}.propertyIsEnumerable
          , B = c("symbol-registry")
          , U = c("symbols")
          , V = c("op-symbols")
          , k = Object[j]
          , F = "function" == typeof L
          , G = n.QObject
          , Y = !G || !G[j] || !G[j].findChild
          , Q = a && l(function() {
            return 7 != b(N({}, "a", {
                get: function() {
                    return N(this, "a", {
                        value: 7
                    }).a
                }
            })).a
        }) ? function(e, t, r) {
            var n = D(k, t);
            n && delete k[t],
            N(e, t, r),
            n && e !== k && N(k, t, n)
        }
        : N
          , H = function(e) {
            var t = U[e] = b(L[j]);
            return t._k = e,
            t
        }
          , W = F && "symbol" == typeof L.iterator ? function(e) {
            return "symbol" == typeof e
        }
        : function(e) {
            return e instanceof L
        }
          , X = function(e, t, r) {
            return e === k && X(V, t, r),
            M(e),
            t = x(t, !0),
            M(r),
            i(U, t) ? (r.enumerable ? (i(e, R) && e[R][t] && (e[R][t] = !1),
            r = b(r, {
                enumerable: A(0, !1)
            })) : (i(e, R) || N(e, R, A(1, {})),
            e[R][t] = !0),
            Q(e, t, r)) : N(e, t, r)
        }
          , q = function(e, t) {
            M(e);
            for (var r, n = v(t = w(t)), i = 0, a = n.length; a > i; )
                X(e, r = n[i++], t[r]);
            return e
        }
          , Z = function(e, t) {
            return void 0 === t ? b(e) : q(b(e), t)
        }
          , J = function(e) {
            var t = z.call(this, e = x(e, !0));
            return !(this === k && i(U, e) && !i(V, e)) && (!(t || !i(this, e) || !i(U, e) || i(this, R) && this[R][e]) || t)
        }
          , K = function(e, t) {
            if (e = w(e),
            t = x(t, !0),
            e !== k || !i(U, t) || i(V, t)) {
                var r = D(e, t);
                return !r || !i(U, t) || i(e, R) && e[R][t] || (r.enumerable = !0),
                r
            }
        }
          , $ = function(e) {
            for (var t, r = I(w(e)), n = [], a = 0; r.length > a; )
                i(U, t = r[a++]) || t == R || t == u || n.push(t);
            return n
        }
          , ee = function(e) {
            for (var t, r = e === k, n = I(r ? V : w(e)), a = [], o = 0; n.length > o; )
                !i(U, t = n[o++]) || r && !i(k, t) || a.push(U[t]);
            return a
        };
        F || (L = function() {
            if (this instanceof L)
                throw TypeError("Symbol is not a constructor!");
            var e = f(arguments.length > 0 ? arguments[0] : void 0)
              , t = function(r) {
                this === k && t.call(V, r),
                i(this, R) && i(this[R], e) && (this[R][e] = !1),
                Q(this, e, A(1, r))
            };
            return a && Y && Q(k, e, {
                configurable: !0,
                set: t
            }),
            H(e)
        }
        ,
        s(L[j], "toString", function() {
            return this._k
        }),
        _.f = K,
        E.f = X,
        r(/*! ./_object-gopn */
        152).f = T.f = $,
        r(/*! ./_object-pie */
        53).f = J,
        r(/*! ./_object-gops */
        95).f = ee,
        a && !r(/*! ./_library */
        69) && s(k, "propertyIsEnumerable", J, !0),
        p.f = function(e) {
            return H(d(e))
        }
        ),
        o(o.G + o.W + o.F * !F, {
            Symbol: L
        });
        for (var te = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), re = 0; te.length > re; )
            d(te[re++]);
        for (var te = S(d.store), re = 0; te.length > re; )
            m(te[re++]);
        o(o.S + o.F * !F, "Symbol", {
            for: function(e) {
                return i(B, e += "") ? B[e] : B[e] = L(e)
            },
            keyFor: function(e) {
                if (W(e))
                    return g(B, e);
                throw TypeError(e + " is not a symbol!")
            },
            useSetter: function() {
                Y = !0
            },
            useSimple: function() {
                Y = !1
            }
        }),
        o(o.S + o.F * !F, "Object", {
            create: Z,
            defineProperty: X,
            defineProperties: q,
            getOwnPropertyDescriptor: K,
            getOwnPropertyNames: $,
            getOwnPropertySymbols: ee
        }),
        C && o(o.S + o.F * (!F || l(function() {
            var e = L();
            return "[null]" != O([e]) || "{}" != O({
                a: e
            }) || "{}" != O(Object(e))
        })), "JSON", {
            stringify: function(e) {
                if (void 0 !== e && !W(e)) {
                    for (var t, r, n = [e], i = 1; arguments.length > i; )
                        n.push(arguments[i++]);
                    return t = n[1],
                    "function" == typeof t && (r = t),
                    !r && y(t) || (t = function(e, t) {
                        if (r && (t = r.call(this, e, t)),
                        !W(t))
                            return t
                    }
                    ),
                    n[1] = t,
                    O.apply(C, n)
                }
            }
        }),
        L[j][P] || r(/*! ./_hide */
        35)(L[j], P, L[j].valueOf),
        h(L, "Symbol"),
        h(Math, "Math", !0),
        h(n.JSON, "JSON", !0)
    }
    , /*!**********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es7.map.to-json.js ***!
  \**********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14);
        n(n.P + n.R, "Map", {
            toJSON: r(/*! ./_collection-to-json */
            299)("Map")
        })
    }
    , /*!************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es7.object.values.js ***!
  \************************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14)
          , i = r(/*! ./_object-to-array */
        311)(!1);
        n(n.S, "Object", {
            values: function(e) {
                return i(e)
            }
        })
    }
    , /*!********************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es7.symbol.async-iterator.js ***!
  \********************************************************************************/
    function(e, t, r) {
        r(/*! ./_wks-define */
        102)("asyncIterator")
    }
    , /*!****************************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/es7.symbol.observable.js ***!
  \****************************************************************************/
    function(e, t, r) {
        r(/*! ./_wks-define */
        102)("observable")
    }
    , /*!********************************************************************!*\
  !*** ./~/babel-runtime/~/core-js/library/modules/web.immediate.js ***!
  \********************************************************************/
    function(e, t, r) {
        var n = r(/*! ./_export */
        14)
          , i = r(/*! ./_task */
        99);
        n(n.G + n.B, {
            setImmediate: i.set,
            clearImmediate: i.clear
        })
    }
    , /*!******************************!*\
  !*** ./~/base64-js/index.js ***!
  \******************************/
    function(e, t) {
        "use strict";
        function r(e) {
            var t = e.length;
            if (t % 4 > 0)
                throw new Error("Invalid string. Length must be a multiple of 4");
            return "=" === e[t - 2] ? 2 : "=" === e[t - 1] ? 1 : 0
        }
        function n(e) {
            return 3 * e.length / 4 - r(e)
        }
        function i(e) {
            var t, n, i, a, o, s, u = e.length;
            o = r(e),
            s = new c(3 * u / 4 - o),
            i = o > 0 ? u - 4 : u;
            var h = 0;
            for (t = 0,
            n = 0; t < i; t += 4,
            n += 3)
                a = l[e.charCodeAt(t)] << 18 | l[e.charCodeAt(t + 1)] << 12 | l[e.charCodeAt(t + 2)] << 6 | l[e.charCodeAt(t + 3)],
                s[h++] = a >> 16 & 255,
                s[h++] = a >> 8 & 255,
                s[h++] = 255 & a;
            return 2 === o ? (a = l[e.charCodeAt(t)] << 2 | l[e.charCodeAt(t + 1)] >> 4,
            s[h++] = 255 & a) : 1 === o && (a = l[e.charCodeAt(t)] << 10 | l[e.charCodeAt(t + 1)] << 4 | l[e.charCodeAt(t + 2)] >> 2,
            s[h++] = a >> 8 & 255,
            s[h++] = 255 & a),
            s
        }
        function a(e) {
            return u[e >> 18 & 63] + u[e >> 12 & 63] + u[e >> 6 & 63] + u[63 & e]
        }
        function o(e, t, r) {
            for (var n, i = [], o = t; o < r; o += 3)
                n = (e[o] << 16) + (e[o + 1] << 8) + e[o + 2],
                i.push(a(n));
            return i.join("")
        }
        function s(e) {
            for (var t, r = e.length, n = r % 3, i = "", a = [], s = 16383, l = 0, c = r - n; l < c; l += s)
                a.push(o(e, l, l + s > c ? c : l + s));
            return 1 === n ? (t = e[r - 1],
            i += u[t >> 2],
            i += u[t << 4 & 63],
            i += "==") : 2 === n && (t = (e[r - 2] << 8) + e[r - 1],
            i += u[t >> 10],
            i += u[t >> 4 & 63],
            i += u[t << 2 & 63],
            i += "="),
            a.push(i),
            a.join("")
        }
        t.byteLength = n,
        t.toByteArray = i,
        t.fromByteArray = s;
        for (var u = [], l = [], c = "undefined" != typeof Uint8Array ? Uint8Array : Array, h = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", f = 0, d = h.length; f < d; ++f)
            u[f] = h[f],
            l[h.charCodeAt(f)] = f;
        l["-".charCodeAt(0)] = 62,
        l["_".charCodeAt(0)] = 63
    }
    , /*!*************************************!*\
  !*** ./~/buffer/~/isarray/index.js ***!
  \*************************************/
    function(e, t) {
        var r = {}.toString;
        e.exports = Array.isArray || function(e) {
            return "[object Array]" == r.call(e)
        }
    }
    , /*!********************************************!*\
  !*** ./~/crypto-browserify/create-hmac.js ***!
  \********************************************/
    function(e, t, r) {
        (function(t) {
            function n(e, r) {
                if (!(this instanceof n))
                    return new n(e,r);
                this._opad = u,
                this._alg = e;
                var o = "sha512" === e ? 128 : 64;
                r = this._key = t.isBuffer(r) ? r : new t(r),
                r.length > o ? r = i(e).update(r).digest() : r.length < o && (r = t.concat([r, a], o));
                for (var s = this._ipad = new t(o), u = this._opad = new t(o), l = 0; l < o; l++)
                    s[l] = 54 ^ r[l],
                    u[l] = 92 ^ r[l];
                this._hash = i(e).update(s)
            }
            var i = r(/*! ./create-hash */
            157)
              , a = new t(128);
            a.fill(0),
            e.exports = n,
            n.prototype.update = function(e, t) {
                return this._hash.update(e, t),
                this
            }
            ,
            n.prototype.digest = function(e) {
                var t = this._hash.digest();
                return i(this._alg).update(this._opad).update(t).digest(e)
            }
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!****************************************!*\
  !*** ./~/crypto-browserify/helpers.js ***!
  \****************************************/
    function(e, t, r) {
        (function(t) {
            function r(e, r) {
                if (e.length % a !== 0) {
                    var n = e.length + (a - e.length % a);
                    e = t.concat([e, o], n)
                }
                for (var i = [], s = r ? e.readInt32BE : e.readInt32LE, u = 0; u < e.length; u += a)
                    i.push(s.call(e, u));
                return i
            }
            function n(e, r, n) {
                for (var i = new t(r), a = n ? i.writeInt32BE : i.writeInt32LE, o = 0; o < e.length; o++)
                    a.call(i, e[o], 4 * o, !0);
                return i
            }
            function i(e, i, a, o) {
                t.isBuffer(e) || (e = new t(e));
                var u = i(r(e, o), e.length * s);
                return n(u, a, o)
            }
            var a = 4
              , o = new t(a);
            o.fill(0);
            var s = 8;
            e.exports = {
                hash: i
            }
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!**************************************!*\
  !*** ./~/crypto-browserify/index.js ***!
  \**************************************/
    function(e, t, r) {
        (function(e) {
            function n() {
                var e = [].slice.call(arguments).join(" ");
                throw new Error([e, "we accept pull requests", "http://github.com/dominictarr/crypto-browserify"].join("\n"))
            }
            function i(e, t) {
                for (var r in e)
                    t(e[r], r)
            }
            var a = r(/*! ./rng */
            344);
            t.createHash = r(/*! ./create-hash */
            157),
            t.createHmac = r(/*! ./create-hmac */
            339),
            t.randomBytes = function(t, r) {
                if (!r || !r.call)
                    return new e(a(t));
                try {
                    r.call(this, void 0, new e(a(t)))
                } catch (e) {
                    r(e)
                }
            }
            ,
            t.getHashes = function() {
                return ["sha1", "sha256", "sha512", "md5", "rmd160"]
            }
            ;
            var o = r(/*! ./pbkdf2 */
            343)(t);
            t.pbkdf2 = o.pbkdf2,
            t.pbkdf2Sync = o.pbkdf2Sync,
            i(["createCredentials", "createCipher", "createCipheriv", "createDecipher", "createDecipheriv", "createSign", "createVerify", "createDiffieHellman"], function(e) {
                t[e] = function() {
                    n("sorry,", e, "is not implemented yet")
                }
            })
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!************************************!*\
  !*** ./~/crypto-browserify/md5.js ***!
  \************************************/
    function(e, t, r) {
        function n(e, t) {
            e[t >> 5] |= 128 << t % 32,
            e[(t + 64 >>> 9 << 4) + 14] = t;
            for (var r = 1732584193, n = -271733879, i = -1732584194, c = 271733878, h = 0; h < e.length; h += 16) {
                var f = r
                  , d = n
                  , p = i
                  , m = c;
                r = a(r, n, i, c, e[h + 0], 7, -680876936),
                c = a(c, r, n, i, e[h + 1], 12, -389564586),
                i = a(i, c, r, n, e[h + 2], 17, 606105819),
                n = a(n, i, c, r, e[h + 3], 22, -1044525330),
                r = a(r, n, i, c, e[h + 4], 7, -176418897),
                c = a(c, r, n, i, e[h + 5], 12, 1200080426),
                i = a(i, c, r, n, e[h + 6], 17, -1473231341),
                n = a(n, i, c, r, e[h + 7], 22, -45705983),
                r = a(r, n, i, c, e[h + 8], 7, 1770035416),
                c = a(c, r, n, i, e[h + 9], 12, -1958414417),
                i = a(i, c, r, n, e[h + 10], 17, -42063),
                n = a(n, i, c, r, e[h + 11], 22, -1990404162),
                r = a(r, n, i, c, e[h + 12], 7, 1804603682),
                c = a(c, r, n, i, e[h + 13], 12, -40341101),
                i = a(i, c, r, n, e[h + 14], 17, -1502002290),
                n = a(n, i, c, r, e[h + 15], 22, 1236535329),
                r = o(r, n, i, c, e[h + 1], 5, -165796510),
                c = o(c, r, n, i, e[h + 6], 9, -1069501632),
                i = o(i, c, r, n, e[h + 11], 14, 643717713),
                n = o(n, i, c, r, e[h + 0], 20, -373897302),
                r = o(r, n, i, c, e[h + 5], 5, -701558691),
                c = o(c, r, n, i, e[h + 10], 9, 38016083),
                i = o(i, c, r, n, e[h + 15], 14, -660478335),
                n = o(n, i, c, r, e[h + 4], 20, -405537848),
                r = o(r, n, i, c, e[h + 9], 5, 568446438),
                c = o(c, r, n, i, e[h + 14], 9, -1019803690),
                i = o(i, c, r, n, e[h + 3], 14, -187363961),
                n = o(n, i, c, r, e[h + 8], 20, 1163531501),
                r = o(r, n, i, c, e[h + 13], 5, -1444681467),
                c = o(c, r, n, i, e[h + 2], 9, -51403784),
                i = o(i, c, r, n, e[h + 7], 14, 1735328473),
                n = o(n, i, c, r, e[h + 12], 20, -1926607734),
                r = s(r, n, i, c, e[h + 5], 4, -378558),
                c = s(c, r, n, i, e[h + 8], 11, -2022574463),
                i = s(i, c, r, n, e[h + 11], 16, 1839030562),
                n = s(n, i, c, r, e[h + 14], 23, -35309556),
                r = s(r, n, i, c, e[h + 1], 4, -1530992060),
                c = s(c, r, n, i, e[h + 4], 11, 1272893353),
                i = s(i, c, r, n, e[h + 7], 16, -155497632),
                n = s(n, i, c, r, e[h + 10], 23, -1094730640),
                r = s(r, n, i, c, e[h + 13], 4, 681279174),
                c = s(c, r, n, i, e[h + 0], 11, -358537222),
                i = s(i, c, r, n, e[h + 3], 16, -722521979),
                n = s(n, i, c, r, e[h + 6], 23, 76029189),
                r = s(r, n, i, c, e[h + 9], 4, -640364487),
                c = s(c, r, n, i, e[h + 12], 11, -421815835),
                i = s(i, c, r, n, e[h + 15], 16, 530742520),
                n = s(n, i, c, r, e[h + 2], 23, -995338651),
                r = u(r, n, i, c, e[h + 0], 6, -198630844),
                c = u(c, r, n, i, e[h + 7], 10, 1126891415),
                i = u(i, c, r, n, e[h + 14], 15, -1416354905),
                n = u(n, i, c, r, e[h + 5], 21, -57434055),
                r = u(r, n, i, c, e[h + 12], 6, 1700485571),
                c = u(c, r, n, i, e[h + 3], 10, -1894986606),
                i = u(i, c, r, n, e[h + 10], 15, -1051523),
                n = u(n, i, c, r, e[h + 1], 21, -2054922799),
                r = u(r, n, i, c, e[h + 8], 6, 1873313359),
                c = u(c, r, n, i, e[h + 15], 10, -30611744),
                i = u(i, c, r, n, e[h + 6], 15, -1560198380),
                n = u(n, i, c, r, e[h + 13], 21, 1309151649),
                r = u(r, n, i, c, e[h + 4], 6, -145523070),
                c = u(c, r, n, i, e[h + 11], 10, -1120210379),
                i = u(i, c, r, n, e[h + 2], 15, 718787259),
                n = u(n, i, c, r, e[h + 9], 21, -343485551),
                r = l(r, f),
                n = l(n, d),
                i = l(i, p),
                c = l(c, m)
            }
            return Array(r, n, i, c)
        }
        function i(e, t, r, n, i, a) {
            return l(c(l(l(t, e), l(n, a)), i), r)
        }
        function a(e, t, r, n, a, o, s) {
            return i(t & r | ~t & n, e, t, a, o, s)
        }
        function o(e, t, r, n, a, o, s) {
            return i(t & n | r & ~n, e, t, a, o, s)
        }
        function s(e, t, r, n, a, o, s) {
            return i(t ^ r ^ n, e, t, a, o, s)
        }
        function u(e, t, r, n, a, o, s) {
            return i(r ^ (t | ~n), e, t, a, o, s)
        }
        function l(e, t) {
            var r = (65535 & e) + (65535 & t)
              , n = (e >> 16) + (t >> 16) + (r >> 16);
            return n << 16 | 65535 & r
        }
        function c(e, t) {
            return e << t | e >>> 32 - t
        }
        var h = r(/*! ./helpers */
        340);
        e.exports = function(e) {
            return h.hash(e, n, 16)
        }
    }
    , /*!***************************************!*\
  !*** ./~/crypto-browserify/pbkdf2.js ***!
  \***************************************/
    function(e, t, r) {
        var n = r(/*! pbkdf2-compat/pbkdf2 */
        350);
        e.exports = function(e, t) {
            t = t || {};
            var r = n(e);
            return t.pbkdf2 = r.pbkdf2,
            t.pbkdf2Sync = r.pbkdf2Sync,
            t
        }
    }
    , /*!************************************!*\
  !*** ./~/crypto-browserify/rng.js ***!
  \************************************/
    function(e, t, r) {
        (function(t, n) {
            !function() {
                var i = ("undefined" == typeof window ? t : window) || {};
                _crypto = i.crypto || i.msCrypto || r(/*! crypto */
                370),
                e.exports = function(e) {
                    if (_crypto.getRandomValues) {
                        var t = new n(e);
                        return _crypto.getRandomValues(t),
                        t
                    }
                    if (_crypto.randomBytes)
                        return _crypto.randomBytes(e);
                    throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")
                }
            }()
        }
        ).call(t, function() {
            return this
        }(), r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!***********************************************!*\
  !*** ./~/detect-browser/lib/detectBrowser.js ***!
  \***********************************************/
    function(e, t) {
        e.exports = function(e) {
            var t = [["edge", /Edge\/([0-9\._]+)/], ["yandexbrowser", /YaBrowser\/([0-9\._]+)/], ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/], ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/], ["opera", /Opera\/([0-9\.]+)(?:\s|$)/], ["opera", /OPR\/([0-9\.]+)(:?\s|$)$/], ["ie", /Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/], ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/], ["ie", /MSIE\s(7\.0)/], ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/], ["android", /Android\s([0-9\.]+)/], ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/], ["safari", /Version\/([0-9\._]+).*Safari/]];
            return t.map(function(t) {
                if (t[1].test(e)) {
                    var r = t[1].exec(e)
                      , n = r && r[1].split(/[._]/).slice(0, 3);
                    return n && n.length < 3 && Array.prototype.push.apply(n, 1 == n.length ? [0, 0] : [0]),
                    {
                        name: t[0],
                        version: n.join(".")
                    }
                }
            }).filter(Boolean).shift()
        }
    }
    , /*!****************************!*\
  !*** ./~/ieee754/index.js ***!
  \****************************/
    function(e, t) {
        t.read = function(e, t, r, n, i) {
            var a, o, s = 8 * i - n - 1, u = (1 << s) - 1, l = u >> 1, c = -7, h = r ? i - 1 : 0, f = r ? -1 : 1, d = e[t + h];
            for (h += f,
            a = d & (1 << -c) - 1,
            d >>= -c,
            c += s; c > 0; a = 256 * a + e[t + h],
            h += f,
            c -= 8)
                ;
            for (o = a & (1 << -c) - 1,
            a >>= -c,
            c += n; c > 0; o = 256 * o + e[t + h],
            h += f,
            c -= 8)
                ;
            if (0 === a)
                a = 1 - l;
            else {
                if (a === u)
                    return o ? NaN : (d ? -1 : 1) * (1 / 0);
                o += Math.pow(2, n),
                a -= l
            }
            return (d ? -1 : 1) * o * Math.pow(2, a - n)
        }
        ,
        t.write = function(e, t, r, n, i, a) {
            var o, s, u, l = 8 * a - i - 1, c = (1 << l) - 1, h = c >> 1, f = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0, d = n ? 0 : a - 1, p = n ? 1 : -1, m = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0;
            for (t = Math.abs(t),
            isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0,
            o = c) : (o = Math.floor(Math.log(t) / Math.LN2),
            t * (u = Math.pow(2, -o)) < 1 && (o--,
            u *= 2),
            t += o + h >= 1 ? f / u : f * Math.pow(2, 1 - h),
            t * u >= 2 && (o++,
            u /= 2),
            o + h >= c ? (s = 0,
            o = c) : o + h >= 1 ? (s = (t * u - 1) * Math.pow(2, i),
            o += h) : (s = t * Math.pow(2, h - 1) * Math.pow(2, i),
            o = 0)); i >= 8; e[r + d] = 255 & s,
            d += p,
            s /= 256,
            i -= 8)
                ;
            for (o = o << i | s,
            l += i; l > 0; e[r + d] = 255 & o,
            d += p,
            o /= 256,
            l -= 8)
                ;
            e[r + d - p] |= 128 * m
        }
    }
    , /*!****************************************!*\
  !*** ./~/inherits/inherits_browser.js ***!
  \****************************************/
    function(e, t) {
        "function" == typeof Object.create ? e.exports = function(e, t) {
            e.super_ = t,
            e.prototype = Object.create(t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            })
        }
        : e.exports = function(e, t) {
            e.super_ = t;
            var r = function() {};
            r.prototype = t.prototype,
            e.prototype = new r,
            e.prototype.constructor = e
        }
    }
    , /*!*****************************!*\
  !*** ./~/node-uuid/uuid.js ***!
  \*****************************/
    function(e, t, r) {
        var n;
        (function(i) {
            !function(a) {
                "use strict";
                function o() {
                    var e = a.crypto || a.msCrypto;
                    if (!f && e && e.getRandomValues)
                        try {
                            var t = new Uint8Array(16);
                            m = f = function() {
                                return e.getRandomValues(t),
                                t
                            }
                            ,
                            f()
                        } catch (e) {}
                    if (!f) {
                        var r = new Array(16);
                        d = f = function() {
                            for (var e, t = 0; t < 16; t++)
                                0 === (3 & t) && (e = 4294967296 * Math.random()),
                                r[t] = e >>> ((3 & t) << 3) & 255;
                            return r
                        }
                        ,
                        "undefined" != typeof console && console.warn && console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")
                    }
                }
                function s() {
                    try {
                        var e = r(/*! crypto */
                        341).randomBytes;
                        p = f = e && function() {
                            return e(16)
                        }
                        ,
                        f()
                    } catch (e) {}
                }
                function u(e, t, r) {
                    var n = t && r || 0
                      , i = 0;
                    for (t = t || [],
                    e.toLowerCase().replace(/[0-9a-f]{2}/g, function(e) {
                        i < 16 && (t[n + i++] = y[e])
                    }); i < 16; )
                        t[n + i++] = 0;
                    return t
                }
                function l(e, t) {
                    var r = t || 0
                      , n = v;
                    return n[e[r++]] + n[e[r++]] + n[e[r++]] + n[e[r++]] + "-" + n[e[r++]] + n[e[r++]] + "-" + n[e[r++]] + n[e[r++]] + "-" + n[e[r++]] + n[e[r++]] + "-" + n[e[r++]] + n[e[r++]] + n[e[r++]] + n[e[r++]] + n[e[r++]] + n[e[r++]]
                }
                function c(e, t, r) {
                    var n = t && r || 0
                      , i = t || [];
                    e = e || {};
                    var a = null != e.clockseq ? e.clockseq : A
                      , o = null != e.msecs ? e.msecs : (new Date).getTime()
                      , s = null != e.nsecs ? e.nsecs : T + 1
                      , u = o - b + (s - T) / 1e4;
                    if (u < 0 && null == e.clockseq && (a = a + 1 & 16383),
                    (u < 0 || o > b) && null == e.nsecs && (s = 0),
                    s >= 1e4)
                        throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
                    b = o,
                    T = s,
                    A = a,
                    o += 122192928e5;
                    var c = (1e4 * (268435455 & o) + s) % 4294967296;
                    i[n++] = c >>> 24 & 255,
                    i[n++] = c >>> 16 & 255,
                    i[n++] = c >>> 8 & 255,
                    i[n++] = 255 & c;
                    var h = o / 4294967296 * 1e4 & 268435455;
                    i[n++] = h >>> 8 & 255,
                    i[n++] = 255 & h,
                    i[n++] = h >>> 24 & 15 | 16,
                    i[n++] = h >>> 16 & 255,
                    i[n++] = a >>> 8 | 128,
                    i[n++] = 255 & a;
                    for (var f = e.node || x, d = 0; d < 6; d++)
                        i[n + d] = f[d];
                    return t ? t : l(i)
                }
                function h(e, t, r) {
                    var n = t && r || 0;
                    "string" == typeof e && (t = "binary" === e ? new g(16) : null,
                    e = null),
                    e = e || {};
                    var i = e.random || (e.rng || f)();
                    if (i[6] = 15 & i[6] | 64,
                    i[8] = 63 & i[8] | 128,
                    t)
                        for (var a = 0; a < 16; a++)
                            t[n + a] = i[a];
                    return t || l(i)
                }
                var f, d, p, m;
                a ? o() : s();
                for (var g = "function" == typeof i ? i : Array, v = [], y = {}, M = 0; M < 256; M++)
                    v[M] = (M + 256).toString(16).substr(1),
                    y[v[M]] = M;
                var w = f()
                  , x = [1 | w[0], w[1], w[2], w[3], w[4], w[5]]
                  , A = 16383 & (w[6] << 8 | w[7])
                  , b = 0
                  , T = 0
                  , _ = h;
                _.v1 = c,
                _.v4 = h,
                _.parse = u,
                _.unparse = l,
                _.BufferClass = g,
                _._rng = f,
                _._mathRNG = d,
                _._nodeRNG = p,
                _._whatwgRNG = m,
                "undefined" != typeof e && e.exports ? e.exports = _ : (n = function() {
                    return _
                }
                .call(t, r, t, e),
                !(void 0 !== n && (e.exports = n)))
            }("undefined" != typeof window ? window : null)
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!************************************!*\
  !*** ./~/path-browserify/index.js ***!
  \************************************/
    function(e, t, r) {
        (function(e) {
            function r(e, t) {
                for (var r = 0, n = e.length - 1; n >= 0; n--) {
                    var i = e[n];
                    "." === i ? e.splice(n, 1) : ".." === i ? (e.splice(n, 1),
                    r++) : r && (e.splice(n, 1),
                    r--)
                }
                if (t)
                    for (; r--; r)
                        e.unshift("..");
                return e
            }
            function n(e, t) {
                if (e.filter)
                    return e.filter(t);
                for (var r = [], n = 0; n < e.length; n++)
                    t(e[n], n, e) && r.push(e[n]);
                return r
            }
            var i = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/
              , a = function(e) {
                return i.exec(e).slice(1)
            };
            t.resolve = function() {
                for (var t = "", i = !1, a = arguments.length - 1; a >= -1 && !i; a--) {
                    var o = a >= 0 ? arguments[a] : e.cwd();
                    if ("string" != typeof o)
                        throw new TypeError("Arguments to path.resolve must be strings");
                    o && (t = o + "/" + t,
                    i = "/" === o.charAt(0))
                }
                return t = r(n(t.split("/"), function(e) {
                    return !!e
                }), !i).join("/"),
                (i ? "/" : "") + t || "."
            }
            ,
            t.normalize = function(e) {
                var i = t.isAbsolute(e)
                  , a = "/" === o(e, -1);
                return e = r(n(e.split("/"), function(e) {
                    return !!e
                }), !i).join("/"),
                e || i || (e = "."),
                e && a && (e += "/"),
                (i ? "/" : "") + e
            }
            ,
            t.isAbsolute = function(e) {
                return "/" === e.charAt(0)
            }
            ,
            t.join = function() {
                var e = Array.prototype.slice.call(arguments, 0);
                return t.normalize(n(e, function(e, t) {
                    if ("string" != typeof e)
                        throw new TypeError("Arguments to path.join must be strings");
                    return e
                }).join("/"))
            }
            ,
            t.relative = function(e, r) {
                function n(e) {
                    for (var t = 0; t < e.length && "" === e[t]; t++)
                        ;
                    for (var r = e.length - 1; r >= 0 && "" === e[r]; r--)
                        ;
                    return t > r ? [] : e.slice(t, r - t + 1)
                }
                e = t.resolve(e).substr(1),
                r = t.resolve(r).substr(1);
                for (var i = n(e.split("/")), a = n(r.split("/")), o = Math.min(i.length, a.length), s = o, u = 0; u < o; u++)
                    if (i[u] !== a[u]) {
                        s = u;
                        break
                    }
                for (var l = [], u = s; u < i.length; u++)
                    l.push("..");
                return l = l.concat(a.slice(s)),
                l.join("/")
            }
            ,
            t.sep = "/",
            t.delimiter = ":",
            t.dirname = function(e) {
                var t = a(e)
                  , r = t[0]
                  , n = t[1];
                return r || n ? (n && (n = n.substr(0, n.length - 1)),
                r + n) : "."
            }
            ,
            t.basename = function(e, t) {
                var r = a(e)[2];
                return t && r.substr(-1 * t.length) === t && (r = r.substr(0, r.length - t.length)),
                r
            }
            ,
            t.extname = function(e) {
                return a(e)[3]
            }
            ;
            var o = "b" === "ab".substr(-1) ? function(e, t, r) {
                return e.substr(t, r)
            }
            : function(e, t, r) {
                return t < 0 && (t = e.length + t),
                e.substr(t, r)
            }
        }
        ).call(t, r(/*! ./~/process/browser.js */
        57))
    }
    , /*!***********************************!*\
  !*** ./~/pbkdf2-compat/pbkdf2.js ***!
  \***********************************/
    function(e, t, r) {
        (function(t) {
            e.exports = function(e) {
                function r(e, t, r, i, a, o) {
                    if ("function" == typeof a && (o = a,
                    a = void 0),
                    "function" != typeof o)
                        throw new Error("No callback provided to pbkdf2");
                    setTimeout(function() {
                        var s;
                        try {
                            s = n(e, t, r, i, a)
                        } catch (e) {
                            return o(e)
                        }
                        o(void 0, s)
                    })
                }
                function n(r, n, i, a, o) {
                    if ("number" != typeof i)
                        throw new TypeError("Iterations not a number");
                    if (i < 0)
                        throw new TypeError("Bad iterations");
                    if ("number" != typeof a)
                        throw new TypeError("Key length not a number");
                    if (a < 0)
                        throw new TypeError("Bad key length");
                    o = o || "sha1",
                    t.isBuffer(r) || (r = new t(r)),
                    t.isBuffer(n) || (n = new t(n));
                    var s, u, l, c = 1, h = new t(a), f = new t(n.length + 4);
                    n.copy(f, 0, 0, n.length);
                    for (var d = 1; d <= c; d++) {
                        f.writeUInt32BE(d, n.length);
                        var p = e.createHmac(o, r).update(f).digest();
                        if (!s && (s = p.length,
                        l = new t(s),
                        c = Math.ceil(a / s),
                        u = a - (c - 1) * s,
                        a > (Math.pow(2, 32) - 1) * s))
                            throw new TypeError("keylen exceeds maximum length");
                        p.copy(l, 0, 0, s);
                        for (var m = 1; m < i; m++) {
                            p = e.createHmac(o, r).update(p).digest();
                            for (var g = 0; g < s; g++)
                                l[g] ^= p[g]
                        }
                        var v = (d - 1) * s
                          , y = d == c ? u : s;
                        l.copy(h, v, 0, y)
                    }
                    return h
                }
                return {
                    pbkdf2: r,
                    pbkdf2Sync: n
                }
            }
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!**************************************!*\
  !*** ./~/ripemd160/lib/ripemd160.js ***!
  \**************************************/
    function(e, t, r) {
        (function(t) {
            function r(e, t, r) {
                return e ^ t ^ r
            }
            function n(e, t, r) {
                return e & t | ~e & r
            }
            function i(e, t, r) {
                return (e | ~t) ^ r
            }
            function a(e, t, r) {
                return e & r | t & ~r
            }
            function o(e, t, r) {
                return e ^ (t | ~r)
            }
            function s(e, t) {
                return e << t | e >>> 32 - t
            }
            function u(e) {
                var r = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
                "string" == typeof e && (e = new t(e,"utf8"));
                var n = m(e)
                  , i = 8 * e.length
                  , a = 8 * e.length;
                n[i >>> 5] |= 128 << 24 - i % 32,
                n[(i + 64 >>> 9 << 4) + 14] = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8);
                for (var o = 0; o < n.length; o += 16)
                    v(r, n, o);
                for (var o = 0; o < 5; o++) {
                    var s = r[o];
                    r[o] = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8)
                }
                var u = g(r);
                return new t(u)
            }
            e.exports = u;
            /** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.
	
	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
	
	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
	
	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
            var l = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]
              , c = [5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]
              , h = [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]
              , f = [8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]
              , d = [0, 1518500249, 1859775393, 2400959708, 2840853838]
              , p = [1352829926, 1548603684, 1836072691, 2053994217, 0]
              , m = function(e) {
                for (var t = [], r = 0, n = 0; r < e.length; r++,
                n += 8)
                    t[n >>> 5] |= e[r] << 24 - n % 32;
                return t
            }
              , g = function(e) {
                for (var t = [], r = 0; r < 32 * e.length; r += 8)
                    t.push(e[r >>> 5] >>> 24 - r % 32 & 255);
                return t
            }
              , v = function(e, t, u) {
                for (var m = 0; m < 16; m++) {
                    var g = u + m
                      , v = t[g];
                    t[g] = 16711935 & (v << 8 | v >>> 24) | 4278255360 & (v << 24 | v >>> 8)
                }
                var y, M, w, x, A, b, T, _, E, S;
                b = y = e[0],
                T = M = e[1],
                _ = w = e[2],
                E = x = e[3],
                S = A = e[4];
                for (var D, m = 0; m < 80; m += 1)
                    D = y + t[u + l[m]] | 0,
                    D += m < 16 ? r(M, w, x) + d[0] : m < 32 ? n(M, w, x) + d[1] : m < 48 ? i(M, w, x) + d[2] : m < 64 ? a(M, w, x) + d[3] : o(M, w, x) + d[4],
                    D |= 0,
                    D = s(D, h[m]),
                    D = D + A | 0,
                    y = A,
                    A = x,
                    x = s(w, 10),
                    w = M,
                    M = D,
                    D = b + t[u + c[m]] | 0,
                    D += m < 16 ? o(T, _, E) + p[0] : m < 32 ? a(T, _, E) + p[1] : m < 48 ? i(T, _, E) + p[2] : m < 64 ? n(T, _, E) + p[3] : r(T, _, E) + p[4],
                    D |= 0,
                    D = s(D, f[m]),
                    D = D + S | 0,
                    b = S,
                    S = E,
                    E = s(_, 10),
                    _ = T,
                    T = D;
                D = e[1] + w + E | 0,
                e[1] = e[2] + x + S | 0,
                e[2] = e[3] + A + b | 0,
                e[3] = e[4] + y + T | 0,
                e[4] = e[0] + M + _ | 0,
                e[0] = D
            }
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!**********************************************************!*\
  !*** ./~/rollbar-browser/dist/rollbar.umd.nojson.min.js ***!
  \**********************************************************/
    function(e, t, r) {
        !function(t, r) {
            e.exports = r()
        }(this, function() {
            return function(e) {
                function t(n) {
                    if (r[n])
                        return r[n].exports;
                    var i = r[n] = {
                        exports: {},
                        id: n,
                        loaded: !1
                    };
                    return e[n].call(i.exports, i, i.exports, t),
                    i.loaded = !0,
                    i.exports
                }
                var r = {};
                return t.m = e,
                t.c = r,
                t.p = "",
                t(0)
            }([function(e, t, r) {
                e.exports = r(1)
            }
            , function(e, t, r) {
                "use strict";
                function n() {
                    var e = "undefined" == typeof JSON ? {} : JSON;
                    i.setupJSON(e)
                }
                var i = r(2)
                  , a = r(3);
                n();
                var o = window._rollbarConfig
                  , s = o && o.globalAlias || "Rollbar"
                  , u = window[s] && "undefined" != typeof window[s].shimId;
                !u && o ? i.wrapper.init(o) : (window.Rollbar = i.wrapper,
                window.RollbarNotifier = a.Notifier),
                e.exports = i.wrapper
            }
            , function(e, t, r) {
                "use strict";
                function n(e, t, r) {
                    !r[4] && window._rollbarWrappedError && (r[4] = window._rollbarWrappedError,
                    window._rollbarWrappedError = null),
                    e.uncaughtError.apply(e, r),
                    t && t.apply(window, r)
                }
                function i(e, t) {
                    if (t.hasOwnProperty && t.hasOwnProperty("addEventListener")) {
                        var r = t.addEventListener;
                        t.addEventListener = function(t, n, i) {
                            r.call(this, t, e.wrap(n), i)
                        }
                        ;
                        var n = t.removeEventListener;
                        t.removeEventListener = function(e, t, r) {
                            n.call(this, e, t && t._wrapped || t, r)
                        }
                    }
                }
                var a = r(3)
                  , o = r(8)
                  , s = a.Notifier;
                window._rollbarWrappedError = null;
                var u = {};
                u.init = function(e, t) {
                    var r = new s(t);
                    if (r.configure(e),
                    e.captureUncaught) {
                        var a;
                        t && o.isType(t._rollbarOldOnError, "function") ? a = t._rollbarOldOnError : window.onerror && !window.onerror.belongsToShim && (a = window.onerror),
                        window.onerror = function() {
                            var e = Array.prototype.slice.call(arguments, 0);
                            n(r, a, e)
                        }
                        ;
                        var u, l, c = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"];
                        for (u = 0; u < c.length; ++u)
                            l = c[u],
                            window[l] && window[l].prototype && i(r, window[l].prototype)
                    }
                    return e.captureUnhandledRejections && (t && o.isType(t._unhandledRejectionHandler, "function") && window.removeEventListener("unhandledrejection", t._unhandledRejectionHandler),
                    r._unhandledRejectionHandler = function(e) {
                        var t = e.reason
                          , n = e.promise
                          , i = e.detail;
                        !t && i && (t = i.reason,
                        n = i.promise),
                        r.unhandledRejection(t, n)
                    }
                    ,
                    window.addEventListener("unhandledrejection", r._unhandledRejectionHandler)),
                    window.Rollbar = r,
                    s.processPayloads(),
                    r
                }
                ,
                e.exports = {
                    wrapper: u,
                    setupJSON: a.setupJSON
                }
            }
            , function(e, t, r) {
                "use strict";
                function n(e) {
                    x = e,
                    y.setupJSON(e)
                }
                function i(e, t) {
                    return function() {
                        var r = t || this;
                        try {
                            return e.apply(r, arguments)
                        } catch (e) {
                            console.error("[Rollbar]:", e)
                        }
                    }
                }
                function a() {
                    p || (p = setTimeout(f, 1e3))
                }
                function o() {
                    return A
                }
                function s(e) {
                    A = A || this;
                    var t = "https://" + s.DEFAULT_ENDPOINT;
                    this.options = {
                        enabled: !0,
                        endpoint: t,
                        environment: "production",
                        scrubFields: m([], s.DEFAULT_SCRUB_FIELDS),
                        checkIgnore: null,
                        logLevel: s.DEFAULT_LOG_LEVEL,
                        reportLevel: s.DEFAULT_REPORT_LEVEL,
                        uncaughtErrorLevel: s.DEFAULT_UNCAUGHT_ERROR_LEVEL,
                        payload: {}
                    },
                    this.lastError = null,
                    this.plugins = {},
                    this.parentNotifier = e,
                    e && (e.hasOwnProperty("shimId") ? e.notifier = this : this.configure(e.options))
                }
                function u(e) {
                    window._rollbarPayloadQueue.push(e),
                    a()
                }
                function l(e) {
                    return i(function() {
                        var t = this._getLogArgs(arguments);
                        return this._log(e || t.level || this.options.logLevel || s.DEFAULT_LOG_LEVEL, t.message, t.err, t.custom, t.callback)
                    })
                }
                function c(e, t) {
                    e || (e = t ? x.stringify(t) : "");
                    var r = {
                        body: e
                    };
                    return t && (r.extra = m(!0, {}, t)),
                    {
                        message: r
                    }
                }
                function h(e, t, r) {
                    var n = g.guessErrorClass(t.message)
                      , i = t.name || n[0]
                      , a = n[1]
                      , o = {
                        exception: {
                            class: i,
                            message: a
                        }
                    };
                    if (e && (o.exception.description = e || "uncaught exception"),
                    t.stack) {
                        var s, u, l, h, f, d, p, y;
                        for (o.frames = [],
                        p = 0; p < t.stack.length; ++p)
                            s = t.stack[p],
                            u = {
                                filename: s.url ? v.sanitizeUrl(s.url) : "(unknown)",
                                lineno: s.line || null,
                                method: s.func && "?" !== s.func ? s.func : "[anonymous]",
                                colno: s.column
                            },
                            l = h = f = null,
                            d = s.context ? s.context.length : 0,
                            d && (y = Math.floor(d / 2),
                            h = s.context.slice(0, y),
                            l = s.context[y],
                            f = s.context.slice(y)),
                            l && (u.code = l),
                            (h || f) && (u.context = {},
                            h && h.length && (u.context.pre = h),
                            f && f.length && (u.context.post = f)),
                            s.args && (u.args = s.args),
                            o.frames.push(u);
                        return o.frames.reverse(),
                        r && (o.extra = m(!0, {}, r)),
                        {
                            trace: o
                        }
                    }
                    return c(i + ": " + a, r)
                }
                function f() {
                    var e;
                    try {
                        for (; e = window._rollbarPayloadQueue.shift(); )
                            d(e)
                    } finally {
                        p = void 0
                    }
                }
                function d(e) {
                    var t = e.endpointUrl
                      , r = e.accessToken
                      , n = e.payload
                      , i = e.callback || function() {}
                      , a = (new Date).getTime();
                    a - T >= 6e4 && (T = a,
                    E = 0);
                    var o = window._globalRollbarOptions.maxItems
                      , l = window._globalRollbarOptions.itemsPerMinute
                      , c = function() {
                        return !n.ignoreRateLimit && o >= 1 && _ >= o
                    }
                      , h = function() {
                        return !n.ignoreRateLimit && l >= 1 && E >= l
                    };
                    return c() ? void i(new Error(o + " max items reached")) : h() ? void i(new Error(l + " items per minute reached")) : (_++,
                    E++,
                    c() && A._log(A.options.uncaughtErrorLevel, "maxItems has been hit. Ignoring errors for the remainder of the current page load.", null, {
                        maxItems: o
                    }, null, !1, !0),
                    n.ignoreRateLimit && delete n.ignoreRateLimit,
                    void M.post(t, r, n, function(t, r) {
                        return t ? (t instanceof w && (e.callback = function() {}
                        ,
                        setTimeout(function() {
                            u(e)
                        }, s.RETRY_DELAY)),
                        i(t)) : i(null, r)
                    }))
                }
                var p, m = r(4), g = r(5), v = r(8), y = r(10), M = y.XHR, w = y.ConnectionError, x = null;
                s.NOTIFIER_VERSION = "1.9.2",
                s.DEFAULT_ENDPOINT = "api.rollbar.com/api/1/",
                s.DEFAULT_SCRUB_FIELDS = ["pw", "pass", "passwd", "password", "secret", "confirm_password", "confirmPassword", "password_confirmation", "passwordConfirmation", "access_token", "accessToken", "secret_key", "secretKey", "secretToken"],
                s.DEFAULT_LOG_LEVEL = "debug",
                s.DEFAULT_REPORT_LEVEL = "debug",
                s.DEFAULT_UNCAUGHT_ERROR_LEVEL = "error",
                s.DEFAULT_ITEMS_PER_MIN = 60,
                s.DEFAULT_MAX_ITEMS = 0,
                s.LEVELS = {
                    debug: 0,
                    info: 1,
                    warning: 2,
                    error: 3,
                    critical: 4
                },
                s.RETRY_DELAY = 1e4,
                window._rollbarPayloadQueue = window._rollbarPayloadQueue || [],
                window._globalRollbarOptions = {
                    startTime: (new Date).getTime(),
                    maxItems: s.DEFAULT_MAX_ITEMS,
                    itemsPerMinute: s.DEFAULT_ITEMS_PER_MIN
                };
                var A, b = s.prototype;
                b._getLogArgs = function(e) {
                    for (var t, r, n, a, o, u, l = this.options.logLevel || s.DEFAULT_LOG_LEVEL, c = [], h = 0; h < e.length; ++h)
                        u = e[h],
                        o = v.typeName(u),
                        "string" === o ? t ? c.push(u) : t = u : "function" === o ? a = i(u, this) : "date" === o ? c.push(u) : "error" === o || u instanceof Error || "undefined" != typeof DOMException && u instanceof DOMException ? r ? c.push(u) : r = u : "object" !== o && "array" !== o || (n ? c.push(u) : n = u);
                    return c.length && (n = n || {},
                    n.extraArgs = c),
                    {
                        level: l,
                        message: t,
                        err: r,
                        custom: n,
                        callback: a
                    }
                }
                ,
                b._route = function(e) {
                    var t = this.options.endpoint
                      , r = /\/$/.test(t)
                      , n = /^\//.test(e);
                    return r && n ? e = e.substring(1) : r || n || (e = "/" + e),
                    t + e
                }
                ,
                b._processShimQueue = function(e) {
                    for (var t, r, n, i, a, o, u, l = {}; r = e.shift(); )
                        t = r.shim,
                        n = r.method,
                        i = r.args,
                        a = t.parentShim,
                        u = l[t.shimId],
                        u || (a ? (o = l[a.shimId],
                        u = new s(o)) : u = this,
                        l[t.shimId] = u),
                        u[n] && v.isType(u[n], "function") && u[n].apply(u, i)
                }
                ,
                b._buildPayload = function(e, t, r, n, i) {
                    var a = this.options.accessToken
                      , o = this.options.environment
                      , u = m(!0, {}, this.options.payload)
                      , l = v.uuid4();
                    if (void 0 === s.LEVELS[t])
                        throw new Error("Invalid level");
                    if (!r && !n && !i)
                        throw new Error("No message, stack info or custom data");
                    var c = {
                        environment: o,
                        endpoint: this.options.endpoint,
                        uuid: l,
                        level: t,
                        platform: "browser",
                        framework: "browser-js",
                        language: "javascript",
                        body: this._buildBody(r, n, i),
                        request: {
                            url: window.location.href,
                            query_string: window.location.search,
                            user_ip: "$remote_ip"
                        },
                        client: {
                            runtime_ms: e.getTime() - window._globalRollbarOptions.startTime,
                            timestamp: Math.round(e.getTime() / 1e3),
                            javascript: {
                                browser: window.navigator.userAgent,
                                language: window.navigator.language,
                                cookie_enabled: window.navigator.cookieEnabled,
                                screen: {
                                    width: window.screen.width,
                                    height: window.screen.height
                                },
                                plugins: this._getBrowserPlugins()
                            }
                        },
                        server: {},
                        notifier: {
                            name: "rollbar-browser-js",
                            version: s.NOTIFIER_VERSION
                        }
                    };
                    u.body && delete u.body;
                    var h = {
                        access_token: a,
                        data: m(!0, c, u)
                    };
                    return this._scrub(h.data),
                    h
                }
                ,
                b._buildBody = function(e, t, r) {
                    var n;
                    return n = t ? h(e, t, r) : c(e, r)
                }
                ,
                b._getBrowserPlugins = function() {
                    if (!this._browserPlugins) {
                        var e, t, r = window.navigator.plugins || [], n = r.length, i = [];
                        for (t = 0; t < n; ++t)
                            e = r[t],
                            i.push({
                                name: e.name,
                                description: e.description
                            });
                        this._browserPlugins = i
                    }
                    return this._browserPlugins
                }
                ,
                b._scrub = function(e) {
                    function t(e, t, r, n, i, a) {
                        return t + v.redact(a)
                    }
                    function r(e) {
                        var r;
                        if (v.isType(e, "string"))
                            for (r = 0; r < s.length; ++r)
                                e = e.replace(s[r], t);
                        return e
                    }
                    function n(e, t) {
                        var r;
                        for (r = 0; r < o.length; ++r)
                            if (o[r].test(e)) {
                                t = v.redact(t);
                                break
                            }
                        return t
                    }
                    function i(e, t) {
                        var i = n(e, t);
                        return i === t ? r(i) : i
                    }
                    var a = this.options.scrubFields
                      , o = this._getScrubFieldRegexs(a)
                      , s = this._getScrubQueryParamRegexs(a);
                    return v.traverse(e, i),
                    e
                }
                ,
                b._getScrubFieldRegexs = function(e) {
                    for (var t, r = [], n = 0; n < e.length; ++n)
                        t = "\\[?(%5[bB])?" + e[n] + "\\[?(%5[bB])?\\]?(%5[dD])?",
                        r.push(new RegExp(t,"i"));
                    return r
                }
                ,
                b._getScrubQueryParamRegexs = function(e) {
                    for (var t, r = [], n = 0; n < e.length; ++n)
                        t = "\\[?(%5[bB])?" + e[n] + "\\[?(%5[bB])?\\]?(%5[dD])?",
                        r.push(new RegExp("(" + t + "=)([^&\\n]+)","igm"));
                    return r
                }
                ,
                b._urlIsWhitelisted = function(e) {
                    var t, r, n, i, a, o, s, u, l, c;
                    try {
                        if (t = this.options.hostWhiteList,
                        r = e && e.data && e.data.body && e.data.body.trace,
                        !t || 0 === t.length)
                            return !0;
                        if (!r)
                            return !0;
                        for (s = t.length,
                        a = r.frames.length,
                        l = 0; l < a; l++) {
                            if (n = r.frames[l],
                            i = n.filename,
                            !v.isType(i, "string"))
                                return !0;
                            for (c = 0; c < s; c++)
                                if (o = t[c],
                                u = new RegExp(o),
                                u.test(i))
                                    return !0
                        }
                    } catch (e) {
                        return this.configure({
                            hostWhiteList: null
                        }),
                        console.error("[Rollbar]: Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.", e),
                        !0
                    }
                    return !1
                }
                ,
                b._messageIsIgnored = function(e) {
                    var t, r, n, i, a, o, s, u, l;
                    try {
                        if (a = !1,
                        n = this.options.ignoredMessages,
                        !n || 0 === n.length)
                            return !1;
                        if (s = e && e.data && e.data.body,
                        u = s && s.trace && s.trace.exception && s.trace.exception.message,
                        l = s && s.message && s.message.body,
                        t = u || l,
                        !t)
                            return !1;
                        for (i = n.length,
                        r = 0; r < i && (o = new RegExp(n[r],"gi"),
                        !(a = o.test(t))); r++)
                            ;
                    } catch (e) {
                        this.configure({
                            ignoredMessages: null
                        }),
                        console.error("[Rollbar]: Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")
                    }
                    return a
                }
                ,
                b._enqueuePayload = function(e, t, r, n) {
                    var i = {
                        callback: n,
                        accessToken: this.options.accessToken,
                        endpointUrl: this._route("item/"),
                        payload: e
                    }
                      , a = function() {
                        if (n) {
                            var e = "This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details.";
                            n(null, {
                                err: 0,
                                result: {
                                    id: null,
                                    uuid: null,
                                    message: e
                                }
                            })
                        }
                    };
                    if (this._internalCheckIgnore(t, r, e))
                        return void a();
                    try {
                        if (v.isType(this.options.checkIgnore, "function") && this.options.checkIgnore(t, r, e))
                            return void a()
                    } catch (e) {
                        this.configure({
                            checkIgnore: null
                        }),
                        console.error("[Rollbar]: Error while calling custom checkIgnore() function. Removing custom checkIgnore().", e)
                    }
                    if (this._urlIsWhitelisted(e) && !this._messageIsIgnored(e)) {
                        if (this.options.verbose) {
                            if (e.data && e.data.body && e.data.body.trace) {
                                var o = e.data.body.trace
                                  , s = o.exception.message;
                                console.error("[Rollbar]: ", s)
                            }
                            console.info("[Rollbar]: ", i)
                        }
                        v.isType(this.options.logFunction, "function") && this.options.logFunction(i);
                        try {
                            v.isType(this.options.transform, "function") && this.options.transform(e)
                        } catch (e) {
                            this.configure({
                                transform: null
                            }),
                            console.error("[Rollbar]: Error while calling custom transform() function. Removing custom transform().", e)
                        }
                        this.options.enabled && u(i)
                    }
                }
                ,
                b._internalCheckIgnore = function(e, t, r) {
                    var n = t[0]
                      , i = s.LEVELS[n] || 0
                      , a = s.LEVELS[this.options.reportLevel] || 0;
                    if (i < a)
                        return !0;
                    var o = this.options ? this.options.plugins : {};
                    if (o && o.jquery && o.jquery.ignoreAjaxErrors)
                        try {
                            return !!r.data.body.message.extra.isAjax
                        } catch (e) {
                            return !1
                        }
                    return !1
                }
                ,
                b._log = function(e, t, r, n, i, a, o) {
                    var s = null;
                    if (r)
                        try {
                            if (s = r._savedStackTrace ? r._savedStackTrace : g.parse(r),
                            r === this.lastError)
                                return;
                            this.lastError = r
                        } catch (e) {
                            console.error("[Rollbar]: Error while parsing the error object.", e),
                            t = r.message || r.description || t || String(r),
                            r = null
                        }
                    var u = this._buildPayload(new Date, e, t, s, n);
                    o && (u.ignoreRateLimit = !0),
                    this._enqueuePayload(u, !!a, [e, t, r, n], i)
                }
                ,
                b.log = l(),
                b.debug = l("debug"),
                b.info = l("info"),
                b.warn = l("warning"),
                b.warning = l("warning"),
                b.error = l("error"),
                b.critical = l("critical"),
                b.uncaughtError = i(function(e, t, r, n, i, a) {
                    if (a = a || null,
                    i && v.isType(i, "error"))
                        return void this._log(this.options.uncaughtErrorLevel, e, i, a, null, !0);
                    if (t && v.isType(t, "error"))
                        return void this._log(this.options.uncaughtErrorLevel, e, t, a, null, !0);
                    var o = {
                        url: t || "",
                        line: r
                    };
                    o.func = g.guessFunctionName(o.url, o.line),
                    o.context = g.gatherContext(o.url, o.line);
                    var s = {
                        mode: "onerror",
                        message: i ? String(i) : e || "uncaught exception",
                        url: document.location.href,
                        stack: [o],
                        useragent: navigator.userAgent
                    }
                      , u = this._buildPayload(new Date, this.options.uncaughtErrorLevel, e, s, a);
                    this._enqueuePayload(u, !0, [this.options.uncaughtErrorLevel, e, t, r, n, i])
                }),
                b.unhandledRejection = i(function(e, t) {
                    if (null == e)
                        return void A._log(A.options.uncaughtErrorLevel, "unhandled rejection was null or undefined!", null, {}, null, !1, !1);
                    var r = e.message || (e ? String(e) : "unhandled rejection")
                      , n = e._rollbarContext || t._rollbarContext || null;
                    if (e && v.isType(e, "error"))
                        return void this._log(this.options.uncaughtErrorLevel, r, e, n, null, !0);
                    var i = {
                        url: "",
                        line: 0
                    };
                    i.func = g.guessFunctionName(i.url, i.line),
                    i.context = g.gatherContext(i.url, i.line);
                    var a = {
                        mode: "unhandledrejection",
                        message: r,
                        url: document.location.href,
                        stack: [i],
                        useragent: navigator.userAgent
                    }
                      , o = this._buildPayload(new Date, this.options.uncaughtErrorLevel, r, a, n);
                    this._enqueuePayload(o, !0, [this.options.uncaughtErrorLevel, r, i.url, i.line, 0, e, t])
                }),
                b.global = i(function(e) {
                    e = e || {};
                    var t = {
                        startTime: e.startTime,
                        maxItems: e.maxItems,
                        itemsPerMinute: e.itemsPerMinute
                    };
                    m(!0, window._globalRollbarOptions, t),
                    void 0 !== e.maxItems && (_ = 0),
                    void 0 !== e.itemsPerMinute && (E = 0)
                }),
                b.configure = i(function(e, t) {
                    var r = m(!0, {}, e);
                    m(!t, this.options, r),
                    this.global(r)
                }),
                b.scope = i(function(e) {
                    var t = new s(this);
                    return m(!0, t.options.payload, e),
                    t
                }),
                b.wrap = function(e, t) {
                    try {
                        var r;
                        if (r = v.isType(t, "function") ? t : function() {
                            return t || {}
                        }
                        ,
                        !v.isType(e, "function"))
                            return e;
                        if (e._isWrap)
                            return e;
                        if (!e._wrapped) {
                            e._wrapped = function() {
                                try {
                                    return e.apply(this, arguments)
                                } catch (t) {
                                    throw "string" == typeof t && (t = new String(t)),
                                    t.stack || (t._savedStackTrace = g.parse(t)),
                                    t._rollbarContext = r() || {},
                                    t._rollbarContext._wrappedSource = e.toString(),
                                    window._rollbarWrappedError = t,
                                    t
                                }
                            }
                            ,
                            e._wrapped._isWrap = !0;
                            for (var n in e)
                                e.hasOwnProperty(n) && (e._wrapped[n] = e[n])
                        }
                        return e._wrapped
                    } catch (t) {
                        return e
                    }
                }
                ,
                b.loadFull = function() {
                    console.error("[Rollbar]: Unexpected Rollbar.loadFull() called on a Notifier instance")
                }
                ,
                s.processPayloads = function(e) {
                    return e ? void f() : void a()
                }
                ;
                var T = (new Date).getTime()
                  , _ = 0
                  , E = 0;
                e.exports = {
                    Notifier: s,
                    setupJSON: n,
                    topLevelNotifier: o
                }
            }
            , function(e, t) {
                "use strict";
                var r = Object.prototype.hasOwnProperty
                  , n = Object.prototype.toString
                  , i = function(e) {
                    return "function" == typeof Array.isArray ? Array.isArray(e) : "[object Array]" === n.call(e)
                }
                  , a = function(e) {
                    if (!e || "[object Object]" !== n.call(e))
                        return !1;
                    var t = r.call(e, "constructor")
                      , i = e.constructor && e.constructor.prototype && r.call(e.constructor.prototype, "isPrototypeOf");
                    if (e.constructor && !t && !i)
                        return !1;
                    var a;
                    for (a in e)
                        ;
                    return "undefined" == typeof a || r.call(e, a)
                };
                e.exports = function e() {
                    var t, r, n, o, s, u, l = arguments[0], c = 1, h = arguments.length, f = !1;
                    for ("boolean" == typeof l ? (f = l,
                    l = arguments[1] || {},
                    c = 2) : ("object" != typeof l && "function" != typeof l || null == l) && (l = {}); c < h; ++c)
                        if (t = arguments[c],
                        null != t)
                            for (r in t)
                                n = l[r],
                                o = t[r],
                                l !== o && (f && o && (a(o) || (s = i(o))) ? (s ? (s = !1,
                                u = n && i(n) ? n : []) : u = n && a(n) ? n : {},
                                l[r] = e(f, u, o)) : "undefined" != typeof o && (l[r] = o));
                    return l
                }
            }
            , function(e, t, r) {
                "use strict";
                function n() {
                    return c
                }
                function i() {
                    return null
                }
                function a(e) {
                    var t = {};
                    return t._stackFrame = e,
                    t.url = e.fileName,
                    t.line = e.lineNumber,
                    t.func = e.functionName,
                    t.column = e.columnNumber,
                    t.args = e.args,
                    t.context = i(t.url, t.line),
                    t
                }
                function o(e) {
                    function t() {
                        var t = [];
                        try {
                            t = l.parse(e)
                        } catch (e) {
                            t = []
                        }
                        for (var r = [], n = 0; n < t.length; n++)
                            r.push(new a(t[n]));
                        return r
                    }
                    return {
                        stack: t(),
                        message: e.message,
                        name: e.name
                    }
                }
                function s(e) {
                    return new o(e)
                }
                function u(e) {
                    if (!e)
                        return ["Unknown error. There was no error message to display.", ""];
                    var t = e.match(h)
                      , r = "(unknown)";
                    return t && (r = t[t.length - 1],
                    e = e.replace((t[t.length - 2] || "") + r + ":", ""),
                    e = e.replace(/(^[\s]+|[\s]+$)/g, "")),
                    [r, e]
                }
                var l = r(6)
                  , c = "?"
                  , h = new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");
                e.exports = {
                    guessFunctionName: n,
                    guessErrorClass: u,
                    gatherContext: i,
                    parse: s,
                    Stack: o,
                    Frame: a
                }
            }
            , function(e, t, r) {
                var n, i, a;
                !function(o, s) {
                    "use strict";
                    i = [r(7)],
                    n = s,
                    a = "function" == typeof n ? n.apply(t, i) : n,
                    !(void 0 !== a && (e.exports = a))
                }(this, function(e) {
                    "use strict";
                    function t(e, t, r) {
                        if ("function" == typeof Array.prototype.map)
                            return e.map(t, r);
                        for (var n = new Array(e.length), i = 0; i < e.length; i++)
                            n[i] = t.call(r, e[i]);
                        return n
                    }
                    function r(e, t, r) {
                        if ("function" == typeof Array.prototype.filter)
                            return e.filter(t, r);
                        for (var n = [], i = 0; i < e.length; i++)
                            t.call(r, e[i]) && n.push(e[i]);
                        return n
                    }
                    var n = /(^|@)\S+\:\d+/
                      , i = /^\s*at .*(\S+\:\d+|\(native\))/m
                      , a = /^(eval@)?(\[native code\])?$/;
                    return {
                        parse: function(e) {
                            if ("undefined" != typeof e.stacktrace || "undefined" != typeof e["opera#sourceloc"])
                                return this.parseOpera(e);
                            if (e.stack && e.stack.match(i))
                                return this.parseV8OrIE(e);
                            if (e.stack)
                                return this.parseFFOrSafari(e);
                            throw new Error("Cannot parse given Error object")
                        },
                        extractLocation: function(e) {
                            if (e.indexOf(":") === -1)
                                return [e];
                            var t = e.replace(/[\(\)\s]/g, "").split(":")
                              , r = t.pop()
                              , n = t[t.length - 1];
                            if (!isNaN(parseFloat(n)) && isFinite(n)) {
                                var i = t.pop();
                                return [t.join(":"), i, r]
                            }
                            return [t.join(":"), r, void 0]
                        },
                        parseV8OrIE: function(n) {
                            var a = r(n.stack.split("\n"), function(e) {
                                return !!e.match(i)
                            }, this);
                            return t(a, function(t) {
                                t.indexOf("(eval ") > -1 && (t = t.replace(/eval code/g, "eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g, ""));
                                var r = t.replace(/^\s+/, "").replace(/\(eval code/g, "(").split(/\s+/).slice(1)
                                  , n = this.extractLocation(r.pop())
                                  , i = r.join(" ") || void 0
                                  , a = "eval" === n[0] ? void 0 : n[0];
                                return new e(i,void 0,a,n[1],n[2],t)
                            }, this)
                        },
                        parseFFOrSafari: function(n) {
                            var i = r(n.stack.split("\n"), function(e) {
                                return !e.match(a)
                            }, this);
                            return t(i, function(t) {
                                if (t.indexOf(" > eval") > -1 && (t = t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g, ":$1")),
                                t.indexOf("@") === -1 && t.indexOf(":") === -1)
                                    return new e(t);
                                var r = t.split("@")
                                  , n = this.extractLocation(r.pop())
                                  , i = r.shift() || void 0;
                                return new e(i,void 0,n[0],n[1],n[2],t)
                            }, this)
                        },
                        parseOpera: function(e) {
                            return !e.stacktrace || e.message.indexOf("\n") > -1 && e.message.split("\n").length > e.stacktrace.split("\n").length ? this.parseOpera9(e) : e.stack ? this.parseOpera11(e) : this.parseOpera10(e)
                        },
                        parseOpera9: function(t) {
                            for (var r = /Line (\d+).*script (?:in )?(\S+)/i, n = t.message.split("\n"), i = [], a = 2, o = n.length; a < o; a += 2) {
                                var s = r.exec(n[a]);
                                s && i.push(new e(void 0,void 0,s[2],s[1],void 0,n[a]))
                            }
                            return i
                        },
                        parseOpera10: function(t) {
                            for (var r = /Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i, n = t.stacktrace.split("\n"), i = [], a = 0, o = n.length; a < o; a += 2) {
                                var s = r.exec(n[a]);
                                s && i.push(new e(s[3] || void 0,void 0,s[2],s[1],void 0,n[a]))
                            }
                            return i
                        },
                        parseOpera11: function(i) {
                            var a = r(i.stack.split("\n"), function(e) {
                                return !!e.match(n) && !e.match(/^Error created at/)
                            }, this);
                            return t(a, function(t) {
                                var r, n = t.split("@"), i = this.extractLocation(n.pop()), a = n.shift() || "", o = a.replace(/<anonymous function(: (\w+))?>/, "$2").replace(/\([^\)]*\)/g, "") || void 0;
                                a.match(/\(([^\)]*)\)/) && (r = a.replace(/^[^\(]+\(([^\)]*)\)$/, "$1"));
                                var s = void 0 === r || "[arguments not available]" === r ? void 0 : r.split(",");
                                return new e(o,s,i[0],i[1],i[2],t)
                            }, this)
                        }
                    }
                })
            }
            , function(e, t, r) {
                var n, i, a;
                !function(r, o) {
                    "use strict";
                    i = [],
                    n = o,
                    a = "function" == typeof n ? n.apply(t, i) : n,
                    !(void 0 !== a && (e.exports = a))
                }(this, function() {
                    "use strict";
                    function e(e) {
                        return !isNaN(parseFloat(e)) && isFinite(e)
                    }
                    function t(e, t, r, n, i, a) {
                        void 0 !== e && this.setFunctionName(e),
                        void 0 !== t && this.setArgs(t),
                        void 0 !== r && this.setFileName(r),
                        void 0 !== n && this.setLineNumber(n),
                        void 0 !== i && this.setColumnNumber(i),
                        void 0 !== a && this.setSource(a)
                    }
                    return t.prototype = {
                        getFunctionName: function() {
                            return this.functionName
                        },
                        setFunctionName: function(e) {
                            this.functionName = String(e)
                        },
                        getArgs: function() {
                            return this.args
                        },
                        setArgs: function(e) {
                            if ("[object Array]" !== Object.prototype.toString.call(e))
                                throw new TypeError("Args must be an Array");
                            this.args = e
                        },
                        getFileName: function() {
                            return this.fileName
                        },
                        setFileName: function(e) {
                            this.fileName = String(e)
                        },
                        getLineNumber: function() {
                            return this.lineNumber
                        },
                        setLineNumber: function(t) {
                            if (!e(t))
                                throw new TypeError("Line Number must be a Number");
                            this.lineNumber = Number(t)
                        },
                        getColumnNumber: function() {
                            return this.columnNumber
                        },
                        setColumnNumber: function(t) {
                            if (!e(t))
                                throw new TypeError("Column Number must be a Number");
                            this.columnNumber = Number(t)
                        },
                        getSource: function() {
                            return this.source
                        },
                        setSource: function(e) {
                            this.source = String(e)
                        },
                        toString: function() {
                            var t = this.getFunctionName() || "{anonymous}"
                              , r = "(" + (this.getArgs() || []).join(",") + ")"
                              , n = this.getFileName() ? "@" + this.getFileName() : ""
                              , i = e(this.getLineNumber()) ? ":" + this.getLineNumber() : ""
                              , a = e(this.getColumnNumber()) ? ":" + this.getColumnNumber() : "";
                            return t + r + n + i + a
                        }
                    },
                    t
                })
            }
            , function(e, t, r) {
                "use strict";
                function n(e) {
                    return {}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()
                }
                function i(e, t) {
                    return n(e) === t
                }
                function a(e) {
                    if (!i(e, "string"))
                        throw new Error("received invalid input");
                    for (var t = c, r = t.parser[t.strictMode ? "strict" : "loose"].exec(e), n = {}, a = 14; a--; )
                        n[t.key[a]] = r[a] || "";
                    return n[t.q.name] = {},
                    n[t.key[12]].replace(t.q.parser, function(e, r, i) {
                        r && (n[t.q.name][r] = i)
                    }),
                    n
                }
                function o(e) {
                    var t = a(e);
                    return "" === t.anchor && (t.source = t.source.replace("#", "")),
                    e = t.source.replace("?" + t.query, "")
                }
                function s(e, t) {
                    var r, n, a, o = i(e, "object"), u = i(e, "array"), l = [];
                    if (o)
                        for (r in e)
                            e.hasOwnProperty(r) && l.push(r);
                    else if (u)
                        for (a = 0; a < e.length; ++a)
                            l.push(a);
                    for (a = 0; a < l.length; ++a)
                        r = l[a],
                        n = e[r],
                        o = i(n, "object"),
                        u = i(n, "array"),
                        o || u ? e[r] = s(n, t) : e[r] = t(r, n);
                    return e
                }
                function u(e) {
                    return e = String(e),
                    new Array(e.length + 1).join("*")
                }
                function l() {
                    var e = (new Date).getTime()
                      , t = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
                        var r = (e + 16 * Math.random()) % 16 | 0;
                        return e = Math.floor(e / 16),
                        ("x" === t ? r : 7 & r | 8).toString(16)
                    });
                    return t
                }
                r(9);
                var c = {
                    strictMode: !1,
                    key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
                    q: {
                        name: "queryKey",
                        parser: /(?:^|&)([^&=]*)=?([^&]*)/g
                    },
                    parser: {
                        strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                        loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
                    }
                }
                  , h = {
                    isType: i,
                    parseUri: a,
                    parseUriOptions: c,
                    redact: u,
                    sanitizeUrl: o,
                    traverse: s,
                    typeName: n,
                    uuid4: l
                };
                e.exports = h
            }
            , function(e, t) {
                !function(e) {
                    "use strict";
                    e.console = e.console || {};
                    for (var t, r, n = e.console, i = {}, a = function() {}, o = "memory".split(","), s = "assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(","); t = o.pop(); )
                        n[t] || (n[t] = i);
                    for (; r = s.pop(); )
                        n[r] || (n[r] = a)
                }("undefined" == typeof window ? this : window)
            }
            , function(e, t, r) {
                "use strict";
                function n(e) {
                    o = e
                }
                function i(e) {
                    this.name = "Connection Error",
                    this.message = e,
                    this.stack = (new Error).stack
                }
                var a = r(8)
                  , o = null;
                i.prototype = Object.create(Error.prototype),
                i.prototype.constructor = i;
                var s = {
                    XMLHttpFactories: [function() {
                        return new XMLHttpRequest
                    }
                    , function() {
                        return new ActiveXObject("Msxml2.XMLHTTP")
                    }
                    , function() {
                        return new ActiveXObject("Msxml3.XMLHTTP")
                    }
                    , function() {
                        return new ActiveXObject("Microsoft.XMLHTTP")
                    }
                    ],
                    createXMLHTTPObject: function() {
                        var e, t = !1, r = s.XMLHttpFactories, n = r.length;
                        for (e = 0; e < n; e++)
                            try {
                                t = r[e]();
                                break
                            } catch (e) {}
                        return t
                    },
                    post: function(e, t, r, n) {
                        if (!a.isType(r, "object"))
                            throw new Error("Expected an object to POST");
                        r = o.stringify(r),
                        n = n || function() {}
                        ;
                        var u = s.createXMLHTTPObject();
                        if (u)
                            try {
                                try {
                                    var l = function() {
                                        try {
                                            if (l && 4 === u.readyState) {
                                                l = void 0;
                                                var e = o.parse(u.responseText);
                                                200 === u.status ? n(null, e) : a.isType(u.status, "number") && u.status >= 400 && u.status < 600 ? (403 == u.status && console.error("[Rollbar]:" + e.message),
                                                n(new Error(String(u.status)))) : n(new i("XHR response had no status code (likely connection failure)"))
                                            }
                                        } catch (e) {
                                            var t;
                                            t = e && e.stack ? e : new Error(e),
                                            n(t)
                                        }
                                    };
                                    u.open("POST", e, !0),
                                    u.setRequestHeader && (u.setRequestHeader("Content-Type", "application/json"),
                                    u.setRequestHeader("X-Rollbar-Access-Token", t)),
                                    u.onreadystatechange = l,
                                    u.send(r)
                                } catch (t) {
                                    if ("undefined" != typeof XDomainRequest) {
                                        "http:" === window.location.href.substring(0, 5) && "https" === e.substring(0, 5) && (e = "http" + e.substring(5));
                                        var c = function() {
                                            n(new i("Request timed out"))
                                        }
                                          , h = function() {
                                            n(new Error("Error during request"))
                                        }
                                          , f = function() {
                                            n(null, o.parse(u.responseText))
                                        };
                                        u = new XDomainRequest,
                                        u.onprogress = function() {}
                                        ,
                                        u.ontimeout = c,
                                        u.onerror = h,
                                        u.onload = f,
                                        u.open("POST", e, !0),
                                        u.send(r)
                                    }
                                }
                            } catch (e) {
                                n(e)
                            }
                    }
                };
                e.exports = {
                    XHR: s,
                    setupJSON: n,
                    ConnectionError: i
                }
            }
            ])
        })
    }
    , /*!**************************!*\
  !*** ./~/sha.js/hash.js ***!
  \**************************/
    function(e, t) {
        e.exports = function(e) {
            function t(t, r) {
                this._block = new e(t),
                this._finalSize = r,
                this._blockSize = t,
                this._len = 0,
                this._s = 0
            }
            return t.prototype.init = function() {
                this._s = 0,
                this._len = 0
            }
            ,
            t.prototype.update = function(t, r) {
                "string" == typeof t && (r = r || "utf8",
                t = new e(t,r));
                for (var n = this._len += t.length, i = this._s = this._s || 0, a = 0, o = this._block; i < n; ) {
                    for (var s = Math.min(t.length, a + this._blockSize - i % this._blockSize), u = s - a, l = 0; l < u; l++)
                        o[i % this._blockSize + l] = t[l + a];
                    i += u,
                    a += u,
                    i % this._blockSize === 0 && this._update(o)
                }
                return this._s = i,
                this
            }
            ,
            t.prototype.digest = function(e) {
                var t = 8 * this._len;
                this._block[this._len % this._blockSize] = 128,
                this._block.fill(0, this._len % this._blockSize + 1),
                t % (8 * this._blockSize) >= 8 * this._finalSize && (this._update(this._block),
                this._block.fill(0)),
                this._block.writeInt32BE(t, this._blockSize - 4);
                var r = this._update(this._block) || this._hash();
                return e ? r.toString(e) : r
            }
            ,
            t.prototype._update = function() {
                throw new Error("_update must be implemented by subclass")
            }
            ,
            t
        }
    }
    , /*!***************************!*\
  !*** ./~/sha.js/index.js ***!
  \***************************/
    function(e, t, r) {
        var t = e.exports = function(e) {
            var r = t[e];
            if (!r)
                throw new Error(e + " is not supported (we accept pull requests)");
            return new r
        }
          , n = r(/*! buffer */
        18).Buffer
          , i = r(/*! ./hash */
        353)(n);
        t.sha1 = r(/*! ./sha1 */
        355)(n, i),
        t.sha256 = r(/*! ./sha256 */
        356)(n, i),
        t.sha512 = r(/*! ./sha512 */
        357)(n, i)
    }
    , /*!**************************!*\
  !*** ./~/sha.js/sha1.js ***!
  \**************************/
    function(e, t, r) {
        var n = r(/*! util */
        109).inherits;
        e.exports = function(e, t) {
            function r() {
                return p.length ? p.pop().init() : this instanceof r ? (this._w = d,
                t.call(this, 64, 56),
                this._h = null,
                void this.init()) : new r
            }
            function i(e, t, r, n) {
                return e < 20 ? t & r | ~t & n : e < 40 ? t ^ r ^ n : e < 60 ? t & r | t & n | r & n : t ^ r ^ n
            }
            function a(e) {
                return e < 20 ? 1518500249 : e < 40 ? 1859775393 : e < 60 ? -1894007588 : -899497514
            }
            function o(e, t) {
                return e + t | 0
            }
            function s(e, t) {
                return e << t | e >>> 32 - t
            }
            var u = 0
              , l = 4
              , c = 8
              , h = 12
              , f = 16
              , d = new ("undefined" == typeof Int32Array ? Array : Int32Array)(80)
              , p = [];
            return n(r, t),
            r.prototype.init = function() {
                return this._a = 1732584193,
                this._b = 4023233417,
                this._c = 2562383102,
                this._d = 271733878,
                this._e = 3285377520,
                t.prototype.init.call(this),
                this
            }
            ,
            r.prototype._POOL = p,
            r.prototype._update = function(e) {
                var t, r, n, u, l, c, h, f, d, p;
                t = c = this._a,
                r = h = this._b,
                n = f = this._c,
                u = d = this._d,
                l = p = this._e;
                for (var m = this._w, g = 0; g < 80; g++) {
                    var v = m[g] = g < 16 ? e.readInt32BE(4 * g) : s(m[g - 3] ^ m[g - 8] ^ m[g - 14] ^ m[g - 16], 1)
                      , y = o(o(s(t, 5), i(g, r, n, u)), o(o(l, v), a(g)));
                    l = u,
                    u = n,
                    n = s(r, 30),
                    r = t,
                    t = y
                }
                this._a = o(t, c),
                this._b = o(r, h),
                this._c = o(n, f),
                this._d = o(u, d),
                this._e = o(l, p)
            }
            ,
            r.prototype._hash = function() {
                p.length < 100 && p.push(this);
                var t = new e(20);
                return t.writeInt32BE(0 | this._a, u),
                t.writeInt32BE(0 | this._b, l),
                t.writeInt32BE(0 | this._c, c),
                t.writeInt32BE(0 | this._d, h),
                t.writeInt32BE(0 | this._e, f),
                t
            }
            ,
            r
        }
    }
    , /*!****************************!*\
  !*** ./~/sha.js/sha256.js ***!
  \****************************/
    function(e, t, r) {
        var n = r(/*! util */
        109).inherits;
        e.exports = function(e, t) {
            function r() {
                this.init(),
                this._w = d,
                t.call(this, 64, 56)
            }
            function i(e, t) {
                return e >>> t | e << 32 - t
            }
            function a(e, t) {
                return e >>> t
            }
            function o(e, t, r) {
                return e & t ^ ~e & r
            }
            function s(e, t, r) {
                return e & t ^ e & r ^ t & r
            }
            function u(e) {
                return i(e, 2) ^ i(e, 13) ^ i(e, 22)
            }
            function l(e) {
                return i(e, 6) ^ i(e, 11) ^ i(e, 25)
            }
            function c(e) {
                return i(e, 7) ^ i(e, 18) ^ a(e, 3)
            }
            function h(e) {
                return i(e, 17) ^ i(e, 19) ^ a(e, 10)
            }
            var f = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298]
              , d = new Array(64);
            return n(r, t),
            r.prototype.init = function() {
                return this._a = 1779033703,
                this._b = -1150833019,
                this._c = 1013904242,
                this._d = -1521486534,
                this._e = 1359893119,
                this._f = -1694144372,
                this._g = 528734635,
                this._h = 1541459225,
                this._len = this._s = 0,
                this
            }
            ,
            r.prototype._update = function(e) {
                var t, r, n, i, a, d, p, m, g, v, y = this._w;
                t = 0 | this._a,
                r = 0 | this._b,
                n = 0 | this._c,
                i = 0 | this._d,
                a = 0 | this._e,
                d = 0 | this._f,
                p = 0 | this._g,
                m = 0 | this._h;
                for (var M = 0; M < 64; M++) {
                    var w = y[M] = M < 16 ? e.readInt32BE(4 * M) : h(y[M - 2]) + y[M - 7] + c(y[M - 15]) + y[M - 16];
                    g = m + l(a) + o(a, d, p) + f[M] + w,
                    v = u(t) + s(t, r, n),
                    m = p,
                    p = d,
                    d = a,
                    a = i + g,
                    i = n,
                    n = r,
                    r = t,
                    t = g + v
                }
                this._a = t + this._a | 0,
                this._b = r + this._b | 0,
                this._c = n + this._c | 0,
                this._d = i + this._d | 0,
                this._e = a + this._e | 0,
                this._f = d + this._f | 0,
                this._g = p + this._g | 0,
                this._h = m + this._h | 0
            }
            ,
            r.prototype._hash = function() {
                var t = new e(32);
                return t.writeInt32BE(this._a, 0),
                t.writeInt32BE(this._b, 4),
                t.writeInt32BE(this._c, 8),
                t.writeInt32BE(this._d, 12),
                t.writeInt32BE(this._e, 16),
                t.writeInt32BE(this._f, 20),
                t.writeInt32BE(this._g, 24),
                t.writeInt32BE(this._h, 28),
                t
            }
            ,
            r
        }
    }
    , /*!****************************!*\
  !*** ./~/sha.js/sha512.js ***!
  \****************************/
    function(e, t, r) {
        var n = r(/*! util */
        109).inherits;
        e.exports = function(e, t) {
            function r() {
                this.init(),
                this._w = u,
                t.call(this, 128, 112)
            }
            function i(e, t, r) {
                return e >>> r | t << 32 - r
            }
            function a(e, t, r) {
                return e & t ^ ~e & r
            }
            function o(e, t, r) {
                return e & t ^ e & r ^ t & r
            }
            var s = [1116352408, 3609767458, 1899447441, 602891725, 3049323471, 3964484399, 3921009573, 2173295548, 961987163, 4081628472, 1508970993, 3053834265, 2453635748, 2937671579, 2870763221, 3664609560, 3624381080, 2734883394, 310598401, 1164996542, 607225278, 1323610764, 1426881987, 3590304994, 1925078388, 4068182383, 2162078206, 991336113, 2614888103, 633803317, 3248222580, 3479774868, 3835390401, 2666613458, 4022224774, 944711139, 264347078, 2341262773, 604807628, 2007800933, 770255983, 1495990901, 1249150122, 1856431235, 1555081692, 3175218132, 1996064986, 2198950837, 2554220882, 3999719339, 2821834349, 766784016, 2952996808, 2566594879, 3210313671, 3203337956, 3336571891, 1034457026, 3584528711, 2466948901, 113926993, 3758326383, 338241895, 168717936, 666307205, 1188179964, 773529912, 1546045734, 1294757372, 1522805485, 1396182291, 2643833823, 1695183700, 2343527390, 1986661051, 1014477480, 2177026350, 1206759142, 2456956037, 344077627, 2730485921, 1290863460, 2820302411, 3158454273, 3259730800, 3505952657, 3345764771, 106217008, 3516065817, 3606008344, 3600352804, 1432725776, 4094571909, 1467031594, 275423344, 851169720, 430227734, 3100823752, 506948616, 1363258195, 659060556, 3750685593, 883997877, 3785050280, 958139571, 3318307427, 1322822218, 3812723403, 1537002063, 2003034995, 1747873779, 3602036899, 1955562222, 1575990012, 2024104815, 1125592928, 2227730452, 2716904306, 2361852424, 442776044, 2428436474, 593698344, 2756734187, 3733110249, 3204031479, 2999351573, 3329325298, 3815920427, 3391569614, 3928383900, 3515267271, 566280711, 3940187606, 3454069534, 4118630271, 4000239992, 116418474, 1914138554, 174292421, 2731055270, 289380356, 3203993006, 460393269, 320620315, 685471733, 587496836, 852142971, 1086792851, 1017036298, 365543100, 1126000580, 2618297676, 1288033470, 3409855158, 1501505948, 4234509866, 1607167915, 987167468, 1816402316, 1246189591]
              , u = new Array(160);
            return n(r, t),
            r.prototype.init = function() {
                return this._a = 1779033703,
                this._b = -1150833019,
                this._c = 1013904242,
                this._d = -1521486534,
                this._e = 1359893119,
                this._f = -1694144372,
                this._g = 528734635,
                this._h = 1541459225,
                this._al = -205731576,
                this._bl = -2067093701,
                this._cl = -23791573,
                this._dl = 1595750129,
                this._el = -1377402159,
                this._fl = 725511199,
                this._gl = -79577749,
                this._hl = 327033209,
                this._len = this._s = 0,
                this
            }
            ,
            r.prototype._update = function(e) {
                var t, r, n, u, l, c, h, f, d, p, m, g, v, y, M, w, x = this._w;
                t = 0 | this._a,
                r = 0 | this._b,
                n = 0 | this._c,
                u = 0 | this._d,
                l = 0 | this._e,
                c = 0 | this._f,
                h = 0 | this._g,
                f = 0 | this._h,
                d = 0 | this._al,
                p = 0 | this._bl,
                m = 0 | this._cl,
                g = 0 | this._dl,
                v = 0 | this._el,
                y = 0 | this._fl,
                M = 0 | this._gl,
                w = 0 | this._hl;
                for (var A = 0; A < 80; A++) {
                    var b, T, _ = 2 * A;
                    if (A < 16)
                        b = x[_] = e.readInt32BE(4 * _),
                        T = x[_ + 1] = e.readInt32BE(4 * _ + 4);
                    else {
                        var E = x[_ - 30]
                          , S = x[_ - 30 + 1]
                          , D = i(E, S, 1) ^ i(E, S, 8) ^ E >>> 7
                          , N = i(S, E, 1) ^ i(S, E, 8) ^ i(S, E, 7);
                        E = x[_ - 4],
                        S = x[_ - 4 + 1];
                        var I = i(E, S, 19) ^ i(S, E, 29) ^ E >>> 6
                          , L = i(S, E, 19) ^ i(E, S, 29) ^ i(S, E, 6)
                          , C = x[_ - 14]
                          , O = x[_ - 14 + 1]
                          , j = x[_ - 32]
                          , R = x[_ - 32 + 1];
                        T = N + O,
                        b = D + C + (T >>> 0 < N >>> 0 ? 1 : 0),
                        T += L,
                        b = b + I + (T >>> 0 < L >>> 0 ? 1 : 0),
                        T += R,
                        b = b + j + (T >>> 0 < R >>> 0 ? 1 : 0),
                        x[_] = b,
                        x[_ + 1] = T
                    }
                    var P = o(t, r, n)
                      , z = o(d, p, m)
                      , B = i(t, d, 28) ^ i(d, t, 2) ^ i(d, t, 7)
                      , U = i(d, t, 28) ^ i(t, d, 2) ^ i(t, d, 7)
                      , V = i(l, v, 14) ^ i(l, v, 18) ^ i(v, l, 9)
                      , k = i(v, l, 14) ^ i(v, l, 18) ^ i(l, v, 9)
                      , F = s[_]
                      , G = s[_ + 1]
                      , Y = a(l, c, h)
                      , Q = a(v, y, M)
                      , H = w + k
                      , W = f + V + (H >>> 0 < w >>> 0 ? 1 : 0);
                    H += Q,
                    W = W + Y + (H >>> 0 < Q >>> 0 ? 1 : 0),
                    H += G,
                    W = W + F + (H >>> 0 < G >>> 0 ? 1 : 0),
                    H += T,
                    W = W + b + (H >>> 0 < T >>> 0 ? 1 : 0);
                    var X = U + z
                      , q = B + P + (X >>> 0 < U >>> 0 ? 1 : 0);
                    f = h,
                    w = M,
                    h = c,
                    M = y,
                    c = l,
                    y = v,
                    v = g + H | 0,
                    l = u + W + (v >>> 0 < g >>> 0 ? 1 : 0) | 0,
                    u = n,
                    g = m,
                    n = r,
                    m = p,
                    r = t,
                    p = d,
                    d = H + X | 0,
                    t = W + q + (d >>> 0 < H >>> 0 ? 1 : 0) | 0
                }
                this._al = this._al + d | 0,
                this._bl = this._bl + p | 0,
                this._cl = this._cl + m | 0,
                this._dl = this._dl + g | 0,
                this._el = this._el + v | 0,
                this._fl = this._fl + y | 0,
                this._gl = this._gl + M | 0,
                this._hl = this._hl + w | 0,
                this._a = this._a + t + (this._al >>> 0 < d >>> 0 ? 1 : 0) | 0,
                this._b = this._b + r + (this._bl >>> 0 < p >>> 0 ? 1 : 0) | 0,
                this._c = this._c + n + (this._cl >>> 0 < m >>> 0 ? 1 : 0) | 0,
                this._d = this._d + u + (this._dl >>> 0 < g >>> 0 ? 1 : 0) | 0,
                this._e = this._e + l + (this._el >>> 0 < v >>> 0 ? 1 : 0) | 0,
                this._f = this._f + c + (this._fl >>> 0 < y >>> 0 ? 1 : 0) | 0,
                this._g = this._g + h + (this._gl >>> 0 < M >>> 0 ? 1 : 0) | 0,
                this._h = this._h + f + (this._hl >>> 0 < w >>> 0 ? 1 : 0) | 0
            }
            ,
            r.prototype._hash = function() {
                function t(e, t, n) {
                    r.writeInt32BE(e, n),
                    r.writeInt32BE(t, n + 4)
                }
                var r = new e(64);
                return t(this._a, this._al, 0),
                t(this._b, this._bl, 8),
                t(this._c, this._cl, 16),
                t(this._d, this._dl, 24),
                t(this._e, this._el, 32),
                t(this._f, this._fl, 40),
                t(this._g, this._gl, 48),
                t(this._h, this._hl, 56),
                r
            }
            ,
            r
        }
    }
    , /*!******************************************!*\
  !*** ./~/snabbdom/modules/attributes.js ***!
  \******************************************/
    function(e, t) {
        function r(e, t) {
            var r, n, a, o = t.elm, s = e.data.attrs || {}, u = t.data.attrs || {};
            for (r in u)
                n = u[r],
                a = s[r],
                a !== n && (!n && i[r] ? o.removeAttribute(r) : o.setAttribute(r, n));
            for (r in s)
                r in u || o.removeAttribute(r)
        }
        for (var n = ["allowfullscreen", "async", "autofocus", "autoplay", "checked", "compact", "controls", "declare", "default", "defaultchecked", "defaultmuted", "defaultselected", "defer", "disabled", "draggable", "enabled", "formnovalidate", "hidden", "indeterminate", "inert", "ismap", "itemscope", "loop", "multiple", "muted", "nohref", "noresize", "noshade", "novalidate", "nowrap", "open", "pauseonexit", "readonly", "required", "reversed", "scoped", "seamless", "selected", "sortable", "spellcheck", "translate", "truespeed", "typemustmatch", "visible"], i = {}, a = 0, o = n.length; a < o; a++)
            i[n[a]] = !0;
        e.exports = {
            create: r,
            update: r
        }
    }
    , /*!*************************************!*\
  !*** ./~/snabbdom/modules/class.js ***!
  \*************************************/
    function(e, t) {
        function r(e, t) {
            var r, n, i = t.elm, a = e.data.class || {}, o = t.data.class || {};
            for (n in o)
                r = o[n],
                r !== a[n] && i.classList[r ? "add" : "remove"](n)
        }
        e.exports = {
            create: r,
            update: r
        }
    }
    , /*!**********************************************!*\
  !*** ./~/snabbdom/modules/eventlisteners.js ***!
  \**********************************************/
    function(e, t, r) {
        function n(e) {
            return function() {
                2 === e.length ? e[0](e[1]) : e[0].apply(void 0, e.slice(1))
            }
        }
        function i(e) {
            return function(t) {
                e.fn(t)
            }
        }
        function a(e, t) {
            var r, a, s, u = t.elm, l = e.data.on || {}, c = t.data.on;
            if (c)
                for (r in c)
                    if (a = c[r],
                    s = l[r],
                    void 0 === s)
                        o.array(a) ? u.addEventListener(r, n(a)) : (a = {
                            fn: a
                        },
                        c[r] = a,
                        u.addEventListener(r, i(a)));
                    else if (o.array(s)) {
                        s.length = a.length;
                        for (var h = 0; h < s.length; ++h)
                            s[h] = a[h];
                        c[r] = s
                    } else
                        s.fn = a,
                        c[r] = s
        }
        var o = r(/*! ../is */
        107);
        e.exports = {
            create: a,
            update: a
        }
    }
    , /*!*************************************!*\
  !*** ./~/snabbdom/modules/props.js ***!
  \*************************************/
    function(e, t) {
        function r(e, t) {
            var r, n, i, a = t.elm, o = e.data.props || {}, s = t.data.props || {};
            for (r in s)
                n = s[r],
                i = o[r],
                i !== n && (a[r] = n)
        }
        e.exports = {
            create: r,
            update: r
        }
    }
    , /*!*************************************!*\
  !*** ./~/snabbdom/modules/style.js ***!
  \*************************************/
    function(e, t) {
        function r(e, t, r) {
            s(function() {
                e[t] = r
            })
        }
        function n(e, t) {
            var n, i, a = t.elm, o = e.data.style || {}, s = t.data.style || {}, u = "delayed"in o;
            for (i in s)
                if (n = s[i],
                "delayed" === i)
                    for (i in s.delayed)
                        n = s.delayed[i],
                        u && n === o.delayed[i] || r(a.style, i, n);
                else
                    "remove" !== i && n !== o[i] && (a.style[i] = n)
        }
        function i(e) {
            var t, r, n = e.elm, i = e.data.style;
            if (i && (t = i.destroy))
                for (r in t)
                    n.style[r] = t[r]
        }
        function a(e, t) {
            var r = e.data.style;
            if (!r || !r.remove)
                return void t();
            var n, i, a = e.elm, o = 0, s = r.remove, u = 0, l = [];
            for (n in s)
                l.push(n),
                a.style[n] = s[n];
            i = getComputedStyle(a);
            for (var c = i["transition-property"].split(", "); o < c.length; ++o)
                l.indexOf(c[o]) !== -1 && u++;
            a.addEventListener("transitionend", function(e) {
                e.target === a && --u,
                0 === u && t()
            })
        }
        var o = requestAnimationFrame || setTimeout
          , s = function(e) {
            o(function() {
                o(e)
            })
        };
        e.exports = {
            create: n,
            update: n,
            destroy: i,
            remove: a
        }
    }
    , /*!********************************!*\
  !*** ./~/snabbdom/snabbdom.js ***!
  \********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return void 0 === e
        }
        function i(e) {
            return void 0 !== e
        }
        function a(e) {
            return c(e.tagName, {}, [], void 0, e)
        }
        function o(e, t) {
            return e.key === t.key && e.sel === t.sel
        }
        function s(e, t, r) {
            var n, a, o = {};
            for (n = t; n <= r; ++n)
                a = e[n].key,
                i(a) && (o[a] = n);
            return o
        }
        function u(e, t) {
            return function() {
                0 === --t && e.parentElement.removeChild(e)
            }
        }
        function l(e) {
            function t(e, r) {
                var n, a = e.data;
                i(a) && (i(n = a.hook) && i(n = n.init) && n(e),
                i(n = a.vnode) && (e = n));
                var o, s = e.children, u = e.sel;
                if (i(u)) {
                    var l = u.indexOf("#")
                      , c = u.indexOf(".", l)
                      , d = l > 0 ? l : u.length
                      , p = c > 0 ? c : u.length
                      , m = l !== -1 || c !== -1 ? u.slice(0, Math.min(d, p)) : u;
                    if (o = e.elm = i(a) && i(n = a.ns) ? document.createElementNS(n, m) : document.createElement(m),
                    d < p && (o.id = u.slice(d + 1, p)),
                    c > 0 && (o.className = u.slice(p + 1).replace(/\./g, " ")),
                    h.array(s))
                        for (n = 0; n < s.length; ++n)
                            o.appendChild(t(s[n], r));
                    else
                        h.primitive(e.text) && o.appendChild(document.createTextNode(e.text));
                    for (n = 0; n < y.create.length; ++n)
                        y.create[n](f, e);
                    n = e.data.hook,
                    i(n) && (n.create && n.create(f, e),
                    n.insert && r.push(e))
                } else
                    o = e.elm = document.createTextNode(e.text);
                return e.elm
            }
            function r(e, r, n, i, a, o) {
                for (; i <= a; ++i)
                    e.insertBefore(t(n[i], o), r)
            }
            function l(e) {
                var t, r = e.data;
                if (i(r)) {
                    for (i(r = r.hook) && i(r = r.destroy) && r(e),
                    r = 0; r < y.destroy.length; ++r)
                        y.destroy[r](e);
                    if (i(r = e.children))
                        for (t = 0; t < e.children.length; ++t)
                            l(e.children[t])
                }
            }
            function c(e, t, r, n) {
                for (; r <= n; ++r) {
                    var a, o, s, c = t[r];
                    if (i(c))
                        if (i(c.sel)) {
                            for (l(c),
                            o = y.remove.length + 1,
                            s = u(c.elm, o),
                            a = 0; a < y.remove.length; ++a)
                                y.remove[a](c, s);
                            i(a = c.data) && i(a = a.hook) && i(a = a.remove) ? a(c, s) : s()
                        } else
                            e.removeChild(c.elm)
                }
            }
            function p(e, i, a, u) {
                for (var l, h, f, d, p = 0, g = 0, v = i.length - 1, y = i[0], M = i[v], w = a.length - 1, x = a[0], A = a[w]; p <= v && g <= w; )
                    n(y) ? y = i[++p] : n(M) ? M = i[--v] : o(y, x) ? (m(y, x, u),
                    y = i[++p],
                    x = a[++g]) : o(M, A) ? (m(M, A, u),
                    M = i[--v],
                    A = a[--w]) : o(y, A) ? (m(y, A, u),
                    e.insertBefore(y.elm, M.elm.nextSibling),
                    y = i[++p],
                    A = a[--w]) : o(M, x) ? (m(M, x, u),
                    e.insertBefore(M.elm, y.elm),
                    M = i[--v],
                    x = a[++g]) : (n(l) && (l = s(i, p, v)),
                    h = l[x.key],
                    n(h) ? (e.insertBefore(t(x, u), y.elm),
                    x = a[++g]) : (f = i[h],
                    m(f, x, u),
                    i[h] = void 0,
                    e.insertBefore(f.elm, y.elm),
                    x = a[++g]));
                p > v ? (d = n(a[w + 1]) ? null : a[w + 1].elm,
                r(e, d, a, g, w, u)) : g > w && c(e, i, p, v)
            }
            function m(e, t, a) {
                var o, s;
                i(o = t.data) && i(s = o.hook) && i(o = s.prepatch) && o(e, t),
                i(o = e.data) && i(o = o.vnode) && (e = o),
                i(o = t.data) && i(o = o.vnode) && (t = o);
                var u = t.elm = e.elm
                  , l = e.children
                  , h = t.children;
                if (e !== t) {
                    if (i(t.data)) {
                        for (o = 0; o < y.update.length; ++o)
                            y.update[o](e, t);
                        o = t.data.hook,
                        i(o) && i(o = o.update) && o(e, t)
                    }
                    n(t.text) ? i(l) && i(h) ? l !== h && p(u, l, h, a) : i(h) ? r(u, null, h, 0, h.length - 1, a) : i(l) && c(u, l, 0, l.length - 1) : e.text !== t.text && (u.textContent = t.text),
                    i(s) && i(o = s.postpatch) && o(e, t)
                }
            }
            var g, v, y = {};
            for (g = 0; g < d.length; ++g)
                for (y[d[g]] = [],
                v = 0; v < e.length; ++v)
                    void 0 !== e[v][d[g]] && y[d[g]].push(e[v][d[g]]);
            return function(e, r) {
                var n, i = [];
                for (n = 0; n < y.pre.length; ++n)
                    y.pre[n]();
                for (e instanceof Element ? null !== e.parentElement ? (t(r, i),
                e.parentElement.replaceChild(r.elm, e)) : (e = a(e),
                m(e, r, i)) : m(e, r, i),
                n = 0; n < i.length; ++n)
                    i[n].data.hook.insert(i[n]);
                for (n = 0; n < y.post.length; ++n)
                    y.post[n]();
                return r
            }
        }
        var c = r(/*! ./vnode */
        160)
          , h = r(/*! ./is */
        107)
          , f = c("", {}, [], void 0, void 0)
          , d = ["create", "update", "remove", "destroy", "pre", "post"];
        e.exports = {
            init: l
        }
    }
    , /*!**************************!*\
  !*** ./~/three/three.js ***!
  \**************************/
    function(e, t, r) {
        !function(e, r) {
            r(t)
        }(this, function(e) {
            "use strict";
            function t() {}
            function r(e, t) {
                this.x = e || 0,
                this.y = t || 0
            }
            function n(e, t, i, a, o, s, u, l, c, h) {
                Object.defineProperty(this, "id", {
                    value: gs++
                }),
                this.uuid = ms.generateUUID(),
                this.name = "",
                this.image = void 0 !== e ? e : n.DEFAULT_IMAGE,
                this.mipmaps = [],
                this.mapping = void 0 !== t ? t : n.DEFAULT_MAPPING,
                this.wrapS = void 0 !== i ? i : lo,
                this.wrapT = void 0 !== a ? a : lo,
                this.magFilter = void 0 !== o ? o : mo,
                this.minFilter = void 0 !== s ? s : vo,
                this.anisotropy = void 0 !== c ? c : 1,
                this.format = void 0 !== u ? u : Co,
                this.type = void 0 !== l ? l : yo,
                this.offset = new r(0,0),
                this.repeat = new r(1,1),
                this.generateMipmaps = !0,
                this.premultiplyAlpha = !1,
                this.flipY = !0,
                this.unpackAlignment = 4,
                this.encoding = void 0 !== h ? h : as,
                this.version = 0,
                this.onUpdate = null
            }
            function i(e, t, r, n) {
                this.x = e || 0,
                this.y = t || 0,
                this.z = r || 0,
                this.w = void 0 !== n ? n : 1
            }
            function a(e, t, r) {
                this.uuid = ms.generateUUID(),
                this.width = e,
                this.height = t,
                this.scissor = new i(0,0,e,t),
                this.scissorTest = !1,
                this.viewport = new i(0,0,e,t),
                r = r || {},
                void 0 === r.minFilter && (r.minFilter = mo),
                this.texture = new n(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),
                this.depthBuffer = void 0 === r.depthBuffer || r.depthBuffer,
                this.stencilBuffer = void 0 === r.stencilBuffer || r.stencilBuffer,
                this.depthTexture = void 0 !== r.depthTexture ? r.depthTexture : null,
                this.texture.name = void 0 !== r.name ? r.name : ""
            }
            function o(e, t, r) {
                a.call(this, e, t, r),
                this.activeCubeFace = 0,
                this.activeMipMapLevel = 0
            }
            function s(e, t, r, n) {
                this._x = e || 0,
                this._y = t || 0,
                this._z = r || 0,
                this._w = void 0 !== n ? n : 1
            }
            function u(e, t, r) {
                this.x = e || 0,
                this.y = t || 0,
                this.z = r || 0
            }
            function l() {
                this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
                arguments.length > 0 && console.error("GASEngine.Matrix4: the constructor no longer reads arguments. use .set() instead.")
            }
            function c(e, t, r, i, a, o, s, u, l, c) {
                e = void 0 !== e ? e : [],
                t = void 0 !== t ? t : to,
                n.call(this, e, t, r, i, a, o, s, u, l, c),
                this.flipY = !1
            }
            function h() {
                this.seq = [],
                this.map = {}
            }
            function f(e, t, r) {
                var n = e[0];
                if (n <= 0 || n > 0)
                    return e;
                var i = t * r
                  , a = Ms[i];
                if (void 0 === a && (a = new Float32Array(i),
                Ms[i] = a),
                0 !== t) {
                    n.toArray(a, 0);
                    for (var o = 1, s = 0; o !== t; ++o)
                        s += r,
                        e[o].toArray(a, s)
                }
                return a
            }
            function d(e, t) {
                var r = ws[t];
                void 0 === r && (r = new Int32Array(t),
                ws[t] = r);
                for (var n = 0; n !== t; ++n)
                    r[n] = e.allocTextureUnit();
                return r
            }
            function p(e, t) {
                e.uniform1f(this.addr, t)
            }
            function m(e, t) {
                e.uniform1i(this.addr, t)
            }
            function g(e, t) {
                void 0 === t.x ? e.uniform2fv(this.addr, t) : e.uniform2f(this.addr, t.x, t.y)
            }
            function v(e, t) {
                void 0 !== t.x ? e.uniform3f(this.addr, t.x, t.y, t.z) : void 0 !== t.r ? e.uniform3f(this.addr, t.r, t.g, t.b) : e.uniform3fv(this.addr, t)
            }
            function y(e, t) {
                void 0 === t.x ? e.uniform4fv(this.addr, t) : e.uniform4f(this.addr, t.x, t.y, t.z, t.w)
            }
            function M(e, t) {
                e.uniformMatrix2fv(this.addr, !1, t.elements || t)
            }
            function w(e, t) {
                e.uniformMatrix3fv(this.addr, !1, t.elements || t)
            }
            function x(e, t) {
                e.uniformMatrix4fv(this.addr, !1, t.elements || t)
            }
            function A(e, t, r) {
                var n = r.allocTextureUnit();
                e.uniform1i(this.addr, n),
                r.setTexture2D(t || vs, n)
            }
            function b(e, t, r) {
                var n = r.allocTextureUnit();
                e.uniform1i(this.addr, n),
                r.setTextureCube(t || ys, n)
            }
            function T(e, t) {
                e.uniform2iv(this.addr, t)
            }
            function _(e, t) {
                e.uniform3iv(this.addr, t)
            }
            function E(e, t) {
                e.uniform4iv(this.addr, t)
            }
            function S(e) {
                switch (e) {
                case 5126:
                    return p;
                case 35664:
                    return g;
                case 35665:
                    return v;
                case 35666:
                    return y;
                case 35674:
                    return M;
                case 35675:
                    return w;
                case 35676:
                    return x;
                case 35678:
                    return A;
                case 35680:
                    return b;
                case 5124:
                case 35670:
                    return m;
                case 35667:
                case 35671:
                    return T;
                case 35668:
                case 35672:
                    return _;
                case 35669:
                case 35673:
                    return E
                }
            }
            function D(e, t) {
                e.uniform1fv(this.addr, t)
            }
            function N(e, t) {
                e.uniform1iv(this.addr, t)
            }
            function I(e, t) {
                e.uniform2fv(this.addr, f(t, this.size, 2))
            }
            function L(e, t) {
                e.uniform3fv(this.addr, f(t, this.size, 3))
            }
            function C(e, t) {
                e.uniform4fv(this.addr, f(t, this.size, 4))
            }
            function O(e, t) {
                e.uniformMatrix2fv(this.addr, !1, f(t, this.size, 4))
            }
            function j(e, t) {
                e.uniformMatrix3fv(this.addr, !1, f(t, this.size, 9))
            }
            function R(e, t) {
                e.uniformMatrix4fv(this.addr, !1, f(t, this.size, 16))
            }
            function P(e, t, r) {
                var n = t.length
                  , i = d(r, n);
                e.uniform1iv(this.addr, i);
                for (var a = 0; a !== n; ++a)
                    r.setTexture2D(t[a] || vs, i[a])
            }
            function z(e, t, r) {
                var n = t.length
                  , i = d(r, n);
                e.uniform1iv(this.addr, i);
                for (var a = 0; a !== n; ++a)
                    r.setTextureCube(t[a] || ys, i[a])
            }
            function B(e) {
                switch (e) {
                case 5126:
                    return D;
                case 35664:
                    return I;
                case 35665:
                    return L;
                case 35666:
                    return C;
                case 35674:
                    return O;
                case 35675:
                    return j;
                case 35676:
                    return R;
                case 35678:
                    return P;
                case 35680:
                    return z;
                case 5124:
                case 35670:
                    return N;
                case 35667:
                case 35671:
                    return T;
                case 35668:
                case 35672:
                    return _;
                case 35669:
                case 35673:
                    return E
                }
            }
            function U(e, t, r) {
                this.id = e,
                this.addr = r,
                this.setValue = S(t.type)
            }
            function V(e, t, r) {
                this.id = e,
                this.addr = r,
                this.size = t.size,
                this.setValue = B(t.type)
            }
            function k(e) {
                this.id = e,
                h.call(this)
            }
            function F(e, t) {
                e.seq.push(t),
                e.map[t.id] = t
            }
            function G(e, t, r) {
                var n = e.name
                  , i = n.length;
                for (xs.lastIndex = 0; ; ) {
                    var a = xs.exec(n)
                      , o = xs.lastIndex
                      , s = a[1]
                      , u = "]" === a[2]
                      , l = a[3];
                    if (u && (s |= 0),
                    void 0 === l || "[" === l && o + 2 === i) {
                        F(r, void 0 === l ? new U(s,e,t) : new V(s,e,t));
                        break
                    }
                    var c = r.map
                      , h = c[s];
                    void 0 === h && (h = new k(s),
                    F(r, h)),
                    r = h
                }
            }
            function Y(e, t, r) {
                h.call(this),
                this.renderer = r;
                for (var n = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), i = 0; i !== n; ++i) {
                    var a = e.getActiveUniform(t, i)
                      , o = a.name
                      , s = e.getUniformLocation(t, o);
                    G(a, s, this)
                }
            }
            function Q(e, t, r) {
                return void 0 === t && void 0 === r ? this.set(e) : this.setRGB(e, t, r)
            }
            function H(e, t, r, i, a, o, s, u, l, c, h, f) {
                n.call(this, null, o, s, u, l, c, i, a, h, f),
                this.image = {
                    data: e,
                    width: t,
                    height: r
                },
                this.magFilter = void 0 !== l ? l : ho,
                this.minFilter = void 0 !== c ? c : ho,
                this.generateMipmaps = !1,
                this.flipY = !1,
                this.unpackAlignment = 1
            }
            function W(e, t) {
                this.min = void 0 !== e ? e : new r(+(1 / 0),+(1 / 0)),
                this.max = void 0 !== t ? t : new r(-(1 / 0),-(1 / 0))
            }
            function X(e, t) {
                function n() {
                    var e = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1])
                      , t = new Uint16Array([0, 1, 2, 0, 2, 3]);
                    a = p.createBuffer(),
                    o = p.createBuffer(),
                    p.bindBuffer(p.ARRAY_BUFFER, a),
                    p.bufferData(p.ARRAY_BUFFER, e, p.STATIC_DRAW),
                    p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, o),
                    p.bufferData(p.ELEMENT_ARRAY_BUFFER, t, p.STATIC_DRAW),
                    f = p.createTexture(),
                    d = p.createTexture(),
                    m.bindTexture(p.TEXTURE_2D, f),
                    p.texImage2D(p.TEXTURE_2D, 0, p.RGB, 16, 16, 0, p.RGB, p.UNSIGNED_BYTE, null),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.CLAMP_TO_EDGE),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.CLAMP_TO_EDGE),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.NEAREST),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.NEAREST),
                    m.bindTexture(p.TEXTURE_2D, d),
                    p.texImage2D(p.TEXTURE_2D, 0, p.RGBA, 16, 16, 0, p.RGBA, p.UNSIGNED_BYTE, null),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.CLAMP_TO_EDGE),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.CLAMP_TO_EDGE),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.NEAREST),
                    p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.NEAREST),
                    s = {
                        vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if ( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                        fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if ( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if ( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                    },
                    l = i(s),
                    c = {
                        vertex: p.getAttribLocation(l, "position"),
                        uv: p.getAttribLocation(l, "uv")
                    },
                    h = {
                        renderType: p.getUniformLocation(l, "renderType"),
                        map: p.getUniformLocation(l, "map"),
                        occlusionMap: p.getUniformLocation(l, "occlusionMap"),
                        opacity: p.getUniformLocation(l, "opacity"),
                        color: p.getUniformLocation(l, "color"),
                        scale: p.getUniformLocation(l, "scale"),
                        rotation: p.getUniformLocation(l, "rotation"),
                        screenPosition: p.getUniformLocation(l, "screenPosition")
                    }
                }
                function i(t) {
                    var r = p.createProgram()
                      , n = p.createShader(p.FRAGMENT_SHADER)
                      , i = p.createShader(p.VERTEX_SHADER)
                      , a = "precision " + e.getPrecision() + " float;\n";
                    return p.shaderSource(n, a + t.fragmentShader),
                    p.shaderSource(i, a + t.vertexShader),
                    p.compileShader(n),
                    p.compileShader(i),
                    p.attachShader(r, n),
                    p.attachShader(r, i),
                    p.linkProgram(r),
                    r
                }
                var a, o, s, l, c, h, f, d, p = e.context, m = e.state;
                this.render = function(i, s, g) {
                    if (0 !== t.length) {
                        var v = new u
                          , y = g.w / g.z
                          , M = .5 * g.z
                          , w = .5 * g.w
                          , x = 16 / g.w
                          , A = new r(x * y,x)
                          , b = new u(1,1,0)
                          , T = new r(1,1)
                          , _ = new W;
                        _.min.set(g.x, g.y),
                        _.max.set(g.x + (g.z - 16), g.y + (g.w - 16)),
                        void 0 === l && n(),
                        p.useProgram(l),
                        m.initAttributes(),
                        m.enableAttribute(c.vertex),
                        m.enableAttribute(c.uv),
                        m.disableUnusedAttributes(),
                        p.uniform1i(h.occlusionMap, 0),
                        p.uniform1i(h.map, 1),
                        p.bindBuffer(p.ARRAY_BUFFER, a),
                        p.vertexAttribPointer(c.vertex, 2, p.FLOAT, !1, 16, 0),
                        p.vertexAttribPointer(c.uv, 2, p.FLOAT, !1, 16, 8),
                        p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, o),
                        m.disable(p.CULL_FACE),
                        m.setDepthWrite(!1);
                        for (var E = 0, S = t.length; E < S; E++) {
                            x = 16 / g.w,
                            A.set(x * y, x);
                            var D = t[E];
                            if (v.set(D.matrixWorld.elements[12], D.matrixWorld.elements[13], D.matrixWorld.elements[14]),
                            v.applyMatrix4(s.matrixWorldInverse),
                            v.applyMatrix4(s.projectionMatrix),
                            b.copy(v),
                            T.x = g.x + b.x * M + M - 8,
                            T.y = g.y + b.y * w + w - 8,
                            _.containsPoint(T) === !0) {
                                m.activeTexture(p.TEXTURE0),
                                m.bindTexture(p.TEXTURE_2D, null),
                                m.activeTexture(p.TEXTURE1),
                                m.bindTexture(p.TEXTURE_2D, f),
                                p.copyTexImage2D(p.TEXTURE_2D, 0, p.RGB, T.x, T.y, 16, 16, 0),
                                p.uniform1i(h.renderType, 0),
                                p.uniform2f(h.scale, A.x, A.y),
                                p.uniform3f(h.screenPosition, b.x, b.y, b.z),
                                m.disable(p.BLEND),
                                m.enable(p.DEPTH_TEST),
                                p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0),
                                m.activeTexture(p.TEXTURE0),
                                m.bindTexture(p.TEXTURE_2D, d),
                                p.copyTexImage2D(p.TEXTURE_2D, 0, p.RGBA, T.x, T.y, 16, 16, 0),
                                p.uniform1i(h.renderType, 1),
                                m.disable(p.DEPTH_TEST),
                                m.activeTexture(p.TEXTURE1),
                                m.bindTexture(p.TEXTURE_2D, f),
                                p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0),
                                D.positionScreen.copy(b),
                                D.customUpdateCallback ? D.customUpdateCallback(D) : D.updateLensFlares(),
                                p.uniform1i(h.renderType, 2),
                                m.enable(p.BLEND);
                                for (var N = 0, I = D.lensFlares.length; N < I; N++) {
                                    var L = D.lensFlares[N];
                                    L.opacity > .001 && L.scale > .001 && (b.x = L.x,
                                    b.y = L.y,
                                    b.z = L.z,
                                    x = L.size * L.scale / g.w,
                                    A.x = x * y,
                                    A.y = x,
                                    p.uniform3f(h.screenPosition, b.x, b.y, b.z),
                                    p.uniform2f(h.scale, A.x, A.y),
                                    p.uniform1f(h.rotation, L.rotation),
                                    p.uniform1f(h.opacity, L.opacity),
                                    p.uniform3f(h.color, L.color.r, L.color.g, L.color.b),
                                    m.setBlending(L.blending, L.blendEquation, L.blendSrc, L.blendDst),
                                    e.setTexture2D(L.texture, 1),
                                    p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0))
                                }
                            }
                        }
                        m.enable(p.CULL_FACE),
                        m.enable(p.DEPTH_TEST),
                        m.setDepthWrite(!0),
                        e.resetGLState()
                    }
                }
            }
            function q(e, t) {
                function r() {
                    var e = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1])
                      , t = new Uint16Array([0, 1, 2, 0, 2, 3]);
                    o = p.createBuffer(),
                    l = p.createBuffer(),
                    p.bindBuffer(p.ARRAY_BUFFER, o),
                    p.bufferData(p.ARRAY_BUFFER, e, p.STATIC_DRAW),
                    p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, l),
                    p.bufferData(p.ELEMENT_ARRAY_BUFFER, t, p.STATIC_DRAW),
                    c = i(),
                    h = {
                        position: p.getAttribLocation(c, "position"),
                        uv: p.getAttribLocation(c, "uv")
                    },
                    f = {
                        uvOffset: p.getUniformLocation(c, "uvOffset"),
                        uvScale: p.getUniformLocation(c, "uvScale"),
                        rotation: p.getUniformLocation(c, "rotation"),
                        scale: p.getUniformLocation(c, "scale"),
                        color: p.getUniformLocation(c, "color"),
                        map: p.getUniformLocation(c, "map"),
                        opacity: p.getUniformLocation(c, "opacity"),
                        modelViewMatrix: p.getUniformLocation(c, "modelViewMatrix"),
                        projectionMatrix: p.getUniformLocation(c, "projectionMatrix"),
                        fogType: p.getUniformLocation(c, "fogType"),
                        fogDensity: p.getUniformLocation(c, "fogDensity"),
                        fogNear: p.getUniformLocation(c, "fogNear"),
                        fogFar: p.getUniformLocation(c, "fogFar"),
                        fogColor: p.getUniformLocation(c, "fogColor"),
                        alphaTest: p.getUniformLocation(c, "alphaTest")
                    };
                    var r = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
                    r.width = 8,
                    r.height = 8;
                    var a = r.getContext("2d");
                    a.fillStyle = "white",
                    a.fillRect(0, 0, 8, 8),
                    d = new n(r),
                    d.needsUpdate = !0
                }
                function i() {
                    var t = p.createProgram()
                      , r = p.createShader(p.VERTEX_SHADER)
                      , n = p.createShader(p.FRAGMENT_SHADER);
                    return p.shaderSource(r, ["precision " + e.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")),
                    p.shaderSource(n, ["precision " + e.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")),
                    p.compileShader(r),
                    p.compileShader(n),
                    p.attachShader(t, r),
                    p.attachShader(t, n),
                    p.linkProgram(t),
                    t
                }
                function a(e, t) {
                    return e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.z !== t.z ? t.z - e.z : t.id - e.id
                }
                var o, l, c, h, f, d, p = e.context, m = e.state, g = new u, v = new s, y = new u;
                this.render = function(n, i) {
                    if (0 !== t.length) {
                        void 0 === c && r(),
                        p.useProgram(c),
                        m.initAttributes(),
                        m.enableAttribute(h.position),
                        m.enableAttribute(h.uv),
                        m.disableUnusedAttributes(),
                        m.disable(p.CULL_FACE),
                        m.enable(p.BLEND),
                        p.bindBuffer(p.ARRAY_BUFFER, o),
                        p.vertexAttribPointer(h.position, 2, p.FLOAT, !1, 16, 0),
                        p.vertexAttribPointer(h.uv, 2, p.FLOAT, !1, 16, 8),
                        p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, l),
                        p.uniformMatrix4fv(f.projectionMatrix, !1, i.projectionMatrix.elements),
                        m.activeTexture(p.TEXTURE0),
                        p.uniform1i(f.map, 0);
                        var s = 0
                          , u = 0
                          , M = n.fog;
                        M ? (p.uniform3f(f.fogColor, M.color.r, M.color.g, M.color.b),
                        M.isFog ? (p.uniform1f(f.fogNear, M.near),
                        p.uniform1f(f.fogFar, M.far),
                        p.uniform1i(f.fogType, 1),
                        s = 1,
                        u = 1) : M.isFogExp2 && (p.uniform1f(f.fogDensity, M.density),
                        p.uniform1i(f.fogType, 2),
                        s = 2,
                        u = 2)) : (p.uniform1i(f.fogType, 0),
                        s = 0,
                        u = 0);
                        for (var w = 0, x = t.length; w < x; w++) {
                            var A = t[w];
                            A.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse, A.matrixWorld),
                            A.z = -A.modelViewMatrix.elements[14]
                        }
                        t.sort(a);
                        for (var b = [], w = 0, x = t.length; w < x; w++) {
                            var A = t[w]
                              , T = A.material;
                            if (T.visible !== !1) {
                                p.uniform1f(f.alphaTest, T.alphaTest),
                                p.uniformMatrix4fv(f.modelViewMatrix, !1, A.modelViewMatrix.elements),
                                A.matrixWorld.decompose(g, v, y),
                                b[0] = y.x,
                                b[1] = y.y;
                                var _ = 0;
                                n.fog && T.fog && (_ = u),
                                s !== _ && (p.uniform1i(f.fogType, _),
                                s = _),
                                null !== T.map ? (p.uniform2f(f.uvOffset, T.map.offset.x, T.map.offset.y),
                                p.uniform2f(f.uvScale, T.map.repeat.x, T.map.repeat.y)) : (p.uniform2f(f.uvOffset, 0, 0),
                                p.uniform2f(f.uvScale, 1, 1)),
                                p.uniform1f(f.opacity, T.opacity),
                                p.uniform3f(f.color, T.color.r, T.color.g, T.color.b),
                                p.uniform1f(f.rotation, T.rotation),
                                p.uniform2fv(f.scale, b),
                                m.setBlending(T.blending, T.blendEquation, T.blendSrc, T.blendDst),
                                m.setDepthTest(T.depthTest),
                                m.setDepthWrite(T.depthWrite),
                                T.map ? e.setTexture2D(T.map, 0) : e.setTexture2D(d, 0),
                                p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0)
                            }
                        }
                        m.enable(p.CULL_FACE),
                        e.resetGLState()
                    }
                }
            }
            function Z() {
                Object.defineProperty(this, "id", {
                    value: Cl++
                }),
                this.uuid = ms.generateUUID(),
                this.name = "",
                this.type = "Material",
                this.fog = !0,
                this.lights = !0,
                this.blending = va,
                this.side = ua,
                this.shading = fa,
                this.vertexColors = da,
                this.opacity = 1,
                this.transparent = !1,
                this.blendSrc = La,
                this.blendDst = Ca,
                this.blendEquation = Aa,
                this.blendSrcAlpha = null,
                this.blendDstAlpha = null,
                this.blendEquationAlpha = null,
                this.depthFunc = ka,
                this.depthTest = !0,
                this.depthWrite = !0,
                this.clippingPlanes = null,
                this.clipIntersection = !1,
                this.clipShadows = !1,
                this.colorWrite = !0,
                this.precision = null,
                this.polygonOffset = !1,
                this.polygonOffsetFactor = 0,
                this.polygonOffsetUnits = 0,
                this.alphaTest = 0,
                this.premultipliedAlpha = !1,
                this.overdraw = 0,
                this.visible = !0,
                this._needsUpdate = !0,
                this.version = 0
            }
            function J(e) {
                Z.call(this),
                this.type = "ShaderMaterial",
                this.defines = {},
                this.uniforms = {},
                this.vertexShader = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
                this.fragmentShader = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",
                this.linewidth = 1,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.fog = !1,
                this.lights = !1,
                this.clipping = !1,
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.extensions = {
                    derivatives: !1,
                    fragDepth: !1,
                    drawBuffers: !1,
                    shaderTextureLOD: !1
                },
                this.defaultAttributeValues = {
                    color: [1, 1, 1],
                    uv: [0, 0],
                    uv2: [0, 0]
                },
                this.index0AttributeName = void 0,
                void 0 !== e && (void 0 !== e.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),
                this.setValues(e))
            }
            function K(e) {
                Z.call(this),
                this.type = "MeshDepthMaterial",
                this.depthPacking = ds,
                this.skinning = !1,
                this.morphTargets = !1,
                this.map = null,
                this.alphaMap = null,
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.fog = !1,
                this.lights = !1,
                this.clearColor = new Q(1,1,1),
                this.clearAlpha = 1,
                this.setValues(e)
            }
            function $(e, t) {
                this.min = void 0 !== e ? e : new u(+(1 / 0),+(1 / 0),+(1 / 0)),
                this.max = void 0 !== t ? t : new u(-(1 / 0),-(1 / 0),-(1 / 0))
            }
            function ee(e, t) {
                this.center = void 0 !== e ? e : new u,
                this.radius = void 0 !== t ? t : 0
            }
            function te() {
                this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]),
                arguments.length > 0 && console.error("GASEngine.Matrix3: the constructor no longer reads arguments. use .set() instead.")
            }
            function re(e, t) {
                this.normal = void 0 !== e ? e : new u(1,0,0),
                this.constant = void 0 !== t ? t : 0
            }
            function ne(e, t, r, n, i, a) {
                this.planes = [void 0 !== e ? e : new re, void 0 !== t ? t : new re, void 0 !== r ? r : new re, void 0 !== n ? n : new re, void 0 !== i ? i : new re, void 0 !== a ? a : new re]
            }
            function ie(e, t, n, o) {
                function s(t, r, n, i) {
                    var a = t.geometry
                      , o = null
                      , s = T
                      , u = t.customDepthMaterial;
                    if (n && (s = _,
                    u = t.customDistanceMaterial),
                    u)
                        o = u;
                    else {
                        var l = !1;
                        r.morphTargets && (a && a.isBufferGeometry ? l = a.morphAttributes && a.morphAttributes.position && a.morphAttributes.position.length > 0 : a && a.isGeometry && (l = a.morphTargets && a.morphTargets.length > 0));
                        var c = t.isSkinnedMesh && r.skinning
                          , h = 0;
                        l && (h |= x),
                        c && (h |= A),
                        o = s[h]
                    }
                    if (e.localClippingEnabled && r.clipShadows === !0 && 0 !== r.clippingPlanes.length) {
                        var f = o.uuid
                          , d = r.uuid
                          , p = E[f];
                        void 0 === p && (p = {},
                        E[f] = p);
                        var m = p[d];
                        void 0 === m && (m = o.clone(),
                        p[d] = m),
                        o = m
                    }
                    o.visible = r.visible,
                    o.wireframe = r.wireframe;
                    var g = r.side;
                    return B.renderSingleSided && g == ca && (g = ua),
                    B.renderReverseSided && (g === ua ? g = la : g === la && (g = ua)),
                    o.side = g,
                    o.clipShadows = r.clipShadows,
                    o.clippingPlanes = r.clippingPlanes,
                    o.wireframeLinewidth = r.wireframeLinewidth,
                    o.linewidth = r.linewidth,
                    n && void 0 !== o.uniforms.lightPos && o.uniforms.lightPos.value.copy(i),
                    o
                }
                function c(e, t, r) {
                    if (e.visible !== !1) {
                        var n = 0 !== (e.layers.mask & t.layers.mask);
                        if (n && (e.isMesh || e.isLine || e.isPoints) && e.castShadow && (e.frustumCulled === !1 || d.intersectsObject(e) === !0)) {
                            var i = e.material;
                            i.visible === !0 && (e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse, e.matrixWorld),
                            w.push(e))
                        }
                        for (var a = e.children, o = 0, s = a.length; o < s; o++)
                            c(a[o], t, r)
                    }
                }
                var h = e.context
                  , f = e.state
                  , d = new ne
                  , p = new l
                  , m = t.shadows
                  , g = new r
                  , v = new r(o.maxTextureSize,o.maxTextureSize)
                  , y = new u
                  , M = new u
                  , w = []
                  , x = 1
                  , A = 2
                  , b = (x | A) + 1
                  , T = new Array(b)
                  , _ = new Array(b)
                  , E = {}
                  , S = [new u(1,0,0), new u(-1,0,0), new u(0,0,1), new u(0,0,-1), new u(0,1,0), new u(0,-1,0)]
                  , D = [new u(0,1,0), new u(0,1,0), new u(0,1,0), new u(0,1,0), new u(0,0,1), new u(0,0,-1)]
                  , N = [new i, new i, new i, new i, new i, new i]
                  , I = new K;
                I.depthPacking = ps,
                I.clipping = !0;
                for (var L = Ll.distanceRGBA, C = As.clone(L.uniforms), O = 0; O !== b; ++O) {
                    var j = 0 !== (O & x)
                      , R = 0 !== (O & A)
                      , P = I.clone();
                    P.morphTargets = j,
                    P.skinning = R,
                    T[O] = P;
                    var z = new J({
                        defines: {
                            USE_SHADOWMAP: ""
                        },
                        uniforms: C,
                        vertexShader: L.vertexShader,
                        fragmentShader: L.fragmentShader,
                        morphTargets: j,
                        skinning: R,
                        clipping: !0
                    });
                    _[O] = z
                }
                var B = this;
                this.enabled = !1,
                this.autoUpdate = !0,
                this.needsUpdate = !1,
                this.type = aa,
                this.renderReverseSided = !0,
                this.renderSingleSided = !0,
                this.render = function(t, r) {
                    if (B.enabled !== !1 && (B.autoUpdate !== !1 || B.needsUpdate !== !1) && 0 !== m.length) {
                        f.buffers.color.setClear(1, 1, 1, 1),
                        f.disable(h.BLEND),
                        f.setDepthTest(!0),
                        f.setScissorTest(!1);
                        for (var i, o, u = 0, l = m.length; u < l; u++) {
                            var x = m[u]
                              , A = x.shadow;
                            if (void 0 !== A) {
                                var b = A.camera;
                                if (g.copy(A.mapSize),
                                g.min(v),
                                x && x.isPointLight) {
                                    i = 6,
                                    o = !0;
                                    var T = g.x
                                      , _ = g.y;
                                    N[0].set(2 * T, _, T, _),
                                    N[1].set(0, _, T, _),
                                    N[2].set(3 * T, _, T, _),
                                    N[3].set(T, _, T, _),
                                    N[4].set(3 * T, 0, T, _),
                                    N[5].set(T, 0, T, _),
                                    g.x *= 4,
                                    g.y *= 2
                                } else
                                    i = 1,
                                    o = !1;
                                if (null === A.map) {
                                    var E = {
                                        minFilter: ho,
                                        magFilter: ho,
                                        format: Co,
                                        name: x.name + ".shadowMap"
                                    };
                                    A.map = new a(g.x,g.y,E),
                                    b.updateProjectionMatrix()
                                }
                                (A.isSpotLightShadow || A.isDirectionalLightShadow) && A.update(x),
                                A && A.isRectAreaLightShadow && A.update(x);
                                var I = A.map
                                  , L = A.matrix;
                                M.setFromMatrixPosition(x.matrixWorld),
                                b.position.copy(M),
                                e.setRenderTarget(I),
                                e.clear();
                                for (var C = 0; C < i; C++) {
                                    if (o) {
                                        y.copy(b.position),
                                        y.add(S[C]),
                                        b.up.copy(D[C]),
                                        b.lookAt(y);
                                        var O = N[C];
                                        f.viewport(O)
                                    } else
                                        y.setFromMatrixPosition(x.target.matrixWorld),
                                        b.lookAt(y);
                                    b.updateMatrixWorld(),
                                    b.matrixWorldInverse.getInverse(b.matrixWorld),
                                    L.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
                                    L.multiply(b.projectionMatrix),
                                    L.multiply(b.matrixWorldInverse),
                                    p.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse),
                                    d.setFromMatrix(p),
                                    w.length = 0,
                                    c(t, r, b);
                                    for (var j = 0, R = w.length; j < R; j++) {
                                        var P = w[j]
                                          , z = n.update(P)
                                          , U = P.material;
                                        if (U && U.isMultiMaterial)
                                            for (var V = z.groups, k = U.materials, F = 0, G = V.length; F < G; F++) {
                                                var Y = V[F]
                                                  , Q = k[Y.materialIndex];
                                                if (Q.visible === !0) {
                                                    var H = s(P, Q, o, M);
                                                    e.renderBufferDirect(b, null, z, H, P, Y)
                                                }
                                            }
                                        else {
                                            var H = s(P, U, o, M);
                                            e.renderBufferDirect(b, null, z, H, P, null)
                                        }
                                    }
                                }
                            } else
                                console.warn("THREE.WebGLShadowMap:", x, "has no shadow.")
                        }
                        var W = e.getClearColor()
                          , X = e.getClearAlpha();
                        e.setClearColor(W, X),
                        B.needsUpdate = !1
                    }
                }
            }
            function ae(e, t) {
                this.origin = void 0 !== e ? e : new u,
                this.direction = void 0 !== t ? t : new u
            }
            function oe(e, t, r, n) {
                this._x = e || 0,
                this._y = t || 0,
                this._z = r || 0,
                this._order = n || oe.DefaultOrder
            }
            function se() {
                this.mask = 1
            }
            function ue() {
                function e() {
                    i.setFromEuler(n, !1)
                }
                function t() {
                    n.setFromQuaternion(i, void 0, !1)
                }
                Object.defineProperty(this, "id", {
                    value: Ol++
                }),
                this.uuid = ms.generateUUID(),
                this.name = "",
                this.type = "Object3D",
                this.parent = null,
                this.children = [],
                this.up = ue.DefaultUp.clone();
                var r = new u
                  , n = new oe
                  , i = new s
                  , a = new u(1,1,1);
                n.onChange(e),
                i.onChange(t),
                Object.defineProperties(this, {
                    position: {
                        enumerable: !0,
                        value: r
                    },
                    rotation: {
                        enumerable: !0,
                        value: n
                    },
                    quaternion: {
                        enumerable: !0,
                        value: i
                    },
                    scale: {
                        enumerable: !0,
                        value: a
                    },
                    modelViewMatrix: {
                        value: new l
                    },
                    normalMatrix: {
                        value: new te
                    }
                }),
                this.matrix = new l,
                this.matrixWorld = new l,
                this.matrixAutoUpdate = ue.DefaultMatrixAutoUpdate,
                this.matrixWorldNeedsUpdate = !1,
                this.layers = new se,
                this.visible = !0,
                this.castShadow = !1,
                this.receiveShadow = !1,
                this.frustumCulled = !0,
                this.renderOrder = 0,
                this.userData = {},
                this.onBeforeRender = function() {}
                ,
                this.onAfterRender = function() {}
            }
            function le(e, t) {
                this.start = void 0 !== e ? e : new u,
                this.end = void 0 !== t ? t : new u
            }
            function ce(e, t, r) {
                this.a = void 0 !== e ? e : new u,
                this.b = void 0 !== t ? t : new u,
                this.c = void 0 !== r ? r : new u
            }
            function he(e, t, r, n, i, a) {
                this.a = e,
                this.b = t,
                this.c = r,
                this.normal = n && n.isVector3 ? n : new u,
                this.vertexNormals = Array.isArray(n) ? n : [],
                this.color = i && i.isColor ? i : new Q,
                this.vertexColors = Array.isArray(i) ? i : [],
                this.materialIndex = void 0 !== a ? a : 0
            }
            function fe(e) {
                Z.call(this),
                this.type = "MeshBasicMaterial",
                this.color = new Q(16777215),
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.specularMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.combine = Ha,
                this.reflectivity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.lights = !1,
                this.setValues(e)
            }
            function de(e, t, r) {
                if (Array.isArray(e))
                    throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
                this.uuid = ms.generateUUID(),
                this.array = e,
                this.itemSize = t,
                this.count = void 0 !== e ? e.length / t : 0,
                this.normalized = r === !0,
                this.dynamic = !1,
                this.updateRange = {
                    offset: 0,
                    count: -1
                },
                this.onUploadCallback = function() {}
                ,
                this.version = 0
            }
            function pe(e, t) {
                de.call(this, new Int8Array(e), t)
            }
            function me(e, t) {
                de.call(this, new Uint8Array(e), t)
            }
            function ge(e, t) {
                de.call(this, new Uint8ClampedArray(e), t)
            }
            function ve(e, t) {
                de.call(this, new Int16Array(e), t)
            }
            function ye(e, t) {
                de.call(this, new Uint16Array(e), t)
            }
            function Me(e, t) {
                de.call(this, new Int32Array(e), t)
            }
            function we(e, t) {
                de.call(this, new Uint32Array(e), t)
            }
            function xe(e, t) {
                de.call(this, new Float32Array(e), t)
            }
            function Ae(e, t) {
                de.call(this, new Float64Array(e), t)
            }
            function be() {
                this.indices = [],
                this.vertices = [],
                this.normals = [],
                this.colors = [],
                this.uvs = [],
                this.uvs2 = [],
                this.groups = [],
                this.morphTargets = {},
                this.skinWeights = [],
                this.skinIndices = [],
                this.boundingBox = null,
                this.boundingSphere = null,
                this.verticesNeedUpdate = !1,
                this.normalsNeedUpdate = !1,
                this.colorsNeedUpdate = !1,
                this.uvsNeedUpdate = !1,
                this.groupsNeedUpdate = !1
            }
            function Te() {
                return jl++
            }
            function _e() {
                Object.defineProperty(this, "id", {
                    value: Te()
                }),
                this.uuid = ms.generateUUID(),
                this.name = "",
                this.type = "Geometry",
                this.vertices = [],
                this.colors = [],
                this.faces = [],
                this.faceVertexUvs = [[]],
                this.morphTargets = [],
                this.morphNormals = [],
                this.skinWeights = [],
                this.skinIndices = [],
                this.lineDistances = [],
                this.boundingBox = null,
                this.boundingSphere = null,
                this.elementsNeedUpdate = !1,
                this.verticesNeedUpdate = !1,
                this.uvsNeedUpdate = !1,
                this.normalsNeedUpdate = !1,
                this.colorsNeedUpdate = !1,
                this.lineDistancesNeedUpdate = !1,
                this.groupsNeedUpdate = !1
            }
            function Ee() {
                Object.defineProperty(this, "id", {
                    value: Te()
                }),
                this.uuid = ms.generateUUID(),
                this.name = "",
                this.type = "BufferGeometry",
                this.index = null,
                this.attributes = {},
                this.morphAttributes = {},
                this.groups = [],
                this.boundingBox = null,
                this.boundingSphere = null,
                this.drawRange = {
                    start: 0,
                    count: 1 / 0
                }
            }
            function Se(e, t) {
                ue.call(this),
                this.type = "Mesh",
                this.geometry = void 0 !== e ? e : new Ee,
                this.material = void 0 !== t ? t : new fe({
                    color: 16777215 * Math.random()
                }),
                this.drawMode = rs,
                this.updateMorphTargets()
            }
            function De(e, t, r, n, i, a) {
                function o(e, t, r) {
                    var n = 0;
                    return n += (e + 1) * (t + 1) * 2,
                    n += (e + 1) * (r + 1) * 2,
                    n += (r + 1) * (t + 1) * 2
                }
                function s(e, t, r) {
                    var n = 0;
                    return n += e * t * 2,
                    n += e * r * 2,
                    n += r * t * 2,
                    6 * n
                }
                function l(e, t, r, n, i, a, o, s, l, h, f) {
                    for (var A = a / l, b = o / h, T = a / 2, _ = o / 2, E = s / 2, S = l + 1, D = h + 1, N = 0, I = 0, L = new u, C = 0; C < D; C++)
                        for (var O = C * b - _, j = 0; j < S; j++) {
                            var R = j * A - T;
                            L[e] = R * n,
                            L[t] = O * i,
                            L[r] = E,
                            p[v] = L.x,
                            p[v + 1] = L.y,
                            p[v + 2] = L.z,
                            L[e] = 0,
                            L[t] = 0,
                            L[r] = s > 0 ? 1 : -1,
                            m[v] = L.x,
                            m[v + 1] = L.y,
                            m[v + 2] = L.z,
                            g[y] = j / l,
                            g[y + 1] = 1 - C / h,
                            v += 3,
                            y += 2,
                            N += 1
                        }
                    for (C = 0; C < h; C++)
                        for (j = 0; j < l; j++) {
                            var P = w + j + S * C
                              , z = w + j + S * (C + 1)
                              , B = w + (j + 1) + S * (C + 1)
                              , U = w + (j + 1) + S * C;
                            d[M] = P,
                            d[M + 1] = z,
                            d[M + 2] = U,
                            d[M + 3] = z,
                            d[M + 4] = B,
                            d[M + 5] = U,
                            M += 6,
                            I += 6
                        }
                    c.addGroup(x, I, f),
                    x += I,
                    w += N
                }
                Ee.call(this),
                this.type = "BoxBufferGeometry",
                this.parameters = {
                    width: e,
                    height: t,
                    depth: r,
                    widthSegments: n,
                    heightSegments: i,
                    depthSegments: a
                };
                var c = this;
                n = Math.floor(n) || 1,
                i = Math.floor(i) || 1,
                a = Math.floor(a) || 1;
                var h = o(n, i, a)
                  , f = s(n, i, a)
                  , d = new (f > 65535 ? Uint32Array : Uint16Array)(f)
                  , p = new Float32Array(3 * h)
                  , m = new Float32Array(3 * h)
                  , g = new Float32Array(2 * h)
                  , v = 0
                  , y = 0
                  , M = 0
                  , w = 0
                  , x = 0;
                l("z", "y", "x", -1, -1, r, t, e, a, i, 0),
                l("z", "y", "x", 1, -1, r, t, -e, a, i, 1),
                l("x", "z", "y", 1, 1, e, r, t, n, a, 2),
                l("x", "z", "y", 1, -1, e, r, -t, n, a, 3),
                l("x", "y", "z", 1, -1, e, t, r, n, i, 4),
                l("x", "y", "z", -1, -1, e, t, -r, n, i, 5),
                this.setIndex(new de(d,1)),
                this.addAttribute("position", new de(p,3)),
                this.addAttribute("normal", new de(m,3)),
                this.addAttribute("uv", new de(g,2))
            }
            function Ne(e, t, r, n) {
                Ee.call(this),
                this.type = "PlaneBufferGeometry",
                this.parameters = {
                    width: e,
                    height: t,
                    widthSegments: r,
                    heightSegments: n
                };
                for (var i = e / 2, a = t / 2, o = Math.floor(r) || 1, s = Math.floor(n) || 1, u = o + 1, l = s + 1, c = e / o, h = t / s, f = new Float32Array(u * l * 3), d = new Float32Array(u * l * 3), p = new Float32Array(u * l * 2), m = 0, g = 0, v = 0; v < l; v++)
                    for (var y = v * h - a, M = 0; M < u; M++) {
                        var w = M * c - i;
                        f[m] = w,
                        f[m + 1] = -y,
                        d[m + 2] = 1,
                        p[g] = M / o,
                        p[g + 1] = 1 - v / s,
                        m += 3,
                        g += 2
                    }
                m = 0;
                for (var x = new (f.length / 3 > 65535 ? Uint32Array : Uint16Array)(o * s * 6), v = 0; v < s; v++)
                    for (var M = 0; M < o; M++) {
                        var A = M + u * v
                          , b = M + u * (v + 1)
                          , T = M + 1 + u * (v + 1)
                          , _ = M + 1 + u * v;
                        x[m] = A,
                        x[m + 1] = b,
                        x[m + 2] = _,
                        x[m + 3] = b,
                        x[m + 4] = T,
                        x[m + 5] = _,
                        m += 6
                    }
                this.setIndex(new de(x,1)),
                this.addAttribute("position", new de(f,3)),
                this.addAttribute("normal", new de(d,3)),
                this.addAttribute("uv", new de(p,2))
            }
            function Ie(e, t, n, i) {
                this.name = e || "unnamed",
                this.texture = null,
                this.uvChannel = t || 0,
                this.uvTransform = n || !1,
                this.uvOffset = new r(0,0),
                this.uvRepeat = new r(1,1),
                this.texelTransform = n || !1,
                this.texelScale = 1,
                this.texelOffset = 0,
                this.texelInvert = !1
            }
            function Le() {
                ue.call(this),
                this.type = "Camera",
                this.matrixWorldInverse = new l,
                this.projectionMatrix = new l
            }
            function Ce(e, t, r, n) {
                Le.call(this),
                this.type = "PerspectiveCamera",
                this.fov = void 0 !== e ? e : 50,
                this.zoom = 1,
                this.near = void 0 !== r ? r : .1,
                this.far = void 0 !== n ? n : 2e3,
                this.focus = 10,
                this.aspect = void 0 !== t ? t : 1,
                this.view = null,
                this.filmGauge = 35,
                this.filmOffset = 0,
                this.updateProjectionMatrix()
            }
            function Oe(e, t, r, n, i, a) {
                Le.call(this),
                this.type = "OrthographicCamera",
                this.zoom = 1,
                this.view = null,
                this.left = e,
                this.right = t,
                this.top = r,
                this.bottom = n,
                this.near = void 0 !== i ? i : .1,
                this.far = void 0 !== a ? a : 2e3,
                this.updateProjectionMatrix()
            }
            function je(e, t, r) {
                function n(e) {
                    s = e
                }
                function i(r) {
                    r.array instanceof Uint32Array && t.get("OES_element_index_uint") ? (u = e.UNSIGNED_INT,
                    l = 4) : r.array instanceof Uint16Array ? (u = e.UNSIGNED_SHORT,
                    l = 2) : (u = e.UNSIGNED_BYTE,
                    l = 1)
                }
                function a(t, n) {
                    e.drawElements(s, n, u, t * l),
                    r.calls++,
                    r.vertices += n,
                    s === e.TRIANGLES && (r.faces += n / 3)
                }
                function o(n, i, a) {
                    var o = t.get("ANGLE_instanced_arrays");
                    return null === o ? void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.") : (o.drawElementsInstancedANGLE(s, a, u, i * l, n.maxInstancedCount),
                    r.calls++,
                    r.vertices += a * n.maxInstancedCount,
                    void (s === e.TRIANGLES && (r.faces += n.maxInstancedCount * a / 3)))
                }
                var s, u, l;
                return {
                    setMode: n,
                    setIndex: i,
                    render: a,
                    renderInstances: o
                }
            }
            function Re(e, t, r) {
                function n(e) {
                    o = e
                }
                function i(t, n) {
                    e.drawArrays(o, t, n),
                    r.calls++,
                    r.vertices += n,
                    o === e.TRIANGLES && (r.faces += n / 3)
                }
                function a(n) {
                    var i = t.get("ANGLE_instanced_arrays");
                    if (null === i)
                        return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                    var a = n.attributes.position
                      , s = 0;
                    a.isInterleavedBufferAttribute ? (s = a.data.count,
                    i.drawArraysInstancedANGLE(o, 0, s, n.maxInstancedCount)) : (s = a.count,
                    i.drawArraysInstancedANGLE(o, 0, s, n.maxInstancedCount)),
                    r.calls++,
                    r.vertices += s * n.maxInstancedCount,
                    o === e.TRIANGLES && (r.faces += n.maxInstancedCount * s / 3)
                }
                var o;
                return {
                    setMode: n,
                    render: i,
                    renderInstances: a
                }
            }
            function Pe() {
                var e = {};
                return {
                    get: function(t) {
                        if (void 0 !== e[t.id])
                            return e[t.id];
                        var n;
                        switch (t.type) {
                        case "DirectionalLight":
                            console.warn("ShadowSpreadAngle initilized but may not match other names used."),
                            n = {
                                direction: new u,
                                color: new Q,
                                shadow: !1,
                                shadowBias: 0,
                                shadowRadius: 1,
                                shadowSpreadAngle: 0,
                                shadowMapSize: new r,
                                shadowCameraParams: new u
                            };
                            break;
                        case "SpotLight":
                            console.warn("shadowCameraFovNearFar and shadowCameraParams are both initilized but may not match other names used."),
                            n = {
                                position: new u,
                                direction: new u,
                                color: new Q,
                                distance: 0,
                                coneCos: 0,
                                penumbraCos: 0,
                                decay: 0,
                                shadow: !1,
                                shadowBias: 0,
                                shadowRadius: 1,
                                shadowMapSize: new r,
                                shadowCameraFovNearFar: new u,
                                shadowCameraParams: new u
                            };
                            break;
                        case "PointLight":
                            n = {
                                position: new u,
                                color: new Q,
                                distance: 0,
                                decay: 0,
                                shadow: !1,
                                shadowBias: 0,
                                shadowRadius: 1,
                                shadowMapSize: new r
                            };
                            break;
                        case "HemisphereLight":
                            n = {
                                direction: new u,
                                skyColor: new Q,
                                groundColor: new Q
                            };
                            break;
                        case "RectAreaLight":
                            n = {
                                color: new Q,
                                position: new u,
                                halfWidth: new u,
                                halfHeight: new u
                            }
                        }
                        return e[t.id] = n,
                        n
                    }
                }
            }
            function ze(e) {
                for (var t = e.split("\n"), r = 0; r < t.length; r++)
                    t[r] = r + 1 + ": " + t[r];
                return t.join("\n")
            }
            function Be(e, t, r) {
                var n = e.createShader(t);
                return e.shaderSource(n, r),
                e.compileShader(n),
                e.getShaderParameter(n, e.COMPILE_STATUS) === !1 && console.error("THREE.WebGLShader: Shader couldn't compile.", e.getShaderInfoLog(n), ze(r)),
                "" !== e.getShaderInfoLog(n) && console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", t === e.VERTEX_SHADER ? "vertex" : "fragment", e.getShaderInfoLog(n), ze(r)),
                n
            }
            function Ue(e) {
                switch (e) {
                case as:
                    return ["Linear", "( value )"];
                case os:
                    return ["sRGB", "( value )"];
                case us:
                    return ["RGBE", "( value )"];
                case cs:
                    return ["RGBM", "( value, 7.0 )"];
                case hs:
                    return ["RGBM", "( value, 16.0 )"];
                case fs:
                    return ["RGBD", "( value, 256.0 )"];
                case ss:
                    return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
                default:
                    throw new Error("unsupported encoding: " + e)
                }
            }
            function Ve(e, t) {
                var r = Ue(t);
                return "vec4 " + e + "( vec4 value ) { return " + r[0] + "ToLinear" + r[1] + "; }"
            }
            function ke(e, t) {
                var r = Ue(t);
                return "vec4 " + e + "( vec4 value ) { return LinearTo" + r[0] + r[1] + "; }"
            }
            function Fe(e, t) {
                if (!t || !t.texelTransform)
                    return "vec4 " + e + "TexelTransform( vec4 value ) { return value; }\n";
                var r = (t.getFlattenedTexelTransform(),
                Dl.slot_texel_transform_template)
                  , n = r.replace(/\$SLOT_NAME\$/g, e);
                return n
            }
            function Ge(e, t, r) {
                var n = r ? "uv" : "vUv";
                if (t && t.uvChannel > 0 && (n += t.uvChannel + 1),
                !t || !t.uvTransform)
                    return "vec2 " + e + "UV() { return " + n + "; }\n";
                var i = (t.getFlattenedTexelTransform(),
                Dl.slot_uv_transform_template)
                  , a = i.replace(/\$SLOT_NAME\$/g, e);
                return a = a.replace(/\$UV_VAR_NAME\$/g, n)
            }
            function Ye(e, t) {
                var r;
                switch (t) {
                case Za:
                    r = "Linear";
                    break;
                case Ja:
                    r = "Reinhard";
                    break;
                case Ka:
                    r = "Uncharted2";
                    break;
                case $a:
                    r = "OptimizedCineon";
                    break;
                default:
                    throw new Error("unsupported toneMapping: " + t)
                }
                return "vec3 " + e + "( vec3 color ) { return " + r + "ToneMapping( color ); }"
            }
            function Qe(e, t, r) {
                e = e || {};
                var n = [e.derivatives || t.envMapCubeUV || t.bumpMap || t.normalMap || t.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", (e.fragDepth || t.logarithmicDepthBuffer) && r.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", e.drawBuffers && r.get("WEBGL_draw_buffers") ? "#extension GL_EXT_draw_buffers : require" : "", (e.shaderTextureLOD || t.envMap) && r.get("EXT_shader_texture_lod") ? "#extension GL_EXT_shader_texture_lod : enable" : ""];
                return n.filter(Xe).join("\n")
            }
            function He(e) {
                var t = [];
                for (var r in e) {
                    var n = e[r];
                    n !== !1 && t.push("#define " + r + " " + n)
                }
                return t.join("\n")
            }
            function We(e, t, r) {
                for (var n = {}, i = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), a = 0; a < i; a++) {
                    var o = e.getActiveAttrib(t, a)
                      , s = o.name;
                    n[s] = e.getAttribLocation(t, s)
                }
                return n
            }
            function Xe(e) {
                return "" !== e
            }
            function qe(e, t) {
                return e.replace(/NUM_DIR_LIGHTS/g, t.numDirLights).replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, t.numPointLights).replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights)
            }
            function Ze(e) {
                function t(e, t) {
                    var r = Dl[t];
                    if (void 0 === r)
                        throw new Error("Can not resolve #include <" + t + ">");
                    return Ze(r)
                }
                var r = /#include +<([\w\d.]+)>/g;
                return e.replace(r, t)
            }
            function Je(e) {
                function t(e, t, r, n) {
                    for (var i = "", a = parseInt(t); a < parseInt(r); a++)
                        i += n.replace(/\[ i \]/g, "[ " + a + " ]");
                    return i
                }
                var r = /for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;
                return e.replace(r, t)
            }
            function Ke(e, t, r, n) {
                var i = e.context
                  , a = r.extensions
                  , o = r.defines
                  , s = r.__webglShader.vertexShader
                  , u = r.__webglShader.fragmentShader
                  , l = "SHADOWMAP_TYPE_BASIC";
                n.shadowMapType === aa ? l = "SHADOWMAP_TYPE_PCF" : n.shadowMapType === sa ? l = "SHADOWMAP_TYPE_PCSS" : n.shadowMapType === oa && (l = "SHADOWMAP_TYPE_PCF_SOFT");
                var c = "ENVMAP_TYPE_CUBE"
                  , h = "ENVMAP_MODE_REFLECTION"
                  , f = "ENVMAP_BLENDING_MULTIPLY";
                if (n.envMap) {
                    switch (r.envMap.mapping) {
                    case to:
                    case ro:
                        c = "ENVMAP_TYPE_CUBE";
                        break;
                    case oo:
                    case so:
                        c = "ENVMAP_TYPE_CUBE_UV";
                        break;
                    case no:
                    case io:
                        c = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case ao:
                        c = "ENVMAP_TYPE_SPHERE"
                    }
                    switch (r.envMap.mapping) {
                    case ro:
                    case io:
                        h = "ENVMAP_MODE_REFRACTION"
                    }
                    switch (r.combine) {
                    case Ha:
                        f = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case Wa:
                        f = "ENVMAP_BLENDING_MIX";
                        break;
                    case Xa:
                        f = "ENVMAP_BLENDING_ADD"
                    }
                }
                var d, p, m = e.gammaFactor > 0 ? e.gammaFactor : 1, g = Qe(a, n, e.extensions), v = He(o), y = i.createProgram();
                if (r.isRawShaderMaterial)
                    d = [v, "\n"].filter(Xe).join("\n"),
                    p = [g, v, "\n"].filter(Xe).join("\n");
                else {
                    d = ["precision " + n.precision + " float;", "precision " + n.precision + " int;", "#define SHADER_NAME " + r.__webglShader.name, v, n.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + m, "#define MAX_BONES " + n.maxBones, n.map ? "#define USE_MAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + h : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.displacementMap && n.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.vertexColors ? "#define USE_COLOR" : "", n.falloffMap && n.falloff ? "#define USE_FALLOFFMAP" : "", n.falloffAlphaMap && n.falloff ? "#define USE_FALLOFFALPHAMAP" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.skinning ? "#define USE_SKINNING" : "", n.useVertexTexture ? "#define BONE_TEXTURE" : "", n.morphTargets ? "#define USE_MORPHTARGETS" : "", n.morphNormals && n.flatShading === !1 ? "#define USE_MORPHNORMALS" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", "#define NUM_CLIPPING_PLANES " + n.numClippingPlanes, n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + l : "", n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && e.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(Xe).join("\n"),
                    p = [g, "precision " + n.precision + " float;", "precision " + n.precision + " int;", "#define SHADER_NAME " + r.__webglShader.name, v, n.alphaTest ? "#define ALPHATEST " + n.alphaTest : "", n.falloff ? "#define FALLOFF" : "", n.falloffMap && n.falloff ? "#define USE_FALLOFFMAP" : "", n.falloffAlphaMap && n.falloff ? "#define USE_FALLOFFALPHAMAP" : "", "#define GAMMA_FACTOR " + m, n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + c : "", n.envMap ? "#define " + h : "", n.envMap ? "#define " + f : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.vertexColors ? "#define USE_COLOR" : "", n.gradientMap ? "#define USE_GRADIENTMAP" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", "#define NUM_CLIPPING_PLANES " + n.numClippingPlanes, "#define UNION_CLIPPING_PLANES " + (n.numClippingPlanes - n.numClipIntersection), n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + l : "", n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", n.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && e.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", n.outputEncoding || n.mapEncoding || n.envMapEncoding || n.falloffMapEncoding || n.emissiveMapEncoding ? Dl.encodings_pars_fragment : "", n.mapEncoding ? Ve("mapTexelToLinear", n.mapEncoding) : "", n.envMapEncoding ? Ve("envMapTexelToLinear", n.envMapEncoding) : "", n.emissiveMapEncoding ? Ve("emissiveMapTexelToLinear", n.emissiveMapEncoding) : "", n.falloffMapEncoding ? Ve("falloffMapTexelToLinear", n.falloffMapEncoding) : "", n.outputEncoding ? ke("linearToOutputTexel", n.outputEncoding) : "", n.depthPacking ? "#define DEPTH_PACKING " + r.depthPacking : "", n.envMap && e.extensions.get("EXT_shader_texture_lod") ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", n.toneMapping !== qa ? "#define TONE_MAPPING" : "", n.toneMapping !== qa ? Dl.tonemapping_pars_fragment : "", n.toneMapping !== qa ? Ye("toneMapping", n.toneMapping) : "", "\n"].filter(Xe).join("\n");
                    for (var M = Ie.SupportedMapNames, w = "", x = "", A = {}, b = 0; b < M.length; b++) {
                        var T = M[b]
                          , _ = r[T + "Slot"];
                        (r[T] || _ && _.texture) && (_ && !A[_.uvChannel] && (A[_.uvChannel] = !0),
                        x += Fe(T, _),
                        w += "uniform sampler2D " + T + ";\n",
                        w += Ge(T, _, !1))
                    }
                    if (Object.keys(A).length > 0) {
                        var E = "";
                        E += "#define TEXTURE_SLOTS\n";
                        for (var S in A) {
                            S = parseInt(S);
                            var D = "vUv";
                            S > 0 && (D += "" + (S + 1)),
                            E += "varying vec2 " + D + ";\n"
                        }
                        p += E + w
                    }
                    p += x
                }
                s = Ze(s, n),
                s = qe(s, n),
                u = Ze(u, n),
                u = qe(u, n),
                r.isShaderMaterial || (s = Je(s),
                u = Je(u));
                var N = d + s
                  , I = p + u
                  , L = Be(i, i.VERTEX_SHADER, N)
                  , C = Be(i, i.FRAGMENT_SHADER, I);
                i.attachShader(y, L),
                i.attachShader(y, C),
                void 0 !== r.index0AttributeName ? i.bindAttribLocation(y, 0, r.index0AttributeName) : n.morphTargets === !0 && i.bindAttribLocation(y, 0, "position"),
                i.linkProgram(y);
                var O = i.getProgramInfoLog(y)
                  , j = i.getShaderInfoLog(L)
                  , R = i.getShaderInfoLog(C)
                  , P = !0
                  , z = !0;
                i.getProgramParameter(y, i.LINK_STATUS) === !1 ? (P = !1,
                console.log("**VERTEX**", N, "----------------------------------------------------------", i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(L)),
                console.log("**FRAGMENT**", I, "----------------------------------------------------------", i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(C)),
                console.error("THREE.WebGLProgram: shader error: ", i.getError(), "gl.VALIDATE_STATUS", i.getProgramParameter(y, i.VALIDATE_STATUS), "gl.getProgramInfoLog", O, j, R)) : "" !== O ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", O) : "" !== j && "" !== R || (z = !1),
                z && (this.diagnostics = {
                    runnable: P,
                    material: r,
                    programLog: O,
                    vertexShader: {
                        log: j,
                        prefix: d
                    },
                    fragmentShader: {
                        log: R,
                        prefix: p
                    }
                }),
                i.deleteShader(L),
                i.deleteShader(C);
                var B;
                this.getUniforms = function() {
                    return void 0 === B && (B = new Y(i,y,e)),
                    B
                }
                ;
                var U;
                return this.getAttributes = function() {
                    return void 0 === U && (U = We(i, y)),
                    U
                }
                ,
                this.destroy = function() {
                    i.deleteProgram(y),
                    this.program = void 0
                }
                ,
                Object.defineProperties(this, {
                    uniforms: {
                        get: function() {
                            return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),
                            this.getUniforms()
                        }
                    },
                    attributes: {
                        get: function() {
                            return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),
                            this.getAttributes()
                        }
                    }
                }),
                this.id = zl++,
                this.code = t,
                this.usedTimes = 1,
                this.program = y,
                this.vertexShader = L,
                this.fragmentShader = C,
                this
            }
            function $e(e, t) {
                function r(e) {
                    if (t.floatVertexTextures && e && e.skeleton && e.skeleton.useVertexTexture)
                        return 1024;
                    var r = t.maxVertexUniforms
                      , n = Math.floor((r - 20) / 4)
                      , i = n;
                    return void 0 !== e && e && e.isSkinnedMesh && (i = Math.min(e.skeleton.bones.length, i),
                    i < e.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + e.skeleton.bones.length + ", this GPU supports just " + i + " (try OpenGL instead of ANGLE)")),
                    i
                }
                function n(e, t) {
                    var r;
                    return e ? e.isTexture ? r = e.encoding : e.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),
                    r = e.texture.encoding) : r = as,
                    r === as && t && (r = ss),
                    r
                }
                for (var i = [], a = {
                    MeshDepthMaterial: "depth",
                    MeshNormalMaterial: "normal",
                    MeshBasicMaterial: "basic",
                    MeshLambertMaterial: "lambert",
                    MeshPhongMaterial: "phong",
                    MeshToonMaterial: "phong",
                    MeshStandardMaterial: "physical",
                    MeshPhysicalMaterial: "physical",
                    MeshCubeMaterial: "cubeEnv",
                    LineBasicMaterial: "basic",
                    LineDashedMaterial: "dashed",
                    PointsMaterial: "points"
                }, o = ["precision", "supportsVertexTextures", "map", "mapEncoding", "envMap", "envMapMode", "envMapEncoding", "lightMap", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "fog", "useFog", "fogExp", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "falloff", "falloffMap", "falloffAlphaMap"], s = Ie.SupportedMapNames, u = 0; u < s.length; u++) {
                    var l = s[u];
                    o.push(l),
                    o.push(l + "UVChannel"),
                    o.push(l + "UVTransform"),
                    o.push(l + "TexelTransform")
                }
                this.getParameters = function(i, o, s, u, l, c) {
                    var h = a[i.type]
                      , f = r(c)
                      , d = e.getPrecision();
                    null !== i.precision && (d = t.getMaxPrecision(i.precision),
                    d !== i.precision && console.warn("THREE.WebGLProgram.getParameters:", i.precision, "not supported, using", d, "instead."));
                    for (var p = e.getCurrentRenderTarget(), m = {
                        shaderID: h,
                        precision: d,
                        supportsVertexTextures: t.vertexTextures,
                        outputEncoding: n(p ? p.texture : null, e.gammaOutput),
                        mapEncoding: n(i.map, e.gammaInput),
                        envMap: !!i.envMap,
                        envMapMode: i.envMap && i.envMap.mapping,
                        envMapEncoding: n(i.envMap, e.gammaInput),
                        envMapCubeUV: !!i.envMap && (i.envMap.mapping === oo || i.envMap.mapping === so),
                        emissiveMapEncoding: n(i.emissiveMap, e.gammaInput),
                        falloff: i.falloff,
                        falloffMapEncoding: n(i.falloffMap, e.gammaInput),
                        gradientMap: !!i.gradientMap,
                        combine: i.combine,
                        vertexColors: i.vertexColors,
                        fog: !!s,
                        useFog: i.fog,
                        fogExp: s && s.isFogExp2,
                        flatShading: i.shading === ha,
                        sizeAttenuation: i.sizeAttenuation,
                        logarithmicDepthBuffer: t.logarithmicDepthBuffer,
                        skinning: i.skinning,
                        maxBones: f,
                        useVertexTexture: t.floatVertexTextures && c && c.skeleton && c.skeleton.useVertexTexture,
                        morphTargets: i.morphTargets,
                        morphNormals: i.morphNormals,
                        maxMorphTargets: e.maxMorphTargets,
                        maxMorphNormals: e.maxMorphNormals,
                        numDirLights: o.directional.length,
                        numPointLights: o.point.length,
                        numSpotLights: o.spot.length,
                        numRectAreaLights: o.rectArea.length,
                        numHemiLights: o.hemi.length,
                        numClippingPlanes: u,
                        numClipIntersection: l,
                        shadowMapEnabled: e.shadowMap.enabled && c.receiveShadow && o.shadows.length > 0,
                        shadowMapType: e.shadowMap.type,
                        toneMapping: e.toneMapping,
                        physicallyCorrectLights: e.physicallyCorrectLights,
                        premultipliedAlpha: i.premultipliedAlpha,
                        alphaTest: i.alphaTest,
                        doubleSided: i.side === ca,
                        flipSided: i.side === la,
                        depthPacking: void 0 !== i.depthPacking && i.depthPacking
                    }, g = Ie.SupportedMapNames, v = 0; v < g.length; v++) {
                        var y = g[v]
                          , M = Ie.SupportedMapSlotNames[v];
                        m[y] = !!i[y];
                        var w = i[M];
                        m[y + "UVChannel"] = void 0 !== w ? w.uvChannel : 0,
                        m[y + "UVTransform"] = void 0 !== w && w.uvTransform,
                        m[y + "TexelTransform"] = void 0 !== w && w.texelTransform
                    }
                    return m
                }
                ,
                this.getProgramCode = function(e, t) {
                    var r = [];
                    if (t.shaderID ? r.push(t.shaderID) : (r.push(e.fragmentShader),
                    r.push(e.vertexShader)),
                    void 0 !== e.defines)
                        for (var n in e.defines)
                            r.push(n),
                            r.push(e.defines[n]);
                    for (var i = 0; i < o.length; i++)
                        r.push(t[o[i]]);
                    return r.join()
                }
                ,
                this.acquireProgram = function(t, r, n) {
                    for (var a, o = 0, s = i.length; o < s; o++) {
                        var u = i[o];
                        if (u.code === n) {
                            a = u,
                            ++a.usedTimes;
                            break
                        }
                    }
                    return void 0 === a && (a = new Ke(e,n,t,r),
                    i.push(a)),
                    a
                }
                ,
                this.releaseProgram = function(e) {
                    if (0 === --e.usedTimes) {
                        var t = i.indexOf(e);
                        i[t] = i[i.length - 1],
                        i.pop(),
                        e.destroy()
                    }
                }
                ,
                this.programs = i
            }
            function et(e, t, r) {
                function n(e) {
                    var i = e.target
                      , s = u[i.id];
                    null !== s.index && a(s.index),
                    o(s.attributes),
                    i.removeEventListener("dispose", n),
                    delete u[i.id];
                    var l = t.get(i);
                    l.wireframe && a(l.wireframe),
                    t.delete(i);
                    var c = t.get(s);
                    c.wireframe && a(c.wireframe),
                    t.delete(s),
                    r.memory.geometries--
                }
                function i(e) {
                    return e.isInterleavedBufferAttribute ? t.get(e.data).__webglBuffer : t.get(e).__webglBuffer
                }
                function a(t) {
                    var r = i(t);
                    void 0 !== r && (e.deleteBuffer(r),
                    s(t))
                }
                function o(e) {
                    for (var t in e)
                        a(e[t])
                }
                function s(e) {
                    e.isInterleavedBufferAttribute ? t.delete(e.data) : t.delete(e)
                }
                var u = {};
                return {
                    get: function(e) {
                        var t = e.geometry;
                        if (void 0 !== u[t.id])
                            return u[t.id];
                        t.addEventListener("dispose", n);
                        var i;
                        return t.isBufferGeometry ? i = t : t.isGeometry && (void 0 === t._bufferGeometry && (t._bufferGeometry = (new Ee).setFromObject(e)),
                        i = t._bufferGeometry),
                        u[t.id] = i,
                        r.memory.geometries++,
                        i
                    }
                }
            }
            function tt(e, t, r) {
                function n(t) {
                    var r = c.get(t);
                    t.geometry.isGeometry && r.updateFromObject(t);
                    var n = r.index
                      , a = r.attributes;
                    null !== n && i(n, e.ELEMENT_ARRAY_BUFFER);
                    for (var o in a)
                        i(a[o], e.ARRAY_BUFFER);
                    var s = r.morphAttributes;
                    for (var o in s)
                        for (var u = s[o], l = 0, h = u.length; l < h; l++)
                            i(u[l], e.ARRAY_BUFFER);
                    return r
                }
                function i(e, r) {
                    var n = e.isInterleavedBufferAttribute ? e.data : e
                      , i = t.get(n);
                    void 0 === i.__webglBuffer ? a(i, n, r) : i.version !== n.version && o(i, n, r)
                }
                function a(t, r, n) {
                    t.__webglBuffer = e.createBuffer(),
                    e.bindBuffer(n, t.__webglBuffer);
                    var i = r.dynamic ? e.DYNAMIC_DRAW : e.STATIC_DRAW;
                    e.bufferData(n, r.array, i);
                    var a = e.FLOAT
                      , o = r.array;
                    o instanceof Float32Array ? a = e.FLOAT : o instanceof Float64Array ? console.warn("Unsupported data buffer format: Float64Array") : o instanceof Uint16Array ? a = e.UNSIGNED_SHORT : o instanceof Int16Array ? a = e.SHORT : o instanceof Uint32Array ? a = e.UNSIGNED_INT : o instanceof Int32Array ? a = e.INT : o instanceof Int8Array ? a = e.BYTE : o instanceof Uint8Array && (a = e.UNSIGNED_BYTE),
                    t.bytesPerElement = o.BYTES_PER_ELEMENT,
                    t.type = a,
                    t.version = r.version,
                    r.onUploadCallback()
                }
                function o(t, r, n) {
                    e.bindBuffer(n, t.__webglBuffer),
                    r.dynamic === !1 ? e.bufferData(n, r.array, e.STATIC_DRAW) : r.updateRange.count === -1 ? e.bufferSubData(n, 0, r.array) : 0 === r.updateRange.count ? console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.") : (e.bufferSubData(n, r.updateRange.offset * r.array.BYTES_PER_ELEMENT, r.array.subarray(r.updateRange.offset, r.updateRange.offset + r.updateRange.count)),
                    r.updateRange.count = 0),
                    t.version = r.version
                }
                function s(e) {
                    return e.isInterleavedBufferAttribute ? t.get(e.data).__webglBuffer : t.get(e).__webglBuffer
                }
                function u(e) {
                    return e.isInterleavedBufferAttribute ? t.get(e.data) : t.get(e)
                }
                function l(r) {
                    var n = t.get(r);
                    if (void 0 !== n.wireframe)
                        return n.wireframe;
                    var a = []
                      , o = r.index
                      , s = r.attributes
                      , u = s.position;
                    if (null !== o)
                        for (var l = o.array, c = 0, h = l.length; c < h; c += 3) {
                            var f = l[c + 0]
                              , d = l[c + 1]
                              , p = l[c + 2];
                            a.push(f, d, d, p, p, f)
                        }
                    else
                        for (var l = s.position.array, c = 0, h = l.length / 3 - 1; c < h; c += 3) {
                            var f = c + 0
                              , d = c + 1
                              , p = c + 2;
                            a.push(f, d, d, p, p, f)
                        }
                    var m = u.count > 65535 ? Uint32Array : Uint16Array
                      , g = new de(new m(a),1);
                    return i(g, e.ELEMENT_ARRAY_BUFFER),
                    n.wireframe = g,
                    g
                }
                var c = new et(e,t,r);
                return {
                    getAttributeBuffer: s,
                    getAttributeProperties: u,
                    getWireframeAttribute: l,
                    update: n
                }
            }
            function rt(e, t, r, n, i, a, o) {
                function s(e, t) {
                    if (e.width > t || e.height > t) {
                        var r = t / Math.max(e.width, e.height)
                          , n = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
                        n.width = Math.floor(e.width * r),
                        n.height = Math.floor(e.height * r);
                        var i = n.getContext("2d");
                        return i.drawImage(e, 0, 0, e.width, e.height, 0, 0, n.width, n.height),
                        console.warn("THREE.WebGLRenderer: image is too big (" + e.width + "x" + e.height + "). Resized to " + n.width + "x" + n.height, e),
                        n
                    }
                    return e
                }
                function u(e) {
                    return ms.isPowerOfTwo(e.width) && ms.isPowerOfTwo(e.height)
                }
                function l(e) {
                    if (e instanceof HTMLImageElement || e instanceof HTMLCanvasElement) {
                        var t = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
                        t.width = ms.nearestPowerOfTwo(e.width),
                        t.height = ms.nearestPowerOfTwo(e.height);
                        var r = t.getContext("2d");
                        return r.drawImage(e, 0, 0, t.width, t.height),
                        console.warn("THREE.WebGLRenderer: image is not power of two (" + e.width + "x" + e.height + "). Resized to " + t.width + "x" + t.height, e),
                        t
                    }
                    return e
                }
                function c(e) {
                    return e.wrapS !== lo || e.wrapT !== lo || e.minFilter !== ho && e.minFilter !== mo
                }
                function h(t) {
                    return t === ho || t === fo || t === po ? e.NEAREST : e.LINEAR
                }
                function f(e) {
                    var t = e.target;
                    t.removeEventListener("dispose", f),
                    p(t),
                    S.textures--
                }
                function d(e) {
                    var t = e.target;
                    t.removeEventListener("dispose", d),
                    m(t),
                    S.textures--
                }
                function p(t) {
                    var r = n.get(t);
                    if (t.image && r.__image__webglTextureCube)
                        e.deleteTexture(r.__image__webglTextureCube);
                    else {
                        if (void 0 === r.__webglInit)
                            return;
                        e.deleteTexture(r.__webglTexture)
                    }
                    n.delete(t)
                }
                function m(t) {
                    var r = n.get(t)
                      , i = n.get(t.texture);
                    if (t) {
                        if (void 0 !== i.__webglTexture && e.deleteTexture(i.__webglTexture),
                        t.depthTexture && t.depthTexture.dispose(),
                        t.isWebGLRenderTargetCube)
                            for (var a = 0; a < 6; a++)
                                e.deleteFramebuffer(r.__webglFramebuffer[a]),
                                r.__webglDepthbuffer && e.deleteRenderbuffer(r.__webglDepthbuffer[a]);
                        else
                            e.deleteFramebuffer(r.__webglFramebuffer),
                            r.__webglDepthbuffer && e.deleteRenderbuffer(r.__webglDepthbuffer);
                        n.delete(t.texture),
                        n.delete(t)
                    }
                }
                function g(t, i) {
                    var a = n.get(t);
                    if (t.version > 0 && a.__version !== t.version) {
                        var o = t.image;
                        if (void 0 === o)
                            N || (console.trace("THREE.WebGLRenderer: Texture marked for update but image is undefined", t),
                            N = !0);
                        else {
                            if (o.complete !== !1)
                                return void w(a, t, i);
                            I || (console.trace("THREE.WebGLRenderer: Texture marked for update but image is incomplete", t),
                            I = !0)
                        }
                    }
                    r.activeTexture(e.TEXTURE0 + i),
                    r.bindTexture(e.TEXTURE_2D, a.__webglTexture)
                }
                function v(t, o) {
                    var l = n.get(t);
                    if (6 === t.image.length)
                        if (t.version > 0 && l.__version !== t.version) {
                            l.__image__webglTextureCube || (t.addEventListener("dispose", f),
                            l.__image__webglTextureCube = e.createTexture(),
                            S.textures++),
                            r.activeTexture(e.TEXTURE0 + o),
                            r.bindTexture(e.TEXTURE_CUBE_MAP, l.__image__webglTextureCube),
                            e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t.flipY);
                            for (var c = t && t.isCompressedTexture, h = t.image[0] && t.image[0].isDataTexture, d = [], p = 0; p < 6; p++)
                                c || h ? d[p] = h ? t.image[p].image : t.image[p] : d[p] = s(t.image[p], i.maxCubemapSize);
                            var m = d[0]
                              , g = u(m)
                              , v = a(t.format)
                              , y = a(t.type);
                            M(e.TEXTURE_CUBE_MAP, t, g);
                            for (var p = 0; p < 6; p++)
                                if (c)
                                    for (var w, x = d[p].mipmaps, A = 0, b = x.length; A < b; A++)
                                        w = x[A],
                                        t.format !== Co && t.format !== Lo ? r.getCompressedTextureFormats().indexOf(v) > -1 ? r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + p, A, v, w.width, w.height, 0, w.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + p, A, v, w.width, w.height, 0, v, y, w.data);
                                else
                                    h ? r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + p, 0, v, d[p].width, d[p].height, 0, v, y, d[p].data) : r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + p, 0, v, v, y, d[p]);
                            t.generateMipmaps && g && e.generateMipmap(e.TEXTURE_CUBE_MAP),
                            l.__version = t.version,
                            t.onUpdate && t.onUpdate(t)
                        } else
                            r.activeTexture(e.TEXTURE0 + o),
                            r.bindTexture(e.TEXTURE_CUBE_MAP, l.__image__webglTextureCube)
                }
                function y(t, i) {
                    r.activeTexture(e.TEXTURE0 + i),
                    r.bindTexture(e.TEXTURE_CUBE_MAP, n.get(t).__webglTexture)
                }
                function M(r, o, s) {
                    var u;
                    if (s ? (e.texParameteri(r, e.TEXTURE_WRAP_S, a(o.wrapS)),
                    e.texParameteri(r, e.TEXTURE_WRAP_T, a(o.wrapT)),
                    e.texParameteri(r, e.TEXTURE_MAG_FILTER, a(o.magFilter)),
                    e.texParameteri(r, e.TEXTURE_MIN_FILTER, a(o.minFilter))) : (e.texParameteri(r, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                    e.texParameteri(r, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                    o.wrapS === lo && o.wrapT === lo || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.", o),
                    e.texParameteri(r, e.TEXTURE_MAG_FILTER, h(o.magFilter)),
                    e.texParameteri(r, e.TEXTURE_MIN_FILTER, h(o.minFilter)),
                    o.minFilter !== ho && o.minFilter !== mo && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.", o)),
                    u = t.get("EXT_texture_filter_anisotropic")) {
                        if (o.type === To && null === t.get("OES_texture_float_linear"))
                            return;
                        if (o.type === _o && null === t.get("OES_texture_half_float_linear"))
                            return;
                        (o.anisotropy > 1 || n.get(o).__currentAnisotropy) && (e.texParameterf(r, u.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(o.anisotropy, i.getMaxAnisotropy())),
                        n.get(o).__currentAnisotropy = o.anisotropy)
                    }
                }
                function w(t, n, o) {
                    void 0 === t.__webglInit && (t.__webglInit = !0,
                    n.addEventListener("dispose", f),
                    t.__webglTexture = e.createTexture(),
                    S.textures++),
                    r.activeTexture(e.TEXTURE0 + o),
                    r.bindTexture(e.TEXTURE_2D, t.__webglTexture),
                    e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, n.flipY),
                    e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, n.premultiplyAlpha),
                    e.pixelStorei(e.UNPACK_ALIGNMENT, n.unpackAlignment);
                    var h = s(n.image, i.maxTextureSize);
                    c(n) && u(h) === !1 && (h = l(h));
                    var d = u(h)
                      , p = a(n.format)
                      , m = a(n.type);
                    M(e.TEXTURE_2D, n, d);
                    var g, v = n.mipmaps;
                    if (n.isDepthTexture) {
                        var y = e.DEPTH_COMPONENT;
                        if (n.type === To) {
                            if (!D)
                                throw new Error("Float Depth Texture only supported in WebGL2.0");
                            y = e.DEPTH_COMPONENT32F
                        } else
                            D && (y = e.DEPTH_COMPONENT16);
                        n.format === Po && y === e.DEPTH_COMPONENT && n.type !== xo && n.type !== bo && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),
                        n.type = xo,
                        m = a(n.type)),
                        n.format === zo && (y = e.DEPTH_STENCIL,
                        n.type !== No && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
                        n.type = No,
                        m = a(n.type))),
                        r.texImage2D(e.TEXTURE_2D, 0, y, h.width, h.height, 0, p, m, null)
                    } else if (n.isDataTexture)
                        if (v.length > 0 && d) {
                            for (var w = 0, x = v.length; w < x; w++)
                                g = v[w],
                                r.texImage2D(e.TEXTURE_2D, w, p, g.width, g.height, 0, p, m, g.data);
                            n.generateMipmaps = !1
                        } else
                            r.texImage2D(e.TEXTURE_2D, 0, p, h.width, h.height, 0, p, m, h.data);
                    else if (n.isCompressedTexture)
                        for (var w = 0, x = v.length; w < x; w++)
                            g = v[w],
                            n.format !== Co && n.format !== Lo ? r.getCompressedTextureFormats().indexOf(p) > -1 ? r.compressedTexImage2D(e.TEXTURE_2D, w, p, g.width, g.height, 0, g.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : r.texImage2D(e.TEXTURE_2D, w, p, g.width, g.height, 0, p, m, g.data);
                    else if (v.length > 0 && d) {
                        for (var w = 0, x = v.length; w < x; w++)
                            g = v[w],
                            r.texImage2D(e.TEXTURE_2D, w, p, p, m, g);
                        n.generateMipmaps = !1
                    } else
                        r.texImage2D(e.TEXTURE_2D, 0, p, p, m, h);
                    n.generateMipmaps && d && e.generateMipmap(e.TEXTURE_2D),
                    t.__version = n.version,
                    n.onUpdate && n.onUpdate(n)
                }
                function x(t, i, o, s) {
                    var u = a(i.texture.format)
                      , l = a(i.texture.type);
                    r.texImage2D(s, 0, u, i.width, i.height, 0, u, l, null),
                    e.bindFramebuffer(e.FRAMEBUFFER, t),
                    e.framebufferTexture2D(e.FRAMEBUFFER, o, s, n.get(i.texture).__webglTexture, 0),
                    e.bindFramebuffer(e.FRAMEBUFFER, null)
                }
                function A(t, r) {
                    e.bindRenderbuffer(e.RENDERBUFFER, t),
                    r.depthBuffer && !r.stencilBuffer ? (e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_COMPONENT16, r.width, r.height),
                    e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t)) : r.depthBuffer && r.stencilBuffer ? (e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, r.width, r.height),
                    e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.RENDERBUFFER, t)) : e.renderbufferStorage(e.RENDERBUFFER, e.RGBA4, r.width, r.height),
                    e.bindRenderbuffer(e.RENDERBUFFER, null)
                }
                function b(t, r) {
                    var i = r && r.isWebGLRenderTargetCube;
                    if (i)
                        throw new Error("Depth Texture with cube render targets is not supported!");
                    if (e.bindFramebuffer(e.FRAMEBUFFER, t),
                    !r.depthTexture || !r.depthTexture.isDepthTexture)
                        throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
                    n.get(r.depthTexture).__webglTexture && r.depthTexture.image.width === r.width && r.depthTexture.image.height === r.height || (r.depthTexture.image.width = r.width,
                    r.depthTexture.image.height = r.height,
                    r.depthTexture.needsUpdate = !0),
                    g(r.depthTexture, 0);
                    var a = n.get(r.depthTexture).__webglTexture;
                    if (r.depthTexture.format === Po)
                        e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.TEXTURE_2D, a, 0);
                    else {
                        if (r.depthTexture.format !== zo)
                            throw new Error("Unknown depthTexture format");
                        e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.TEXTURE_2D, a, 0)
                    }
                }
                function T(t) {
                    var r = n.get(t)
                      , i = t.isWebGLRenderTargetCube === !0;
                    if (t.depthTexture) {
                        if (i)
                            throw new Error("target.depthTexture not supported in Cube render targets");
                        b(r.__webglFramebuffer, t)
                    } else if (i) {
                        r.__webglDepthbuffer = [];
                        for (var a = 0; a < 6; a++)
                            e.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer[a]),
                            r.__webglDepthbuffer[a] = e.createRenderbuffer(),
                            A(r.__webglDepthbuffer[a], t)
                    } else
                        e.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer),
                        r.__webglDepthbuffer = e.createRenderbuffer(),
                        A(r.__webglDepthbuffer, t);
                    e.bindFramebuffer(e.FRAMEBUFFER, null)
                }
                function _(t) {
                    var i = n.get(t)
                      , a = n.get(t.texture);
                    t.addEventListener("dispose", d),
                    a.__webglTexture = e.createTexture(),
                    S.textures++;
                    var o = t.isWebGLRenderTargetCube === !0
                      , s = u(t);
                    if (o) {
                        i.__webglFramebuffer = [];
                        for (var l = 0; l < 6; l++)
                            i.__webglFramebuffer[l] = e.createFramebuffer()
                    } else
                        i.__webglFramebuffer = e.createFramebuffer();
                    if (o) {
                        r.bindTexture(e.TEXTURE_CUBE_MAP, a.__webglTexture),
                        M(e.TEXTURE_CUBE_MAP, t.texture, s);
                        for (var l = 0; l < 6; l++)
                            x(i.__webglFramebuffer[l], t, e.COLOR_ATTACHMENT0, e.TEXTURE_CUBE_MAP_POSITIVE_X + l);
                        t.texture.generateMipmaps && s && e.generateMipmap(e.TEXTURE_CUBE_MAP),
                        r.bindTexture(e.TEXTURE_CUBE_MAP, null)
                    } else
                        r.bindTexture(e.TEXTURE_2D, a.__webglTexture),
                        M(e.TEXTURE_2D, t.texture, s),
                        x(i.__webglFramebuffer, t, e.COLOR_ATTACHMENT0, e.TEXTURE_2D),
                        t.texture.generateMipmaps && s && e.generateMipmap(e.TEXTURE_2D),
                        r.bindTexture(e.TEXTURE_2D, null);
                    t.depthBuffer && T(t)
                }
                function E(t) {
                    var i = t.texture;
                    if (i.generateMipmaps && u(t) && i.minFilter !== ho && i.minFilter !== mo) {
                        var a = t && t.isWebGLRenderTargetCube ? e.TEXTURE_CUBE_MAP : e.TEXTURE_2D
                          , o = n.get(i).__webglTexture;
                        r.bindTexture(a, o),
                        e.generateMipmap(a),
                        r.bindTexture(a, null)
                    }
                }
                var S = o.memory
                  , D = "undefined" != typeof WebGL2RenderingContext && e instanceof WebGL2RenderingContext
                  , N = !1
                  , I = !1;
                this.setTexture2D = g,
                this.setTextureCube = v,
                this.setTextureCubeDynamic = y,
                this.setupRenderTarget = _,
                this.updateRenderTargetMipmap = E
            }
            function nt() {
                var e = {};
                return {
                    get: function(t) {
                        var r = t.uuid
                          , n = e[r];
                        return void 0 === n && (n = {},
                        e[r] = n),
                        n
                    },
                    delete: function(t) {
                        delete e[t.uuid]
                    },
                    clear: function() {
                        e = {}
                    }
                }
            }
            function it(e, t, r) {
                function n() {
                    var t = !1
                      , r = new i
                      , n = null
                      , a = new i;
                    return {
                        setMask: function(r) {
                            n === r || t || (e.colorMask(r, r, r, r),
                            n = r)
                        },
                        setLocked: function(e) {
                            t = e
                        },
                        setClear: function(t, n, i, o, s) {
                            s === !0 && (t *= o,
                            n *= o,
                            i *= o),
                            r.set(t, n, i, o),
                            a.equals(r) === !1 && (e.clearColor(t, n, i, o),
                            a.copy(r))
                        },
                        reset: function() {
                            t = !1,
                            n = null,
                            a.set(0, 0, 0, 1)
                        }
                    }
                }
                function a() {
                    var t = !1
                      , r = null
                      , n = null
                      , i = null;
                    return {
                        setTest: function(t) {
                            t ? d(e.DEPTH_TEST) : p(e.DEPTH_TEST)
                        },
                        setMask: function(n) {
                            r === n || t || (e.depthMask(n),
                            r = n)
                        },
                        setFunc: function(t) {
                            if (n !== t) {
                                if (t)
                                    switch (t) {
                                    case Ba:
                                        e.depthFunc(e.NEVER);
                                        break;
                                    case Ua:
                                        e.depthFunc(e.ALWAYS);
                                        break;
                                    case Va:
                                        e.depthFunc(e.LESS);
                                        break;
                                    case ka:
                                        e.depthFunc(e.LEQUAL);
                                        break;
                                    case Fa:
                                        e.depthFunc(e.EQUAL);
                                        break;
                                    case Ga:
                                        e.depthFunc(e.GEQUAL);
                                        break;
                                    case Ya:
                                        e.depthFunc(e.GREATER);
                                        break;
                                    case Qa:
                                        e.depthFunc(e.NOTEQUAL);
                                        break;
                                    default:
                                        e.depthFunc(e.LEQUAL)
                                    }
                                else
                                    e.depthFunc(e.LEQUAL);
                                n = t
                            }
                        },
                        setLocked: function(e) {
                            t = e
                        },
                        setClear: function(t) {
                            i !== t && (e.clearDepth(t),
                            i = t)
                        },
                        reset: function() {
                            t = !1,
                            r = null,
                            n = null,
                            i = null
                        }
                    }
                }
                function o() {
                    var t = !1
                      , r = null
                      , n = null
                      , i = null
                      , a = null
                      , o = null
                      , s = null
                      , u = null
                      , l = null;
                    return {
                        setTest: function(t) {
                            t ? d(e.STENCIL_TEST) : p(e.STENCIL_TEST)
                        },
                        setMask: function(n) {
                            r === n || t || (e.stencilMask(n),
                            r = n)
                        },
                        setFunc: function(t, r, o) {
                            n === t && i === r && a === o || (e.stencilFunc(t, r, o),
                            n = t,
                            i = r,
                            a = o)
                        },
                        setOp: function(t, r, n) {
                            o === t && s === r && u === n || (e.stencilOp(t, r, n),
                            o = t,
                            s = r,
                            u = n)
                        },
                        setLocked: function(e) {
                            t = e
                        },
                        setClear: function(t) {
                            l !== t && (e.clearStencil(t),
                            l = t)
                        },
                        reset: function() {
                            t = !1,
                            r = null,
                            n = null,
                            i = null,
                            a = null,
                            o = null,
                            s = null,
                            u = null,
                            l = null
                        }
                    }
                }
                function s(t, r, n) {
                    var i = new Uint8Array(4)
                      , a = e.createTexture();
                    e.bindTexture(t, a),
                    e.texParameteri(t, e.TEXTURE_MIN_FILTER, e.NEAREST),
                    e.texParameteri(t, e.TEXTURE_MAG_FILTER, e.NEAREST);
                    for (var o = 0; o < n; o++)
                        e.texImage2D(r + o, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, i);
                    return a
                }
                function u() {
                    B.setClear(0, 0, 0, 1),
                    U.setClear(1),
                    V.setClear(0),
                    d(e.DEPTH_TEST),
                    w(ka),
                    _(!1),
                    E($i),
                    d(e.CULL_FACE),
                    d(e.BLEND),
                    g(va)
                }
                function l() {
                    for (var e = 0, t = F.length; e < t; e++)
                        F[e] = 0
                }
                function c(r) {
                    if (F[r] = 1,
                    0 === G[r] && (e.enableVertexAttribArray(r),
                    G[r] = 1),
                    0 !== Y[r]) {
                        var n = t.get("ANGLE_instanced_arrays");
                        n.vertexAttribDivisorANGLE(r, 0),
                        Y[r] = 0
                    }
                }
                function h(t, r, n) {
                    F[t] = 1,
                    0 === G[t] && (e.enableVertexAttribArray(t),
                    G[t] = 1),
                    Y[t] !== r && (n.vertexAttribDivisorANGLE(t, r),
                    Y[t] = r)
                }
                function f() {
                    for (var t = 0, r = G.length; t !== r; ++t)
                        G[t] !== F[t] && (e.disableVertexAttribArray(t),
                        G[t] = 0)
                }
                function d(t) {
                    Q[t] !== !0 && (e.enable(t),
                    Q[t] = !0)
                }
                function p(t) {
                    Q[t] !== !1 && (e.disable(t),
                    Q[t] = !1)
                }
                function m() {
                    if (null === H && (H = [],
                    t.get("WEBGL_compressed_texture_pvrtc") || t.get("WEBGL_compressed_texture_s3tc") || t.get("WEBGL_compressed_texture_etc1")))
                        for (var r = e.getParameter(e.COMPRESSED_TEXTURE_FORMATS), n = 0; n < r.length; n++)
                            H.push(r[n]);
                    return H
                }
                function g(t, n, i, a, o, s, u, l) {
                    t !== ga ? d(e.BLEND) : p(e.BLEND),
                    t === W && l === ee || (t === ya ? l ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(e.ONE, e.ONE, e.ONE, e.ONE)) : (e.blendEquation(e.FUNC_ADD),
                    e.blendFunc(e.SRC_ALPHA, e.ONE)) : t === Ma ? l ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(e.ZERO, e.ZERO, e.ONE_MINUS_SRC_COLOR, e.ONE_MINUS_SRC_ALPHA)) : (e.blendEquation(e.FUNC_ADD),
                    e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR)) : t === wa ? l ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(e.ZERO, e.SRC_COLOR, e.ZERO, e.SRC_ALPHA)) : (e.blendEquation(e.FUNC_ADD),
                    e.blendFunc(e.ZERO, e.SRC_COLOR)) : l ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(e.ONE, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)) : (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)),
                    W = t,
                    ee = l),
                    t === xa ? (o = o || n,
                    s = s || i,
                    u = u || a,
                    n === X && o === J || (e.blendEquationSeparate(r(n), r(o)),
                    X = n,
                    J = o,
                    console.log("setting custom blend state", n, o)),
                    i === q && a === Z && s === K && u === $ || (e.blendFuncSeparate(r(i), r(a), r(s), r(u)),
                    console.log("setting custom blend state", i, a, s, u),
                    q = i,
                    Z = a,
                    K = s,
                    $ = u)) : (X = null,
                    q = null,
                    Z = null,
                    J = null,
                    K = null,
                    $ = null)
                }
                function v(e) {
                    B.setMask(e)
                }
                function y(e) {
                    U.setTest(e)
                }
                function M(e) {
                    U.setMask(e)
                }
                function w(e) {
                    U.setFunc(e)
                }
                function x(e) {
                    V.setTest(e)
                }
                function A(e) {
                    V.setMask(e)
                }
                function b(e, t, r) {
                    V.setFunc(e, t, r)
                }
                function T(e, t, r) {
                    V.setOp(e, t, r)
                }
                function _(t) {
                    te !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW),
                    te = t)
                }
                function E(t) {
                    t !== Ki ? (d(e.CULL_FACE),
                    t !== re && (t === $i ? e.cullFace(e.BACK) : t === ea ? e.cullFace(e.FRONT) : e.cullFace(e.FRONT_AND_BACK))) : p(e.CULL_FACE),
                    re = t
                }
                function S(t) {
                    t !== ne && (le && e.lineWidth(t),
                    ne = t)
                }
                function D(t, r, n) {
                    t ? (d(e.POLYGON_OFFSET_FILL),
                    ie === r && ae === n || (e.polygonOffset(r, n),
                    ie = r,
                    ae = n)) : p(e.POLYGON_OFFSET_FILL)
                }
                function N() {
                    return oe
                }
                function I(t) {
                    oe = t,
                    t ? d(e.SCISSOR_TEST) : p(e.SCISSOR_TEST)
                }
                function L(t) {
                    void 0 === t && (t = e.TEXTURE0 + se - 1),
                    ce !== t && (e.activeTexture(t),
                    ce = t)
                }
                function C(t, r) {
                    null === ce && L();
                    var n = he[ce];
                    void 0 === n && (n = {
                        type: void 0,
                        texture: void 0
                    },
                    he[ce] = n),
                    n.type === t && n.texture === r || (e.bindTexture(t, r || pe[t]),
                    n.type = t,
                    n.texture = r)
                }
                function O() {
                    try {
                        e.compressedTexImage2D.apply(e, arguments)
                    } catch (e) {
                        console.error(e)
                    }
                }
                function j() {
                    try {
                        e.texImage2D.apply(e, arguments)
                    } catch (e) {
                        console.error(e)
                    }
                }
                function R(t) {
                    fe.equals(t) === !1 && (e.scissor(t.x, t.y, t.z, t.w),
                    fe.copy(t))
                }
                function P(t) {
                    de.equals(t) === !1 && (e.viewport(t.x, t.y, t.z, t.w),
                    de.copy(t))
                }
                function z() {
                    for (var t = 0; t < G.length; t++)
                        1 === G[t] && (e.disableVertexAttribArray(t),
                        G[t] = 0);
                    Q = {},
                    H = null,
                    ce = null,
                    he = {},
                    W = null,
                    te = null,
                    re = null,
                    B.reset(),
                    U.reset(),
                    V.reset()
                }
                var B = new n
                  , U = new a
                  , V = new o
                  , k = e.getParameter(e.MAX_VERTEX_ATTRIBS)
                  , F = new Uint8Array(k)
                  , G = new Uint8Array(k)
                  , Y = new Uint8Array(k)
                  , Q = {}
                  , H = null
                  , W = null
                  , X = null
                  , q = null
                  , Z = null
                  , J = null
                  , K = null
                  , $ = null
                  , ee = !1
                  , te = null
                  , re = null
                  , ne = null
                  , ie = null
                  , ae = null
                  , oe = null
                  , se = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)
                  , ue = parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1])
                  , le = parseFloat(ue) >= 1
                  , ce = null
                  , he = {}
                  , fe = new i
                  , de = new i
                  , pe = {};
                return pe[e.TEXTURE_2D] = s(e.TEXTURE_2D, e.TEXTURE_2D, 1),
                pe[e.TEXTURE_CUBE_MAP] = s(e.TEXTURE_CUBE_MAP, e.TEXTURE_CUBE_MAP_POSITIVE_X, 6),
                {
                    buffers: {
                        color: B,
                        depth: U,
                        stencil: V
                    },
                    init: u,
                    initAttributes: l,
                    enableAttribute: c,
                    enableAttributeAndDivisor: h,
                    disableUnusedAttributes: f,
                    enable: d,
                    disable: p,
                    getCompressedTextureFormats: m,
                    setBlending: g,
                    setColorWrite: v,
                    setDepthTest: y,
                    setDepthWrite: M,
                    setDepthFunc: w,
                    setStencilTest: x,
                    setStencilWrite: A,
                    setStencilFunc: b,
                    setStencilOp: T,
                    setFlipSided: _,
                    setCullFace: E,
                    setLineWidth: S,
                    setPolygonOffset: D,
                    getScissorTest: N,
                    setScissorTest: I,
                    activeTexture: L,
                    bindTexture: C,
                    compressedTexImage2D: O,
                    texImage2D: j,
                    scissor: R,
                    viewport: P,
                    reset: z
                }
            }
            function at(e, t, r) {
                function n() {
                    if (void 0 !== a)
                        return a;
                    var r = t.get("EXT_texture_filter_anisotropic");
                    return a = null !== r ? e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
                }
                function i(t) {
                    if ("highp" === t) {
                        if (e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).precision > 0 && e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).precision > 0)
                            return "highp";
                        t = "mediump"
                    }
                    return "mediump" === t && e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).precision > 0 && e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).precision > 0 ? "mediump" : "lowp"
                }
                var a, o = void 0 !== r.precision ? r.precision : "highp", s = i(o);
                s !== o && (console.warn("THREE.WebGLRenderer:", o, "not supported, using", s, "instead."),
                o = s);
                var u = r.logarithmicDepthBuffer === !0 && !!t.get("EXT_frag_depth")
                  , l = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)
                  , c = e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)
                  , h = e.getParameter(e.MAX_TEXTURE_SIZE)
                  , f = e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)
                  , d = e.getParameter(e.MAX_VERTEX_ATTRIBS)
                  , p = e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)
                  , m = e.getParameter(e.MAX_VARYING_VECTORS)
                  , g = e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)
                  , v = c > 0
                  , y = !!t.get("OES_texture_float")
                  , M = v && y;
                return {
                    getMaxAnisotropy: n,
                    getMaxPrecision: i,
                    precision: o,
                    logarithmicDepthBuffer: u,
                    maxTextures: l,
                    maxVertexTextures: c,
                    maxTextureSize: h,
                    maxCubemapSize: f,
                    maxAttributes: d,
                    maxVertexUniforms: p,
                    maxVaryings: m,
                    maxFragmentUniforms: g,
                    vertexTextures: v,
                    floatFragmentTextures: y,
                    floatVertexTextures: M
                }
            }
            function ot(e) {
                var t = {};
                return {
                    get: function(r) {
                        if (void 0 !== t[r])
                            return t[r];
                        var n;
                        switch (r) {
                        case "WEBGL_depth_texture":
                            n = e.getExtension("WEBGL_depth_texture") || e.getExtension("MOZ_WEBGL_depth_texture") || e.getExtension("WEBKIT_WEBGL_depth_texture");
                            break;
                        case "EXT_texture_filter_anisotropic":
                            n = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                            break;
                        case "WEBGL_compressed_texture_s3tc":
                            n = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                            break;
                        case "WEBGL_compressed_texture_pvrtc":
                            n = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                            break;
                        case "WEBGL_compressed_texture_etc1":
                            n = e.getExtension("WEBGL_compressed_texture_etc1");
                            break;
                        default:
                            n = e.getExtension(r)
                        }
                        return null === n && console.warn("THREE.WebGLRenderer: " + r + " extension not supported."),
                        t[r] = n,
                        n
                    }
                }
            }
            function st() {
                function e() {
                    l.value !== n && (l.value = n,
                    l.needsUpdate = i > 0),
                    r.numPlanes = i,
                    r.numIntersection = 0
                }
                function t(e, t, n, i) {
                    var a = null !== e ? e.length : 0
                      , o = null;
                    if (0 !== a) {
                        if (o = l.value,
                        i !== !0 || null === o) {
                            var c = n + 4 * a
                              , h = t.matrixWorldInverse;
                            u.getNormalMatrix(h),
                            (null === o || o.length < c) && (o = new Float32Array(c));
                            for (var f = 0, d = n; f !== a; ++f,
                            d += 4)
                                s.copy(e[f]).applyMatrix4(h, u),
                                s.normal.toArray(o, d),
                                o[d + 3] = s.constant
                        }
                        l.value = o,
                        l.needsUpdate = !0
                    }
                    return r.numPlanes = a,
                    o
                }
                var r = this
                  , n = null
                  , i = 0
                  , a = !1
                  , o = !1
                  , s = new re
                  , u = new te
                  , l = {
                    value: null,
                    needsUpdate: !1
                };
                this.uniform = l,
                this.numPlanes = 0,
                this.numIntersection = 0,
                this.init = function(e, r, o) {
                    var s = 0 !== e.length || r || 0 !== i || a;
                    return a = r,
                    n = t(e, o, 0),
                    i = e.length,
                    s
                }
                ,
                this.beginShadows = function() {
                    o = !0,
                    t(null)
                }
                ,
                this.endShadows = function() {
                    o = !1,
                    e()
                }
                ,
                this.setState = function(r, s, u, c, h, f) {
                    if (!a || null === r || 0 === r.length || o && !u)
                        o ? t(null) : e();
                    else {
                        var d = o ? 0 : i
                          , p = 4 * d
                          , m = h.clippingState || null;
                        l.value = m,
                        m = t(r, c, p, f);
                        for (var g = 0; g !== p; ++g)
                            m[g] = n[g];
                        h.clippingState = m,
                        this.numIntersection = s ? this.numPlanes : 0,
                        this.numPlanes += d
                    }
                }
            }
            function ut() {
                ue.call(this),
                this.type = "Scene",
                this.background = null,
                this.fog = null,
                this.overrideMaterial = null,
                this.autoUpdate = !0
            }
            function lt(e) {
                function t() {
                    return null === ve ? Ve : 1
                }
                function r() {
                    pt.init(),
                    pt.scissor(Ae.copy(ke).multiplyScalar(Ve)),
                    pt.viewport(Te.copy(Ge).multiplyScalar(Ve)),
                    pt.buffers.color.setClear(Le.r, Le.g, Le.b, ze, K)
                }
                function n() {
                    ge = null,
                    xe = null,
                    we = "",
                    Me = -1,
                    pt.reset()
                }
                function a(e) {
                    e.preventDefault(),
                    n(),
                    r(),
                    mt.clear()
                }
                function o(e) {
                    var t = e.target;
                    t.removeEventListener("dispose", o),
                    s(t)
                }
                function s(e) {
                    c(e),
                    mt.delete(e)
                }
                function c(e) {
                    var t = mt.get(e).program;
                    e.program = void 0,
                    void 0 !== t && yt.releaseProgram(t)
                }
                function h(e, t, r, n) {
                    var i;
                    if (r && r.isInstancedBufferGeometry && (i = ft.get("ANGLE_instanced_arrays"),
                    null === i))
                        return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                    void 0 === n && (n = 0),
                    pt.initAttributes();
                    var a = r.attributes
                      , o = t.getAttributes()
                      , s = e.defaultAttributeValues;
                    for (var u in o) {
                        var l = o[u];
                        if (l >= 0) {
                            var c = a[u];
                            if (void 0 !== c) {
                                var h = c.normalized
                                  , f = c.itemSize
                                  , d = vt.getAttributeProperties(c)
                                  , p = d.__webglBuffer
                                  , m = d.type
                                  , g = d.bytesPerElement;
                                if (c.isInterleavedBufferAttribute) {
                                    var v = c.data
                                      , y = v.stride
                                      , M = c.offset;
                                    v && v.isInstancedInterleavedBuffer ? (pt.enableAttributeAndDivisor(l, v.meshPerAttribute, i),
                                    void 0 === r.maxInstancedCount && (r.maxInstancedCount = v.meshPerAttribute * v.count)) : pt.enableAttribute(l),
                                    ct.bindBuffer(ct.ARRAY_BUFFER, p),
                                    ct.vertexAttribPointer(l, f, m, h, y * g, (n * y + M) * g)
                                } else
                                    c.isInstancedBufferAttribute ? (pt.enableAttributeAndDivisor(l, c.meshPerAttribute, i),
                                    void 0 === r.maxInstancedCount && (r.maxInstancedCount = c.meshPerAttribute * c.count)) : pt.enableAttribute(l),
                                    ct.bindBuffer(ct.ARRAY_BUFFER, p),
                                    ct.vertexAttribPointer(l, f, m, h, 0, n * f * g)
                            } else if (void 0 !== s) {
                                var w = s[u];
                                if (void 0 !== w)
                                    switch (w.length) {
                                    case 2:
                                        ct.vertexAttrib2fv(l, w);
                                        break;
                                    case 3:
                                        ct.vertexAttrib3fv(l, w);
                                        break;
                                    case 4:
                                        ct.vertexAttrib4fv(l, w);
                                        break;
                                    default:
                                        ct.vertexAttrib1fv(l, w)
                                    }
                            }
                        }
                    }
                    pt.disableUnusedAttributes()
                }
                function f(e, t) {
                    return Math.abs(t[0]) - Math.abs(e[0])
                }
                function d(e, t) {
                    return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.program && t.material.program && e.material.program !== t.material.program ? e.material.program.id - t.material.program.id : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
                }
                function p(e, t) {
                    return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
                }
                function m(e, t, r, n, i) {
                    var a, o;
                    r.transparent ? (a = oe,
                    o = ++se) : (a = re,
                    o = ++ae);
                    var s = a[o];
                    void 0 !== s ? (s.id = e.id,
                    s.object = e,
                    s.geometry = t,
                    s.material = r,
                    s.z = Ze.z,
                    s.group = i) : (s = {
                        id: e.id,
                        object: e,
                        geometry: t,
                        material: r,
                        z: Ze.z,
                        group: i
                    },
                    a.push(s))
                }
                function g(e) {
                    var t = e.geometry;
                    return null === t.boundingSphere && t.computeBoundingSphere(),
                    Xe.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),
                    y(Xe)
                }
                function v(e) {
                    return Xe.center.set(0, 0, 0),
                    Xe.radius = .7071067811865476,
                    Xe.applyMatrix4(e.matrixWorld),
                    y(Xe)
                }
                function y(e) {
                    if (!Ye.intersectsSphere(e))
                        return !1;
                    var t = Qe.numPlanes;
                    if (0 === t)
                        return !0;
                    var r = me.clippingPlanes
                      , n = e.center
                      , i = -e.radius
                      , a = 0;
                    do
                        if (r[a].distanceToPoint(n) < i)
                            return !1;
                    while (++a !== t);return !0
                }
                function M(e, t) {
                    if (e.visible !== !1) {
                        var r = 0 !== (e.layers.mask & t.layers.mask);
                        if (r)
                            if (e.isLight)
                                te.push(e);
                            else if (e.isSprite)
                                e.frustumCulled !== !1 && v(e) !== !0 || le.push(e);
                            else if (e.isLensFlare)
                                ce.push(e);
                            else if (e.isImmediateRenderObject)
                                me.sortObjects === !0 && (Ze.setFromMatrixPosition(e.matrixWorld),
                                Ze.applyMatrix4(qe)),
                                m(e, null, e.material, Ze.z, null);
                            else if ((e.isMesh || e.isLine || e.isPoints) && (e.isSkinnedMesh && e.skeleton.update(),
                            e.frustumCulled === !1 || g(e) === !0)) {
                                var n = e.material;
                                if (n.visible === !0) {
                                    me.sortObjects === !0 && (Ze.setFromMatrixPosition(e.matrixWorld),
                                    Ze.applyMatrix4(qe));
                                    var i = vt.update(e);
                                    if (n.isMultiMaterial)
                                        for (var a = i.groups, o = n.materials, s = 0, u = a.length; s < u; s++) {
                                            var l = a[s]
                                              , c = o[l.materialIndex];
                                            c.visible === !0 && m(e, i, c, Ze.z, l)
                                        }
                                    else
                                        m(e, i, n, Ze.z, null)
                                }
                            }
                        for (var h = e.children, s = 0, u = h.length; s < u; s++)
                            M(h[s], t)
                    }
                }
                function w(e, t, r, n) {
                    for (var i = 0, a = e.length; i < a; i++) {
                        var o = e[i]
                          , s = o.object
                          , u = o.geometry
                          , l = void 0 === n ? o.material : n
                          , c = o.group;
                        if (s.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse, s.matrixWorld),
                        s.normalMatrix.getNormalMatrix(s.modelViewMatrix),
                        s.onBeforeRender(me, t, r, u, l, c),
                        s.isImmediateRenderObject) {
                            A(l);
                            var h = b(r, t.fog, l, s);
                            we = "",
                            s.render(function(e) {
                                me.renderBufferImmediate(e, h, l)
                            })
                        } else
                            me.renderBufferDirect(r, t.fog, u, l, s, c);
                        s.onAfterRender(me, t, r, u, l, c)
                    }
                }
                function x(e, t, r) {
                    var n = mt.get(e)
                      , i = yt.getParameters(e, et, t, Qe.numPlanes, Qe.numIntersection, r)
                      , a = yt.getProgramCode(e, i)
                      , s = n.program
                      , u = !0;
                    if (void 0 === s)
                        e.addEventListener("dispose", o);
                    else if (s.code !== a)
                        c(e);
                    else {
                        if (void 0 !== i.shaderID)
                            return;
                        u = !1
                    }
                    if (u) {
                        if (i.shaderID) {
                            var l = Ll[i.shaderID];
                            n.__webglShader = {
                                name: e.type,
                                uniforms: As.clone(l.uniforms),
                                vertexShader: l.vertexShader,
                                fragmentShader: l.fragmentShader
                            }
                        } else
                            n.__webglShader = {
                                name: e.type,
                                uniforms: e.uniforms,
                                vertexShader: e.vertexShader,
                                fragmentShader: e.fragmentShader
                            };
                        e.__webglShader = n.__webglShader,
                        s = yt.acquireProgram(e, i, a),
                        n.program = s,
                        e.program = s
                    }
                    var h = s.getAttributes();
                    if (e.morphTargets) {
                        e.numSupportedMorphTargets = 0;
                        for (var f = 0; f < me.maxMorphTargets; f++)
                            h["morphTarget" + f] >= 0 && e.numSupportedMorphTargets++
                    }
                    if (e.morphNormals) {
                        e.numSupportedMorphNormals = 0;
                        for (var f = 0; f < me.maxMorphNormals; f++)
                            h["morphNormal" + f] >= 0 && e.numSupportedMorphNormals++
                    }
                    var d = n.__webglShader.uniforms;
                    (e.isShaderMaterial || e.isRawShaderMaterial) && e.clipping !== !0 || (n.numClippingPlanes = Qe.numPlanes,
                    n.numIntersection = Qe.numIntersection,
                    d.clippingPlanes = Qe.uniform),
                    n.fog = t,
                    n.lightsHash = et.hash,
                    e.lights && (d.ambientLightColor.value = et.ambient,
                    d.directionalLights.value = et.directional,
                    d.spotLights.value = et.spot,
                    d.rectAreaLights.value = et.rectArea,
                    d.pointLights.value = et.point,
                    d.hemisphereLights.value = et.hemi,
                    d.directionalShadowMap.value = et.directionalShadowMap,
                    d.directionalShadowMatrix.value = et.directionalShadowMatrix,
                    d.spotShadowMap.value = et.spotShadowMap,
                    d.spotShadowMatrix.value = et.spotShadowMatrix,
                    d.pointShadowMap.value = et.pointShadowMap,
                    d.pointShadowMatrix.value = et.pointShadowMatrix);
                    var p = n.program.getUniforms()
                      , m = Y.seqWithValue(p.seq, d);
                    n.uniformsList = m
                }
                function A(e) {
                    e.side === ca ? pt.disable(ct.CULL_FACE) : pt.enable(ct.CULL_FACE),
                    pt.setFlipSided(e.side === la),
                    e.transparent === !0 ? pt.setBlending(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha, e.premultipliedAlpha) : pt.setBlending(ga),
                    pt.setDepthFunc(e.depthFunc),
                    pt.setDepthTest(e.depthTest),
                    pt.setDepthWrite(e.depthWrite),
                    pt.setColorWrite(e.colorWrite),
                    pt.setPolygonOffset(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
                }
                function b(e, t, r, n) {
                    _e = 0;
                    var i = mt.get(r);
                    if (He && (We || e !== xe)) {
                        var a = e === xe && r.id === Me;
                        Qe.setState(r.clippingPlanes, r.clipIntersection, r.clipShadows, e, i, a)
                    }
                    r.needsUpdate === !1 && (void 0 === i.program ? r.needsUpdate = !0 : r.fog && i.fog !== t ? r.needsUpdate = !0 : r.lights && i.lightsHash !== et.hash ? r.needsUpdate = !0 : void 0 === i.numClippingPlanes || i.numClippingPlanes === Qe.numPlanes && i.numIntersection === Qe.numIntersection || (r.needsUpdate = !0)),
                    r.needsUpdate && (x(r, t, n),
                    r.needsUpdate = !1);
                    var o = !1
                      , s = !1
                      , u = !1
                      , l = i.program
                      , c = l.getUniforms()
                      , h = i.__webglShader.uniforms;
                    if (l.id !== ge && (ct.useProgram(l.program),
                    ge = l.id,
                    o = !0,
                    s = !0,
                    u = !0),
                    r.id !== Me && (Me = r.id,
                    s = !0),
                    o || e !== xe) {
                        if (c.set(ct, e, "projectionMatrix"),
                        dt.logarithmicDepthBuffer && c.setValue(ct, "logDepthBufFC", 2 / (Math.log(e.far + 1) / Math.LN2)),
                        e !== xe && (xe = e,
                        s = !0,
                        u = !0),
                        r.isShaderMaterial || r.isMeshPhongMaterial || r.isMeshStandardMaterial || r.envMap) {
                            var f = c.map.cameraPosition;
                            void 0 !== f && f.setValue(ct, Ze.setFromMatrixPosition(e.matrixWorld))
                        }
                        (r.isMeshPhongMaterial || r.isMeshLambertMaterial || r.isMeshBasicMaterial || r.isMeshStandardMaterial || r.isShaderMaterial || r.skinning) && c.setValue(ct, "viewMatrix", e.matrixWorldInverse),
                        c.set(ct, me, "toneMappingExposure"),
                        c.set(ct, me, "toneMappingWhitePoint")
                    }
                    if (r.skinning) {
                        c.setOptional(ct, n, "bindMatrix"),
                        c.setOptional(ct, n, "bindMatrixInverse");
                        var d = n.skeleton;
                        d && (dt.floatVertexTextures && d.useVertexTexture ? (c.set(ct, d, "boneTexture"),
                        c.set(ct, d, "boneTextureWidth"),
                        c.set(ct, d, "boneTextureHeight")) : c.setOptional(ct, d, "boneMatrices"))
                    }
                    return s && (r.lights && P(h, u),
                    t && r.fog && N(h, t),
                    (r.isMeshBasicMaterial || r.isMeshLambertMaterial || r.isMeshPhongMaterial || r.isMeshStandardMaterial || r.isMeshDepthMaterial || r.isMeshNormalMaterial || r.isMeshCubeMaterial) && T(h, r),
                    r.isLineBasicMaterial ? E(h, r) : r.isLineDashedMaterial ? (E(h, r),
                    S(h, r)) : r.isPointsMaterial ? D(h, r) : r.isMeshCubeMaterial ? _(h, r) : r.isMeshLambertMaterial ? I(h, r) : r.isMeshToonMaterial ? C(h, r) : r.isMeshPhongMaterial ? L(h, r) : r.isMeshPhysicalMaterial ? j(h, r) : r.isMeshStandardMaterial ? O(h, r) : r.isMeshDepthMaterial ? r.displacementMap && (h.displacementMap.value = r.displacementMap,
                    h.displacementScale.value = r.displacementScale,
                    h.displacementBias.value = r.displacementBias) : r.isMeshNormalMaterial && R(h, r),
                    void 0 !== h.ltcMat && (h.ltcMat.value = THREE.UniformsLib.LTC_MAT_TEXTURE),
                    void 0 !== h.ltcMag && (h.ltcMag.value = THREE.UniformsLib.LTC_MAG_TEXTURE),
                    Y.upload(ct, i.uniformsList, h, me)),
                    c.set(ct, n, "modelViewMatrix"),
                    c.set(ct, n, "normalMatrix"),
                    c.setValue(ct, "modelMatrix", n.matrixWorld),
                    l
                }
                function T(e, t) {
                    e.opacity.value = t.opacity,
                    e.diffuse.value = t.color,
                    t.emissive && e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);
                    var r = Ie.SupportedMapNames
                      , n = Ie.SupportedMapSlotNames
                      , i = Ie.SupportedMapUVNames
                      , a = Ie.SupportedMapTexelNames;
                    if (!t.usedSlots || t.usedSlotsVersion != t.version) {
                        t.usedSlots = [];
                        for (var o = 0, s = r.length; o < s; o++) {
                            var u = r[o]
                              , l = n[o]
                              , c = t[l];
                            t.usedSlots.push({
                                index: o,
                                mapUniform: e[u],
                                uvUniform: e[i[o]],
                                texelUniform: e[a[o]]
                            })
                        }
                        t.usedSlotsVersion = t.version
                    }
                    for (var h = 0, f = t.usedSlots.length; h < f; h++) {
                        var d = t.usedSlots[h]
                          , o = d.index
                          , u = r[o]
                          , l = n[o]
                          , c = t[l];
                        if (c) {
                            if (d.mapUniform.value = c.texture,
                            c.texture) {
                                if (c.uvTransform) {
                                    var p = d.uvUniform.value;
                                    p.set(c.uvRepeat.x, c.uvRepeat.y, c.uvOffset.x, c.uvOffset.y)
                                }
                                c.texelTransform && (It = c.getFlattenedTexelTransform(It),
                                d.texelUniform.value.set(It.texelScale, It.texelOffset))
                            }
                        } else
                            t[u] && (e[u].value = t[u])
                    }
                    t.lightMap && (e.lightMap.value = t.lightMap,
                    e.lightMapIntensity.value = t.lightMapIntensity),
                    t.aoMap && (e.aoMapIntensity.value = t.aoMapIntensity);
                    var m;
                    if (t.map ? m = t.map : t.specularMap ? m = t.specularMap : t.displacementMap ? m = t.displacementMap : t.normalMap ? m = t.normalMap : t.bumpMap ? m = t.bumpMap : t.roughnessMap ? m = t.roughnessMap : t.metalnessMap ? m = t.metalnessMap : t.alphaMap ? m = t.alphaMap : t.emissiveMap && (m = t.emissiveMap),
                    void 0 !== m) {
                        m.isWebGLRenderTarget && (m = m.texture);
                        var g = m.offset
                          , v = m.repeat;
                        e.offsetRepeat.value.set(g.x, g.y, v.x, v.y)
                    }
                    e.envMap.value = t.envMap,
                    e.flipEnvMap.value = t.envMap && t.envMap.isCubeTexture ? -1 : 1,
                    e.reflectivity.value = t.reflectivity,
                    e.refractionRatio.value = t.refractionRatio
                }
                function _(e, t) {
                    e.roughness.value = t.roughness,
                    e.opacity.value = t.opacity,
                    e.envMapIntensity.value = t.envMapIntensity
                }
                function E(e, t) {
                    e.diffuse.value = t.color,
                    e.opacity.value = t.opacity
                }
                function S(e, t) {
                    e.dashSize.value = t.dashSize,
                    e.totalSize.value = t.dashSize + t.gapSize,
                    e.scale.value = t.scale
                }
                function D(e, t) {
                    if (e.diffuse.value = t.color,
                    e.opacity.value = t.opacity,
                    e.size.value = t.size * Ve,
                    e.scale.value = .5 * Ue,
                    e.map.value = t.map,
                    null !== t.map) {
                        var r = t.map.offset
                          , n = t.map.repeat;
                        e.offsetRepeat.value.set(r.x, r.y, n.x, n.y)
                    }
                }
                function N(e, t) {
                    e.fogColor.value = t.color,
                    t.isFog ? (e.fogNear.value = t.near,
                    e.fogFar.value = t.far) : t.isFogExp2 && (e.fogDensity.value = t.density)
                }
                function I(e, t) {
                    t.emissiveMap && (e.emissiveMap.value = t.emissiveMap)
                }
                function L(e, t) {
                    e.specular.value = t.specular,
                    e.shininess.value = Math.max(t.shininess, 1e-4),
                    t.emissiveMap && (e.emissiveMap.value = t.emissiveMap),
                    t.bumpMap && (e.bumpMap.value = t.bumpMap,
                    e.bumpScale.value = t.bumpScale),
                    t.normalMap && (e.normalMap.value = t.normalMap,
                    e.normalScale.value.copy(t.normalScale)),
                    t.displacementMap && (e.displacementMap.value = t.displacementMap,
                    e.displacementScale.value = t.displacementScale,
                    e.displacementBias.value = t.displacementBias)
                }
                function C(e, t) {
                    L(e, t),
                    t.gradientMap && (e.gradientMap.value = t.gradientMap)
                }
                function O(e, t) {
                    e.roughness.value = t.roughness,
                    e.metalness.value = t.metalness,
                    t.roughnessMap && (e.roughnessMap.value = t.roughnessMap),
                    t.metalnessMap && (e.metalnessMap.value = t.metalnessMap),
                    t.emissiveMap && (e.emissiveMap.value = t.emissiveMap),
                    t.bumpMap && (e.bumpMap.value = t.bumpMap,
                    e.bumpScale.value = t.bumpScale),
                    t.normalMap && (e.normalMap.value = t.normalMap,
                    e.normalScale.value.copy(t.normalScale)),
                    t.displacementMap && (e.displacementMap.value = t.displacementMap,
                    e.displacementScale.value = t.displacementScale,
                    e.displacementBias.value = t.displacementBias),
                    t.envMap && (e.envMapIntensity.value = t.envMapIntensity)
                }
                function j(e, t) {
                    e.falloffDiffuse.value = t.falloffColor,
                    t.falloffMap && (e.falloffMap.value = t.falloffMap),
                    e.falloffOpacity.value = t.falloffOpacity,
                    t.falloffAlphaMap && (e.falloffAlphaMap.value = t.falloffAlphaMap),
                    e.clearCoat.value = t.clearCoat,
                    e.clearCoatRoughness.value = t.clearCoatRoughness,
                    O(e, t)
                }
                function R(e, t) {
                    t.bumpMap && (e.bumpMap.value = t.bumpMap,
                    e.bumpScale.value = t.bumpScale),
                    t.normalMap && (e.normalMap.value = t.normalMap,
                    e.normalScale.value.copy(t.normalScale)),
                    t.displacementMap && (e.displacementMap.value = t.displacementMap,
                    e.displacementScale.value = t.displacementScale,
                    e.displacementBias.value = t.displacementBias)
                }
                function P(e, t) {
                    e.ambientLightColor.needsUpdate = t,
                    e.directionalLights.needsUpdate = t,
                    e.pointLights.needsUpdate = t,
                    e.spotLights.needsUpdate = t,
                    e.rectAreaLights.needsUpdate = t,
                    e.hemisphereLights.needsUpdate = t
                }
                function z(e) {
                    for (var t = 0, r = 0, n = e.length; r < n; r++) {
                        var i = e[r];
                        i.castShadow && (et.shadows[t++] = i)
                    }
                    et.shadows.length = t
                }
                function B(e, t) {
                    var r, n, i, a, o, s, u, c = 0, h = 0, f = 0, d = t.matrixWorldInverse, p = 0, m = 0, g = 0, v = 0, y = 0;
                    for (r = 0,
                    n = e.length; r < n; r++)
                        if (i = e[r],
                        a = i.color,
                        o = i.intensity,
                        s = i.distance,
                        u = i.shadow && i.shadow.map ? i.shadow.map.texture : null,
                        i.isAmbientLight)
                            c += a.r * o,
                            h += a.g * o,
                            f += a.b * o;
                        else if (i.isDirectionalLight) {
                            var M = Mt.get(i);
                            M.color.copy(i.color).multiplyScalar(i.intensity),
                            M.direction.setFromMatrixPosition(i.matrixWorld),
                            Ze.setFromMatrixPosition(i.target.matrixWorld),
                            M.direction.sub(Ze),
                            M.direction.transformDirection(d),
                            M.shadow = i.castShadow,
                            i.castShadow && (M.shadowBias = i.shadow.bias,
                            M.spreadAngle = i.shadow.spreadAngle,
                            M.shadowMapSize = i.shadow.mapSize,
                            M.shadowCameraParams = i.shadow.cameraParams),
                            et.directionalShadowMap[p] = u,
                            et.directionalShadowMatrix[p] = i.shadow.matrix,
                            et.directional[p++] = M
                        } else if (i.isSpotLight) {
                            var M = Mt.get(i);
                            M.position.setFromMatrixPosition(i.matrixWorld),
                            M.position.applyMatrix4(d),
                            M.color.copy(a).multiplyScalar(o),
                            M.distance = s,
                            M.direction.setFromMatrixPosition(i.matrixWorld),
                            Ze.setFromMatrixPosition(i.target.matrixWorld),
                            M.direction.sub(Ze),
                            M.direction.transformDirection(d),
                            M.coneCos = Math.cos(i.angle),
                            M.penumbraCos = Math.cos(i.angle * (1 - i.penumbra)),
                            M.decay = 0 === i.distance ? 0 : i.decay,
                            M.shadow = i.castShadow,
                            i.castShadow && (M.shadowBias = i.shadow.bias,
                            M.shadowRadius = i.shadow.radius,
                            M.shadowMapSize = i.shadow.mapSize,
                            M.shadowCameraParams = i.shadow.cameraParams),
                            et.spotShadowMap[g] = u,
                            et.spotShadowMatrix[g] = i.shadow.matrix,
                            et.spot[g++] = M
                        } else if (i.isRectAreaLight) {
                            var M = Mt.get(i);
                            M.color.copy(a).multiplyScalar(o / (i.width * i.height)),
                            M.position.setFromMatrixPosition(i.matrixWorld),
                            M.position.applyMatrix4(d),
                            Ke.identity(),
                            Je.copy(i.matrixWorld),
                            Je.premultiply(d),
                            Ke.extractRotation(Je),
                            M.halfWidth.set(.5 * i.width, 0, 0),
                            M.halfHeight.set(0, .5 * i.height, 0),
                            M.halfWidth.applyMatrix4(Ke),
                            M.halfHeight.applyMatrix4(Ke),
                            et.rectArea[v++] = M
                        } else if (i.isPointLight) {
                            var M = Mt.get(i);
                            M.position.setFromMatrixPosition(i.matrixWorld),
                            M.position.applyMatrix4(d),
                            M.color.copy(i.color).multiplyScalar(i.intensity),
                            M.distance = i.distance,
                            M.decay = 0 === i.distance ? 0 : i.decay,
                            M.shadow = i.castShadow,
                            i.castShadow && (M.shadowBias = i.shadow.bias,
                            M.shadowRadius = i.shadow.radius,
                            M.shadowMapSize = i.shadow.mapSize),
                            et.pointShadowMap[m] = u,
                            void 0 === et.pointShadowMatrix[m] && (et.pointShadowMatrix[m] = new l),
                            Ze.setFromMatrixPosition(i.matrixWorld).negate(),
                            et.pointShadowMatrix[m].identity().setPosition(Ze),
                            et.point[m++] = M
                        } else if (i.isHemisphereLight) {
                            var M = Mt.get(i);
                            M.direction.setFromMatrixPosition(i.matrixWorld),
                            M.direction.transformDirection(d),
                            M.direction.normalize(),
                            M.skyColor.copy(i.color).multiplyScalar(o),
                            M.groundColor.copy(i.groundColor).multiplyScalar(o),
                            et.hemi[y++] = M
                        }
                    et.ambient[0] = c,
                    et.ambient[1] = h,
                    et.ambient[2] = f,
                    et.directional.length = p,
                    et.spot.length = g,
                    et.rectArea.length = v,
                    et.point.length = m,
                    et.hemi.length = y,
                    et.hash = p + "," + m + "," + g + "," + v + "," + y + "," + et.shadows.length
                }
                function U() {
                    var e = _e;
                    return e >= dt.maxTextures && console.warn("WebGLRenderer: trying to use " + e + " texture units while this GPU supports only " + dt.maxTextures),
                    _e += 1,
                    e
                }
                function V(e) {
                    var t;
                    if (e === uo)
                        return ct.REPEAT;
                    if (e === lo)
                        return ct.CLAMP_TO_EDGE;
                    if (e === co)
                        return ct.MIRRORED_REPEAT;
                    if (e === ho)
                        return ct.NEAREST;
                    if (e === fo)
                        return ct.NEAREST_MIPMAP_NEAREST;
                    if (e === po)
                        return ct.NEAREST_MIPMAP_LINEAR;
                    if (e === mo)
                        return ct.LINEAR;
                    if (e === go)
                        return ct.LINEAR_MIPMAP_NEAREST;
                    if (e === vo)
                        return ct.LINEAR_MIPMAP_LINEAR;
                    if (e === yo)
                        return ct.UNSIGNED_BYTE;
                    if (e === Eo)
                        return ct.UNSIGNED_SHORT_4_4_4_4;
                    if (e === So)
                        return ct.UNSIGNED_SHORT_5_5_5_1;
                    if (e === Do)
                        return ct.UNSIGNED_SHORT_5_6_5;
                    if (e === Mo)
                        return ct.BYTE;
                    if (e === wo)
                        return ct.SHORT;
                    if (e === xo)
                        return ct.UNSIGNED_SHORT;
                    if (e === Ao)
                        return ct.INT;
                    if (e === bo)
                        return ct.UNSIGNED_INT;
                    if (e === To)
                        return ct.FLOAT;
                    if (e === _o && (t = ft.get("OES_texture_half_float"),
                    null !== t))
                        return t.HALF_FLOAT_OES;
                    if (e === Io)
                        return ct.ALPHA;
                    if (e === Lo)
                        return ct.RGB;
                    if (e === Co)
                        return ct.RGBA;
                    if (e === Oo)
                        return ct.LUMINANCE;
                    if (e === jo)
                        return ct.LUMINANCE_ALPHA;
                    if (e === Po)
                        return ct.DEPTH_COMPONENT;
                    if (e === zo)
                        return ct.DEPTH_STENCIL;
                    if (e === Aa)
                        return ct.FUNC_ADD;
                    if (e === ba)
                        return ct.FUNC_SUBTRACT;
                    if (e === Ta)
                        return ct.FUNC_REVERSE_SUBTRACT;
                    if (e === Sa)
                        return ct.ZERO;
                    if (e === Da)
                        return ct.ONE;
                    if (e === Na)
                        return ct.SRC_COLOR;
                    if (e === Ia)
                        return ct.ONE_MINUS_SRC_COLOR;
                    if (e === La)
                        return ct.SRC_ALPHA;
                    if (e === Ca)
                        return ct.ONE_MINUS_SRC_ALPHA;
                    if (e === Oa)
                        return ct.DST_ALPHA;
                    if (e === ja)
                        return ct.ONE_MINUS_DST_ALPHA;
                    if (e === Ra)
                        return ct.DST_COLOR;
                    if (e === Pa)
                        return ct.ONE_MINUS_DST_COLOR;
                    if (e === za)
                        return ct.SRC_ALPHA_SATURATE;
                    if ((e === Bo || e === Uo || e === Vo || e === ko) && (t = ft.get("WEBGL_compressed_texture_s3tc"),
                    null !== t)) {
                        if (e === Bo)
                            return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
                        if (e === Uo)
                            return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                        if (e === Vo)
                            return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                        if (e === ko)
                            return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
                    }
                    if ((e === Fo || e === Go || e === Yo || e === Qo) && (t = ft.get("WEBGL_compressed_texture_pvrtc"),
                    null !== t)) {
                        if (e === Fo)
                            return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                        if (e === Go)
                            return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                        if (e === Yo)
                            return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                        if (e === Qo)
                            return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                    }
                    if (e === Ho && (t = ft.get("WEBGL_compressed_texture_etc1"),
                    null !== t))
                        return t.COMPRESSED_RGB_ETC1_WEBGL;
                    if ((e === _a || e === Ea) && (t = ft.get("EXT_blend_minmax"),
                    null !== t)) {
                        if (e === _a)
                            return t.MIN_EXT;
                        if (e === Ea)
                            return t.MAX_EXT
                    }
                    return e === No && (t = ft.get("WEBGL_depth_texture"),
                    null !== t) ? t.UNSIGNED_INT_24_8_WEBGL : 0
                }
                console.log("THREE.WebGLRenderer", Zi),
                e = e || {};
                var k = void 0 !== e.canvas ? e.canvas : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")
                  , F = void 0 !== e.context ? e.context : null
                  , G = void 0 !== e.alpha && e.alpha
                  , H = void 0 === e.depth || e.depth
                  , W = void 0 === e.stencil || e.stencil
                  , Z = void 0 !== e.antialias && e.antialias
                  , K = void 0 === e.premultipliedAlpha || e.premultipliedAlpha
                  , $ = void 0 !== e.preserveDrawingBuffer && e.preserveDrawingBuffer
                  , te = []
                  , re = []
                  , ae = -1
                  , oe = []
                  , se = -1
                  , ue = new Float32Array(8)
                  , le = []
                  , ce = []
                  , he = null
                  , de = null
                  , pe = null;
                this.domElement = k,
                this.context = null,
                this.autoClear = !0,
                this.autoClearColor = !0,
                this.autoClearDepth = !0,
                this.autoClearStencil = !0,
                this.sortObjects = !0,
                this.clippingPlanes = [],
                this.localClippingEnabled = !1,
                this.gammaFactor = 2,
                this.gammaInput = !1,
                this.gammaOutput = !1,
                this.physicallyCorrectLights = !1,
                this.toneMapping = Za,
                this.toneMappingExposure = 1,
                this.toneMappingWhitePoint = 1,
                this.maxMorphTargets = 8,
                this.maxMorphNormals = 4,
                this.autoScaleCubemaps = !0,
                this.autoResizeTextures = !1;
                var me = this
                  , ge = null
                  , ve = null
                  , ye = null
                  , Me = -1
                  , we = ""
                  , xe = null
                  , Ae = new i
                  , be = null
                  , Te = new i
                  , _e = 0
                  , Le = new Q(0)
                  , ze = 0
                  , Be = k.width
                  , Ue = k.height
                  , Ve = 1
                  , ke = new i(0,0,Be,Ue)
                  , Fe = !1
                  , Ge = new i(0,0,Be,Ue)
                  , Ye = new ne
                  , Qe = new st
                  , He = !1
                  , We = !1
                  , Xe = new ee
                  , qe = new l
                  , Ze = new u
                  , Je = new l
                  , Ke = new l
                  , et = {
                    hash: "",
                    ambient: [0, 0, 0],
                    directional: [],
                    directionalShadowMap: [],
                    directionalShadowMatrix: [],
                    spot: [],
                    spotShadowMap: [],
                    spotShadowMatrix: [],
                    rectArea: [],
                    point: [],
                    pointShadowMap: [],
                    pointShadowMatrix: [],
                    hemi: [],
                    shadows: []
                }
                  , lt = {
                    calls: 0,
                    vertices: 0,
                    faces: 0,
                    points: 0
                };
                this.info = {
                    render: lt,
                    memory: {
                        geometries: 0,
                        textures: 0
                    },
                    programs: null
                };
                var ct;
                try {
                    var ht = {
                        alpha: G,
                        depth: H,
                        stencil: W,
                        antialias: Z,
                        premultipliedAlpha: K,
                        preserveDrawingBuffer: $
                    };
                    if (ct = F || k.getContext("webgl", ht) || k.getContext("experimental-webgl", ht),
                    null === ct)
                        throw null !== k.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
                    void 0 === ct.getShaderPrecisionFormat && (ct.getShaderPrecisionFormat = function() {
                        return {
                            rangeMin: 1,
                            rangeMax: 1,
                            precision: 1
                        }
                    }
                    ),
                    k.addEventListener("webglcontextlost", a, !1)
                } catch (e) {
                    console.error("THREE.WebGLRenderer: " + e)
                }
                var ft = new ot(ct);
                ft.get("WEBGL_depth_texture"),
                ft.get("OES_texture_float"),
                ft.get("OES_texture_float_linear"),
                ft.get("OES_texture_half_float"),
                ft.get("OES_texture_half_float_linear"),
                ft.get("OES_standard_derivatives"),
                ft.get("ANGLE_instanced_arrays"),
                ft.get("OES_element_index_uint") && (Ee.MaxIndex = 4294967296);
                var dt = new at(ct,ft,e)
                  , pt = new it(ct,ft,V)
                  , mt = new nt
                  , gt = new rt(ct,ft,pt,mt,dt,V,this.info)
                  , vt = new tt(ct,mt,this.info)
                  , yt = new $e(this,dt)
                  , Mt = new Pe;
                this.info.programs = yt.programs;
                var wt = new Re(ct,ft,lt)
                  , xt = new je(ct,ft,lt)
                  , At = new Oe(-1,1,1,-1,0,1)
                  , bt = new Ce
                  , Tt = new Se(new Ne(2,2),new fe({
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1
                }))
                  , _t = Ll.cube
                  , Et = new Se(new De(5,5,5),new J({
                    uniforms: _t.uniforms,
                    vertexShader: _t.vertexShader,
                    fragmentShader: _t.fragmentShader,
                    side: la,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1
                }));
                r(),
                this.context = ct,
                this.capabilities = dt,
                this.extensions = ft,
                this.properties = mt,
                this.state = pt;
                var St = new ie(this,et,vt,dt);
                this.shadowMap = St;
                var Dt = new q(this,le)
                  , Nt = new X(this,ce);
                this.getContext = function() {
                    return ct
                }
                ,
                this.getContextAttributes = function() {
                    return ct.getContextAttributes()
                }
                ,
                this.forceContextLoss = function() {
                    ft.get("WEBGL_lose_context").loseContext()
                }
                ,
                this.getMaxAnisotropy = function() {
                    return dt.getMaxAnisotropy()
                }
                ,
                this.getPrecision = function() {
                    return dt.precision
                }
                ,
                this.getPixelRatio = function() {
                    return Ve
                }
                ,
                this.setPixelRatio = function(e) {
                    void 0 !== e && (Ve = e,
                    this.setSize(Ge.z, Ge.w, !1))
                }
                ,
                this.getSize = function() {
                    return {
                        width: Be,
                        height: Ue
                    }
                }
                ,
                this.setSize = function(e, t, r) {
                    Be = e,
                    Ue = t,
                    k.width = e * Ve,
                    k.height = t * Ve,
                    r !== !1 && (k.style.width = e + "px",
                    k.style.height = t + "px"),
                    this.setViewport(0, 0, e, t)
                }
                ,
                this.setViewport = function(e, t, r, n) {
                    pt.viewport(Ge.set(e, t, r, n))
                }
                ,
                this.setScissor = function(e, t, r, n) {
                    pt.scissor(ke.set(e, t, r, n))
                }
                ,
                this.setScissorTest = function(e) {
                    pt.setScissorTest(Fe = e)
                }
                ,
                this.getClearColor = function() {
                    return Le
                }
                ,
                this.setClearColor = function(e, t) {
                    Le.set(e),
                    ze = void 0 !== t ? t : 1,
                    pt.buffers.color.setClear(Le.r, Le.g, Le.b, ze, K)
                }
                ,
                this.getClearAlpha = function() {
                    return ze
                }
                ,
                this.setClearAlpha = function(e) {
                    ze = e,
                    pt.buffers.color.setClear(Le.r, Le.g, Le.b, ze, K)
                }
                ,
                this.clear = function(e, t, r) {
                    var n = 0;
                    (void 0 === e || e) && (n |= ct.COLOR_BUFFER_BIT),
                    (void 0 === t || t) && (n |= ct.DEPTH_BUFFER_BIT),
                    (void 0 === r || r) && (n |= ct.STENCIL_BUFFER_BIT),
                    ct.clear(n)
                }
                ,
                this.clearColor = function() {
                    this.clear(!0, !1, !1)
                }
                ,
                this.clearDepth = function() {
                    this.clear(!1, !0, !1)
                }
                ,
                this.clearStencil = function() {
                    this.clear(!1, !1, !0)
                }
                ,
                this.clearTarget = function(e, t, r, n) {
                    this.setRenderTarget(e),
                    this.clear(t, r, n)
                }
                ,
                this.resetGLState = n,
                this.dispose = function() {
                    oe = [],
                    se = -1,
                    re = [],
                    ae = -1,
                    k.removeEventListener("webglcontextlost", a, !1)
                }
                ,
                this.renderBufferImmediate = function(e, t, r) {
                    pt.initAttributes();
                    var n = mt.get(e);
                    e.hasPositions && !n.position && (n.position = ct.createBuffer()),
                    e.hasNormals && !n.normal && (n.normal = ct.createBuffer()),
                    e.hasUvs && !n.uv && (n.uv = ct.createBuffer()),
                    e.hasColors && !n.color && (n.color = ct.createBuffer());
                    var i = t.getAttributes();
                    if (e.hasPositions && (ct.bindBuffer(ct.ARRAY_BUFFER, n.position),
                    ct.bufferData(ct.ARRAY_BUFFER, e.positionArray, ct.DYNAMIC_DRAW),
                    pt.enableAttribute(i.position),
                    ct.vertexAttribPointer(i.position, 3, ct.FLOAT, !1, 0, 0)),
                    e.hasNormals) {
                        if (ct.bindBuffer(ct.ARRAY_BUFFER, n.normal),
                        !r.isMeshPhongMaterial && !r.isMeshStandardMaterial && !r.isMeshNormalMaterial && r.shading === ha)
                            for (var a = 0, o = 3 * e.count; a < o; a += 9) {
                                var s = e.normalArray
                                  , u = (s[a + 0] + s[a + 3] + s[a + 6]) / 3
                                  , l = (s[a + 1] + s[a + 4] + s[a + 7]) / 3
                                  , c = (s[a + 2] + s[a + 5] + s[a + 8]) / 3;
                                s[a + 0] = u,
                                s[a + 1] = l,
                                s[a + 2] = c,
                                s[a + 3] = u,
                                s[a + 4] = l,
                                s[a + 5] = c,
                                s[a + 6] = u,
                                s[a + 7] = l,
                                s[a + 8] = c
                            }
                        ct.bufferData(ct.ARRAY_BUFFER, e.normalArray, ct.DYNAMIC_DRAW),
                        pt.enableAttribute(i.normal),
                        ct.vertexAttribPointer(i.normal, 3, ct.FLOAT, !1, 0, 0)
                    }
                    e.hasUvs && r.map && (ct.bindBuffer(ct.ARRAY_BUFFER, n.uv),
                    ct.bufferData(ct.ARRAY_BUFFER, e.uvArray, ct.DYNAMIC_DRAW),
                    pt.enableAttribute(i.uv),
                    ct.vertexAttribPointer(i.uv, 2, ct.FLOAT, !1, 0, 0)),
                    e.hasColors && r.vertexColors !== da && (ct.bindBuffer(ct.ARRAY_BUFFER, n.color),
                    ct.bufferData(ct.ARRAY_BUFFER, e.colorArray, ct.DYNAMIC_DRAW),
                    pt.enableAttribute(i.color),
                    ct.vertexAttribPointer(i.color, 3, ct.FLOAT, !1, 0, 0)),
                    pt.disableUnusedAttributes(),
                    ct.drawArrays(ct.TRIANGLES, 0, e.count),
                    e.count = 0
                }
                ,
                this.renderBufferDirect = function(e, r, n, i, a, o) {
                    A(i);
                    var s = b(e, r, i, a)
                      , u = !1
                      , l = n.id + "_" + s.id + "_" + i.wireframe;
                    l !== we && (we = l,
                    u = !0);
                    var c = a.morphTargetInfluences;
                    if (void 0 !== c) {
                        for (var d = [], p = 0, m = c.length; p < m; p++) {
                            var g = c[p];
                            d.push([g, p])
                        }
                        d.sort(f),
                        d.length > 8 && (d.length = 8);
                        for (var v = n.morphAttributes, p = 0, m = d.length; p < m; p++) {
                            var g = d[p];
                            if (ue[p] = g[0],
                            0 !== g[0]) {
                                var y = g[1];
                                i.morphTargets === !0 && v.position && n.addAttribute("morphTarget" + p, v.position[y]),
                                i.morphNormals === !0 && v.normal && n.addAttribute("morphNormal" + p, v.normal[y])
                            } else
                                i.morphTargets === !0 && n.removeAttribute("morphTarget" + p),
                                i.morphNormals === !0 && n.removeAttribute("morphNormal" + p)
                        }
                        for (var p = d.length, M = ue.length; p < M; p++)
                            ue[p] = 0;
                        s.getUniforms().setValue(ct, "morphTargetInfluences", ue),
                        u = !0
                    }
                    var y = n.index
                      , w = n.attributes.position
                      , x = 1;
                    i.wireframe === !0 && (y = vt.getWireframeAttribute(n),
                    x = 2);
                    var T;
                    null !== y ? (T = xt,
                    T.setIndex(y)) : T = wt,
                    u && (h(i, s, n),
                    null !== y && ct.bindBuffer(ct.ELEMENT_ARRAY_BUFFER, vt.getAttributeBuffer(y)));
                    var _ = 0;
                    null !== y ? _ = y.count : void 0 !== w && (_ = w.count);
                    var E = n.drawRange.start * x
                      , S = n.drawRange.count * x
                      , D = null !== o ? o.start * x : 0
                      , N = null !== o ? o.count * x : 1 / 0
                      , I = Math.max(E, D)
                      , L = Math.min(_, E + S, D + N) - 1
                      , C = Math.max(0, L - I + 1);
                    if (0 !== C) {
                        if (a.isMesh)
                            if (i.wireframe === !0)
                                pt.setLineWidth(i.wireframeLinewidth * t()),
                                T.setMode(ct.LINES);
                            else
                                switch (a.drawMode) {
                                case rs:
                                    T.setMode(ct.TRIANGLES);
                                    break;
                                case ns:
                                    T.setMode(ct.TRIANGLE_STRIP);
                                    break;
                                case is:
                                    T.setMode(ct.TRIANGLE_FAN)
                                }
                        else if (a.isLine) {
                            var O = i.linewidth;
                            void 0 === O && (O = 1),
                            pt.setLineWidth(O * t()),
                            a.isLineSegments ? T.setMode(ct.LINES) : T.setMode(ct.LINE_STRIP)
                        } else
                            a.isPoints && T.setMode(ct.POINTS);
                        n && n.isInstancedBufferGeometry ? n.maxInstancedCount > 0 && T.renderInstances(n, I, C) : T.render(I, C)
                    }
                }
                ,
                this.renderOverride = function(e, t, r, n, i) {
                    t.overrideMaterial = e,
                    this.render(t, r, n, i),
                    t.overrideMaterial = null
                }
                ,
                this.renderPass = function(e, t, r) {
                    null === he && (de = new Oe(-1,1,1,-1,0,1),
                    pe = new Se(new Ne(2,2),null),
                    he = new ut,
                    he.add(pe)),
                    pe.material = e,
                    this.render(he, de, t, r),
                    pe.material = null
                }
                ,
                this.render = function(e, t, r, n) {
                    if (void 0 !== t && t.isCamera !== !0)
                        return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
                    we = "",
                    Me = -1,
                    xe = null,
                    e.autoUpdate === !0 && e.updateMatrixWorld(),
                    null === t.parent && t.updateMatrixWorld(),
                    t.matrixWorldInverse.getInverse(t.matrixWorld),
                    qe.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
                    Ye.setFromMatrix(qe),
                    te.length = 0,
                    ae = -1,
                    se = -1,
                    le.length = 0,
                    ce.length = 0,
                    We = this.localClippingEnabled,
                    He = Qe.init(this.clippingPlanes, We, t),
                    M(e, t),
                    re.length = ae + 1,
                    oe.length = se + 1,
                    me.sortObjects === !0 && (re.sort(d),
                    oe.sort(p)),
                    He && Qe.beginShadows(),
                    z(te),
                    St.render(e, t),
                    B(te, t),
                    He && Qe.endShadows(),
                    lt.calls = 0,
                    lt.vertices = 0,
                    lt.faces = 0,
                    lt.points = 0,
                    void 0 === r && (r = null),
                    this.setRenderTarget(r);
                    var i = e.background;
                    if (i = null,
                    null === i ? pt.buffers.color.setClear(Le.r, Le.g, Le.b, ze, K) : i && i.isColor && (pt.buffers.color.setClear(i.r, i.g, i.b, 1, K),
                    n = !0),
                    (this.autoClear || n) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil),
                    i && i.isCubeTexture ? (bt.projectionMatrix.copy(t.projectionMatrix),
                    bt.matrixWorld.extractRotation(t.matrixWorld),
                    bt.matrixWorldInverse.getInverse(bt.matrixWorld),
                    Et.material.uniforms.tCube.value = i,
                    Et.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse, Et.matrixWorld),
                    vt.update(Et),
                    me.renderBufferDirect(bt, null, Et.geometry, Et.material, Et, null)) : i && i.isTexture && (Tt.material.map = i,
                    vt.update(Tt),
                    me.renderBufferDirect(At, null, Tt.geometry, Tt.material, Tt, null)),
                    e.overrideMaterial) {
                        var a = e.overrideMaterial;
                        w(re, e, t, a),
                        w(oe, e, t, a)
                    } else
                        pt.setBlending(ga),
                        w(re, e, t),
                        w(oe, e, t);
                    Dt.render(e, t),
                    Nt.render(e, t, Te),
                    r && gt.updateRenderTargetMipmap(r),
                    pt.setDepthTest(!0),
                    pt.setDepthWrite(!0),
                    pt.setColorWrite(!0)
                }
                ;
                var It = {
                    texelScale: 0,
                    texelOffset: 0
                };
                this.setFaceCulling = function(e, t) {
                    pt.setCullFace(e),
                    pt.setFlipSided(t === ra)
                }
                ,
                this.allocTextureUnit = U,
                this.setTexture2D = function() {
                    var e = !1;
                    return function(t, r) {
                        t && t.isWebGLRenderTarget && (e || (console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.", t),
                        e = !0),
                        t = t.texture),
                        gt.setTexture2D(t, r)
                    }
                }(),
                this.setTexture = function() {
                    var e = !1;
                    return function(t, r) {
                        e || (console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),
                        e = !0),
                        gt.setTexture2D(t, r)
                    }
                }(),
                this.setTextureCube = function() {
                    var e = !1;
                    return function(t, r) {
                        t && t.isWebGLRenderTargetCube && (e || (console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.", t),
                        e = !0),
                        t = t.texture),
                        t && t.isCubeTexture || Array.isArray(t.image) && 6 === t.image.length ? gt.setTextureCube(t, r) : gt.setTextureCubeDynamic(t, r)
                    }
                }(),
                this.getCurrentRenderTarget = function() {
                    return ve
                }
                ,
                this.setRenderTarget = function(e) {
                    ve = e,
                    e && void 0 === mt.get(e).__webglFramebuffer && gt.setupRenderTarget(e);
                    var t, r = e && e.isWebGLRenderTargetCube;
                    if (e) {
                        var n = mt.get(e);
                        t = r ? n.__webglFramebuffer[e.activeCubeFace] : n.__webglFramebuffer,
                        Ae.copy(e.scissor),
                        be = e.scissorTest,
                        Te.copy(e.viewport)
                    } else
                        t = null,
                        Ae.copy(ke).multiplyScalar(Ve),
                        be = Fe,
                        Te.copy(Ge).multiplyScalar(Ve);
                    if (ye !== t && (ct.bindFramebuffer(ct.FRAMEBUFFER, t),
                    ye = t),
                    pt.scissor(Ae),
                    pt.setScissorTest(be),
                    pt.viewport(Te),
                    r) {
                        var i = mt.get(e.texture);
                        ct.framebufferTexture2D(ct.FRAMEBUFFER, ct.COLOR_ATTACHMENT0, ct.TEXTURE_CUBE_MAP_POSITIVE_X + e.activeCubeFace, i.__webglTexture, e.activeMipMapLevel)
                    }
                }
                ,
                this.readRenderTargetPixels = function(e, t, r, n, i, a) {
                    if ((e && e.isWebGLRenderTarget) === !1)
                        return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
                    var o = mt.get(e).__webglFramebuffer;
                    if (o) {
                        var s = !1;
                        o !== ye && (ct.bindFramebuffer(ct.FRAMEBUFFER, o),
                        s = !0);
                        try {
                            var u = e.texture
                              , l = u.format
                              , c = u.type;
                            if (l !== Co && V(l) !== ct.getParameter(ct.IMPLEMENTATION_COLOR_READ_FORMAT))
                                return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                            if (!(c === yo || V(c) === ct.getParameter(ct.IMPLEMENTATION_COLOR_READ_TYPE) || c === To && (ft.get("OES_texture_float") || ft.get("WEBGL_color_buffer_float")) || c === _o && ft.get("EXT_color_buffer_half_float")))
                                return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                            ct.checkFramebufferStatus(ct.FRAMEBUFFER) === ct.FRAMEBUFFER_COMPLETE ? t >= 0 && t <= e.width - n && r >= 0 && r <= e.height - i && ct.readPixels(t, r, n, i, V(l), V(c), a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")
                        } finally {
                            s && ct.bindFramebuffer(ct.FRAMEBUFFER, ye)
                        }
                    }
                }
            }
            function ct(e, t) {
                this.name = "",
                this.color = new Q(e),
                this.density = void 0 !== t ? t : 25e-5
            }
            function ht(e, t, r) {
                this.name = "",
                this.color = new Q(e),
                this.near = void 0 !== t ? t : 1,
                this.far = void 0 !== r ? r : 1e3
            }
            function ft(e, t, r, n, i) {
                ue.call(this),
                this.lensFlares = [],
                this.positionScreen = new u,
                this.customUpdateCallback = void 0,
                void 0 !== e && this.add(e, t, r, n, i)
            }
            function dt(e) {
                Z.call(this),
                this.type = "SpriteMaterial",
                this.color = new Q(16777215),
                this.map = null,
                this.rotation = 0,
                this.fog = !1,
                this.lights = !1,
                this.setValues(e)
            }
            function pt(e) {
                ue.call(this),
                this.type = "Sprite",
                this.material = void 0 !== e ? e : new dt
            }
            function mt() {
                ue.call(this),
                this.type = "LOD",
                Object.defineProperties(this, {
                    levels: {
                        enumerable: !0,
                        value: []
                    }
                })
            }
            function gt(e, t, r) {
                if (this.useVertexTexture = void 0 === r || r,
                this.identityMatrix = new l,
                e = e || [],
                this.bones = e.slice(0),
                this.useVertexTexture) {
                    var n = Math.sqrt(4 * this.bones.length);
                    n = ms.nextPowerOfTwo(Math.ceil(n)),
                    n = Math.max(n, 4),
                    this.boneTextureWidth = n,
                    this.boneTextureHeight = n,
                    this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4),
                    this.boneTexture = new H(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Co,To)
                } else
                    this.boneMatrices = new Float32Array(16 * this.bones.length);
                if (void 0 === t)
                    this.calculateInverses();
                else if (this.bones.length === t.length)
                    this.boneInverses = t.slice(0);
                else {
                    console.warn("THREE.Skeleton bonInverses is the wrong length."),
                    this.boneInverses = [];
                    for (var i = 0, a = this.bones.length; i < a; i++)
                        this.boneInverses.push(new l)
                }
            }
            function vt() {
                ue.call(this),
                this.type = "Bone"
            }
            function yt(e, t, r) {
                Se.call(this, e, t),
                this.type = "SkinnedMesh",
                this.bindMode = "attached",
                this.bindMatrix = new l,
                this.bindMatrixInverse = new l;
                var n = [];
                if (this.geometry && void 0 !== this.geometry.bones) {
                    for (var i, a, o = 0, s = this.geometry.bones.length; o < s; ++o)
                        a = this.geometry.bones[o],
                        i = new vt,
                        n.push(i),
                        i.name = a.name,
                        i.position.fromArray(a.pos),
                        i.quaternion.fromArray(a.rotq),
                        void 0 !== a.scl && i.scale.fromArray(a.scl);
                    for (var o = 0, s = this.geometry.bones.length; o < s; ++o)
                        a = this.geometry.bones[o],
                        a.parent !== -1 && null !== a.parent && void 0 !== n[a.parent] ? n[a.parent].add(n[o]) : this.add(n[o])
                }
                this.normalizeSkinWeights(),
                this.updateMatrixWorld(!0),
                this.bind(new gt(n,void 0,r), this.matrixWorld)
            }
            function Mt(e) {
                Z.call(this),
                this.type = "LineBasicMaterial",
                this.color = new Q(16777215),
                this.linewidth = 1,
                this.linecap = "round",
                this.linejoin = "round",
                this.lights = !1,
                this.setValues(e)
            }
            function wt(e, t, r) {
                return 1 === r ? (console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),
                new xt(e,t)) : (ue.call(this),
                this.type = "Line",
                this.geometry = void 0 !== e ? e : new Ee,
                void (this.material = void 0 !== t ? t : new Mt({
                    color: 16777215 * Math.random()
                })))
            }
            function xt(e, t) {
                wt.call(this, e, t),
                this.type = "LineSegments"
            }
            function At(e) {
                Z.call(this),
                this.type = "PointsMaterial",
                this.color = new Q(16777215),
                this.map = null,
                this.size = 1,
                this.sizeAttenuation = !0,
                this.lights = !1,
                this.setValues(e)
            }
            function bt(e, t) {
                ue.call(this),
                this.type = "Points",
                this.geometry = void 0 !== e ? e : new Ee,
                this.material = void 0 !== t ? t : new At({
                    color: 16777215 * Math.random()
                })
            }
            function Tt() {
                ue.call(this),
                this.type = "Group"
            }
            function _t(e, t, r, i, a, o, s, u, l) {
                function c() {
                    requestAnimationFrame(c),
                    e.readyState >= e.HAVE_CURRENT_DATA && (h.needsUpdate = !0)
                }
                n.call(this, e, t, r, i, a, o, s, u, l),
                this.generateMipmaps = !1;
                var h = this;
                c()
            }
            function Et(e, t, r, i, a, o, s, u, l, c, h, f) {
                n.call(this, null, o, s, u, l, c, i, a, h, f),
                this.image = {
                    width: t,
                    height: r
                },
                this.mipmaps = e,
                this.flipY = !1,
                this.generateMipmaps = !1
            }
            function St(e, t, r, i, a, o, s, u, l) {
                n.call(this, e, t, r, i, a, o, s, u, l),
                this.needsUpdate = !0
            }
            function Dt(e, t, r, i, a, o, s, u, l, c) {
                if (c = void 0 !== c ? c : Po,
                c !== Po && c !== zo)
                    throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
                void 0 === r && c === Po && (r = xo),
                void 0 === r && c === zo && (r = No),
                n.call(this, null, i, a, o, s, u, c, r, l),
                this.image = {
                    width: e,
                    height: t
                },
                this.magFilter = void 0 !== s ? s : ho,
                this.minFilter = void 0 !== u ? u : ho,
                this.flipY = !1,
                this.generateMipmaps = !1
            }
            function Nt(e) {
                function t(e, t) {
                    return e - t
                }
                Ee.call(this);
                var r = [0, 0]
                  , n = {}
                  , i = ["a", "b", "c"];
                if (e && e.isGeometry) {
                    for (var a = e.vertices, o = e.faces, s = 0, u = new Uint32Array(6 * o.length), l = 0, c = o.length; l < c; l++)
                        for (var h = o[l], f = 0; f < 3; f++) {
                            r[0] = h[i[f]],
                            r[1] = h[i[(f + 1) % 3]],
                            r.sort(t);
                            var d = r.toString();
                            void 0 === n[d] && (u[2 * s] = r[0],
                            u[2 * s + 1] = r[1],
                            n[d] = !0,
                            s++)
                        }
                    for (var p = new Float32Array(2 * s * 3), l = 0, c = s; l < c; l++)
                        for (var f = 0; f < 2; f++) {
                            var m = a[u[2 * l + f]]
                              , g = 6 * l + 3 * f;
                            p[g + 0] = m.x,
                            p[g + 1] = m.y,
                            p[g + 2] = m.z
                        }
                    this.addAttribute("position", new de(p,3))
                } else if (e && e.isBufferGeometry)
                    if (null !== e.index) {
                        var v = e.index.array
                          , a = e.attributes.position
                          , y = e.groups
                          , s = 0;
                        0 === y.length && e.addGroup(0, v.length);
                        for (var u = new Uint32Array(2 * v.length), M = 0, w = y.length; M < w; ++M)
                            for (var x = y[M], A = x.start, b = x.count, l = A, T = A + b; l < T; l += 3)
                                for (var f = 0; f < 3; f++) {
                                    r[0] = v[l + f],
                                    r[1] = v[l + (f + 1) % 3],
                                    r.sort(t);
                                    var d = r.toString();
                                    void 0 === n[d] && (u[2 * s] = r[0],
                                    u[2 * s + 1] = r[1],
                                    n[d] = !0,
                                    s++)
                                }
                        for (var p = new Float32Array(2 * s * 3), l = 0, c = s; l < c; l++)
                            for (var f = 0; f < 2; f++) {
                                var g = 6 * l + 3 * f
                                  , _ = u[2 * l + f];
                                p[g + 0] = a.getX(_),
                                p[g + 1] = a.getY(_),
                                p[g + 2] = a.getZ(_)
                            }
                        this.addAttribute("position", new de(p,3))
                    } else {
                        for (var a = e.attributes.position.array, s = a.length / 3, E = s / 3, p = new Float32Array(2 * s * 3), l = 0, c = E; l < c; l++)
                            for (var f = 0; f < 3; f++) {
                                var g = 18 * l + 6 * f
                                  , S = 9 * l + 3 * f;
                                p[g + 0] = a[S],
                                p[g + 1] = a[S + 1],
                                p[g + 2] = a[S + 2];
                                var _ = 9 * l + 3 * ((f + 1) % 3);
                                p[g + 3] = a[_],
                                p[g + 4] = a[_ + 1],
                                p[g + 5] = a[_ + 2]
                            }
                        this.addAttribute("position", new de(p,3))
                    }
            }
            function It(e, t, r) {
                Ee.call(this),
                this.type = "ParametricBufferGeometry",
                this.parameters = {
                    func: e,
                    slices: t,
                    stacks: r
                };
                var n, i, a, o, s, u = [], l = [], c = t + 1;
                for (n = 0; n <= r; n++)
                    for (s = n / r,
                    i = 0; i <= t; i++)
                        o = i / t,
                        a = e(o, s),
                        u.push(a.x, a.y, a.z),
                        l.push(o, s);
                var h, f, d, p, m = [];
                for (n = 0; n < r; n++)
                    for (i = 0; i < t; i++)
                        h = n * c + i,
                        f = n * c + i + 1,
                        d = (n + 1) * c + i + 1,
                        p = (n + 1) * c + i,
                        m.push(h, f, p),
                        m.push(f, d, p);
                this.setIndex(new (m.length > 65535 ? we : ye)(m,1)),
                this.addAttribute("position", new xe(u,3)),
                this.addAttribute("uv", new xe(l,2)),
                this.computeVertexNormals()
            }
            function Lt(e, t, r) {
                _e.call(this),
                this.type = "ParametricGeometry",
                this.parameters = {
                    func: e,
                    slices: t,
                    stacks: r
                },
                this.fromBufferGeometry(new It(e,t,r)),
                this.mergeVertices()
            }
            function Ct(e, t, n, i) {
                function a(e) {
                    for (var r = new u, n = new u, i = new u, a = 0; a < t.length; a += 3)
                        f(t[a + 0], r),
                        f(t[a + 1], n),
                        f(t[a + 2], i),
                        o(r, n, i, e)
                }
                function o(e, t, r, n) {
                    var i, a, o = Math.pow(2, n), s = [];
                    for (i = 0; i <= o; i++) {
                        s[i] = [];
                        var u = e.clone().lerp(r, i / o)
                          , l = t.clone().lerp(r, i / o)
                          , c = o - i;
                        for (a = 0; a <= c; a++)
                            0 === a && i === o ? s[i][a] = u : s[i][a] = u.clone().lerp(l, a / c)
                    }
                    for (i = 0; i < o; i++)
                        for (a = 0; a < 2 * (o - i) - 1; a++) {
                            var f = Math.floor(a / 2);
                            a % 2 === 0 ? (h(s[i][f + 1]),
                            h(s[i + 1][f]),
                            h(s[i][f])) : (h(s[i][f + 1]),
                            h(s[i + 1][f + 1]),
                            h(s[i + 1][f]))
                        }
                }
                function s(e) {
                    for (var t = new u, r = 0; r < v.length; r += 3)
                        t.x = v[r + 0],
                        t.y = v[r + 1],
                        t.z = v[r + 2],
                        t.normalize().multiplyScalar(e),
                        v[r + 0] = t.x,
                        v[r + 1] = t.y,
                        v[r + 2] = t.z
                }
                function l() {
                    for (var e = new u, t = 0; t < v.length; t += 3) {
                        e.x = v[t + 0],
                        e.y = v[t + 1],
                        e.z = v[t + 2];
                        var r = m(e) / 2 / Math.PI + .5
                          , n = g(e) / Math.PI + .5;
                        y.push(r, 1 - n)
                    }
                    d(),
                    c()
                }
                function c() {
                    for (var e = 0; e < y.length; e += 6) {
                        var t = y[e + 0]
                          , r = y[e + 2]
                          , n = y[e + 4]
                          , i = Math.max(t, r, n)
                          , a = Math.min(t, r, n);
                        i > .9 && a < .1 && (t < .2 && (y[e + 0] += 1),
                        r < .2 && (y[e + 2] += 1),
                        n < .2 && (y[e + 4] += 1))
                    }
                }
                function h(e) {
                    v.push(e.x, e.y, e.z)
                }
                function f(t, r) {
                    var n = 3 * t;
                    r.x = e[n + 0],
                    r.y = e[n + 1],
                    r.z = e[n + 2]
                }
                function d() {
                    for (var e = new u, t = new u, n = new u, i = new u, a = new r, o = new r, s = new r, l = 0, c = 0; l < v.length; l += 9,
                    c += 6) {
                        e.set(v[l + 0], v[l + 1], v[l + 2]),
                        t.set(v[l + 3], v[l + 4], v[l + 5]),
                        n.set(v[l + 6], v[l + 7], v[l + 8]),
                        a.set(y[c + 0], y[c + 1]),
                        o.set(y[c + 2], y[c + 3]),
                        s.set(y[c + 4], y[c + 5]),
                        i.copy(e).add(t).add(n).divideScalar(3);
                        var h = m(i);
                        p(a, c + 0, e, h),
                        p(o, c + 2, t, h),
                        p(s, c + 4, n, h)
                    }
                }
                function p(e, t, r, n) {
                    n < 0 && 1 === e.x && (y[t] = e.x - 1),
                    0 === r.x && 0 === r.z && (y[t] = n / 2 / Math.PI + .5)
                }
                function m(e) {
                    return Math.atan2(e.z, -e.x)
                }
                function g(e) {
                    return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z))
                }
                Ee.call(this),
                this.type = "PolyhedronBufferGeometry",
                this.parameters = {
                    vertices: e,
                    indices: t,
                    radius: n,
                    detail: i
                },
                n = n || 1,
                i = i || 0;
                var v = []
                  , y = [];
                a(i),
                s(n),
                l(),
                this.addAttribute("position", new xe(v,3)),
                this.addAttribute("normal", new xe(v.slice(),3)),
                this.addAttribute("uv", new xe(y,2)),
                this.normalizeNormals(),
                this.boundingSphere = new ee(new u,n)
            }
            function Ot(e, t) {
                var r = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1]
                  , n = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
                Ct.call(this, r, n, e, t),
                this.type = "TetrahedronBufferGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                }
            }
            function jt(e, t) {
                _e.call(this),
                this.type = "TetrahedronGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                },
                this.fromBufferGeometry(new Ot(e,t)),
                this.mergeVertices()
            }
            function Rt(e, t) {
                var r = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1]
                  , n = [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2];
                Ct.call(this, r, n, e, t),
                this.type = "OctahedronBufferGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                }
            }
            function Pt(e, t) {
                _e.call(this),
                this.type = "OctahedronGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                },
                this.fromBufferGeometry(new Rt(e,t)),
                this.mergeVertices()
            }
            function zt(e, t) {
                var r = (1 + Math.sqrt(5)) / 2
                  , n = [-1, r, 0, 1, r, 0, -1, -r, 0, 1, -r, 0, 0, -1, r, 0, 1, r, 0, -1, -r, 0, 1, -r, r, 0, -1, r, 0, 1, -r, 0, -1, -r, 0, 1]
                  , i = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
                Ct.call(this, n, i, e, t),
                this.type = "IcosahedronBufferGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                }
            }
            function Bt(e, t) {
                _e.call(this),
                this.type = "IcosahedronGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                },
                this.fromBufferGeometry(new zt(e,t)),
                this.mergeVertices()
            }
            function Ut(e, t) {
                var r = (1 + Math.sqrt(5)) / 2
                  , n = 1 / r
                  , i = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -n, -r, 0, -n, r, 0, n, -r, 0, n, r, -n, -r, 0, -n, r, 0, n, -r, 0, n, r, 0, -r, 0, -n, r, 0, -n, -r, 0, n, r, 0, n]
                  , a = [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9];
                Ct.call(this, i, a, e, t),
                this.type = "DodecahedronBufferGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                }
            }
            function Vt(e, t) {
                _e.call(this),
                this.type = "DodecahedronGeometry",
                this.parameters = {
                    radius: e,
                    detail: t
                },
                this.fromBufferGeometry(new Ut(e,t)),
                this.mergeVertices()
            }
            function kt(e, t, r, n) {
                _e.call(this),
                this.type = "PolyhedronGeometry",
                this.parameters = {
                    vertices: e,
                    indices: t,
                    radius: r,
                    detail: n
                },
                this.fromBufferGeometry(new Ct(e,t,r,n)),
                this.mergeVertices()
            }
            function Ft(e, t, n, i, a) {
                function o() {
                    for (f = 0; f < t; f++)
                        s(f);
                    s(a === !1 ? t : 0),
                    c(),
                    l()
                }
                function s(r) {
                    var a = e.getPointAt(r / t)
                      , o = h.normals[r]
                      , s = h.binormals[r];
                    for (d = 0; d <= i; d++) {
                        var u = d / i * Math.PI * 2
                          , l = Math.sin(u)
                          , c = -Math.cos(u);
                        m.x = c * o.x + l * s.x,
                        m.y = c * o.y + l * s.y,
                        m.z = c * o.z + l * s.z,
                        m.normalize(),
                        y.push(m.x, m.y, m.z),
                        p.x = a.x + n * m.x,
                        p.y = a.y + n * m.y,
                        p.z = a.z + n * m.z,
                        v.push(p.x, p.y, p.z)
                    }
                }
                function l() {
                    for (d = 1; d <= t; d++)
                        for (f = 1; f <= i; f++) {
                            var e = (i + 1) * (d - 1) + (f - 1)
                              , r = (i + 1) * d + (f - 1)
                              , n = (i + 1) * d + f
                              , a = (i + 1) * (d - 1) + f;
                            w.push(e, r, a),
                            w.push(r, n, a)
                        }
                }
                function c() {
                    for (f = 0; f <= t; f++)
                        for (d = 0; d <= i; d++)
                            g.x = f / t,
                            g.y = d / i,
                            M.push(g.x, g.y)
                }
                Ee.call(this),
                this.type = "TubeBufferGeometry",
                this.parameters = {
                    path: e,
                    tubularSegments: t,
                    radius: n,
                    radialSegments: i,
                    closed: a
                },
                t = t || 64,
                n = n || 1,
                i = i || 8,
                a = a || !1;
                var h = e.computeFrenetFrames(t, a);
                this.tangents = h.tangents,
                this.normals = h.normals,
                this.binormals = h.binormals;
                var f, d, p = new u, m = new u, g = new r, v = [], y = [], M = [], w = [];
                o(),
                this.setIndex(new (w.length > 65535 ? we : ye)(w,1)),
                this.addAttribute("position", new xe(v,3)),
                this.addAttribute("normal", new xe(y,3)),
                this.addAttribute("uv", new xe(M,2))
            }
            function Gt(e, t, r, n, i, a) {
                _e.call(this),
                this.type = "TubeGeometry",
                this.parameters = {
                    path: e,
                    tubularSegments: t,
                    radius: r,
                    radialSegments: n,
                    closed: i
                },
                void 0 !== a && console.warn("THREE.TubeGeometry: taper has been removed.");
                var o = new Ft(e,t,r,n,i);
                this.tangents = o.tangents,
                this.normals = o.normals,
                this.binormals = o.binormals,
                this.fromBufferGeometry(o),
                this.mergeVertices()
            }
            function Yt(e, t, n, i, a, o) {
                function s(e, t, r, n, i) {
                    var a = Math.cos(e)
                      , o = Math.sin(e)
                      , s = r / t * e
                      , u = Math.cos(s);
                    i.x = n * (2 + u) * .5 * a,
                    i.y = n * (2 + u) * o * .5,
                    i.z = n * Math.sin(s) * .5
                }
                Ee.call(this),
                this.type = "TorusKnotBufferGeometry",
                this.parameters = {
                    radius: e,
                    tube: t,
                    tubularSegments: n,
                    radialSegments: i,
                    p: a,
                    q: o
                },
                e = e || 100,
                t = t || 40,
                n = Math.floor(n) || 64,
                i = Math.floor(i) || 8,
                a = a || 2,
                o = o || 3;
                var l, c, h = (i + 1) * (n + 1), f = i * n * 2 * 3, d = new de(new (f > 65535 ? Uint32Array : Uint16Array)(f),1), p = new de(new Float32Array(3 * h),3), m = new de(new Float32Array(3 * h),3), g = new de(new Float32Array(2 * h),2), v = 0, y = 0, M = new u, w = new u, x = new r, A = new u, b = new u, T = new u, _ = new u, E = new u;
                for (l = 0; l <= n; ++l) {
                    var S = l / n * a * Math.PI * 2;
                    for (s(S, a, o, e, A),
                    s(S + .01, a, o, e, b),
                    _.subVectors(b, A),
                    E.addVectors(b, A),
                    T.crossVectors(_, E),
                    E.crossVectors(T, _),
                    T.normalize(),
                    E.normalize(),
                    c = 0; c <= i; ++c) {
                        var D = c / i * Math.PI * 2
                          , N = -t * Math.cos(D)
                          , I = t * Math.sin(D);
                        M.x = A.x + (N * E.x + I * T.x),
                        M.y = A.y + (N * E.y + I * T.y),
                        M.z = A.z + (N * E.z + I * T.z),
                        p.setXYZ(v, M.x, M.y, M.z),
                        w.subVectors(M, A).normalize(),
                        m.setXYZ(v, w.x, w.y, w.z),
                        x.x = l / n,
                        x.y = c / i,
                        g.setXY(v, x.x, x.y),
                        v++
                    }
                }
                for (c = 1; c <= n; c++)
                    for (l = 1; l <= i; l++) {
                        var L = (i + 1) * (c - 1) + (l - 1)
                          , C = (i + 1) * c + (l - 1)
                          , O = (i + 1) * c + l
                          , j = (i + 1) * (c - 1) + l;
                        d.setX(y, L),
                        y++,
                        d.setX(y, C),
                        y++,
                        d.setX(y, j),
                        y++,
                        d.setX(y, C),
                        y++,
                        d.setX(y, O),
                        y++,
                        d.setX(y, j),
                        y++
                    }
                this.setIndex(d),
                this.addAttribute("position", p),
                this.addAttribute("normal", m),
                this.addAttribute("uv", g)
            }
            function Qt(e, t, r, n, i, a, o) {
                _e.call(this),
                this.type = "TorusKnotGeometry",
                this.parameters = {
                    radius: e,
                    tube: t,
                    tubularSegments: r,
                    radialSegments: n,
                    p: i,
                    q: a
                },
                void 0 !== o && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),
                this.fromBufferGeometry(new Yt(e,t,r,n,i,a)),
                this.mergeVertices()
            }
            function Ht(e, t, r, n, i) {
                Ee.call(this),
                this.type = "TorusBufferGeometry",
                this.parameters = {
                    radius: e,
                    tube: t,
                    radialSegments: r,
                    tubularSegments: n,
                    arc: i
                },
                e = e || 100,
                t = t || 40,
                r = Math.floor(r) || 8,
                n = Math.floor(n) || 6,
                i = i || 2 * Math.PI;
                var a, o, s = (r + 1) * (n + 1), l = r * n * 2 * 3, c = new (l > 65535 ? Uint32Array : Uint16Array)(l), h = new Float32Array(3 * s), f = new Float32Array(3 * s), d = new Float32Array(2 * s), p = 0, m = 0, g = 0, v = new u, y = new u, M = new u;
                for (a = 0; a <= r; a++)
                    for (o = 0; o <= n; o++) {
                        var w = o / n * i
                          , x = a / r * Math.PI * 2;
                        y.x = (e + t * Math.cos(x)) * Math.cos(w),
                        y.y = (e + t * Math.cos(x)) * Math.sin(w),
                        y.z = t * Math.sin(x),
                        h[p] = y.x,
                        h[p + 1] = y.y,
                        h[p + 2] = y.z,
                        v.x = e * Math.cos(w),
                        v.y = e * Math.sin(w),
                        M.subVectors(y, v).normalize(),
                        f[p] = M.x,
                        f[p + 1] = M.y,
                        f[p + 2] = M.z,
                        d[m] = o / n,
                        d[m + 1] = a / r,
                        p += 3,
                        m += 2
                    }
                for (a = 1; a <= r; a++)
                    for (o = 1; o <= n; o++) {
                        var A = (n + 1) * a + o - 1
                          , b = (n + 1) * (a - 1) + o - 1
                          , T = (n + 1) * (a - 1) + o
                          , _ = (n + 1) * a + o;
                        c[g] = A,
                        c[g + 1] = b,
                        c[g + 2] = _,
                        c[g + 3] = b,
                        c[g + 4] = T,
                        c[g + 5] = _,
                        g += 6
                    }
                this.setIndex(new de(c,1)),
                this.addAttribute("position", new de(h,3)),
                this.addAttribute("normal", new de(f,3)),
                this.addAttribute("uv", new de(d,2))
            }
            function Wt(e, t, r, n, i) {
                _e.call(this),
                this.type = "TorusGeometry",
                this.parameters = {
                    radius: e,
                    tube: t,
                    radialSegments: r,
                    tubularSegments: n,
                    arc: i
                },
                this.fromBufferGeometry(new Ht(e,t,r,n,i))
            }
            function Xt(e, t) {
                return "undefined" == typeof e ? void (e = []) : (_e.call(this),
                this.type = "ExtrudeGeometry",
                e = Array.isArray(e) ? e : [e],
                this.addShapeList(e, t),
                void this.computeFaceNormals())
            }
            function qt(e, t) {
                t = t || {};
                var r = t.font;
                if ((r && r.isFont) === !1)
                    return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),
                    new _e;
                var n = r.generateShapes(e, t.size, t.curveSegments);
                t.amount = void 0 !== t.height ? t.height : 50,
                void 0 === t.bevelThickness && (t.bevelThickness = 10),
                void 0 === t.bevelSize && (t.bevelSize = 8),
                void 0 === t.bevelEnabled && (t.bevelEnabled = !1),
                Xt.call(this, n, t),
                this.type = "TextGeometry"
            }
            function Zt(e, t, r, n, i, a, o) {
                Ee.call(this),
                this.type = "SphereBufferGeometry",
                this.parameters = {
                    radius: e,
                    widthSegments: t,
                    heightSegments: r,
                    phiStart: n,
                    phiLength: i,
                    thetaStart: a,
                    thetaLength: o
                },
                e = e || 50,
                t = Math.max(3, Math.floor(t) || 8),
                r = Math.max(2, Math.floor(r) || 6),
                n = void 0 !== n ? n : 0,
                i = void 0 !== i ? i : 2 * Math.PI,
                a = void 0 !== a ? a : 0,
                o = void 0 !== o ? o : Math.PI;
                for (var s = a + o, l = (t + 1) * (r + 1), c = new de(new Float32Array(3 * l),3), h = new de(new Float32Array(3 * l),3), f = new de(new Float32Array(2 * l),2), d = 0, p = [], m = new u, g = 0; g <= r; g++) {
                    for (var v = [], y = g / r, M = 0; M <= t; M++) {
                        var w = M / t
                          , x = -e * Math.cos(n + w * i) * Math.sin(a + y * o)
                          , A = e * Math.cos(a + y * o)
                          , b = e * Math.sin(n + w * i) * Math.sin(a + y * o);
                        m.set(x, A, b).normalize(),
                        c.setXYZ(d, x, A, b),
                        h.setXYZ(d, m.x, m.y, m.z),
                        f.setXY(d, w, 1 - y),
                        v.push(d),
                        d++
                    }
                    p.push(v)
                }
                for (var T = [], g = 0; g < r; g++)
                    for (var M = 0; M < t; M++) {
                        var _ = p[g][M + 1]
                          , E = p[g][M]
                          , S = p[g + 1][M]
                          , D = p[g + 1][M + 1];
                        (0 !== g || a > 0) && T.push(_, E, D),
                        (g !== r - 1 || s < Math.PI) && T.push(E, S, D)
                    }
                this.setIndex(new (c.count > 65535 ? we : ye)(T,1)),
                this.addAttribute("position", c),
                this.addAttribute("normal", h),
                this.addAttribute("uv", f),
                this.boundingSphere = new ee(new u,e)
            }
            function Jt(e, t, r, n, i, a, o) {
                _e.call(this),
                this.type = "SphereGeometry",
                this.parameters = {
                    radius: e,
                    widthSegments: t,
                    heightSegments: r,
                    phiStart: n,
                    phiLength: i,
                    thetaStart: a,
                    thetaLength: o
                },
                this.fromBufferGeometry(new Zt(e,t,r,n,i,a,o))
            }
            function Kt(e, t, n, i, a, o) {
                Ee.call(this),
                this.type = "RingBufferGeometry",
                this.parameters = {
                    innerRadius: e,
                    outerRadius: t,
                    thetaSegments: n,
                    phiSegments: i,
                    thetaStart: a,
                    thetaLength: o
                },
                e = e || 20,
                t = t || 50,
                a = void 0 !== a ? a : 0,
                o = void 0 !== o ? o : 2 * Math.PI,
                n = void 0 !== n ? Math.max(3, n) : 8,
                i = void 0 !== i ? Math.max(1, i) : 1;
                var s, l, c, h = (n + 1) * (i + 1), f = n * i * 2 * 3, d = new de(new (f > 65535 ? Uint32Array : Uint16Array)(f),1), p = new de(new Float32Array(3 * h),3), m = new de(new Float32Array(3 * h),3), g = new de(new Float32Array(2 * h),2), v = 0, y = 0, M = e, w = (t - e) / i, x = new u, A = new r;
                for (l = 0; l <= i; l++) {
                    for (c = 0; c <= n; c++)
                        s = a + c / n * o,
                        x.x = M * Math.cos(s),
                        x.y = M * Math.sin(s),
                        p.setXYZ(v, x.x, x.y, x.z),
                        m.setXYZ(v, 0, 0, 1),
                        A.x = (x.x / t + 1) / 2,
                        A.y = (x.y / t + 1) / 2,
                        g.setXY(v, A.x, A.y),
                        v++;
                    M += w
                }
                for (l = 0; l < i; l++) {
                    var b = l * (n + 1);
                    for (c = 0; c < n; c++) {
                        s = c + b;
                        var T = s
                          , _ = s + n + 1
                          , E = s + n + 2
                          , S = s + 1;
                        d.setX(y, T),
                        y++,
                        d.setX(y, _),
                        y++,
                        d.setX(y, E),
                        y++,
                        d.setX(y, T),
                        y++,
                        d.setX(y, E),
                        y++,
                        d.setX(y, S),
                        y++
                    }
                }
                this.setIndex(d),
                this.addAttribute("position", p),
                this.addAttribute("normal", m),
                this.addAttribute("uv", g)
            }
            function $t(e, t, r, n, i, a) {
                _e.call(this),
                this.type = "RingGeometry",
                this.parameters = {
                    innerRadius: e,
                    outerRadius: t,
                    thetaSegments: r,
                    phiSegments: n,
                    thetaStart: i,
                    thetaLength: a
                },
                this.fromBufferGeometry(new Kt(e,t,r,n,i,a))
            }
            function er(e, t, r, n) {
                _e.call(this),
                this.type = "PlaneGeometry",
                this.parameters = {
                    width: e,
                    height: t,
                    widthSegments: r,
                    heightSegments: n
                },
                this.fromBufferGeometry(new Ne(e,t,r,n))
            }
            function tr(e, t, n, i) {
                Ee.call(this),
                this.type = "LatheBufferGeometry",
                this.parameters = {
                    points: e,
                    segments: t,
                    phiStart: n,
                    phiLength: i
                },
                t = Math.floor(t) || 12,
                n = n || 0,
                i = i || 2 * Math.PI,
                i = ms.clamp(i, 0, 2 * Math.PI);
                var a, o, s, l = (t + 1) * e.length, c = t * e.length * 2 * 3, h = new de(new (c > 65535 ? Uint32Array : Uint16Array)(c),1), f = new de(new Float32Array(3 * l),3), d = new de(new Float32Array(2 * l),2), p = 0, m = 0, g = 1 / t, v = new u, y = new r;
                for (o = 0; o <= t; o++) {
                    var M = n + o * g * i
                      , w = Math.sin(M)
                      , x = Math.cos(M);
                    for (s = 0; s <= e.length - 1; s++)
                        v.x = e[s].x * w,
                        v.y = e[s].y,
                        v.z = e[s].x * x,
                        f.setXYZ(p, v.x, v.y, v.z),
                        y.x = o / t,
                        y.y = s / (e.length - 1),
                        d.setXY(p, y.x, y.y),
                        p++
                }
                for (o = 0; o < t; o++)
                    for (s = 0; s < e.length - 1; s++) {
                        a = s + o * e.length;
                        var A = a
                          , b = a + e.length
                          , T = a + e.length + 1
                          , _ = a + 1;
                        h.setX(m, A),
                        m++,
                        h.setX(m, b),
                        m++,
                        h.setX(m, _),
                        m++,
                        h.setX(m, b),
                        m++,
                        h.setX(m, T),
                        m++,
                        h.setX(m, _),
                        m++
                    }
                if (this.setIndex(h),
                this.addAttribute("position", f),
                this.addAttribute("uv", d),
                this.computeVertexNormals(),
                i === 2 * Math.PI) {
                    var E = this.attributes.normal.array
                      , S = new u
                      , D = new u
                      , N = new u;
                    for (a = t * e.length * 3,
                    o = 0,
                    s = 0; o < e.length; o++,
                    s += 3)
                        S.x = E[s + 0],
                        S.y = E[s + 1],
                        S.z = E[s + 2],
                        D.x = E[a + s + 0],
                        D.y = E[a + s + 1],
                        D.z = E[a + s + 2],
                        N.addVectors(S, D).normalize(),
                        E[s + 0] = E[a + s + 0] = N.x,
                        E[s + 1] = E[a + s + 1] = N.y,
                        E[s + 2] = E[a + s + 2] = N.z
                }
            }
            function rr(e, t, r, n) {
                _e.call(this),
                this.type = "LatheGeometry",
                this.parameters = {
                    points: e,
                    segments: t,
                    phiStart: r,
                    phiLength: n
                },
                this.fromBufferGeometry(new tr(e,t,r,n)),
                this.mergeVertices()
            }
            function nr(e, t) {
                function r(e) {
                    var r, s, l, c = n.length / 3, h = e.extractPoints(t), f = h.shape, d = h.holes;
                    if (Bl.isClockWise(f) === !1)
                        for (f = f.reverse(),
                        r = 0,
                        s = d.length; r < s; r++)
                            l = d[r],
                            Bl.isClockWise(l) === !0 && (d[r] = l.reverse());
                    var p = Bl.triangulateShape(f, d);
                    for (r = 0,
                    s = d.length; r < s; r++)
                        l = d[r],
                        f = f.concat(l);
                    for (r = 0,
                    s = f.length; r < s; r++) {
                        var m = f[r];
                        n.push(m.x, m.y, 0),
                        i.push(0, 0, 1),
                        a.push(m.x, m.y)
                    }
                    for (r = 0,
                    s = p.length; r < s; r++) {
                        var g = p[r]
                          , v = g[0] + c
                          , y = g[1] + c
                          , M = g[2] + c;
                        o.push(v, y, M),
                        u += 3
                    }
                }
                Ee.call(this),
                this.type = "ShapeBufferGeometry",
                this.parameters = {
                    shapes: e,
                    curveSegments: t
                },
                t = t || 12;
                var n = []
                  , i = []
                  , a = []
                  , o = []
                  , s = 0
                  , u = 0;
                if (Array.isArray(e) === !1)
                    r(e);
                else
                    for (var l = 0; l < e.length; l++)
                        r(e[l]),
                        this.addGroup(s, u, l),
                        s += u,
                        u = 0;
                this.setIndex(new (o.length > 65535 ? we : ye)(o,1)),
                this.addAttribute("position", new xe(n,3)),
                this.addAttribute("normal", new xe(i,3)),
                this.addAttribute("uv", new xe(a,2))
            }
            function ir(e, t) {
                _e.call(this),
                this.type = "ShapeGeometry",
                "object" == typeof t && (console.warn("THREE.ShapeGeometry: Options parameter has been removed."),
                t = t.curveSegments),
                this.parameters = {
                    shapes: e,
                    curveSegments: t
                },
                this.fromBufferGeometry(new nr(e,t)),
                this.mergeVertices()
            }
            function ar(e, t) {
                function r(e, t) {
                    return e - t
                }
                Ee.call(this),
                t = void 0 !== t ? t : 1;
                var n, i = Math.cos(ms.DEG2RAD * t), a = [0, 0], o = {}, s = ["a", "b", "c"];
                e.isBufferGeometry ? (n = new _e,
                n.fromBufferGeometry(e)) : n = e.clone(),
                n.mergeVertices(),
                n.computeFaceNormals();
                for (var u = n.vertices, l = n.faces, c = 0, h = l.length; c < h; c++)
                    for (var f = l[c], d = 0; d < 3; d++) {
                        a[0] = f[s[d]],
                        a[1] = f[s[(d + 1) % 3]],
                        a.sort(r);
                        var p = a.toString();
                        void 0 === o[p] ? o[p] = {
                            vert1: a[0],
                            vert2: a[1],
                            face1: c,
                            face2: void 0
                        } : o[p].face2 = c
                    }
                var m = [];
                for (var p in o) {
                    var g = o[p];
                    if (void 0 === g.face2 || l[g.face1].normal.dot(l[g.face2].normal) <= i) {
                        var v = u[g.vert1];
                        m.push(v.x),
                        m.push(v.y),
                        m.push(v.z),
                        v = u[g.vert2],
                        m.push(v.x),
                        m.push(v.y),
                        m.push(v.z)
                    }
                }
                this.addAttribute("position", new xe(m,3))
            }
            function or(e, t, n, i, a, o, s, l) {
                function c() {
                    var e = (i + 1) * (a + 1);
                    return o === !1 && (e += (i + 1) * m + i * m),
                    e
                }
                function h() {
                    var e = i * a * 2 * 3;
                    return o === !1 && (e += i * m * 3),
                    e
                }
                function f() {
                    var r, o, c = new u, h = new u, f = 0, d = (t - e) / n;
                    for (o = 0; o <= a; o++) {
                        var m = []
                          , g = o / a
                          , v = g * (t - e) + e;
                        for (r = 0; r <= i; r++) {
                            var S = r / i
                              , D = S * l + s
                              , N = Math.sin(D)
                              , I = Math.cos(D);
                            h.x = v * N,
                            h.y = -g * n + _,
                            h.z = v * I,
                            M.setXYZ(A, h.x, h.y, h.z),
                            c.set(N, d, I).normalize(),
                            w.setXYZ(A, c.x, c.y, c.z),
                            x.setXY(A, S, 1 - g),
                            m.push(A),
                            A++
                        }
                        T.push(m)
                    }
                    for (r = 0; r < i; r++)
                        for (o = 0; o < a; o++) {
                            var L = T[o][r]
                              , C = T[o + 1][r]
                              , O = T[o + 1][r + 1]
                              , j = T[o][r + 1];
                            y.setX(b, L),
                            b++,
                            y.setX(b, C),
                            b++,
                            y.setX(b, j),
                            b++,
                            y.setX(b, C),
                            b++,
                            y.setX(b, O),
                            b++,
                            y.setX(b, j),
                            b++,
                            f += 6
                        }
                    p.addGroup(E, f, 0),
                    E += f
                }
                function d(n) {
                    var a, o, c, h = new r, f = new u, d = 0, m = n === !0 ? e : t, g = n === !0 ? 1 : -1;
                    for (o = A,
                    a = 1; a <= i; a++)
                        M.setXYZ(A, 0, _ * g, 0),
                        w.setXYZ(A, 0, g, 0),
                        h.x = .5,
                        h.y = .5,
                        x.setXY(A, h.x, h.y),
                        A++;
                    for (c = A,
                    a = 0; a <= i; a++) {
                        var v = a / i
                          , T = v * l + s
                          , S = Math.cos(T)
                          , D = Math.sin(T);
                        f.x = m * D,
                        f.y = _ * g,
                        f.z = m * S,
                        M.setXYZ(A, f.x, f.y, f.z),
                        w.setXYZ(A, 0, g, 0),
                        h.x = .5 * S + .5,
                        h.y = .5 * D * g + .5,
                        x.setXY(A, h.x, h.y),
                        A++
                    }
                    for (a = 0; a < i; a++) {
                        var N = o + a
                          , I = c + a;
                        n === !0 ? (y.setX(b, I),
                        b++,
                        y.setX(b, I + 1),
                        b++,
                        y.setX(b, N),
                        b++) : (y.setX(b, I + 1),
                        b++,
                        y.setX(b, I),
                        b++,
                        y.setX(b, N),
                        b++),
                        d += 3
                    }
                    p.addGroup(E, d, n === !0 ? 1 : 2),
                    E += d
                }
                Ee.call(this),
                this.type = "CylinderBufferGeometry",
                this.parameters = {
                    radiusTop: e,
                    radiusBottom: t,
                    height: n,
                    radialSegments: i,
                    heightSegments: a,
                    openEnded: o,
                    thetaStart: s,
                    thetaLength: l
                };
                var p = this;
                e = void 0 !== e ? e : 20,
                t = void 0 !== t ? t : 20,
                n = void 0 !== n ? n : 100,
                i = Math.floor(i) || 8,
                a = Math.floor(a) || 1,
                o = void 0 !== o && o,
                s = void 0 !== s ? s : 0,
                l = void 0 !== l ? l : 2 * Math.PI;
                var m = 0;
                o === !1 && (e > 0 && m++,
                t > 0 && m++);
                var g = c()
                  , v = h()
                  , y = new de(new (v > 65535 ? Uint32Array : Uint16Array)(v),1)
                  , M = new de(new Float32Array(3 * g),3)
                  , w = new de(new Float32Array(3 * g),3)
                  , x = new de(new Float32Array(2 * g),2)
                  , A = 0
                  , b = 0
                  , T = []
                  , _ = n / 2
                  , E = 0;
                f(),
                o === !1 && (e > 0 && d(!0),
                t > 0 && d(!1)),
                this.setIndex(y),
                this.addAttribute("position", M),
                this.addAttribute("normal", w),
                this.addAttribute("uv", x)
            }
            function sr(e, t, r, n, i, a, o, s) {
                _e.call(this),
                this.type = "CylinderGeometry",
                this.parameters = {
                    radiusTop: e,
                    radiusBottom: t,
                    height: r,
                    radialSegments: n,
                    heightSegments: i,
                    openEnded: a,
                    thetaStart: o,
                    thetaLength: s
                },
                this.fromBufferGeometry(new or(e,t,r,n,i,a,o,s)),
                this.mergeVertices()
            }
            function ur(e, t, r, n, i, a, o) {
                sr.call(this, 0, e, t, r, n, i, a, o),
                this.type = "ConeGeometry",
                this.parameters = {
                    radius: e,
                    height: t,
                    radialSegments: r,
                    heightSegments: n,
                    openEnded: i,
                    thetaStart: a,
                    thetaLength: o
                }
            }
            function lr(e, t, r, n, i, a, o) {
                or.call(this, 0, e, t, r, n, i, a, o),
                this.type = "ConeBufferGeometry",
                this.parameters = {
                    radius: e,
                    height: t,
                    radialSegments: r,
                    heightSegments: n,
                    openEnded: i,
                    thetaStart: a,
                    thetaLength: o
                }
            }
            function cr(e, t, r, n) {
                Ee.call(this),
                this.type = "CircleBufferGeometry",
                this.parameters = {
                    radius: e,
                    segments: t,
                    thetaStart: r,
                    thetaLength: n
                },
                e = e || 50,
                t = void 0 !== t ? Math.max(3, t) : 8,
                r = void 0 !== r ? r : 0,
                n = void 0 !== n ? n : 2 * Math.PI;
                var i = t + 2
                  , a = new Float32Array(3 * i)
                  , o = new Float32Array(3 * i)
                  , s = new Float32Array(2 * i);
                o[2] = 1,
                s[0] = .5,
                s[1] = .5;
                for (var l = 0, c = 3, h = 2; l <= t; l++,
                c += 3,
                h += 2) {
                    var f = r + l / t * n;
                    a[c] = e * Math.cos(f),
                    a[c + 1] = e * Math.sin(f),
                    o[c + 2] = 1,
                    s[h] = (a[c] / e + 1) / 2,
                    s[h + 1] = (a[c + 1] / e + 1) / 2
                }
                for (var d = [], c = 1; c <= t; c++)
                    d.push(c, c + 1, 0);
                this.setIndex(new de(new Uint16Array(d),1)),
                this.addAttribute("position", new de(a,3)),
                this.addAttribute("normal", new de(o,3)),
                this.addAttribute("uv", new de(s,2)),
                this.boundingSphere = new ee(new u,e)
            }
            function hr(e, t, r, n) {
                _e.call(this),
                this.type = "CircleGeometry",
                this.parameters = {
                    radius: e,
                    segments: t,
                    thetaStart: r,
                    thetaLength: n
                },
                this.fromBufferGeometry(new cr(e,t,r,n))
            }
            function fr(e, t, r, n, i, a) {
                _e.call(this),
                this.type = "BoxGeometry",
                this.parameters = {
                    width: e,
                    height: t,
                    depth: r,
                    widthSegments: n,
                    heightSegments: i,
                    depthSegments: a
                },
                this.fromBufferGeometry(new De(e,t,r,n,i,a)),
                this.mergeVertices()
            }
            function dr() {
                J.call(this, {
                    uniforms: As.merge([Il.lights, {
                        opacity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Dl.shadow_vert,
                    fragmentShader: Dl.shadow_frag
                }),
                this.lights = !0,
                this.transparent = !0,
                Object.defineProperties(this, {
                    opacity: {
                        enumerable: !0,
                        get: function() {
                            return this.uniforms.opacity.value
                        },
                        set: function(e) {
                            this.uniforms.opacity.value = e
                        }
                    }
                })
            }
            function pr(e) {
                J.call(this, e),
                this.type = "RawShaderMaterial"
            }
            function mr(e) {
                this.uuid = ms.generateUUID(),
                this.type = "MultiMaterial",
                this.materials = Array.isArray(e) ? e : [],
                this.visible = !0
            }
            function gr(e) {
                Z.call(this),
                this.defines = {
                    STANDARD: ""
                },
                this.type = "MeshStandardMaterial",
                this.color = new Q(16777215),
                this.mapSlot = new Ie("map",0,!1,!1),
                this.reflectivity = .5,
                this.roughness = .5,
                this.roughnessMapSlot = new Ie("roughnessMap",0,!1,!1),
                this.metalness = .5,
                this.metalnessMapSlot = new Ie("metalnessMap",0,!1,!1),
                this.emissive = new Q(0),
                this.emissiveIntensity = 1,
                this.emissiveMapSlot = new Ie("emissiveMap",0,!1,!1),
                this.bumpMapSlot = new Ie("bumpMap",0,!1,!0),
                this.normalScale = new r(1,1),
                this.normalMapSlot = new Ie("normalMap",0,!1,!1),
                this.displacementMapSlot = new Ie("displacementMap",0,!1,!0),
                this.lightMapSlot = new Ie("lightMap",1,!1,!0),
                this.aoMapIntensity = 1,
                this.aoMapSlot = new Ie("aoMap",1,!1,!0),
                this.alphaMapSlot = new Ie("alphaMap",0,!1,!1),
                this.envMap = null,
                this.envMapIntensity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(e)
            }
            function vr(e) {
                gr.call(this),
                this.defines = {
                    PHYSICAL: ""
                },
                this.type = "MeshPhysicalMaterial",
                this.reflectivity = .5,
                this.falloff = !1,
                this.falloffColor = new Q(16777215),
                this.falloffMapSlot = new Ie("falloffMap",0,!1,!1),
                this.falloffOpacity = 1,
                this.falloffAlphaMapSlot = new Ie("falloffAlphaMap",0,!1,!1),
                this.clearCoat = 0,
                this.clearCoatRoughness = 0,
                this.setValues(e)
            }
            function yr(e) {
                Z.call(this),
                this.type = "MeshPhongMaterial",
                this.color = new Q(16777215),
                this.specular = new Q(1118481),
                this.shininess = 30,
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.emissive = new Q(0),
                this.emissiveIntensity = 1,
                this.emissiveMap = null,
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalScale = new r(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.specularMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.combine = Ha,
                this.reflectivity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(e)
            }
            function Mr(e) {
                yr.call(this),
                this.defines = {
                    TOON: ""
                },
                this.type = "MeshToonMaterial",
                this.gradientMap = null,
                this.setValues(e)
            }
            function wr(e) {
                Z.call(this, e),
                this.type = "MeshNormalMaterial",
                this.bumpMap = null,
                this.bumpScale = 1,
                this.normalMap = null,
                this.normalScale = new r(1,1),
                this.displacementMap = null,
                this.displacementScale = 1,
                this.displacementBias = 0,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.fog = !1,
                this.lights = !1,
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.clearColor = new Q(.5,.5,1),
                this.clearAlpha = 1,
                this.setValues(e)
            }
            function xr(e) {
                Z.call(this),
                this.type = "MeshLambertMaterial",
                this.color = new Q(16777215),
                this.map = null,
                this.lightMap = null,
                this.lightMapIntensity = 1,
                this.aoMap = null,
                this.aoMapIntensity = 1,
                this.emissive = new Q(0),
                this.emissiveIntensity = 1,
                this.emissiveMap = null,
                this.specularMap = null,
                this.alphaMap = null,
                this.envMap = null,
                this.combine = Ha,
                this.reflectivity = 1,
                this.refractionRatio = .98,
                this.wireframe = !1,
                this.wireframeLinewidth = 1,
                this.wireframeLinecap = "round",
                this.wireframeLinejoin = "round",
                this.skinning = !1,
                this.morphTargets = !1,
                this.morphNormals = !1,
                this.setValues(e)
            }
            function Ar(e) {
                Z.call(this),
                this.type = "MeshCubeMaterial",
                this.envMap = null,
                this.envMapIntensity = 1,
                this.roughness = 0,
                this.depthTest = !1,
                this.depthWrite = !1,
                this.side = la,
                this.lights = !1,
                this.setValues(e)
            }
            function br(e) {
                Z.call(this),
                this.type = "LineDashedMaterial",
                this.color = new Q(16777215),
                this.linewidth = 1,
                this.scale = 1,
                this.dashSize = 3,
                this.gapSize = 1,
                this.lights = !1,
                this.setValues(e)
            }
            function Tr(e, t, r) {
                var n = this
                  , i = !1
                  , a = 0
                  , o = 0;
                this.onStart = void 0,
                this.onLoad = e,
                this.onProgress = t,
                this.onError = r,
                this.itemStart = function(e) {
                    o++,
                    i === !1 && void 0 !== n.onStart && n.onStart(e, a, o),
                    i = !0
                }
                ,
                this.itemEnd = function(e) {
                    a++,
                    void 0 !== n.onProgress && n.onProgress(e, a, o),
                    a === o && (i = !1,
                    void 0 !== n.onLoad && n.onLoad())
                }
                ,
                this.itemError = function(e) {
                    void 0 !== n.onError && n.onError(e)
                }
            }
            function _r(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function Er(e) {
                this.manager = void 0 !== e ? e : Fl,
                this._parser = null
            }
            function Sr(e) {
                this.manager = void 0 !== e ? e : Fl,
                this._parser = null
            }
            function Dr(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function Nr(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function Ir(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function Lr(e, t) {
                ue.call(this),
                this.type = "Light",
                this.color = new Q(e),
                this.intensity = void 0 !== t ? t : 1,
                this.receiveShadow = void 0
            }
            function Cr(e, t, r) {
                Lr.call(this, e, r),
                this.type = "HemisphereLight",
                this.castShadow = void 0,
                this.position.copy(ue.DefaultUp),
                this.updateMatrix(),
                this.groundColor = new Q(t)
            }
            function Or(e) {
                this.camera = e,
                this.bias = 0,
                this.radius = 1,
                this.mapSize = new r(512,512),
                this.map = null,
                this.matrix = new l,
                this.cameraFovNearFar = new u(2 * ms.DEG2RAD,.5,500)
            }
            function jr() {
                var e = 50;
                this.cameraParams = new u(e,10.5,1e3),
                Or.call(this, new Ce(this.cameraParams.x,1,this.cameraParams.y,this.cameraParams.z))
            }
            function Rr(e, t, r, n, i, a) {
                Lr.call(this, e, t),
                this.type = "SpotLight",
                this.position.copy(ue.DefaultUp),
                this.updateMatrix(),
                this.target = new ue,
                Object.defineProperty(this, "power", {
                    get: function() {
                        return this.intensity * Math.PI
                    },
                    set: function(e) {
                        this.intensity = e / Math.PI
                    }
                }),
                this.distance = void 0 !== r ? r : 0,
                this.angle = void 0 !== n ? n : Math.PI / 3,
                this.penumbra = void 0 !== i ? i : 0,
                this.decay = void 0 !== a ? a : 1,
                this.shadow = new jr
            }
            function Pr(e, t, r, n) {
                Lr.call(this, e, t),
                this.type = "PointLight",
                Object.defineProperty(this, "power", {
                    get: function() {
                        return 4 * this.intensity * Math.PI
                    },
                    set: function(e) {
                        this.intensity = e / (4 * Math.PI)
                    }
                }),
                this.distance = void 0 !== r ? r : 0,
                this.decay = void 0 !== n ? n : 1,
                this.shadow = new Or(new Ce(90,1,.5,500))
            }
            function zr() {
                var e = 300;
                this.spreadAngle = 0,
                this.cameraParams = new u(2 * e,.5,1e3),
                Or.call(this, new Oe(-e,e,e,-e,this.cameraParams.y,this.cameraParams.z))
            }
            function Br(e, t) {
                Lr.call(this, e, t),
                this.type = "DirectionalLight",
                this.position.copy(ue.DefaultUp),
                this.updateMatrix(),
                this.target = new ue,
                this.shadow = new zr
            }
            function Ur(e, t) {
                Lr.call(this, e, t),
                this.type = "AmbientLight",
                this.castShadow = void 0
            }
            function Vr(e, t, r, n) {
                this.parameterPositions = e,
                this._cachedIndex = 0,
                this.resultBuffer = void 0 !== n ? n : new t.constructor(r),
                this.sampleValues = t,
                this.valueSize = r
            }
            function kr(e, t, r, n) {
                Vr.call(this, e, t, r, n),
                this._weightPrev = -0,
                this._offsetPrev = -0,
                this._weightNext = -0,
                this._offsetNext = -0
            }
            function Fr(e, t, r, n) {
                Vr.call(this, e, t, r, n)
            }
            function Gr(e, t, r, n) {
                Vr.call(this, e, t, r, n)
            }
            function Yr(e, t, r, n) {
                if (void 0 === e)
                    throw new Error("track name is undefined");
                if (void 0 === t || 0 === t.length)
                    throw new Error("no keyframes in track named " + e);
                this.name = e,
                this.times = Gl.convertArray(t, this.TimeBufferType),
                this.values = Gl.convertArray(r, this.ValueBufferType),
                this.setInterpolation(n || this.DefaultInterpolation),
                this.validate(),
                this.optimize()
            }
            function Qr(e, t, r, n) {
                Yr.call(this, e, t, r, n)
            }
            function Hr(e, t, r, n) {
                Vr.call(this, e, t, r, n)
            }
            function Wr(e, t, r, n) {
                Yr.call(this, e, t, r, n)
            }
            function Xr(e, t, r, n) {
                Yr.call(this, e, t, r, n)
            }
            function qr(e, t, r, n) {
                Yr.call(this, e, t, r, n)
            }
            function Zr(e, t, r) {
                Yr.call(this, e, t, r)
            }
            function Jr(e, t, r, n) {
                Yr.call(this, e, t, r, n)
            }
            function Kr(e, t, r, n) {
                Yr.apply(this, arguments)
            }
            function $r(e, t, r) {
                this.name = e,
                this.tracks = r,
                this.duration = void 0 !== t ? t : -1,
                this.uuid = ms.generateUUID(),
                this.duration < 0 && this.resetDuration(),
                this.optimize()
            }
            function en(e) {
                this.manager = void 0 !== e ? e : Fl,
                this.textures = {}
            }
            function tn(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function rn() {
                this.onLoadStart = function() {}
                ,
                this.onLoadProgress = function() {}
                ,
                this.onLoadComplete = function() {}
            }
            function nn(e) {
                "boolean" == typeof e && (console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),
                e = void 0),
                this.manager = void 0 !== e ? e : Fl,
                this.withCredentials = !1
            }
            function an(e) {
                this.manager = void 0 !== e ? e : Fl,
                this.texturePath = ""
            }
            function on(e, t, r, n, i) {
                var a = .5 * (n - t)
                  , o = .5 * (i - r)
                  , s = e * e
                  , u = e * s;
                return (2 * r - 2 * n + a + o) * u + (-3 * r + 3 * n - 2 * a - o) * s + a * e + r
            }
            function sn(e, t) {
                var r = 1 - e;
                return r * r * t
            }
            function un(e, t) {
                return 2 * (1 - e) * e * t
            }
            function ln(e, t) {
                return e * e * t
            }
            function cn(e, t, r, n) {
                return sn(e, t) + un(e, r) + ln(e, n)
            }
            function hn(e, t) {
                var r = 1 - e;
                return r * r * r * t
            }
            function fn(e, t) {
                var r = 1 - e;
                return 3 * r * r * e * t
            }
            function dn(e, t) {
                return 3 * (1 - e) * e * e * t
            }
            function pn(e, t) {
                return e * e * e * t
            }
            function mn(e, t, r, n, i) {
                return hn(e, t) + fn(e, r) + dn(e, n) + pn(e, i)
            }
            function gn() {}
            function vn(e, t) {
                this.v1 = e,
                this.v2 = t
            }
            function yn() {
                this.curves = [],
                this.autoClose = !1
            }
            function Mn(e, t, r, n, i, a, o, s) {
                this.aX = e,
                this.aY = t,
                this.xRadius = r,
                this.yRadius = n,
                this.aStartAngle = i,
                this.aEndAngle = a,
                this.aClockwise = o,
                this.aRotation = s || 0
            }
            function wn(e) {
                this.points = void 0 === e ? [] : e
            }
            function xn(e, t, r, n) {
                this.v0 = e,
                this.v1 = t,
                this.v2 = r,
                this.v3 = n
            }
            function An(e, t, r) {
                this.v0 = e,
                this.v1 = t,
                this.v2 = r
            }
            function bn(e) {
                yn.call(this),
                this.currentPoint = new r,
                e && this.fromPoints(e)
            }
            function Tn() {
                bn.apply(this, arguments),
                this.holes = []
            }
            function _n() {
                this.subPaths = [],
                this.currentPath = null
            }
            function En(e) {
                this.data = e
            }
            function Sn(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function Dn(e) {
                this.manager = void 0 !== e ? e : Fl
            }
            function Nn(e, t, r, n) {
                Lr.call(this, e, t),
                this.type = "RectAreaLight",
                this.position.set(0, 1, 0),
                this.updateMatrix(),
                this.width = void 0 !== r ? r : 10,
                this.height = void 0 !== n ? n : 10
            }
            function In() {
                this.type = "StereoCamera",
                this.aspect = 1,
                this.eyeSep = .064,
                this.cameraL = new Ce,
                this.cameraL.layers.enable(1),
                this.cameraL.matrixAutoUpdate = !1,
                this.cameraR = new Ce,
                this.cameraR.layers.enable(2),
                this.cameraR.matrixAutoUpdate = !1
            }
            function Ln(e, t, r) {
                ue.call(this),
                this.type = "CubeCamera";
                var n = 90
                  , i = 1
                  , a = new Ce(n,i,e,t);
                a.up.set(0, -1, 0),
                a.lookAt(new u(1,0,0)),
                this.add(a);
                var s = new Ce(n,i,e,t);
                s.up.set(0, -1, 0),
                s.lookAt(new u(-1,0,0)),
                this.add(s);
                var l = new Ce(n,i,e,t);
                l.up.set(0, 0, 1),
                l.lookAt(new u(0,1,0)),
                this.add(l);
                var c = new Ce(n,i,e,t);
                c.up.set(0, 0, -1),
                c.lookAt(new u(0,-1,0)),
                this.add(c);
                var h = new Ce(n,i,e,t);
                h.up.set(0, -1, 0),
                h.lookAt(new u(0,0,1)),
                this.add(h);
                var f = new Ce(n,i,e,t);
                f.up.set(0, -1, 0),
                f.lookAt(new u(0,0,-1)),
                this.add(f);
                var d = {
                    format: Lo,
                    magFilter: mo,
                    minFilter: mo,
                    name: "cubeCamera"
                };
                this.renderTarget = new o(r,r,d),
                this.updateCubeMap = function(e, t) {
                    null === this.parent && this.updateMatrixWorld();
                    var r = this.renderTarget
                      , n = r.texture.generateMipmaps;
                    r.texture.generateMipmaps = !1,
                    r.activeCubeFace = 0,
                    e.render(t, a, r),
                    r.activeCubeFace = 1,
                    e.render(t, s, r),
                    r.activeCubeFace = 2,
                    e.render(t, l, r),
                    r.activeCubeFace = 3,
                    e.render(t, c, r),
                    r.activeCubeFace = 4,
                    e.render(t, h, r),
                    r.texture.generateMipmaps = n,
                    r.activeCubeFace = 5,
                    e.render(t, f, r),
                    e.setRenderTarget(null)
                }
            }
            function Cn() {
                ue.call(this),
                this.type = "AudioListener",
                this.context = Wl.getContext(),
                this.gain = this.context.createGain(),
                this.gain.connect(this.context.destination),
                this.filter = null
            }
            function On(e) {
                ue.call(this),
                this.type = "Audio",
                this.context = e.context,
                this.gain = this.context.createGain(),
                this.gain.connect(e.getInput()),
                this.autoplay = !1,
                this.buffer = null,
                this.loop = !1,
                this.startTime = 0,
                this.playbackRate = 1,
                this.isPlaying = !1,
                this.hasPlaybackControl = !0,
                this.sourceType = "empty",
                this.filters = []
            }
            function jn(e) {
                On.call(this, e),
                this.panner = this.context.createPanner(),
                this.panner.connect(this.gain)
            }
            function Rn(e, t) {
                this.analyser = e.context.createAnalyser(),
                this.analyser.fftSize = void 0 !== t ? t : 2048,
                this.data = new Uint8Array(this.analyser.frequencyBinCount),
                e.getOutput().connect(this.analyser)
            }
            function Pn(e, t, r) {
                this.binding = e,
                this.valueSize = r;
                var n, i = Float64Array;
                switch (t) {
                case "quaternion":
                    n = this._slerp;
                    break;
                case "string":
                case "bool":
                    i = Array,
                    n = this._select;
                    break;
                default:
                    n = this._lerp
                }
                this.buffer = new i(4 * r),
                this._mixBufferRegion = n,
                this.cumulativeWeight = 0,
                this.useCount = 0,
                this.referenceCount = 0
            }
            function zn(e, t, r) {
                this.path = t,
                this.parsedPath = r || zn.parseTrackName(t),
                this.node = zn.findNode(e, this.parsedPath.nodeName) || e,
                this.rootNode = e
            }
            function Bn(e) {
                this.uuid = ms.generateUUID(),
                this._objects = Array.prototype.slice.call(arguments),
                this.nCachedObjects_ = 0;
                var t = {};
                this._indicesByUUID = t;
                for (var r = 0, n = arguments.length; r !== n; ++r)
                    t[arguments[r].uuid] = r;
                this._paths = [],
                this._parsedPaths = [],
                this._bindings = [],
                this._bindingsIndicesByPath = {};
                var i = this;
                this.stats = {
                    objects: {
                        get total() {
                            return i._objects.length
                        },
                        get inUse() {
                            return this.total - i.nCachedObjects_
                        }
                    },
                    get bindingsPerObject() {
                        return i._bindings.length
                    }
                }
            }
            function Un(e, t, r) {
                this._mixer = e,
                this._clip = t,
                this._localRoot = r || null;
                for (var n = t.tracks, i = n.length, a = new Array(i), o = {
                    endingStart: $o,
                    endingEnd: $o
                }, s = 0; s !== i; ++s) {
                    var u = n[s].createInterpolant(null);
                    a[s] = u,
                    u.settings = o
                }
                this._interpolantSettings = o,
                this._interpolants = a,
                this._propertyBindings = new Array(i),
                this._cacheIndex = null,
                this._byClipCacheIndex = null,
                this._timeScaleInterpolant = null,
                this._weightInterpolant = null,
                this.loop = Xo,
                this._loopCount = -1,
                this._startTime = null,
                this.time = 0,
                this.timeScale = 1,
                this._effectiveTimeScale = 1,
                this.weight = 1,
                this._effectiveWeight = 1,
                this.repetitions = 1 / 0,
                this.paused = !1,
                this.enabled = !0,
                this.clampWhenFinished = !1,
                this.zeroSlopeAtStart = !0,
                this.zeroSlopeAtEnd = !0
            }
            function Vn(e) {
                this._root = e,
                this._initMemoryManager(),
                this._accuIndex = 0,
                this.time = 0,
                this.timeScale = 1
            }
            function kn(e) {
                "string" == typeof e && (console.warn("THREE.Uniform: Type parameter is no longer needed."),
                e = arguments[1]),
                this.value = e
            }
            function Fn() {
                Ee.call(this),
                this.type = "InstancedBufferGeometry",
                this.maxInstancedCount = void 0
            }
            function Gn(e, t, r, n) {
                this.uuid = ms.generateUUID(),
                this.data = e,
                this.itemSize = t,
                this.offset = r,
                this.normalized = n === !0
            }
            function Yn(e, t) {
                this.uuid = ms.generateUUID(),
                this.array = e,
                this.stride = t,
                this.count = void 0 !== e ? e.length / t : 0,
                this.dynamic = !1,
                this.updateRange = {
                    offset: 0,
                    count: -1
                },
                this.onUploadCallback = function() {}
                ,
                this.version = 0
            }
            function Qn(e, t, r) {
                Yn.call(this, e, t),
                this.meshPerAttribute = r || 1
            }
            function Hn(e, t, r) {
                de.call(this, e, t),
                this.meshPerAttribute = r || 1
            }
            function Wn(e, t, r, n) {
                this.ray = new ae(e,t),
                this.near = r || 0,
                this.far = n || 1 / 0,
                this.params = {
                    Mesh: {},
                    Line: {},
                    LOD: {},
                    Points: {
                        threshold: 1
                    },
                    Sprite: {}
                },
                Object.defineProperties(this.params, {
                    PointCloud: {
                        get: function() {
                            return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),
                            this.Points
                        }
                    }
                })
            }
            function Xn(e, t) {
                return e.distance - t.distance
            }
            function qn(e, t, r, n) {
                if (e.visible !== !1 && (e.raycast(t, r),
                n === !0))
                    for (var i = e.children, a = 0, o = i.length; a < o; a++)
                        qn(i[a], t, r, !0)
            }
            function Zn(e) {
                this.autoStart = void 0 === e || e,
                this.startTime = 0,
                this.oldTime = 0,
                this.elapsedTime = 0,
                this.running = !1
            }
            function Jn(e, t, r) {
                return this.radius = void 0 !== e ? e : 1,
                this.phi = void 0 !== t ? t : 0,
                this.theta = void 0 !== r ? r : 0,
                this
            }
            function Kn(e, t, r) {
                return this.radius = void 0 !== e ? e : 1,
                this.theta = void 0 !== t ? t : 0,
                this.y = void 0 !== r ? r : 0,
                this
            }
            function $n(e, t) {
                Se.call(this, e, t),
                this.animationsMap = {},
                this.animationsList = [];
                var r = this.geometry.morphTargets.length
                  , n = "__default"
                  , i = 0
                  , a = r - 1
                  , o = r / 1;
                this.createAnimation(n, i, a, o),
                this.setAnimationWeight(n, 1)
            }
            function ei(e) {
                ue.call(this),
                this.material = e,
                this.render = function(e) {}
            }
            function ti(e, t, r, n) {
                this.object = e,
                this.size = void 0 !== t ? t : 1;
                var i = void 0 !== r ? r : 16711680
                  , a = void 0 !== n ? n : 1
                  , o = 0
                  , s = this.object.geometry;
                s && s.isGeometry ? o = 3 * s.faces.length : s && s.isBufferGeometry && (o = s.attributes.normal.count);
                var u = new Ee
                  , l = new xe(2 * o * 3,3);
                u.addAttribute("position", l),
                xt.call(this, u, new Mt({
                    color: i,
                    linewidth: a
                })),
                this.matrixAutoUpdate = !1,
                this.update()
            }
            function ri(e) {
                ue.call(this),
                this.light = e,
                this.light.updateMatrixWorld(),
                this.matrix = e.matrixWorld,
                this.matrixAutoUpdate = !1;
                for (var t = new Ee, r = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1], n = 0, i = 1, a = 32; n < a; n++,
                i++) {
                    var o = n / a * Math.PI * 2
                      , s = i / a * Math.PI * 2;
                    r.push(Math.cos(o), Math.sin(o), 1, Math.cos(s), Math.sin(s), 1)
                }
                t.addAttribute("position", new xe(r,3));
                var u = new Mt({
                    fog: !1
                });
                this.cone = new xt(t,u),
                this.add(this.cone),
                this.update()
            }
            function ni(e) {
                this.bones = this.getBoneList(e);
                for (var t = new Ee, r = [], n = [], i = new Q(0,0,1), a = new Q(0,1,0), o = 0; o < this.bones.length; o++) {
                    var s = this.bones[o];
                    s.parent && s.parent.isBone && (r.push(0, 0, 0),
                    r.push(0, 0, 0),
                    n.push(i.r, i.g, i.b),
                    n.push(a.r, a.g, a.b))
                }
                t.addAttribute("position", new xe(r,3)),
                t.addAttribute("color", new xe(n,3));
                var u = new Mt({
                    vertexColors: ma,
                    depthTest: !1,
                    depthWrite: !1,
                    transparent: !0
                });
                xt.call(this, t, u),
                this.root = e,
                this.matrix = e.matrixWorld,
                this.matrixAutoUpdate = !1,
                this.update()
            }
            function ii(e, t) {
                this.light = e,
                this.light.updateMatrixWorld();
                var r = new Zt(t,4,2)
                  , n = new fe({
                    wireframe: !0,
                    fog: !1
                });
                n.color.copy(this.light.color).multiplyScalar(this.light.intensity),
                Se.call(this, r, n),
                this.matrix = this.light.matrixWorld,
                this.matrixAutoUpdate = !1
            }
            function ai(e) {
                ue.call(this),
                this.light = e,
                this.light.updateMatrixWorld();
                var t = new fe({
                    color: e.color,
                    fog: !1
                })
                  , r = new fe({
                    color: e.color,
                    fog: !1,
                    wireframe: !0
                })
                  , n = new Ee;
                n.addAttribute("position", new de(new Float32Array(18),3)),
                this.add(new Se(n,t)),
                this.add(new Se(n,r)),
                this.update()
            }
            function oi(e, t) {
                ue.call(this),
                this.light = e,
                this.light.updateMatrixWorld(),
                this.matrix = e.matrixWorld,
                this.matrixAutoUpdate = !1;
                var r = new Rt(t);
                r.rotateY(.5 * Math.PI);
                var n = new fe({
                    vertexColors: ma,
                    wireframe: !0
                })
                  , i = r.getAttribute("position")
                  , a = new Float32Array(3 * i.count);
                r.addAttribute("color", new de(a,3)),
                this.add(new Se(r,n)),
                this.update()
            }
            function si(e, t, r, n) {
                e = e || 10,
                t = t || 10,
                r = new Q(void 0 !== r ? r : 4473924),
                n = new Q(void 0 !== n ? n : 8947848);
                for (var i = t / 2, a = 2 * e / t, o = [], s = [], u = 0, l = 0, c = -e; u <= t; u++,
                c += a) {
                    o.push(-e, 0, c, e, 0, c),
                    o.push(c, 0, -e, c, 0, e);
                    var h = u === i ? r : n;
                    h.toArray(s, l),
                    l += 3,
                    h.toArray(s, l),
                    l += 3,
                    h.toArray(s, l),
                    l += 3,
                    h.toArray(s, l),
                    l += 3
                }
                var f = new Ee;
                f.addAttribute("position", new xe(o,3)),
                f.addAttribute("color", new xe(s,3));
                var d = new Mt({
                    vertexColors: ma
                });
                xt.call(this, f, d)
            }
            function ui(e, t, r, n, i, a) {
                e = e || 10,
                t = t || 16,
                r = r || 8,
                n = n || 64,
                i = new Q(void 0 !== i ? i : 4473924),
                a = new Q(void 0 !== a ? a : 8947848);
                var o, s, u, l, c, h, f, d = [], p = [];
                for (l = 0; l <= t; l++)
                    u = l / t * (2 * Math.PI),
                    o = Math.sin(u) * e,
                    s = Math.cos(u) * e,
                    d.push(0, 0, 0),
                    d.push(o, 0, s),
                    f = 1 & l ? i : a,
                    p.push(f.r, f.g, f.b),
                    p.push(f.r, f.g, f.b);
                for (l = 0; l <= r; l++)
                    for (f = 1 & l ? i : a,
                    h = e - e / r * l,
                    c = 0; c < n; c++)
                        u = c / n * (2 * Math.PI),
                        o = Math.sin(u) * h,
                        s = Math.cos(u) * h,
                        d.push(o, 0, s),
                        p.push(f.r, f.g, f.b),
                        u = (c + 1) / n * (2 * Math.PI),
                        o = Math.sin(u) * h,
                        s = Math.cos(u) * h,
                        d.push(o, 0, s),
                        p.push(f.r, f.g, f.b);
                var m = new Ee;
                m.addAttribute("position", new xe(d,3)),
                m.addAttribute("color", new xe(p,3));
                var g = new Mt({
                    vertexColors: ma
                });
                xt.call(this, m, g)
            }
            function li(e, t, r, n) {
                this.object = e,
                this.size = void 0 !== t ? t : 1;
                var i = void 0 !== r ? r : 16776960
                  , a = void 0 !== n ? n : 1
                  , o = 0
                  , s = this.object.geometry;
                s && s.isGeometry ? o = s.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");
                var u = new Ee
                  , l = new xe(2 * o * 3,3);
                u.addAttribute("position", l),
                xt.call(this, u, new Mt({
                    color: i,
                    linewidth: a
                })),
                this.matrixAutoUpdate = !1,
                this.update()
            }
            function ci(e, t) {
                ue.call(this),
                this.light = e,
                this.light.updateMatrixWorld(),
                this.matrix = e.matrixWorld,
                this.matrixAutoUpdate = !1,
                void 0 === t && (t = 1);
                var r = new Ee;
                r.addAttribute("position", new xe([-t, t, 0, t, t, 0, t, -t, 0, -t, -t, 0, -t, t, 0],3));
                var n = new Mt({
                    fog: !1
                });
                this.add(new wt(r,n)),
                r = new Ee,
                r.addAttribute("position", new xe([0, 0, 0, 0, 0, 1],3)),
                this.add(new wt(r,n)),
                this.update()
            }
            function hi(e) {
                function t(e, t, n) {
                    r(e, n),
                    r(t, n)
                }
                function r(e, t) {
                    a.push(0, 0, 0),
                    o.push(t.r, t.g, t.b),
                    void 0 === s[e] && (s[e] = []),
                    s[e].push(a.length / 3 - 1)
                }
                var n = new Ee
                  , i = new Mt({
                    color: 16777215,
                    vertexColors: pa
                })
                  , a = []
                  , o = []
                  , s = {}
                  , u = new Q(16755200)
                  , l = new Q(16711680)
                  , c = new Q(43775)
                  , h = new Q(16777215)
                  , f = new Q(3355443);
                t("n1", "n2", u),
                t("n2", "n4", u),
                t("n4", "n3", u),
                t("n3", "n1", u),
                t("f1", "f2", u),
                t("f2", "f4", u),
                t("f4", "f3", u),
                t("f3", "f1", u),
                t("n1", "f1", u),
                t("n2", "f2", u),
                t("n3", "f3", u),
                t("n4", "f4", u),
                t("p", "n1", l),
                t("p", "n2", l),
                t("p", "n3", l),
                t("p", "n4", l),
                t("u1", "u2", c),
                t("u2", "u3", c),
                t("u3", "u1", c),
                t("c", "t", h),
                t("p", "c", f),
                t("cn1", "cn2", f),
                t("cn3", "cn4", f),
                t("cf1", "cf2", f),
                t("cf3", "cf4", f),
                n.addAttribute("position", new xe(a,3)),
                n.addAttribute("color", new xe(o,3)),
                xt.call(this, n, i),
                this.camera = e,
                this.camera.updateProjectionMatrix && this.camera.updateProjectionMatrix(),
                this.matrix = e.matrixWorld,
                this.matrixAutoUpdate = !1,
                this.pointMap = s,
                this.update()
            }
            function fi(e, t) {
                void 0 === t && (t = 16776960);
                var r = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7])
                  , n = new Float32Array(24)
                  , i = new Ee;
                i.setIndex(new de(r,1)),
                i.addAttribute("position", new de(n,3)),
                xt.call(this, i, new Mt({
                    color: t
                })),
                void 0 !== e && this.update(e)
            }
            function di(e, t, r, n, i, a) {
                ue.call(this),
                void 0 === n && (n = 16776960),
                void 0 === r && (r = 1),
                void 0 === i && (i = .2 * r),
                void 0 === a && (a = .2 * i),
                this.position.copy(t),
                this.line = new wt(Xl,new Mt({
                    color: n
                })),
                this.line.matrixAutoUpdate = !1,
                this.add(this.line),
                this.cone = new Se(ql,new fe({
                    color: n
                })),
                this.cone.matrixAutoUpdate = !1,
                this.add(this.cone),
                this.setDirection(e),
                this.setLength(r, i, a)
            }
            function pi(e) {
                e = e || 1;
                var t = [0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e]
                  , r = [1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]
                  , n = new Ee;
                n.addAttribute("position", new xe(t,3)),
                n.addAttribute("color", new xe(r,3));
                var i = new Mt({
                    vertexColors: ma
                });
                xt.call(this, n, i)
            }
            function mi() {
                function e(e, a, o, s) {
                    t = e,
                    r = o,
                    n = -3 * e + 3 * a - 2 * o - s,
                    i = 2 * e - 2 * a + o + s
                }
                var t = 0
                  , r = 0
                  , n = 0
                  , i = 0;
                return {
                    initCatmullRom: function(t, r, n, i, a) {
                        e(r, n, a * (n - t), a * (i - r))
                    },
                    initNonuniformCatmullRom: function(t, r, n, i, a, o, s) {
                        var u = (r - t) / a - (n - t) / (a + o) + (n - r) / o
                          , l = (n - r) / o - (i - r) / (o + s) + (i - n) / s;
                        u *= o,
                        l *= o,
                        e(r, n, u, l)
                    },
                    calc: function(e) {
                        var a = e * e
                          , o = a * e;
                        return t + r * e + n * a + i * o
                    }
                }
            }
            function gi(e) {
                this.points = e || [],
                this.closed = !1
            }
            function vi(e, t, r, n) {
                this.v0 = e,
                this.v1 = t,
                this.v2 = r,
                this.v3 = n
            }
            function yi(e, t, r) {
                this.v0 = e,
                this.v1 = t,
                this.v2 = r
            }
            function Mi(e, t) {
                this.v1 = e,
                this.v2 = t
            }
            function wi(e, t, r, n, i, a) {
                Mn.call(this, e, t, r, r, n, i, a)
            }
            function xi(e, t, r, n, i, a, o) {
                return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),
                new he(e,t,r,i,a,o)
            }
            function Ai(e) {
                return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),
                new mr(e)
            }
            function bi(e, t) {
                return console.warn("THREE.PointCloud has been renamed to THREE.Points."),
                new bt(e,t)
            }
            function Ti(e) {
                return console.warn("THREE.Particle has been renamed to THREE.Sprite."),
                new pt(e)
            }
            function _i(e, t) {
                return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),
                new bt(e,t)
            }
            function Ei(e) {
                return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),
                new At(e)
            }
            function Si(e) {
                return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),
                new At(e)
            }
            function Di(e) {
                return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),
                new At(e)
            }
            function Ni(e, t, r) {
                return console.warn("THREE.Vertex has been removed. Use GASEngine.Vector3 instead."),
                new u(e,t,r)
            }
            function Ii(e, t) {
                return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),
                new de(e,t).setDynamic(!0)
            }
            function Li(e, t) {
                return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),
                new pe(e,t)
            }
            function Ci(e, t) {
                return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),
                new me(e,t)
            }
            function Oi(e, t) {
                return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),
                new ge(e,t)
            }
            function ji(e, t) {
                return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),
                new ve(e,t)
            }
            function Ri(e, t) {
                return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),
                new ye(e,t)
            }
            function Pi(e, t) {
                return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),
                new Me(e,t)
            }
            function zi(e, t) {
                return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),
                new we(e,t)
            }
            function Bi(e, t) {
                return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),
                new xe(e,t)
            }
            function Ui(e, t) {
                return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),
                new Ae(e,t)
            }
            function Vi(e) {
                console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),
                gi.call(this, e),
                this.type = "catmullrom",
                this.closed = !0
            }
            function ki(e) {
                console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),
                gi.call(this, e),
                this.type = "catmullrom"
            }
            function Fi(e) {
                console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),
                gi.call(this, e),
                this.type = "catmullrom"
            }
            function Gi(e, t) {
                return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),
                new fi(e,t)
            }
            function Yi(e, t) {
                return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),
                new xt(new ar(e.geometry),new Mt({
                    color: void 0 !== t ? t : 16777215
                }))
            }
            function Qi(e, t) {
                return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),
                new xt(new Nt(e.geometry),new Mt({
                    color: void 0 !== t ? t : 16777215
                }))
            }
            function Hi(e) {
                return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),
                new _r(e)
            }
            function Wi(e) {
                return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),
                new Sr(e)
            }
            function Xi() {
                console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),
                this.projectVector = function(e, t) {
                    console.warn("THREE.Projector: .projectVector() is now vector.project()."),
                    e.project(t)
                }
                ,
                this.unprojectVector = function(e, t) {
                    console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),
                    e.unproject(t)
                }
                ,
                this.pickingRay = function() {
                    console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
                }
            }
            function qi() {
                console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),
                this.domElement = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"),
                this.clear = function() {}
                ,
                this.render = function() {}
                ,
                this.setClearColor = function() {}
                ,
                this.setSize = function() {}
            }
            void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)),
            void 0 === Math.sign && (Math.sign = function(e) {
                return e < 0 ? -1 : e > 0 ? 1 : +e
            }
            ),
            void 0 === Function.prototype.name && Object.defineProperty(Function.prototype, "name", {
                get: function() {
                    return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]
                }
            }),
            void 0 === Object.assign && !function() {
                Object.assign = function(e) {
                    if (void 0 === e || null === e)
                        throw new TypeError("Cannot convert undefined or null to object");
                    for (var t = Object(e), r = 1; r < arguments.length; r++) {
                        var n = arguments[r];
                        if (void 0 !== n && null !== n)
                            for (var i in n)
                                Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i])
                    }
                    return t
                }
            }(),
            t.prototype = {
                addEventListener: function(e, t) {
                    void 0 === this._listeners && (this._listeners = {});
                    var r = this._listeners;
                    void 0 === r[e] && (r[e] = []),
                    r[e].indexOf(t) === -1 && r[e].push(t)
                },
                hasEventListener: function(e, t) {
                    if (void 0 === this._listeners)
                        return !1;
                    var r = this._listeners;
                    return void 0 !== r[e] && r[e].indexOf(t) !== -1
                },
                removeEventListener: function(e, t) {
                    if (void 0 !== this._listeners) {
                        var r = this._listeners
                          , n = r[e];
                        if (void 0 !== n) {
                            var i = n.indexOf(t);
                            i !== -1 && n.splice(i, 1)
                        }
                    }
                },
                dispatchEvent: function(e) {
                    if (void 0 !== this._listeners) {
                        var t = this._listeners
                          , r = t[e.type];
                        if (void 0 !== r) {
                            e.target = this;
                            var n = []
                              , i = 0
                              , a = r.length;
                            for (i = 0; i < a; i++)
                                n[i] = r[i];
                            for (i = 0; i < a; i++)
                                n[i].call(this, e)
                        }
                    }
                }
            };
            var Zi = "84dev"
              , Ji = {
                LEFT: 0,
                MIDDLE: 1,
                RIGHT: 2
            }
              , Ki = 0
              , $i = 1
              , ea = 2
              , ta = 3
              , ra = 0
              , na = 1
              , ia = 0
              , aa = 1
              , oa = 2
              , sa = 3
              , ua = 0
              , la = 1
              , ca = 2
              , ha = 1
              , fa = 2
              , da = 0
              , pa = 1
              , ma = 2
              , ga = 0
              , va = 1
              , ya = 2
              , Ma = 3
              , wa = 4
              , xa = 5
              , Aa = 100
              , ba = 101
              , Ta = 102
              , _a = 103
              , Ea = 104
              , Sa = 200
              , Da = 201
              , Na = 202
              , Ia = 203
              , La = 204
              , Ca = 205
              , Oa = 206
              , ja = 207
              , Ra = 208
              , Pa = 209
              , za = 210
              , Ba = 0
              , Ua = 1
              , Va = 2
              , ka = 3
              , Fa = 4
              , Ga = 5
              , Ya = 6
              , Qa = 7
              , Ha = 0
              , Wa = 1
              , Xa = 2
              , qa = 0
              , Za = 1
              , Ja = 2
              , Ka = 3
              , $a = 4
              , eo = 300
              , to = 301
              , ro = 302
              , no = 303
              , io = 304
              , ao = 305
              , oo = 306
              , so = 307
              , uo = 1e3
              , lo = 1001
              , co = 1002
              , ho = 1003
              , fo = 1004
              , po = 1005
              , mo = 1006
              , go = 1007
              , vo = 1008
              , yo = 1009
              , Mo = 1010
              , wo = 1011
              , xo = 1012
              , Ao = 1013
              , bo = 1014
              , To = 1015
              , _o = 1016
              , Eo = 1017
              , So = 1018
              , Do = 1019
              , No = 1020
              , Io = 1021
              , Lo = 1022
              , Co = 1023
              , Oo = 1024
              , jo = 1025
              , Ro = Co
              , Po = 1026
              , zo = 1027
              , Bo = 2001
              , Uo = 2002
              , Vo = 2003
              , ko = 2004
              , Fo = 2100
              , Go = 2101
              , Yo = 2102
              , Qo = 2103
              , Ho = 2151
              , Wo = 2200
              , Xo = 2201
              , qo = 2202
              , Zo = 2300
              , Jo = 2301
              , Ko = 2302
              , $o = 2400
              , es = 2401
              , ts = 2402
              , rs = 0
              , ns = 1
              , is = 2
              , as = 3e3
              , os = 3001
              , ss = 3007
              , us = 3002
              , ls = 3003
              , cs = 3004
              , hs = 3005
              , fs = 3006
              , ds = 3200
              , ps = 3201
              , ms = {
                DEG2RAD: Math.PI / 180,
                RAD2DEG: 180 / Math.PI,
                generateUUID: function() {
                    var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), r = new Array(36), n = 0;
                    return function() {
                        for (var i = 0; i < 36; i++)
                            8 === i || 13 === i || 18 === i || 23 === i ? r[i] = "-" : 14 === i ? r[i] = "4" : (n <= 2 && (n = 33554432 + 16777216 * Math.random() | 0),
                            e = 15 & n,
                            n >>= 4,
                            r[i] = t[19 === i ? 3 & e | 8 : e]);
                        return r.join("")
                    }
                }(),
                clamp: function(e, t, r) {
                    return Math.max(t, Math.min(r, e))
                },
                euclideanModulo: function(e, t) {
                    return (e % t + t) % t
                },
                mapLinear: function(e, t, r, n, i) {
                    return n + (e - t) * (i - n) / (r - t)
                },
                lerp: function(e, t, r) {
                    return (1 - r) * e + r * t
                },
                smoothstep: function(e, t, r) {
                    return e <= t ? 0 : e >= r ? 1 : (e = (e - t) / (r - t),
                    e * e * (3 - 2 * e))
                },
                smootherstep: function(e, t, r) {
                    return e <= t ? 0 : e >= r ? 1 : (e = (e - t) / (r - t),
                    e * e * e * (e * (6 * e - 15) + 10))
                },
                randInt: function(e, t) {
                    return e + Math.floor(Math.random() * (t - e + 1))
                },
                randFloat: function(e, t) {
                    return e + Math.random() * (t - e)
                },
                randFloatSpread: function(e) {
                    return e * (.5 - Math.random())
                },
                degToRad: function(e) {
                    return e * ms.DEG2RAD
                },
                radToDeg: function(e) {
                    return e * ms.RAD2DEG
                },
                isPowerOfTwo: function(e) {
                    return 0 === (e & e - 1) && 0 !== e
                },
                nearestPowerOfTwo: function(e) {
                    return Math.pow(2, Math.round(Math.log(e) / Math.LN2))
                },
                nextPowerOfTwo: function(e) {
                    return e--,
                    e |= e >> 1,
                    e |= e >> 2,
                    e |= e >> 4,
                    e |= e >> 8,
                    e |= e >> 16,
                    e++,
                    e
                }
            };
            r.prototype = {
                constructor: r,
                isVector2: !0,
                get width() {
                    return this.x
                },
                set width(e) {
                    this.x = e
                },
                get height() {
                    return this.y
                },
                set height(e) {
                    this.y = e
                },
                set: function(e, t) {
                    return this.x = e,
                    this.y = t,
                    this
                },
                setScalar: function(e) {
                    return this.x = e,
                    this.y = e,
                    this
                },
                setX: function(e) {
                    return this.x = e,
                    this
                },
                setY: function(e) {
                    return this.y = e,
                    this
                },
                setComponent: function(e, t) {
                    switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                    }
                    return this
                },
                getComponent: function(e) {
                    switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    default:
                        throw new Error("index is out of range: " + e)
                    }
                },
                clone: function() {
                    return new this.constructor(this.x,this.y)
                },
                copy: function(e) {
                    return this.x = e.x,
                    this.y = e.y,
                    this
                },
                add: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                    this.addVectors(e, t)) : (this.x += e.x,
                    this.y += e.y,
                    this)
                },
                addScalar: function(e) {
                    return this.x += e,
                    this.y += e,
                    this
                },
                addVectors: function(e, t) {
                    return this.x = e.x + t.x,
                    this.y = e.y + t.y,
                    this
                },
                addScaledVector: function(e, t) {
                    return this.x += e.x * t,
                    this.y += e.y * t,
                    this
                },
                sub: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                    this.subVectors(e, t)) : (this.x -= e.x,
                    this.y -= e.y,
                    this)
                },
                subScalar: function(e) {
                    return this.x -= e,
                    this.y -= e,
                    this
                },
                subVectors: function(e, t) {
                    return this.x = e.x - t.x,
                    this.y = e.y - t.y,
                    this
                },
                multiply: function(e) {
                    return this.x *= e.x,
                    this.y *= e.y,
                    this
                },
                multiplyScalar: function(e) {
                    return isFinite(e) ? (this.x *= e,
                    this.y *= e) : (this.x = 0,
                    this.y = 0),
                    this
                },
                divide: function(e) {
                    return this.x /= e.x,
                    this.y /= e.y,
                    this
                },
                divideScalar: function(e) {
                    return this.multiplyScalar(1 / e)
                },
                min: function(e) {
                    return this.x = Math.min(this.x, e.x),
                    this.y = Math.min(this.y, e.y),
                    this
                },
                max: function(e) {
                    return this.x = Math.max(this.x, e.x),
                    this.y = Math.max(this.y, e.y),
                    this
                },
                clamp: function(e, t) {
                    return this.x = Math.max(e.x, Math.min(t.x, this.x)),
                    this.y = Math.max(e.y, Math.min(t.y, this.y)),
                    this
                },
                clampScalar: function() {
                    var e, t;
                    return function(n, i) {
                        return void 0 === e && (e = new r,
                        t = new r),
                        e.set(n, n),
                        t.set(i, i),
                        this.clamp(e, t)
                    }
                }(),
                clampLength: function(e, t) {
                    var r = this.length();
                    return this.multiplyScalar(Math.max(e, Math.min(t, r)) / r)
                },
                floor: function() {
                    return this.x = Math.floor(this.x),
                    this.y = Math.floor(this.y),
                    this
                },
                ceil: function() {
                    return this.x = Math.ceil(this.x),
                    this.y = Math.ceil(this.y),
                    this
                },
                round: function() {
                    return this.x = Math.round(this.x),
                    this.y = Math.round(this.y),
                    this
                },
                roundToZero: function() {
                    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                    this
                },
                negate: function() {
                    return this.x = -this.x,
                    this.y = -this.y,
                    this
                },
                dot: function(e) {
                    return this.x * e.x + this.y * e.y
                },
                lengthSq: function() {
                    return this.x * this.x + this.y * this.y
                },
                length: function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y)
                },
                lengthManhattan: function() {
                    return Math.abs(this.x) + Math.abs(this.y)
                },
                normalize: function() {
                    return this.divideScalar(this.length())
                },
                angle: function() {
                    var e = Math.atan2(this.y, this.x);
                    return e < 0 && (e += 2 * Math.PI),
                    e
                },
                distanceTo: function(e) {
                    return Math.sqrt(this.distanceToSquared(e))
                },
                distanceToSquared: function(e) {
                    var t = this.x - e.x
                      , r = this.y - e.y;
                    return t * t + r * r
                },
                distanceToManhattan: function(e) {
                    return Math.abs(this.x - e.x) + Math.abs(this.y - e.y)
                },
                setLength: function(e) {
                    return this.multiplyScalar(e / this.length())
                },
                lerp: function(e, t) {
                    return this.x += (e.x - this.x) * t,
                    this.y += (e.y - this.y) * t,
                    this
                },
                lerpVectors: function(e, t, r) {
                    return this.subVectors(t, e).multiplyScalar(r).add(e)
                },
                equals: function(e) {
                    return e.x === this.x && e.y === this.y
                },
                fromArray: function(e, t) {
                    return void 0 === t && (t = 0),
                    this.x = e[t],
                    this.y = e[t + 1],
                    this
                },
                toArray: function(e, t) {
                    return void 0 === e && (e = []),
                    void 0 === t && (t = 0),
                    e[t] = this.x,
                    e[t + 1] = this.y,
                    e
                },
                fromBufferAttribute: function(e, t, r) {
                    return void 0 !== r && console.warn("GASEngine.Vector2: offset has been removed from .fromBufferAttribute()."),
                    this.x = e.getX(t),
                    this.y = e.getY(t),
                    this
                },
                rotateAround: function(e, t) {
                    var r = Math.cos(t)
                      , n = Math.sin(t)
                      , i = this.x - e.x
                      , a = this.y - e.y;
                    return this.x = i * r - a * n + e.x,
                    this.y = i * n + a * r + e.y,
                    this
                }
            };
            var gs = 0;
            n.DEFAULT_IMAGE = void 0,
            n.DEFAULT_MAPPING = eo,
            n.prototype = {
                constructor: n,
                isTexture: !0,
                set needsUpdate(e) {
                    e === !0 && this.version++
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.name = e.name + " (Copy)",
                    this.image = e.image,
                    this.mipmaps = e.mipmaps.slice(0),
                    this.mapping = e.mapping,
                    this.wrapS = e.wrapS,
                    this.wrapT = e.wrapT,
                    this.magFilter = e.magFilter,
                    this.minFilter = e.minFilter,
                    this.anisotropy = e.anisotropy,
                    this.format = e.format,
                    this.type = e.type,
                    this.offset.copy(e.offset),
                    this.repeat.copy(e.repeat),
                    this.generateMipmaps = e.generateMipmaps,
                    this.premultiplyAlpha = e.premultiplyAlpha,
                    this.flipY = e.flipY,
                    this.unpackAlignment = e.unpackAlignment,
                    this.encoding = e.encoding,
                    this
                },
                toJSON: function(e) {
                    function t(e) {
                        var t;
                        return void 0 !== e.toDataURL ? t = e : (t = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"),
                        t.width = e.width,
                        t.height = e.height,
                        t.getContext("2d").drawImage(e, 0, 0, e.width, e.height)),
                        t.width > 2048 || t.height > 2048 ? t.toDataURL("image/jpeg", .6) : t.toDataURL("image/png")
                    }
                    if (void 0 !== e.textures[this.uuid])
                        return e.textures[this.uuid];
                    var r = {
                        metadata: {
                            version: 4.4,
                            type: "Texture",
                            generator: "Texture.toJSON"
                        },
                        uuid: this.uuid,
                        name: this.name,
                        mapping: this.mapping,
                        repeat: [this.repeat.x, this.repeat.y],
                        offset: [this.offset.x, this.offset.y],
                        wrap: [this.wrapS, this.wrapT],
                        minFilter: this.minFilter,
                        magFilter: this.magFilter,
                        anisotropy: this.anisotropy,
                        flipY: this.flipY
                    };
                    if (void 0 !== this.image) {
                        var n = this.image;
                        void 0 === n.uuid && (n.uuid = ms.generateUUID()),
                        void 0 === e.images[n.uuid] && (e.images[n.uuid] = {
                            uuid: n.uuid,
                            url: t(n)
                        }),
                        r.image = n.uuid
                    }
                    return e.textures[this.uuid] = r,
                    r
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                },
                transformUv: function(e) {
                    if (this.mapping === eo) {
                        if (e.multiply(this.repeat),
                        e.add(this.offset),
                        e.x < 0 || e.x > 1)
                            switch (this.wrapS) {
                            case uo:
                                e.x = e.x - Math.floor(e.x);
                                break;
                            case lo:
                                e.x = e.x < 0 ? 0 : 1;
                                break;
                            case co:
                                1 === Math.abs(Math.floor(e.x) % 2) ? e.x = Math.ceil(e.x) - e.x : e.x = e.x - Math.floor(e.x)
                            }
                        if (e.y < 0 || e.y > 1)
                            switch (this.wrapT) {
                            case uo:
                                e.y = e.y - Math.floor(e.y);
                                break;
                            case lo:
                                e.y = e.y < 0 ? 0 : 1;
                                break;
                            case co:
                                1 === Math.abs(Math.floor(e.y) % 2) ? e.y = Math.ceil(e.y) - e.y : e.y = e.y - Math.floor(e.y)
                            }
                        this.flipY && (e.y = 1 - e.y)
                    }
                }
            },
            Object.assign(n.prototype, t.prototype),
            i.prototype = {
                constructor: i,
                isVector4: !0,
                set: function(e, t, r, n) {
                    return this.x = e,
                    this.y = t,
                    this.z = r,
                    this.w = n,
                    this
                },
                setScalar: function(e) {
                    return this.x = e,
                    this.y = e,
                    this.z = e,
                    this.w = e,
                    this
                },
                setX: function(e) {
                    return this.x = e,
                    this
                },
                setY: function(e) {
                    return this.y = e,
                    this
                },
                setZ: function(e) {
                    return this.z = e,
                    this
                },
                setW: function(e) {
                    return this.w = e,
                    this
                },
                setComponent: function(e, t) {
                    switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    case 3:
                        this.w = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                    }
                    return this
                },
                getComponent: function(e) {
                    switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    case 3:
                        return this.w;
                    default:
                        throw new Error("index is out of range: " + e)
                    }
                },
                clone: function() {
                    return new this.constructor(this.x,this.y,this.z,this.w)
                },
                copy: function(e) {
                    return this.x = e.x,
                    this.y = e.y,
                    this.z = e.z,
                    this.w = void 0 !== e.w ? e.w : 1,
                    this
                },
                add: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                    this.addVectors(e, t)) : (this.x += e.x,
                    this.y += e.y,
                    this.z += e.z,
                    this.w += e.w,
                    this)
                },
                addScalar: function(e) {
                    return this.x += e,
                    this.y += e,
                    this.z += e,
                    this.w += e,
                    this
                },
                addVectors: function(e, t) {
                    return this.x = e.x + t.x,
                    this.y = e.y + t.y,
                    this.z = e.z + t.z,
                    this.w = e.w + t.w,
                    this
                },
                addScaledVector: function(e, t) {
                    return this.x += e.x * t,
                    this.y += e.y * t,
                    this.z += e.z * t,
                    this.w += e.w * t,
                    this
                },
                sub: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                    this.subVectors(e, t)) : (this.x -= e.x,
                    this.y -= e.y,
                    this.z -= e.z,
                    this.w -= e.w,
                    this)
                },
                subScalar: function(e) {
                    return this.x -= e,
                    this.y -= e,
                    this.z -= e,
                    this.w -= e,
                    this
                },
                subVectors: function(e, t) {
                    return this.x = e.x - t.x,
                    this.y = e.y - t.y,
                    this.z = e.z - t.z,
                    this.w = e.w - t.w,
                    this
                },
                multiplyScalar: function(e) {
                    return isFinite(e) ? (this.x *= e,
                    this.y *= e,
                    this.z *= e,
                    this.w *= e) : (this.x = 0,
                    this.y = 0,
                    this.z = 0,
                    this.w = 0),
                    this
                },
                applyMatrix4: function(e) {
                    var t = this.x
                      , r = this.y
                      , n = this.z
                      , i = this.w
                      , a = e.elements;
                    return this.x = a[0] * t + a[4] * r + a[8] * n + a[12] * i,
                    this.y = a[1] * t + a[5] * r + a[9] * n + a[13] * i,
                    this.z = a[2] * t + a[6] * r + a[10] * n + a[14] * i,
                    this.w = a[3] * t + a[7] * r + a[11] * n + a[15] * i,
                    this
                },
                divideScalar: function(e) {
                    return this.multiplyScalar(1 / e)
                },
                setAxisAngleFromQuaternion: function(e) {
                    this.w = 2 * Math.acos(e.w);
                    var t = Math.sqrt(1 - e.w * e.w);
                    return t < 1e-4 ? (this.x = 1,
                    this.y = 0,
                    this.z = 0) : (this.x = e.x / t,
                    this.y = e.y / t,
                    this.z = e.z / t),
                    this
                },
                setAxisAngleFromRotationMatrix: function(e) {
                    var t, r, n, i, a = .01, o = .1, s = e.elements, u = s[0], l = s[4], c = s[8], h = s[1], f = s[5], d = s[9], p = s[2], m = s[6], g = s[10];
                    if (Math.abs(l - h) < a && Math.abs(c - p) < a && Math.abs(d - m) < a) {
                        if (Math.abs(l + h) < o && Math.abs(c + p) < o && Math.abs(d + m) < o && Math.abs(u + f + g - 3) < o)
                            return this.set(1, 0, 0, 0),
                            this;
                        t = Math.PI;
                        var v = (u + 1) / 2
                          , y = (f + 1) / 2
                          , M = (g + 1) / 2
                          , w = (l + h) / 4
                          , x = (c + p) / 4
                          , A = (d + m) / 4;
                        return v > y && v > M ? v < a ? (r = 0,
                        n = .707106781,
                        i = .707106781) : (r = Math.sqrt(v),
                        n = w / r,
                        i = x / r) : y > M ? y < a ? (r = .707106781,
                        n = 0,
                        i = .707106781) : (n = Math.sqrt(y),
                        r = w / n,
                        i = A / n) : M < a ? (r = .707106781,
                        n = .707106781,
                        i = 0) : (i = Math.sqrt(M),
                        r = x / i,
                        n = A / i),
                        this.set(r, n, i, t),
                        this
                    }
                    var b = Math.sqrt((m - d) * (m - d) + (c - p) * (c - p) + (h - l) * (h - l));
                    return Math.abs(b) < .001 && (b = 1),
                    this.x = (m - d) / b,
                    this.y = (c - p) / b,
                    this.z = (h - l) / b,
                    this.w = Math.acos((u + f + g - 1) / 2),
                    this
                },
                min: function(e) {
                    return this.x = Math.min(this.x, e.x),
                    this.y = Math.min(this.y, e.y),
                    this.z = Math.min(this.z, e.z),
                    this.w = Math.min(this.w, e.w),
                    this
                },
                max: function(e) {
                    return this.x = Math.max(this.x, e.x),
                    this.y = Math.max(this.y, e.y),
                    this.z = Math.max(this.z, e.z),
                    this.w = Math.max(this.w, e.w),
                    this
                },
                clamp: function(e, t) {
                    return this.x = Math.max(e.x, Math.min(t.x, this.x)),
                    this.y = Math.max(e.y, Math.min(t.y, this.y)),
                    this.z = Math.max(e.z, Math.min(t.z, this.z)),
                    this.w = Math.max(e.w, Math.min(t.w, this.w)),
                    this
                },
                clampScalar: function() {
                    var e, t;
                    return function(r, n) {
                        return void 0 === e && (e = new i,
                        t = new i),
                        e.set(r, r, r, r),
                        t.set(n, n, n, n),
                        this.clamp(e, t)
                    }
                }(),
                floor: function() {
                    return this.x = Math.floor(this.x),
                    this.y = Math.floor(this.y),
                    this.z = Math.floor(this.z),
                    this.w = Math.floor(this.w),
                    this
                },
                ceil: function() {
                    return this.x = Math.ceil(this.x),
                    this.y = Math.ceil(this.y),
                    this.z = Math.ceil(this.z),
                    this.w = Math.ceil(this.w),
                    this
                },
                round: function() {
                    return this.x = Math.round(this.x),
                    this.y = Math.round(this.y),
                    this.z = Math.round(this.z),
                    this.w = Math.round(this.w),
                    this
                },
                roundToZero: function() {
                    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                    this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z),
                    this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w),
                    this
                },
                negate: function() {
                    return this.x = -this.x,
                    this.y = -this.y,
                    this.z = -this.z,
                    this.w = -this.w,
                    this
                },
                dot: function(e) {
                    return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
                },
                lengthSq: function() {
                    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
                },
                length: function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
                },
                lengthManhattan: function() {
                    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
                },
                normalize: function() {
                    return this.divideScalar(this.length())
                },
                setLength: function(e) {
                    return this.multiplyScalar(e / this.length())
                },
                lerp: function(e, t) {
                    return this.x += (e.x - this.x) * t,
                    this.y += (e.y - this.y) * t,
                    this.z += (e.z - this.z) * t,
                    this.w += (e.w - this.w) * t,
                    this
                },
                lerpVectors: function(e, t, r) {
                    return this.subVectors(t, e).multiplyScalar(r).add(e)
                },
                equals: function(e) {
                    return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
                },
                fromArray: function(e, t) {
                    return void 0 === t && (t = 0),
                    this.x = e[t],
                    this.y = e[t + 1],
                    this.z = e[t + 2],
                    this.w = e[t + 3],
                    this
                },
                toArray: function(e, t) {
                    return void 0 === e && (e = []),
                    void 0 === t && (t = 0),
                    e[t] = this.x,
                    e[t + 1] = this.y,
                    e[t + 2] = this.z,
                    e[t + 3] = this.w,
                    e
                },
                fromBufferAttribute: function(e, t, r) {
                    return void 0 !== r && console.warn("GASEngine.Vector4: offset has been removed from .fromBufferAttribute()."),
                    this.x = e.getX(t),
                    this.y = e.getY(t),
                    this.z = e.getZ(t),
                    this.w = e.getW(t),
                    this
                }
            },
            a.prototype = {
                constructor: a,
                isWebGLRenderTarget: !0,
                setSize: function(e, t) {
                    this.width === e && this.height === t || (this.width = e,
                    this.height = t,
                    this.dispose()),
                    this.viewport.set(0, 0, e, t),
                    this.scissor.set(0, 0, e, t)
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.width = e.width,
                    this.height = e.height,
                    this.viewport.copy(e.viewport),
                    this.texture = e.texture.clone(),
                    this.depthBuffer = e.depthBuffer,
                    this.stencilBuffer = e.stencilBuffer,
                    this.depthTexture = e.depthTexture,
                    this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            },
            Object.assign(a.prototype, t.prototype),
            o.prototype = Object.create(a.prototype),
            o.prototype.constructor = o,
            o.prototype.isWebGLRenderTargetCube = !0,
            s.prototype = {
                constructor: s,
                get x() {
                    return this._x
                },
                set x(e) {
                    this._x = e,
                    this.onChangeCallback()
                },
                get y() {
                    return this._y
                },
                set y(e) {
                    this._y = e,
                    this.onChangeCallback()
                },
                get z() {
                    return this._z
                },
                set z(e) {
                    this._z = e,
                    this.onChangeCallback()
                },
                get w() {
                    return this._w
                },
                set w(e) {
                    this._w = e,
                    this.onChangeCallback()
                },
                set: function(e, t, r, n) {
                    return this._x = e,
                    this._y = t,
                    this._z = r,
                    this._w = n,
                    this.onChangeCallback(),
                    this
                },
                clone: function() {
                    return new this.constructor(this._x,this._y,this._z,this._w)
                },
                copy: function(e) {
                    return this._x = e.x,
                    this._y = e.y,
                    this._z = e.z,
                    this._w = e.w,
                    this.onChangeCallback(),
                    this
                },
                setFromEuler: function(e, t) {
                    if ((e && e.isEuler) === !1)
                        throw new Error("GASEngine.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
                    var r = Math.cos(e._x / 2)
                      , n = Math.cos(e._y / 2)
                      , i = Math.cos(e._z / 2)
                      , a = Math.sin(e._x / 2)
                      , o = Math.sin(e._y / 2)
                      , s = Math.sin(e._z / 2)
                      , u = e.order;
                    return "XYZ" === u ? (this._x = a * n * i + r * o * s,
                    this._y = r * o * i - a * n * s,
                    this._z = r * n * s + a * o * i,
                    this._w = r * n * i - a * o * s) : "YXZ" === u ? (this._x = a * n * i + r * o * s,
                    this._y = r * o * i - a * n * s,
                    this._z = r * n * s - a * o * i,
                    this._w = r * n * i + a * o * s) : "ZXY" === u ? (this._x = a * n * i - r * o * s,
                    this._y = r * o * i + a * n * s,
                    this._z = r * n * s + a * o * i,
                    this._w = r * n * i - a * o * s) : "ZYX" === u ? (this._x = a * n * i - r * o * s,
                    this._y = r * o * i + a * n * s,
                    this._z = r * n * s - a * o * i,
                    this._w = r * n * i + a * o * s) : "YZX" === u ? (this._x = a * n * i + r * o * s,
                    this._y = r * o * i + a * n * s,
                    this._z = r * n * s - a * o * i,
                    this._w = r * n * i - a * o * s) : "XZY" === u && (this._x = a * n * i - r * o * s,
                    this._y = r * o * i - a * n * s,
                    this._z = r * n * s + a * o * i,
                    this._w = r * n * i + a * o * s),
                    t !== !1 && this.onChangeCallback(),
                    this
                },
                setFromAxisAngle: function(e, t) {
                    var r = t / 2
                      , n = Math.sin(r);
                    return this._x = e.x * n,
                    this._y = e.y * n,
                    this._z = e.z * n,
                    this._w = Math.cos(r),
                    this.onChangeCallback(),
                    this
                },
                setFromRotationMatrix: function(e) {
                    var t, r = e.elements, n = r[0], i = r[4], a = r[8], o = r[1], s = r[5], u = r[9], l = r[2], c = r[6], h = r[10], f = n + s + h;
                    return f > 0 ? (t = .5 / Math.sqrt(f + 1),
                    this._w = .25 / t,
                    this._x = (c - u) * t,
                    this._y = (a - l) * t,
                    this._z = (o - i) * t) : n > s && n > h ? (t = 2 * Math.sqrt(1 + n - s - h),
                    this._w = (c - u) / t,
                    this._x = .25 * t,
                    this._y = (i + o) / t,
                    this._z = (a + l) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - n - h),
                    this._w = (a - l) / t,
                    this._x = (i + o) / t,
                    this._y = .25 * t,
                    this._z = (u + c) / t) : (t = 2 * Math.sqrt(1 + h - n - s),
                    this._w = (o - i) / t,
                    this._x = (a + l) / t,
                    this._y = (u + c) / t,
                    this._z = .25 * t),
                    this.onChangeCallback(),
                    this
                },
                setFromUnitVectors: function() {
                    var e, t, r = 1e-6;
                    return function(n, i) {
                        return void 0 === e && (e = new u),
                        t = n.dot(i) + 1,
                        t < r ? (t = 0,
                        Math.abs(n.x) > Math.abs(n.z) ? e.set(-n.y, n.x, 0) : e.set(0, -n.z, n.y)) : e.crossVectors(n, i),
                        this._x = e.x,
                        this._y = e.y,
                        this._z = e.z,
                        this._w = t,
                        this.normalize()
                    }
                }(),
                inverse: function() {
                    return this.conjugate().normalize()
                },
                conjugate: function() {
                    return this._x *= -1,
                    this._y *= -1,
                    this._z *= -1,
                    this.onChangeCallback(),
                    this
                },
                dot: function(e) {
                    return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
                },
                lengthSq: function() {
                    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
                },
                length: function() {
                    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
                },
                normalize: function() {
                    var e = this.length();
                    return 0 === e ? (this._x = 0,
                    this._y = 0,
                    this._z = 0,
                    this._w = 1) : (e = 1 / e,
                    this._x = this._x * e,
                    this._y = this._y * e,
                    this._z = this._z * e,
                    this._w = this._w * e),
                    this.onChangeCallback(),
                    this
                },
                multiply: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
                    this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
                },
                premultiply: function(e) {
                    return this.multiplyQuaternions(e, this)
                },
                multiplyQuaternions: function(e, t) {
                    var r = e._x
                      , n = e._y
                      , i = e._z
                      , a = e._w
                      , o = t._x
                      , s = t._y
                      , u = t._z
                      , l = t._w;
                    return this._x = r * l + a * o + n * u - i * s,
                    this._y = n * l + a * s + i * o - r * u,
                    this._z = i * l + a * u + r * s - n * o,
                    this._w = a * l - r * o - n * s - i * u,
                    this.onChangeCallback(),
                    this
                },
                slerp: function(e, t) {
                    if (0 === t)
                        return this;
                    if (1 === t)
                        return this.copy(e);
                    var r = this._x
                      , n = this._y
                      , i = this._z
                      , a = this._w
                      , o = a * e._w + r * e._x + n * e._y + i * e._z;
                    if (o < 0 ? (this._w = -e._w,
                    this._x = -e._x,
                    this._y = -e._y,
                    this._z = -e._z,
                    o = -o) : this.copy(e),
                    o >= 1)
                        return this._w = a,
                        this._x = r,
                        this._y = n,
                        this._z = i,
                        this;
                    var s = Math.sqrt(1 - o * o);
                    if (Math.abs(s) < .001)
                        return this._w = .5 * (a + this._w),
                        this._x = .5 * (r + this._x),
                        this._y = .5 * (n + this._y),
                        this._z = .5 * (i + this._z),
                        this;
                    var u = Math.atan2(s, o)
                      , l = Math.sin((1 - t) * u) / s
                      , c = Math.sin(t * u) / s;
                    return this._w = a * l + this._w * c,
                    this._x = r * l + this._x * c,
                    this._y = n * l + this._y * c,
                    this._z = i * l + this._z * c,
                    this.onChangeCallback(),
                    this
                },
                equals: function(e) {
                    return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
                },
                fromArray: function(e, t) {
                    return void 0 === t && (t = 0),
                    this._x = e[t],
                    this._y = e[t + 1],
                    this._z = e[t + 2],
                    this._w = e[t + 3],
                    this.onChangeCallback(),
                    this
                },
                toArray: function(e, t) {
                    return void 0 === e && (e = []),
                    void 0 === t && (t = 0),
                    e[t] = this._x,
                    e[t + 1] = this._y,
                    e[t + 2] = this._z,
                    e[t + 3] = this._w,
                    e
                },
                onChange: function(e) {
                    return this.onChangeCallback = e,
                    this
                },
                onChangeCallback: function() {}
            },
            Object.assign(s, {
                slerp: function(e, t, r, n) {
                    return r.copy(e).slerp(t, n)
                },
                slerpFlat: function(e, t, r, n, i, a, o) {
                    var s = r[n + 0]
                      , u = r[n + 1]
                      , l = r[n + 2]
                      , c = r[n + 3]
                      , h = i[a + 0]
                      , f = i[a + 1]
                      , d = i[a + 2]
                      , p = i[a + 3];
                    if (c !== p || s !== h || u !== f || l !== d) {
                        var m = 1 - o
                          , g = s * h + u * f + l * d + c * p
                          , v = g >= 0 ? 1 : -1
                          , y = 1 - g * g;
                        if (y > Number.EPSILON) {
                            var M = Math.sqrt(y)
                              , w = Math.atan2(M, g * v);
                            m = Math.sin(m * w) / M,
                            o = Math.sin(o * w) / M
                        }
                        var x = o * v;
                        if (s = s * m + h * x,
                        u = u * m + f * x,
                        l = l * m + d * x,
                        c = c * m + p * x,
                        m === 1 - o) {
                            var A = 1 / Math.sqrt(s * s + u * u + l * l + c * c);
                            s *= A,
                            u *= A,
                            l *= A,
                            c *= A
                        }
                    }
                    e[t] = s,
                    e[t + 1] = u,
                    e[t + 2] = l,
                    e[t + 3] = c
                }
            }),
            u.prototype = {
                constructor: u,
                isVector3: !0,
                set: function(e, t, r) {
                    return this.x = e,
                    this.y = t,
                    this.z = r,
                    this
                },
                setScalar: function(e) {
                    return this.x = e,
                    this.y = e,
                    this.z = e,
                    this
                },
                setX: function(e) {
                    return this.x = e,
                    this
                },
                setY: function(e) {
                    return this.y = e,
                    this
                },
                setZ: function(e) {
                    return this.z = e,
                    this
                },
                setComponent: function(e, t) {
                    switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    default:
                        throw new Error("index is out of range: " + e)
                    }
                    return this
                },
                getComponent: function(e) {
                    switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    default:
                        throw new Error("index is out of range: " + e)
                    }
                },
                clone: function() {
                    return new this.constructor(this.x,this.y,this.z)
                },
                copy: function(e) {
                    return this.x = e.x,
                    this.y = e.y,
                    this.z = e.z,
                    this
                },
                add: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                    this.addVectors(e, t)) : (this.x += e.x,
                    this.y += e.y,
                    this.z += e.z,
                    this)
                },
                addScalar: function(e) {
                    return this.x += e,
                    this.y += e,
                    this.z += e,
                    this
                },
                addVectors: function(e, t) {
                    return this.x = e.x + t.x,
                    this.y = e.y + t.y,
                    this.z = e.z + t.z,
                    this
                },
                addScaledVector: function(e, t) {
                    return this.x += e.x * t,
                    this.y += e.y * t,
                    this.z += e.z * t,
                    this
                },
                sub: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                    this.subVectors(e, t)) : (this.x -= e.x,
                    this.y -= e.y,
                    this.z -= e.z,
                    this)
                },
                subScalar: function(e) {
                    return this.x -= e,
                    this.y -= e,
                    this.z -= e,
                    this
                },
                subVectors: function(e, t) {
                    return this.x = e.x - t.x,
                    this.y = e.y - t.y,
                    this.z = e.z - t.z,
                    this
                },
                multiply: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
                    this.multiplyVectors(e, t)) : (this.x *= e.x,
                    this.y *= e.y,
                    this.z *= e.z,
                    this)
                },
                multiplyScalar: function(e) {
                    return isFinite(e) ? (this.x *= e,
                    this.y *= e,
                    this.z *= e) : (this.x = 0,
                    this.y = 0,
                    this.z = 0),
                    this
                },
                multiplyVectors: function(e, t) {
                    return this.x = e.x * t.x,
                    this.y = e.y * t.y,
                    this.z = e.z * t.z,
                    this
                },
                applyEuler: function() {
                    var e;
                    return function(t) {
                        return (t && t.isEuler) === !1 && console.error("GASEngine.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),
                        void 0 === e && (e = new s),
                        this.applyQuaternion(e.setFromEuler(t))
                    }
                }(),
                applyAxisAngle: function() {
                    var e;
                    return function(t, r) {
                        return void 0 === e && (e = new s),
                        this.applyQuaternion(e.setFromAxisAngle(t, r))
                    }
                }(),
                applyMatrix3: function(e) {
                    var t = this.x
                      , r = this.y
                      , n = this.z
                      , i = e.elements;
                    return this.x = i[0] * t + i[3] * r + i[6] * n,
                    this.y = i[1] * t + i[4] * r + i[7] * n,
                    this.z = i[2] * t + i[5] * r + i[8] * n,
                    this
                },
                applyMatrix4: function(e) {
                    var t = this.x
                      , r = this.y
                      , n = this.z
                      , i = e.elements;
                    this.x = i[0] * t + i[4] * r + i[8] * n + i[12],
                    this.y = i[1] * t + i[5] * r + i[9] * n + i[13],
                    this.z = i[2] * t + i[6] * r + i[10] * n + i[14];
                    var a = i[3] * t + i[7] * r + i[11] * n + i[15];
                    return this.divideScalar(a)
                },
                applyQuaternion: function(e) {
                    var t = this.x
                      , r = this.y
                      , n = this.z
                      , i = e.x
                      , a = e.y
                      , o = e.z
                      , s = e.w
                      , u = s * t + a * n - o * r
                      , l = s * r + o * t - i * n
                      , c = s * n + i * r - a * t
                      , h = -i * t - a * r - o * n;
                    return this.x = u * s + h * -i + l * -o - c * -a,
                    this.y = l * s + h * -a + c * -i - u * -o,
                    this.z = c * s + h * -o + u * -a - l * -i,
                    this
                },
                project: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.multiplyMatrices(t.projectionMatrix, e.getInverse(t.matrixWorld)),
                        this.applyMatrix4(e)
                    }
                }(),
                unproject: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.multiplyMatrices(t.matrixWorld, e.getInverse(t.projectionMatrix)),
                        this.applyMatrix4(e)
                    }
                }(),
                transformDirection: function(e) {
                    var t = this.x
                      , r = this.y
                      , n = this.z
                      , i = e.elements;
                    return this.x = i[0] * t + i[4] * r + i[8] * n,
                    this.y = i[1] * t + i[5] * r + i[9] * n,
                    this.z = i[2] * t + i[6] * r + i[10] * n,
                    this.normalize()
                },
                divide: function(e) {
                    return this.x /= e.x,
                    this.y /= e.y,
                    this.z /= e.z,
                    this
                },
                divideScalar: function(e) {
                    return this.multiplyScalar(1 / e)
                },
                min: function(e) {
                    return this.x = Math.min(this.x, e.x),
                    this.y = Math.min(this.y, e.y),
                    this.z = Math.min(this.z, e.z),
                    this
                },
                max: function(e) {
                    return this.x = Math.max(this.x, e.x),
                    this.y = Math.max(this.y, e.y),
                    this.z = Math.max(this.z, e.z),
                    this
                },
                clamp: function(e, t) {
                    return this.x = Math.max(e.x, Math.min(t.x, this.x)),
                    this.y = Math.max(e.y, Math.min(t.y, this.y)),
                    this.z = Math.max(e.z, Math.min(t.z, this.z)),
                    this
                },
                clampScalar: function() {
                    var e, t;
                    return function(r, n) {
                        return void 0 === e && (e = new u,
                        t = new u),
                        e.set(r, r, r),
                        t.set(n, n, n),
                        this.clamp(e, t)
                    }
                }(),
                clampLength: function(e, t) {
                    var r = this.length();
                    return this.multiplyScalar(Math.max(e, Math.min(t, r)) / r)
                },
                floor: function() {
                    return this.x = Math.floor(this.x),
                    this.y = Math.floor(this.y),
                    this.z = Math.floor(this.z),
                    this
                },
                ceil: function() {
                    return this.x = Math.ceil(this.x),
                    this.y = Math.ceil(this.y),
                    this.z = Math.ceil(this.z),
                    this
                },
                round: function() {
                    return this.x = Math.round(this.x),
                    this.y = Math.round(this.y),
                    this.z = Math.round(this.z),
                    this
                },
                roundToZero: function() {
                    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                    this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                    this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z),
                    this
                },
                negate: function() {
                    return this.x = -this.x,
                    this.y = -this.y,
                    this.z = -this.z,
                    this
                },
                dot: function(e) {
                    return this.x * e.x + this.y * e.y + this.z * e.z
                },
                lengthSq: function() {
                    return this.x * this.x + this.y * this.y + this.z * this.z
                },
                length: function() {
                    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
                },
                lengthManhattan: function() {
                    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
                },
                normalize: function() {
                    return this.divideScalar(this.length())
                },
                setLength: function(e) {
                    return this.multiplyScalar(e / this.length())
                },
                lerp: function(e, t) {
                    return this.x += (e.x - this.x) * t,
                    this.y += (e.y - this.y) * t,
                    this.z += (e.z - this.z) * t,
                    this
                },
                lerpVectors: function(e, t, r) {
                    return this.subVectors(t, e).multiplyScalar(r).add(e)
                },
                cross: function(e, t) {
                    if (void 0 !== t)
                        return console.warn("GASEngine.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
                        this.crossVectors(e, t);
                    var r = this.x
                      , n = this.y
                      , i = this.z;
                    return this.x = n * e.z - i * e.y,
                    this.y = i * e.x - r * e.z,
                    this.z = r * e.y - n * e.x,
                    this
                },
                crossVectors: function(e, t) {
                    var r = e.x
                      , n = e.y
                      , i = e.z
                      , a = t.x
                      , o = t.y
                      , s = t.z;
                    return this.x = n * s - i * o,
                    this.y = i * a - r * s,
                    this.z = r * o - n * a,
                    this
                },
                projectOnVector: function(e) {
                    var t = e.dot(this) / e.lengthSq();
                    return this.copy(e).multiplyScalar(t)
                },
                projectOnPlane: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new u),
                        e.copy(this).projectOnVector(t),
                        this.sub(e)
                    }
                }(),
                reflect: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new u),
                        this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
                    }
                }(),
                angleTo: function(e) {
                    var t = this.dot(e) / Math.sqrt(this.lengthSq() * e.lengthSq());
                    return Math.acos(ms.clamp(t, -1, 1))
                },
                distanceTo: function(e) {
                    return Math.sqrt(this.distanceToSquared(e))
                },
                distanceToSquared: function(e) {
                    var t = this.x - e.x
                      , r = this.y - e.y
                      , n = this.z - e.z;
                    return t * t + r * r + n * n
                },
                distanceToManhattan: function(e) {
                    return Math.abs(this.x - e.x) + Math.abs(this.y - e.y) + Math.abs(this.z - e.z)
                },
                setFromSpherical: function(e) {
                    var t = Math.sin(e.phi) * e.radius;
                    return this.x = t * Math.sin(e.theta),
                    this.y = Math.cos(e.phi) * e.radius,
                    this.z = t * Math.cos(e.theta),
                    this
                },
                setFromCylindrical: function(e) {
                    return this.x = e.radius * Math.sin(e.theta),
                    this.y = e.y,
                    this.z = e.radius * Math.cos(e.theta),
                    this
                },
                setFromMatrixPosition: function(e) {
                    return this.setFromMatrixColumn(e, 3)
                },
                setFromMatrixScale: function(e) {
                    var t = this.setFromMatrixColumn(e, 0).length()
                      , r = this.setFromMatrixColumn(e, 1).length()
                      , n = this.setFromMatrixColumn(e, 2).length();
                    return this.x = t,
                    this.y = r,
                    this.z = n,
                    this
                },
                setFromMatrixColumn: function(e, t) {
                    if ("number" == typeof e) {
                        console.warn("GASEngine.Vector3: setFromMatrixColumn now expects ( matrix, index ).");
                        var r = e;
                        e = t,
                        t = r
                    }
                    return this.fromArray(e.elements, 4 * t)
                },
                equals: function(e) {
                    return e.x === this.x && e.y === this.y && e.z === this.z
                },
                fromArray: function(e, t) {
                    return void 0 === t && (t = 0),
                    this.x = e[t],
                    this.y = e[t + 1],
                    this.z = e[t + 2],
                    this
                },
                toArray: function(e, t) {
                    return void 0 === e && (e = []),
                    void 0 === t && (t = 0),
                    e[t] = this.x,
                    e[t + 1] = this.y,
                    e[t + 2] = this.z,
                    e
                },
                fromBufferAttribute: function(e, t, r) {
                    return void 0 !== r && console.warn("GASEngine.Vector3: offset has been removed from .fromBufferAttribute()."),
                    this.x = e.getX(t),
                    this.y = e.getY(t),
                    this.z = e.getZ(t),
                    this
                }
            },
            l.prototype = {
                constructor: l,
                isMatrix4: !0,
                set: function(e, t, r, n, i, a, o, s, u, l, c, h, f, d, p, m) {
                    var g = this.elements;
                    return g[0] = e,
                    g[4] = t,
                    g[8] = r,
                    g[12] = n,
                    g[1] = i,
                    g[5] = a,
                    g[9] = o,
                    g[13] = s,
                    g[2] = u,
                    g[6] = l,
                    g[10] = c,
                    g[14] = h,
                    g[3] = f,
                    g[7] = d,
                    g[11] = p,
                    g[15] = m,
                    this
                },
                identity: function() {
                    return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                    this
                },
                clone: function() {
                    return (new l).fromArray(this.elements)
                },
                copy: function(e) {
                    return this.elements.set(e.elements),
                    this
                },
                copyPosition: function(e) {
                    var t = this.elements
                      , r = e.elements;
                    return t[12] = r[12],
                    t[13] = r[13],
                    t[14] = r[14],
                    this
                },
                extractBasis: function(e, t, r) {
                    return e.setFromMatrixColumn(this, 0),
                    t.setFromMatrixColumn(this, 1),
                    r.setFromMatrixColumn(this, 2),
                    this
                },
                makeBasis: function(e, t, r) {
                    return this.set(e.x, t.x, r.x, 0, e.y, t.y, r.y, 0, e.z, t.z, r.z, 0, 0, 0, 0, 1),
                    this
                },
                extractRotation: function() {
                    var e;
                    return function(t) {
                        void 0 === e && (e = new u);
                        var r = this.elements
                          , n = t.elements
                          , i = 1 / e.setFromMatrixColumn(t, 0).length()
                          , a = 1 / e.setFromMatrixColumn(t, 1).length()
                          , o = 1 / e.setFromMatrixColumn(t, 2).length();
                        return r[0] = n[0] * i,
                        r[1] = n[1] * i,
                        r[2] = n[2] * i,
                        r[4] = n[4] * a,
                        r[5] = n[5] * a,
                        r[6] = n[6] * a,
                        r[8] = n[8] * o,
                        r[9] = n[9] * o,
                        r[10] = n[10] * o,
                        this
                    }
                }(),
                makeRotationFromEuler: function(e) {
                    (e && e.isEuler) === !1 && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                    var t = this.elements
                      , r = e.x
                      , n = e.y
                      , i = e.z
                      , a = Math.cos(r)
                      , o = Math.sin(r)
                      , s = Math.cos(n)
                      , u = Math.sin(n)
                      , l = Math.cos(i)
                      , c = Math.sin(i);
                    if ("XYZ" === e.order) {
                        var h = a * l
                          , f = a * c
                          , d = o * l
                          , p = o * c;
                        t[0] = s * l,
                        t[4] = -s * c,
                        t[8] = u,
                        t[1] = f + d * u,
                        t[5] = h - p * u,
                        t[9] = -o * s,
                        t[2] = p - h * u,
                        t[6] = d + f * u,
                        t[10] = a * s
                    } else if ("YXZ" === e.order) {
                        var m = s * l
                          , g = s * c
                          , v = u * l
                          , y = u * c;
                        t[0] = m + y * o,
                        t[4] = v * o - g,
                        t[8] = a * u,
                        t[1] = a * c,
                        t[5] = a * l,
                        t[9] = -o,
                        t[2] = g * o - v,
                        t[6] = y + m * o,
                        t[10] = a * s
                    } else if ("ZXY" === e.order) {
                        var m = s * l
                          , g = s * c
                          , v = u * l
                          , y = u * c;
                        t[0] = m - y * o,
                        t[4] = -a * c,
                        t[8] = v + g * o,
                        t[1] = g + v * o,
                        t[5] = a * l,
                        t[9] = y - m * o,
                        t[2] = -a * u,
                        t[6] = o,
                        t[10] = a * s
                    } else if ("ZYX" === e.order) {
                        var h = a * l
                          , f = a * c
                          , d = o * l
                          , p = o * c;
                        t[0] = s * l,
                        t[4] = d * u - f,
                        t[8] = h * u + p,
                        t[1] = s * c,
                        t[5] = p * u + h,
                        t[9] = f * u - d,
                        t[2] = -u,
                        t[6] = o * s,
                        t[10] = a * s
                    } else if ("YZX" === e.order) {
                        var M = a * s
                          , w = a * u
                          , x = o * s
                          , A = o * u;
                        t[0] = s * l,
                        t[4] = A - M * c,
                        t[8] = x * c + w,
                        t[1] = c,
                        t[5] = a * l,
                        t[9] = -o * l,
                        t[2] = -u * l,
                        t[6] = w * c + x,
                        t[10] = M - A * c
                    } else if ("XZY" === e.order) {
                        var M = a * s
                          , w = a * u
                          , x = o * s
                          , A = o * u;
                        t[0] = s * l,
                        t[4] = -c,
                        t[8] = u * l,
                        t[1] = M * c + A,
                        t[5] = a * l,
                        t[9] = w * c - x,
                        t[2] = x * c - w,
                        t[6] = o * l,
                        t[10] = A * c + M
                    }
                    return t[3] = 0,
                    t[7] = 0,
                    t[11] = 0,
                    t[12] = 0,
                    t[13] = 0,
                    t[14] = 0,
                    t[15] = 1,
                    this
                },
                makeRotationFromQuaternion: function(e) {
                    var t = this.elements
                      , r = e.x
                      , n = e.y
                      , i = e.z
                      , a = e.w
                      , o = r + r
                      , s = n + n
                      , u = i + i
                      , l = r * o
                      , c = r * s
                      , h = r * u
                      , f = n * s
                      , d = n * u
                      , p = i * u
                      , m = a * o
                      , g = a * s
                      , v = a * u;
                    return t[0] = 1 - (f + p),
                    t[4] = c - v,
                    t[8] = h + g,
                    t[1] = c + v,
                    t[5] = 1 - (l + p),
                    t[9] = d - m,
                    t[2] = h - g,
                    t[6] = d + m,
                    t[10] = 1 - (l + f),
                    t[3] = 0,
                    t[7] = 0,
                    t[11] = 0,
                    t[12] = 0,
                    t[13] = 0,
                    t[14] = 0,
                    t[15] = 1,
                    this
                },
                lookAt: function() {
                    var e, t, r;
                    return function(n, i, a) {
                        void 0 === e && (e = new u,
                        t = new u,
                        r = new u);
                        var o = this.elements;
                        return r.subVectors(n, i).normalize(),
                        0 === r.lengthSq() && (r.z = 1),
                        e.crossVectors(a, r).normalize(),
                        0 === e.lengthSq() && (r.z += 1e-4,
                        e.crossVectors(a, r).normalize()),
                        t.crossVectors(r, e),
                        o[0] = e.x,
                        o[4] = t.x,
                        o[8] = r.x,
                        o[1] = e.y,
                        o[5] = t.y,
                        o[9] = r.y,
                        o[2] = e.z,
                        o[6] = t.z,
                        o[10] = r.z,
                        this
                    }
                }(),
                multiply: function(e, t) {
                    return void 0 !== t ? (console.warn("GASEngine.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
                    this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
                },
                premultiply: function(e) {
                    return this.multiplyMatrices(e, this)
                },
                multiplyMatrices: function(e, t) {
                    var r = e.elements
                      , n = t.elements
                      , i = this.elements
                      , a = r[0]
                      , o = r[4]
                      , s = r[8]
                      , u = r[12]
                      , l = r[1]
                      , c = r[5]
                      , h = r[9]
                      , f = r[13]
                      , d = r[2]
                      , p = r[6]
                      , m = r[10]
                      , g = r[14]
                      , v = r[3]
                      , y = r[7]
                      , M = r[11]
                      , w = r[15]
                      , x = n[0]
                      , A = n[4]
                      , b = n[8]
                      , T = n[12]
                      , _ = n[1]
                      , E = n[5]
                      , S = n[9]
                      , D = n[13]
                      , N = n[2]
                      , I = n[6]
                      , L = n[10]
                      , C = n[14]
                      , O = n[3]
                      , j = n[7]
                      , R = n[11]
                      , P = n[15];
                    return i[0] = a * x + o * _ + s * N + u * O,
                    i[4] = a * A + o * E + s * I + u * j,
                    i[8] = a * b + o * S + s * L + u * R,
                    i[12] = a * T + o * D + s * C + u * P,
                    i[1] = l * x + c * _ + h * N + f * O,
                    i[5] = l * A + c * E + h * I + f * j,
                    i[9] = l * b + c * S + h * L + f * R,
                    i[13] = l * T + c * D + h * C + f * P,
                    i[2] = d * x + p * _ + m * N + g * O,
                    i[6] = d * A + p * E + m * I + g * j,
                    i[10] = d * b + p * S + m * L + g * R,
                    i[14] = d * T + p * D + m * C + g * P,
                    i[3] = v * x + y * _ + M * N + w * O,
                    i[7] = v * A + y * E + M * I + w * j,
                    i[11] = v * b + y * S + M * L + w * R,
                    i[15] = v * T + y * D + M * C + w * P,
                    this
                },
                multiplyToArray: function(e, t, r) {
                    var n = this.elements;
                    return this.multiplyMatrices(e, t),
                    r[0] = n[0],
                    r[1] = n[1],
                    r[2] = n[2],
                    r[3] = n[3],
                    r[4] = n[4],
                    r[5] = n[5],
                    r[6] = n[6],
                    r[7] = n[7],
                    r[8] = n[8],
                    r[9] = n[9],
                    r[10] = n[10],
                    r[11] = n[11],
                    r[12] = n[12],
                    r[13] = n[13],
                    r[14] = n[14],
                    r[15] = n[15],
                    this
                },
                multiplyScalar: function(e) {
                    var t = this.elements;
                    return t[0] *= e,
                    t[4] *= e,
                    t[8] *= e,
                    t[12] *= e,
                    t[1] *= e,
                    t[5] *= e,
                    t[9] *= e,
                    t[13] *= e,
                    t[2] *= e,
                    t[6] *= e,
                    t[10] *= e,
                    t[14] *= e,
                    t[3] *= e,
                    t[7] *= e,
                    t[11] *= e,
                    t[15] *= e,
                    this
                },
                applyToBufferAttribute: function() {
                    var e;
                    return function(t) {
                        void 0 === e && (e = new u);
                        for (var r = 0, n = t.count; r < n; r++)
                            e.x = t.getX(r),
                            e.y = t.getY(r),
                            e.z = t.getZ(r),
                            e.applyMatrix4(this),
                            t.setXYZ(r, e.x, e.y, e.z);
                        return t
                    }
                }(),
                determinant: function() {
                    var e = this.elements
                      , t = e[0]
                      , r = e[4]
                      , n = e[8]
                      , i = e[12]
                      , a = e[1]
                      , o = e[5]
                      , s = e[9]
                      , u = e[13]
                      , l = e[2]
                      , c = e[6]
                      , h = e[10]
                      , f = e[14]
                      , d = e[3]
                      , p = e[7]
                      , m = e[11]
                      , g = e[15];
                    return d * (+i * s * c - n * u * c - i * o * h + r * u * h + n * o * f - r * s * f) + p * (+t * s * f - t * u * h + i * a * h - n * a * f + n * u * l - i * s * l) + m * (+t * u * c - t * o * f - i * a * c + r * a * f + i * o * l - r * u * l) + g * (-n * o * l - t * s * c + t * o * h + n * a * c - r * a * h + r * s * l)
                },
                transpose: function() {
                    var e, t = this.elements;
                    return e = t[1],
                    t[1] = t[4],
                    t[4] = e,
                    e = t[2],
                    t[2] = t[8],
                    t[8] = e,
                    e = t[6],
                    t[6] = t[9],
                    t[9] = e,
                    e = t[3],
                    t[3] = t[12],
                    t[12] = e,
                    e = t[7],
                    t[7] = t[13],
                    t[13] = e,
                    e = t[11],
                    t[11] = t[14],
                    t[14] = e,
                    this
                },
                setPosition: function(e) {
                    var t = this.elements;
                    return t[12] = e.x,
                    t[13] = e.y,
                    t[14] = e.z,
                    this
                },
                getInverse: function(e, t) {
                    var r = this.elements
                      , n = e.elements
                      , i = n[0]
                      , a = n[1]
                      , o = n[2]
                      , s = n[3]
                      , u = n[4]
                      , l = n[5]
                      , c = n[6]
                      , h = n[7]
                      , f = n[8]
                      , d = n[9]
                      , p = n[10]
                      , m = n[11]
                      , g = n[12]
                      , v = n[13]
                      , y = n[14]
                      , M = n[15]
                      , w = d * y * h - v * p * h + v * c * m - l * y * m - d * c * M + l * p * M
                      , x = g * p * h - f * y * h - g * c * m + u * y * m + f * c * M - u * p * M
                      , A = f * v * h - g * d * h + g * l * m - u * v * m - f * l * M + u * d * M
                      , b = g * d * c - f * v * c - g * l * p + u * v * p + f * l * y - u * d * y
                      , T = i * w + a * x + o * A + s * b;
                    if (0 === T) {
                        var _ = "GASEngine.Matrix4.getInverse(): can't invert matrix, determinant is 0";
                        if (t === !0)
                            throw new Error(_);
                        return console.warn(_),
                        this.identity()
                    }
                    var E = 1 / T;
                    return r[0] = w * E,
                    r[1] = (v * p * s - d * y * s - v * o * m + a * y * m + d * o * M - a * p * M) * E,
                    r[2] = (l * y * s - v * c * s + v * o * h - a * y * h - l * o * M + a * c * M) * E,
                    r[3] = (d * c * s - l * p * s - d * o * h + a * p * h + l * o * m - a * c * m) * E,
                    r[4] = x * E,
                    r[5] = (f * y * s - g * p * s + g * o * m - i * y * m - f * o * M + i * p * M) * E,
                    r[6] = (g * c * s - u * y * s - g * o * h + i * y * h + u * o * M - i * c * M) * E,
                    r[7] = (u * p * s - f * c * s + f * o * h - i * p * h - u * o * m + i * c * m) * E,
                    r[8] = A * E,
                    r[9] = (g * d * s - f * v * s - g * a * m + i * v * m + f * a * M - i * d * M) * E,
                    r[10] = (u * v * s - g * l * s + g * a * h - i * v * h - u * a * M + i * l * M) * E,
                    r[11] = (f * l * s - u * d * s - f * a * h + i * d * h + u * a * m - i * l * m) * E,
                    r[12] = b * E,
                    r[13] = (f * v * o - g * d * o + g * a * p - i * v * p - f * a * y + i * d * y) * E,
                    r[14] = (g * l * o - u * v * o - g * a * c + i * v * c + u * a * y - i * l * y) * E,
                    r[15] = (u * d * o - f * l * o + f * a * c - i * d * c - u * a * p + i * l * p) * E,
                    this
                },
                scale: function(e) {
                    var t = this.elements
                      , r = e.x
                      , n = e.y
                      , i = e.z;
                    return t[0] *= r,
                    t[4] *= n,
                    t[8] *= i,
                    t[1] *= r,
                    t[5] *= n,
                    t[9] *= i,
                    t[2] *= r,
                    t[6] *= n,
                    t[10] *= i,
                    t[3] *= r,
                    t[7] *= n,
                    t[11] *= i,
                    this
                },
                getMaxScaleOnAxis: function() {
                    var e = this.elements
                      , t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2]
                      , r = e[4] * e[4] + e[5] * e[5] + e[6] * e[6]
                      , n = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                    return Math.sqrt(Math.max(t, r, n))
                },
                makeTranslation: function(e, t, r) {
                    return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, r, 0, 0, 0, 1),
                    this
                },
                makeRotationX: function(e) {
                    var t = Math.cos(e)
                      , r = Math.sin(e);
                    return this.set(1, 0, 0, 0, 0, t, -r, 0, 0, r, t, 0, 0, 0, 0, 1),
                    this
                },
                makeRotationY: function(e) {
                    var t = Math.cos(e)
                      , r = Math.sin(e);
                    return this.set(t, 0, r, 0, 0, 1, 0, 0, -r, 0, t, 0, 0, 0, 0, 1),
                    this
                },
                makeRotationZ: function(e) {
                    var t = Math.cos(e)
                      , r = Math.sin(e);
                    return this.set(t, -r, 0, 0, r, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                    this
                },
                makeRotationAxis: function(e, t) {
                    var r = Math.cos(t)
                      , n = Math.sin(t)
                      , i = 1 - r
                      , a = e.x
                      , o = e.y
                      , s = e.z
                      , u = i * a
                      , l = i * o;
                    return this.set(u * a + r, u * o - n * s, u * s + n * o, 0, u * o + n * s, l * o + r, l * s - n * a, 0, u * s - n * o, l * s + n * a, i * s * s + r, 0, 0, 0, 0, 1),
                    this
                },
                makeScale: function(e, t, r) {
                    return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, r, 0, 0, 0, 0, 1),
                    this
                },
                makeShear: function(e, t, r) {
                    return this.set(1, t, r, 0, e, 1, r, 0, e, t, 1, 0, 0, 0, 0, 1),
                    this
                },
                compose: function(e, t, r) {
                    return this.makeRotationFromQuaternion(t),
                    this.scale(r),
                    this.setPosition(e),
                    this
                },
                decompose: function() {
                    var e, t;
                    return function(r, n, i) {
                        void 0 === e && (e = new u,
                        t = new l);
                        var a = this.elements
                          , o = e.set(a[0], a[1], a[2]).length()
                          , s = e.set(a[4], a[5], a[6]).length()
                          , c = e.set(a[8], a[9], a[10]).length()
                          , h = this.determinant();
                        h < 0 && (o = -o),
                        r.x = a[12],
                        r.y = a[13],
                        r.z = a[14],
                        t.elements.set(this.elements);
                        var f = 1 / o
                          , d = 1 / s
                          , p = 1 / c;
                        return t.elements[0] *= f,
                        t.elements[1] *= f,
                        t.elements[2] *= f,
                        t.elements[4] *= d,
                        t.elements[5] *= d,
                        t.elements[6] *= d,
                        t.elements[8] *= p,
                        t.elements[9] *= p,
                        t.elements[10] *= p,
                        n.setFromRotationMatrix(t),
                        i.x = o,
                        i.y = s,
                        i.z = c,
                        this
                    }
                }(),
                makePerspective: function(e, t, r, n, i, a) {
                    void 0 === a && console.warn("GASEngine.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
                    var o = this.elements
                      , s = 2 * i / (t - e)
                      , u = 2 * i / (r - n)
                      , l = (t + e) / (t - e)
                      , c = (r + n) / (r - n)
                      , h = -(a + i) / (a - i)
                      , f = -2 * a * i / (a - i);
                    return o[0] = s,
                    o[4] = 0,
                    o[8] = l,
                    o[12] = 0,
                    o[1] = 0,
                    o[5] = u,
                    o[9] = c,
                    o[13] = 0,
                    o[2] = 0,
                    o[6] = 0,
                    o[10] = h,
                    o[14] = f,
                    o[3] = 0,
                    o[7] = 0,
                    o[11] = -1,
                    o[15] = 0,
                    this
                },
                makeOrthographic: function(e, t, r, n, i, a) {
                    var o = this.elements
                      , s = 1 / (t - e)
                      , u = 1 / (r - n)
                      , l = 1 / (a - i)
                      , c = (t + e) * s
                      , h = (r + n) * u
                      , f = (a + i) * l;
                    return o[0] = 2 * s,
                    o[4] = 0,
                    o[8] = 0,
                    o[12] = -c,
                    o[1] = 0,
                    o[5] = 2 * u,
                    o[9] = 0,
                    o[13] = -h,
                    o[2] = 0,
                    o[6] = 0,
                    o[10] = -2 * l,
                    o[14] = -f,
                    o[3] = 0,
                    o[7] = 0,
                    o[11] = 0,
                    o[15] = 1,
                    this
                },
                equals: function(e) {
                    for (var t = this.elements, r = e.elements, n = 0; n < 16; n++)
                        if (t[n] !== r[n])
                            return !1;
                    return !0
                },
                fromArray: function(e, t) {
                    void 0 === t && (t = 0);
                    for (var r = 0; r < 16; r++)
                        this.elements[r] = e[r + t];
                    return this
                },
                toArray: function(e, t) {
                    void 0 === e && (e = []),
                    void 0 === t && (t = 0);
                    var r = this.elements;
                    return e[t] = r[0],
                    e[t + 1] = r[1],
                    e[t + 2] = r[2],
                    e[t + 3] = r[3],
                    e[t + 4] = r[4],
                    e[t + 5] = r[5],
                    e[t + 6] = r[6],
                    e[t + 7] = r[7],
                    e[t + 8] = r[8],
                    e[t + 9] = r[9],
                    e[t + 10] = r[10],
                    e[t + 11] = r[11],
                    e[t + 12] = r[12],
                    e[t + 13] = r[13],
                    e[t + 14] = r[14],
                    e[t + 15] = r[15],
                    e
                }
            },
            c.prototype = Object.create(n.prototype),
            c.prototype.constructor = c,
            c.prototype.isCubeTexture = !0,
            Object.defineProperty(c.prototype, "images", {
                get: function() {
                    return this.image
                },
                set: function(e) {
                    this.image = e
                }
            });
            var vs = new n
              , ys = new c
              , Ms = []
              , ws = [];
            k.prototype.setValue = function(e, t) {
                for (var r = this.seq, n = 0, i = r.length; n !== i; ++n) {
                    var a = r[n];
                    a.setValue(e, t[a.id])
                }
            }
            ;
            var xs = /([\w\d_]+)(\])?(\[|\.)?/g;
            Y.prototype.setValue = function(e, t, r) {
                var n = this.map[t];
                void 0 !== n && n.setValue(e, r, this.renderer)
            }
            ,
            Y.prototype.set = function(e, t, r) {
                var n = this.map[r];
                void 0 !== n && n.setValue(e, t[r], this.renderer)
            }
            ,
            Y.prototype.setOptional = function(e, t, r) {
                var n = t[r];
                void 0 !== n && this.setValue(e, r, n)
            }
            ,
            Y.upload = function(e, t, r, n) {
                for (var i = 0, a = t.length; i !== a; ++i) {
                    var o = t[i]
                      , s = r[o.id];
                    s.needsUpdate !== !1 && o.setValue(e, s.value, n)
                }
            }
            ,
            Y.seqWithValue = function(e, t) {
                for (var r = [], n = 0, i = e.length; n !== i; ++n) {
                    var a = e[n];
                    a.id in t && r.push(a)
                }
                return r
            }
            ;
            var As = {
                merge: function(e) {
                    for (var t = {}, r = 0; r < e.length; r++) {
                        var n = this.clone(e[r]);
                        for (var i in n)
                            t[i] = n[i]
                    }
                    return t
                },
                clone: function(e) {
                    var t = {};
                    for (var r in e)
                        t[r] = As.cloneParameters(e[r]);
                    return t
                },
                cloneParameters: function(e) {
                    var t = {};
                    for (var r in e)
                        t[r] = As.cloneParameter(e[r]);
                    return t
                },
                cloneParameter: function(e) {
                    return e && (e.isColor || e.isMatrix3 || e.isMatrix4 || e.isVector2 || e.isVector3 || e.isVector4 || e.isTexture) ? e.clone() : Array.isArray(e) ? e.slice() : e
                }
            }
              , bs = "#ifdef USE_ALPHAMAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 alphaUv = alphaMapUV();\r\n#else\r\n\tvec2 alphaUv = vUv;\r\n#endif\r\n\r\n\tdiffuseColor.a *= alphaMapTexelTransform( texture2D( alphaMap, alphaUv ) ).g;\r\n\r\n#endif\r\n"
              , Ts = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_ALPHAMAP\r\n\r\n\t\tuniform sampler2D alphaMap;\r\n\r\n\t#endif\r\n#endif\r\n"
              , _s = "#ifdef ALPHATEST\r\n\r\n\tif ( diffuseColor.a < ALPHATEST ) discard;\r\n\r\n#endif\r\n"
              , Es = "#ifdef USE_AOMAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 aoUv = aoMapUV();\r\n#else\r\n\tvec2 aoUv = vUv2;\r\n#endif\r\n\r\n\tfloat ambientOcclusion = ( aoMapTexelTransform( texture2D( aoMap, aoUv ) ).r - 1.0 ) * aoMapIntensity + 1.0;\r\n\r\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\r\n\r\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\r\n\r\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\r\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Ss = "#ifdef USE_AOMAP\r\n\r\n#if ! defined( TEXTURE_SLOTS )\r\n\tuniform sampler2D aoMap;\r\n#endif\r\n\r\n\tuniform float aoMapIntensity;\r\n\r\n#endif\r\n"
              , Ds = "\r\nvec3 transformed = vec3( position );\r\n"
              , Ns = "\r\nvec3 objectNormal = vec3( normal );\r\n"
              , Is = "\r\n\r\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\r\n\r\n\tif ( decayExponent > 0.0 && cutoffDistance > 0.0 ) {\r\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\r\n\t}\r\n\telse if ( decayExponent < 0.0 ) {\r\n\t\t// this is based upon UE4 light fall as described on page 11 of:\r\n\t\t//  https://de45xmedrsdbp.cloudfront.net/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\r\n\t\tfloat maxDistanceCutoffFactor = 1.0;\r\n\t\tif( cutoffDistance > 0.0 ) {\r\n\t\t\tmaxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\r\n\t\t}\r\n\t\tfloat distanceFalloff = 1.0 / ( pow2( lightDistance ) + 1.0 );\r\n\r\n\t\treturn maxDistanceCutoffFactor * distanceFalloff;\r\n\t}\r\n\telse {\r\n\t\treturn 1.0;\r\n\t}\r\n}\r\n\r\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\r\n\r\n\treturn RECIPROCAL_PI * diffuseColor;\r\n\r\n} // validated\r\n\r\n\r\nfloat F_Schlick( const in float specular, const in float dotLH ) {\r\n\r\n\t// Original approximation by Christophe Schlick '94\r\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\r\n\r\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\r\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\r\n\r\n\treturn ( 1.0 - specular ) * fresnel + specular;\r\n\r\n} // validated\r\n\r\n\r\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\r\n\r\n\t// Original approximation by Christophe Schlick '94\r\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\r\n\r\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\r\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\r\n\r\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\r\n\r\n} // validated\r\n\r\n\r\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\r\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\r\n// alpha is \"roughness squared\" in Disneys reparameterization\r\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\r\n\r\n\t// geometry term = G(l)?G(v) / 4(n?l)(n?v)\r\n\r\n\tfloat a2 = pow2( alpha );\r\n\r\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\r\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\r\n\r\n\treturn 1.0 / ( gl * gv );\r\n\r\n} // validated\r\n\r\n// from page 12, listing 2 of http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\r\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\r\n\r\n\tfloat a2 = pow2( alpha );\r\n\r\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\r\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\r\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\r\n\r\n\treturn 0.5 / max( gv + gl, EPSILON );\r\n}\r\n\r\n\r\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\r\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\r\n// alpha is \"roughness squared\" in Disneys reparameterization\r\nfloat D_GGX( const in float alpha, const in float dotNH ) {\r\n\r\n\tfloat a2 = pow2( alpha );\r\n\r\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\r\n\r\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\r\n\r\n}\r\n\r\n\r\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\r\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\r\n\r\n\tfloat alpha = pow2( roughness ); // UE4's roughness\r\n\r\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n\r\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\r\n\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\r\n\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\r\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\r\n\r\n\tvec3 F = F_Schlick( specularColor, dotLH );\r\n\r\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\r\n\r\n\tfloat D = D_GGX( alpha, dotNH );\r\n\r\n\treturn F * ( G * D );\r\n\r\n} // validated\r\n\r\nfloat BRDF_ClearCoat_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttenuation ) {\r\n\r\n\tfloat alpha = pow2( roughness ); // UE4's roughness\r\n\r\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n\r\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\r\n\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\r\n\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\r\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\r\n\r\n\tfloat F = F_Schlick( specular, dotLH );\r\n\r\n\tlayerAttenuation = F;\r\n\r\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\r\n\r\n\tfloat D = D_GGX( alpha, dotNH );\r\n\r\n\treturn F * ( G * D );\r\n\r\n}\r\n\r\n//\r\n// Rect Area Light BRDF Approximations\r\n//\r\n\r\n// Area light computation code adapted from:\r\n// http://blog.selfshadow.com/sandbox/ltc.html\r\n//\r\n// Based on paper:\r\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\r\n// By: Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\r\n// https://eheitzresearch.wordpress.com/415-2/\r\n\r\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\r\n\r\n\tconst float LUT_SIZE  = 64.0;\r\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\r\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\r\n\r\n\tvec3 N = geometry.normal;\r\n\tvec3 V = geometry.viewDir;\r\n\tvec3 P = geometry.position;\r\n\r\n\t// view angle on surface determines which LTC BRDF values we use\r\n\tfloat theta = acos( dot( N, V ) );\r\n\r\n\t// Parameterization of texture:\r\n\t// sqrt(roughness) -> [0,1]\r\n\t// theta -> [0, PI/2]\r\n\tvec2 uv = vec2(\r\n\t\tsqrt( saturate( roughness ) ),\r\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\r\n\r\n\t// Ensure we don't have nonlinearities at the look-up table's edges\r\n\t// see: http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter24.html\r\n\t//      \"Shader Analysis\" section\r\n\tuv = uv * LUT_SCALE + LUT_BIAS;\r\n\r\n\treturn uv;\r\n\r\n}\r\n\r\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\r\n\r\n\t// detect clipping config\r\n\tint config = 0;\r\n\tif ( L[0].z > 0.0 ) config += 1;\r\n\tif ( L[1].z > 0.0 ) config += 2;\r\n\tif ( L[2].z > 0.0 ) config += 4;\r\n\tif ( L[3].z > 0.0 ) config += 8;\r\n\r\n\t// clip\r\n\tn = 0;\r\n\r\n\tif ( config == 0 ) {\r\n\r\n\t\t// clip all\r\n\r\n\t} else if ( config == 1 ) {\r\n\r\n\t\t// V1 clip V2 V3 V4\r\n\t\tn = 3;\r\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\r\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\r\n\r\n\t} else if ( config == 2 ) {\r\n\r\n\t\t// V2 clip V1 V3 V4\r\n\t\tn = 3;\r\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\r\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\r\n\r\n\t} else if ( config == 3 ) {\r\n\r\n\t\t// V1 V2 clip V3 V4\r\n\t\tn = 4;\r\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\r\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\r\n\r\n\t} else if ( config == 4 ) {\r\n\r\n\t\t// V3 clip V1 V2 V4\r\n\t\tn = 3;\r\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\r\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\r\n\r\n\t} else if ( config == 5 ) {\r\n\r\n\t\t// V1 V3 clip V2 V4) impossible\r\n\t\tn = 0;\r\n\r\n\t} else if ( config == 6 ) {\r\n\r\n\t\t// V2 V3 clip V1 V4\r\n\t\tn = 4;\r\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\r\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\r\n\r\n\t} else if ( config == 7 ) {\r\n\r\n\t\t// V1 V2 V3 clip V4\r\n\t\tn = 5;\r\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\r\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\r\n\r\n\t} else if ( config == 8 ) {\r\n\r\n\t\t// V4 clip V1 V2 V3\r\n\t\tn = 3;\r\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\r\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\r\n\t\tL[2] =  L[3];\r\n\r\n\t} else if ( config == 9 ) {\r\n\r\n\t\t// V1 V4 clip V2 V3\r\n\t\tn = 4;\r\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\r\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\r\n\r\n\t} else if ( config == 10 ) {\r\n\r\n\t\t// V2 V4 clip V1 V3) impossible\r\n\t\tn = 0;\r\n\r\n\t} else if ( config == 11 ) {\r\n\r\n\t\t// V1 V2 V4 clip V3\r\n\t\tn = 5;\r\n\t\tL[4] = L[3];\r\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\r\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\r\n\r\n\t} else if ( config == 12 ) {\r\n\r\n\t\t// V3 V4 clip V1 V2\r\n\t\tn = 4;\r\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\r\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\r\n\r\n\t} else if ( config == 13 ) {\r\n\r\n\t\t// V1 V3 V4 clip V2\r\n\t\tn = 5;\r\n\t\tL[4] = L[3];\r\n\t\tL[3] = L[2];\r\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\r\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\r\n\r\n\t} else if ( config == 14 ) {\r\n\r\n\t\t// V2 V3 V4 clip V1\r\n\t\tn = 5;\r\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\r\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\r\n\r\n\t} else if ( config == 15 ) {\r\n\r\n\t\t// V1 V2 V3 V4\r\n\t\tn = 4;\r\n\r\n\t}\r\n\r\n\tif ( n == 3 )\r\n\t\tL[3] = L[0];\r\n\tif ( n == 4 )\r\n\t\tL[4] = L[0];\r\n\r\n}\r\n\r\n// Equation (11) of \"Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\"\r\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\r\n\r\n\tfloat cosTheta = dot( v1, v2 );\r\n\tfloat theta = acos( cosTheta );\r\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\r\n\r\n\treturn res;\r\n\r\n}\r\n\r\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\r\n\r\n\trectPoints[0] = pos - halfWidth - halfHeight;\r\n\trectPoints[1] = pos + halfWidth - halfHeight;\r\n\trectPoints[2] = pos + halfWidth + halfHeight;\r\n\trectPoints[3] = pos - halfWidth + halfHeight;\r\n\r\n}\r\n\r\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\r\n\r\n\tvec3 N = geometry.normal;\r\n\tvec3 V = geometry.viewDir;\r\n\tvec3 P = geometry.position;\r\n\r\n\t// construct orthonormal basis around N\r\n\tvec3 T1, T2;\r\n\tT1 = normalize(V - N * dot( V, N ));\r\n\t// TODO (abelnation): I had to negate this cross product to get proper light.  Curious why sample code worked without negation\r\n\tT2 = - cross( N, T1 );\r\n\r\n\t// rotate area light in (T1, T2, N) basis\r\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\r\n\r\n\t// transformed rect relative to surface point\r\n\tvec3 clippedRect[5];\r\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\r\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\r\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\r\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\r\n\r\n\t// clip light rect to horizon, resulting in at most 5 points\r\n\t// we do this because we are integrating the BRDF over the hemisphere centered on the surface points normal\r\n\tint n;\r\n\tclipQuadToHorizon(clippedRect, n);\r\n\r\n\t// light is completely below horizon\r\n\tif ( n == 0 )\r\n\t\treturn vec3( 0, 0, 0 );\r\n\r\n\t// project clipped rect onto sphere\r\n\tclippedRect[0] = normalize( clippedRect[0] );\r\n\tclippedRect[1] = normalize( clippedRect[1] );\r\n\tclippedRect[2] = normalize( clippedRect[2] );\r\n\tclippedRect[3] = normalize( clippedRect[3] );\r\n\tclippedRect[4] = normalize( clippedRect[4] );\r\n\r\n\t// integrate\r\n\t// simplified integration only needs to be evaluated for each edge in the polygon\r\n\tfloat sum = 0.0;\r\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\r\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\r\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\r\n\tif (n >= 4)\r\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\r\n\tif (n == 5)\r\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\r\n\r\n\t// TODO (abelnation): two-sided area light\r\n\t// sum = twoSided ? abs(sum) : max(0.0, sum);\r\n\tsum = max( 0.0, sum );\r\n\t// sum = abs( sum );\r\n\r\n\tvec3 Lo_i = vec3( sum, sum, sum );\r\n\r\n\treturn Lo_i;\r\n\r\n}\r\n\r\nvec3 Rect_Area_Light_Specular_Reflectance(\r\n\t\tconst in GeometricContext geometry,\r\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\r\n\t\tconst in float roughness,\r\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\r\n\r\n\tvec3 rectPoints[4];\r\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\r\n\r\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\r\n\r\n\tvec4 brdfLtcApproxParams, t;\r\n\r\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\r\n\tt = texture2D( ltcMat, uv );\r\n\r\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\r\n\r\n\t// inv(M) matrix referenced by equation (6) in paper\r\n\tmat3 brdfLtcApproxMat = mat3(\r\n\t\tvec3(   1,   0, t.y ),\r\n\t\tvec3(   0, t.z,   0 ),\r\n\t\tvec3( t.w,   0, t.x )\r\n\t);\r\n\r\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\r\n\tspecularReflectance *= brdfLtcScalar;\r\n\r\n\treturn specularReflectance;\r\n\r\n}\r\n\r\nvec3 Rect_Area_Light_Diffuse_Reflectance(\r\n\t\tconst in GeometricContext geometry,\r\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\r\n\r\n\tvec3 rectPoints[4];\r\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\r\n\r\n\tmat3 diffuseBrdfMat = mat3(1);\r\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\r\n\r\n\treturn diffuseReflectance;\r\n\r\n}\r\n// End RectArea BRDF\r\n\r\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\r\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\r\n\r\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\r\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\r\n\r\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\r\n\r\n\tvec4 r = roughness * c0 + c1;\r\n\r\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\r\n\r\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\r\n\r\n\treturn specularColor * AB.x + AB.y;\r\n\r\n} // validated\r\n\r\n\r\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\r\nfloat BRDF_ClearCoat_GGX_Environment( const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttention ) {\r\n\r\n\tvec3 incidentLightDirection = reflect( geometry.viewDir, geometry.normal );\r\n\tvec3 halfDir = normalize( incidentLightDirection + geometry.viewDir );\r\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\tfloat dotLH = saturate( dot( incidentLightDirection, halfDir ) );\r\n\r\n\tlayerAttention = F_Schlick( specular, dotLH );\r\n\r\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\r\n\r\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\r\n\r\n\tvec4 r = roughness * c0 + c1;\r\n\r\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\r\n\r\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\r\n\r\n\treturn specular * AB.x + AB.y;\r\n\r\n} // validated\r\n\r\n\r\nfloat G_BlinnPhong_Implicit( ) {\r\n\r\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\r\n\treturn 0.25;\r\n\r\n}\r\n\r\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\r\n\r\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\r\n\r\n}\r\n\r\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\r\n\r\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n\r\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\r\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\r\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\r\n\r\n\tvec3 F = F_Schlick( specularColor, dotLH );\r\n\r\n\tfloat G = G_BlinnPhong_Implicit( );\r\n\r\n\tfloat D = D_BlinnPhong( shininess, dotNH );\r\n\r\n\treturn F * ( G * D );\r\n\r\n} // validated\r\n\r\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\r\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\r\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\r\n}\r\n\r\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\r\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\r\n}\r\n"
              , Ls = "#ifdef USE_BUMPMAP\r\n\r\n#if ! defined( TEXTURE_SLOTS )\r\n\r\n\tuniform sampler2D bumpMap;\r\n\tuniform float bumpScale;\r\n\r\n#endif\r\n\r\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\r\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\r\n\r\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\r\n\r\n\tvec2 dHdxy_fwd() {\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\t\tvec2 bumpUv = bumpMapUV();\r\n#else\r\n\t\tvec2 bumpUv = vUv;\r\n#endif\r\n\r\n\t\tvec2 dSTdx = dFdx( bumpUv );\r\n\t\tvec2 dSTdy = dFdy( bumpUv );\r\n\r\n\t\tfloat Hll = bumpMapTexelTransform( texture2D( bumpMap, bumpUv ) ).x;\r\n\t\tfloat dBx = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdx ) ).x - Hll;\r\n\t\tfloat dBy = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdy ) ).x - Hll;\r\n\r\n\t\treturn vec2( dBx, dBy );\r\n\r\n\t}\r\n\r\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\r\n\r\n\t\tvec3 vSigmaX = dFdx( surf_pos );\r\n\t\tvec3 vSigmaY = dFdy( surf_pos );\r\n\t\tvec3 vN = surf_norm;\t\t// normalized\r\n\r\n\t\tvec3 R1 = cross( vSigmaY, vN );\r\n\t\tvec3 R2 = cross( vN, vSigmaX );\r\n\r\n\t\tfloat fDet = dot( vSigmaX, R1 );\r\n\r\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\r\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\r\n\r\n\t}\r\n\r\n#endif\r\n"
              , Cs = "#if NUM_CLIPPING_PLANES > 0\r\n\r\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\r\n\r\n\t\tvec4 plane = clippingPlanes[ i ];\r\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\r\n\r\n\t}\r\n\r\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\r\n\r\n\t\tbool clipped = true;\r\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\r\n\t\t\tvec4 plane = clippingPlanes[ i ];\r\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\r\n\t\t}\r\n\r\n\t\tif ( clipped ) discard;\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Os = "#if NUM_CLIPPING_PLANES > 0\r\n\r\n\t#if ! defined( VARYING_VVIEWPOSITION )\r\n\t\tvarying vec3 vViewPosition;\r\n\t\t#define VARYING_VVIEWPOSITION 1\r\n\t#endif\r\n\r\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\r\n\r\n#endif\r\n"
              , js = "#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\r\n\t#if ! defined( VARYING_VVIEWPOSITION )\r\n    \tvarying vec3 vViewPosition;\r\n    \t#define VARYING_VVIEWPOSITION 1\r\n    #endif\r\n#endif\r\n"
              , Rs = "#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\r\n\tvViewPosition = - mvPosition.xyz;\r\n#endif\r\n\r\n"
              , Ps = "#ifdef USE_COLOR\r\n\r\n\tdiffuseColor.rgb *= vColor;\r\n\r\n#endif\r\n"
              , zs = "#ifdef USE_COLOR\r\n\r\n\tvarying vec3 vColor;\r\n\r\n#endif\r\n"
              , Bs = "#ifdef USE_COLOR\r\n\r\n\tvarying vec3 vColor;\r\n\r\n#endif\r\n"
              , Us = "#ifdef USE_COLOR\r\n\r\n\tvColor.xyz = color.xyz;\r\n\r\n#endif\r\n"
              , Vs = "#define PI 3.14159265359\r\n#define PI2 6.28318530718\r\n#define PI_HALF 1.5707963267949\r\n#define RECIPROCAL_PI 0.31830988618\r\n#define RECIPROCAL_PI2 0.15915494\r\n#define LOG2 1.442695\r\n#define EPSILON 1e-6\r\n\r\n#define saturate(a) clamp( a, 0.0, 1.0 )\r\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\r\n\r\nfloat pow2( const in float x ) { return x*x; }\r\nfloat pow3( const in float x ) { return x*x*x; }\r\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\r\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\r\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\r\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\r\nhighp float rand( const in vec2 uv ) {\r\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\r\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\r\n\treturn fract(sin(sn) * c);\r\n}\r\n\r\nstruct IncidentLight {\r\n\tvec3 color;\r\n\tvec3 direction;\r\n\tbool visible;\r\n};\r\n\r\nstruct ReflectedLight {\r\n\tvec3 directDiffuse;\r\n\tvec3 directSpecular;\r\n\tvec3 indirectDiffuse;\r\n\tvec3 indirectSpecular;\r\n};\r\n\r\nstruct GeometricContext {\r\n\tvec3 position;\r\n\tvec3 normal;\r\n\tvec3 viewDir;\r\n};\r\n\r\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\r\n\r\n}\r\n\r\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\r\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\r\n\r\n}\r\n\r\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\r\n\r\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\r\n\r\n\treturn - distance * planeNormal + point;\r\n\r\n}\r\n\r\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\r\n\r\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\r\n\r\n}\r\n\r\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\r\n\r\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\r\n\r\n}\r\n\r\nmat3 transpose( const in mat3 v ) {\r\n\r\n\tmat3 tmp;\r\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\r\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\r\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\r\n\r\n\treturn tmp;\r\n\r\n}\r\n"
              , ks = "#ifdef ENVMAP_TYPE_CUBE_UV\r\n\r\n#define cubeUV_textureSize (1024.0)\r\n\r\nint getFaceFromDirection(vec3 direction) {\r\n\tvec3 absDirection = abs(direction);\r\n\tint face = -1;\r\n\tif( absDirection.x > absDirection.z ) {\r\n\t\tif(absDirection.x > absDirection.y )\r\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\r\n\t\telse\r\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\r\n\t}\r\n\telse {\r\n\t\tif(absDirection.z > absDirection.y )\r\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\r\n\t\telse\r\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\r\n\t}\r\n\treturn face;\r\n}\r\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\r\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\r\n\r\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\r\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\r\n\tfloat dxRoughness = dFdx(roughness);\r\n\tfloat dyRoughness = dFdy(roughness);\r\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\r\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\r\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\r\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\r\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\r\n\tfloat mipLevel = 0.5 * log2(d);\r\n\treturn vec2(floor(mipLevel), fract(mipLevel));\r\n}\r\n\r\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\r\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\r\n\r\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\r\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\r\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\r\n\r\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\r\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\r\n\t// float powScale = exp2(roughnessLevel + mipLevel);\r\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\r\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\r\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\r\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\r\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\r\n\r\n\tbool bRes = mipLevel == 0.0;\r\n\tscale =  bRes && (scale < a) ? a : scale;\r\n\r\n\tvec3 r;\r\n\tvec2 offset;\r\n\tint face = getFaceFromDirection(direction);\r\n\r\n\tfloat rcpPowScale = 1.0 / powScale;\r\n\r\n\tif( face == 0) {\r\n\t\tr = vec3(direction.x, -direction.z, direction.y);\r\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\r\n\t}\r\n\telse if( face == 1) {\r\n\t\tr = vec3(direction.y, direction.x, direction.z);\r\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\r\n\t}\r\n\telse if( face == 2) {\r\n\t\tr = vec3(direction.z, direction.x, direction.y);\r\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\r\n\t}\r\n\telse if( face == 3) {\r\n\t\tr = vec3(direction.x, direction.z, direction.y);\r\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\r\n\t}\r\n\telse if( face == 4) {\r\n\t\tr = vec3(direction.y, direction.x, -direction.z);\r\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\r\n\t}\r\n\telse {\r\n\t\tr = vec3(direction.z, -direction.x, direction.y);\r\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\r\n\t}\r\n\tr = normalize(r);\r\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\r\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\r\n\tvec2 base = offset + vec2( texelOffset );\r\n\treturn base + s * ( scale - 2.0 * texelOffset );\r\n}\r\n\r\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\r\n\r\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\r\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\r\n\tfloat r1 = floor(roughnessVal);\r\n\tfloat r2 = r1 + 1.0;\r\n\tfloat t = fract(roughnessVal);\r\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\r\n\tfloat s = mipInfo.y;\r\n\tfloat level0 = mipInfo.x;\r\n\tfloat level1 = level0 + 1.0;\r\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\r\n\r\n\t// round to nearest mipmap if we are not interpolating.\r\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\r\n\r\n\t// Tri linear interpolation.\r\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\r\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\r\n\r\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\r\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\r\n\r\n\tvec4 result = mix(color10, color20, t);\r\n\r\n\treturn vec4(result.rgb, 1.0);\r\n}\r\n\r\n#endif\r\n"
              , Fs = "#ifdef FLIP_SIDED\r\n\r\n\tobjectNormal = -objectNormal;\r\n\r\n#endif\r\n\r\nvec3 transformedNormal = normalMatrix * objectNormal;\r\n"
              , Gs = "#ifdef USE_DISPLACEMENTMAP\r\n\r\n\tuniform sampler2D displacementMap;\r\n\tuniform float displacementScale;\r\n\tuniform float displacementBias;\r\n\r\n#endif\r\n"
              , Ys = "#ifdef USE_DISPLACEMENTMAP\r\n\r\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\r\n\r\n#endif\r\n"
              , Qs = "#ifdef USE_EMISSIVEMAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 emissiveUv = emissiveMapUV();\r\n#else\r\n\tvec2 emissiveUv = vUv;\r\n#endif\r\n\r\n\tvec4 emissiveColor = texture2D( emissiveMap, emissiveUv );\r\n\r\n\temissiveColor.rgb = emissiveMapTexelTransform( emissiveMapTexelToLinear( emissiveColor ) ).rgb;\r\n\r\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\r\n\r\n#endif\r\n"
              , Hs = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_EMISSIVEMAP\r\n\r\n\t\tuniform sampler2D emissiveMap;\r\n\r\n\t#endif\r\n#endif\r\n"
              , Ws = "  gl_FragColor = linearToOutputTexel( gl_FragColor );\r\n"
              , Xs = "// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\r\n\r\nvec4 LinearToLinear( in vec4 value ) {\r\n  return value;\r\n}\r\n\r\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\r\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\r\n}\r\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\r\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\r\n}\r\n\r\nvec4 sRGBToLinear( in vec4 value ) {\r\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\r\n}\r\nvec4 LinearTosRGB( in vec4 value ) {\r\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\r\n}\r\n\r\nvec4 RGBEToLinear( in vec4 value ) {\r\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\r\n}\r\nvec4 LinearToRGBE( in vec4 value ) {\r\n  float maxComponent = max( max( value.r, value.g ), value.b );\r\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\r\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\r\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\r\n}\r\n\r\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\r\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\r\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\r\n}\r\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\r\n  float maxRGB = max( value.x, max( value.g, value.b ) );\r\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\r\n  M            = ceil( M * 255.0 ) / 255.0;\r\n  return vec4( value.rgb / ( M * maxRange ), M );\r\n}\r\n\r\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\r\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\r\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\r\n}\r\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\r\n    float maxRGB = max( value.x, max( value.g, value.b ) );\r\n    float D      = max( maxRange / maxRGB, 1.0 );\r\n    D            = min( floor( D ) / 255.0, 1.0 );\r\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\r\n}\r\n\r\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\r\n\r\n// M matrix, for encoding\r\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\r\nvec4 LinearToLogLuv( in vec4 value )  {\r\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\r\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\r\n  vec4 vResult;\r\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\r\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\r\n  vResult.w = fract(Le);\r\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\r\n  return vResult;\r\n}\r\n\r\n// Inverse M matrix, for decoding\r\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\r\nvec4 LogLuvToLinear( in vec4 value ) {\r\n  float Le = value.z * 255.0 + value.w;\r\n  vec3 Xp_Y_XYZp;\r\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\r\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\r\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\r\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\r\n  return vec4( max(vRGB, 0.0), 1.0 );\r\n}\r\n"
              , qs = "#ifdef USE_ENVMAP\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\r\n\r\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\r\n\r\n\t\t// Transforming Normal Vectors with the Inverse Transformation\r\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\r\n\r\n\t\t#ifdef ENVMAP_MODE_REFLECTION\r\n\r\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\r\n\r\n\t\t#endif\r\n\r\n\t#else\r\n\r\n\t\tvec3 reflectVec = vReflect;\r\n\r\n\t#endif\r\n\r\n\t#ifdef ENVMAP_TYPE_CUBE\r\n\r\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\r\n\r\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\r\n\r\n\t\tvec2 sampleUV;\r\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\r\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\r\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\r\n\r\n\t#elif defined( ENVMAP_TYPE_SPHERE )\r\n\r\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\r\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\r\n\r\n\t#else\r\n\r\n\t\tvec4 envColor = vec4( 0.0 );\r\n\r\n\t#endif\r\n\r\n\tenvColor = envMapTexelToLinear( envColor );\r\n\r\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\r\n\r\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\r\n\r\n\t#elif defined( ENVMAP_BLENDING_MIX )\r\n\r\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\r\n\r\n\t#elif defined( ENVMAP_BLENDING_ADD )\r\n\r\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Zs = "#if defined( USE_ENVMAP ) || defined( PHYSICAL )\r\n\tuniform float reflectivity;\r\n\tuniform float envMapIntensity;\r\n#endif\r\n\r\n#ifdef USE_ENVMAP\r\n\r\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\r\n\t\tvarying vec3 vWorldPosition;\r\n\t#endif\r\n\r\n\t#ifdef ENVMAP_TYPE_CUBE\r\n\t\tuniform samplerCube envMap;\r\n\t#else\r\n\t\tuniform sampler2D envMap;\r\n\t#endif\r\n\tuniform float flipEnvMap;\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\r\n\t\tuniform float refractionRatio;\r\n\t#else\r\n\t\tvarying vec3 vReflect;\r\n\t#endif\r\n\r\n#endif\r\n"
              , Js = "#ifdef USE_ENVMAP\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\r\n\t\tvarying vec3 vWorldPosition;\r\n\r\n\t#else\r\n\r\n\t\tvarying vec3 vReflect;\r\n\t\tuniform float refractionRatio;\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Ks = "#ifdef USE_ENVMAP\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\r\n\r\n\t\tvWorldPosition = worldPosition.xyz;\r\n\r\n\t#else\r\n\r\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\r\n\r\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\r\n\r\n\t\t#ifdef ENVMAP_MODE_REFLECTION\r\n\r\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\r\n\r\n\t\t#endif\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , $s = "#ifdef FALLOFF\r\n\r\nfloat falloffModulator = abs( dot( normal, normalize( vViewPosition ) ) );\r\n\r\n// smoothstep: this is a hack, it needs to be fixed.\r\nfalloffModulator = ( falloffModulator * falloffModulator * ( 3.0 - 2.0 * falloffModulator ) );\r\n\r\ndiffuseColor = mix( falloffDiffuseColor, diffuseColor, falloffModulator );\r\n\r\n#endif // FALLOFF\r\n"
              , eu = "#ifdef USE_FALLOFFALPHAMAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 falloffAlphaUv = falloffAlphaMapUV();\r\n#else\r\n\tvec2 falloffAlphaUv = vUv;\r\n#endif\r\n\r\n\tfalloffDiffuseColor.a *= falloffAlphaMapTexelTransform( texture2D( falloffAlphaMap, falloffAlphaUv ) ).g;\r\n\r\n#endif\r\n"
              , tu = "#ifdef USE_FALLOFFMAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 falloffMapUv = falloffMapUV();\r\n#else\r\n\tvec2 falloffMapUv = vUv;\r\n#endif\r\n\r\n\tvec4 falloffTexelColor = texture2D( falloffMap, falloffMapUv );\r\n\r\n\tfalloffTexelColor = falloffMapTexelTransform( falloffMapTexelToLinear( falloffTexelColor ) );\r\n\tfalloffDiffuseColor *= falloffTexelColor;\r\n\r\n#endif\r\n"
              , ru = "#ifdef USE_FOG\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\r\n\r\n\t#else\r\n\r\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\r\n\r\n\t#endif\r\n\r\n\t#ifdef FOG_EXP2\r\n\r\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\r\n\r\n\t#else\r\n\r\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\r\n\r\n#endif\r\n"
              , nu = "#ifdef USE_FOG\r\n\r\n\tuniform vec3 fogColor;\r\n\r\n\t#ifdef FOG_EXP2\r\n\r\n\t\tuniform float fogDensity;\r\n\r\n\t#else\r\n\r\n\t\tuniform float fogNear;\r\n\t\tuniform float fogFar;\r\n\t#endif\r\n\r\n#endif\r\n"
              , iu = "#ifdef TOON\r\n\r\n\tuniform sampler2D gradientMap;\r\n\r\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\r\n\r\n\t\t// dotNL will be from -1.0 to 1.0\r\n\t\tfloat dotNL = dot( normal, lightDirection );\r\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\r\n\r\n\t\t#ifdef USE_GRADIENTMAP\r\n\r\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\r\n\r\n\t\t#else\r\n\r\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\r\n\r\n\t\t#endif\r\n\r\n\r\n\t}\r\n\r\n#endif\r\n"
              , au = "#ifdef USE_LIGHTMAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 lightUv = lightMapUV();\r\n#else\r\n\tvec2 lightUv = vUv2;\r\n#endif\r\n\r\n\treflectedLight.indirectDiffuse += PI * emissiveMapTexelTransform( texture2D( lightMap, lightUv ) ).xyz; // factor of PI should not be present; included here to prevent breakage\r\n\r\n#endif\r\n"
              , ou = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_LIGHTMAP\r\n\r\n\t\tuniform sampler2D lightMap;\r\n\t\tuniform float lightMapIntensity;\r\n\r\n\t#endif\r\n#endif\r\n"
              , su = "vec3 diffuse = vec3( 1.0 );\r\n\r\nGeometricContext geometry;\r\ngeometry.position = mvPosition.xyz;\r\ngeometry.normal = normalize( transformedNormal );\r\ngeometry.viewDir = normalize( -mvPosition.xyz );\r\n\r\nGeometricContext backGeometry;\r\nbackGeometry.position = geometry.position;\r\nbackGeometry.normal = -geometry.normal;\r\nbackGeometry.viewDir = geometry.viewDir;\r\n\r\nvLightFront = vec3( 0.0 );\r\n\r\n#ifdef DOUBLE_SIDED\r\n\tvLightBack = vec3( 0.0 );\r\n#endif\r\n\r\nIncidentLight directLight;\r\nfloat dotNL;\r\nvec3 directLightColor_Diffuse;\r\n\r\n#if NUM_POINT_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\r\n\r\n\t\tdotNL = dot( geometry.normal, directLight.direction );\r\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\r\n\r\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if NUM_SPOT_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\r\n\r\n\t\tdotNL = dot( geometry.normal, directLight.direction );\r\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\r\n\r\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#endif\r\n\t}\r\n\r\n#endif\r\n\r\n#if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\r\n\r\n\t\t// TODO (abelnation): implement\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if NUM_DIR_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\r\n\r\n\t\tdotNL = dot( geometry.normal, directLight.direction );\r\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\r\n\r\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if NUM_HEMI_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\r\n\r\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n"
              , uu = "uniform vec3 ambientLightColor;\r\n\r\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\r\n\r\n\tvec3 irradiance = ambientLightColor;\r\n\r\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\tirradiance *= PI;\r\n\r\n\t#endif\r\n\r\n\treturn irradiance;\r\n\r\n}\r\n\r\n#if NUM_DIR_LIGHTS > 0\r\n\r\n\tstruct DirectionalLight {\r\n\t\tvec3 direction;\r\n\t\tvec3 color;\r\n\r\n\t\tint shadow;\r\n\t\tfloat shadowBias;\r\n\t\tfloat spreadAngle;\r\n\t\tvec2 shadowMapSize;\r\n\t\tvec3 shadowCameraParams;\r\n\t};\r\n\r\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\r\n\r\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\r\n\r\n\t\tdirectLight.color = directionalLight.color;\r\n\t\tdirectLight.direction = directionalLight.direction;\r\n\t\tdirectLight.visible = true;\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if NUM_POINT_LIGHTS > 0\r\n\r\n\tstruct PointLight {\r\n\t\tvec3 position;\r\n\t\tvec3 color;\r\n\t\tfloat distance;\r\n\t\tfloat decay;\r\n\r\n\t\tint shadow;\r\n\t\tfloat shadowBias;\r\n\t\tfloat shadowRadius;\r\n\t\tvec2 shadowMapSize;\r\n\t};\r\n\r\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\r\n\r\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\r\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\r\n\r\n\t\tvec3 lVector = pointLight.position - geometry.position;\r\n\t\tfloat lightDistance = length( lVector );\r\n\t\tdirectLight.direction = lVector / lightDistance;\r\n\r\n\r\n\t\tdirectLight.color = pointLight.color;\r\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\r\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if NUM_SPOT_LIGHTS > 0\r\n\r\n\tstruct SpotLight {\r\n\t\tvec3 position;\r\n\t\tvec3 direction;\r\n\t\tvec3 color;\r\n\t\tfloat distance;\r\n\t\tfloat decay;\r\n\t\tfloat coneCos;\r\n\t\tfloat penumbraCos;\r\n\r\n\t\tint shadow;\r\n\t\tfloat shadowBias;\r\n\t\tfloat shadowRadius;\r\n\t\tvec2 shadowMapSize;\r\n\t\tvec3 shadowCameraParams;\r\n\t};\r\n\r\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\r\n\r\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\r\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\r\n\r\n\t\tvec3 lVector = spotLight.position - geometry.position;\r\n\t\tfloat lightDistance = length( lVector );\r\n\t\tdirectLight.direction = lVector / lightDistance;\r\n\r\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\r\n\r\n\t\tif ( angleCos > spotLight.coneCos ) {\r\n\r\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\r\n\r\n\t\t\tdirectLight.color = spotLight.color;\r\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\r\n\t\t\tdirectLight.visible = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdirectLight.color = vec3( 0.0 );\r\n\t\t\tdirectLight.visible = false;\r\n\r\n\t\t}\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n\tstruct RectAreaLight {\r\n\t\tvec3 color;\r\n\t\tvec3 position;\r\n\t\tvec3 halfWidth;\r\n\t\tvec3 halfHeight;\r\n\t};\r\n\r\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\r\n\t// BRDF approximation Texture is 64x64\r\n\tuniform sampler2D ltcMat; // RGBA Float\r\n\tuniform sampler2D ltcMag; // Alpha Float (only has w component)\r\n\r\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\r\n\r\n#endif\r\n\r\n\r\n#if NUM_HEMI_LIGHTS > 0\r\n\r\n\tstruct HemisphereLight {\r\n\t\tvec3 direction;\r\n\t\tvec3 skyColor;\r\n\t\tvec3 groundColor;\r\n\t};\r\n\r\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\r\n\r\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\r\n\r\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\r\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\r\n\r\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\r\n\r\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\t\tirradiance *= PI;\r\n\r\n\t\t#endif\r\n\r\n\t\treturn irradiance;\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\r\n\r\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\r\n\r\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\r\n\r\n\t\t#ifdef ENVMAP_TYPE_CUBE\r\n\r\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\r\n\r\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\r\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\r\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\r\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvec4 envMapColor = vec4( 0.0 );\r\n\r\n\t\t#endif\r\n\r\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\r\n\r\n\t}\r\n\r\n\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\r\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\r\n\r\n\t\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\r\n\t\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\r\n\r\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\r\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\r\n\r\n\t\t// clamp to allowable LOD ranges.\r\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\r\n\r\n\t}\r\n\r\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\r\n\r\n\t\t#ifdef ENVMAP_MODE_REFLECTION\r\n\r\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\r\n\r\n\t\t#endif\r\n\r\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\r\n\r\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\r\n\r\n\t\t#ifdef ENVMAP_TYPE_CUBE\r\n\r\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\r\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\r\n\r\n\t\t\tvec2 sampleUV;\r\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\r\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\r\n\r\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#endif\r\n\r\n\t\treturn envMapColor.rgb * envMapIntensity;\r\n\r\n\t}\r\n\r\n#endif\r\n"
              , lu = "BlinnPhongMaterial material;\r\nmaterial.diffuseColor = diffuseColor.rgb;\r\nmaterial.specularColor = specular;\r\nmaterial.specularShininess = shininess;\r\nmaterial.specularStrength = specularStrength;\r\n"
              , cu = "#if ! defined( VARYING_VVIEWPOSITION )\r\n    varying vec3 vViewPosition;\r\n    #define VARYING_VVIEWPOSITION 1\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n\r\nstruct BlinnPhongMaterial {\r\n\r\n\tvec3\tdiffuseColor;\r\n\tvec3\tspecularColor;\r\n\tfloat\tspecularShininess;\r\n\tfloat\tspecularStrength;\r\n\r\n};\r\n\r\n#if NUM_RECT_AREA_LIGHTS > 0\r\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n        vec3 matDiffColor = material.diffuseColor;\r\n        vec3 matSpecColor = material.specularColor;\r\n        vec3 lightColor   = rectAreaLight.color;\r\n\r\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\r\n\r\n        // Evaluate Lighting Equation\r\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\r\n                geometry,\r\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\r\n                roughness,\r\n                ltcMat, ltcMag );\r\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\r\n                geometry,\r\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\r\n\r\n        // TODO (abelnation): note why division by 2PI is necessary\r\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\r\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\r\n\r\n    }\r\n#endif\r\n\r\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\t#ifdef TOON\r\n\r\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\r\n\r\n\t#else\r\n\r\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\r\n\t\tvec3 irradiance = dotNL * directLight.color;\r\n\r\n\t#endif\r\n\r\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\tirradiance *= PI; // punctual light\r\n\r\n\t#endif\r\n\r\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\r\n\r\n}\r\n\r\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n}\r\n\r\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\r\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\r\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\r\n\r\n#define Material_LightProbeLOD( material )\t(0)\r\n"
              , hu = "PhysicalMaterial material;\r\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\r\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\r\n#ifdef STANDARD\r\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\r\n#else\r\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\r\n\tmaterial.clearCoat = saturate( clearCoat );\r\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\r\n#endif\r\n"
              , fu = "struct PhysicalMaterial {\r\n\r\n\tvec3\tdiffuseColor;\r\n\tfloat\tspecularRoughness;\r\n\tvec3\tspecularColor;\r\n\r\n\t#ifndef STANDARD\r\n\t\tfloat clearCoat;\r\n\t\tfloat clearCoatRoughness;\r\n\t#endif\r\n\r\n};\r\n\r\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\r\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\r\n\r\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\r\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\r\n\r\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\r\n\r\n}\r\n\r\n#if NUM_RECT_AREA_LIGHTS > 0\r\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n        vec3 matDiffColor = material.diffuseColor;\r\n        vec3 matSpecColor = material.specularColor;\r\n        vec3 lightColor   = rectAreaLight.color;\r\n        float roughness = material.specularRoughness;\r\n\r\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\r\n                geometry,\r\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\r\n                roughness,\r\n                ltcMat, ltcMag );\r\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\r\n                geometry,\r\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\r\n\r\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\r\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\r\n\r\n    }\r\n#endif\r\n\r\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\r\n\r\n\tvec3 irradiance = dotNL * directLight.color;\r\n\r\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\tirradiance *= PI; // punctual light\r\n\r\n\t#endif\r\n\r\n\tvec3 specularRadiance = irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\r\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n\t#ifndef STANDARD\r\n\r\n\t\tfloat layerAttention;\r\n\t\tvec3 clearCoatSpecularRadiance = irradiance * BRDF_ClearCoat_GGX( directLight, geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\r\n\r\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\r\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\r\n\r\n\t#endif\r\n\r\n\treflectedLight.directSpecular += specularRadiance;\r\n\treflectedLight.directDiffuse += diffuseRadiance;\r\n\r\n\r\n}\r\n\r\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n\t#ifndef STANDARD\r\n\r\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\r\n\r\n\t#endif\r\n\r\n\treflectedLight.indirectDiffuse += diffuseRadiance;\r\n\r\n}\r\n\r\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\tvec3 specularRadiance = radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\r\n\r\n\t#ifndef STANDARD\r\n\r\n\t\tfloat layerAttention;\r\n\t\tvec3 clearCoatSpecularRadiance = clearCoatRadiance * BRDF_ClearCoat_GGX_Environment( geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\r\n\r\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\r\n\r\n\t#endif\r\n\r\n\treflectedLight.indirectSpecular += specularRadiance;\r\n\r\n}\r\n\r\n#define RE_Direct\t\t\t\tRE_Direct_Physical\r\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\r\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\r\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\r\n\r\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\r\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\r\n\r\n// ref: http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\r\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\r\n\r\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\r\n\r\n}\r\n"
              , du = "//\r\n// This is a template that can be used to light a material, it uses pluggable RenderEquations (RE)\r\n//   for specific lighting scenarios.\r\n//\r\n// Instructions for use:\r\n//  - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\r\n//  - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\r\n//  - Create a material parameter that is to be passed as the third parameter to your lighting functions.\r\n//\r\n// TODO:\r\n//  - Add area light support.\r\n//  - Add sphere light support.\r\n//  - Add diffuse light probe (irradiance cubemap) support.\r\n//\r\n\r\nGeometricContext geometry;\r\n\r\ngeometry.position = - vViewPosition;\r\ngeometry.normal = normal;\r\ngeometry.viewDir = normalize( vViewPosition );\r\n\r\nIncidentLight directLight;\r\n\r\n#ifdef USE_SHADOWMAP\r\n\tinitShadows();\r\n#endif\r\n\r\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\r\n\r\n\tPointLight pointLight;\r\n\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tpointLight = pointLights[ i ];\r\n\r\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\r\n\r\n\t\t#ifdef USE_SHADOWMAP\r\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\r\n\t\t#endif\r\n\r\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\r\n\r\n\tSpotLight spotLight;\r\n\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tspotLight = spotLights[ i ];\r\n\r\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\r\n\r\n\t\t#ifdef USE_SHADOWMAP\r\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, vSpotShadowCoord[ i ], 1 ) : 1.0;\r\n\t\t#endif\r\n\r\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\r\n\r\n\tDirectionalLight directionalLight;\r\n\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tdirectionalLight = directionalLights[ i ];\r\n\r\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\r\n\r\n\t\t#ifdef USE_SHADOWMAP\r\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, vDirectionalShadowCoord[ i ], 0 ) : 1.0;\r\n\t\t#endif\r\n\r\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\r\n\r\n\tRectAreaLight rectAreaLight;\r\n\r\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\r\n\r\n\t\trectAreaLight = rectAreaLights[ i ];\r\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if defined( RE_IndirectDiffuse )\r\n\r\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\r\n\r\n\t#ifdef USE_LIGHTMAP\r\n\r\n\t\t#if defined( TEXTURE_SLOTS )\r\n\t\t\tvec2 lightUv = lightMapUV();\r\n\t\t\tvec3 lightMapIrradiance = lightMapTexelTransform( texture2D( lightMap, vUv2 ) ).xyz;\r\n\t\t#else\r\n\t\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\r\n\t\t#endif\r\n\r\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\r\n\r\n\t\t#endif\r\n\r\n\t\tirradiance += lightMapIrradiance;\r\n\r\n\t#endif\r\n\r\n\t#if ( NUM_HEMI_LIGHTS > 0 )\r\n\r\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\r\n\r\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\r\n\r\n\t\t}\r\n\r\n\t#endif\r\n\r\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t// TODO, replace 8 with the real maxMIPLevel\r\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\r\n\r\n\t#endif\r\n\r\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\r\n\r\n#endif\r\n\r\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\r\n\r\n\t// TODO, replace 8 with the real maxMIPLevel\r\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\r\n\r\n\t#ifndef STANDARD\r\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\r\n\t#else\r\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\r\n\t#endif\r\n\r\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\r\n\r\n#endif\r\n"
              , pu = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\r\n\r\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\r\n\r\n#endif\r\n"
              , mu = "#ifdef USE_LOGDEPTHBUF\r\n\r\n\tuniform float logDepthBufFC;\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tvarying float vFragDepth;\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , gu = "#ifdef USE_LOGDEPTHBUF\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tvarying float vFragDepth;\r\n\r\n\t#endif\r\n\r\n\tuniform float logDepthBufFC;\r\n\r\n#endif\r\n"
              , vu = "#ifdef USE_LOGDEPTHBUF\r\n\r\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tvFragDepth = 1.0 + gl_Position.w;\r\n\r\n\t#else\r\n\r\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , yu = "#ifdef USE_MAP\r\n\r\n#if defined( TEXTURE_SLOTS )\r\n\tvec2 mapUv = mapUV();\r\n#else\r\n\tvec2 mapUv = vUv;\r\n#endif\r\n\r\n\tvec4 texelColor = texture2D( map, mapUv );\r\n\r\n\ttexelColor = mapTexelTransform( mapTexelToLinear( texelColor ) );\r\n\tdiffuseColor *= texelColor;\r\n\r\n#endif\r\n"
              , Mu = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_MAP\r\n\r\n\t\tuniform sampler2D map;\r\n\r\n\t#endif\r\n#endif\r\n"
              , wu = "#ifdef USE_MAP\r\n\r\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\r\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\r\n\r\n#endif\r\n"
              , xu = "#ifdef USE_MAP\r\n\r\n\tuniform vec4 offsetRepeat;\r\n\tuniform sampler2D map;\r\n\r\n#endif\r\n"
              , Au = "float metalnessFactor = metalness;\r\n\r\n#ifdef USE_METALNESSMAP\r\n\r\n\t#if defined( TEXTURE_SLOTS )\r\n\t\tvec2 metalnessUv = metalnessMapUV();\r\n\t#else\r\n\t\tvec2 metalnessUv = vUv;\r\n\t#endif\r\n\r\n\tvec4 texelMetalness = metalnessMapTexelTransform( texture2D( metalnessMap, metalnessUv ) );\r\n\tmetalnessFactor *= texelMetalness.r;\r\n\r\n#endif\r\n"
              , bu = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_METALNESSMAP\r\n\r\n\t\tuniform sampler2D metalnessMap;\r\n\r\n\t#endif\r\n#endif\r\n"
              , Tu = "#ifdef USE_MORPHNORMALS\r\n\r\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\r\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\r\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\r\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\r\n\r\n#endif\r\n"
              , _u = "#ifdef USE_MORPHTARGETS\r\n\r\n\t#ifndef USE_MORPHNORMALS\r\n\r\n\tuniform float morphTargetInfluences[ 8 ];\r\n\r\n\t#else\r\n\r\n\tuniform float morphTargetInfluences[ 4 ];\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Eu = "#ifdef USE_MORPHTARGETS\r\n\r\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\r\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\r\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\r\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\r\n\r\n\t#ifndef USE_MORPHNORMALS\r\n\r\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\r\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\r\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\r\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Su = "#ifdef DOUBLE_SIDED\r\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\r\n#else\r\n\tfloat flipNormal = 1.0;\r\n#endif\r\n"
              , Du = "#ifdef FLAT_SHADED\r\n\r\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\r\n\r\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\r\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\r\n\tvec3 normal = normalize( cross( fdx, fdy ) );\r\n\r\n#else\r\n\r\n\tvec3 normal = normalize( vNormal ) * flipNormal;\r\n\r\n#endif\r\n\r\n#ifdef USE_NORMALMAP\r\n\r\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\r\n\r\n#elif defined( USE_BUMPMAP )\r\n\r\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\r\n\r\n#endif\r\n"
              , Nu = "#ifdef USE_NORMALMAP\r\n\r\n\t#if ! defined( TEXTURE_SLOTS )\r\n\t\tuniform sampler2D normalMap;\r\n\t#endif\r\n\t\tuniform vec2 normalScale;\r\n\r\n\t// Per-Pixel Tangent Space Normal Mapping\r\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\r\n\r\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\r\n\r\n\t\t#if defined( TEXTURE_SLOTS )\r\n\t\t\tvec2 normalUv = normalMapUV();\r\n\t\t#else\r\n\t\t\tvec2 normalUv = vUv;\r\n\t\t#endif\r\n\r\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\r\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\r\n\t\tvec2 st0 = dFdx( normalUv.st );\r\n\t\tvec2 st1 = dFdy( normalUv.st );\r\n\r\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\r\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\r\n\t\tvec3 N = normalize( surf_norm );\r\n\r\n\t\tvec3 mapN = texture2D( normalMap, normalUv ).xyz * 2.0 - 1.0;\r\n\t\tmapN.xy = normalScale * mapN.xy;\r\n\t\tmat3 tsn = mat3( S, T, N );\r\n\t\treturn normalize( tsn * mapN );\r\n\r\n\t}\r\n\r\n#endif\r\n"
              , Iu = 'vec3 packNormalToRGB( const in vec3 normal ) {\r\n  return normalize( normal ) * 0.5 + 0.5;\r\n}\r\n\r\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\r\n  return 1.0 - 2.0 * rgb.xyz;\r\n}\r\n\r\n\r\n\r\nvec4 packDepthToRGBA( const in highp float v ) {\r\n\r\n  const highp vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\r\n  const highp vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\r\n  highp vec4 res = mod( v * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 ); // vec4 res = fract( depth * bit_shift );",\r\n  res -= res.xxyz * bit_mask;\r\n  return res;\r\n\r\n\r\n\r\n\r\n}\r\n\r\nfloat unpackRGBAToDepth( const in vec4 v ) {\r\n\r\n  const highp vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\r\n\treturn dot( v, bit_shift );\r\n\r\n  //return dot( v, UnpackFactors );\r\n\r\n}\r\n\r\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\r\n\r\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\r\n  return ( viewZ + near ) / ( near - far );\r\n}\r\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\r\n  return linearClipZ * ( near - far ) - near;\r\n}\r\n\r\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\r\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\r\n}\r\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\r\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\r\n}\r\n'
              , Lu = "#ifdef PREMULTIPLIED_ALPHA\r\n\r\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\r\n\tgl_FragColor.rgb *= gl_FragColor.a;\r\n\r\n#endif\r\n"
              , Cu = "#ifdef USE_SKINNING\r\n\r\n\tvec4 mvPosition = modelViewMatrix * skinned;\r\n\r\n#else\r\n\r\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\r\n\r\n#endif\r\n\r\ngl_Position = projectionMatrix * mvPosition;\r\n"
              , Ou = "float roughnessFactor = roughness;\r\n\r\n#ifdef USE_ROUGHNESSMAP\r\n\r\n\t#if defined( TEXTURE_SLOTS )\r\n\t\tvec2 roughnessUv = roughnessMapUV();\r\n\t#else\r\n\t\tvec2 roughnessUv = vUv;\r\n\t#endif\r\n\r\n\tvec4 texelRoughness = roughnessMapTexelTransform( texture2D( roughnessMap, roughnessUv ) );\r\n\troughnessFactor *= texelRoughness.r;\r\n\r\n#endif\r\n"
              , ju = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_ROUGHNESSMAP\r\n\r\n\t\tuniform sampler2D roughnessMap;\r\n\r\n\t#endif\r\n#endif\r\n"
              , Ru = "#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\r\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\r\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\r\n\t#if defined( SHADOWMAP_TYPE_PCSS )\r\n\t\t#define PCSS_QUALITY_LEVEL 5\r\n\t\t#define PCSS_NUM_POISSON_SAMPLES 16\r\n\t\t#define PCSS_ROTATE_POISSON_SAMPLES 1\r\n\r\n\t\tvec2 poissonDisk[PCSS_NUM_POISSON_SAMPLES];\r\n\r\n\t\tvoid initPercentCloserSoftShadow( const in vec2 randomSeed )\t{\r\n\r\n\t\t\tpoissonDisk[0] = vec2(-0.94201624, -0.39906216 );\r\n\t\t\tpoissonDisk[1] = vec2( 0.94558609, -0.76890725 );\r\n\t\t\tpoissonDisk[2] = vec2( -0.094184101, -0.92938870 );\r\n\t\t\tpoissonDisk[3] = vec2( 0.34495938, 0.29387760 );\r\n\t\t\tpoissonDisk[4] = vec2( -0.91588581, 0.45771432 );\r\n\t\t\tpoissonDisk[5] = vec2( -0.81544232, -0.87912464 );\r\n\t\t\tpoissonDisk[6] = vec2( -0.38277543, 0.27676845 );\r\n\t\t\tpoissonDisk[7] = vec2( 0.97484398, 0.75648379 );\r\n\t\t\tpoissonDisk[8] = vec2( 0.44323325, -0.97511554 );\r\n\t\t\tpoissonDisk[9] = vec2( 0.53742981, -0.47373420 );\r\n\t\t\tpoissonDisk[10] = vec2( -0.26496911, -0.41893023 );\r\n\t\t\tpoissonDisk[11] = vec2( 0.79197514, 0.19090188 );\r\n\t\t\tpoissonDisk[12] = vec2( -0.24188840, 0.99706507 );\r\n\t\t\tpoissonDisk[13] = vec2( -0.81409955, 0.91437590 );\r\n\t\t\tpoissonDisk[14] = vec2( 0.19984126, 0.78641367 );\r\n\t\t\tpoissonDisk[15] = vec2( 0.14383161, -0.14100790 );\r\n\t\t}\r\n\r\n\t\tmat2 createRotationMatrix( const in vec2 randomSeed ) {\r\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\r\n\t\t\tfloat c = cos( angle ), s = sin( angle );\r\n\t\t\treturn mat2( c, s, -s, c );\r\n\t\t}\r\n\r\n\t\tfloat penumbraSize( const in float zReceiverLightSpace, const in float zBlockerLightSpace ) { // Parallel plane estimation\r\n\t\t\treturn (zReceiverLightSpace - zBlockerLightSpace) / zBlockerLightSpace;\r\n\t\t}\r\n\r\n\t\tfloat findBlockerLightZ( sampler2D shadowMap, const in vec2 uv, const in float zReceiverClipSpace, const in float zReceiverLightSpace, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec2 randomSeed, const int lightType ) {\r\n\t\t\t// This uses similar triangles to compute what\r\n\t\t\t// area of the shadow map we should search\r\n\t\t\tfloat lightFrustrumWidth = 2.0 * shadowCameraParams.y * tan(shadowCameraParams.x * 0.5);\r\n\t\t\tfloat searchRadius = 0.0;\r\n\t\t\tsearchRadius = ( lightType == 0) ? zReceiverLightSpace * spreadAngle/shadowCameraParams.x : ( shadowRadius / lightFrustrumWidth ) * ( zReceiverLightSpace - shadowCameraParams.y ) / zReceiverLightSpace;\r\n\t\t\tfloat blockerLightZSum = 0.0;\r\n\t\t\tint numBlockers = 0;\r\n\r\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\r\n\t\t\tfloat s = sin(angle);\r\n\t\t\tfloat c = cos(angle);\r\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i++ ) {\r\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\r\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\r\n\t\t\t#else\r\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\r\n\t\t\t#endif\r\n\t\t\t\tfloat shadowMapDepth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonSample * searchRadius ) );\r\n\t\t\t\tif ( shadowMapDepth < zReceiverClipSpace ) {\r\n\t\t\t\t\tblockerLightZSum += shadowMapDepth;\r\n\t\t\t\t\tnumBlockers ++;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif( numBlockers == 0 ) return -1.0;\r\n\r\n\t\t\treturn blockerLightZSum / float( numBlockers );\r\n\t\t}\r\n\r\n\t\tfloat percentCloserFilter( sampler2D shadowMap, vec2 uv, float receiverClipZ, float filterRadius, const in vec2 randomSeed ) {\r\n\t\t\tint numBlockers = 0;\r\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\r\n\t\t\tfloat s = sin(angle);\r\n\t\t\tfloat c = cos(angle);\r\n\r\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i ++ ) {\r\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\r\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\r\n\t\t\t#else\r\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\r\n\t\t\t#endif\r\n\t\t\t\tvec2 uvOffset = poissonSample * filterRadius;\r\n\r\n\t\t\t\tfloat blockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv + uvOffset ) );\r\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\r\n\r\n\t\t\t\tblockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv - uvOffset ) );\r\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn float( numBlockers ) / ( 2.0 * float( PCSS_NUM_POISSON_SAMPLES ) );\r\n\t\t}\r\n\r\n\t\tfloat percentCloserSoftShadow( sampler2D shadowMap, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec4 coords, const int lightType ) {\r\n\r\n\t\t\tvec2 uv = coords.xy;\r\n\t\t\tfloat receiverLightZ = coords.z;\r\n\t\t\tfloat cameraNear = shadowCameraParams.y, cameraFar = shadowCameraParams.z;\r\n\t\t\tfloat zReceiverLightSpace;\r\n\t\t\tif(lightType == 0)\r\n\t\t\t\tzReceiverLightSpace = -orthographicDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\r\n\t\t\telse\r\n\t\t\t\tzReceiverLightSpace = -perspectiveDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\r\n\r\n\t\t\t// STEP 1: blocker search\r\n\t\t\tfloat blockerLightZ = findBlockerLightZ( shadowMap, uv, receiverLightZ, zReceiverLightSpace, shadowRadius, spreadAngle, shadowCameraParams, uv, lightType );\r\n\r\n\t\t\t//There are no occluders so early out (this saves filtering)\r\n\t\t\tif( blockerLightZ == -1.0 ) return 1.0;\r\n\r\n\t\t\tfloat avgBlockerDepthLightSpace;\r\n\t\t\tfloat filterRadius = 0.0;\r\n\r\n\t\t\t// STEP 2: penumbra size\r\n\t\t\tif(lightType == 0) {\r\n\t\t\t\tavgBlockerDepthLightSpace = -orthographicDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\r\n\t\t\t\tfilterRadius = (zReceiverLightSpace - avgBlockerDepthLightSpace) * spreadAngle/shadowCameraParams.x;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tavgBlockerDepthLightSpace = -perspectiveDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\r\n\t\t\t\tfloat penumbraRatio = penumbraSize( zReceiverLightSpace, avgBlockerDepthLightSpace );\r\n\t\t\t\tfloat lightFrustrumWidth = 2.0 * cameraNear * tan(shadowCameraParams.x * 0.5);\r\n\t\t\t\tfilterRadius = penumbraRatio * ( shadowRadius/lightFrustrumWidth ) * cameraNear / zReceiverLightSpace;\r\n\t\t\t}\r\n\t\t\t// STEP 3: filtering\r\n\t\t\treturn percentCloserFilter( shadowMap, uv, receiverLightZ, filterRadius, uv );\r\n\t\t}\r\n\r\n\t#endif\r\n\r\n    #if NUM_RECT_AREA_LIGHTS > 0\r\n        // TODO (abelnation): create uniforms for area light shadows\r\n    #endif\r\n\r\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\r\n\r\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\r\n\r\n\t}\r\n\r\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\r\n\r\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\r\n\r\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\r\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\r\n\r\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\r\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\r\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\r\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\r\n\r\n\t\tvec2 f = fract( uv * size + 0.5 );\r\n\r\n\t\tfloat a = mix( lb, lt, f.y );\r\n\t\tfloat b = mix( rb, rt, f.y );\r\n\t\tfloat c = mix( a, b, f.x );\r\n\r\n\t\treturn c;\r\n\r\n\t}\r\n\r\n\tvoid initShadows() {\r\n\r\n\t\t#if defined( SHADOWMAP_TYPE_PCSS )\r\n\r\n\t\t  initPercentCloserSoftShadow( vViewPosition.xy );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, float spreadAngle, vec3 shadowCameraParams, vec4 shadowCoord, const int lightType ) {\r\n\r\n\t\tshadowCoord.xyz /= shadowCoord.w;\r\n\t\tshadowCoord.z += shadowBias;\r\n\r\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\r\n\t\t// if ( all( something, something ) ) using this instead\r\n\r\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\r\n\t\tbool inFrustum = all( inFrustumVec );\r\n\r\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\r\n\r\n\t\tbool frustumTest = all( frustumTestVec );\r\n\r\n\t\tif ( frustumTest ) {\r\n\r\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\r\n\r\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\r\n\r\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\r\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\r\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\r\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\r\n\r\n\t\t\treturn (\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\r\n\t\t\t) * ( 1.0 / 9.0 );\r\n\r\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\r\n\r\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\r\n\r\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\r\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\r\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\r\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\r\n\r\n\t\t\treturn (\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\r\n\t\t\t) * ( 1.0 / 9.0 );\r\n\r\n\t\t#elif defined( SHADOWMAP_TYPE_PCSS )\r\n\r\n\t\t  return percentCloserSoftShadow( shadowMap, shadowRadius, spreadAngle, shadowCameraParams, shadowCoord, lightType );\r\n\r\n\t\t#else // no percentage-closer filtering:\r\n\r\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\r\n\r\n\t\t#endif\r\n\r\n\t\t}\r\n\r\n\t\treturn 1.0;\r\n\r\n\t}\r\n\r\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\r\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\r\n\t// 2D texture:\r\n\t//\r\n\t// xzXZ\r\n\t//  y Y\r\n\t//\r\n\t// Y - Positive y direction\r\n\t// y - Negative y direction\r\n\t// X - Positive x direction\r\n\t// x - Negative x direction\r\n\t// Z - Positive z direction\r\n\t// z - Negative z direction\r\n\t//\r\n\t// Source and test bed:\r\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\r\n\r\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\r\n\r\n\t\t// Number of texels to avoid at the edge of each square\r\n\r\n\t\tvec3 absV = abs( v );\r\n\r\n\t\t// Intersect unit cube\r\n\r\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\r\n\t\tabsV *= scaleToCube;\r\n\r\n\t\t// Apply scale to avoid seams\r\n\r\n\t\t// two texels less per square (one texel will do for NEAREST)\r\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\r\n\r\n\t\t// Unwrap\r\n\r\n\t\t// space: -1 ... 1 range for each square\r\n\t\t//\r\n\t\t// #X##\t\tdim    := ( 4 , 2 )\r\n\t\t//  # #\t\tcenter := ( 1 , 1 )\r\n\r\n\t\tvec2 planar = v.xy;\r\n\r\n\t\tfloat almostATexel = 1.5 * texelSizeY;\r\n\t\tfloat almostOne = 1.0 - almostATexel;\r\n\r\n\t\tif ( absV.z >= almostOne ) {\r\n\r\n\t\t\tif ( v.z > 0.0 )\r\n\t\t\t\tplanar.x = 4.0 - v.x;\r\n\r\n\t\t} else if ( absV.x >= almostOne ) {\r\n\r\n\t\t\tfloat signX = sign( v.x );\r\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\r\n\r\n\t\t} else if ( absV.y >= almostOne ) {\r\n\r\n\t\t\tfloat signY = sign( v.y );\r\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\r\n\t\t\tplanar.y = v.z * signY - 2.0;\r\n\r\n\t\t}\r\n\r\n\t\t// Transform to UV space\r\n\r\n\t\t// scale := 0.5 / dim\r\n\t\t// translate := ( center + 0.5 ) / dim\r\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\r\n\r\n\t}\r\n\r\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\r\n\r\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\r\n\r\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\r\n\t\t// the distance from the light to the world-space position of the fragment.\r\n\t\tvec3 lightToPosition = shadowCoord.xyz;\r\n\r\n\t\t// bd3D = base direction 3D\r\n\t\tvec3 bd3D = normalize( lightToPosition );\r\n\t\t// dp = distance from light to fragment position\r\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\r\n\r\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\r\n\r\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\r\n\r\n\t\t\treturn (\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\r\n\t\t\t) * ( 1.0 / 9.0 );\r\n\r\n\t\t#else // no percentage-closer filtering\r\n\r\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n"
              , Pu = "#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\r\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\r\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n    #if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n        // TODO (abelnation): uniforms for area light shadows\r\n\r\n    #endif\r\n\r\n#endif\r\n"
              , zu = "#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n    #if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n    // TODO (abelnation): update vAreaShadowCoord with area light info\r\n\r\n    #endif\r\n\r\n#endif\r\n"
              , Bu = "float getShadowMask() {\r\n\r\n\tfloat shadow = 1.0;\r\n\r\n\t#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\tDirectionalLight directionalLight;\r\n\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tdirectionalLight = directionalLights[ i ];\r\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, vDirectionalShadowCoord[ i ], 0 ) : 1.0;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\tSpotLight spotLight;\r\n\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tspotLight = spotLights[ i ];\r\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, vSpotShadowCoord[ i ], 1 ) : 1.0;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\tPointLight pointLight;\r\n\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tpointLight = pointLights[ i ];\r\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n\t// TODO (abelnation): update shadow for Area light\r\n\r\n\t#endif\r\n\r\n\t#endif\r\n\r\n\treturn shadow;\r\n\r\n}\r\n"
              , Uu = "#ifdef USE_SKINNING\r\n\r\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\r\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\r\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\r\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\r\n\r\n#endif\r\n"
              , Vu = "#ifdef USE_SKINNING\r\n\r\n\tuniform mat4 bindMatrix;\r\n\tuniform mat4 bindMatrixInverse;\r\n\r\n\t#ifdef BONE_TEXTURE\r\n\r\n\t\tuniform sampler2D boneTexture;\r\n\t\tuniform int boneTextureWidth;\r\n\t\tuniform int boneTextureHeight;\r\n\r\n\t\tmat4 getBoneMatrix( const in float i ) {\r\n\r\n\t\t\tfloat j = i * 4.0;\r\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\r\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\r\n\r\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\r\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\r\n\r\n\t\t\ty = dy * ( y + 0.5 );\r\n\r\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\r\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\r\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\r\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\r\n\r\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\r\n\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\r\n\t#else\r\n\r\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\r\n\r\n\t\tmat4 getBoneMatrix( const in float i ) {\r\n\r\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , ku = "#ifdef USE_SKINNING\r\n\r\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\r\n\r\n\tvec4 skinned = vec4( 0.0 );\r\n\tskinned += boneMatX * skinVertex * skinWeight.x;\r\n\tskinned += boneMatY * skinVertex * skinWeight.y;\r\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\r\n\tskinned += boneMatW * skinVertex * skinWeight.w;\r\n\tskinned  = bindMatrixInverse * skinned;\r\n\r\n#endif\r\n"
              , Fu = "#ifdef USE_SKINNING\r\n\r\n\tmat4 skinMatrix = mat4( 0.0 );\r\n\tskinMatrix += skinWeight.x * boneMatX;\r\n\tskinMatrix += skinWeight.y * boneMatY;\r\n\tskinMatrix += skinWeight.z * boneMatZ;\r\n\tskinMatrix += skinWeight.w * boneMatW;\r\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\r\n\r\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\r\n\r\n#endif\r\n"
              , Gu = "uniform vec2 $SLOT_NAME$TexelTransformParams;\r\n\r\nvec4 $SLOT_NAME$TexelTransform( vec4 value ) {\r\n    value.rgb *= $SLOT_NAME$TexelTransformParams.x;\r\n    value.rgb += vec3( $SLOT_NAME$TexelTransformParams.y );\r\n    return value;\r\n}\r\n"
              , Yu = "uniform vec4 $SLOT_NAME$UVTransformParams;\r\n\r\nvec2 $SLOT_NAME$UV() {\r\n  vec2 value = $UV_VAR_NAME$;\r\n  value.xy *= $SLOT_NAME$UVTransformParams.xy;\r\n  value.xy += $SLOT_NAME$UVTransformParams.zw;\r\n  return value;\r\n}\r\n"
              , Qu = "float specularStrength;\r\n\r\n#ifdef USE_SPECULARMAP\r\n\r\n\t#if defined( TEXTURE_SLOTS )\r\n\t\tvec2 specularUv = specularMapUV();\r\n\t#else\r\n\t\tvec2 specularUv = vUv;\r\n\t#endif\r\n\r\n\tvec4 texelSpecular = specularMapTexelTransform( texture2D( specularMap, specularUv ) );\r\n\tspecularStrength = texelSpecular.r;\r\n\r\n#else\r\n\r\n\tspecularStrength = 1.0;\r\n\r\n#endif\r\n"
              , Hu = "#if ! defined( TEXTURE_SLOTS )\r\n\t#ifdef USE_SPECULARMAP\r\n\r\n\t\tuniform sampler2D specularMap;\r\n\r\n\t#endif\r\n#endif\r\n"
              , Wu = "#if defined( TONE_MAPPING )\r\n\r\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\r\n\r\n#endif\r\n"
              , Xu = "#define saturate(a) clamp( a, 0.0, 1.0 )\r\n\r\nuniform float toneMappingExposure;\r\nuniform float toneMappingWhitePoint;\r\n\r\n// exposure only\r\nvec3 LinearToneMapping( vec3 color ) {\r\n\r\n  return toneMappingExposure * color;\r\n\r\n}\r\n\r\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\r\nvec3 ReinhardToneMapping( vec3 color ) {\r\n\r\n  color *= toneMappingExposure;\r\n  return saturate( color / ( vec3( 1.0 ) + color ) );\r\n\r\n}\r\n\r\n// source: http://filmicgames.com/archives/75\r\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\r\nvec3 Uncharted2ToneMapping( vec3 color ) {\r\n\r\n  // John Hable's filmic operator from Uncharted 2 video game\r\n  color *= toneMappingExposure;\r\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\r\n\r\n}\r\n\r\n// source: http://filmicgames.com/archives/75\r\nvec3 OptimizedCineonToneMapping( vec3 color ) {\r\n\r\n  // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\r\n  color *= toneMappingExposure;\r\n  color = max( vec3( 0.0 ), color - 0.004 );\r\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\r\n\r\n}\r\n"
              , qu = "#if ! defined( TEXTURE_SLOTS )\r\n\r\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP )\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , Zu = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )  || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP )\r\n\r\n\tvarying vec2 vUv;\r\n\tuniform vec4 offsetRepeat;\r\n\r\n#endif\r\n"
              , Ju = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP )\r\n\r\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\r\n\r\n#endif\r\n"
              , Ku = "#if ! defined( TEXTURE_SLOTS )\r\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\r\n\r\n\t\tvarying vec2 vUv2;\r\n\r\n\t#endif\r\n#endif\r\n"
              , $u = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\r\n\r\n\tattribute vec2 uv2;\r\n\tvarying vec2 vUv2;\r\n\r\n#endif\r\n"
              , el = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\r\n\r\n\tvUv2 = uv2;\r\n\r\n#endif\r\n"
              , tl = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\r\n\r\n\t#ifdef USE_SKINNING\r\n\r\n\t\tvec4 worldPosition = modelMatrix * skinned;\r\n\r\n\t#else\r\n\r\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\r\n\r\n\t#endif\r\n\r\n#endif\r\n"
              , rl = "uniform samplerCube tCube;\r\nuniform float tFlip;\r\nuniform float opacity;\r\n\r\nvarying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\r\n\tgl_FragColor.a *= opacity;\r\n\r\n}\r\n"
              , nl = "varying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\tvWorldPosition = transformDirection( position, modelMatrix );\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\r\n}\r\n"
              , il = "uniform float tFlip;\r\nuniform float opacity;\r\nuniform float roughness;\r\n\r\nvarying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <cube_uv_reflection_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec3 queryReflectVec = vec3( tFlip * vWorldPosition.x, vWorldPosition.yz );\r\n\r\n\tvec4 envMapColor = vec4( 0.0 );\r\n\r\n\t#if defined( ENVMAP_TYPE_CUBE )\r\n\r\n\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\tenvMapColor = textureCubeLodEXT( envMap, queryReflectVec, roughness * 8.0 );\r\n\r\n\t\t#else\r\n\r\n\t\t\tenvMapColor = textureCube( envMap, queryReflectVec, roughness * 8.0 );\r\n\r\n\t\t#endif\r\n\r\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\t\tenvMapColor.rgb *= envMapIntensity;\r\n\r\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\tenvMapColor = textureCubeUV( queryReflectVec, roughness );\r\n\t\tenvMapColor.rgb *= envMapIntensity;\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor = envMapColor;\r\n\tgl_FragColor.a = opacity;\r\n\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <logdepthbuf_fragment>\r\n\r\n}\r\n"
              , al = "varying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n#include <clipping_planes_pars_vertex>\r\n\r\n#if NUM_CLIPPING_PLANES == 0\r\n\t#if ! defined( VARYING_VVIEWPOSITION )\r\n   \t\tvarying vec3 vViewPosition;\r\n   \t\t#define VARYING_VVIEWPOSITION 1\r\n   #endif\r\n#endif\r\n\r\nvoid main() {\r\n\r\n\tvWorldPosition = transformDirection( position, modelMatrix );\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n}\r\n"
              , ol = "precision highp float;\r\n\r\n#if DEPTH_PACKING == 3200\r\n\r\n\tuniform float opacity;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <uv_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( 1.0 );\r\n\r\n\t#if DEPTH_PACKING == 3200\r\n\r\n\t\tdiffuseColor.a = opacity;\r\n\r\n\t#endif\r\n\r\n\t#include <map_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\r\n\t#if DEPTH_PACKING == 3200\r\n\r\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\r\n\r\n\t#elif DEPTH_PACKING == 3201\r\n\r\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\r\n\r\n\t#endif\r\n\r\n}\r\n"
              , sl = "#include <common>\r\n#include <uv_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\r\n\t#include <skinbase_vertex>\r\n\r\n\t#include <begin_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n}\r\n"
              , ul = "uniform vec3 lightPos;\r\nvarying vec4 vWorldPosition;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main () {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\r\n\r\n}\r\n"
              , ll = "varying vec4 vWorldPosition;\r\n\r\n#include <common>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <skinbase_vertex>\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <worldpos_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvWorldPosition = worldPosition;\r\n\r\n}\r\n"
              , cl = "uniform sampler2D tEquirect;\r\nuniform float tFlip;\r\n\r\nvarying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\t// \tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\r\n\tvec3 direction = normalize( vWorldPosition );\r\n\tvec2 sampleUV;\r\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\r\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\r\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\r\n\r\n}\r\n"
              , hl = "varying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\tvWorldPosition = transformDirection( position, modelMatrix );\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\r\n}\r\n"
              , fl = "uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\nuniform float dashSize;\r\nuniform float totalSize;\r\n\r\nvarying float vLineDistance;\r\n\r\n#include <common>\r\n#include <color_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\r\n\r\n\t\tdiscard;\r\n\r\n\t}\r\n\r\n\tvec3 outgoingLight = vec3( 0.0 );\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <color_fragment>\r\n\r\n\toutgoingLight = diffuseColor.rgb; // simple shader\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n"
              , dl = "uniform float scale;\r\nattribute float lineDistance;\r\n\r\nvarying float vLineDistance;\r\n\r\n#include <common>\r\n#include <color_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <color_vertex>\r\n\r\n\tvLineDistance = scale * lineDistance;\r\n\r\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n}\r\n"
              , pl = "uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\r\n\t// accumulation (baked indirect lighting only)\r\n\t#ifdef USE_LIGHTMAP\r\n\r\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\r\n\r\n\t#else\r\n\r\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\r\n\r\n\t#endif\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\r\n\r\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\r\n\r\n\t#include <normal_flip>\r\n\t#include <envmap_fragment>\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n"
              , ml = "#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <envmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\t#include <skinbase_vertex>\r\n\r\n\t#ifdef USE_ENVMAP\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n\t#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\t#include <envmap_vertex>\r\n\r\n}\r\n"
              , gl = "uniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform float opacity;\r\n\r\nvarying vec3 vLightFront;\r\n\r\n#ifdef DOUBLE_SIDED\r\n\r\n\tvarying vec3 vLightBack;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <fog_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <shadowmask_pars_fragment>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\tvec3 totalEmissiveRadiance = emissive;\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\t#include <emissivemap_fragment>\r\n\r\n\t// accumulation\r\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\r\n\r\n\t#include <lightmap_fragment>\r\n\r\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\r\n\r\n\t#ifdef DOUBLE_SIDED\r\n\r\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\r\n\r\n\t#else\r\n\r\n\t\treflectedLight.directDiffuse = vLightFront;\r\n\r\n\t#endif\r\n\r\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\r\n\r\n\t#include <normal_flip>\r\n\t#include <envmap_fragment>\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n"
              , vl = "#define LAMBERT\r\n\r\nvarying vec3 vLightFront;\r\n\r\n#ifdef DOUBLE_SIDED\r\n\r\n\tvarying vec3 vLightBack;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <envmap_pars_vertex>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <color_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <envmap_vertex>\r\n\t#include <lights_lambert_vertex>\r\n\t#include <shadowmap_vertex>\r\n\r\n}\r\n"
              , yl = "#define PHONG\r\n\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform vec3 specular;\r\nuniform float shininess;\r\nuniform float opacity;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <gradientmap_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <lights_phong_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\tvec3 totalEmissiveRadiance = emissive;\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\t#include <normal_flip>\r\n\t#include <normal_fragment>\r\n\t#include <emissivemap_fragment>\r\n\r\n\t// accumulation\r\n\t#include <lights_phong_fragment>\r\n\t#include <lights_template>\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\r\n\r\n\t#include <envmap_fragment>\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n"
              , Ml = "#define PHONG\r\n\r\n#if ! defined( VARYING_VVIEWPOSITION )\r\n\tvarying vec3 vViewPosition;\r\n\t#define VARYING_VVIEWPOSITION 1\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <envmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\tvNormal = normalize( transformedNormal );\r\n\r\n#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <envmap_vertex>\r\n\t#include <shadowmap_vertex>\r\n\r\n}\r\n"
              , wl = "precision highp float;\r\n#define PHYSICAL\r\n\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform float roughness;\r\nuniform float metalness;\r\nuniform float opacity;\r\n\r\n#ifndef STANDARD\r\n\tuniform float clearCoat;\r\n\tuniform float clearCoatRoughness;\r\n\r\n\t#ifdef FALLOFF\r\n\t\tuniform vec3 falloffDiffuse;\r\n\t\tuniform float falloffOpacity;\r\n\t#endif\r\n\r\n#endif\r\n\r\n#if ! defined( VARYING_VVIEWPOSITION )\r\n\tvarying vec3 vViewPosition;\r\n\t#define VARYING_VVIEWPOSITION 1\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <bsdfs>\r\n#include <cube_uv_reflection_fragment>\r\n#include <lights_pars>\r\n#include <lights_physical_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n#include <roughnessmap_pars_fragment>\r\n#include <metalnessmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\tvec3 totalEmissiveRadiance = emissive;\r\n\r\n\t#ifdef FALLOFF\r\n\t\tvec4 falloffDiffuseColor = vec4( falloffDiffuse, falloffOpacity );\r\n\t#endif\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\r\n\t#include <falloffmap_fragment>\r\n\t#include <falloffalphamap_fragment>\r\n\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\t#include <roughnessmap_fragment>\r\n\t#include <metalnessmap_fragment>\r\n\t#include <normal_flip>\r\n\t#include <normal_fragment>\r\n\t#include <emissivemap_fragment>\r\n\r\n\t#include <falloff_fragment>\r\n\r\n\t// accumulation\r\n\t#include <lights_physical_fragment>\r\n\t#include <lights_template>\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n"
              , xl = "#define PHYSICAL\r\n\r\n#if ! defined( VARYING_VVIEWPOSITION )\r\n\tvarying vec3 vViewPosition;\r\n\t#define VARYING_VVIEWPOSITION 1\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\tvNormal = normalize( transformedNormal );\r\n\r\n#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\r\n}\r\n"
              , Al = "#define NORMAL\r\n\r\nuniform float opacity;\r\n\r\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n\t#if ! defined( VARYING_VVIEWPOSITION )\r\n\t\tvarying vec3 vViewPosition;\r\n\t\t#define VARYING_VVIEWPOSITION 1\r\n\t#endif\r\n\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <packing>\r\n#include <uv_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\t#include <normal_flip>\r\n\t#include <normal_fragment>\r\n\r\n   \tgl_FragColor = vec4( packNormalToRGB( vNormal * flipNormal ), opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\r\n}\r\n"
              , bl = "#define NORMAL\r\n\r\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n\t#if ! defined( VARYING_VVIEWPOSITION )\r\n   \t\tvarying vec3 vViewPosition;\r\n   \t\t#define VARYING_VVIEWPOSITION 1\r\n   #endif\r\n\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <uv_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\t\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\tvNormal = normalize( transformedNormal );\r\n\r\n#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n#endif\r\n\r\n}\r\n"
              , Tl = "uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <color_pars_fragment>\r\n#include <map_particle_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec3 outgoingLight = vec3( 0.0 );\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_particle_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphatest_fragment>\r\n\r\n\toutgoingLight = diffuseColor.rgb;\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n"
              , _l = "uniform float size;\r\nuniform float scale;\r\n\r\n#include <common>\r\n#include <color_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <color_vertex>\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\r\n\t#ifdef USE_SIZEATTENUATION\r\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\r\n\t#else\r\n\t\tgl_PointSize = size;\r\n\t#endif\r\n\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\r\n}\r\n"
              , El = "uniform float opacity;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <shadowmap_pars_fragment>\r\n#include <shadowmask_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\r\n\r\n}\r\n"
              , Sl = "#include <shadowmap_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\r\n}\r\n"
              , Dl = {
                alphamap_fragment: bs,
                alphamap_pars_fragment: Ts,
                alphatest_fragment: _s,
                aomap_fragment: Es,
                aomap_pars_fragment: Ss,
                begin_vertex: Ds,
                beginnormal_vertex: Ns,
                bsdfs: Is,
                bumpmap_pars_fragment: Ls,
                clipping_planes_fragment: Cs,
                clipping_planes_pars_fragment: Os,
                clipping_planes_pars_vertex: js,
                clipping_planes_vertex: Rs,
                color_fragment: Ps,
                color_pars_fragment: zs,
                color_pars_vertex: Bs,
                color_vertex: Us,
                common: Vs,
                cube_uv_reflection_fragment: ks,
                defaultnormal_vertex: Fs,
                displacementmap_pars_vertex: Gs,
                displacementmap_vertex: Ys,
                emissivemap_fragment: Qs,
                emissivemap_pars_fragment: Hs,
                encodings_fragment: Ws,
                encodings_pars_fragment: Xs,
                envmap_fragment: qs,
                envmap_pars_fragment: Zs,
                envmap_pars_vertex: Js,
                envmap_vertex: Ks,
                falloff_fragment: $s,
                falloffalphamap_fragment: eu,
                falloffmap_fragment: tu,
                fog_fragment: ru,
                fog_pars_fragment: nu,
                gradientmap_pars_fragment: iu,
                lightmap_fragment: au,
                lightmap_pars_fragment: ou,
                lights_lambert_vertex: su,
                lights_pars: uu,
                lights_phong_fragment: lu,
                lights_phong_pars_fragment: cu,
                lights_physical_fragment: hu,
                lights_physical_pars_fragment: fu,
                lights_template: du,
                logdepthbuf_fragment: pu,
                logdepthbuf_pars_fragment: mu,
                logdepthbuf_pars_vertex: gu,
                logdepthbuf_vertex: vu,
                map_fragment: yu,
                map_pars_fragment: Mu,
                map_particle_fragment: wu,
                map_particle_pars_fragment: xu,
                metalnessmap_fragment: Au,
                metalnessmap_pars_fragment: bu,
                morphnormal_vertex: Tu,
                morphtarget_pars_vertex: _u,
                morphtarget_vertex: Eu,
                normal_flip: Su,
                normal_fragment: Du,
                normalmap_pars_fragment: Nu,
                packing: Iu,
                premultiplied_alpha_fragment: Lu,
                project_vertex: Cu,
                roughnessmap_fragment: Ou,
                roughnessmap_pars_fragment: ju,
                shadowmap_pars_fragment: Ru,
                shadowmap_pars_vertex: Pu,
                shadowmap_vertex: zu,
                shadowmask_pars_fragment: Bu,
                skinbase_vertex: Uu,
                skinning_pars_vertex: Vu,
                skinning_vertex: ku,
                skinnormal_vertex: Fu,
                slot_texel_transform_template: Gu,
                slot_uv_transform_template: Yu,
                specularmap_fragment: Qu,
                specularmap_pars_fragment: Hu,
                tonemapping_fragment: Wu,
                tonemapping_pars_fragment: Xu,
                uv_pars_fragment: qu,
                uv_pars_vertex: Zu,
                uv_vertex: Ju,
                uv2_pars_fragment: Ku,
                uv2_pars_vertex: $u,
                uv2_vertex: el,
                worldpos_vertex: tl,
                cube_frag: rl,
                cube_vert: nl,
                cubeEnv_frag: il,
                cubeEnv_vert: al,
                depth_frag: ol,
                depth_vert: sl,
                distanceRGBA_frag: ul,
                distanceRGBA_vert: ll,
                equirect_frag: cl,
                equirect_vert: hl,
                linedashed_frag: fl,
                linedashed_vert: dl,
                meshbasic_frag: pl,
                meshbasic_vert: ml,
                meshlambert_frag: gl,
                meshlambert_vert: vl,
                meshphong_frag: yl,
                meshphong_vert: Ml,
                meshphysical_frag: wl,
                meshphysical_vert: xl,
                normal_frag: Al,
                normal_vert: bl,
                points_frag: Tl,
                points_vert: _l,
                shadow_frag: El,
                shadow_vert: Sl
            };
            Q.prototype = {
                constructor: Q,
                isColor: !0,
                r: 1,
                g: 1,
                b: 1,
                set: function(e) {
                    return e && e.isColor ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e),
                    this
                },
                setScalar: function(e) {
                    return this.r = e,
                    this.g = e,
                    this.b = e,
                    this
                },
                setHex: function(e) {
                    return e = Math.floor(e),
                    this.r = (e >> 16 & 255) / 255,
                    this.g = (e >> 8 & 255) / 255,
                    this.b = (255 & e) / 255,
                    this
                },
                setRGB: function(e, t, r) {
                    return this.r = e,
                    this.g = t,
                    this.b = r,
                    this
                },
                setHSL: function() {
                    function e(e, t, r) {
                        return r < 0 && (r += 1),
                        r > 1 && (r -= 1),
                        r < 1 / 6 ? e + 6 * (t - e) * r : r < .5 ? t : r < 2 / 3 ? e + 6 * (t - e) * (2 / 3 - r) : e
                    }
                    return function(t, r, n) {
                        if (t = ms.euclideanModulo(t, 1),
                        r = ms.clamp(r, 0, 1),
                        n = ms.clamp(n, 0, 1),
                        0 === r)
                            this.r = this.g = this.b = n;
                        else {
                            var i = n <= .5 ? n * (1 + r) : n + r - n * r
                              , a = 2 * n - i;
                            this.r = e(a, i, t + 1 / 3),
                            this.g = e(a, i, t),
                            this.b = e(a, i, t - 1 / 3)
                        }
                        return this
                    }
                }(),
                setStyle: function(e) {
                    function t(t) {
                        void 0 !== t && parseFloat(t) < 1 && console.warn("THREE.Color: Alpha component of " + e + " will be ignored.")
                    }
                    var r;
                    if (r = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)) {
                        var n, i = r[1], a = r[2];
                        switch (i) {
                        case "rgb":
                        case "rgba":
                            if (n = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))
                                return this.r = Math.min(255, parseInt(n[1], 10)) / 255,
                                this.g = Math.min(255, parseInt(n[2], 10)) / 255,
                                this.b = Math.min(255, parseInt(n[3], 10)) / 255,
                                t(n[5]),
                                this;
                            if (n = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))
                                return this.r = Math.min(100, parseInt(n[1], 10)) / 100,
                                this.g = Math.min(100, parseInt(n[2], 10)) / 100,
                                this.b = Math.min(100, parseInt(n[3], 10)) / 100,
                                t(n[5]),
                                this;
                            break;
                        case "hsl":
                        case "hsla":
                            if (n = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)) {
                                var o = parseFloat(n[1]) / 360
                                  , s = parseInt(n[2], 10) / 100
                                  , u = parseInt(n[3], 10) / 100;
                                return t(n[5]),
                                this.setHSL(o, s, u)
                            }
                        }
                    } else if (r = /^\#([A-Fa-f0-9]+)$/.exec(e)) {
                        var l = r[1]
                          , c = l.length;
                        if (3 === c)
                            return this.r = parseInt(l.charAt(0) + l.charAt(0), 16) / 255,
                            this.g = parseInt(l.charAt(1) + l.charAt(1), 16) / 255,
                            this.b = parseInt(l.charAt(2) + l.charAt(2), 16) / 255,
                            this;
                        if (6 === c)
                            return this.r = parseInt(l.charAt(0) + l.charAt(1), 16) / 255,
                            this.g = parseInt(l.charAt(2) + l.charAt(3), 16) / 255,
                            this.b = parseInt(l.charAt(4) + l.charAt(5), 16) / 255,
                            this
                    }
                    if (e && e.length > 0) {
                        var l = Nl[e];
                        void 0 !== l ? this.setHex(l) : console.warn("THREE.Color: Unknown color " + e)
                    }
                    return this
                },
                clone: function() {
                    return new this.constructor(this.r,this.g,this.b)
                },
                copy: function(e) {
                    return this.r = e.r,
                    this.g = e.g,
                    this.b = e.b,
                    this
                },
                copyGammaToLinear: function(e, t) {
                    return void 0 === t && (t = 2),
                    this.r = Math.pow(e.r, t),
                    this.g = Math.pow(e.g, t),
                    this.b = Math.pow(e.b, t),
                    this
                },
                copyLinearToGamma: function(e, t) {
                    void 0 === t && (t = 2);
                    var r = t > 0 ? 1 / t : 1;
                    return this.r = Math.pow(e.r, r),
                    this.g = Math.pow(e.g, r),
                    this.b = Math.pow(e.b, r),
                    this
                },
                convertGammaToLinear: function() {
                    var e = this.r
                      , t = this.g
                      , r = this.b;
                    return this.r = e * e,
                    this.g = t * t,
                    this.b = r * r,
                    this
                },
                convertLinearToGamma: function() {
                    return this.r = Math.sqrt(this.r),
                    this.g = Math.sqrt(this.g),
                    this.b = Math.sqrt(this.b),
                    this
                },
                getHex: function() {
                    return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
                },
                getHexString: function() {
                    return ("000000" + this.getHex().toString(16)).slice(-6)
                },
                getHSL: function(e) {
                    var t, r, n = e || {
                        h: 0,
                        s: 0,
                        l: 0
                    }, i = this.r, a = this.g, o = this.b, s = Math.max(i, a, o), u = Math.min(i, a, o), l = (u + s) / 2;
                    if (u === s)
                        t = 0,
                        r = 0;
                    else {
                        var c = s - u;
                        switch (r = l <= .5 ? c / (s + u) : c / (2 - s - u),
                        s) {
                        case i:
                            t = (a - o) / c + (a < o ? 6 : 0);
                            break;
                        case a:
                            t = (o - i) / c + 2;
                            break;
                        case o:
                            t = (i - a) / c + 4
                        }
                        t /= 6
                    }
                    return n.h = t,
                    n.s = r,
                    n.l = l,
                    n
                },
                getStyle: function() {
                    return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
                },
                offsetHSL: function(e, t, r) {
                    var n = this.getHSL();
                    return n.h += e,
                    n.s += t,
                    n.l += r,
                    this.setHSL(n.h, n.s, n.l),
                    this
                },
                add: function(e) {
                    return this.r += e.r,
                    this.g += e.g,
                    this.b += e.b,
                    this
                },
                addColors: function(e, t) {
                    return this.r = e.r + t.r,
                    this.g = e.g + t.g,
                    this.b = e.b + t.b,
                    this
                },
                addScalar: function(e) {
                    return this.r += e,
                    this.g += e,
                    this.b += e,
                    this
                },
                sub: function(e) {
                    return this.r = Math.max(0, this.r - e.r),
                    this.g = Math.max(0, this.g - e.g),
                    this.b = Math.max(0, this.b - e.b),
                    this
                },
                multiply: function(e) {
                    return this.r *= e.r,
                    this.g *= e.g,
                    this.b *= e.b,
                    this
                },
                multiplyScalar: function(e) {
                    return this.r *= e,
                    this.g *= e,
                    this.b *= e,
                    this
                },
                lerp: function(e, t) {
                    return this.r += (e.r - this.r) * t,
                    this.g += (e.g - this.g) * t,
                    this.b += (e.b - this.b) * t,
                    this
                },
                equals: function(e) {
                    return e.r === this.r && e.g === this.g && e.b === this.b
                },
                fromArray: function(e, t) {
                    return void 0 === t && (t = 0),
                    this.r = e[t],
                    this.g = e[t + 1],
                    this.b = e[t + 2],
                    this
                },
                toArray: function(e, t) {
                    return void 0 === e && (e = []),
                    void 0 === t && (t = 0),
                    e[t] = this.r,
                    e[t + 1] = this.g,
                    e[t + 2] = this.b,
                    e
                },
                toJSON: function() {
                    return this.getHex()
                }
            };
            var Nl = {
                aliceblue: 15792383,
                antiquewhite: 16444375,
                aqua: 65535,
                aquamarine: 8388564,
                azure: 15794175,
                beige: 16119260,
                bisque: 16770244,
                black: 0,
                blanchedalmond: 16772045,
                blue: 255,
                blueviolet: 9055202,
                brown: 10824234,
                burlywood: 14596231,
                cadetblue: 6266528,
                chartreuse: 8388352,
                chocolate: 13789470,
                coral: 16744272,
                cornflowerblue: 6591981,
                cornsilk: 16775388,
                crimson: 14423100,
                cyan: 65535,
                darkblue: 139,
                darkcyan: 35723,
                darkgoldenrod: 12092939,
                darkgray: 11119017,
                darkgreen: 25600,
                darkgrey: 11119017,
                darkkhaki: 12433259,
                darkmagenta: 9109643,
                darkolivegreen: 5597999,
                darkorange: 16747520,
                darkorchid: 10040012,
                darkred: 9109504,
                darksalmon: 15308410,
                darkseagreen: 9419919,
                darkslateblue: 4734347,
                darkslategray: 3100495,
                darkslategrey: 3100495,
                darkturquoise: 52945,
                darkviolet: 9699539,
                deeppink: 16716947,
                deepskyblue: 49151,
                dimgray: 6908265,
                dimgrey: 6908265,
                dodgerblue: 2003199,
                firebrick: 11674146,
                floralwhite: 16775920,
                forestgreen: 2263842,
                fuchsia: 16711935,
                gainsboro: 14474460,
                ghostwhite: 16316671,
                gold: 16766720,
                goldenrod: 14329120,
                gray: 8421504,
                green: 32768,
                greenyellow: 11403055,
                grey: 8421504,
                honeydew: 15794160,
                hotpink: 16738740,
                indianred: 13458524,
                indigo: 4915330,
                ivory: 16777200,
                khaki: 15787660,
                lavender: 15132410,
                lavenderblush: 16773365,
                lawngreen: 8190976,
                lemonchiffon: 16775885,
                lightblue: 11393254,
                lightcoral: 15761536,
                lightcyan: 14745599,
                lightgoldenrodyellow: 16448210,
                lightgray: 13882323,
                lightgreen: 9498256,
                lightgrey: 13882323,
                lightpink: 16758465,
                lightsalmon: 16752762,
                lightseagreen: 2142890,
                lightskyblue: 8900346,
                lightslategray: 7833753,
                lightslategrey: 7833753,
                lightsteelblue: 11584734,
                lightyellow: 16777184,
                lime: 65280,
                limegreen: 3329330,
                linen: 16445670,
                magenta: 16711935,
                maroon: 8388608,
                mediumaquamarine: 6737322,
                mediumblue: 205,
                mediumorchid: 12211667,
                mediumpurple: 9662683,
                mediumseagreen: 3978097,
                mediumslateblue: 8087790,
                mediumspringgreen: 64154,
                mediumturquoise: 4772300,
                mediumvioletred: 13047173,
                midnightblue: 1644912,
                mintcream: 16121850,
                mistyrose: 16770273,
                moccasin: 16770229,
                navajowhite: 16768685,
                navy: 128,
                oldlace: 16643558,
                olive: 8421376,
                olivedrab: 7048739,
                orange: 16753920,
                orangered: 16729344,
                orchid: 14315734,
                palegoldenrod: 15657130,
                palegreen: 10025880,
                paleturquoise: 11529966,
                palevioletred: 14381203,
                papayawhip: 16773077,
                peachpuff: 16767673,
                peru: 13468991,
                pink: 16761035,
                plum: 14524637,
                powderblue: 11591910,
                purple: 8388736,
                red: 16711680,
                rosybrown: 12357519,
                royalblue: 4286945,
                saddlebrown: 9127187,
                salmon: 16416882,
                sandybrown: 16032864,
                seagreen: 3050327,
                seashell: 16774638,
                sienna: 10506797,
                silver: 12632256,
                skyblue: 8900331,
                slateblue: 6970061,
                slategray: 7372944,
                slategrey: 7372944,
                snow: 16775930,
                springgreen: 65407,
                steelblue: 4620980,
                tan: 13808780,
                teal: 32896,
                thistle: 14204888,
                tomato: 16737095,
                turquoise: 4251856,
                violet: 15631086,
                wheat: 16113331,
                white: 16777215,
                whitesmoke: 16119285,
                yellow: 16776960,
                yellowgreen: 10145074
            };
            H.prototype = Object.create(n.prototype),
            H.prototype.constructor = H,
            H.prototype.isDataTexture = !0;
            var Il = {
                common: {
                    diffuse: {
                        value: new Q(15658734)
                    },
                    opacity: {
                        value: 1
                    },
                    map: {
                        value: null
                    },
                    mapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    mapTexelTransformParams: {
                        value: new r(1,0)
                    },
                    offsetRepeat: {
                        value: new i(0,0,1,1)
                    },
                    specularMap: {
                        value: null
                    },
                    specularMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    specularMapTexelTransformParams: {
                        value: new r(1,0)
                    },
                    alphaMap: {
                        value: null
                    },
                    alphaMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    alphaMapTexelTransformParams: {
                        value: new r(1,0)
                    },
                    envMap: {
                        value: null
                    },
                    flipEnvMap: {
                        value: -1
                    },
                    reflectivity: {
                        value: 1
                    },
                    refractionRatio: {
                        value: .98
                    }
                },
                aomap: {
                    aoMap: {
                        value: null
                    },
                    aoMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    aoMapTexelTransformParams: {
                        value: new r(1,0)
                    },
                    aoMapIntensity: {
                        value: 1
                    }
                },
                lightmap: {
                    lightMap: {
                        value: null
                    },
                    lightMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    lightMapTexelTransformParams: {
                        value: new r(1,0)
                    },
                    lightMapIntensity: {
                        value: 1
                    }
                },
                emissivemap: {
                    emissiveMap: {
                        value: null
                    },
                    emissiveMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    emissiveMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                bumpmap: {
                    bumpMap: {
                        value: null
                    },
                    bumpScale: {
                        value: 1
                    },
                    bumpMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    bumpMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                normalmap: {
                    normalMap: {
                        value: null
                    },
                    normalScale: {
                        value: new r(1,1)
                    },
                    normalMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    normalMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                displacementmap: {
                    displacementMap: {
                        value: null
                    },
                    displacementScale: {
                        value: 1
                    },
                    displacementBias: {
                        value: 0
                    },
                    displacementMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    displacementMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                falloffmap: {
                    falloffMap: {
                        value: null
                    },
                    falloffMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    falloffMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                falloffalphamap: {
                    falloffAlphaMap: {
                        value: null
                    },
                    falloffAlphaMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    falloffAlphaMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                roughnessmap: {
                    roughnessMap: {
                        value: null
                    },
                    roughnessMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    roughnessMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                metalnessmap: {
                    metalnessMap: {
                        value: null
                    },
                    metalnessMapUVTransformParams: {
                        value: new i(0,0,1,1)
                    },
                    metalnessMapTexelTransformParams: {
                        value: new r(1,0)
                    }
                },
                gradientmap: {
                    gradientMap: {
                        value: null
                    }
                },
                fog: {
                    fogDensity: {
                        value: 25e-5
                    },
                    fogNear: {
                        value: 1
                    },
                    fogFar: {
                        value: 2e3
                    },
                    fogColor: {
                        value: new Q(16777215)
                    }
                },
                lights: {
                    ambientLightColor: {
                        value: []
                    },
                    directionalLights: {
                        value: [],
                        properties: {
                            direction: {},
                            color: {},
                            shadow: {},
                            shadowBias: {},
                            shadowRadius: {},
                            shadowMapSize: {},
                            shadowSpreadAngle: {},
                            shadowCameraParams: {}
                        }
                    },
                    directionalShadowMap: {
                        value: []
                    },
                    directionalShadowMatrix: {
                        value: []
                    },
                    spotLights: {
                        value: [],
                        properties: {
                            color: {},
                            position: {},
                            direction: {},
                            distance: {},
                            coneCos: {},
                            penumbraCos: {},
                            decay: {},
                            shadow: {},
                            shadowBias: {},
                            shadowRadius: {},
                            shadowMapSize: {},
                            shadowCameraParams: {}
                        }
                    },
                    spotShadowMap: {
                        value: []
                    },
                    spotShadowMatrix: {
                        value: []
                    },
                    pointLights: {
                        value: [],
                        properties: {
                            color: {},
                            position: {},
                            decay: {},
                            distance: {},
                            shadow: {},
                            shadowBias: {},
                            shadowRadius: {},
                            shadowMapSize: {}
                        }
                    },
                    pointShadowMap: {
                        value: []
                    },
                    pointShadowMatrix: {
                        value: []
                    },
                    hemisphereLights: {
                        value: [],
                        properties: {
                            direction: {},
                            skyColor: {},
                            groundColor: {}
                        }
                    },
                    rectAreaLights: {
                        value: [],
                        properties: {
                            color: {},
                            position: {},
                            width: {},
                            height: {}
                        }
                    }
                },
                points: {
                    diffuse: {
                        value: new Q(15658734)
                    },
                    opacity: {
                        value: 1
                    },
                    size: {
                        value: 1
                    },
                    scale: {
                        value: 1
                    },
                    map: {
                        value: null
                    },
                    offsetRepeat: {
                        value: new i(0,0,1,1)
                    }
                }
            }
              , Ll = {
                basic: {
                    uniforms: As.merge([Il.common, Il.aomap, Il.lightmap, Il.fog]),
                    vertexShader: Dl.meshbasic_vert,
                    fragmentShader: Dl.meshbasic_frag
                },
                lambert: {
                    uniforms: As.merge([Il.common, Il.aomap, Il.lightmap, Il.emissivemap, Il.fog, Il.lights, {
                        emissive: {
                            value: new Q(0)
                        }
                    }]),
                    vertexShader: Dl.meshlambert_vert,
                    fragmentShader: Dl.meshlambert_frag
                },
                phong: {
                    uniforms: As.merge([Il.common, Il.aomap, Il.lightmap, Il.emissivemap, Il.bumpmap, Il.normalmap, Il.displacementmap, Il.gradientmap, Il.fog, Il.lights, {
                        emissive: {
                            value: new Q(0)
                        },
                        specular: {
                            value: new Q(1118481)
                        },
                        shininess: {
                            value: 30
                        }
                    }]),
                    vertexShader: Dl.meshphong_vert,
                    fragmentShader: Dl.meshphong_frag
                },
                standard: {
                    uniforms: As.merge([Il.common, Il.aomap, Il.lightmap, Il.emissivemap, Il.bumpmap, Il.normalmap, Il.displacementmap, Il.roughnessmap, Il.metalnessmap, Il.fog, Il.lights, {
                        emissive: {
                            value: new Q(0)
                        },
                        roughness: {
                            value: .5
                        },
                        metalness: {
                            value: 0
                        },
                        envMapIntensity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Dl.meshphysical_vert,
                    fragmentShader: Dl.meshphysical_frag
                },
                points: {
                    uniforms: As.merge([Il.points, Il.fog]),
                    vertexShader: Dl.points_vert,
                    fragmentShader: Dl.points_frag
                },
                dashed: {
                    uniforms: As.merge([Il.common, Il.fog, {
                        scale: {
                            value: 1
                        },
                        dashSize: {
                            value: 1
                        },
                        totalSize: {
                            value: 2
                        }
                    }]),
                    vertexShader: Dl.linedashed_vert,
                    fragmentShader: Dl.linedashed_frag
                },
                depth: {
                    uniforms: As.merge([Il.common, Il.displacementmap]),
                    vertexShader: Dl.depth_vert,
                    fragmentShader: Dl.depth_frag
                },
                normal: {
                    uniforms: As.merge([Il.common, Il.bumpmap, Il.normalmap, Il.displacementmap, {
                        opacity: {
                            value: 1
                        }
                    }]),
                    vertexShader: Dl.normal_vert,
                    fragmentShader: Dl.normal_frag
                },
                cube: {
                    uniforms: {
                        tCube: {
                            value: null
                        },
                        tFlip: {
                            value: -1
                        },
                        opacity: {
                            value: 1
                        }
                    },
                    vertexShader: Dl.cube_vert,
                    fragmentShader: Dl.cube_frag
                },
                equirect: {
                    uniforms: {
                        tEquirect: {
                            value: null
                        },
                        tFlip: {
                            value: -1
                        }
                    },
                    vertexShader: Dl.equirect_vert,
                    fragmentShader: Dl.equirect_frag
                },
                distanceRGBA: {
                    uniforms: {
                        lightPos: {
                            value: new u
                        }
                    },
                    vertexShader: Dl.distanceRGBA_vert,
                    fragmentShader: Dl.distanceRGBA_frag
                }
            };
            Ll.cubeEnv = {
                uniforms: As.merge([Il.common, Ll.standard.uniforms, {
                    envMap: {
                        value: null
                    },
                    envMapIntensity: {
                        value: 1
                    },
                    tFlip: {
                        value: -1
                    },
                    opacity: {
                        value: 1
                    },
                    roughness: {
                        value: 0
                    }
                }]),
                vertexShader: Dl.cubeEnv_vert,
                fragmentShader: Dl.cubeEnv_frag
            },
            Ll.physical = {
                uniforms: As.merge([Ll.standard.uniforms, Il.falloffmap, Il.falloffalphamap, {
                    falloffDiffuse: {
                        value: new Q(16777215)
                    },
                    falloffOpacity: {
                        value: 0
                    },
                    clearCoat: {
                        value: 0
                    },
                    clearCoatRoughness: {
                        value: 0
                    }
                }]),
                vertexShader: Dl.meshphysical_vert,
                fragmentShader: Dl.meshphysical_frag
            },
            W.prototype = {
                constructor: W,
                set: function(e, t) {
                    return this.min.copy(e),
                    this.max.copy(t),
                    this
                },
                setFromPoints: function(e) {
                    this.makeEmpty();
                    for (var t = 0, r = e.length; t < r; t++)
                        this.expandByPoint(e[t]);
                    return this
                },
                setFromCenterAndSize: function() {
                    var e = new r;
                    return function(t, r) {
                        var n = e.copy(r).multiplyScalar(.5);
                        return this.min.copy(t).sub(n),
                        this.max.copy(t).add(n),
                        this
                    }
                }(),
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.min.copy(e.min),
                    this.max.copy(e.max),
                    this
                },
                makeEmpty: function() {
                    return this.min.x = this.min.y = +(1 / 0),
                    this.max.x = this.max.y = -(1 / 0),
                    this
                },
                isEmpty: function() {
                    return this.max.x < this.min.x || this.max.y < this.min.y
                },
                getCenter: function(e) {
                    var t = e || new r;
                    return this.isEmpty() ? t.set(0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5)
                },
                getSize: function(e) {
                    var t = e || new r;
                    return this.isEmpty() ? t.set(0, 0) : t.subVectors(this.max, this.min)
                },
                expandByPoint: function(e) {
                    return this.min.min(e),
                    this.max.max(e),
                    this
                },
                expandByVector: function(e) {
                    return this.min.sub(e),
                    this.max.add(e),
                    this
                },
                expandByScalar: function(e) {
                    return this.min.addScalar(-e),
                    this.max.addScalar(e),
                    this
                },
                containsPoint: function(e) {
                    return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y)
                },
                containsBox: function(e) {
                    return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y
                },
                getParameter: function(e, t) {
                    var n = t || new r;
                    return n.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
                },
                intersectsBox: function(e) {
                    return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y)
                },
                clampPoint: function(e, t) {
                    var n = t || new r;
                    return n.copy(e).clamp(this.min, this.max)
                },
                distanceToPoint: function() {
                    var e = new r;
                    return function(t) {
                        var r = e.copy(t).clamp(this.min, this.max);
                        return r.sub(t).length()
                    }
                }(),
                intersect: function(e) {
                    return this.min.max(e.min),
                    this.max.min(e.max),
                    this
                },
                union: function(e) {
                    return this.min.min(e.min),
                    this.max.max(e.max),
                    this
                },
                translate: function(e) {
                    return this.min.add(e),
                    this.max.add(e),
                    this
                },
                equals: function(e) {
                    return e.min.equals(this.min) && e.max.equals(this.max)
                }
            };
            var Cl = 0;
            Z.prototype = {
                constructor: Z,
                isMaterial: !0,
                get needsUpdate() {
                    return this._needsUpdate
                },
                set needsUpdate(e) {
                    e === !0 && this.update(),
                    this._needsUpdate = e,
                    this.version++
                },
                setValues: function(e) {
                    if (void 0 !== e)
                        for (var t in e) {
                            var r = e[t];
                            if (void 0 !== r) {
                                var n = this[t];
                                void 0 !== n ? n && n.isColor ? n.set(r) : n && n.isVector3 && r && r.isVector3 ? n.copy(r) : "overdraw" === t ? this[t] = Number(r) : this[t] = r : console.warn("THREE." + this.type + ": '" + t + "' is not a property of this material.")
                            } else
                                console.warn("THREE.Material: '" + t + "' parameter is undefined.")
                        }
                },
                toJSON: function(e) {
                    function t(e) {
                        var t = [];
                        for (var r in e) {
                            var n = e[r];
                            delete n.metadata,
                            t.push(n)
                        }
                        return t
                    }
                    var r = void 0 === e;
                    r && (e = {
                        textures: {},
                        images: {}
                    });
                    var n = {
                        metadata: {
                            version: 4.4,
                            type: "Material",
                            generator: "Material.toJSON"
                        }
                    };
                    if (n.uuid = this.uuid,
                    n.type = this.type,
                    "" !== this.name && (n.name = this.name),
                    this.color && this.color.isColor && (n.color = this.color.getHex()),
                    void 0 !== this.roughness && (n.roughness = this.roughness),
                    void 0 !== this.metalness && (n.metalness = this.metalness),
                    this.emissive && this.emissive.isColor && (n.emissive = this.emissive.getHex()),
                    this.specular && this.specular.isColor && (n.specular = this.specular.getHex()),
                    void 0 !== this.shininess && (n.shininess = this.shininess),
                    void 0 !== this.clearCoat && (n.clearCoat = this.clearCoat),
                    void 0 !== this.clearCoatRoughness && (n.clearCoatRoughness = this.clearCoatRoughness),
                    this.map && this.map.isTexture && (n.map = this.map.toJSON(e).uuid),
                    this.alphaMap && this.alphaMap.isTexture && (n.alphaMap = this.alphaMap.toJSON(e).uuid),
                    this.lightMap && this.lightMap.isTexture && (n.lightMap = this.lightMap.toJSON(e).uuid),
                    this.bumpMap && this.bumpMap.isTexture && (n.bumpMap = this.bumpMap.toJSON(e).uuid,
                    n.bumpScale = this.bumpScale),
                    this.normalMap && this.normalMap.isTexture && (n.normalMap = this.normalMap.toJSON(e).uuid,
                    n.normalScale = this.normalScale.toArray()),
                    this.displacementMap && this.displacementMap.isTexture && (n.displacementMap = this.displacementMap.toJSON(e).uuid,
                    n.displacementScale = this.displacementScale,
                    n.displacementBias = this.displacementBias),
                    this.roughnessMap && this.roughnessMap.isTexture && (n.roughnessMap = this.roughnessMap.toJSON(e).uuid),
                    this.metalnessMap && this.metalnessMap.isTexture && (n.metalnessMap = this.metalnessMap.toJSON(e).uuid),
                    this.emissiveMap && this.emissiveMap.isTexture && (n.emissiveMap = this.emissiveMap.toJSON(e).uuid),
                    this.specularMap && this.specularMap.isTexture && (n.specularMap = this.specularMap.toJSON(e).uuid),
                    this.envMap && this.envMap.isTexture && (n.envMap = this.envMap.toJSON(e).uuid,
                    n.reflectivity = this.reflectivity),
                    this.gradientMap && this.gradientMap.isTexture && (n.gradientMap = this.gradientMap.toJSON(e).uuid),
                    void 0 !== this.size && (n.size = this.size),
                    void 0 !== this.sizeAttenuation && (n.sizeAttenuation = this.sizeAttenuation),
                    this.blending !== va && (n.blending = this.blending),
                    this.shading !== fa && (n.shading = this.shading),
                    this.side !== ua && (n.side = this.side),
                    this.vertexColors !== da && (n.vertexColors = this.vertexColors),
                    this.opacity < 1 && (n.opacity = this.opacity),
                    this.transparent === !0 && (n.transparent = this.transparent),
                    n.depthFunc = this.depthFunc,
                    n.depthTest = this.depthTest,
                    n.depthWrite = this.depthWrite,
                    this.alphaTest > 0 && (n.alphaTest = this.alphaTest),
                    this.premultipliedAlpha === !0 && (n.premultipliedAlpha = this.premultipliedAlpha),
                    this.wireframe === !0 && (n.wireframe = this.wireframe),
                    this.wireframeLinewidth > 1 && (n.wireframeLinewidth = this.wireframeLinewidth),
                    "round" !== this.wireframeLinecap && (n.wireframeLinecap = this.wireframeLinecap),
                    "round" !== this.wireframeLinejoin && (n.wireframeLinejoin = this.wireframeLinejoin),
                    n.skinning = this.skinning,
                    n.morphTargets = this.morphTargets,
                    r) {
                        var i = t(e.textures)
                          , a = t(e.images);
                        i.length > 0 && (n.textures = i),
                        a.length > 0 && (n.images = a)
                    }
                    return n
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    this.name = e.name,
                    this.fog = e.fog,
                    this.lights = e.lights,
                    this.blending = e.blending,
                    this.side = e.side,
                    this.shading = e.shading,
                    this.vertexColors = e.vertexColors,
                    this.opacity = e.opacity,
                    this.transparent = e.transparent,
                    this.blendSrc = e.blendSrc,
                    this.blendDst = e.blendDst,
                    this.blendEquation = e.blendEquation,
                    this.blendSrcAlpha = e.blendSrcAlpha,
                    this.blendDstAlpha = e.blendDstAlpha,
                    this.blendEquationAlpha = e.blendEquationAlpha,
                    this.depthFunc = e.depthFunc,
                    this.depthTest = e.depthTest,
                    this.depthWrite = e.depthWrite,
                    this.colorWrite = e.colorWrite,
                    this.precision = e.precision,
                    this.polygonOffset = e.polygonOffset,
                    this.polygonOffsetFactor = e.polygonOffsetFactor,
                    this.polygonOffsetUnits = e.polygonOffsetUnits,
                    this.alphaTest = e.alphaTest,
                    this.premultipliedAlpha = e.premultipliedAlpha,
                    this.overdraw = e.overdraw,
                    this.visible = e.visible,
                    this.clipShadows = e.clipShadows,
                    this.clipIntersection = e.clipIntersection;
                    var t = e.clippingPlanes
                      , r = null;
                    if (null !== t) {
                        var n = t.length;
                        r = new Array(n);
                        for (var i = 0; i !== n; ++i)
                            r[i] = t[i].clone()
                    }
                    return this.clippingPlanes = r,
                    this
                },
                update: function() {
                    this.dispatchEvent({
                        type: "update"
                    })
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            },
            Object.assign(Z.prototype, t.prototype),
            J.prototype = Object.create(Z.prototype),
            J.prototype.constructor = J,
            J.prototype.isShaderMaterial = !0,
            J.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.fragmentShader = e.fragmentShader,
                this.vertexShader = e.vertexShader,
                this.uniforms = As.clone(e.uniforms),
                this.defines = e.defines,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.lights = e.lights,
                this.clipping = e.clipping,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this.morphNormals = e.morphNormals,
                this.extensions = e.extensions,
                this
            }
            ,
            J.prototype.toJSON = function(e) {
                var t = Z.prototype.toJSON.call(this, e);
                return t.uniforms = this.uniforms,
                t.vertexShader = this.vertexShader,
                t.fragmentShader = this.fragmentShader,
                t
            }
            ,
            K.prototype = Object.create(Z.prototype),
            K.prototype.constructor = K,
            K.prototype.isMeshDepthMaterial = !0,
            K.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.depthPacking = e.depthPacking,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this.map = e.map,
                this.alphaMap = e.alphaMap,
                this.displacementMap = e.displacementMap,
                this.displacementScale = e.displacementScale,
                this.displacementBias = e.displacementBias,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.clearColor = e.clearColor,
                this.clearAlpha = e.clearAlpha,
                this
            }
            ,
            $.prototype = {
                constructor: $,
                isBox3: !0,
                set: function(e, t) {
                    return this.min.copy(e),
                    this.max.copy(t),
                    this
                },
                setFromArray: function(e) {
                    for (var t = +(1 / 0), r = +(1 / 0), n = +(1 / 0), i = -(1 / 0), a = -(1 / 0), o = -(1 / 0), s = 0, u = e.length; s < u; s += 3) {
                        var l = e[s]
                          , c = e[s + 1]
                          , h = e[s + 2];
                        l < t && (t = l),
                        c < r && (r = c),
                        h < n && (n = h),
                        l > i && (i = l),
                        c > a && (a = c),
                        h > o && (o = h)
                    }
                    this.min.set(t, r, n),
                    this.max.set(i, a, o)
                },
                setFromBufferAttribute: function(e) {
                    for (var t = +(1 / 0), r = +(1 / 0), n = +(1 / 0), i = -(1 / 0), a = -(1 / 0), o = -(1 / 0), s = 0, u = e.count; s < u; s++) {
                        var l = e.getX(s)
                          , c = e.getY(s)
                          , h = e.getZ(s);
                        l < t && (t = l),
                        c < r && (r = c),
                        h < n && (n = h),
                        l > i && (i = l),
                        c > a && (a = c),
                        h > o && (o = h)
                    }
                    this.min.set(t, r, n),
                    this.max.set(i, a, o)
                },
                setFromPoints: function(e) {
                    this.makeEmpty();
                    for (var t = 0, r = e.length; t < r; t++)
                        this.expandByPoint(e[t]);
                    return this
                },
                setFromCenterAndSize: function() {
                    var e = new u;
                    return function(t, r) {
                        var n = e.copy(r).multiplyScalar(.5);
                        return this.min.copy(t).sub(n),
                        this.max.copy(t).add(n),
                        this
                    }
                }(),
                setFromObject: function() {
                    var e = new u;
                    return function(t) {
                        var r = this;
                        return t.updateMatrixWorld(!0),
                        this.makeEmpty(),
                        t.traverse(function(t) {
                            var n, i, a = t.geometry;
                            if (void 0 !== a)
                                if (a.isGeometry) {
                                    var o = a.vertices;
                                    for (n = 0,
                                    i = o.length; n < i; n++)
                                        e.copy(o[n]),
                                        e.applyMatrix4(t.matrixWorld),
                                        r.expandByPoint(e)
                                } else if (a.isBufferGeometry) {
                                    var s = a.attributes.position;
                                    if (void 0 !== s)
                                        for (n = 0,
                                        i = s.count; n < i; n++)
                                            e.fromBufferAttribute(s, n).applyMatrix4(t.matrixWorld),
                                            r.expandByPoint(e)
                                }
                        }),
                        this
                    }
                }(),
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.min.copy(e.min),
                    this.max.copy(e.max),
                    this
                },
                makeEmpty: function() {
                    return this.min.x = this.min.y = this.min.z = +(1 / 0),
                    this.max.x = this.max.y = this.max.z = -(1 / 0),
                    this
                },
                isEmpty: function() {
                    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
                },
                getCenter: function(e) {
                    var t = e || new u;
                    return this.isEmpty() ? t.set(0, 0, 0) : t.addVectors(this.min, this.max).multiplyScalar(.5)
                },
                getSize: function(e) {
                    var t = e || new u;
                    return this.isEmpty() ? t.set(0, 0, 0) : t.subVectors(this.max, this.min)
                },
                expandByPoint: function(e) {
                    return this.min.min(e),
                    this.max.max(e),
                    this
                },
                expandByVector: function(e) {
                    return this.min.sub(e),
                    this.max.add(e),
                    this
                },
                expandByScalar: function(e) {
                    return this.min.addScalar(-e),
                    this.max.addScalar(e),
                    this
                },
                containsPoint: function(e) {
                    return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z)
                },
                containsBox: function(e) {
                    return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z
                },
                getParameter: function(e, t) {
                    var r = t || new u;
                    return r.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
                },
                intersectsBox: function(e) {
                    return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z)
                },
                intersectsSphere: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new u),
                        this.clampPoint(t.center, e),
                        e.distanceToSquared(t.center) <= t.radius * t.radius
                    }
                }(),
                intersectsPlane: function(e) {
                    var t, r;
                    return e.normal.x > 0 ? (t = e.normal.x * this.min.x,
                    r = e.normal.x * this.max.x) : (t = e.normal.x * this.max.x,
                    r = e.normal.x * this.min.x),
                    e.normal.y > 0 ? (t += e.normal.y * this.min.y,
                    r += e.normal.y * this.max.y) : (t += e.normal.y * this.max.y,
                    r += e.normal.y * this.min.y),
                    e.normal.z > 0 ? (t += e.normal.z * this.min.z,
                    r += e.normal.z * this.max.z) : (t += e.normal.z * this.max.z,
                    r += e.normal.z * this.min.z),
                    t <= e.constant && r >= e.constant
                },
                clampPoint: function(e, t) {
                    var r = t || new u;
                    return r.copy(e).clamp(this.min, this.max)
                },
                distanceToPoint: function() {
                    var e = new u;
                    return function(t) {
                        var r = e.copy(t).clamp(this.min, this.max);
                        return r.sub(t).length()
                    }
                }(),
                getBoundingSphere: function() {
                    var e = new u;
                    return function(t) {
                        var r = t || new ee;
                        return this.getCenter(r.center),
                        r.radius = .5 * this.getSize(e).length(),
                        r
                    }
                }(),
                intersect: function(e) {
                    return this.min.max(e.min),
                    this.max.min(e.max),
                    this.isEmpty() && this.makeEmpty(),
                    this
                },
                union: function(e) {
                    return this.min.min(e.min),
                    this.max.max(e.max),
                    this
                },
                applyMatrix4: function() {
                    var e = [new u, new u, new u, new u, new u, new u, new u, new u];
                    return function(t) {
                        return this.isEmpty() ? this : (e[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t),
                        e[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t),
                        e[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t),
                        e[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t),
                        e[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t),
                        e[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t),
                        e[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t),
                        e[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t),
                        this.setFromPoints(e),
                        this)
                    }
                }(),
                translate: function(e) {
                    return this.min.add(e),
                    this.max.add(e),
                    this
                },
                equals: function(e) {
                    return e.min.equals(this.min) && e.max.equals(this.max)
                }
            },
            ee.prototype = {
                constructor: ee,
                set: function(e, t) {
                    return this.center.copy(e),
                    this.radius = t,
                    this
                },
                setFromPoints: function() {
                    var e = new $;
                    return function(t, r) {
                        var n = this.center;
                        void 0 !== r ? n.copy(r) : e.setFromPoints(t).getCenter(n);
                        for (var i = 0, a = 0, o = t.length; a < o; a++)
                            i = Math.max(i, n.distanceToSquared(t[a]));
                        return this.radius = Math.sqrt(i),
                        this
                    }
                }(),
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.center.copy(e.center),
                    this.radius = e.radius,
                    this
                },
                empty: function() {
                    return this.radius <= 0
                },
                containsPoint: function(e) {
                    return e.distanceToSquared(this.center) <= this.radius * this.radius
                },
                distanceToPoint: function(e) {
                    return e.distanceTo(this.center) - this.radius
                },
                intersectsSphere: function(e) {
                    var t = this.radius + e.radius;
                    return e.center.distanceToSquared(this.center) <= t * t
                },
                intersectsBox: function(e) {
                    return e.intersectsSphere(this)
                },
                intersectsPlane: function(e) {
                    return Math.abs(this.center.dot(e.normal) - e.constant) <= this.radius
                },
                clampPoint: function(e, t) {
                    var r = this.center.distanceToSquared(e)
                      , n = t || new u;
                    return n.copy(e),
                    r > this.radius * this.radius && (n.sub(this.center).normalize(),
                    n.multiplyScalar(this.radius).add(this.center)),
                    n
                },
                getBoundingBox: function(e) {
                    var t = e || new $;
                    return t.set(this.center, this.center),
                    t.expandByScalar(this.radius),
                    t
                },
                applyMatrix4: function(e) {
                    return this.center.applyMatrix4(e),
                    this.radius = this.radius * e.getMaxScaleOnAxis(),
                    this
                },
                translate: function(e) {
                    return this.center.add(e),
                    this
                },
                equals: function(e) {
                    return e.center.equals(this.center) && e.radius === this.radius
                }
            },
            te.prototype = {
                constructor: te,
                isMatrix3: !0,
                set: function(e, t, r, n, i, a, o, s, u) {
                    var l = this.elements;
                    return l[0] = e,
                    l[1] = n,
                    l[2] = o,
                    l[3] = t,
                    l[4] = i,
                    l[5] = s,
                    l[6] = r,
                    l[7] = a,
                    l[8] = u,
                    this
                },
                identity: function() {
                    return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1),
                    this
                },
                clone: function() {
                    return (new this.constructor).fromArray(this.elements)
                },
                copy: function(e) {
                    var t = e.elements;
                    return this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]),
                    this
                },
                setFromMatrix4: function(e) {
                    var t = e.elements;
                    return this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]),
                    this
                },
                applyToBufferAttribute: function() {
                    var e;
                    return function(t) {
                        void 0 === e && (e = new u);
                        for (var r = 0, n = t.count; r < n; r++)
                            e.x = t.getX(r),
                            e.y = t.getY(r),
                            e.z = t.getZ(r),
                            e.applyMatrix3(this),
                            t.setXYZ(r, e.x, e.y, e.z);
                        return t
                    }
                }(),
                multiplyScalar: function(e) {
                    var t = this.elements;
                    return t[0] *= e,
                    t[3] *= e,
                    t[6] *= e,
                    t[1] *= e,
                    t[4] *= e,
                    t[7] *= e,
                    t[2] *= e,
                    t[5] *= e,
                    t[8] *= e,
                    this
                },
                determinant: function() {
                    var e = this.elements
                      , t = e[0]
                      , r = e[1]
                      , n = e[2]
                      , i = e[3]
                      , a = e[4]
                      , o = e[5]
                      , s = e[6]
                      , u = e[7]
                      , l = e[8];
                    return t * a * l - t * o * u - r * i * l + r * o * s + n * i * u - n * a * s
                },
                getInverse: function(e, t) {
                    e && e.isMatrix4 && console.error("GASEngine.Matrix3.getInverse no longer takes a Matrix4 argument.");
                    var r = e.elements
                      , n = this.elements
                      , i = r[0]
                      , a = r[1]
                      , o = r[2]
                      , s = r[3]
                      , u = r[4]
                      , l = r[5]
                      , c = r[6]
                      , h = r[7]
                      , f = r[8]
                      , d = f * u - l * h
                      , p = l * c - f * s
                      , m = h * s - u * c
                      , g = i * d + a * p + o * m;
                    if (0 === g) {
                        var v = "GASEngine.Matrix3.getInverse(): can't invert matrix, determinant is 0";
                        if (t === !0)
                            throw new Error(v);
                        return console.warn(v),
                        this.identity()
                    }
                    var y = 1 / g;
                    return n[0] = d * y,
                    n[1] = (o * h - f * a) * y,
                    n[2] = (l * a - o * u) * y,
                    n[3] = p * y,
                    n[4] = (f * i - o * c) * y,
                    n[5] = (o * s - l * i) * y,
                    n[6] = m * y,
                    n[7] = (a * c - h * i) * y,
                    n[8] = (u * i - a * s) * y,
                    this
                },
                transpose: function() {
                    var e, t = this.elements;
                    return e = t[1],
                    t[1] = t[3],
                    t[3] = e,
                    e = t[2],
                    t[2] = t[6],
                    t[6] = e,
                    e = t[5],
                    t[5] = t[7],
                    t[7] = e,
                    this
                },
                getNormalMatrix: function(e) {
                    return this.setFromMatrix4(e).getInverse(this).transpose()
                },
                transposeIntoArray: function(e) {
                    var t = this.elements;
                    return e[0] = t[0],
                    e[1] = t[3],
                    e[2] = t[6],
                    e[3] = t[1],
                    e[4] = t[4],
                    e[5] = t[7],
                    e[6] = t[2],
                    e[7] = t[5],
                    e[8] = t[8],
                    this
                },
                fromArray: function(e, t) {
                    void 0 === t && (t = 0);
                    for (var r = 0; r < 9; r++)
                        this.elements[r] = e[r + t];
                    return this
                },
                toArray: function(e, t) {
                    void 0 === e && (e = []),
                    void 0 === t && (t = 0);
                    var r = this.elements;
                    return e[t] = r[0],
                    e[t + 1] = r[1],
                    e[t + 2] = r[2],
                    e[t + 3] = r[3],
                    e[t + 4] = r[4],
                    e[t + 5] = r[5],
                    e[t + 6] = r[6],
                    e[t + 7] = r[7],
                    e[t + 8] = r[8],
                    e
                }
            },
            re.prototype = {
                constructor: re,
                set: function(e, t) {
                    return this.normal.copy(e),
                    this.constant = t,
                    this
                },
                setComponents: function(e, t, r, n) {
                    return this.normal.set(e, t, r),
                    this.constant = n,
                    this
                },
                setFromNormalAndCoplanarPoint: function(e, t) {
                    return this.normal.copy(e),
                    this.constant = -t.dot(this.normal),
                    this
                },
                setFromCoplanarPoints: function() {
                    var e = new u
                      , t = new u;
                    return function(r, n, i) {
                        var a = e.subVectors(i, n).cross(t.subVectors(r, n)).normalize();
                        return this.setFromNormalAndCoplanarPoint(a, r),
                        this
                    }
                }(),
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.normal.copy(e.normal),
                    this.constant = e.constant,
                    this
                },
                normalize: function() {
                    var e = 1 / this.normal.length();
                    return this.normal.multiplyScalar(e),
                    this.constant *= e,
                    this
                },
                negate: function() {
                    return this.constant *= -1,
                    this.normal.negate(),
                    this
                },
                distanceToPoint: function(e) {
                    return this.normal.dot(e) + this.constant
                },
                distanceToSphere: function(e) {
                    return this.distanceToPoint(e.center) - e.radius
                },
                projectPoint: function(e, t) {
                    return this.orthoPoint(e, t).sub(e).negate()
                },
                orthoPoint: function(e, t) {
                    var r = this.distanceToPoint(e)
                      , n = t || new u;
                    return n.copy(this.normal).multiplyScalar(r)
                },
                intersectLine: function() {
                    var e = new u;
                    return function(t, r) {
                        var n = r || new u
                          , i = t.delta(e)
                          , a = this.normal.dot(i);
                        if (0 !== a) {
                            var o = -(t.start.dot(this.normal) + this.constant) / a;
                            if (!(o < 0 || o > 1))
                                return n.copy(i).multiplyScalar(o).add(t.start)
                        } else if (0 === this.distanceToPoint(t.start))
                            return n.copy(t.start)
                    }
                }(),
                intersectsLine: function(e) {
                    var t = this.distanceToPoint(e.start)
                      , r = this.distanceToPoint(e.end);
                    return t < 0 && r > 0 || r < 0 && t > 0
                },
                intersectsBox: function(e) {
                    return e.intersectsPlane(this)
                },
                intersectsSphere: function(e) {
                    return e.intersectsPlane(this)
                },
                coplanarPoint: function(e) {
                    var t = e || new u;
                    return t.copy(this.normal).multiplyScalar(-this.constant)
                },
                applyMatrix4: function() {
                    var e = new u
                      , t = new te;
                    return function(r, n) {
                        var i = this.coplanarPoint(e).applyMatrix4(r)
                          , a = n || t.getNormalMatrix(r)
                          , o = this.normal.applyMatrix3(a).normalize();
                        return this.constant = -i.dot(o),
                        this
                    }
                }(),
                translate: function(e) {
                    return this.constant = this.constant - e.dot(this.normal),
                    this
                },
                equals: function(e) {
                    return e.normal.equals(this.normal) && e.constant === this.constant
                }
            },
            ne.prototype = {
                constructor: ne,
                set: function(e, t, r, n, i, a) {
                    var o = this.planes;
                    return o[0].copy(e),
                    o[1].copy(t),
                    o[2].copy(r),
                    o[3].copy(n),
                    o[4].copy(i),
                    o[5].copy(a),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    for (var t = this.planes, r = 0; r < 6; r++)
                        t[r].copy(e.planes[r]);
                    return this
                },
                setFromMatrix: function(e) {
                    var t = this.planes
                      , r = e.elements
                      , n = r[0]
                      , i = r[1]
                      , a = r[2]
                      , o = r[3]
                      , s = r[4]
                      , u = r[5]
                      , l = r[6]
                      , c = r[7]
                      , h = r[8]
                      , f = r[9]
                      , d = r[10]
                      , p = r[11]
                      , m = r[12]
                      , g = r[13]
                      , v = r[14]
                      , y = r[15];
                    return t[0].setComponents(o - n, c - s, p - h, y - m).normalize(),
                    t[1].setComponents(o + n, c + s, p + h, y + m).normalize(),
                    t[2].setComponents(o + i, c + u, p + f, y + g).normalize(),
                    t[3].setComponents(o - i, c - u, p - f, y - g).normalize(),
                    t[4].setComponents(o - a, c - l, p - d, y - v).normalize(),
                    t[5].setComponents(o + a, c + l, p + d, y + v).normalize(),
                    this
                },
                intersectsObject: function() {
                    var e = new ee;
                    return function(t) {
                        var r = t.geometry;
                        return null === r.boundingSphere && r.computeBoundingSphere(),
                        e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),
                        this.intersectsSphere(e)
                    }
                }(),
                intersectsSprite: function() {
                    var e = new ee;
                    return function(t) {
                        return e.center.set(0, 0, 0),
                        e.radius = .7071067811865476,
                        e.applyMatrix4(t.matrixWorld),
                        this.intersectsSphere(e)
                    }
                }(),
                intersectsSphere: function(e) {
                    for (var t = this.planes, r = e.center, n = -e.radius, i = 0; i < 6; i++) {
                        var a = t[i].distanceToPoint(r);
                        if (a < n)
                            return !1
                    }
                    return !0
                },
                intersectsBox: function() {
                    var e = new u
                      , t = new u;
                    return function(r) {
                        for (var n = this.planes, i = 0; i < 6; i++) {
                            var a = n[i];
                            e.x = a.normal.x > 0 ? r.min.x : r.max.x,
                            t.x = a.normal.x > 0 ? r.max.x : r.min.x,
                            e.y = a.normal.y > 0 ? r.min.y : r.max.y,
                            t.y = a.normal.y > 0 ? r.max.y : r.min.y,
                            e.z = a.normal.z > 0 ? r.min.z : r.max.z,
                            t.z = a.normal.z > 0 ? r.max.z : r.min.z;
                            var o = a.distanceToPoint(e)
                              , s = a.distanceToPoint(t);
                            if (o < 0 && s < 0)
                                return !1
                        }
                        return !0
                    }
                }(),
                containsPoint: function(e) {
                    for (var t = this.planes, r = 0; r < 6; r++)
                        if (t[r].distanceToPoint(e) < 0)
                            return !1;
                    return !0
                }
            },
            ae.prototype = {
                constructor: ae,
                set: function(e, t) {
                    return this.origin.copy(e),
                    this.direction.copy(t),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.origin.copy(e.origin),
                    this.direction.copy(e.direction),
                    this
                },
                at: function(e, t) {
                    var r = t || new u;
                    return r.copy(this.direction).multiplyScalar(e).add(this.origin)
                },
                lookAt: function(e) {
                    return this.direction.copy(e).sub(this.origin).normalize(),
                    this
                },
                recast: function() {
                    var e = new u;
                    return function(t) {
                        return this.origin.copy(this.at(t, e)),
                        this
                    }
                }(),
                closestPointToPoint: function(e, t) {
                    var r = t || new u;
                    r.subVectors(e, this.origin);
                    var n = r.dot(this.direction);
                    return n < 0 ? r.copy(this.origin) : r.copy(this.direction).multiplyScalar(n).add(this.origin)
                },
                distanceToPoint: function(e) {
                    return Math.sqrt(this.distanceSqToPoint(e))
                },
                distanceSqToPoint: function() {
                    var e = new u;
                    return function(t) {
                        var r = e.subVectors(t, this.origin).dot(this.direction);
                        return r < 0 ? this.origin.distanceToSquared(t) : (e.copy(this.direction).multiplyScalar(r).add(this.origin),
                        e.distanceToSquared(t))
                    }
                }(),
                distanceSqToSegment: function() {
                    var e = new u
                      , t = new u
                      , r = new u;
                    return function(n, i, a, o) {
                        e.copy(n).add(i).multiplyScalar(.5),
                        t.copy(i).sub(n).normalize(),
                        r.copy(this.origin).sub(e);
                        var s, u, l, c, h = .5 * n.distanceTo(i), f = -this.direction.dot(t), d = r.dot(this.direction), p = -r.dot(t), m = r.lengthSq(), g = Math.abs(1 - f * f);
                        if (g > 0)
                            if (s = f * p - d,
                            u = f * d - p,
                            c = h * g,
                            s >= 0)
                                if (u >= -c)
                                    if (u <= c) {
                                        var v = 1 / g;
                                        s *= v,
                                        u *= v,
                                        l = s * (s + f * u + 2 * d) + u * (f * s + u + 2 * p) + m
                                    } else
                                        u = h,
                                        s = Math.max(0, -(f * u + d)),
                                        l = -s * s + u * (u + 2 * p) + m;
                                else
                                    u = -h,
                                    s = Math.max(0, -(f * u + d)),
                                    l = -s * s + u * (u + 2 * p) + m;
                            else
                                u <= -c ? (s = Math.max(0, -(-f * h + d)),
                                u = s > 0 ? -h : Math.min(Math.max(-h, -p), h),
                                l = -s * s + u * (u + 2 * p) + m) : u <= c ? (s = 0,
                                u = Math.min(Math.max(-h, -p), h),
                                l = u * (u + 2 * p) + m) : (s = Math.max(0, -(f * h + d)),
                                u = s > 0 ? h : Math.min(Math.max(-h, -p), h),
                                l = -s * s + u * (u + 2 * p) + m);
                        else
                            u = f > 0 ? -h : h,
                            s = Math.max(0, -(f * u + d)),
                            l = -s * s + u * (u + 2 * p) + m;
                        return a && a.copy(this.direction).multiplyScalar(s).add(this.origin),
                        o && o.copy(t).multiplyScalar(u).add(e),
                        l
                    }
                }(),
                intersectSphere: function() {
                    var e = new u;
                    return function(t, r) {
                        e.subVectors(t.center, this.origin);
                        var n = e.dot(this.direction)
                          , i = e.dot(e) - n * n
                          , a = t.radius * t.radius;
                        if (i > a)
                            return null;
                        var o = Math.sqrt(a - i)
                          , s = n - o
                          , u = n + o;
                        return s < 0 && u < 0 ? null : s < 0 ? this.at(u, r) : this.at(s, r)
                    }
                }(),
                intersectsSphere: function(e) {
                    return this.distanceToPoint(e.center) <= e.radius
                },
                distanceToPlane: function(e) {
                    var t = e.normal.dot(this.direction);
                    if (0 === t)
                        return 0 === e.distanceToPoint(this.origin) ? 0 : null;
                    var r = -(this.origin.dot(e.normal) + e.constant) / t;
                    return r >= 0 ? r : null
                },
                intersectPlane: function(e, t) {
                    var r = this.distanceToPlane(e);
                    return null === r ? null : this.at(r, t)
                },
                intersectsPlane: function(e) {
                    var t = e.distanceToPoint(this.origin);
                    if (0 === t)
                        return !0;
                    var r = e.normal.dot(this.direction);
                    return r * t < 0
                },
                intersectBox: function(e, t) {
                    var r, n, i, a, o, s, u = 1 / this.direction.x, l = 1 / this.direction.y, c = 1 / this.direction.z, h = this.origin;
                    return u >= 0 ? (r = (e.min.x - h.x) * u,
                    n = (e.max.x - h.x) * u) : (r = (e.max.x - h.x) * u,
                    n = (e.min.x - h.x) * u),
                    l >= 0 ? (i = (e.min.y - h.y) * l,
                    a = (e.max.y - h.y) * l) : (i = (e.max.y - h.y) * l,
                    a = (e.min.y - h.y) * l),
                    r > a || i > n ? null : ((i > r || r !== r) && (r = i),
                    (a < n || n !== n) && (n = a),
                    c >= 0 ? (o = (e.min.z - h.z) * c,
                    s = (e.max.z - h.z) * c) : (o = (e.max.z - h.z) * c,
                    s = (e.min.z - h.z) * c),
                    r > s || o > n ? null : ((o > r || r !== r) && (r = o),
                    (s < n || n !== n) && (n = s),
                    n < 0 ? null : this.at(r >= 0 ? r : n, t)))
                },
                intersectsBox: function() {
                    var e = new u;
                    return function(t) {
                        return null !== this.intersectBox(t, e)
                    }
                }(),
                intersectTriangle: function() {
                    var e = new u
                      , t = new u
                      , r = new u
                      , n = new u;
                    return function(i, a, o, s, u) {
                        t.subVectors(a, i),
                        r.subVectors(o, i),
                        n.crossVectors(t, r);
                        var l, c = this.direction.dot(n);
                        if (c > 0) {
                            if (s)
                                return null;
                            l = 1
                        } else {
                            if (!(c < 0))
                                return null;
                            l = -1,
                            c = -c
                        }
                        e.subVectors(this.origin, i);
                        var h = l * this.direction.dot(r.crossVectors(e, r));
                        if (h < 0)
                            return null;
                        var f = l * this.direction.dot(t.cross(e));
                        if (f < 0)
                            return null;
                        if (h + f > c)
                            return null;
                        var d = -l * e.dot(n);
                        return d < 0 ? null : this.at(d / c, u)
                    }
                }(),
                applyMatrix4: function(e) {
                    return this.direction.add(this.origin).applyMatrix4(e),
                    this.origin.applyMatrix4(e),
                    this.direction.sub(this.origin),
                    this.direction.normalize(),
                    this
                },
                equals: function(e) {
                    return e.origin.equals(this.origin) && e.direction.equals(this.direction)
                }
            },
            oe.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"],
            oe.DefaultOrder = "XYZ",
            oe.prototype = {
                constructor: oe,
                isEuler: !0,
                get x() {
                    return this._x
                },
                set x(e) {
                    this._x = e,
                    this.onChangeCallback()
                },
                get y() {
                    return this._y
                },
                set y(e) {
                    this._y = e,
                    this.onChangeCallback()
                },
                get z() {
                    return this._z
                },
                set z(e) {
                    this._z = e,
                    this.onChangeCallback()
                },
                get order() {
                    return this._order
                },
                set order(e) {
                    this._order = e,
                    this.onChangeCallback()
                },
                set: function(e, t, r, n) {
                    return this._x = e,
                    this._y = t,
                    this._z = r,
                    this._order = n || this._order,
                    this.onChangeCallback(),
                    this
                },
                clone: function() {
                    return new this.constructor(this._x,this._y,this._z,this._order)
                },
                copy: function(e) {
                    return this._x = e._x,
                    this._y = e._y,
                    this._z = e._z,
                    this._order = e._order,
                    this.onChangeCallback(),
                    this
                },
                setFromRotationMatrix: function(e, t, r) {
                    var n = ms.clamp
                      , i = e.elements
                      , a = i[0]
                      , o = i[4]
                      , s = i[8]
                      , u = i[1]
                      , l = i[5]
                      , c = i[9]
                      , h = i[2]
                      , f = i[6]
                      , d = i[10];
                    return t = t || this._order,
                    "XYZ" === t ? (this._y = Math.asin(n(s, -1, 1)),
                    Math.abs(s) < .99999 ? (this._x = Math.atan2(-c, d),
                    this._z = Math.atan2(-o, a)) : (this._x = Math.atan2(f, l),
                    this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-n(c, -1, 1)),
                    Math.abs(c) < .99999 ? (this._y = Math.atan2(s, d),
                    this._z = Math.atan2(u, l)) : (this._y = Math.atan2(-h, a),
                    this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(n(f, -1, 1)),
                    Math.abs(f) < .99999 ? (this._y = Math.atan2(-h, d),
                    this._z = Math.atan2(-o, l)) : (this._y = 0,
                    this._z = Math.atan2(u, a))) : "ZYX" === t ? (this._y = Math.asin(-n(h, -1, 1)),
                    Math.abs(h) < .99999 ? (this._x = Math.atan2(f, d),
                    this._z = Math.atan2(u, a)) : (this._x = 0,
                    this._z = Math.atan2(-o, l))) : "YZX" === t ? (this._z = Math.asin(n(u, -1, 1)),
                    Math.abs(u) < .99999 ? (this._x = Math.atan2(-c, l),
                    this._y = Math.atan2(-h, a)) : (this._x = 0,
                    this._y = Math.atan2(s, d))) : "XZY" === t ? (this._z = Math.asin(-n(o, -1, 1)),
                    Math.abs(o) < .99999 ? (this._x = Math.atan2(f, l),
                    this._y = Math.atan2(s, a)) : (this._x = Math.atan2(-c, d),
                    this._y = 0)) : console.warn("GASEngine.Euler: .setFromRotationMatrix() given unsupported order: " + t),
                    this._order = t,
                    r !== !1 && this.onChangeCallback(),
                    this
                },
                setFromQuaternion: function() {
                    var e;
                    return function(t, r, n) {
                        return void 0 === e && (e = new l),
                        e.makeRotationFromQuaternion(t),
                        this.setFromRotationMatrix(e, r, n)
                    }
                }(),
                setFromVector3: function(e, t) {
                    return this.set(e.x, e.y, e.z, t || this._order)
                },
                reorder: function() {
                    var e = new s;
                    return function(t) {
                        return e.setFromEuler(this),
                        this.setFromQuaternion(e, t)
                    }
                }(),
                equals: function(e) {
                    return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
                },
                fromArray: function(e) {
                    return this._x = e[0],
                    this._y = e[1],
                    this._z = e[2],
                    void 0 !== e[3] && (this._order = e[3]),
                    this.onChangeCallback(),
                    this
                },
                toArray: function(e, t) {
                    return void 0 === e && (e = []),
                    void 0 === t && (t = 0),
                    e[t] = this._x,
                    e[t + 1] = this._y,
                    e[t + 2] = this._z,
                    e[t + 3] = this._order,
                    e
                },
                toVector3: function(e) {
                    return e ? e.set(this._x, this._y, this._z) : new u(this._x,this._y,this._z)
                },
                onChange: function(e) {
                    return this.onChangeCallback = e,
                    this
                },
                onChangeCallback: function() {}
            },
            se.prototype = {
                constructor: se,
                set: function(e) {
                    this.mask = 1 << e
                },
                enable: function(e) {
                    this.mask |= 1 << e
                },
                toggle: function(e) {
                    this.mask ^= 1 << e
                },
                disable: function(e) {
                    this.mask &= ~(1 << e)
                },
                test: function(e) {
                    return 0 !== (this.mask & e.mask)
                }
            };
            var Ol = 0;
            ue.DefaultUp = new u(0,1,0),
            ue.DefaultMatrixAutoUpdate = !0,
            ue.prototype = {
                constructor: ue,
                isObject3D: !0,
                applyMatrix: function(e) {
                    this.matrix.multiplyMatrices(e, this.matrix),
                    this.matrix.decompose(this.position, this.quaternion, this.scale)
                },
                setRotationFromAxisAngle: function(e, t) {
                    this.quaternion.setFromAxisAngle(e, t)
                },
                setRotationFromEuler: function(e) {
                    this.quaternion.setFromEuler(e, !0)
                },
                setRotationFromMatrix: function(e) {
                    this.quaternion.setFromRotationMatrix(e)
                },
                setRotationFromQuaternion: function(e) {
                    this.quaternion.copy(e)
                },
                rotateOnAxis: function() {
                    var e = new s;
                    return function(t, r) {
                        return e.setFromAxisAngle(t, r),
                        this.quaternion.multiply(e),
                        this
                    }
                }(),
                rotateX: function() {
                    var e = new u(1,0,0);
                    return function(t) {
                        return this.rotateOnAxis(e, t)
                    }
                }(),
                rotateY: function() {
                    var e = new u(0,1,0);
                    return function(t) {
                        return this.rotateOnAxis(e, t)
                    }
                }(),
                rotateZ: function() {
                    var e = new u(0,0,1);
                    return function(t) {
                        return this.rotateOnAxis(e, t)
                    }
                }(),
                translateOnAxis: function() {
                    var e = new u;
                    return function(t, r) {
                        return e.copy(t).applyQuaternion(this.quaternion),
                        this.position.add(e.multiplyScalar(r)),
                        this
                    }
                }(),
                translateX: function() {
                    var e = new u(1,0,0);
                    return function(t) {
                        return this.translateOnAxis(e, t)
                    }
                }(),
                translateY: function() {
                    var e = new u(0,1,0);
                    return function(t) {
                        return this.translateOnAxis(e, t)
                    }
                }(),
                translateZ: function() {
                    var e = new u(0,0,1);
                    return function(t) {
                        return this.translateOnAxis(e, t)
                    }
                }(),
                localToWorld: function(e) {
                    return e.applyMatrix4(this.matrixWorld)
                },
                worldToLocal: function() {
                    var e = new l;
                    return function(t) {
                        return t.applyMatrix4(e.getInverse(this.matrixWorld))
                    }
                }(),
                lookAt: function() {
                    var e = new l;
                    return function(t) {
                        e.lookAt(t, this.position, this.up),
                        this.quaternion.setFromRotationMatrix(e)
                    }
                }(),
                add: function(e) {
                    if (arguments.length > 1) {
                        for (var t = 0; t < arguments.length; t++)
                            this.add(arguments[t]);
                        return this
                    }
                    return e === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e),
                    this) : (e && e.isObject3D ? (null !== e.parent && e.parent.remove(e),
                    e.parent = this,
                    e.dispatchEvent({
                        type: "added"
                    }),
                    this.children.push(e)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e),
                    this)
                },
                remove: function(e) {
                    if (arguments.length > 1)
                        for (var t = 0; t < arguments.length; t++)
                            this.remove(arguments[t]);
                    var r = this.children.indexOf(e);
                    r !== -1 && (e.parent = null,
                    e.dispatchEvent({
                        type: "removed"
                    }),
                    this.children.splice(r, 1))
                },
                getObjectById: function(e) {
                    return this.getObjectByProperty("id", e)
                },
                getObjectByName: function(e) {
                    return this.getObjectByProperty("name", e)
                },
                getObjectByProperty: function(e, t) {
                    if (this[e] === t)
                        return this;
                    for (var r = 0, n = this.children.length; r < n; r++) {
                        var i = this.children[r]
                          , a = i.getObjectByProperty(e, t);
                        if (void 0 !== a)
                            return a
                    }
                },
                getWorldPosition: function(e) {
                    var t = e || new u;
                    return this.updateMatrixWorld(!0),
                    t.setFromMatrixPosition(this.matrixWorld)
                },
                getWorldQuaternion: function() {
                    var e = new u
                      , t = new u;
                    return function(r) {
                        var n = r || new s;
                        return this.updateMatrixWorld(!0),
                        this.matrixWorld.decompose(e, n, t),
                        n
                    }
                }(),
                getWorldRotation: function() {
                    var e = new s;
                    return function(t) {
                        var r = t || new oe;
                        return this.getWorldQuaternion(e),
                        r.setFromQuaternion(e, this.rotation.order, !1)
                    }
                }(),
                getWorldScale: function() {
                    var e = new u
                      , t = new s;
                    return function(r) {
                        var n = r || new u;
                        return this.updateMatrixWorld(!0),
                        this.matrixWorld.decompose(e, t, n),
                        n
                    }
                }(),
                getWorldDirection: function() {
                    var e = new s;
                    return function(t) {
                        var r = t || new u;
                        return this.getWorldQuaternion(e),
                        r.set(0, 0, 1).applyQuaternion(e)
                    }
                }(),
                raycast: function() {},
                traverse: function(e) {
                    e(this);
                    for (var t = this.children, r = 0, n = t.length; r < n; r++)
                        t[r].traverse(e)
                },
                traverseVisible: function(e) {
                    if (this.visible !== !1) {
                        e(this);
                        for (var t = this.children, r = 0, n = t.length; r < n; r++)
                            t[r].traverseVisible(e)
                    }
                },
                traverseAncestors: function(e) {
                    var t = this.parent;
                    null !== t && (e(t),
                    t.traverseAncestors(e))
                },
                updateMatrix: function() {
                    this.matrix.compose(this.position, this.quaternion, this.scale),
                    this.matrixWorldNeedsUpdate = !0
                },
                updateMatrixWorld: function(e) {
                    this.matrixAutoUpdate === !0 && this.updateMatrix(),
                    this.matrixWorldNeedsUpdate !== !0 && e !== !0 || (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
                    this.matrixWorldNeedsUpdate = !1,
                    e = !0);
                    for (var t = this.children, r = 0, n = t.length; r < n; r++)
                        t[r].updateMatrixWorld(e)
                },
                toJSON: function(e) {
                    function t(e) {
                        var t = [];
                        for (var r in e) {
                            var n = e[r];
                            delete n.metadata,
                            t.push(n)
                        }
                        return t
                    }
                    var r = void 0 === e || "" === e
                      , n = {};
                    r && (e = {
                        geometries: {},
                        materials: {},
                        textures: {},
                        images: {}
                    },
                    n.metadata = {
                        version: 4.4,
                        type: "Object",
                        generator: "Object3D.toJSON"
                    });
                    var i = {};
                    if (i.uuid = this.uuid,
                    i.type = this.type,
                    "" !== this.name && (i.name = this.name),
                    "{}" !== JSON.stringify(this.userData) && (i.userData = this.userData),
                    this.castShadow === !0 && (i.castShadow = !0),
                    this.receiveShadow === !0 && (i.receiveShadow = !0),
                    this.visible === !1 && (i.visible = !1),
                    i.matrix = this.matrix.toArray(),
                    void 0 !== this.geometry && (void 0 === e.geometries[this.geometry.uuid] && (e.geometries[this.geometry.uuid] = this.geometry.toJSON(e)),
                    i.geometry = this.geometry.uuid),
                    void 0 !== this.material && (void 0 === e.materials[this.material.uuid] && (e.materials[this.material.uuid] = this.material.toJSON(e)),
                    i.material = this.material.uuid),
                    this.children.length > 0) {
                        i.children = [];
                        for (var a = 0; a < this.children.length; a++)
                            i.children.push(this.children[a].toJSON(e).object)
                    }
                    if (r) {
                        var o = t(e.geometries)
                          , s = t(e.materials)
                          , u = t(e.textures)
                          , l = t(e.images);
                        o.length > 0 && (n.geometries = o),
                        s.length > 0 && (n.materials = s),
                        u.length > 0 && (n.textures = u),
                        l.length > 0 && (n.images = l)
                    }
                    return n.object = i,
                    n
                },
                clone: function(e) {
                    return (new this.constructor).copy(this, e)
                },
                copy: function(e, t) {
                    if (void 0 === t && (t = !0),
                    this.name = e.name,
                    this.up.copy(e.up),
                    this.position.copy(e.position),
                    this.quaternion.copy(e.quaternion),
                    this.scale.copy(e.scale),
                    this.matrix.copy(e.matrix),
                    this.matrixWorld.copy(e.matrixWorld),
                    this.matrixAutoUpdate = e.matrixAutoUpdate,
                    this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate,
                    this.layers.mask = e.layers.mask,
                    this.visible = e.visible,
                    this.castShadow = e.castShadow,
                    this.receiveShadow = e.receiveShadow,
                    this.frustumCulled = e.frustumCulled,
                    this.renderOrder = e.renderOrder,
                    this.userData = JSON.parse(JSON.stringify(e.userData)),
                    t === !0)
                        for (var r = 0; r < e.children.length; r++) {
                            var n = e.children[r];
                            this.add(n.clone())
                        }
                    return this
                }
            },
            Object.assign(ue.prototype, t.prototype),
            le.prototype = {
                constructor: le,
                set: function(e, t) {
                    return this.start.copy(e),
                    this.end.copy(t),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.start.copy(e.start),
                    this.end.copy(e.end),
                    this
                },
                getCenter: function(e) {
                    var t = e || new u;
                    return t.addVectors(this.start, this.end).multiplyScalar(.5)
                },
                delta: function(e) {
                    var t = e || new u;
                    return t.subVectors(this.end, this.start)
                },
                distanceSq: function() {
                    return this.start.distanceToSquared(this.end)
                },
                distance: function() {
                    return this.start.distanceTo(this.end)
                },
                at: function(e, t) {
                    var r = t || new u;
                    return this.delta(r).multiplyScalar(e).add(this.start)
                },
                closestPointToPointParameter: function() {
                    var e = new u
                      , t = new u;
                    return function(r, n) {
                        e.subVectors(r, this.start),
                        t.subVectors(this.end, this.start);
                        var i = t.dot(t)
                          , a = t.dot(e)
                          , o = a / i;
                        return n && (o = ms.clamp(o, 0, 1)),
                        o
                    }
                }(),
                closestPointToPoint: function(e, t, r) {
                    var n = this.closestPointToPointParameter(e, t)
                      , i = r || new u;
                    return this.delta(i).multiplyScalar(n).add(this.start)
                },
                applyMatrix4: function(e) {
                    return this.start.applyMatrix4(e),
                    this.end.applyMatrix4(e),
                    this
                },
                equals: function(e) {
                    return e.start.equals(this.start) && e.end.equals(this.end)
                }
            },
            ce.normal = function() {
                var e = new u;
                return function(t, r, n, i) {
                    var a = i || new u;
                    a.subVectors(n, r),
                    e.subVectors(t, r),
                    a.cross(e);
                    var o = a.lengthSq();
                    return o > 0 ? a.multiplyScalar(1 / Math.sqrt(o)) : a.set(0, 0, 0)
                }
            }(),
            ce.barycoordFromPoint = function() {
                var e = new u
                  , t = new u
                  , r = new u;
                return function(n, i, a, o, s) {
                    e.subVectors(o, i),
                    t.subVectors(a, i),
                    r.subVectors(n, i);
                    var l = e.dot(e)
                      , c = e.dot(t)
                      , h = e.dot(r)
                      , f = t.dot(t)
                      , d = t.dot(r)
                      , p = l * f - c * c
                      , m = s || new u;
                    if (0 === p)
                        return m.set(-2, -1, -1);
                    var g = 1 / p
                      , v = (f * h - c * d) * g
                      , y = (l * d - c * h) * g;
                    return m.set(1 - v - y, y, v)
                }
            }(),
            ce.containsPoint = function() {
                var e = new u;
                return function(t, r, n, i) {
                    var a = ce.barycoordFromPoint(t, r, n, i, e);
                    return a.x >= 0 && a.y >= 0 && a.x + a.y <= 1
                }
            }(),
            ce.prototype = {
                constructor: ce,
                set: function(e, t, r) {
                    return this.a.copy(e),
                    this.b.copy(t),
                    this.c.copy(r),
                    this
                },
                setFromPointsAndIndices: function(e, t, r, n) {
                    return this.a.copy(e[t]),
                    this.b.copy(e[r]),
                    this.c.copy(e[n]),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.a.copy(e.a),
                    this.b.copy(e.b),
                    this.c.copy(e.c),
                    this
                },
                area: function() {
                    var e = new u
                      , t = new u;
                    return function() {
                        return e.subVectors(this.c, this.b),
                        t.subVectors(this.a, this.b),
                        .5 * e.cross(t).length()
                    }
                }(),
                midpoint: function(e) {
                    var t = e || new u;
                    return t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
                },
                normal: function(e) {
                    return ce.normal(this.a, this.b, this.c, e)
                },
                plane: function(e) {
                    var t = e || new re;
                    return t.setFromCoplanarPoints(this.a, this.b, this.c)
                },
                barycoordFromPoint: function(e, t) {
                    return ce.barycoordFromPoint(e, this.a, this.b, this.c, t)
                },
                containsPoint: function(e) {
                    return ce.containsPoint(e, this.a, this.b, this.c)
                },
                closestPointToPoint: function() {
                    var e, t, r, n;
                    return function(i, a) {
                        void 0 === e && (e = new re,
                        t = [new le, new le, new le],
                        r = new u,
                        n = new u);
                        var o = a || new u
                          , s = 1 / 0;
                        if (e.setFromCoplanarPoints(this.a, this.b, this.c),
                        e.projectPoint(i, r),
                        this.containsPoint(r) === !0)
                            o.copy(r);
                        else {
                            t[0].set(this.a, this.b),
                            t[1].set(this.b, this.c),
                            t[2].set(this.c, this.a);
                            for (var l = 0; l < t.length; l++) {
                                t[l].closestPointToPoint(r, !0, n);
                                var c = r.distanceToSquared(n);
                                c < s && (s = c,
                                o.copy(n))
                            }
                        }
                        return o
                    }
                }(),
                equals: function(e) {
                    return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
                }
            },
            he.prototype = {
                constructor: he,
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    this.a = e.a,
                    this.b = e.b,
                    this.c = e.c,
                    this.normal.copy(e.normal),
                    this.color.copy(e.color),
                    this.materialIndex = e.materialIndex;
                    for (var t = 0, r = e.vertexNormals.length; t < r; t++)
                        this.vertexNormals[t] = e.vertexNormals[t].clone();
                    for (var t = 0, r = e.vertexColors.length; t < r; t++)
                        this.vertexColors[t] = e.vertexColors[t].clone();
                    return this
                }
            },
            fe.prototype = Object.create(Z.prototype),
            fe.prototype.constructor = fe,
            fe.prototype.isMeshBasicMaterial = !0,
            fe.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.map = e.map,
                this.lightMap = e.lightMap,
                this.lightMapIntensity = e.lightMapIntensity,
                this.aoMap = e.aoMap,
                this.aoMapIntensity = e.aoMapIntensity,
                this.specularMap = e.specularMap,
                this.alphaMap = e.alphaMap,
                this.envMap = e.envMap,
                this.combine = e.combine,
                this.reflectivity = e.reflectivity,
                this.refractionRatio = e.refractionRatio,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.wireframeLinecap = e.wireframeLinecap,
                this.wireframeLinejoin = e.wireframeLinejoin,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this
            }
            ,
            de.prototype = {
                constructor: de,
                isBufferAttribute: !0,
                set needsUpdate(e) {
                    e === !0 && this.version++
                },
                setArray: function(e) {
                    if (Array.isArray(e))
                        throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
                    this.count = void 0 !== e ? e.length / this.itemSize : 0,
                    this.array = e
                },
                setDynamic: function(e) {
                    return this.dynamic = e,
                    this
                },
                copy: function(e) {
                    return this.array = new e.array.constructor(e.array),
                    this.itemSize = e.itemSize,
                    this.count = e.count,
                    this.normalized = e.normalized,
                    this.dynamic = e.dynamic,
                    this
                },
                copyAt: function(e, t, r) {
                    e *= this.itemSize,
                    r *= t.itemSize;
                    for (var n = 0, i = this.itemSize; n < i; n++)
                        this.array[e + n] = t.array[r + n];
                    return this
                },
                copyArray: function(e) {
                    return this.array.set(e),
                    this
                },
                copyColorsArray: function(e) {
                    for (var t = this.array, r = 0, n = 0, i = e.length; n < i; n++) {
                        var a = e[n];
                        void 0 === a && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", n),
                        a = new Q),
                        t[r++] = a.r,
                        t[r++] = a.g,
                        t[r++] = a.b
                    }
                    return this
                },
                copyIndicesArray: function(e) {
                    for (var t = this.array, r = 0, n = 0, i = e.length; n < i; n++) {
                        var a = e[n];
                        t[r++] = a.a,
                        t[r++] = a.b,
                        t[r++] = a.c
                    }
                    return this
                },
                copyVector2sArray: function(e) {
                    for (var t = this.array, n = 0, i = 0, a = e.length; i < a; i++) {
                        var o = e[i];
                        void 0 === o && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", i),
                        o = new r),
                        t[n++] = o.x,
                        t[n++] = o.y
                    }
                    return this
                },
                copyVector3sArray: function(e) {
                    for (var t = this.array, r = 0, n = 0, i = e.length; n < i; n++) {
                        var a = e[n];
                        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", n),
                        a = new u),
                        t[r++] = a.x,
                        t[r++] = a.y,
                        t[r++] = a.z
                    }
                    return this
                },
                copyVector4sArray: function(e) {
                    for (var t = this.array, r = 0, n = 0, a = e.length; n < a; n++) {
                        var o = e[n];
                        void 0 === o && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", n),
                        o = new i),
                        t[r++] = o.x,
                        t[r++] = o.y,
                        t[r++] = o.z,
                        t[r++] = o.w
                    }
                    return this
                },
                set: function(e, t) {
                    return void 0 === t && (t = 0),
                    this.array.set(e, t),
                    this
                },
                getX: function(e) {
                    return this.array[e * this.itemSize]
                },
                setX: function(e, t) {
                    return this.array[e * this.itemSize] = t,
                    this
                },
                getY: function(e) {
                    return this.array[e * this.itemSize + 1]
                },
                setY: function(e, t) {
                    return this.array[e * this.itemSize + 1] = t,
                    this
                },
                getZ: function(e) {
                    return this.array[e * this.itemSize + 2]
                },
                setZ: function(e, t) {
                    return this.array[e * this.itemSize + 2] = t,
                    this
                },
                getW: function(e) {
                    return this.array[e * this.itemSize + 3]
                },
                setW: function(e, t) {
                    return this.array[e * this.itemSize + 3] = t,
                    this
                },
                setXY: function(e, t, r) {
                    return e *= this.itemSize,
                    this.array[e + 0] = t,
                    this.array[e + 1] = r,
                    this
                },
                setXYZ: function(e, t, r, n) {
                    return e *= this.itemSize,
                    this.array[e + 0] = t,
                    this.array[e + 1] = r,
                    this.array[e + 2] = n,
                    this
                },
                setXYZW: function(e, t, r, n, i) {
                    return e *= this.itemSize,
                    this.array[e + 0] = t,
                    this.array[e + 1] = r,
                    this.array[e + 2] = n,
                    this.array[e + 3] = i,
                    this
                },
                onUpload: function(e) {
                    return this.onUploadCallback = e,
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                }
            },
            pe.prototype = Object.create(de.prototype),
            pe.prototype.constructor = pe,
            me.prototype = Object.create(de.prototype),
            me.prototype.constructor = me,
            ge.prototype = Object.create(de.prototype),
            ge.prototype.constructor = ge,
            ve.prototype = Object.create(de.prototype),
            ve.prototype.constructor = ve,
            ye.prototype = Object.create(de.prototype),
            ye.prototype.constructor = ye,
            Me.prototype = Object.create(de.prototype),
            Me.prototype.constructor = Me,
            we.prototype = Object.create(de.prototype),
            we.prototype.constructor = we,
            xe.prototype = Object.create(de.prototype),
            xe.prototype.constructor = xe,
            Ae.prototype = Object.create(de.prototype),
            Ae.prototype.constructor = Ae,
            Object.assign(be.prototype, {
                computeGroups: function(e) {
                    for (var t, r = [], n = void 0, i = e.faces, a = 0; a < i.length; a++) {
                        var o = i[a];
                        o.materialIndex !== n && (n = o.materialIndex,
                        void 0 !== t && (t.count = 3 * a - t.start,
                        r.push(t)),
                        t = {
                            start: 3 * a,
                            materialIndex: n
                        })
                    }
                    void 0 !== t && (t.count = 3 * a - t.start,
                    r.push(t)),
                    this.groups = r
                },
                fromGeometry: function(e) {
                    var t, n = e.faces, i = e.vertices, a = e.faceVertexUvs, o = a[0] && a[0].length > 0, s = a[1] && a[1].length > 0, u = e.morphTargets, l = u.length;
                    if (l > 0) {
                        t = [];
                        for (var c = 0; c < l; c++)
                            t[c] = [];
                        this.morphTargets.position = t
                    }
                    var h, f = e.morphNormals, d = f.length;
                    if (d > 0) {
                        h = [];
                        for (var c = 0; c < d; c++)
                            h[c] = [];
                        this.morphTargets.normal = h
                    }
                    for (var p = e.skinIndices, m = e.skinWeights, g = p.length === i.length, v = m.length === i.length, c = 0; c < n.length; c++) {
                        var y = n[c];
                        this.vertices.push(i[y.a], i[y.b], i[y.c]);
                        var M = y.vertexNormals;
                        if (3 === M.length)
                            this.normals.push(M[0], M[1], M[2]);
                        else {
                            var w = y.normal;
                            this.normals.push(w, w, w)
                        }
                        var x = y.vertexColors;
                        if (3 === x.length)
                            this.colors.push(x[0], x[1], x[2]);
                        else {
                            var A = y.color;
                            this.colors.push(A, A, A)
                        }
                        if (o === !0) {
                            var b = a[0][c];
                            void 0 !== b ? this.uvs.push(b[0], b[1], b[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", c),
                            this.uvs.push(new r, new r, new r))
                        }
                        if (s === !0) {
                            var b = a[1][c];
                            void 0 !== b ? this.uvs2.push(b[0], b[1], b[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", c),
                            this.uvs2.push(new r, new r, new r))
                        }
                        for (var T = 0; T < l; T++) {
                            var _ = u[T].vertices;
                            t[T].push(_[y.a], _[y.b], _[y.c])
                        }
                        for (var T = 0; T < d; T++) {
                            var E = f[T].vertexNormals[c];
                            h[T].push(E.a, E.b, E.c)
                        }
                        g && this.skinIndices.push(p[y.a], p[y.b], p[y.c]),
                        v && this.skinWeights.push(m[y.a], m[y.b], m[y.c])
                    }
                    return this.computeGroups(e),
                    this.verticesNeedUpdate = e.verticesNeedUpdate,
                    this.normalsNeedUpdate = e.normalsNeedUpdate,
                    this.colorsNeedUpdate = e.colorsNeedUpdate,
                    this.uvsNeedUpdate = e.uvsNeedUpdate,
                    this.groupsNeedUpdate = e.groupsNeedUpdate,
                    this
                }
            });
            var jl = 0;
            _e.prototype = {
                constructor: _e,
                isGeometry: !0,
                applyMatrix: function(e) {
                    for (var t = (new te).getNormalMatrix(e), r = 0, n = this.vertices.length; r < n; r++) {
                        var i = this.vertices[r];
                        i.applyMatrix4(e)
                    }
                    for (var r = 0, n = this.faces.length; r < n; r++) {
                        var a = this.faces[r];
                        a.normal.applyMatrix3(t).normalize();
                        for (var o = 0, s = a.vertexNormals.length; o < s; o++)
                            a.vertexNormals[o].applyMatrix3(t).normalize()
                    }
                    return null !== this.boundingBox && this.computeBoundingBox(),
                    null !== this.boundingSphere && this.computeBoundingSphere(),
                    this.verticesNeedUpdate = !0,
                    this.normalsNeedUpdate = !0,
                    this
                },
                rotateX: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.makeRotationX(t),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                rotateY: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.makeRotationY(t),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                rotateZ: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.makeRotationZ(t),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                translate: function() {
                    var e;
                    return function(t, r, n) {
                        return void 0 === e && (e = new l),
                        e.makeTranslation(t, r, n),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                scale: function() {
                    var e;
                    return function(t, r, n) {
                        return void 0 === e && (e = new l),
                        e.makeScale(t, r, n),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                lookAt: function() {
                    var e;
                    return function(t) {
                        void 0 === e && (e = new ue),
                        e.lookAt(t),
                        e.updateMatrix(),
                        this.applyMatrix(e.matrix)
                    }
                }(),
                fromBufferGeometry: function(e) {
                    function t(e, t, r, i) {
                        var a = void 0 !== s ? [f[e].clone(), f[t].clone(), f[r].clone()] : []
                          , o = void 0 !== l ? [n.colors[e].clone(), n.colors[t].clone(), n.colors[r].clone()] : []
                          , u = new he(e,t,r,a,o,i);
                        n.faces.push(u),
                        void 0 !== c && n.faceVertexUvs[0].push([d[e].clone(), d[t].clone(), d[r].clone()]),
                        void 0 !== h && n.faceVertexUvs[1].push([p[e].clone(), p[t].clone(), p[r].clone()])
                    }
                    var n = this
                      , i = null !== e.index ? e.index.array : void 0
                      , a = e.attributes
                      , o = a.position.array
                      , s = void 0 !== a.normal ? a.normal.array : void 0
                      , l = void 0 !== a.color ? a.color.array : void 0
                      , c = void 0 !== a.uv ? a.uv.array : void 0
                      , h = void 0 !== a.uv2 ? a.uv2.array : void 0;
                    void 0 !== h && (this.faceVertexUvs[1] = []);
                    for (var f = [], d = [], p = [], m = 0, g = 0; m < o.length; m += 3,
                    g += 2)
                        n.vertices.push(new u(o[m],o[m + 1],o[m + 2])),
                        void 0 !== s && f.push(new u(s[m],s[m + 1],s[m + 2])),
                        void 0 !== l && n.colors.push(new Q(l[m],l[m + 1],l[m + 2])),
                        void 0 !== c && d.push(new r(c[g],c[g + 1])),
                        void 0 !== h && p.push(new r(h[g],h[g + 1]));
                    if (void 0 !== i) {
                        var v = e.groups;
                        if (v.length > 0)
                            for (var m = 0; m < v.length; m++)
                                for (var y = v[m], M = y.start, w = y.count, g = M, x = M + w; g < x; g += 3)
                                    t(i[g], i[g + 1], i[g + 2], y.materialIndex);
                        else
                            for (var m = 0; m < i.length; m += 3)
                                t(i[m], i[m + 1], i[m + 2])
                    } else
                        for (var m = 0; m < o.length / 3; m += 3)
                            t(m, m + 1, m + 2);
                    return this.computeFaceNormals(),
                    null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()),
                    null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()),
                    this
                },
                center: function() {
                    this.computeBoundingBox();
                    var e = this.boundingBox.getCenter().negate();
                    return this.translate(e.x, e.y, e.z),
                    e
                },
                normalize: function() {
                    this.computeBoundingSphere();
                    var e = this.boundingSphere.center
                      , t = this.boundingSphere.radius
                      , r = 0 === t ? 1 : 1 / t
                      , n = new l;
                    return n.set(r, 0, 0, -r * e.x, 0, r, 0, -r * e.y, 0, 0, r, -r * e.z, 0, 0, 0, 1),
                    this.applyMatrix(n),
                    this
                },
                computeFaceNormals: function() {
                    for (var e = new u, t = new u, r = 0, n = this.faces.length; r < n; r++) {
                        var i = this.faces[r]
                          , a = this.vertices[i.a]
                          , o = this.vertices[i.b]
                          , s = this.vertices[i.c];
                        e.subVectors(s, o),
                        t.subVectors(a, o),
                        e.cross(t),
                        e.normalize(),
                        i.normal.copy(e)
                    }
                },
                computeVertexNormals: function(e) {
                    void 0 === e && (e = !0);
                    var t, r, n, i, a, o;
                    for (o = new Array(this.vertices.length),
                    t = 0,
                    r = this.vertices.length; t < r; t++)
                        o[t] = new u;
                    if (e) {
                        var s, l, c, h = new u, f = new u;
                        for (n = 0,
                        i = this.faces.length; n < i; n++)
                            a = this.faces[n],
                            s = this.vertices[a.a],
                            l = this.vertices[a.b],
                            c = this.vertices[a.c],
                            h.subVectors(c, l),
                            f.subVectors(s, l),
                            h.cross(f),
                            o[a.a].add(h),
                            o[a.b].add(h),
                            o[a.c].add(h)
                    } else
                        for (this.computeFaceNormals(),
                        n = 0,
                        i = this.faces.length; n < i; n++)
                            a = this.faces[n],
                            o[a.a].add(a.normal),
                            o[a.b].add(a.normal),
                            o[a.c].add(a.normal);
                    for (t = 0,
                    r = this.vertices.length; t < r; t++)
                        o[t].normalize();
                    for (n = 0,
                    i = this.faces.length; n < i; n++) {
                        a = this.faces[n];
                        var d = a.vertexNormals;
                        3 === d.length ? (d[0].copy(o[a.a]),
                        d[1].copy(o[a.b]),
                        d[2].copy(o[a.c])) : (d[0] = o[a.a].clone(),
                        d[1] = o[a.b].clone(),
                        d[2] = o[a.c].clone())
                    }
                    this.faces.length > 0 && (this.normalsNeedUpdate = !0)
                },
                computeFlatVertexNormals: function() {
                    var e, t, r;
                    for (this.computeFaceNormals(),
                    e = 0,
                    t = this.faces.length; e < t; e++) {
                        r = this.faces[e];
                        var n = r.vertexNormals;
                        3 === n.length ? (n[0].copy(r.normal),
                        n[1].copy(r.normal),
                        n[2].copy(r.normal)) : (n[0] = r.normal.clone(),
                        n[1] = r.normal.clone(),
                        n[2] = r.normal.clone())
                    }
                    this.faces.length > 0 && (this.normalsNeedUpdate = !0)
                },
                computeMorphNormals: function() {
                    var e, t, r, n, i;
                    for (r = 0,
                    n = this.faces.length; r < n; r++)
                        for (i = this.faces[r],
                        i.__originalFaceNormal ? i.__originalFaceNormal.copy(i.normal) : i.__originalFaceNormal = i.normal.clone(),
                        i.__originalVertexNormals || (i.__originalVertexNormals = []),
                        e = 0,
                        t = i.vertexNormals.length; e < t; e++)
                            i.__originalVertexNormals[e] ? i.__originalVertexNormals[e].copy(i.vertexNormals[e]) : i.__originalVertexNormals[e] = i.vertexNormals[e].clone();
                    var a = new _e;
                    for (a.faces = this.faces,
                    e = 0,
                    t = this.morphTargets.length; e < t; e++) {
                        if (!this.morphNormals[e]) {
                            this.morphNormals[e] = {},
                            this.morphNormals[e].faceNormals = [],
                            this.morphNormals[e].vertexNormals = [];
                            var o, s, l = this.morphNormals[e].faceNormals, c = this.morphNormals[e].vertexNormals;
                            for (r = 0,
                            n = this.faces.length; r < n; r++)
                                o = new u,
                                s = {
                                    a: new u,
                                    b: new u,
                                    c: new u
                                },
                                l.push(o),
                                c.push(s)
                        }
                        var h = this.morphNormals[e];
                        a.vertices = this.morphTargets[e].vertices,
                        a.computeFaceNormals(),
                        a.computeVertexNormals();
                        var o, s;
                        for (r = 0,
                        n = this.faces.length; r < n; r++)
                            i = this.faces[r],
                            o = h.faceNormals[r],
                            s = h.vertexNormals[r],
                            o.copy(i.normal),
                            s.a.copy(i.vertexNormals[0]),
                            s.b.copy(i.vertexNormals[1]),
                            s.c.copy(i.vertexNormals[2])
                    }
                    for (r = 0,
                    n = this.faces.length; r < n; r++)
                        i = this.faces[r],
                        i.normal = i.__originalFaceNormal,
                        i.vertexNormals = i.__originalVertexNormals
                },
                computeLineDistances: function() {
                    for (var e = 0, t = this.vertices, r = 0, n = t.length; r < n; r++)
                        r > 0 && (e += t[r].distanceTo(t[r - 1])),
                        this.lineDistances[r] = e
                },
                computeBoundingBox: function() {
                    null === this.boundingBox && (this.boundingBox = new $),
                    this.boundingBox.setFromPoints(this.vertices)
                },
                computeBoundingSphere: function() {
                    null === this.boundingSphere && (this.boundingSphere = new ee),
                    this.boundingSphere.setFromPoints(this.vertices)
                },
                merge: function(e, t, r) {
                    if ((e && e.isGeometry) === !1)
                        return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e);
                    var n, i = this.vertices.length, a = this.vertices, o = e.vertices, s = this.faces, u = e.faces, l = this.faceVertexUvs[0], c = e.faceVertexUvs[0], h = this.colors, f = e.colors;
                    void 0 === r && (r = 0),
                    void 0 !== t && (n = (new te).getNormalMatrix(t));
                    for (var d = 0, p = o.length; d < p; d++) {
                        var m = o[d]
                          , g = m.clone();
                        void 0 !== t && g.applyMatrix4(t),
                        a.push(g)
                    }
                    for (var d = 0, p = f.length; d < p; d++)
                        h.push(f[d].clone());
                    for (d = 0,
                    p = u.length; d < p; d++) {
                        var v, y, M, w = u[d], x = w.vertexNormals, A = w.vertexColors;
                        v = new he(w.a + i,w.b + i,w.c + i),
                        v.normal.copy(w.normal),
                        void 0 !== n && v.normal.applyMatrix3(n).normalize();
                        for (var b = 0, T = x.length; b < T; b++)
                            y = x[b].clone(),
                            void 0 !== n && y.applyMatrix3(n).normalize(),
                            v.vertexNormals.push(y);
                        v.color.copy(w.color);
                        for (var b = 0, T = A.length; b < T; b++)
                            M = A[b],
                            v.vertexColors.push(M.clone());
                        v.materialIndex = w.materialIndex + r,
                        s.push(v)
                    }
                    for (d = 0,
                    p = c.length; d < p; d++) {
                        var _ = c[d]
                          , E = [];
                        if (void 0 !== _) {
                            for (var b = 0, T = _.length; b < T; b++)
                                E.push(_[b].clone());
                            l.push(E)
                        }
                    }
                },
                mergeMesh: function(e) {
                    return (e && e.isMesh) === !1 ? void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e) : (e.matrixAutoUpdate && e.updateMatrix(),
                    void this.merge(e.geometry, e.matrix))
                },
                mergeVertices: function() {
                    var e, t, r, n, i, a, o, s, u = {}, l = [], c = [], h = 4, f = Math.pow(10, h);
                    for (r = 0,
                    n = this.vertices.length; r < n; r++)
                        e = this.vertices[r],
                        t = Math.round(e.x * f) + "_" + Math.round(e.y * f) + "_" + Math.round(e.z * f),
                        void 0 === u[t] ? (u[t] = r,
                        l.push(this.vertices[r]),
                        c[r] = l.length - 1) : c[r] = c[u[t]];
                    var d = [];
                    for (r = 0,
                    n = this.faces.length; r < n; r++) {
                        i = this.faces[r],
                        i.a = c[i.a],
                        i.b = c[i.b],
                        i.c = c[i.c],
                        a = [i.a, i.b, i.c];
                        for (var p = 0; p < 3; p++)
                            if (a[p] === a[(p + 1) % 3]) {
                                d.push(r);
                                break
                            }
                    }
                    for (r = d.length - 1; r >= 0; r--) {
                        var m = d[r];
                        for (this.faces.splice(m, 1),
                        o = 0,
                        s = this.faceVertexUvs.length; o < s; o++)
                            this.faceVertexUvs[o].splice(m, 1)
                    }
                    var g = this.vertices.length - l.length;
                    return this.vertices = l,
                    g
                },
                sortFacesByMaterialIndex: function() {
                    function e(e, t) {
                        return e.materialIndex - t.materialIndex
                    }
                    for (var t = this.faces, r = t.length, n = 0; n < r; n++)
                        t[n]._id = n;
                    t.sort(e);
                    var i, a, o = this.faceVertexUvs[0], s = this.faceVertexUvs[1];
                    o && o.length === r && (i = []),
                    s && s.length === r && (a = []);
                    for (var n = 0; n < r; n++) {
                        var u = t[n]._id;
                        i && i.push(o[u]),
                        a && a.push(s[u])
                    }
                    i && (this.faceVertexUvs[0] = i),
                    a && (this.faceVertexUvs[1] = a)
                },
                toJSON: function() {
                    function e(e, t, r) {
                        return r ? e | 1 << t : e & ~(1 << t)
                    }
                    function t(e) {
                        var t = e.x.toString() + e.y.toString() + e.z.toString();
                        return void 0 !== f[t] ? f[t] : (f[t] = h.length / 3,
                        h.push(e.x, e.y, e.z),
                        f[t])
                    }
                    function r(e) {
                        var t = e.r.toString() + e.g.toString() + e.b.toString();
                        return void 0 !== p[t] ? p[t] : (p[t] = d.length,
                        d.push(e.getHex()),
                        p[t])
                    }
                    function n(e) {
                        var t = e.x.toString() + e.y.toString();
                        return void 0 !== g[t] ? g[t] : (g[t] = m.length / 2,
                        m.push(e.x, e.y),
                        g[t])
                    }
                    var i = {
                        metadata: {
                            version: 4.4,
                            type: "Geometry",
                            generator: "Geometry.toJSON"
                        }
                    };
                    if (i.uuid = this.uuid,
                    i.type = this.type,
                    "" !== this.name && (i.name = this.name),
                    void 0 !== this.parameters) {
                        var a = this.parameters;
                        for (var o in a)
                            void 0 !== a[o] && (i[o] = a[o]);
                        return i
                    }
                    for (var s = [], u = 0; u < this.vertices.length; u++) {
                        var l = this.vertices[u];
                        s.push(l.x, l.y, l.z)
                    }
                    for (var c = [], h = [], f = {}, d = [], p = {}, m = [], g = {}, u = 0; u < this.faces.length; u++) {
                        var v = this.faces[u]
                          , y = !0
                          , M = !1
                          , w = void 0 !== this.faceVertexUvs[0][u]
                          , x = v.normal.length() > 0
                          , A = v.vertexNormals.length > 0
                          , b = 1 !== v.color.r || 1 !== v.color.g || 1 !== v.color.b
                          , T = v.vertexColors.length > 0
                          , _ = 0;
                        if (_ = e(_, 0, 0),
                        _ = e(_, 1, y),
                        _ = e(_, 2, M),
                        _ = e(_, 3, w),
                        _ = e(_, 4, x),
                        _ = e(_, 5, A),
                        _ = e(_, 6, b),
                        _ = e(_, 7, T),
                        c.push(_),
                        c.push(v.a, v.b, v.c),
                        c.push(v.materialIndex),
                        w) {
                            var E = this.faceVertexUvs[0][u];
                            c.push(n(E[0]), n(E[1]), n(E[2]))
                        }
                        if (x && c.push(t(v.normal)),
                        A) {
                            var S = v.vertexNormals;
                            c.push(t(S[0]), t(S[1]), t(S[2]))
                        }
                        if (b && c.push(r(v.color)),
                        T) {
                            var D = v.vertexColors;
                            c.push(r(D[0]), r(D[1]), r(D[2]))
                        }
                    }
                    return i.data = {},
                    i.data.vertices = s,
                    i.data.normals = h,
                    d.length > 0 && (i.data.colors = d),
                    m.length > 0 && (i.data.uvs = [m]),
                    i.data.faces = c,
                    i
                },
                clone: function() {
                    return (new _e).copy(this)
                },
                copy: function(e) {
                    this.vertices = [],
                    this.faces = [],
                    this.faceVertexUvs = [[]],
                    this.colors = [];
                    for (var t = e.vertices, r = 0, n = t.length; r < n; r++)
                        this.vertices.push(t[r].clone());
                    for (var i = e.colors, r = 0, n = i.length; r < n; r++)
                        this.colors.push(i[r].clone());
                    for (var a = e.faces, r = 0, n = a.length; r < n; r++)
                        this.faces.push(a[r].clone());
                    for (var r = 0, n = e.faceVertexUvs.length; r < n; r++) {
                        var o = e.faceVertexUvs[r];
                        void 0 === this.faceVertexUvs[r] && (this.faceVertexUvs[r] = []);
                        for (var s = 0, u = o.length; s < u; s++) {
                            for (var l = o[s], c = [], h = 0, f = l.length; h < f; h++) {
                                var d = l[h];
                                c.push(d.clone())
                            }
                            this.faceVertexUvs[r].push(c)
                        }
                    }
                    return this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            },
            Object.assign(_e.prototype, t.prototype),
            Ee.prototype = {
                constructor: Ee,
                isBufferGeometry: !0,
                getIndex: function() {
                    return this.index
                },
                setIndex: function(e) {
                    this.index = e
                },
                addAttribute: function(e, t) {
                    return (t && t.isBufferAttribute) === !1 && (t && t.isInterleavedBufferAttribute) === !1 ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
                    void this.addAttribute(e, new de(arguments[1],arguments[2]))) : "index" === e ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),
                    void this.setIndex(t)) : (this.attributes[e] = t,
                    this)
                },
                getAttribute: function(e) {
                    return this.attributes[e]
                },
                removeAttribute: function(e) {
                    return delete this.attributes[e],
                    this
                },
                addGroup: function(e, t, r) {
                    this.groups.push({
                        start: e,
                        count: t,
                        materialIndex: void 0 !== r ? r : 0
                    })
                },
                clearGroups: function() {
                    this.groups = []
                },
                setDrawRange: function(e, t) {
                    this.drawRange.start = e,
                    this.drawRange.count = t
                },
                applyMatrix: function(e) {
                    var t = this.attributes.position;
                    void 0 !== t && (e.applyToBufferAttribute(t),
                    t.needsUpdate = !0);
                    var r = this.attributes.normal;
                    if (void 0 !== r) {
                        var n = (new te).getNormalMatrix(e);
                        n.applyToBufferAttribute(r),
                        r.needsUpdate = !0
                    }
                    return null !== this.boundingBox && this.computeBoundingBox(),
                    null !== this.boundingSphere && this.computeBoundingSphere(),
                    this
                },
                rotateX: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.makeRotationX(t),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                rotateY: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.makeRotationY(t),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                rotateZ: function() {
                    var e;
                    return function(t) {
                        return void 0 === e && (e = new l),
                        e.makeRotationZ(t),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                translate: function() {
                    var e;
                    return function(t, r, n) {
                        return void 0 === e && (e = new l),
                        e.makeTranslation(t, r, n),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                scale: function() {
                    var e;
                    return function(t, r, n) {
                        return void 0 === e && (e = new l),
                        e.makeScale(t, r, n),
                        this.applyMatrix(e),
                        this
                    }
                }(),
                lookAt: function() {
                    var e;
                    return function(t) {
                        void 0 === e && (e = new ue),
                        e.lookAt(t),
                        e.updateMatrix(),
                        this.applyMatrix(e.matrix)
                    }
                }(),
                center: function() {
                    this.computeBoundingBox();
                    var e = this.boundingBox.getCenter().negate();
                    return this.translate(e.x, e.y, e.z),
                    e
                },
                setFromObject: function(e) {
                    var t = e.geometry;
                    if (e.isPoints || e.isLine) {
                        var r = new xe(3 * t.vertices.length,3)
                          , n = new xe(3 * t.colors.length,3);
                        if (this.addAttribute("position", r.copyVector3sArray(t.vertices)),
                        this.addAttribute("color", n.copyColorsArray(t.colors)),
                        t.lineDistances && t.lineDistances.length === t.vertices.length) {
                            var i = new xe(t.lineDistances.length,1);
                            this.addAttribute("lineDistance", i.copyArray(t.lineDistances))
                        }
                        null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()),
                        null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone())
                    } else
                        e.isMesh && t && t.isGeometry && this.fromGeometry(t);
                    return this
                },
                updateFromObject: function(e) {
                    var t = e.geometry;
                    if (e.isMesh) {
                        var r = t.__directGeometry;
                        if (t.elementsNeedUpdate === !0 && (r = void 0,
                        t.elementsNeedUpdate = !1),
                        void 0 === r)
                            return this.fromGeometry(t);
                        r.verticesNeedUpdate = t.verticesNeedUpdate,
                        r.normalsNeedUpdate = t.normalsNeedUpdate,
                        r.colorsNeedUpdate = t.colorsNeedUpdate,
                        r.uvsNeedUpdate = t.uvsNeedUpdate,
                        r.groupsNeedUpdate = t.groupsNeedUpdate,
                        t.verticesNeedUpdate = !1,
                        t.normalsNeedUpdate = !1,
                        t.colorsNeedUpdate = !1,
                        t.uvsNeedUpdate = !1,
                        t.groupsNeedUpdate = !1,
                        t = r
                    }
                    var n;
                    return t.verticesNeedUpdate === !0 && (n = this.attributes.position,
                    void 0 !== n && (n.copyVector3sArray(t.vertices),
                    n.needsUpdate = !0),
                    t.verticesNeedUpdate = !1),
                    t.normalsNeedUpdate === !0 && (n = this.attributes.normal,
                    void 0 !== n && (n.copyVector3sArray(t.normals),
                    n.needsUpdate = !0),
                    t.normalsNeedUpdate = !1),
                    t.colorsNeedUpdate === !0 && (n = this.attributes.color,
                    void 0 !== n && (n.copyColorsArray(t.colors),
                    n.needsUpdate = !0),
                    t.colorsNeedUpdate = !1),
                    t.uvsNeedUpdate && (n = this.attributes.uv,
                    void 0 !== n && (n.copyVector2sArray(t.uvs),
                    n.needsUpdate = !0),
                    t.uvsNeedUpdate = !1),
                    t.lineDistancesNeedUpdate && (n = this.attributes.lineDistance,
                    void 0 !== n && (n.copyArray(t.lineDistances),
                    n.needsUpdate = !0),
                    t.lineDistancesNeedUpdate = !1),
                    t.groupsNeedUpdate && (t.computeGroups(e.geometry),
                    this.groups = t.groups,
                    t.groupsNeedUpdate = !1),
                    this
                },
                fromGeometry: function(e) {
                    return e.__directGeometry = (new be).fromGeometry(e),
                    this.fromDirectGeometry(e.__directGeometry)
                },
                fromDirectGeometry: function(e) {
                    var t = new Float32Array(3 * e.vertices.length);
                    if (this.addAttribute("position", new de(t,3).copyVector3sArray(e.vertices)),
                    e.normals.length > 0) {
                        var r = new Float32Array(3 * e.normals.length);
                        this.addAttribute("normal", new de(r,3).copyVector3sArray(e.normals))
                    }
                    if (e.colors.length > 0) {
                        var n = new Float32Array(3 * e.colors.length);
                        this.addAttribute("color", new de(n,3).copyColorsArray(e.colors))
                    }
                    if (e.uvs.length > 0) {
                        var i = new Float32Array(2 * e.uvs.length);
                        this.addAttribute("uv", new de(i,2).copyVector2sArray(e.uvs))
                    }
                    if (e.uvs2.length > 0) {
                        var a = new Float32Array(2 * e.uvs2.length);
                        this.addAttribute("uv2", new de(a,2).copyVector2sArray(e.uvs2))
                    }
                    if (e.indices.length > 0) {
                        var o = e.vertices.length > 65535 ? Uint32Array : Uint16Array
                          , s = new o(3 * e.indices.length);
                        this.setIndex(new de(s,1).copyIndicesArray(e.indices))
                    }
                    this.groups = e.groups;
                    for (var u in e.morphTargets) {
                        for (var l = [], c = e.morphTargets[u], h = 0, f = c.length; h < f; h++) {
                            var d = c[h]
                              , p = new xe(3 * d.length,3);
                            l.push(p.copyVector3sArray(d))
                        }
                        this.morphAttributes[u] = l
                    }
                    if (e.skinIndices.length > 0) {
                        var m = new xe(4 * e.skinIndices.length,4);
                        this.addAttribute("skinIndex", m.copyVector4sArray(e.skinIndices))
                    }
                    if (e.skinWeights.length > 0) {
                        var g = new xe(4 * e.skinWeights.length,4);
                        this.addAttribute("skinWeight", g.copyVector4sArray(e.skinWeights))
                    }
                    return null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()),
                    null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()),
                    this
                },
                computeBoundingBox: function() {
                    null === this.boundingBox && (this.boundingBox = new $);
                    var e = this.attributes.position;
                    void 0 !== e ? this.boundingBox.setFromBufferAttribute(e) : this.boundingBox.makeEmpty(),
                    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
                },
                computeBoundingSphere: function() {
                    var e = new $
                      , t = new u;
                    return function() {
                        null === this.boundingSphere && (this.boundingSphere = new ee);
                        var r = this.attributes.position;
                        if (r) {
                            var n = this.boundingSphere.center;
                            e.setFromBufferAttribute(r),
                            e.getCenter(n);
                            for (var i = 0, a = 0, o = r.count; a < o; a++)
                                t.x = r.getX(a),
                                t.y = r.getY(a),
                                t.z = r.getZ(a),
                                i = Math.max(i, n.distanceToSquared(t));
                            this.boundingSphere.radius = Math.sqrt(i),
                            isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
                        }
                    }
                }(),
                computeFaceNormals: function() {},
                computeVertexNormals: function() {
                    var e = this.index
                      , t = this.attributes
                      , r = this.groups;
                    if (t.position) {
                        var n = t.position.array;
                        if (void 0 === t.normal)
                            this.addAttribute("normal", new de(new Float32Array(n.length),3));
                        else
                            for (var i = t.normal.array, a = 0, o = i.length; a < o; a++)
                                i[a] = 0;
                        var s, l, c, h = t.normal.array, f = new u, d = new u, p = new u, m = new u, g = new u;
                        if (e) {
                            var v = e.array;
                            0 === r.length && this.addGroup(0, v.length);
                            for (var y = 0, M = r.length; y < M; ++y)
                                for (var w = r[y], x = w.start, A = w.count, a = x, o = x + A; a < o; a += 3)
                                    s = 3 * v[a + 0],
                                    l = 3 * v[a + 1],
                                    c = 3 * v[a + 2],
                                    f.fromArray(n, s),
                                    d.fromArray(n, l),
                                    p.fromArray(n, c),
                                    m.subVectors(p, d),
                                    g.subVectors(f, d),
                                    m.cross(g),
                                    h[s] += m.x,
                                    h[s + 1] += m.y,
                                    h[s + 2] += m.z,
                                    h[l] += m.x,
                                    h[l + 1] += m.y,
                                    h[l + 2] += m.z,
                                    h[c] += m.x,
                                    h[c + 1] += m.y,
                                    h[c + 2] += m.z
                        } else
                            for (var a = 0, o = n.length; a < o; a += 9)
                                f.fromArray(n, a),
                                d.fromArray(n, a + 3),
                                p.fromArray(n, a + 6),
                                m.subVectors(p, d),
                                g.subVectors(f, d),
                                m.cross(g),
                                h[a] = m.x,
                                h[a + 1] = m.y,
                                h[a + 2] = m.z,
                                h[a + 3] = m.x,
                                h[a + 4] = m.y,
                                h[a + 5] = m.z,
                                h[a + 6] = m.x,
                                h[a + 7] = m.y,
                                h[a + 8] = m.z;
                        this.normalizeNormals(),
                        t.normal.needsUpdate = !0
                    }
                },
                merge: function(e, t) {
                    if ((e && e.isBufferGeometry) === !1)
                        return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e);
                    void 0 === t && (t = 0);
                    var r = this.attributes;
                    for (var n in r)
                        if (void 0 !== e.attributes[n])
                            for (var i = r[n], a = i.array, o = e.attributes[n], s = o.array, u = o.itemSize, l = 0, c = u * t; l < s.length; l++,
                            c++)
                                a[c] = s[l];
                    return this
                },
                normalizeNormals: function() {
                    for (var e, t, r, n, i = this.attributes.normal.array, a = 0, o = i.length; a < o; a += 3)
                        e = i[a],
                        t = i[a + 1],
                        r = i[a + 2],
                        n = 1 / Math.sqrt(e * e + t * t + r * r),
                        i[a] *= n,
                        i[a + 1] *= n,
                        i[a + 2] *= n
                },
                toNonIndexed: function() {
                    if (null === this.index)
                        return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
                        this;
                    var e = new Ee
                      , t = this.index.array
                      , r = this.attributes;
                    for (var n in r) {
                        for (var i = r[n], a = i.array, o = i.itemSize, s = new a.constructor(t.length * o), u = 0, l = 0, c = 0, h = t.length; c < h; c++) {
                            u = t[c] * o;
                            for (var f = 0; f < o; f++)
                                s[l++] = a[u++]
                        }
                        e.addAttribute(n, new de(s,o))
                    }
                    return e
                },
                toJSON: function() {
                    var e = {
                        metadata: {
                            version: 4.4,
                            type: "BufferGeometry",
                            generator: "BufferGeometry.toJSON"
                        }
                    };
                    if (e.uuid = this.uuid,
                    e.type = this.type,
                    "" !== this.name && (e.name = this.name),
                    void 0 !== this.parameters) {
                        var t = this.parameters;
                        for (var r in t)
                            void 0 !== t[r] && (e[r] = t[r]);
                        return e
                    }
                    e.data = {
                        attributes: {}
                    };
                    var n = this.index;
                    if (null !== n) {
                        var i = Array.prototype.slice.call(n.array);
                        e.data.index = {
                            type: n.array.constructor.name,
                            array: i
                        }
                    }
                    var a = this.attributes;
                    for (var r in a) {
                        var o = a[r]
                          , i = Array.prototype.slice.call(o.array);
                        e.data.attributes[r] = {
                            itemSize: o.itemSize,
                            type: o.array.constructor.name,
                            array: i,
                            normalized: o.normalized
                        }
                    }
                    var s = this.groups;
                    s.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(s)));
                    var u = this.boundingSphere;
                    return null !== u && (e.data.boundingSphere = {
                        center: u.center.toArray(),
                        radius: u.radius
                    }),
                    e
                },
                clone: function() {
                    return (new Ee).copy(this)
                },
                copy: function(e) {
                    var t, r, n;
                    this.index = null,
                    this.attributes = {},
                    this.morphAttributes = {},
                    this.groups = [],
                    this.boundingBox = null,
                    this.boundingSphere = null,
                    this.name = e.name;
                    var i = e.index;
                    null !== i && this.setIndex(i.clone());
                    var a = e.attributes;
                    for (t in a) {
                        var o = a[t];
                        this.addAttribute(t, o.clone())
                    }
                    var s = e.morphAttributes;
                    for (t in s) {
                        var u = []
                          , l = s[t];
                        for (r = 0,
                        n = l.length; r < n; r++)
                            u.push(l[r].clone());
                        this.morphAttributes[t] = u
                    }
                    var c = e.groups;
                    for (r = 0,
                    n = c.length; r < n; r++) {
                        var h = c[r];
                        this.addGroup(h.start, h.count, h.materialIndex)
                    }
                    var f = e.boundingBox;
                    null !== f && (this.boundingBox = f.clone());
                    var d = e.boundingSphere;
                    return null !== d && (this.boundingSphere = d.clone()),
                    this.drawRange.start = e.drawRange.start,
                    this.drawRange.count = e.drawRange.count,
                    this
                },
                dispose: function() {
                    this.dispatchEvent({
                        type: "dispose"
                    })
                }
            },
            Ee.MaxIndex = 65535,
            Object.assign(Ee.prototype, t.prototype),
            Se.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: Se,
                isMesh: !0,
                setDrawMode: function(e) {
                    this.drawMode = e
                },
                copy: function(e) {
                    return ue.prototype.copy.call(this, e),
                    this.drawMode = e.drawMode,
                    this
                },
                updateMorphTargets: function() {
                    var e = this.geometry.morphTargets;
                    if (void 0 !== e && e.length > 0) {
                        this.morphTargetInfluences = [],
                        this.morphTargetDictionary = {};
                        for (var t = 0, r = e.length; t < r; t++)
                            this.morphTargetInfluences.push(0),
                            this.morphTargetDictionary[e[t].name] = t
                    }
                },
                raycast: function() {
                    function e(e, t, r, n, i, a, o) {
                        return ce.barycoordFromPoint(e, t, r, n, y),
                        i.multiplyScalar(y.x),
                        a.multiplyScalar(y.y),
                        o.multiplyScalar(y.z),
                        i.add(a).add(o),
                        i.clone()
                    }
                    function t(e, t, r, n, i, a, o) {
                        var s, u = e.material;
                        if (s = u.side === la ? r.intersectTriangle(a, i, n, !0, o) : r.intersectTriangle(n, i, a, u.side !== ca, o),
                        null === s)
                            return null;
                        w.copy(o),
                        w.applyMatrix4(e.matrixWorld);
                        var l = t.ray.origin.distanceTo(w);
                        return l < t.near || l > t.far ? null : {
                            distance: l,
                            point: w.clone(),
                            object: e
                        }
                    }
                    function n(r, n, i, a, o, u, l, f) {
                        s.fromBufferAttribute(a, u),
                        c.fromBufferAttribute(a, l),
                        h.fromBufferAttribute(a, f);
                        var d = t(r, n, i, s, c, h, M);
                        return d && (o && (m.fromBufferAttribute(o, u),
                        g.fromBufferAttribute(o, l),
                        v.fromBufferAttribute(o, f),
                        d.uv = e(M, s, c, h, m, g, v)),
                        d.face = new he(u,l,f,ce.normal(s, c, h)),
                        d.faceIndex = u),
                        d
                    }
                    var i = new l
                      , a = new ae
                      , o = new ee
                      , s = new u
                      , c = new u
                      , h = new u
                      , f = new u
                      , d = new u
                      , p = new u
                      , m = new r
                      , g = new r
                      , v = new r
                      , y = new u
                      , M = new u
                      , w = new u;
                    return function(r, u) {
                        var l = this.geometry
                          , y = this.material
                          , w = this.matrixWorld;
                        if (void 0 !== y && (null === l.boundingSphere && l.computeBoundingSphere(),
                        o.copy(l.boundingSphere),
                        o.applyMatrix4(w),
                        r.ray.intersectsSphere(o) !== !1 && (i.getInverse(w),
                        a.copy(r.ray).applyMatrix4(i),
                        null === l.boundingBox || a.intersectsBox(l.boundingBox) !== !1))) {
                            var x;
                            if (l.isBufferGeometry) {
                                var A, b, T, _, E, S = l.index, D = l.attributes.position, N = l.attributes.uv;
                                if (null !== S)
                                    for (_ = 0,
                                    E = S.count; _ < E; _ += 3)
                                        A = S.getX(_),
                                        b = S.getX(_ + 1),
                                        T = S.getX(_ + 2),
                                        x = n(this, r, a, D, N, A, b, T),
                                        x && (x.faceIndex = Math.floor(_ / 3),
                                        u.push(x));
                                else
                                    for (_ = 0,
                                    E = D.count; _ < E; _ += 3)
                                        A = _,
                                        b = _ + 1,
                                        T = _ + 2,
                                        x = n(this, r, a, D, N, A, b, T),
                                        x && (x.index = A,
                                        u.push(x))
                            } else if (l.isGeometry) {
                                var I, L, C, O, j = y && y.isMultiMaterial, R = j === !0 ? y.materials : null, P = l.vertices, z = l.faces, B = l.faceVertexUvs[0];
                                B.length > 0 && (O = B);
                                for (var U = 0, V = z.length; U < V; U++) {
                                    var k = z[U]
                                      , F = j === !0 ? R[k.materialIndex] : y;
                                    if (void 0 !== F) {
                                        if (I = P[k.a],
                                        L = P[k.b],
                                        C = P[k.c],
                                        F.morphTargets === !0) {
                                            var G = l.morphTargets
                                              , Y = this.morphTargetInfluences;
                                            s.set(0, 0, 0),
                                            c.set(0, 0, 0),
                                            h.set(0, 0, 0);
                                            for (var Q = 0, H = G.length; Q < H; Q++) {
                                                var W = Y[Q];
                                                if (0 !== W) {
                                                    var X = G[Q].vertices;
                                                    s.addScaledVector(f.subVectors(X[k.a], I), W),
                                                    c.addScaledVector(d.subVectors(X[k.b], L), W),
                                                    h.addScaledVector(p.subVectors(X[k.c], C), W)
                                                }
                                            }
                                            s.add(I),
                                            c.add(L),
                                            h.add(C),
                                            I = s,
                                            L = c,
                                            C = h
                                        }
                                        if (x = t(this, r, a, I, L, C, M)) {
                                            if (O) {
                                                var q = O[U];
                                                m.copy(q[0]),
                                                g.copy(q[1]),
                                                v.copy(q[2]),
                                                x.uv = e(M, I, L, C, m, g, v)
                                            }
                                            x.face = k,
                                            x.faceIndex = U,
                                            u.push(x)
                                        }
                                    }
                                }
                            }
                        }
                    }
                }(),
                clone: function() {
                    return new this.constructor(this.geometry,this.material).copy(this)
                }
            }),
            De.prototype = Object.create(Ee.prototype),
            De.prototype.constructor = De,
            Ne.prototype = Object.create(Ee.prototype),
            Ne.prototype.constructor = Ne,
            Ie.prototype = {
                constructor: Ie,
                copy: function(e) {
                    return this.name = e.name,
                    this.texture = e.texture,
                    this.uvChannel = e.uvChannel,
                    this.uvTransform = e.uvTransform,
                    this.uvOffset = e.uvOffset,
                    this.uvRepeat = e.uvRepeat,
                    this.texelTransform = e.texelTransform,
                    this.texelScale = e.texelScale,
                    this.texelOffset = e.texelOffset,
                    this.texelInvert = e.texelInvert,
                    this
                },
                getFlattenedTexelTransform: function(e) {
                    var t = e || {};
                    return this.texelInvert ? (t.texelScale = -this.texelScale,
                    t.texelOffset = this.texelScale + this.texelOffset) : (t.texelScale = this.texelScale,
                    t.texelOffset = this.texelOffset),
                    t
                }
            },
            Ie.SupportedMapNames = ["map", "lightMap", "aoMap", "emissiveMap", "specularMap", "bumpMap", "normalMap", "roughnessMap", "metalnessMap", "alphaMap", "displacementMap", "falloffMap", "falloffAlphaMap"],
            Ie.SupportedMapSlotNames = [],
            Ie.SupportedMapUVNames = [],
            Ie.SupportedMapTexelNames = [];
            for (var Rl = 0; Rl < Ie.SupportedMapNames.length; Rl++) {
                var Pl = Ie.SupportedMapNames[Rl];
                Ie.SupportedMapSlotNames.push(Pl + "Slot"),
                Ie.SupportedMapUVNames.push(Pl + "UVTransformParams"),
                Ie.SupportedMapTexelNames.push(Pl + "TexelTransformParams")
            }
            Le.prototype = Object.create(ue.prototype),
            Le.prototype.constructor = Le,
            Le.prototype.isCamera = !0,
            Le.prototype.getWorldDirection = function() {
                var e = new s;
                return function(t) {
                    var r = t || new u;
                    return this.getWorldQuaternion(e),
                    r.set(0, 0, -1).applyQuaternion(e)
                }
            }(),
            Le.prototype.lookAt = function() {
                var e = new l;
                return function(t) {
                    e.lookAt(this.position, t, this.up),
                    this.quaternion.setFromRotationMatrix(e)
                }
            }(),
            Le.prototype.clone = function() {
                return (new this.constructor).copy(this)
            }
            ,
            Le.prototype.copy = function(e) {
                return ue.prototype.copy.call(this, e),
                this.matrixWorldInverse.copy(e.matrixWorldInverse),
                this.projectionMatrix.copy(e.projectionMatrix),
                this
            }
            ,
            Ce.prototype = Object.assign(Object.create(Le.prototype), {
                constructor: Ce,
                isPerspectiveCamera: !0,
                copy: function(e) {
                    return Le.prototype.copy.call(this, e),
                    this.fov = e.fov,
                    this.zoom = e.zoom,
                    this.near = e.near,
                    this.far = e.far,
                    this.focus = e.focus,
                    this.aspect = e.aspect,
                    this.view = null === e.view ? null : Object.assign({}, e.view),
                    this.filmGauge = e.filmGauge,
                    this.filmOffset = e.filmOffset,
                    this
                },
                setFocalLength: function(e) {
                    var t = .5 * this.getFilmHeight() / e;
                    this.fov = 2 * ms.RAD2DEG * Math.atan(t),
                    this.updateProjectionMatrix()
                },
                getFocalLength: function() {
                    var e = Math.tan(.5 * ms.DEG2RAD * this.fov);
                    return .5 * this.getFilmHeight() / e
                },
                getEffectiveFOV: function() {
                    return 2 * ms.RAD2DEG * Math.atan(Math.tan(.5 * ms.DEG2RAD * this.fov) / this.zoom)
                },
                getFilmWidth: function() {
                    return this.filmGauge * Math.min(this.aspect, 1)
                },
                getFilmHeight: function() {
                    return this.filmGauge / Math.max(this.aspect, 1)
                },
                setViewOffset: function(e, t, r, n, i, a) {
                    return e ? (this.aspect = e / t,
                    this.view = {
                        fullWidth: e,
                        fullHeight: t,
                        offsetX: r,
                        offsetY: n,
                        width: i,
                        height: a
                    },
                    void this.updateProjectionMatrix()) : void (this.view = null)
                },
                clearViewOffset: function() {
                    this.view = null,
                    this.updateProjectionMatrix()
                },
                updateProjectionMatrix: function() {
                    var e = this.near
                      , t = e * Math.tan(.5 * ms.DEG2RAD * this.fov) / this.zoom
                      , r = 2 * t
                      , n = this.aspect * r
                      , i = -.5 * n
                      , a = this.view;
                    if (null !== a) {
                        var o = a.fullWidth
                          , s = a.fullHeight;
                        i += a.offsetX * n / o,
                        t -= a.offsetY * r / s,
                        n *= a.width / o,
                        r *= a.height / s
                    }
                    var u = this.filmOffset;
                    0 !== u && (i += e * u / this.getFilmWidth()),
                    this.projectionMatrix.makePerspective(i, i + n, t, t - r, e, this.far)
                },
                toJSON: function(e) {
                    var t = ue.prototype.toJSON.call(this, e);
                    return t.object.fov = this.fov,
                    t.object.zoom = this.zoom,
                    t.object.near = this.near,
                    t.object.far = this.far,
                    t.object.focus = this.focus,
                    t.object.aspect = this.aspect,
                    null !== this.view && (t.object.view = Object.assign({}, this.view)),
                    t.object.filmGauge = this.filmGauge,
                    t.object.filmOffset = this.filmOffset,
                    t
                }
            }),
            Oe.prototype = Object.assign(Object.create(Le.prototype), {
                constructor: Oe,
                isOrthographicCamera: !0,
                copy: function(e) {
                    return Le.prototype.copy.call(this, e),
                    this.left = e.left,
                    this.right = e.right,
                    this.top = e.top,
                    this.bottom = e.bottom,
                    this.near = e.near,
                    this.far = e.far,
                    this.zoom = e.zoom,
                    this.view = null === e.view ? null : Object.assign({}, e.view),
                    this
                },
                setViewOffset: function(e, t, r, n, i, a) {
                    this.view = {
                        fullWidth: e,
                        fullHeight: t,
                        offsetX: r,
                        offsetY: n,
                        width: i,
                        height: a
                    },
                    this.updateProjectionMatrix()
                },
                clearViewOffset: function() {
                    this.view = null,
                    this.updateProjectionMatrix()
                },
                updateProjectionMatrix: function() {
                    var e = (this.right - this.left) / (2 * this.zoom)
                      , t = (this.top - this.bottom) / (2 * this.zoom)
                      , r = (this.right + this.left) / 2
                      , n = (this.top + this.bottom) / 2
                      , i = r - e
                      , a = r + e
                      , o = n + t
                      , s = n - t;
                    if (null !== this.view) {
                        var u = this.zoom / (this.view.width / this.view.fullWidth)
                          , l = this.zoom / (this.view.height / this.view.fullHeight)
                          , c = (this.right - this.left) / this.view.width
                          , h = (this.top - this.bottom) / this.view.height;
                        i += c * (this.view.offsetX / u),
                        a = i + c * (this.view.width / u),
                        o -= h * (this.view.offsetY / l),
                        s = o - h * (this.view.height / l)
                    }
                    this.projectionMatrix.makeOrthographic(i, a, o, s, this.near, this.far)
                },
                toJSON: function(e) {
                    var t = ue.prototype.toJSON.call(this, e);
                    return t.object.zoom = this.zoom,
                    t.object.left = this.left,
                    t.object.right = this.right,
                    t.object.top = this.top,
                    t.object.bottom = this.bottom,
                    t.object.near = this.near,
                    t.object.far = this.far,
                    null !== this.view && (t.object.view = Object.assign({}, this.view)),
                    t
                }
            });
            var zl = 0;
            ut.prototype = Object.create(ue.prototype),
            ut.prototype.constructor = ut,
            ut.prototype.copy = function(e, t) {
                return ue.prototype.copy.call(this, e, t),
                null !== e.background && (this.background = e.background.clone()),
                null !== e.fog && (this.fog = e.fog.clone()),
                null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()),
                this.autoUpdate = e.autoUpdate,
                this.matrixAutoUpdate = e.matrixAutoUpdate,
                this
            }
            ,
            ut.prototype.toJSON = function(e) {
                var t = ue.prototype.toJSON.call(this, e);
                return null !== this.background && (t.object.background = this.background.toJSON(e)),
                null !== this.fog && (t.object.fog = this.fog.toJSON()),
                t
            }
            ,
            ct.prototype.isFogExp2 = !0,
            ct.prototype.clone = function() {
                return new ct(this.color.getHex(),this.density)
            }
            ,
            ct.prototype.toJSON = function(e) {
                return {
                    type: "FogExp2",
                    color: this.color.getHex(),
                    density: this.density
                }
            }
            ,
            ht.prototype.isFog = !0,
            ht.prototype.clone = function() {
                return new ht(this.color.getHex(),this.near,this.far)
            }
            ,
            ht.prototype.toJSON = function(e) {
                return {
                    type: "Fog",
                    color: this.color.getHex(),
                    near: this.near,
                    far: this.far
                }
            }
            ,
            ft.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: ft,
                isLensFlare: !0,
                copy: function(e) {
                    ue.prototype.copy.call(this, e),
                    this.positionScreen.copy(e.positionScreen),
                    this.customUpdateCallback = e.customUpdateCallback;
                    for (var t = 0, r = e.lensFlares.length; t < r; t++)
                        this.lensFlares.push(e.lensFlares[t]);
                    return this
                },
                add: function(e, t, r, n, i, a) {
                    void 0 === t && (t = -1),
                    void 0 === r && (r = 0),
                    void 0 === a && (a = 1),
                    void 0 === i && (i = new Q(16777215)),
                    void 0 === n && (n = va),
                    r = Math.min(r, Math.max(0, r)),
                    this.lensFlares.push({
                        texture: e,
                        size: t,
                        distance: r,
                        x: 0,
                        y: 0,
                        z: 0,
                        scale: 1,
                        rotation: 0,
                        opacity: a,
                        color: i,
                        blending: n
                    })
                },
                updateLensFlares: function() {
                    var e, t, r = this.lensFlares.length, n = 2 * -this.positionScreen.x, i = 2 * -this.positionScreen.y;
                    for (e = 0; e < r; e++)
                        t = this.lensFlares[e],
                        t.x = this.positionScreen.x + n * t.distance,
                        t.y = this.positionScreen.y + i * t.distance,
                        t.wantedRotation = t.x * Math.PI * .25,
                        t.rotation += .25 * (t.wantedRotation - t.rotation)
                }
            }),
            dt.prototype = Object.create(Z.prototype),
            dt.prototype.constructor = dt,
            dt.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.map = e.map,
                this.rotation = e.rotation,
                this
            }
            ,
            pt.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: pt,
                isSprite: !0,
                raycast: function() {
                    var e = new u;
                    return function(t, r) {
                        e.setFromMatrixPosition(this.matrixWorld);
                        var n = t.ray.distanceSqToPoint(e)
                          , i = this.scale.x * this.scale.y / 4;
                        n > i || r.push({
                            distance: Math.sqrt(n),
                            point: this.position,
                            face: null,
                            object: this
                        })
                    }
                }(),
                clone: function() {
                    return new this.constructor(this.material).copy(this)
                }
            }),
            mt.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: mt,
                copy: function(e) {
                    ue.prototype.copy.call(this, e, !1);
                    for (var t = e.levels, r = 0, n = t.length; r < n; r++) {
                        var i = t[r];
                        this.addLevel(i.object.clone(), i.distance)
                    }
                    return this
                },
                addLevel: function(e, t) {
                    void 0 === t && (t = 0),
                    t = Math.abs(t);
                    for (var r = this.levels, n = 0; n < r.length && !(t < r[n].distance); n++)
                        ;
                    r.splice(n, 0, {
                        distance: t,
                        object: e
                    }),
                    this.add(e)
                },
                getObjectForDistance: function(e) {
                    for (var t = this.levels, r = 1, n = t.length; r < n && !(e < t[r].distance); r++)
                        ;
                    return t[r - 1].object
                },
                raycast: function() {
                    var e = new u;
                    return function(t, r) {
                        e.setFromMatrixPosition(this.matrixWorld);
                        var n = t.ray.origin.distanceTo(e);
                        this.getObjectForDistance(n).raycast(t, r)
                    }
                }(),
                update: function() {
                    var e = new u
                      , t = new u;
                    return function(r) {
                        var n = this.levels;
                        if (n.length > 1) {
                            e.setFromMatrixPosition(r.matrixWorld),
                            t.setFromMatrixPosition(this.matrixWorld);
                            var i = e.distanceTo(t);
                            n[0].object.visible = !0;
                            for (var a = 1, o = n.length; a < o && i >= n[a].distance; a++)
                                n[a - 1].object.visible = !1,
                                n[a].object.visible = !0;
                            for (; a < o; a++)
                                n[a].object.visible = !1
                        }
                    }
                }(),
                toJSON: function(e) {
                    var t = ue.prototype.toJSON.call(this, e);
                    t.object.levels = [];
                    for (var r = this.levels, n = 0, i = r.length; n < i; n++) {
                        var a = r[n];
                        t.object.levels.push({
                            object: a.object.uuid,
                            distance: a.distance
                        })
                    }
                    return t
                }
            }),
            Object.assign(gt.prototype, {
                calculateInverses: function() {
                    this.boneInverses = [];
                    for (var e = 0, t = this.bones.length; e < t; e++) {
                        var r = new l;
                        this.bones[e] && r.getInverse(this.bones[e].matrixWorld),
                        this.boneInverses.push(r)
                    }
                },
                pose: function() {
                    for (var e, t = 0, r = this.bones.length; t < r; t++)
                        e = this.bones[t],
                        e && e.matrixWorld.getInverse(this.boneInverses[t]);
                    for (var t = 0, r = this.bones.length; t < r; t++)
                        e = this.bones[t],
                        e && (e.parent && e.parent.isBone ? (e.matrix.getInverse(e.parent.matrixWorld),
                        e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld),
                        e.matrix.decompose(e.position, e.quaternion, e.scale))
                },
                update: function() {
                    var e = new l;
                    return function() {
                        for (var t = 0, r = this.bones.length; t < r; t++) {
                            var n = this.bones[t] ? this.bones[t].matrixWorld : this.identityMatrix;
                            e.multiplyMatrices(n, this.boneInverses[t]),
                            e.toArray(this.boneMatrices, 16 * t)
                        }
                        this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
                    }
                }(),
                clone: function() {
                    return new gt(this.bones,this.boneInverses,this.useVertexTexture)
                }
            }),
            vt.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: vt,
                isBone: !0
            }),
            yt.prototype = Object.assign(Object.create(Se.prototype), {
                constructor: yt,
                isSkinnedMesh: !0,
                bind: function(e, t) {
                    this.skeleton = e,
                    void 0 === t && (this.updateMatrixWorld(!0),
                    this.skeleton.calculateInverses(),
                    t = this.matrixWorld),
                    this.bindMatrix.copy(t),
                    this.bindMatrixInverse.getInverse(t)
                },
                pose: function() {
                    this.skeleton.pose()
                },
                normalizeSkinWeights: function() {
                    if (this.geometry && this.geometry.isGeometry)
                        for (var e = 0; e < this.geometry.skinWeights.length; e++) {
                            var t = this.geometry.skinWeights[e]
                              , r = 1 / t.lengthManhattan();
                            r !== 1 / 0 ? t.multiplyScalar(r) : t.set(1, 0, 0, 0)
                        }
                    else if (this.geometry && this.geometry.isBufferGeometry)
                        for (var n = new i, a = this.geometry.attributes.skinWeight, e = 0; e < a.count; e++) {
                            n.x = a.getX(e),
                            n.y = a.getY(e),
                            n.z = a.getZ(e),
                            n.w = a.getW(e);
                            var r = 1 / n.lengthManhattan();
                            r !== 1 / 0 ? n.multiplyScalar(r) : n.set(1, 0, 0, 0),
                            a.setXYZW(e, n.x, n.y, n.z, n.w)
                        }
                },
                updateMatrixWorld: function(e) {
                    Se.prototype.updateMatrixWorld.call(this, !0),
                    "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unrecognized bindMode: " + this.bindMode)
                },
                clone: function() {
                    return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)
                }
            }),
            Mt.prototype = Object.create(Z.prototype),
            Mt.prototype.constructor = Mt,
            Mt.prototype.isLineBasicMaterial = !0,
            Mt.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.linewidth = e.linewidth,
                this.linecap = e.linecap,
                this.linejoin = e.linejoin,
                this
            }
            ,
            wt.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: wt,
                isLine: !0,
                raycast: function() {
                    var e = new l
                      , t = new ae
                      , r = new ee;
                    return function(n, i) {
                        var a = n.linePrecision
                          , o = a * a
                          , s = this.geometry
                          , l = this.matrixWorld;
                        if (null === s.boundingSphere && s.computeBoundingSphere(),
                        r.copy(s.boundingSphere),
                        r.applyMatrix4(l),
                        n.ray.intersectsSphere(r) !== !1) {
                            e.getInverse(l),
                            t.copy(n.ray).applyMatrix4(e);
                            var c = new u
                              , h = new u
                              , f = new u
                              , d = new u
                              , p = this && this.isLineSegments ? 2 : 1;
                            if (s.isBufferGeometry) {
                                var m = s.index
                                  , g = s.attributes
                                  , v = g.position.array;
                                if (null !== m)
                                    for (var y = m.array, M = 0, w = y.length - 1; M < w; M += p) {
                                        var x = y[M]
                                          , A = y[M + 1];
                                        c.fromArray(v, 3 * x),
                                        h.fromArray(v, 3 * A);
                                        var b = t.distanceSqToSegment(c, h, d, f);
                                        if (!(b > o)) {
                                            d.applyMatrix4(this.matrixWorld);
                                            var T = n.ray.origin.distanceTo(d);
                                            T < n.near || T > n.far || i.push({
                                                distance: T,
                                                point: f.clone().applyMatrix4(this.matrixWorld),
                                                index: M,
                                                face: null,
                                                faceIndex: null,
                                                object: this
                                            })
                                        }
                                    }
                                else
                                    for (var M = 0, w = v.length / 3 - 1; M < w; M += p) {
                                        c.fromArray(v, 3 * M),
                                        h.fromArray(v, 3 * M + 3);
                                        var b = t.distanceSqToSegment(c, h, d, f);
                                        if (!(b > o)) {
                                            d.applyMatrix4(this.matrixWorld);
                                            var T = n.ray.origin.distanceTo(d);
                                            T < n.near || T > n.far || i.push({
                                                distance: T,
                                                point: f.clone().applyMatrix4(this.matrixWorld),
                                                index: M,
                                                face: null,
                                                faceIndex: null,
                                                object: this
                                            })
                                        }
                                    }
                            } else if (s.isGeometry)
                                for (var _ = s.vertices, E = _.length, M = 0; M < E - 1; M += p) {
                                    var b = t.distanceSqToSegment(_[M], _[M + 1], d, f);
                                    if (!(b > o)) {
                                        d.applyMatrix4(this.matrixWorld);
                                        var T = n.ray.origin.distanceTo(d);
                                        T < n.near || T > n.far || i.push({
                                            distance: T,
                                            point: f.clone().applyMatrix4(this.matrixWorld),
                                            index: M,
                                            face: null,
                                            faceIndex: null,
                                            object: this
                                        })
                                    }
                                }
                        }
                    }
                }(),
                clone: function() {
                    return new this.constructor(this.geometry,this.material).copy(this)
                }
            }),
            xt.prototype = Object.assign(Object.create(wt.prototype), {
                constructor: xt,
                isLineSegments: !0
            }),
            At.prototype = Object.create(Z.prototype),
            At.prototype.constructor = At,
            At.prototype.isPointsMaterial = !0,
            At.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.map = e.map,
                this.size = e.size,
                this.sizeAttenuation = e.sizeAttenuation,
                this
            }
            ,
            bt.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: bt,
                isPoints: !0,
                raycast: function() {
                    var e = new l
                      , t = new ae
                      , r = new ee;
                    return function(n, i) {
                        function a(e, r) {
                            var a = t.distanceSqToPoint(e);
                            if (a < f) {
                                var s = t.closestPointToPoint(e);
                                s.applyMatrix4(l);
                                var u = n.ray.origin.distanceTo(s);
                                if (u < n.near || u > n.far)
                                    return;
                                i.push({
                                    distance: u,
                                    distanceToRay: Math.sqrt(a),
                                    point: s.clone(),
                                    index: r,
                                    face: null,
                                    object: o
                                })
                            }
                        }
                        var o = this
                          , s = this.geometry
                          , l = this.matrixWorld
                          , c = n.params.Points.threshold;
                        if (null === s.boundingSphere && s.computeBoundingSphere(),
                        r.copy(s.boundingSphere),
                        r.applyMatrix4(l),
                        n.ray.intersectsSphere(r) !== !1) {
                            e.getInverse(l),
                            t.copy(n.ray).applyMatrix4(e);
                            var h = c / ((this.scale.x + this.scale.y + this.scale.z) / 3)
                              , f = h * h
                              , d = new u;
                            if (s.isBufferGeometry) {
                                var p = s.index
                                  , m = s.attributes
                                  , g = m.position.array;
                                if (null !== p)
                                    for (var v = p.array, y = 0, M = v.length; y < M; y++) {
                                        var w = v[y];
                                        d.fromArray(g, 3 * w),
                                        a(d, w)
                                    }
                                else
                                    for (var y = 0, x = g.length / 3; y < x; y++)
                                        d.fromArray(g, 3 * y),
                                        a(d, y)
                            } else
                                for (var A = s.vertices, y = 0, x = A.length; y < x; y++)
                                    a(A[y], y)
                        }
                    }
                }(),
                clone: function() {
                    return new this.constructor(this.geometry,this.material).copy(this)
                }
            }),
            Tt.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: Tt
            }),
            _t.prototype = Object.create(n.prototype),
            _t.prototype.constructor = _t,
            Et.prototype = Object.create(n.prototype),
            Et.prototype.constructor = Et,
            Et.prototype.isCompressedTexture = !0,
            St.prototype = Object.create(n.prototype),
            St.prototype.constructor = St,
            Dt.prototype = Object.create(n.prototype),
            Dt.prototype.constructor = Dt,
            Dt.prototype.isDepthTexture = !0,
            Nt.prototype = Object.create(Ee.prototype),
            Nt.prototype.constructor = Nt,
            It.prototype = Object.create(Ee.prototype),
            It.prototype.constructor = It,
            Lt.prototype = Object.create(_e.prototype),
            Lt.prototype.constructor = Lt,
            Ct.prototype = Object.create(Ee.prototype),
            Ct.prototype.constructor = Ct,
            Ot.prototype = Object.create(Ct.prototype),
            Ot.prototype.constructor = Ot,
            jt.prototype = Object.create(_e.prototype),
            jt.prototype.constructor = jt,
            Rt.prototype = Object.create(Ct.prototype),
            Rt.prototype.constructor = Rt,
            Pt.prototype = Object.create(_e.prototype),
            Pt.prototype.constructor = Pt,
            zt.prototype = Object.create(Ct.prototype),
            zt.prototype.constructor = zt,
            Bt.prototype = Object.create(_e.prototype),
            Bt.prototype.constructor = Bt,
            Ut.prototype = Object.create(Ct.prototype),
            Ut.prototype.constructor = Ut,
            Vt.prototype = Object.create(_e.prototype),
            Vt.prototype.constructor = Vt,
            kt.prototype = Object.create(_e.prototype),
            kt.prototype.constructor = kt,
            Ft.prototype = Object.create(Ee.prototype),
            Ft.prototype.constructor = Ft,
            Gt.prototype = Object.create(_e.prototype),
            Gt.prototype.constructor = Gt,
            Yt.prototype = Object.create(Ee.prototype),
            Yt.prototype.constructor = Yt,
            Qt.prototype = Object.create(_e.prototype),
            Qt.prototype.constructor = Qt,
            Ht.prototype = Object.create(Ee.prototype),
            Ht.prototype.constructor = Ht,
            Wt.prototype = Object.create(_e.prototype),
            Wt.prototype.constructor = Wt;
            var Bl = {
                area: function(e) {
                    for (var t = e.length, r = 0, n = t - 1, i = 0; i < t; n = i++)
                        r += e[n].x * e[i].y - e[i].x * e[n].y;
                    return .5 * r
                },
                triangulate: function() {
                    function e(e, t, r, n, i, a) {
                        var o, s, u, l, c, h, f, d, p;
                        if (s = e[a[t]].x,
                        u = e[a[t]].y,
                        l = e[a[r]].x,
                        c = e[a[r]].y,
                        h = e[a[n]].x,
                        f = e[a[n]].y,
                        (l - s) * (f - u) - (c - u) * (h - s) <= 0)
                            return !1;
                        var m, g, v, y, M, w, x, A, b, T, _, E, S, D, N;
                        for (m = h - l,
                        g = f - c,
                        v = s - h,
                        y = u - f,
                        M = l - s,
                        w = c - u,
                        o = 0; o < i; o++)
                            if (d = e[a[o]].x,
                            p = e[a[o]].y,
                            !(d === s && p === u || d === l && p === c || d === h && p === f) && (x = d - s,
                            A = p - u,
                            b = d - l,
                            T = p - c,
                            _ = d - h,
                            E = p - f,
                            N = m * T - g * b,
                            S = M * A - w * x,
                            D = v * E - y * _,
                            N >= -Number.EPSILON && D >= -Number.EPSILON && S >= -Number.EPSILON))
                                return !1;
                        return !0
                    }
                    return function(t, r) {
                        var n = t.length;
                        if (n < 3)
                            return null;
                        var i, a, o, s = [], u = [], l = [];
                        if (Bl.area(t) > 0)
                            for (a = 0; a < n; a++)
                                u[a] = a;
                        else
                            for (a = 0; a < n; a++)
                                u[a] = n - 1 - a;
                        var c = n
                          , h = 2 * c;
                        for (a = c - 1; c > 2; ) {
                            if (h-- <= 0)
                                return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),
                                r ? l : s;
                            if (i = a,
                            c <= i && (i = 0),
                            a = i + 1,
                            c <= a && (a = 0),
                            o = a + 1,
                            c <= o && (o = 0),
                            e(t, i, a, o, c, u)) {
                                var f, d, p, m, g;
                                for (f = u[i],
                                d = u[a],
                                p = u[o],
                                s.push([t[f], t[d], t[p]]),
                                l.push([u[i], u[a], u[o]]),
                                m = a,
                                g = a + 1; g < c; m++,
                                g++)
                                    u[m] = u[g];
                                c--,
                                h = 2 * c
                            }
                        }
                        return r ? l : s
                    }
                }(),
                triangulateShape: function(e, t) {
                    function r(e) {
                        var t = e.length;
                        t > 2 && e[t - 1].equals(e[0]) && e.pop()
                    }
                    function n(e, t, r) {
                        return e.x !== t.x ? e.x < t.x ? e.x <= r.x && r.x <= t.x : t.x <= r.x && r.x <= e.x : e.y < t.y ? e.y <= r.y && r.y <= t.y : t.y <= r.y && r.y <= e.y
                    }
                    function i(e, t, r, i, a) {
                        var o = t.x - e.x
                          , s = t.y - e.y
                          , u = i.x - r.x
                          , l = i.y - r.y
                          , c = e.x - r.x
                          , h = e.y - r.y
                          , f = s * u - o * l
                          , d = s * c - o * h;
                        if (Math.abs(f) > Number.EPSILON) {
                            var p;
                            if (f > 0) {
                                if (d < 0 || d > f)
                                    return [];
                                if (p = l * c - u * h,
                                p < 0 || p > f)
                                    return []
                            } else {
                                if (d > 0 || d < f)
                                    return [];
                                if (p = l * c - u * h,
                                p > 0 || p < f)
                                    return []
                            }
                            if (0 === p)
                                return !a || 0 !== d && d !== f ? [e] : [];
                            if (p === f)
                                return !a || 0 !== d && d !== f ? [t] : [];
                            if (0 === d)
                                return [r];
                            if (d === f)
                                return [i];
                            var m = p / f;
                            return [{
                                x: e.x + m * o,
                                y: e.y + m * s
                            }]
                        }
                        if (0 !== d || l * c !== u * h)
                            return [];
                        var g = 0 === o && 0 === s
                          , v = 0 === u && 0 === l;
                        if (g && v)
                            return e.x !== r.x || e.y !== r.y ? [] : [e];
                        if (g)
                            return n(r, i, e) ? [e] : [];
                        if (v)
                            return n(e, t, r) ? [r] : [];
                        var y, M, w, x, A, b, T, _;
                        return 0 !== o ? (e.x < t.x ? (y = e,
                        w = e.x,
                        M = t,
                        x = t.x) : (y = t,
                        w = t.x,
                        M = e,
                        x = e.x),
                        r.x < i.x ? (A = r,
                        T = r.x,
                        b = i,
                        _ = i.x) : (A = i,
                        T = i.x,
                        b = r,
                        _ = r.x)) : (e.y < t.y ? (y = e,
                        w = e.y,
                        M = t,
                        x = t.y) : (y = t,
                        w = t.y,
                        M = e,
                        x = e.y),
                        r.y < i.y ? (A = r,
                        T = r.y,
                        b = i,
                        _ = i.y) : (A = i,
                        T = i.y,
                        b = r,
                        _ = r.y)),
                        w <= T ? x < T ? [] : x === T ? a ? [] : [A] : x <= _ ? [A, M] : [A, b] : w > _ ? [] : w === _ ? a ? [] : [y] : x <= _ ? [y, M] : [y, b]
                    }
                    function a(e, t, r, n) {
                        var i = t.x - e.x
                          , a = t.y - e.y
                          , o = r.x - e.x
                          , s = r.y - e.y
                          , u = n.x - e.x
                          , l = n.y - e.y
                          , c = i * s - a * o
                          , h = i * l - a * u;
                        if (Math.abs(c) > Number.EPSILON) {
                            var f = u * s - l * o;
                            return c > 0 ? h >= 0 && f >= 0 : h >= 0 || f >= 0
                        }
                        return h > 0
                    }
                    function o(e, t) {
                        function r(e, t) {
                            var r = y.length - 1
                              , n = e - 1;
                            n < 0 && (n = r);
                            var i = e + 1;
                            i > r && (i = 0);
                            var o = a(y[e], y[n], y[i], s[t]);
                            if (!o)
                                return !1;
                            var u = s.length - 1
                              , l = t - 1;
                            l < 0 && (l = u);
                            var c = t + 1;
                            return c > u && (c = 0),
                            o = a(s[t], s[l], s[c], y[e]),
                            !!o
                        }
                        function n(e, t) {
                            var r, n, a;
                            for (r = 0; r < y.length; r++)
                                if (n = r + 1,
                                n %= y.length,
                                a = i(e, t, y[r], y[n], !0),
                                a.length > 0)
                                    return !0;
                            return !1
                        }
                        function o(e, r) {
                            var n, a, o, s, u;
                            for (n = 0; n < M.length; n++)
                                for (a = t[M[n]],
                                o = 0; o < a.length; o++)
                                    if (s = o + 1,
                                    s %= a.length,
                                    u = i(e, r, a[o], a[s], !0),
                                    u.length > 0)
                                        return !0;
                            return !1
                        }
                        for (var s, u, l, c, h, f, d, p, m, g, v, y = e.concat(), M = [], w = [], x = 0, A = t.length; x < A; x++)
                            M.push(x);
                        for (var b = 0, T = 2 * M.length; M.length > 0; ) {
                            if (T--,
                            T < 0) {
                                console.log("Infinite Loop! Holes left:" + M.length + ", Probably Hole outside Shape!");
                                break
                            }
                            for (l = b; l < y.length; l++) {
                                c = y[l],
                                u = -1;
                                for (var x = 0; x < M.length; x++)
                                    if (f = M[x],
                                    d = c.x + ":" + c.y + ":" + f,
                                    void 0 === w[d]) {
                                        s = t[f];
                                        for (var _ = 0; _ < s.length; _++)
                                            if (h = s[_],
                                            r(l, _) && !n(c, h) && !o(c, h)) {
                                                u = _,
                                                M.splice(x, 1),
                                                p = y.slice(0, l + 1),
                                                m = y.slice(l),
                                                g = s.slice(u),
                                                v = s.slice(0, u + 1),
                                                y = p.concat(g).concat(v).concat(m),
                                                b = l;
                                                break
                                            }
                                        if (u >= 0)
                                            break;
                                        w[d] = !0
                                    }
                                if (u >= 0)
                                    break
                            }
                        }
                        return y
                    }
                    r(e),
                    t.forEach(r);
                    for (var s, u, l, c, h, f, d = {}, p = e.concat(), m = 0, g = t.length; m < g; m++)
                        Array.prototype.push.apply(p, t[m]);
                    for (s = 0,
                    u = p.length; s < u; s++)
                        h = p[s].x + ":" + p[s].y,
                        void 0 !== d[h] && console.warn("THREE.ShapeUtils: Duplicate point", h, s),
                        d[h] = s;
                    var v = o(e, t)
                      , y = Bl.triangulate(v, !1);
                    for (s = 0,
                    u = y.length; s < u; s++)
                        for (c = y[s],
                        l = 0; l < 3; l++)
                            h = c[l].x + ":" + c[l].y,
                            f = d[h],
                            void 0 !== f && (c[l] = f);
                    return y.concat()
                },
                isClockWise: function(e) {
                    return Bl.area(e) < 0
                }
            };
            Xt.prototype = Object.create(_e.prototype),
            Xt.prototype.constructor = Xt,
            Xt.prototype.addShapeList = function(e, t) {
                for (var r = e.length, n = 0; n < r; n++) {
                    var i = e[n];
                    this.addShape(i, t)
                }
            }
            ,
            Xt.prototype.addShape = function(e, t) {
                function n(e, t, r) {
                    return t || console.error("THREE.ExtrudeGeometry: vec does not exist"),
                    t.clone().multiplyScalar(r).add(e)
                }
                function i(e, t, n) {
                    var i, a, o = 1, s = e.x - t.x, u = e.y - t.y, l = n.x - e.x, c = n.y - e.y, h = s * s + u * u, f = s * c - u * l;
                    if (Math.abs(f) > Number.EPSILON) {
                        var d = Math.sqrt(h)
                          , p = Math.sqrt(l * l + c * c)
                          , m = t.x - u / d
                          , g = t.y + s / d
                          , v = n.x - c / p
                          , y = n.y + l / p
                          , M = ((v - m) * c - (y - g) * l) / (s * c - u * l);
                        i = m + s * M - e.x,
                        a = g + u * M - e.y;
                        var w = i * i + a * a;
                        if (w <= 2)
                            return new r(i,a);
                        o = Math.sqrt(w / 2)
                    } else {
                        var x = !1;
                        s > Number.EPSILON ? l > Number.EPSILON && (x = !0) : s < -Number.EPSILON ? l < -Number.EPSILON && (x = !0) : Math.sign(u) === Math.sign(c) && (x = !0),
                        x ? (i = -u,
                        a = s,
                        o = Math.sqrt(h)) : (i = s,
                        a = u,
                        o = Math.sqrt(h / 2))
                    }
                    return new r(i / o,a / o)
                }
                function a() {
                    if (x) {
                        var e = 0
                          , t = Y * e;
                        for (W = 0; W < Q; W++)
                            G = P[W],
                            c(G[2] + t, G[1] + t, G[0] + t);
                        for (e = b + 2 * w,
                        t = Y * e,
                        W = 0; W < Q; W++)
                            G = P[W],
                            c(G[0] + t, G[1] + t, G[2] + t)
                    } else {
                        for (W = 0; W < Q; W++)
                            G = P[W],
                            c(G[2], G[1], G[0]);
                        for (W = 0; W < Q; W++)
                            G = P[W],
                            c(G[0] + Y * b, G[1] + Y * b, G[2] + Y * b)
                    }
                }
                function o() {
                    var e = 0;
                    for (s(z, e),
                    e += z.length,
                    D = 0,
                    N = j.length; D < N; D++)
                        S = j[D],
                        s(S, e),
                        e += S.length
                }
                function s(e, t) {
                    var r, n;
                    for (W = e.length; --W >= 0; ) {
                        r = W,
                        n = W - 1,
                        n < 0 && (n = e.length - 1);
                        var i = 0
                          , a = b + 2 * w;
                        for (i = 0; i < a; i++) {
                            var o = Y * i
                              , s = Y * (i + 1)
                              , u = t + r + o
                              , l = t + n + o
                              , c = t + n + s
                              , f = t + r + s;
                            h(u, l, c, f, e, i, a, r, n)
                        }
                    }
                }
                function l(e, t, r) {
                    I.vertices.push(new u(e,t,r))
                }
                function c(e, t, r) {
                    e += L,
                    t += L,
                    r += L,
                    I.faces.push(new he(e,t,r,null,null,0));
                    var n = E.generateTopUV(I, e, t, r);
                    I.faceVertexUvs[0].push(n)
                }
                function h(e, t, r, n, i, a, o, s, u) {
                    e += L,
                    t += L,
                    r += L,
                    n += L,
                    I.faces.push(new he(e,t,n,null,null,1)),
                    I.faces.push(new he(t,r,n,null,null,1));
                    var l = E.generateSideWallUV(I, e, t, r, n);
                    I.faceVertexUvs[0].push([l[0], l[1], l[3]]),
                    I.faceVertexUvs[0].push([l[1], l[2], l[3]])
                }
                var f, d, p, m, g, v = void 0 !== t.amount ? t.amount : 100, y = void 0 !== t.bevelThickness ? t.bevelThickness : 6, M = void 0 !== t.bevelSize ? t.bevelSize : y - 2, w = void 0 !== t.bevelSegments ? t.bevelSegments : 3, x = void 0 === t.bevelEnabled || t.bevelEnabled, A = void 0 !== t.curveSegments ? t.curveSegments : 12, b = void 0 !== t.steps ? t.steps : 1, T = t.extrudePath, _ = !1, E = void 0 !== t.UVGenerator ? t.UVGenerator : Xt.WorldUVGenerator;
                T && (f = T.getSpacedPoints(b),
                _ = !0,
                x = !1,
                d = void 0 !== t.frames ? t.frames : T.computeFrenetFrames(b, !1),
                p = new u,
                m = new u,
                g = new u),
                x || (w = 0,
                y = 0,
                M = 0);
                var S, D, N, I = this, L = this.vertices.length, C = e.extractPoints(A), O = C.shape, j = C.holes, R = !Bl.isClockWise(O);
                if (R) {
                    for (O = O.reverse(),
                    D = 0,
                    N = j.length; D < N; D++)
                        S = j[D],
                        Bl.isClockWise(S) && (j[D] = S.reverse());
                    R = !1
                }
                var P = Bl.triangulateShape(O, j)
                  , z = O;
                for (D = 0,
                N = j.length; D < N; D++)
                    S = j[D],
                    O = O.concat(S);
                for (var B, U, V, k, F, G, Y = O.length, Q = P.length, H = [], W = 0, X = z.length, q = X - 1, Z = W + 1; W < X; W++,
                q++,
                Z++)
                    q === X && (q = 0),
                    Z === X && (Z = 0),
                    H[W] = i(z[W], z[q], z[Z]);
                var J, K = [], $ = H.concat();
                for (D = 0,
                N = j.length; D < N; D++) {
                    for (S = j[D],
                    J = [],
                    W = 0,
                    X = S.length,
                    q = X - 1,
                    Z = W + 1; W < X; W++,
                    q++,
                    Z++)
                        q === X && (q = 0),
                        Z === X && (Z = 0),
                        J[W] = i(S[W], S[q], S[Z]);
                    K.push(J),
                    $ = $.concat(J)
                }
                for (B = 0; B < w; B++) {
                    for (V = B / w,
                    k = y * Math.cos(V * Math.PI / 2),
                    U = M * Math.sin(V * Math.PI / 2),
                    W = 0,
                    X = z.length; W < X; W++)
                        F = n(z[W], H[W], U),
                        l(F.x, F.y, -k);
                    for (D = 0,
                    N = j.length; D < N; D++)
                        for (S = j[D],
                        J = K[D],
                        W = 0,
                        X = S.length; W < X; W++)
                            F = n(S[W], J[W], U),
                            l(F.x, F.y, -k)
                }
                for (U = M,
                W = 0; W < Y; W++)
                    F = x ? n(O[W], $[W], U) : O[W],
                    _ ? (m.copy(d.normals[0]).multiplyScalar(F.x),
                    p.copy(d.binormals[0]).multiplyScalar(F.y),
                    g.copy(f[0]).add(m).add(p),
                    l(g.x, g.y, g.z)) : l(F.x, F.y, 0);
                var ee;
                for (ee = 1; ee <= b; ee++)
                    for (W = 0; W < Y; W++)
                        F = x ? n(O[W], $[W], U) : O[W],
                        _ ? (m.copy(d.normals[ee]).multiplyScalar(F.x),
                        p.copy(d.binormals[ee]).multiplyScalar(F.y),
                        g.copy(f[ee]).add(m).add(p),
                        l(g.x, g.y, g.z)) : l(F.x, F.y, v / b * ee);
                for (B = w - 1; B >= 0; B--) {
                    for (V = B / w,
                    k = y * Math.cos(V * Math.PI / 2),
                    U = M * Math.sin(V * Math.PI / 2),
                    W = 0,
                    X = z.length; W < X; W++)
                        F = n(z[W], H[W], U),
                        l(F.x, F.y, v + k);
                    for (D = 0,
                    N = j.length; D < N; D++)
                        for (S = j[D],
                        J = K[D],
                        W = 0,
                        X = S.length; W < X; W++)
                            F = n(S[W], J[W], U),
                            _ ? l(F.x, F.y + f[b - 1].y, f[b - 1].x + k) : l(F.x, F.y, v + k)
                }
                a(),
                o()
            }
            ,
            Xt.WorldUVGenerator = {
                generateTopUV: function(e, t, n, i) {
                    var a = e.vertices
                      , o = a[t]
                      , s = a[n]
                      , u = a[i];
                    return [new r(o.x,o.y), new r(s.x,s.y), new r(u.x,u.y)]
                },
                generateSideWallUV: function(e, t, n, i, a) {
                    var o = e.vertices
                      , s = o[t]
                      , u = o[n]
                      , l = o[i]
                      , c = o[a];
                    return Math.abs(s.y - u.y) < .01 ? [new r(s.x,1 - s.z), new r(u.x,1 - u.z), new r(l.x,1 - l.z), new r(c.x,1 - c.z)] : [new r(s.y,1 - s.z), new r(u.y,1 - u.z), new r(l.y,1 - l.z), new r(c.y,1 - c.z)]
                }
            },
            qt.prototype = Object.create(Xt.prototype),
            qt.prototype.constructor = qt,
            Zt.prototype = Object.create(Ee.prototype),
            Zt.prototype.constructor = Zt,
            Jt.prototype = Object.create(_e.prototype),
            Jt.prototype.constructor = Jt,
            Kt.prototype = Object.create(Ee.prototype),
            Kt.prototype.constructor = Kt,
            $t.prototype = Object.create(_e.prototype),
            $t.prototype.constructor = $t,
            er.prototype = Object.create(_e.prototype),
            er.prototype.constructor = er,
            tr.prototype = Object.create(Ee.prototype),
            tr.prototype.constructor = tr,
            rr.prototype = Object.create(_e.prototype),
            rr.prototype.constructor = rr,
            nr.prototype = Object.create(Ee.prototype),
            nr.prototype.constructor = nr,
            ir.prototype = Object.create(_e.prototype),
            ir.prototype.constructor = ir,
            ar.prototype = Object.create(Ee.prototype),
            ar.prototype.constructor = ar,
            or.prototype = Object.create(Ee.prototype),
            or.prototype.constructor = or,
            sr.prototype = Object.create(_e.prototype),
            sr.prototype.constructor = sr,
            ur.prototype = Object.create(sr.prototype),
            ur.prototype.constructor = ur,
            lr.prototype = Object.create(or.prototype),
            lr.prototype.constructor = lr,
            cr.prototype = Object.create(Ee.prototype),
            cr.prototype.constructor = cr,
            hr.prototype = Object.create(_e.prototype),
            hr.prototype.constructor = hr,
            fr.prototype = Object.create(_e.prototype),
            fr.prototype.constructor = fr;
            var Ul = Object.freeze({
                WireframeGeometry: Nt,
                ParametricGeometry: Lt,
                ParametricBufferGeometry: It,
                TetrahedronGeometry: jt,
                TetrahedronBufferGeometry: Ot,
                OctahedronGeometry: Pt,
                OctahedronBufferGeometry: Rt,
                IcosahedronGeometry: Bt,
                IcosahedronBufferGeometry: zt,
                DodecahedronGeometry: Vt,
                DodecahedronBufferGeometry: Ut,
                PolyhedronGeometry: kt,
                PolyhedronBufferGeometry: Ct,
                TubeGeometry: Gt,
                TubeBufferGeometry: Ft,
                TorusKnotGeometry: Qt,
                TorusKnotBufferGeometry: Yt,
                TorusGeometry: Wt,
                TorusBufferGeometry: Ht,
                TextGeometry: qt,
                SphereBufferGeometry: Zt,
                SphereGeometry: Jt,
                RingGeometry: $t,
                RingBufferGeometry: Kt,
                PlaneBufferGeometry: Ne,
                PlaneGeometry: er,
                LatheGeometry: rr,
                LatheBufferGeometry: tr,
                ShapeGeometry: ir,
                ShapeBufferGeometry: nr,
                ExtrudeGeometry: Xt,
                EdgesGeometry: ar,
                ConeGeometry: ur,
                ConeBufferGeometry: lr,
                CylinderGeometry: sr,
                CylinderBufferGeometry: or,
                CircleBufferGeometry: cr,
                CircleGeometry: hr,
                BoxBufferGeometry: De,
                BoxGeometry: fr
            });
            dr.prototype = Object.create(J.prototype),
            dr.prototype.constructor = dr,
            dr.prototype.isShadowMaterial = !0,
            pr.prototype = Object.create(J.prototype),
            pr.prototype.constructor = pr,
            pr.prototype.isRawShaderMaterial = !0,
            mr.prototype = {
                constructor: mr,
                isMultiMaterial: !0,
                toJSON: function(e) {
                    for (var t = {
                        metadata: {
                            version: 4.2,
                            type: "material",
                            generator: "MaterialExporter"
                        },
                        uuid: this.uuid,
                        type: this.type,
                        materials: []
                    }, r = this.materials, n = 0, i = r.length; n < i; n++) {
                        var a = r[n].toJSON(e);
                        delete a.metadata,
                        t.materials.push(a)
                    }
                    return t.visible = this.visible,
                    t
                },
                clone: function() {
                    for (var e = new this.constructor, t = 0; t < this.materials.length; t++)
                        e.materials.push(this.materials[t].clone());
                    return e.visible = this.visible,
                    e
                }
            },
            gr.prototype = Object.create(Z.prototype),
            gr.prototype.constructor = gr,
            gr.prototype.isMeshStandardMaterial = !0,
            function() {
                var e = {
                    map: {
                        get: function() {
                            return this.mapSlot.texture
                        },
                        set: function(e) {
                            this.mapSlot.texture = e
                        }
                    },
                    lightMap: {
                        get: function() {
                            return this.lightMapSlot.texture
                        },
                        set: function(e) {
                            this.lightMapSlot.texture = e
                        }
                    },
                    lightMapIntensity: {
                        get: function() {
                            return this.lightMapSlot.texelScale
                        },
                        set: function(e) {
                            this.lightMapSlot.texelTransform = !0,
                            this.lightMapSlot.texelScale = e
                        }
                    },
                    aoMap: {
                        get: function() {
                            return this.aoMapSlot.texture
                        },
                        set: function(e) {
                            this.aoMapSlot.texture = e
                        }
                    },
                    emissiveMap: {
                        get: function() {
                            return this.emissiveMapSlot.texture
                        },
                        set: function(e) {
                            this.emissiveMapSlot.texture = e
                        }
                    },
                    bumpMap: {
                        get: function() {
                            return this.bumpMapSlot.texture
                        },
                        set: function(e) {
                            this.bumpMapSlot.texture = e
                        }
                    },
                    bumpScale: {
                        get: function() {
                            return this.bumpMapSlot.texelScale
                        },
                        set: function(e) {
                            this.bumpMapSlot.texelTransform = !0,
                            this.bumpMapSlot.texelScale = e
                        }
                    },
                    normalMap: {
                        get: function() {
                            return this.normalMapSlot.texture
                        },
                        set: function(e) {
                            this.normalMapSlot.texture = e
                        }
                    },
                    displacementMap: {
                        get: function() {
                            return this.displacementMapSlot.texture
                        },
                        set: function(e) {
                            this.displacementMapSlot.texture = e
                        }
                    },
                    displacementScale: {
                        get: function() {
                            return this.displacementMapSlot.texelScale
                        },
                        set: function(e) {
                            this.displacementMapSlot.texelTransform = !0,
                            this.displacementMapSlot.texelScale = e
                        }
                    },
                    displacementBias: {
                        get: function() {
                            return this.displacementMapSlot.texelOffset
                        },
                        set: function(e) {
                            this.displacementMapSlot.texelTransform = !0,
                            this.displacementMapSlot.texelOffset = e
                        }
                    },
                    roughnessMap: {
                        get: function() {
                            return this.roughnessMapSlot.texture
                        },
                        set: function(e) {
                            this.roughnessMapSlot.texture = e
                        }
                    },
                    metalnessMap: {
                        get: function() {
                            return this.metalnessMapSlot.texture
                        },
                        set: function(e) {
                            this.metalnessMapSlot.texture = e
                        }
                    },
                    alphaMap: {
                        get: function() {
                            return this.alphaMapSlot.texture
                        },
                        set: function(e) {
                            this.alphaMapSlot.texture = e
                        }
                    }
                };
                for (var t in e)
                    Object.defineProperty(gr.prototype, t, e[t])
            }(),
            gr.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.defines = {
                    STANDARD: ""
                },
                this.color.copy(e.color),
                this.mapSlot.copy(e.mapSlot),
                this.reflectivity = e.reflectivity,
                this.roughness = e.roughness,
                this.roughnessMapSlot.copy(e.roughnessMapSlot),
                this.metalness = e.metalness,
                this.metalnessMapSlot.copy(e.metalnessMapSlot),
                this.lightMapSlot.copy(e.lightMapSlot),
                this.aoMapIntensity = e.aoMapIntensity,
                this.aoMapSlot.copy(e.aoMapSlot),
                this.emissive.copy(e.emissive),
                this.emissiveIntensity = e.emissiveIntensity,
                this.emissiveMapSlot.copy(e.emissiveMapSlot),
                this.bumpMapSlot.copy(e.bumpMapSlot),
                this.normalScale.copy(e.normalScale),
                this.normalMapSlot.copy(e.normalMapSlot),
                this.displacementMapSlot.copy(e.displacementMapSlot),
                this.alphaMapSlot.copy(e.alphaMapSlot),
                this.envMap = e.envMap,
                this.envMapIntensity = e.envMapIntensity,
                this.refractionRatio = e.refractionRatio,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.wireframeLinecap = e.wireframeLinecap,
                this.wireframeLinejoin = e.wireframeLinejoin,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this.morphNormals = e.morphNormals,
                this
            }
            ,
            vr.prototype = Object.create(gr.prototype),
            vr.prototype.constructor = vr,
            vr.prototype.isMeshPhysicalMaterial = !0,
            function() {
                var e = {
                    falloffMap: {
                        get: function() {
                            return this.falloffMapSlot.texture
                        },
                        set: function(e) {
                            this.falloffMapSlot.texture = e
                        }
                    },
                    falloffAlphaMap: {
                        get: function() {
                            return this.falloffAlphaMapSlot.texture
                        },
                        set: function(e) {
                            this.falloffAlphaMapSlot.texture = e
                        }
                    }
                };
                for (var t in e)
                    Object.defineProperty(vr.prototype, t, e[t])
            }(),
            vr.prototype.copy = function(e) {
                return gr.prototype.copy.call(this, e),
                this.defines = {
                    PHYSICAL: ""
                },
                this.reflectivity = e.reflectivity,
                this.falloff = e.falloff,
                this.falloffColor.copy(e.falloffColor),
                this.falloffMapSlot.copy(e.falloffMapSlot),
                this.falloffOpacity = e.falloffOpacity,
                this.falloffAlphaMapSlot.copy(e.falloffAlphaMapSlot),
                this.clearCoat = e.clearCoat,
                this.clearCoatRoughness = e.clearCoatRoughness,
                this
            }
            ,
            yr.prototype = Object.create(Z.prototype),
            yr.prototype.constructor = yr,
            yr.prototype.isMeshPhongMaterial = !0,
            yr.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.specular.copy(e.specular),
                this.shininess = e.shininess,
                this.map = e.map,
                this.lightMap = e.lightMap,
                this.lightMapIntensity = e.lightMapIntensity,
                this.aoMap = e.aoMap,
                this.aoMapIntensity = e.aoMapIntensity,
                this.emissive.copy(e.emissive),
                this.emissiveMap = e.emissiveMap,
                this.emissiveIntensity = e.emissiveIntensity,
                this.bumpMap = e.bumpMap,
                this.bumpScale = e.bumpScale,
                this.normalMap = e.normalMap,
                this.normalScale.copy(e.normalScale),
                this.displacementMap = e.displacementMap,
                this.displacementScale = e.displacementScale,
                this.displacementBias = e.displacementBias,
                this.specularMap = e.specularMap,
                this.alphaMap = e.alphaMap,
                this.envMap = e.envMap,
                this.combine = e.combine,
                this.reflectivity = e.reflectivity,
                this.refractionRatio = e.refractionRatio,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.wireframeLinecap = e.wireframeLinecap,
                this.wireframeLinejoin = e.wireframeLinejoin,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this.morphNormals = e.morphNormals,
                this
            }
            ,
            Mr.prototype = Object.create(yr.prototype),
            Mr.prototype.constructor = Mr,
            Mr.prototype.isMeshToonMaterial = !0,
            Mr.prototype.copy = function(e) {
                return yr.prototype.copy.call(this, e),
                this.gradientMap = e.gradientMap,
                this
            }
            ,
            wr.prototype = Object.create(Z.prototype),
            wr.prototype.constructor = wr,
            wr.prototype.isMeshNormalMaterial = !0,
            wr.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.bumpMap = e.bumpMap,
                this.bumpScale = e.bumpScale,
                this.normalMap = e.normalMap,
                this.normalScale.copy(e.normalScale),
                this.displacementMap = e.displacementMap,
                this.displacementScale = e.displacementScale,
                this.displacementBias = e.displacementBias,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.clearColor = e.clearColor,
                this.clearAlpha = e.clearAlpha,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this.morphNormals = e.morphNormals,
                this
            }
            ,
            xr.prototype = Object.create(Z.prototype),
            xr.prototype.constructor = xr,
            xr.prototype.isMeshLambertMaterial = !0,
            xr.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.map = e.map,
                this.lightMap = e.lightMap,
                this.lightMapIntensity = e.lightMapIntensity,
                this.aoMap = e.aoMap,
                this.aoMapIntensity = e.aoMapIntensity,
                this.emissive.copy(e.emissive),
                this.emissiveMap = e.emissiveMap,
                this.emissiveIntensity = e.emissiveIntensity,
                this.specularMap = e.specularMap,
                this.alphaMap = e.alphaMap,
                this.envMap = e.envMap,
                this.combine = e.combine,
                this.reflectivity = e.reflectivity,
                this.refractionRatio = e.refractionRatio,
                this.wireframe = e.wireframe,
                this.wireframeLinewidth = e.wireframeLinewidth,
                this.wireframeLinecap = e.wireframeLinecap,
                this.wireframeLinejoin = e.wireframeLinejoin,
                this.skinning = e.skinning,
                this.morphTargets = e.morphTargets,
                this.morphNormals = e.morphNormals,
                this
            }
            ,
            Ar.prototype = Object.create(Z.prototype),
            Ar.prototype.constructor = Ar,
            Ar.prototype.isMeshCubeMaterial = !0,
            Ar.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.envMap = e.envMap,
                this.envMapIntensity = e.envMapIntensity,
                this.roughness = e.roughness,
                this
            }
            ,
            br.prototype = Object.create(Z.prototype),
            br.prototype.constructor = br,
            br.prototype.isLineDashedMaterial = !0,
            br.prototype.copy = function(e) {
                return Z.prototype.copy.call(this, e),
                this.color.copy(e.color),
                this.linewidth = e.linewidth,
                this.scale = e.scale,
                this.dashSize = e.dashSize,
                this.gapSize = e.gapSize,
                this
            }
            ;
            var Vl = Object.freeze({
                ShadowMaterial: dr,
                SpriteMaterial: dt,
                RawShaderMaterial: pr,
                ShaderMaterial: J,
                PointsMaterial: At,
                MultiMaterial: mr,
                MeshPhysicalMaterial: vr,
                MeshStandardMaterial: gr,
                MeshPhongMaterial: yr,
                MeshToonMaterial: Mr,
                MeshNormalMaterial: wr,
                MeshLambertMaterial: xr,
                MeshDepthMaterial: K,
                MeshBasicMaterial: fe,
                MeshCubeMaterial: Ar,
                LineDashedMaterial: br,
                LineBasicMaterial: Mt,
                MaterialMap: Ie,
                Material: Z
            })
              , kl = {
                enabled: !1,
                files: {},
                add: function(e, t) {
                    this.enabled !== !1 && (this.files[e] = t)
                },
                get: function(e) {
                    if (this.enabled !== !1)
                        return this.files[e]
                },
                remove: function(e) {
                    delete this.files[e]
                },
                clear: function() {
                    this.files = {}
                }
            }
              , Fl = new Tr;
            Object.assign(_r.prototype, {
                load: function(e, t, r, n) {
                    void 0 === e && (e = ""),
                    void 0 !== this.path && (e = this.path + e);
                    var i = this
                      , a = kl.get(e);
                    if (void 0 !== a)
                        return i.manager.itemStart(e),
                        setTimeout(function() {
                            t && t(a),
                            i.manager.itemEnd(e)
                        }, 0),
                        a;
                    var o = /^data:(.*?)(;base64)?,(.*)$/
                      , s = e.match(o);
                    if (s) {
                        var u = s[1]
                          , l = !!s[2]
                          , c = s[3];
                        c = window.decodeURIComponent(c),
                        l && (c = window.atob(c));
                        try {
                            var h, f = (this.responseType || "").toLowerCase();
                            switch (f) {
                            case "arraybuffer":
                            case "blob":
                                h = new ArrayBuffer(c.length);
                                for (var d = new Uint8Array(h), p = 0; p < c.length; p++)
                                    d[p] = c.charCodeAt(p);
                                "blob" === f && (h = new Blob([h],{
                                    type: u
                                }));
                                break;
                            case "document":
                                var m = new DOMParser;
                                h = m.parseFromString(c, u);
                                break;
                            case "json":
                                h = JSON.parse(c);
                                break;
                            default:
                                h = c
                            }
                            window.setTimeout(function() {
                                t && t(h),
                                i.manager.itemEnd(e)
                            }, 0)
                        } catch (t) {
                            window.setTimeout(function() {
                                n && n(t),
                                i.manager.itemError(e)
                            }, 0)
                        }
                    } else {
                        var g = new XMLHttpRequest;
                        g.open("GET", e, !0),
                        g.addEventListener("load", function(r) {
                            var a = r.target.response;
                            kl.add(e, a),
                            200 === this.status ? (t && t(a),
                            i.manager.itemEnd(e)) : 0 === this.status ? (console.warn("THREE.FileLoader: HTTP Status 0 received."),
                            t && t(a),
                            i.manager.itemEnd(e)) : (n && n(r),
                            i.manager.itemError(e))
                        }, !1),
                        void 0 !== r && g.addEventListener("progress", function(e) {
                            r(e)
                        }, !1),
                        g.addEventListener("error", function(t) {
                            n && n(t),
                            i.manager.itemError(e)
                        }, !1),
                        void 0 !== this.responseType && (g.responseType = this.responseType),
                        void 0 !== this.withCredentials && (g.withCredentials = this.withCredentials),
                        g.overrideMimeType && g.overrideMimeType(void 0 !== this.mimeType ? this.mimeType : "text/plain"),
                        g.send(null)
                    }
                    return i.manager.itemStart(e),
                    g
                },
                setPath: function(e) {
                    return this.path = e,
                    this
                },
                setResponseType: function(e) {
                    return this.responseType = e,
                    this
                },
                setWithCredentials: function(e) {
                    return this.withCredentials = e,
                    this
                },
                setMimeType: function(e) {
                    return this.mimeType = e,
                    this
                }
            }),
            Object.assign(Er.prototype, {
                load: function(e, t, r, n) {
                    function i(i) {
                        u.load(e[i], function(e) {
                            var r = a._parser(e, !0);
                            o[i] = {
                                width: r.width,
                                height: r.height,
                                format: r.format,
                                mipmaps: r.mipmaps
                            },
                            l += 1,
                            6 === l && (1 === r.mipmapCount && (s.minFilter = mo),
                            s.format = r.format,
                            s.needsUpdate = !0,
                            t && t(s))
                        }, r, n)
                    }
                    var a = this
                      , o = []
                      , s = new Et;
                    s.image = o;
                    var u = new _r(this.manager);
                    if (u.setPath(this.path),
                    u.setResponseType("arraybuffer"),
                    Array.isArray(e))
                        for (var l = 0, c = 0, h = e.length; c < h; ++c)
                            i(c);
                    else
                        u.load(e, function(e) {
                            var r = a._parser(e, !0);
                            if (r.isCubemap)
                                for (var n = r.mipmaps.length / r.mipmapCount, i = 0; i < n; i++) {
                                    o[i] = {
                                        mipmaps: []
                                    };
                                    for (var u = 0; u < r.mipmapCount; u++)
                                        o[i].mipmaps.push(r.mipmaps[i * r.mipmapCount + u]),
                                        o[i].format = r.format,
                                        o[i].width = r.width,
                                        o[i].height = r.height
                                }
                            else
                                s.image.width = r.width,
                                s.image.height = r.height,
                                s.mipmaps = r.mipmaps;
                            1 === r.mipmapCount && (s.minFilter = mo),
                            s.format = r.format,
                            s.needsUpdate = !0,
                            t && t(s)
                        }, r, n);
                    return s
                },
                setPath: function(e) {
                    return this.path = e,
                    this
                }
            }),
            Object.assign(Sr.prototype, {
                load: function(e, t, r, n) {
                    var i = this
                      , a = new H
                      , o = new _r(this.manager);
                    return o.setResponseType("arraybuffer"),
                    o.load(e, function(e) {
                        var r = i._parser(e);
                        r && (void 0 !== r.image ? a.image = r.image : void 0 !== r.data && (a.image.width = r.width,
                        a.image.height = r.height,
                        a.image.data = r.data),
                        a.wrapS = void 0 !== r.wrapS ? r.wrapS : lo,
                        a.wrapT = void 0 !== r.wrapT ? r.wrapT : lo,
                        a.magFilter = void 0 !== r.magFilter ? r.magFilter : mo,
                        a.minFilter = void 0 !== r.minFilter ? r.minFilter : vo,
                        a.anisotropy = void 0 !== r.anisotropy ? r.anisotropy : 1,
                        void 0 !== r.format && (a.format = r.format),
                        void 0 !== r.type && (a.type = r.type),
                        void 0 !== r.mipmaps && (a.mipmaps = r.mipmaps),
                        1 === r.mipmapCount && (a.minFilter = mo),
                        a.needsUpdate = !0,
                        t && t(a, r))
                    }, r, n),
                    a
                }
            }),
            Object.assign(Dr.prototype, {
                load: function(e, t, r, n) {
                    void 0 === e && (e = ""),
                    void 0 !== this.path && (e = this.path + e);
                    var i = this
                      , a = kl.get(e);
                    if (void 0 !== a)
                        return i.manager.itemStart(e),
                        setTimeout(function() {
                            t && t(a),
                            i.manager.itemEnd(e)
                        }, 0),
                        a;
                    var o = document.createElementNS("http://www.w3.org/1999/xhtml", "img");
                    return o.addEventListener("load", function() {
                        kl.add(e, this),
                        t && t(this),
                        i.manager.itemEnd(e)
                    }, !1),
                    o.addEventListener("error", function(t) {
                        n && n(t),
                        i.manager.itemError(e)
                    }, !1),
                    void 0 !== this.crossOrigin && (o.crossOrigin = this.crossOrigin),
                    i.manager.itemStart(e),
                    o.src = e,
                    o
                },
                setCrossOrigin: function(e) {
                    return this.crossOrigin = e,
                    this
                },
                setPath: function(e) {
                    return this.path = e,
                    this
                }
            }),
            Object.assign(Nr.prototype, {
                load: function(e, t, r, n) {
                    function i(r) {
                        o.load(e[r], function(e) {
                            a.images[r] = e,
                            s++,
                            6 === s && (a.needsUpdate = !0,
                            t && t(a))
                        }, void 0, n)
                    }
                    var a = new c
                      , o = new Dr(this.manager);
                    o.setCrossOrigin(this.crossOrigin),
                    o.setPath(this.path);
                    for (var s = 0, u = 0; u < e.length; ++u)
                        i(u);
                    return a
                },
                setCrossOrigin: function(e) {
                    return this.crossOrigin = e,
                    this
                },
                setPath: function(e) {
                    return this.path = e,
                    this
                }
            }),
            Object.assign(Ir.prototype, {
                load: function(e, t, r, i) {
                    var a = new n
                      , o = new Dr(this.manager);
                    return o.setCrossOrigin(this.crossOrigin),
                    o.setPath(this.path),
                    o.load(e, function(r) {
                        var n = e.search(/\.(jpg|jpeg)$/) > 0 || 0 === e.search(/^data\:image\/jpeg/);
                        a.format = n ? Lo : Co,
                        a.image = r,
                        a.needsUpdate = !0,
                        void 0 !== t && t(a)
                    }, r, i),
                    a
                },
                setCrossOrigin: function(e) {
                    return this.crossOrigin = e,
                    this
                },
                setPath: function(e) {
                    return this.path = e,
                    this
                }
            }),
            Lr.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: Lr,
                isLight: !0,
                copy: function(e) {
                    return ue.prototype.copy.call(this, e),
                    this.color.copy(e.color),
                    this.intensity = e.intensity,
                    this
                },
                toJSON: function(e) {
                    var t = ue.prototype.toJSON.call(this, e);
                    return t.object.color = this.color.getHex(),
                    t.object.intensity = this.intensity,
                    void 0 !== this.groundColor && (t.object.groundColor = this.groundColor.getHex()),
                    void 0 !== this.distance && (t.object.distance = this.distance),
                    void 0 !== this.angle && (t.object.angle = this.angle),
                    void 0 !== this.decay && (t.object.decay = this.decay),
                    void 0 !== this.penumbra && (t.object.penumbra = this.penumbra),
                    void 0 !== this.shadow && (t.object.shadow = this.shadow.toJSON()),
                    t
                }
            }),
            Cr.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Cr,
                isHemisphereLight: !0,
                copy: function(e) {
                    return Lr.prototype.copy.call(this, e),
                    this.groundColor.copy(e.groundColor),
                    this
                }
            }),
            Object.assign(Or.prototype, {
                copy: function(e) {
                    return this.camera = e.camera.clone(),
                    this.bias = e.bias,
                    this.radius = e.radius,
                    this.mapSize.copy(e.mapSize),
                    this.cameraFovNearFar.copy(e.cameraFovNearFar),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                toJSON: function() {
                    var e = {};
                    return 0 !== this.bias && (e.bias = this.bias),
                    1 !== this.radius && (e.radius = this.radius),
                    512 === this.mapSize.x && 512 === this.mapSize.y || (e.mapSize = this.mapSize.toArray()),
                    e.camera = this.camera.toJSON(!1).object,
                    delete e.camera.matrix,
                    e
                }
            }),
            jr.prototype = Object.assign(Object.create(Or.prototype), {
                constructor: jr,
                isSpotLightShadow: !0,
                update: function(e) {
                    var t = 2 * ms.RAD2DEG * e.angle
                      , r = this.mapSize.width / this.mapSize.height
                      , n = e.distance || 500
                      , i = this.camera;
                    this.cameraParams.x = t * ms.DEG2RAD,
                    this.cameraParams.y = e.shadow.camera.near,
                    this.cameraParams.z = n,
                    i.fov = t,
                    i.aspect = r,
                    i.far = n,
                    i.updateProjectionMatrix()
                }
            }),
            Rr.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Rr,
                isSpotLight: !0,
                copy: function(e) {
                    return Lr.prototype.copy.call(this, e),
                    this.distance = e.distance,
                    this.angle = e.angle,
                    this.penumbra = e.penumbra,
                    this.decay = e.decay,
                    this.target = e.target.clone(),
                    this.shadow = e.shadow.clone(),
                    this
                }
            }),
            Pr.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Pr,
                isPointLight: !0,
                copy: function(e) {
                    return Lr.prototype.copy.call(this, e),
                    this.distance = e.distance,
                    this.decay = e.decay,
                    this.shadow = e.shadow.clone(),
                    this
                }
            }),
            zr.prototype = Object.assign(Object.create(Or.prototype), {
                constructor: zr
            }),
            zr.prototype.update = function(e) {
                var t = this.camera
                  , r = Math.abs(t.left - t.right);
                this.cameraParams.x === r && this.cameraParams.y === t.near && this.cameraParams.z === t.far || (this.cameraParams.x = r,
                this.cameraParams.y = t.near,
                this.cameraParams.z = t.far)
            }
            ,
            Br.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Br,
                isDirectionalLight: !0,
                copy: function(e) {
                    return Lr.prototype.copy.call(this, e),
                    this.target = e.target.clone(),
                    this.shadow = e.shadow.clone(),
                    this
                }
            }),
            Ur.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Ur,
                isAmbientLight: !0
            });
            var Gl = {
                arraySlice: function(e, t, r) {
                    return Gl.isTypedArray(e) ? new e.constructor(e.subarray(t, r)) : e.slice(t, r)
                },
                convertArray: function(e, t, r) {
                    return !e || !r && e.constructor === t ? e : "number" == typeof t.BYTES_PER_ELEMENT ? new t(e) : Array.prototype.slice.call(e)
                },
                isTypedArray: function(e) {
                    return ArrayBuffer.isView(e) && !(e instanceof DataView)
                },
                getKeyframeOrder: function(e) {
                    function t(t, r) {
                        return e[t] - e[r]
                    }
                    for (var r = e.length, n = new Array(r), i = 0; i !== r; ++i)
                        n[i] = i;
                    return n.sort(t),
                    n
                },
                sortedArray: function(e, t, r) {
                    for (var n = e.length, i = new e.constructor(n), a = 0, o = 0; o !== n; ++a)
                        for (var s = r[a] * t, u = 0; u !== t; ++u)
                            i[o++] = e[s + u];
                    return i
                },
                flattenJSON: function(e, t, r, n) {
                    for (var i = 1, a = e[0]; void 0 !== a && void 0 === a[n]; )
                        a = e[i++];
                    if (void 0 !== a) {
                        var o = a[n];
                        if (void 0 !== o)
                            if (Array.isArray(o)) {
                                do
                                    o = a[n],
                                    void 0 !== o && (t.push(a.time),
                                    r.push.apply(r, o)),
                                    a = e[i++];
                                while (void 0 !== a)
                            } else if (void 0 !== o.toArray) {
                                do
                                    o = a[n],
                                    void 0 !== o && (t.push(a.time),
                                    o.toArray(r, r.length)),
                                    a = e[i++];
                                while (void 0 !== a)
                            } else
                                do
                                    o = a[n],
                                    void 0 !== o && (t.push(a.time),
                                    r.push(o)),
                                    a = e[i++];
                                while (void 0 !== a)
                    }
                }
            };
            Vr.prototype = {
                constructor: Vr,
                evaluate: function(e) {
                    var t = this.parameterPositions
                      , r = this._cachedIndex
                      , n = t[r]
                      , i = t[r - 1];
                    e: {
                        t: {
                            var a;
                            r: {
                                n: if (!(e < n)) {
                                    for (var o = r + 2; ; ) {
                                        if (void 0 === n) {
                                            if (e < i)
                                                break n;
                                            return r = t.length,
                                            this._cachedIndex = r,
                                            this.afterEnd_(r - 1, e, i)
                                        }
                                        if (r === o)
                                            break;
                                        if (i = n,
                                        n = t[++r],
                                        e < n)
                                            break t
                                    }
                                    a = t.length;
                                    break r
                                }
                                if (e >= i)
                                    break e;
                                var s = t[1];
                                e < s && (r = 2,
                                i = s);
                                for (var o = r - 2; ; ) {
                                    if (void 0 === i)
                                        return this._cachedIndex = 0,
                                        this.beforeStart_(0, e, n);
                                    if (r === o)
                                        break;
                                    if (n = i,
                                    i = t[--r - 1],
                                    e >= i)
                                        break t
                                }
                                a = r,
                                r = 0
                            }
                            for (; r < a; ) {
                                var u = r + a >>> 1;
                                e < t[u] ? a = u : r = u + 1
                            }
                            if (n = t[r],
                            i = t[r - 1],
                            void 0 === i)
                                return this._cachedIndex = 0,
                                this.beforeStart_(0, e, n);
                            if (void 0 === n)
                                return r = t.length,
                                this._cachedIndex = r,
                                this.afterEnd_(r - 1, i, e)
                        }
                        this._cachedIndex = r,
                        this.intervalChanged_(r, i, n)
                    }
                    return this.interpolate_(r, i, e, n)
                },
                settings: null,
                DefaultSettings_: {},
                getSettings_: function() {
                    return this.settings || this.DefaultSettings_
                },
                copySampleValue_: function(e) {
                    for (var t = this.resultBuffer, r = this.sampleValues, n = this.valueSize, i = e * n, a = 0; a !== n; ++a)
                        t[a] = r[i + a];
                    return t
                },
                interpolate_: function(e, t, r, n) {
                    throw new Error("call to abstract method")
                },
                intervalChanged_: function(e, t, r) {}
            },
            Object.assign(Vr.prototype, {
                beforeStart_: Vr.prototype.copySampleValue_,
                afterEnd_: Vr.prototype.copySampleValue_
            }),
            kr.prototype = Object.assign(Object.create(Vr.prototype), {
                constructor: kr,
                DefaultSettings_: {
                    endingStart: $o,
                    endingEnd: $o
                },
                intervalChanged_: function(e, t, r) {
                    var n = this.parameterPositions
                      , i = e - 2
                      , a = e + 1
                      , o = n[i]
                      , s = n[a];
                    if (void 0 === o)
                        switch (this.getSettings_().endingStart) {
                        case es:
                            i = e,
                            o = 2 * t - r;
                            break;
                        case ts:
                            i = n.length - 2,
                            o = t + n[i] - n[i + 1];
                            break;
                        default:
                            i = e,
                            o = r
                        }
                    if (void 0 === s)
                        switch (this.getSettings_().endingEnd) {
                        case es:
                            a = e,
                            s = 2 * r - t;
                            break;
                        case ts:
                            a = 1,
                            s = r + n[1] - n[0];
                            break;
                        default:
                            a = e - 1,
                            s = t
                        }
                    var u = .5 * (r - t)
                      , l = this.valueSize;
                    this._weightPrev = u / (t - o),
                    this._weightNext = u / (s - r),
                    this._offsetPrev = i * l,
                    this._offsetNext = a * l
                },
                interpolate_: function(e, t, r, n) {
                    for (var i = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, u = s - o, l = this._offsetPrev, c = this._offsetNext, h = this._weightPrev, f = this._weightNext, d = (r - t) / (n - t), p = d * d, m = p * d, g = -h * m + 2 * h * p - h * d, v = (1 + h) * m + (-1.5 - 2 * h) * p + (-.5 + h) * d + 1, y = (-1 - f) * m + (1.5 + f) * p + .5 * d, M = f * m - f * p, w = 0; w !== o; ++w)
                        i[w] = g * a[l + w] + v * a[u + w] + y * a[s + w] + M * a[c + w];
                    return i
                }
            }),
            Fr.prototype = Object.assign(Object.create(Vr.prototype), {
                constructor: Fr,
                interpolate_: function(e, t, r, n) {
                    for (var i = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, u = s - o, l = (r - t) / (n - t), c = 1 - l, h = 0; h !== o; ++h)
                        i[h] = a[u + h] * c + a[s + h] * l;
                    return i
                }
            }),
            Gr.prototype = Object.assign(Object.create(Vr.prototype), {
                constructor: Gr,
                interpolate_: function(e, t, r, n) {
                    return this.copySampleValue_(e - 1)
                }
            });
            var Yl;
            Yl = {
                TimeBufferType: Float32Array,
                ValueBufferType: Float32Array,
                DefaultInterpolation: Jo,
                InterpolantFactoryMethodDiscrete: function(e) {
                    return new Gr(this.times,this.values,this.getValueSize(),e)
                },
                InterpolantFactoryMethodLinear: function(e) {
                    return new Fr(this.times,this.values,this.getValueSize(),e)
                },
                InterpolantFactoryMethodSmooth: function(e) {
                    return new kr(this.times,this.values,this.getValueSize(),e)
                },
                setInterpolation: function(e) {
                    var t;
                    switch (e) {
                    case Zo:
                        t = this.InterpolantFactoryMethodDiscrete;
                        break;
                    case Jo:
                        t = this.InterpolantFactoryMethodLinear;
                        break;
                    case Ko:
                        t = this.InterpolantFactoryMethodSmooth
                    }
                    if (void 0 === t) {
                        var r = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
                        if (void 0 === this.createInterpolant) {
                            if (e === this.DefaultInterpolation)
                                throw new Error(r);
                            this.setInterpolation(this.DefaultInterpolation)
                        }
                        return void console.warn(r)
                    }
                    this.createInterpolant = t
                },
                getInterpolation: function() {
                    switch (this.createInterpolant) {
                    case this.InterpolantFactoryMethodDiscrete:
                        return Zo;
                    case this.InterpolantFactoryMethodLinear:
                        return Jo;
                    case this.InterpolantFactoryMethodSmooth:
                        return Ko
                    }
                },
                getValueSize: function() {
                    return this.values.length / this.times.length
                },
                shift: function(e) {
                    if (0 !== e)
                        for (var t = this.times, r = 0, n = t.length; r !== n; ++r)
                            t[r] += e;
                    return this
                },
                scale: function(e) {
                    if (1 !== e)
                        for (var t = this.times, r = 0, n = t.length; r !== n; ++r)
                            t[r] *= e;
                    return this
                },
                trim: function(e, t) {
                    for (var r = this.times, n = r.length, i = 0, a = n - 1; i !== n && r[i] < e; )
                        ++i;
                    for (; a !== -1 && r[a] > t; )
                        --a;
                    if (++a,
                    0 !== i || a !== n) {
                        i >= a && (a = Math.max(a, 1),
                        i = a - 1);
                        var o = this.getValueSize();
                        this.times = Gl.arraySlice(r, i, a),
                        this.values = Gl.arraySlice(this.values, i * o, a * o)
                    }
                    return this
                },
                validate: function() {
                    var e = !0
                      , t = this.getValueSize();
                    t - Math.floor(t) !== 0 && (console.error("invalid value size in track", this),
                    e = !1);
                    var r = this.times
                      , n = this.values
                      , i = r.length;
                    0 === i && (console.error("track is empty", this),
                    e = !1);
                    for (var a = null, o = 0; o !== i; o++) {
                        var s = r[o];
                        if ("number" == typeof s && isNaN(s)) {
                            console.error("time is not a valid number", this, o, s),
                            e = !1;
                            break
                        }
                        if (null !== a && a > s) {
                            console.error("out of order keys", this, o, s, a),
                            e = !1;
                            break
                        }
                        a = s
                    }
                    if (void 0 !== n && Gl.isTypedArray(n))
                        for (var o = 0, u = n.length; o !== u; ++o) {
                            var l = n[o];
                            if (isNaN(l)) {
                                console.error("value is not a valid number", this, o, l),
                                e = !1;
                                break
                            }
                        }
                    return e
                },
                optimize: function() {
                    for (var e = this.times, t = this.values, r = this.getValueSize(), n = this.getInterpolation() === Ko, i = 1, a = e.length - 1, o = 1; o < a; ++o) {
                        var s = !1
                          , u = e[o]
                          , l = e[o + 1];
                        if (u !== l && (1 !== o || u !== u[0]))
                            if (n)
                                s = !0;
                            else
                                for (var c = o * r, h = c - r, f = c + r, d = 0; d !== r; ++d) {
                                    var p = t[c + d];
                                    if (p !== t[h + d] || p !== t[f + d]) {
                                        s = !0;
                                        break
                                    }
                                }
                        if (s) {
                            if (o !== i) {
                                e[i] = e[o];
                                for (var m = o * r, g = i * r, d = 0; d !== r; ++d)
                                    t[g + d] = t[m + d]
                            }
                            ++i
                        }
                    }
                    if (a > 0) {
                        e[i] = e[a];
                        for (var m = a * r, g = i * r, d = 0; d !== r; ++d)
                            t[g + d] = t[m + d];
                        ++i
                    }
                    return i !== e.length && (this.times = Gl.arraySlice(e, 0, i),
                    this.values = Gl.arraySlice(t, 0, i * r)),
                    this
                }
            },
            Qr.prototype = Object.assign(Object.create(Yl), {
                constructor: Qr,
                ValueTypeName: "vector"
            }),
            Hr.prototype = Object.assign(Object.create(Vr.prototype), {
                constructor: Hr,
                interpolate_: function(e, t, r, n) {
                    for (var i = this.resultBuffer, a = this.sampleValues, o = this.valueSize, u = e * o, l = (r - t) / (n - t), c = u + o; u !== c; u += 4)
                        s.slerpFlat(i, 0, a, u - o, a, u, l);
                    return i
                }
            }),
            Wr.prototype = Object.assign(Object.create(Yl), {
                constructor: Wr,
                ValueTypeName: "quaternion",
                DefaultInterpolation: Jo,
                InterpolantFactoryMethodLinear: function(e) {
                    return new Hr(this.times,this.values,this.getValueSize(),e)
                },
                InterpolantFactoryMethodSmooth: void 0
            }),
            Xr.prototype = Object.assign(Object.create(Yl), {
                constructor: Xr,
                ValueTypeName: "number"
            }),
            qr.prototype = Object.assign(Object.create(Yl), {
                constructor: qr,
                ValueTypeName: "string",
                ValueBufferType: Array,
                DefaultInterpolation: Zo,
                InterpolantFactoryMethodLinear: void 0,
                InterpolantFactoryMethodSmooth: void 0
            }),
            Zr.prototype = Object.assign(Object.create(Yl), {
                constructor: Zr,
                ValueTypeName: "bool",
                ValueBufferType: Array,
                DefaultInterpolation: Zo,
                InterpolantFactoryMethodLinear: void 0,
                InterpolantFactoryMethodSmooth: void 0
            }),
            Jr.prototype = Object.assign(Object.create(Yl), {
                constructor: Jr,
                ValueTypeName: "color"
            }),
            Kr.prototype = Yl,
            Yl.constructor = Kr,
            Object.assign(Kr, {
                parse: function(e) {
                    if (void 0 === e.type)
                        throw new Error("track type undefined, can not parse");
                    var t = Kr._getTrackTypeForValueTypeName(e.type);
                    if (void 0 === e.times) {
                        var r = []
                          , n = [];
                        Gl.flattenJSON(e.keys, r, n, "value"),
                        e.times = r,
                        e.values = n
                    }
                    return void 0 !== t.parse ? t.parse(e) : new t(e.name,e.times,e.values,e.interpolation)
                },
                toJSON: function(e) {
                    var t, r = e.constructor;
                    if (void 0 !== r.toJSON)
                        t = r.toJSON(e);
                    else {
                        t = {
                            name: e.name,
                            times: Gl.convertArray(e.times, Array),
                            values: Gl.convertArray(e.values, Array)
                        };
                        var n = e.getInterpolation();
                        n !== e.DefaultInterpolation && (t.interpolation = n)
                    }
                    return t.type = e.ValueTypeName,
                    t
                },
                _getTrackTypeForValueTypeName: function(e) {
                    switch (e.toLowerCase()) {
                    case "scalar":
                    case "double":
                    case "float":
                    case "number":
                    case "integer":
                        return Xr;
                    case "vector":
                    case "vector2":
                    case "vector3":
                    case "vector4":
                        return Qr;
                    case "color":
                        return Jr;
                    case "quaternion":
                        return Wr;
                    case "bool":
                    case "boolean":
                        return Zr;
                    case "string":
                        return qr
                    }
                    throw new Error("Unsupported typeName: " + e)
                }
            }),
            $r.prototype = {
                constructor: $r,
                resetDuration: function() {
                    for (var e = this.tracks, t = 0, r = 0, n = e.length; r !== n; ++r) {
                        var i = this.tracks[r];
                        t = Math.max(t, i.times[i.times.length - 1])
                    }
                    this.duration = t
                },
                trim: function() {
                    for (var e = 0; e < this.tracks.length; e++)
                        this.tracks[e].trim(0, this.duration);
                    return this
                },
                optimize: function() {
                    for (var e = 0; e < this.tracks.length; e++)
                        this.tracks[e].optimize();
                    return this
                }
            },
            Object.assign($r, {
                parse: function(e) {
                    for (var t = [], r = e.tracks, n = 1 / (e.fps || 1), i = 0, a = r.length; i !== a; ++i)
                        t.push(Kr.parse(r[i]).scale(n));
                    return new $r(e.name,e.duration,t)
                },
                toJSON: function(e) {
                    for (var t = [], r = e.tracks, n = {
                        name: e.name,
                        duration: e.duration,
                        tracks: t
                    }, i = 0, a = r.length; i !== a; ++i)
                        t.push(Kr.toJSON(r[i]));
                    return n
                },
                CreateFromMorphTargetSequence: function(e, t, r, n) {
                    for (var i = t.length, a = [], o = 0; o < i; o++) {
                        var s = []
                          , u = [];
                        s.push((o + i - 1) % i, o, (o + 1) % i),
                        u.push(0, 1, 0);
                        var l = Gl.getKeyframeOrder(s);
                        s = Gl.sortedArray(s, 1, l),
                        u = Gl.sortedArray(u, 1, l),
                        n || 0 !== s[0] || (s.push(i),
                        u.push(u[0])),
                        a.push(new Xr(".morphTargetInfluences[" + t[o].name + "]",s,u).scale(1 / r))
                    }
                    return new $r(e,-1,a)
                },
                findByName: function(e, t) {
                    var r = e;
                    if (!Array.isArray(e)) {
                        var n = e;
                        r = n.geometry && n.geometry.animations || n.animations
                    }
                    for (var i = 0; i < r.length; i++)
                        if (r[i].name === t)
                            return r[i];
                    return null
                },
                CreateClipsFromMorphTargetSequences: function(e, t, r) {
                    for (var n = {}, i = /^([\w-]*?)([\d]+)$/, a = 0, o = e.length; a < o; a++) {
                        var s = e[a]
                          , u = s.name.match(i);
                        if (u && u.length > 1) {
                            var l = u[1]
                              , c = n[l];
                            c || (n[l] = c = []),
                            c.push(s)
                        }
                    }
                    var h = [];
                    for (var l in n)
                        h.push($r.CreateFromMorphTargetSequence(l, n[l], t, r));
                    return h
                },
                parseAnimation: function(e, t) {
                    if (!e)
                        return console.error("  no animation in JSONLoader data"),
                        null;
                    for (var r = function(e, t, r, n, i) {
                        if (0 !== r.length) {
                            var a = []
                              , o = [];
                            Gl.flattenJSON(r, a, o, n),
                            0 !== a.length && i.push(new e(t,a,o))
                        }
                    }, n = [], i = e.name || "default", a = e.length || -1, o = e.fps || 30, s = e.hierarchy || [], u = 0; u < s.length; u++) {
                        var l = s[u].keys;
                        if (l && 0 !== l.length)
                            if (l[0].morphTargets) {
                                for (var c = {}, h = 0; h < l.length; h++)
                                    if (l[h].morphTargets)
                                        for (var f = 0; f < l[h].morphTargets.length; f++)
                                            c[l[h].morphTargets[f]] = -1;
                                for (var d in c) {
                                    for (var p = [], m = [], f = 0; f !== l[h].morphTargets.length; ++f) {
                                        var g = l[h];
                                        p.push(g.time),
                                        m.push(g.morphTarget === d ? 1 : 0)
                                    }
                                    n.push(new Xr(".morphTargetInfluence[" + d + "]",p,m))
                                }
                                a = c.length * (o || 1)
                            } else {
                                var v = ".bones[" + t[u].name + "]";
                                r(Qr, v + ".position", l, "pos", n),
                                r(Wr, v + ".quaternion", l, "rot", n),
                                r(Qr, v + ".scale", l, "scl", n)
                            }
                    }
                    if (0 === n.length)
                        return null;
                    var y = new $r(i,a,n);
                    return y
                }
            }),
            Object.assign(en.prototype, {
                load: function(e, t, r, n) {
                    var i = this
                      , a = new _r(i.manager);
                    a.load(e, function(e) {
                        t(i.parse(JSON.parse(e)))
                    }, r, n)
                },
                setTextures: function(e) {
                    this.textures = e
                },
                parse: function(e) {
                    function t(e) {
                        return void 0 === n[e] && console.warn("THREE.MaterialLoader: Undefined texture", e),
                        n[e]
                    }
                    var n = this.textures
                      , i = new Vl[e.type];
                    if (void 0 !== e.uuid && (i.uuid = e.uuid),
                    void 0 !== e.name && (i.name = e.name),
                    void 0 !== e.color && i.color.setHex(e.color),
                    void 0 !== e.roughness && (i.roughness = e.roughness),
                    void 0 !== e.metalness && (i.metalness = e.metalness),
                    void 0 !== e.emissive && i.emissive.setHex(e.emissive),
                    void 0 !== e.specular && i.specular.setHex(e.specular),
                    void 0 !== e.shininess && (i.shininess = e.shininess),
                    void 0 !== e.clearCoat && (i.clearCoat = e.clearCoat),
                    void 0 !== e.clearCoatRoughness && (i.clearCoatRoughness = e.clearCoatRoughness),
                    void 0 !== e.uniforms && (i.uniforms = e.uniforms),
                    void 0 !== e.vertexShader && (i.vertexShader = e.vertexShader),
                    void 0 !== e.fragmentShader && (i.fragmentShader = e.fragmentShader),
                    void 0 !== e.vertexColors && (i.vertexColors = e.vertexColors),
                    void 0 !== e.fog && (i.fog = e.fog),
                    void 0 !== e.shading && (i.shading = e.shading),
                    void 0 !== e.blending && (i.blending = e.blending),
                    void 0 !== e.side && (i.side = e.side),
                    void 0 !== e.opacity && (i.opacity = e.opacity),
                    void 0 !== e.transparent && (i.transparent = e.transparent),
                    void 0 !== e.alphaTest && (i.alphaTest = e.alphaTest),
                    void 0 !== e.depthTest && (i.depthTest = e.depthTest),
                    void 0 !== e.depthWrite && (i.depthWrite = e.depthWrite),
                    void 0 !== e.colorWrite && (i.colorWrite = e.colorWrite),
                    void 0 !== e.wireframe && (i.wireframe = e.wireframe),
                    void 0 !== e.wireframeLinewidth && (i.wireframeLinewidth = e.wireframeLinewidth),
                    void 0 !== e.wireframeLinecap && (i.wireframeLinecap = e.wireframeLinecap),
                    void 0 !== e.wireframeLinejoin && (i.wireframeLinejoin = e.wireframeLinejoin),
                    void 0 !== e.skinning && (i.skinning = e.skinning),
                    void 0 !== e.morphTargets && (i.morphTargets = e.morphTargets),
                    void 0 !== e.size && (i.size = e.size),
                    void 0 !== e.sizeAttenuation && (i.sizeAttenuation = e.sizeAttenuation),
                    void 0 !== e.map && (i.map = t(e.map)),
                    void 0 !== e.alphaMap && (i.alphaMap = t(e.alphaMap),
                    i.transparent = !0),
                    void 0 !== e.bumpMap && (i.bumpMap = t(e.bumpMap)),
                    void 0 !== e.bumpScale && (i.bumpScale = e.bumpScale),
                    void 0 !== e.normalMap && (i.normalMap = t(e.normalMap)),
                    void 0 !== e.normalScale) {
                        var a = e.normalScale;
                        Array.isArray(a) === !1 && (a = [a, a]),
                        i.normalScale = (new r).fromArray(a)
                    }
                    if (void 0 !== e.displacementMap && (i.displacementMap = t(e.displacementMap)),
                    void 0 !== e.displacementScale && (i.displacementScale = e.displacementScale),
                    void 0 !== e.displacementBias && (i.displacementBias = e.displacementBias),
                    void 0 !== e.roughnessMap && (i.roughnessMap = t(e.roughnessMap)),
                    void 0 !== e.metalnessMap && (i.metalnessMap = t(e.metalnessMap)),
                    void 0 !== e.emissiveMap && (i.emissiveMap = t(e.emissiveMap)),
                    void 0 !== e.emissiveIntensity && (i.emissiveIntensity = e.emissiveIntensity),
                    void 0 !== e.specularMap && (i.specularMap = t(e.specularMap)),
                    void 0 !== e.envMap && (i.envMap = t(e.envMap)),
                    void 0 !== e.reflectivity && (i.reflectivity = e.reflectivity),
                    void 0 !== e.lightMap && (i.lightMap = t(e.lightMap)),
                    void 0 !== e.lightMapIntensity && (i.lightMapIntensity = e.lightMapIntensity),
                    void 0 !== e.aoMap && (i.aoMap = t(e.aoMap)),
                    void 0 !== e.aoMapIntensity && (i.aoMapIntensity = e.aoMapIntensity),
                    void 0 !== e.gradientMap && (i.gradientMap = t(e.gradientMap)),
                    void 0 !== e.materials)
                        for (var o = 0, s = e.materials.length; o < s; o++)
                            i.materials.push(this.parse(e.materials[o]));
                    return i
                }
            }),
            Object.assign(tn.prototype, {
                load: function(e, t, r, n) {
                    var i = this
                      , a = new _r(i.manager);
                    a.load(e, function(e) {
                        t(i.parse(JSON.parse(e)))
                    }, r, n)
                },
                parse: function(e) {
                    var t = new Ee
                      , r = e.data.index
                      , n = {
                        Int8Array: Int8Array,
                        Uint8Array: Uint8Array,
                        Uint8ClampedArray: Uint8ClampedArray,
                        Int16Array: Int16Array,
                        Uint16Array: Uint16Array,
                        Int32Array: Int32Array,
                        Uint32Array: Uint32Array,
                        Float32Array: Float32Array,
                        Float64Array: Float64Array
                    };
                    if (void 0 !== r) {
                        var i = new n[r.type](r.array);
                        t.setIndex(new de(i,1))
                    }
                    var a = e.data.attributes;
                    for (var o in a) {
                        var s = a[o]
                          , i = new n[s.type](s.array);
                        t.addAttribute(o, new de(i,s.itemSize,s.normalized))
                    }
                    var l = e.data.groups || e.data.drawcalls || e.data.offsets;
                    if (void 0 !== l)
                        for (var c = 0, h = l.length; c !== h; ++c) {
                            var f = l[c];
                            t.addGroup(f.start, f.count, f.materialIndex)
                        }
                    var d = e.data.boundingSphere;
                    if (void 0 !== d) {
                        var p = new u;
                        void 0 !== d.center && p.fromArray(d.center),
                        t.boundingSphere = new ee(p,d.radius)
                    }
                    return t
                }
            }),
            rn.prototype = {
                constructor: rn,
                crossOrigin: void 0,
                extractUrlBase: function(e) {
                    var t = e.split("/");
                    return 1 === t.length ? "./" : (t.pop(),
                    t.join("/") + "/")
                },
                initMaterials: function(e, t, r) {
                    for (var n = [], i = 0; i < e.length; ++i)
                        n[i] = this.createMaterial(e[i], t, r);
                    return n
                },
                createMaterial: function() {
                    var e, t, r, n = {
                        NoBlending: ga,
                        NormalBlending: va,
                        AdditiveBlending: ya,
                        SubtractiveBlending: Ma,
                        MultiplyBlending: wa,
                        CustomBlending: xa
                    };
                    return function(i, a, o) {
                        function s(e, r, n, i, s) {
                            var l, c = a + e, h = rn.Handlers.get(c);
                            null !== h ? l = h.load(c) : (t.setCrossOrigin(o),
                            l = t.load(c)),
                            void 0 !== r && (l.repeat.fromArray(r),
                            1 !== r[0] && (l.wrapS = uo),
                            1 !== r[1] && (l.wrapT = uo)),
                            void 0 !== n && l.offset.fromArray(n),
                            void 0 !== i && ("repeat" === i[0] && (l.wrapS = uo),
                            "mirror" === i[0] && (l.wrapS = co),
                            "repeat" === i[1] && (l.wrapT = uo),
                            "mirror" === i[1] && (l.wrapT = co)),
                            void 0 !== s && (l.anisotropy = s);
                            var f = ms.generateUUID();
                            return u[f] = l,
                            f
                        }
                        void 0 === e && (e = new Q),
                        void 0 === t && (t = new Ir),
                        void 0 === r && (r = new en);
                        var u = {}
                          , l = {
                            uuid: ms.generateUUID(),
                            type: "MeshLambertMaterial"
                        };
                        for (var c in i) {
                            var h = i[c];
                            switch (c) {
                            case "DbgColor":
                            case "DbgIndex":
                            case "opticalDensity":
                            case "illumination":
                                break;
                            case "DbgName":
                                l.name = h;
                                break;
                            case "blending":
                                l.blending = n[h];
                                break;
                            case "colorAmbient":
                            case "mapAmbient":
                                console.warn("THREE.Loader.createMaterial:", c, "is no longer supported.");
                                break;
                            case "colorDiffuse":
                                l.color = e.fromArray(h).getHex();
                                break;
                            case "colorSpecular":
                                l.specular = e.fromArray(h).getHex();
                                break;
                            case "colorEmissive":
                                l.emissive = e.fromArray(h).getHex();
                                break;
                            case "specularCoef":
                                l.shininess = h;
                                break;
                            case "shading":
                                "basic" === h.toLowerCase() && (l.type = "MeshBasicMaterial"),
                                "phong" === h.toLowerCase() && (l.type = "MeshPhongMaterial"),
                                "standard" === h.toLowerCase() && (l.type = "MeshStandardMaterial");
                                break;
                            case "mapDiffuse":
                                l.map = s(h, i.mapDiffuseRepeat, i.mapDiffuseOffset, i.mapDiffuseWrap, i.mapDiffuseAnisotropy);
                                break;
                            case "mapDiffuseRepeat":
                            case "mapDiffuseOffset":
                            case "mapDiffuseWrap":
                            case "mapDiffuseAnisotropy":
                                break;
                            case "mapEmissive":
                                l.emissiveMap = s(h, i.mapEmissiveRepeat, i.mapEmissiveOffset, i.mapEmissiveWrap, i.mapEmissiveAnisotropy);
                                break;
                            case "mapEmissiveRepeat":
                            case "mapEmissiveOffset":
                            case "mapEmissiveWrap":
                            case "mapEmissiveAnisotropy":
                                break;
                            case "mapLight":
                                l.lightMap = s(h, i.mapLightRepeat, i.mapLightOffset, i.mapLightWrap, i.mapLightAnisotropy);
                                break;
                            case "mapLightRepeat":
                            case "mapLightOffset":
                            case "mapLightWrap":
                            case "mapLightAnisotropy":
                                break;
                            case "mapAO":
                                l.aoMap = s(h, i.mapAORepeat, i.mapAOOffset, i.mapAOWrap, i.mapAOAnisotropy);
                                break;
                            case "mapAORepeat":
                            case "mapAOOffset":
                            case "mapAOWrap":
                            case "mapAOAnisotropy":
                                break;
                            case "mapBump":
                                l.bumpMap = s(h, i.mapBumpRepeat, i.mapBumpOffset, i.mapBumpWrap, i.mapBumpAnisotropy);
                                break;
                            case "mapBumpScale":
                                l.bumpScale = h;
                                break;
                            case "mapBumpRepeat":
                            case "mapBumpOffset":
                            case "mapBumpWrap":
                            case "mapBumpAnisotropy":
                                break;
                            case "mapNormal":
                                l.normalMap = s(h, i.mapNormalRepeat, i.mapNormalOffset, i.mapNormalWrap, i.mapNormalAnisotropy);
                                break;
                            case "mapNormalFactor":
                                l.normalScale = [h, h];
                                break;
                            case "mapNormalRepeat":
                            case "mapNormalOffset":
                            case "mapNormalWrap":
                            case "mapNormalAnisotropy":
                                break;
                            case "mapSpecular":
                                l.specularMap = s(h, i.mapSpecularRepeat, i.mapSpecularOffset, i.mapSpecularWrap, i.mapSpecularAnisotropy);
                                break;
                            case "mapSpecularRepeat":
                            case "mapSpecularOffset":
                            case "mapSpecularWrap":
                            case "mapSpecularAnisotropy":
                                break;
                            case "mapMetalness":
                                l.metalnessMap = s(h, i.mapMetalnessRepeat, i.mapMetalnessOffset, i.mapMetalnessWrap, i.mapMetalnessAnisotropy);
                                break;
                            case "mapMetalnessRepeat":
                            case "mapMetalnessOffset":
                            case "mapMetalnessWrap":
                            case "mapMetalnessAnisotropy":
                                break;
                            case "mapRoughness":
                                l.roughnessMap = s(h, i.mapRoughnessRepeat, i.mapRoughnessOffset, i.mapRoughnessWrap, i.mapRoughnessAnisotropy);
                                break;
                            case "mapRoughnessRepeat":
                            case "mapRoughnessOffset":
                            case "mapRoughnessWrap":
                            case "mapRoughnessAnisotropy":
                                break;
                            case "mapAlpha":
                                l.alphaMap = s(h, i.mapAlphaRepeat, i.mapAlphaOffset, i.mapAlphaWrap, i.mapAlphaAnisotropy);
                                break;
                            case "mapAlphaRepeat":
                            case "mapAlphaOffset":
                            case "mapAlphaWrap":
                            case "mapAlphaAnisotropy":
                                break;
                            case "flipSided":
                                l.side = la;
                                break;
                            case "doubleSided":
                                l.side = ca;
                                break;
                            case "transparency":
                                console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),
                                l.opacity = h;
                                break;
                            case "depthTest":
                            case "depthWrite":
                            case "colorWrite":
                            case "opacity":
                            case "reflectivity":
                            case "transparent":
                            case "visible":
                            case "wireframe":
                                l[c] = h;
                                break;
                            case "vertexColors":
                                h === !0 && (l.vertexColors = ma),
                                "face" === h && (l.vertexColors = pa);
                                break;
                            default:
                                console.error("THREE.Loader.createMaterial: Unsupported", c, h)
                            }
                        }
                        return "MeshBasicMaterial" === l.type && delete l.emissive,
                        "MeshPhongMaterial" !== l.type && delete l.specular,
                        l.opacity < 1 && (l.transparent = !0),
                        r.setTextures(u),
                        r.parse(l)
                    }
                }()
            },
            rn.Handlers = {
                handlers: [],
                add: function(e, t) {
                    this.handlers.push(e, t)
                },
                get: function(e) {
                    for (var t = this.handlers, r = 0, n = t.length; r < n; r += 2) {
                        var i = t[r]
                          , a = t[r + 1];
                        if (i.test(e))
                            return a
                    }
                    return null
                }
            },
            Object.assign(nn.prototype, {
                load: function(e, t, r, n) {
                    var i = this
                      , a = this.texturePath && "string" == typeof this.texturePath ? this.texturePath : rn.prototype.extractUrlBase(e)
                      , o = new _r(this.manager);
                    o.setWithCredentials(this.withCredentials),
                    o.load(e, function(r) {
                        var n = JSON.parse(r)
                          , o = n.metadata;
                        if (void 0 !== o) {
                            var s = o.type;
                            if (void 0 !== s) {
                                if ("object" === s.toLowerCase())
                                    return void console.error("THREE.JSONLoader: " + e + " should be loaded with THREE.ObjectLoader instead.");
                                if ("scene" === s.toLowerCase())
                                    return void console.error("THREE.JSONLoader: " + e + " should be loaded with THREE.SceneLoader instead.")
                            }
                        }
                        var u = i.parse(n, a);
                        t(u.geometry, u.materials)
                    }, r, n)
                },
                setTexturePath: function(e) {
                    this.texturePath = e
                },
                parse: function(e, t) {
                    function n(t) {
                        function n(e, t) {
                            return e & 1 << t
                        }
                        var i, a, o, s, c, h, f, d, p, m, g, v, y, M, w, x, A, b, T, _, E, S, D, N, I, L, C, O = e.faces, j = e.vertices, R = e.normals, P = e.colors, z = 0;
                        if (void 0 !== e.uvs) {
                            for (i = 0; i < e.uvs.length; i++)
                                e.uvs[i].length && z++;
                            for (i = 0; i < z; i++)
                                l.faceVertexUvs[i] = []
                        }
                        for (s = 0,
                        c = j.length; s < c; )
                            b = new u,
                            b.x = j[s++] * t,
                            b.y = j[s++] * t,
                            b.z = j[s++] * t,
                            l.vertices.push(b);
                        for (s = 0,
                        c = O.length; s < c; )
                            if (m = O[s++],
                            g = n(m, 0),
                            v = n(m, 1),
                            y = n(m, 3),
                            M = n(m, 4),
                            w = n(m, 5),
                            x = n(m, 6),
                            A = n(m, 7),
                            g) {
                                if (_ = new he,
                                _.a = O[s],
                                _.b = O[s + 1],
                                _.c = O[s + 3],
                                E = new he,
                                E.a = O[s + 1],
                                E.b = O[s + 2],
                                E.c = O[s + 3],
                                s += 4,
                                v && (p = O[s++],
                                _.materialIndex = p,
                                E.materialIndex = p),
                                o = l.faces.length,
                                y)
                                    for (i = 0; i < z; i++)
                                        for (N = e.uvs[i],
                                        l.faceVertexUvs[i][o] = [],
                                        l.faceVertexUvs[i][o + 1] = [],
                                        a = 0; a < 4; a++)
                                            d = O[s++],
                                            L = N[2 * d],
                                            C = N[2 * d + 1],
                                            I = new r(L,C),
                                            2 !== a && l.faceVertexUvs[i][o].push(I),
                                            0 !== a && l.faceVertexUvs[i][o + 1].push(I);
                                if (M && (f = 3 * O[s++],
                                _.normal.set(R[f++], R[f++], R[f]),
                                E.normal.copy(_.normal)),
                                w)
                                    for (i = 0; i < 4; i++)
                                        f = 3 * O[s++],
                                        D = new u(R[f++],R[f++],R[f]),
                                        2 !== i && _.vertexNormals.push(D),
                                        0 !== i && E.vertexNormals.push(D);
                                if (x && (h = O[s++],
                                S = P[h],
                                _.color.setHex(S),
                                E.color.setHex(S)),
                                A)
                                    for (i = 0; i < 4; i++)
                                        h = O[s++],
                                        S = P[h],
                                        2 !== i && _.vertexColors.push(new Q(S)),
                                        0 !== i && E.vertexColors.push(new Q(S));
                                l.faces.push(_),
                                l.faces.push(E)
                            } else {
                                if (T = new he,
                                T.a = O[s++],
                                T.b = O[s++],
                                T.c = O[s++],
                                v && (p = O[s++],
                                T.materialIndex = p),
                                o = l.faces.length,
                                y)
                                    for (i = 0; i < z; i++)
                                        for (N = e.uvs[i],
                                        l.faceVertexUvs[i][o] = [],
                                        a = 0; a < 3; a++)
                                            d = O[s++],
                                            L = N[2 * d],
                                            C = N[2 * d + 1],
                                            I = new r(L,C),
                                            l.faceVertexUvs[i][o].push(I);
                                if (M && (f = 3 * O[s++],
                                T.normal.set(R[f++], R[f++], R[f])),
                                w)
                                    for (i = 0; i < 3; i++)
                                        f = 3 * O[s++],
                                        D = new u(R[f++],R[f++],R[f]),
                                        T.vertexNormals.push(D);
                                if (x && (h = O[s++],
                                T.color.setHex(P[h])),
                                A)
                                    for (i = 0; i < 3; i++)
                                        h = O[s++],
                                        T.vertexColors.push(new Q(P[h]));
                                l.faces.push(T)
                            }
                    }
                    function a() {
                        var t = void 0 !== e.influencesPerVertex ? e.influencesPerVertex : 2;
                        if (e.skinWeights)
                            for (var r = 0, n = e.skinWeights.length; r < n; r += t) {
                                var a = e.skinWeights[r]
                                  , o = t > 1 ? e.skinWeights[r + 1] : 0
                                  , s = t > 2 ? e.skinWeights[r + 2] : 0
                                  , u = t > 3 ? e.skinWeights[r + 3] : 0;
                                l.skinWeights.push(new i(a,o,s,u))
                            }
                        if (e.skinIndices)
                            for (var r = 0, n = e.skinIndices.length; r < n; r += t) {
                                var c = e.skinIndices[r]
                                  , h = t > 1 ? e.skinIndices[r + 1] : 0
                                  , f = t > 2 ? e.skinIndices[r + 2] : 0
                                  , d = t > 3 ? e.skinIndices[r + 3] : 0;
                                l.skinIndices.push(new i(c,h,f,d))
                            }
                        l.bones = e.bones,
                        l.bones && l.bones.length > 0 && (l.skinWeights.length !== l.skinIndices.length || l.skinIndices.length !== l.vertices.length) && console.warn("When skinning, number of vertices (" + l.vertices.length + "), skinIndices (" + l.skinIndices.length + "), and skinWeights (" + l.skinWeights.length + ") should match.")
                    }
                    function o(t) {
                        if (void 0 !== e.morphTargets)
                            for (var r = 0, n = e.morphTargets.length; r < n; r++) {
                                l.morphTargets[r] = {},
                                l.morphTargets[r].name = e.morphTargets[r].name,
                                l.morphTargets[r].vertices = [];
                                for (var i = l.morphTargets[r].vertices, a = e.morphTargets[r].vertices, o = 0, s = a.length; o < s; o += 3) {
                                    var c = new u;
                                    c.x = a[o] * t,
                                    c.y = a[o + 1] * t,
                                    c.z = a[o + 2] * t,
                                    i.push(c)
                                }
                            }
                        if (void 0 !== e.morphColors && e.morphColors.length > 0) {
                            console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');
                            for (var h = l.faces, f = e.morphColors[0].colors, r = 0, n = h.length; r < n; r++)
                                h[r].color.fromArray(f, 3 * r)
                        }
                    }
                    function s() {
                        var t = []
                          , r = [];
                        void 0 !== e.animation && r.push(e.animation),
                        void 0 !== e.animations && (e.animations.length ? r = r.concat(e.animations) : r.push(e.animations));
                        for (var n = 0; n < r.length; n++) {
                            var i = $r.parseAnimation(r[n], l.bones);
                            i && t.push(i)
                        }
                        if (l.morphTargets) {
                            var a = $r.CreateClipsFromMorphTargetSequences(l.morphTargets, 10);
                            t = t.concat(a)
                        }
                        t.length > 0 && (l.animations = t)
                    }
                    var l = new _e
                      , c = void 0 !== e.scale ? 1 / e.scale : 1;
                    if (n(c),
                    a(),
                    o(c),
                    s(),
                    l.computeFaceNormals(),
                    l.computeBoundingSphere(),
                    void 0 === e.materials || 0 === e.materials.length)
                        return {
                            geometry: l
                        };
                    var h = rn.prototype.initMaterials(e.materials, t, this.crossOrigin);
                    return {
                        geometry: l,
                        materials: h
                    }
                }
            }),
            Object.assign(an.prototype, {
                load: function(e, t, r, n) {
                    "" === this.texturePath && (this.texturePath = e.substring(0, e.lastIndexOf("/") + 1));
                    var i = this
                      , a = new _r(i.manager);
                    a.load(e, function(r) {
                        var n = null;
                        try {
                            n = JSON.parse(r)
                        } catch (t) {
                            return void console.error("THREE:ObjectLoader: Can't parse " + e + ".", t.message)
                        }
                        var a = n.metadata;
                        return void 0 === a || void 0 === a.type || "geometry" === a.type.toLowerCase() ? void console.error("THREE.ObjectLoader: Can't load " + e + ". Use THREE.JSONLoader instead.") : void i.parse(n, t)
                    }, r, n)
                },
                setTexturePath: function(e) {
                    this.texturePath = e
                },
                setCrossOrigin: function(e) {
                    this.crossOrigin = e
                },
                parse: function(e, t) {
                    var r = this.parseGeometries(e.geometries)
                      , n = this.parseImages(e.images, function() {
                        void 0 !== t && t(o)
                    })
                      , i = this.parseTextures(e.textures, n)
                      , a = this.parseMaterials(e.materials, i)
                      , o = this.parseObject(e.object, r, a);
                    return e.animations && (o.animations = this.parseAnimations(e.animations)),
                    void 0 !== e.images && 0 !== e.images.length || void 0 !== t && t(o),
                    o
                },
                parseGeometries: function(e) {
                    var t = {};
                    if (void 0 !== e)
                        for (var r = new nn, n = new tn, i = 0, a = e.length; i < a; i++) {
                            var o, s = e[i];
                            switch (s.type) {
                            case "PlaneGeometry":
                            case "PlaneBufferGeometry":
                                o = new Ul[s.type](s.width,s.height,s.widthSegments,s.heightSegments);
                                break;
                            case "BoxGeometry":
                            case "BoxBufferGeometry":
                            case "CubeGeometry":
                                o = new Ul[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);
                                break;
                            case "CircleGeometry":
                            case "CircleBufferGeometry":
                                o = new Ul[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);
                                break;
                            case "CylinderGeometry":
                            case "CylinderBufferGeometry":
                                o = new Ul[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);
                                break;
                            case "ConeGeometry":
                            case "ConeBufferGeometry":
                                o = new Ul[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);
                                break;
                            case "SphereGeometry":
                            case "SphereBufferGeometry":
                                o = new Ul[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);
                                break;
                            case "DodecahedronGeometry":
                            case "IcosahedronGeometry":
                            case "OctahedronGeometry":
                            case "TetrahedronGeometry":
                                o = new Ul[s.type](s.radius,s.detail);
                                break;
                            case "RingGeometry":
                            case "RingBufferGeometry":
                                o = new Ul[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);
                                break;
                            case "TorusGeometry":
                            case "TorusBufferGeometry":
                                o = new Ul[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);
                                break;
                            case "TorusKnotGeometry":
                            case "TorusKnotBufferGeometry":
                                o = new Ul[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);
                                break;
                            case "LatheGeometry":
                            case "LatheBufferGeometry":
                                o = new Ul[s.type](s.points,s.segments,s.phiStart,s.phiLength);
                                break;
                            case "BufferGeometry":
                                o = n.parse(s);
                                break;
                            case "Geometry":
                                o = r.parse(s.data, this.texturePath).geometry;
                                break;
                            default:
                                console.warn('THREE.ObjectLoader: Unsupported geometry type "' + s.type + '"');
                                continue
                            }
                            o.uuid = s.uuid,
                            void 0 !== s.name && (o.name = s.name),
                            t[s.uuid] = o
                        }
                    return t
                },
                parseMaterials: function(e, t) {
                    var r = {};
                    if (void 0 !== e) {
                        var n = new en;
                        n.setTextures(t);
                        for (var i = 0, a = e.length; i < a; i++) {
                            var o = n.parse(e[i]);
                            r[o.uuid] = o
                        }
                    }
                    return r
                },
                parseAnimations: function(e) {
                    for (var t = [], r = 0; r < e.length; r++) {
                        var n = $r.parse(e[r]);
                        t.push(n)
                    }
                    return t
                },
                parseImages: function(e, t) {
                    function r(e) {
                        return n.manager.itemStart(e),
                        o.load(e, function() {
                            n.manager.itemEnd(e)
                        }, void 0, function() {
                            n.manager.itemError(e)
                        })
                    }
                    var n = this
                      , i = {};
                    if (void 0 !== e && e.length > 0) {
                        var a = new Tr(t)
                          , o = new Dr(a);
                        o.setCrossOrigin(this.crossOrigin);
                        for (var s = 0, u = e.length; s < u; s++) {
                            var l = e[s]
                              , c = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url) ? l.url : n.texturePath + l.url;
                            i[l.uuid] = r(c)
                        }
                    }
                    return i
                },
                parseTextures: function(e, t) {
                    function r(e, t) {
                        return "number" == typeof e ? e : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", e),
                        t[e])
                    }
                    var i = {
                        UVMapping: eo,
                        CubeReflectionMapping: to,
                        CubeRefractionMapping: ro,
                        EquirectangularReflectionMapping: no,
                        EquirectangularRefractionMapping: io,
                        SphericalReflectionMapping: ao,
                        CubeUVReflectionMapping: oo,
                        CubeUVRefractionMapping: so
                    }
                      , a = {
                        RepeatWrapping: uo,
                        ClampToEdgeWrapping: lo,
                        MirroredRepeatWrapping: co
                    }
                      , o = {
                        NearestFilter: ho,
                        NearestMipMapNearestFilter: fo,
                        NearestMipMapLinearFilter: po,
                        LinearFilter: mo,
                        LinearMipMapNearestFilter: go,
                        LinearMipMapLinearFilter: vo
                    }
                      , s = {};
                    if (void 0 !== e)
                        for (var u = 0, l = e.length; u < l; u++) {
                            var c = e[u];
                            void 0 === c.image && console.warn('THREE.ObjectLoader: No "image" specified for', c.uuid),
                            void 0 === t[c.image] && console.warn("THREE.ObjectLoader: Undefined image", c.image);
                            var h = new n(t[c.image]);
                            h.needsUpdate = !0,
                            h.uuid = c.uuid,
                            void 0 !== c.name && (h.name = c.name),
                            void 0 !== c.mapping && (h.mapping = r(c.mapping, i)),
                            void 0 !== c.offset && h.offset.fromArray(c.offset),
                            void 0 !== c.repeat && h.repeat.fromArray(c.repeat),
                            void 0 !== c.wrap && (h.wrapS = r(c.wrap[0], a),
                            h.wrapT = r(c.wrap[1], a)),
                            void 0 !== c.minFilter && (h.minFilter = r(c.minFilter, o)),
                            void 0 !== c.magFilter && (h.magFilter = r(c.magFilter, o)),
                            void 0 !== c.anisotropy && (h.anisotropy = c.anisotropy),
                            void 0 !== c.flipY && (h.flipY = c.flipY),
                            s[c.uuid] = h
                        }
                    return s
                },
                parseObject: function() {
                    var e = new l;
                    return function(t, r, n) {
                        function i(e) {
                            return void 0 === r[e] && console.warn("THREE.ObjectLoader: Undefined geometry", e),
                            r[e]
                        }
                        function a(e) {
                            if (void 0 !== e)
                                return void 0 === n[e] && console.warn("THREE.ObjectLoader: Undefined material", e),
                                n[e]
                        }
                        var o;
                        switch (t.type) {
                        case "Scene":
                            o = new ut,
                            void 0 !== t.background && Number.isInteger(t.background) && (o.background = new Q(t.background)),
                            void 0 !== t.fog && ("Fog" === t.fog.type ? o.fog = new ht(t.fog.color,t.fog.near,t.fog.far) : "FogExp2" === t.fog.type && (o.fog = new ct(t.fog.color,t.fog.density)));
                            break;
                        case "PerspectiveCamera":
                            o = new Ce(t.fov,t.aspect,t.near,t.far),
                            void 0 !== t.focus && (o.focus = t.focus),
                            void 0 !== t.zoom && (o.zoom = t.zoom),
                            void 0 !== t.filmGauge && (o.filmGauge = t.filmGauge),
                            void 0 !== t.filmOffset && (o.filmOffset = t.filmOffset),
                            void 0 !== t.view && (o.view = Object.assign({}, t.view));
                            break;
                        case "OrthographicCamera":
                            o = new Oe(t.left,t.right,t.top,t.bottom,t.near,t.far);
                            break;
                        case "AmbientLight":
                            o = new Ur(t.color,t.intensity);
                            break;
                        case "DirectionalLight":
                            o = new Br(t.color,t.intensity);
                            break;
                        case "PointLight":
                            o = new Pr(t.color,t.intensity,t.distance,t.decay);
                            break;
                        case "SpotLight":
                            o = new Rr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);
                            break;
                        case "HemisphereLight":
                            o = new Cr(t.color,t.groundColor,t.intensity);
                            break;
                        case "Mesh":
                            var s = i(t.geometry)
                              , u = a(t.material);
                            o = s.bones && s.bones.length > 0 ? new yt(s,u) : new Se(s,u);
                            break;
                        case "LOD":
                            o = new mt;
                            break;
                        case "Line":
                            o = new wt(i(t.geometry),a(t.material),t.mode);
                            break;
                        case "LineSegments":
                            o = new xt(i(t.geometry),a(t.material));
                            break;
                        case "PointCloud":
                        case "Points":
                            o = new bt(i(t.geometry),a(t.material));
                            break;
                        case "Sprite":
                            o = new pt(a(t.material));
                            break;
                        case "Group":
                            o = new Tt;
                            break;
                        case "SkinnedMesh":
                            console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");
                        default:
                            o = new ue
                        }
                        if (o.uuid = t.uuid,
                        void 0 !== t.name && (o.name = t.name),
                        void 0 !== t.matrix ? (e.fromArray(t.matrix),
                        e.decompose(o.position, o.quaternion, o.scale)) : (void 0 !== t.position && o.position.fromArray(t.position),
                        void 0 !== t.rotation && o.rotation.fromArray(t.rotation),
                        void 0 !== t.quaternion && o.quaternion.fromArray(t.quaternion),
                        void 0 !== t.scale && o.scale.fromArray(t.scale)),
                        void 0 !== t.castShadow && (o.castShadow = t.castShadow),
                        void 0 !== t.receiveShadow && (o.receiveShadow = t.receiveShadow),
                        t.shadow && (void 0 !== t.shadow.bias && (o.shadow.bias = t.shadow.bias),
                        void 0 !== t.shadow.radius && (o.shadow.radius = t.shadow.radius),
                        void 0 !== t.shadow.mapSize && o.shadow.mapSize.fromArray(t.shadow.mapSize),
                        void 0 !== t.shadow.camera && (o.shadow.camera = this.parseObject(t.shadow.camera))),
                        void 0 !== t.visible && (o.visible = t.visible),
                        void 0 !== t.userData && (o.userData = t.userData),
                        void 0 !== t.children)
                            for (var l in t.children)
                                o.add(this.parseObject(t.children[l], r, n));
                        if ("LOD" === t.type)
                            for (var c = t.levels, h = 0; h < c.length; h++) {
                                var f = c[h]
                                  , l = o.getObjectByProperty("uuid", f.object);
                                void 0 !== l && o.addLevel(l, f.distance)
                            }
                        return o
                    }
                }()
            }),
            gn.prototype = {
                constructor: gn,
                getPoint: function(e) {
                    return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),
                    null
                },
                getPointAt: function(e) {
                    var t = this.getUtoTmapping(e);
                    return this.getPoint(t)
                },
                getPoints: function(e) {
                    e || (e = 5);
                    for (var t = [], r = 0; r <= e; r++)
                        t.push(this.getPoint(r / e));
                    return t
                },
                getSpacedPoints: function(e) {
                    e || (e = 5);
                    for (var t = [], r = 0; r <= e; r++)
                        t.push(this.getPointAt(r / e));
                    return t
                },
                getLength: function() {
                    var e = this.getLengths();
                    return e[e.length - 1]
                },
                getLengths: function(e) {
                    if (e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200),
                    this.cacheArcLengths && this.cacheArcLengths.length === e + 1 && !this.needsUpdate)
                        return this.cacheArcLengths;
                    this.needsUpdate = !1;
                    var t, r, n = [], i = this.getPoint(0), a = 0;
                    for (n.push(0),
                    r = 1; r <= e; r++)
                        t = this.getPoint(r / e),
                        a += t.distanceTo(i),
                        n.push(a),
                        i = t;
                    return this.cacheArcLengths = n,
                    n
                },
                updateArcLengths: function() {
                    this.needsUpdate = !0,
                    this.getLengths()
                },
                getUtoTmapping: function(e, t) {
                    var r, n = this.getLengths(), i = 0, a = n.length;
                    r = t ? t : e * n[a - 1];
                    for (var o, s = 0, u = a - 1; s <= u; )
                        if (i = Math.floor(s + (u - s) / 2),
                        o = n[i] - r,
                        o < 0)
                            s = i + 1;
                        else {
                            if (!(o > 0)) {
                                u = i;
                                break
                            }
                            u = i - 1
                        }
                    if (i = u,
                    n[i] === r) {
                        var l = i / (a - 1);
                        return l
                    }
                    var c = n[i]
                      , h = n[i + 1]
                      , f = h - c
                      , d = (r - c) / f
                      , l = (i + d) / (a - 1);
                    return l
                },
                getTangent: function(e) {
                    var t = 1e-4
                      , r = e - t
                      , n = e + t;
                    r < 0 && (r = 0),
                    n > 1 && (n = 1);
                    var i = this.getPoint(r)
                      , a = this.getPoint(n)
                      , o = a.clone().sub(i);
                    return o.normalize()
                },
                getTangentAt: function(e) {
                    var t = this.getUtoTmapping(e);
                    return this.getTangent(t)
                },
                computeFrenetFrames: function(e, t) {
                    var r, n, i, a = new u, o = [], s = [], c = [], h = new u, f = new l;
                    for (r = 0; r <= e; r++)
                        n = r / e,
                        o[r] = this.getTangentAt(n),
                        o[r].normalize();
                    s[0] = new u,
                    c[0] = new u;
                    var d = Number.MAX_VALUE
                      , p = Math.abs(o[0].x)
                      , m = Math.abs(o[0].y)
                      , g = Math.abs(o[0].z);
                    for (p <= d && (d = p,
                    a.set(1, 0, 0)),
                    m <= d && (d = m,
                    a.set(0, 1, 0)),
                    g <= d && a.set(0, 0, 1),
                    h.crossVectors(o[0], a).normalize(),
                    s[0].crossVectors(o[0], h),
                    c[0].crossVectors(o[0], s[0]),
                    r = 1; r <= e; r++)
                        s[r] = s[r - 1].clone(),
                        c[r] = c[r - 1].clone(),
                        h.crossVectors(o[r - 1], o[r]),
                        h.length() > Number.EPSILON && (h.normalize(),
                        i = Math.acos(ms.clamp(o[r - 1].dot(o[r]), -1, 1)),
                        s[r].applyMatrix4(f.makeRotationAxis(h, i))),
                        c[r].crossVectors(o[r], s[r]);
                    if (t === !0)
                        for (i = Math.acos(ms.clamp(s[0].dot(s[e]), -1, 1)),
                        i /= e,
                        o[0].dot(h.crossVectors(s[0], s[e])) > 0 && (i = -i),
                        r = 1; r <= e; r++)
                            s[r].applyMatrix4(f.makeRotationAxis(o[r], i * r)),
                            c[r].crossVectors(o[r], s[r]);
                    return {
                        tangents: o,
                        normals: s,
                        binormals: c
                    }
                }
            },
            vn.prototype = Object.create(gn.prototype),
            vn.prototype.constructor = vn,
            vn.prototype.isLineCurve = !0,
            vn.prototype.getPoint = function(e) {
                if (1 === e)
                    return this.v2.clone();
                var t = this.v2.clone().sub(this.v1);
                return t.multiplyScalar(e).add(this.v1),
                t
            }
            ,
            vn.prototype.getPointAt = function(e) {
                return this.getPoint(e)
            }
            ,
            vn.prototype.getTangent = function(e) {
                var t = this.v2.clone().sub(this.v1);
                return t.normalize()
            }
            ,
            yn.prototype = Object.assign(Object.create(gn.prototype), {
                constructor: yn,
                add: function(e) {
                    this.curves.push(e)
                },
                closePath: function() {
                    var e = this.curves[0].getPoint(0)
                      , t = this.curves[this.curves.length - 1].getPoint(1);
                    e.equals(t) || this.curves.push(new vn(t,e))
                },
                getPoint: function(e) {
                    for (var t = e * this.getLength(), r = this.getCurveLengths(), n = 0; n < r.length; ) {
                        if (r[n] >= t) {
                            var i = r[n] - t
                              , a = this.curves[n]
                              , o = a.getLength()
                              , s = 0 === o ? 0 : 1 - i / o;
                            return a.getPointAt(s)
                        }
                        n++
                    }
                    return null
                },
                getLength: function() {
                    var e = this.getCurveLengths();
                    return e[e.length - 1]
                },
                updateArcLengths: function() {
                    this.needsUpdate = !0,
                    this.cacheLengths = null,
                    this.getLengths()
                },
                getCurveLengths: function() {
                    if (this.cacheLengths && this.cacheLengths.length === this.curves.length)
                        return this.cacheLengths;
                    for (var e = [], t = 0, r = 0, n = this.curves.length; r < n; r++)
                        t += this.curves[r].getLength(),
                        e.push(t);
                    return this.cacheLengths = e,
                    e
                },
                getSpacedPoints: function(e) {
                    e || (e = 40);
                    for (var t = [], r = 0; r <= e; r++)
                        t.push(this.getPoint(r / e));
                    return this.autoClose && t.push(t[0]),
                    t
                },
                getPoints: function(e) {
                    e = e || 12;
                    for (var t, r = [], n = 0, i = this.curves; n < i.length; n++)
                        for (var a = i[n], o = a && a.isEllipseCurve ? 2 * e : a && a.isLineCurve ? 1 : a && a.isSplineCurve ? e * a.points.length : e, s = a.getPoints(o), u = 0; u < s.length; u++) {
                            var l = s[u];
                            t && t.equals(l) || (r.push(l),
                            t = l)
                        }
                    return this.autoClose && r.length > 1 && !r[r.length - 1].equals(r[0]) && r.push(r[0]),
                    r
                },
                createPointsGeometry: function(e) {
                    var t = this.getPoints(e);
                    return this.createGeometry(t)
                },
                createSpacedPointsGeometry: function(e) {
                    var t = this.getSpacedPoints(e);
                    return this.createGeometry(t)
                },
                createGeometry: function(e) {
                    for (var t = new _e, r = 0, n = e.length; r < n; r++) {
                        var i = e[r];
                        t.vertices.push(new u(i.x,i.y,i.z || 0))
                    }
                    return t
                }
            }),
            Mn.prototype = Object.create(gn.prototype),
            Mn.prototype.constructor = Mn,
            Mn.prototype.isEllipseCurve = !0,
            Mn.prototype.getPoint = function(e) {
                for (var t = 2 * Math.PI, n = this.aEndAngle - this.aStartAngle, i = Math.abs(n) < Number.EPSILON; n < 0; )
                    n += t;
                for (; n > t; )
                    n -= t;
                n < Number.EPSILON && (n = i ? 0 : t),
                this.aClockwise !== !0 || i || (n === t ? n = -t : n -= t);
                var a = this.aStartAngle + e * n
                  , o = this.aX + this.xRadius * Math.cos(a)
                  , s = this.aY + this.yRadius * Math.sin(a);
                if (0 !== this.aRotation) {
                    var u = Math.cos(this.aRotation)
                      , l = Math.sin(this.aRotation)
                      , c = o - this.aX
                      , h = s - this.aY;
                    o = c * u - h * l + this.aX,
                    s = c * l + h * u + this.aY
                }
                return new r(o,s)
            }
            ,
            wn.prototype = Object.create(gn.prototype),
            wn.prototype.constructor = wn,
            wn.prototype.isSplineCurve = !0,
            wn.prototype.getPoint = function(e) {
                var t = this.points
                  , n = (t.length - 1) * e
                  , i = Math.floor(n)
                  , a = n - i
                  , o = t[0 === i ? i : i - 1]
                  , s = t[i]
                  , u = t[i > t.length - 2 ? t.length - 1 : i + 1]
                  , l = t[i > t.length - 3 ? t.length - 1 : i + 2];
                return new r(on(a, o.x, s.x, u.x, l.x),on(a, o.y, s.y, u.y, l.y))
            }
            ,
            xn.prototype = Object.create(gn.prototype),
            xn.prototype.constructor = xn,
            xn.prototype.getPoint = function(e) {
                var t = this.v0
                  , n = this.v1
                  , i = this.v2
                  , a = this.v3;
                return new r(mn(e, t.x, n.x, i.x, a.x),mn(e, t.y, n.y, i.y, a.y))
            }
            ,
            An.prototype = Object.create(gn.prototype),
            An.prototype.constructor = An,
            An.prototype.getPoint = function(e) {
                var t = this.v0
                  , n = this.v1
                  , i = this.v2;
                return new r(cn(e, t.x, n.x, i.x),cn(e, t.y, n.y, i.y))
            }
            ;
            var Ql = Object.assign(Object.create(yn.prototype), {
                fromPoints: function(e) {
                    this.moveTo(e[0].x, e[0].y);
                    for (var t = 1, r = e.length; t < r; t++)
                        this.lineTo(e[t].x, e[t].y)
                },
                moveTo: function(e, t) {
                    this.currentPoint.set(e, t)
                },
                lineTo: function(e, t) {
                    var n = new vn(this.currentPoint.clone(),new r(e,t));
                    this.curves.push(n),
                    this.currentPoint.set(e, t)
                },
                quadraticCurveTo: function(e, t, n, i) {
                    var a = new An(this.currentPoint.clone(),new r(e,t),new r(n,i));
                    this.curves.push(a),
                    this.currentPoint.set(n, i)
                },
                bezierCurveTo: function(e, t, n, i, a, o) {
                    var s = new xn(this.currentPoint.clone(),new r(e,t),new r(n,i),new r(a,o));
                    this.curves.push(s),
                    this.currentPoint.set(a, o)
                },
                splineThru: function(e) {
                    var t = [this.currentPoint.clone()].concat(e)
                      , r = new wn(t);
                    this.curves.push(r),
                    this.currentPoint.copy(e[e.length - 1])
                },
                arc: function(e, t, r, n, i, a) {
                    var o = this.currentPoint.x
                      , s = this.currentPoint.y;
                    this.absarc(e + o, t + s, r, n, i, a)
                },
                absarc: function(e, t, r, n, i, a) {
                    this.absellipse(e, t, r, r, n, i, a)
                },
                ellipse: function(e, t, r, n, i, a, o, s) {
                    var u = this.currentPoint.x
                      , l = this.currentPoint.y;
                    this.absellipse(e + u, t + l, r, n, i, a, o, s)
                },
                absellipse: function(e, t, r, n, i, a, o, s) {
                    var u = new Mn(e,t,r,n,i,a,o,s);
                    if (this.curves.length > 0) {
                        var l = u.getPoint(0);
                        l.equals(this.currentPoint) || this.lineTo(l.x, l.y)
                    }
                    this.curves.push(u);
                    var c = u.getPoint(1);
                    this.currentPoint.copy(c)
                }
            });
            bn.prototype = Ql,
            Ql.constructor = bn,
            Tn.prototype = Object.assign(Object.create(Ql), {
                constructor: Tn,
                getPointsHoles: function(e) {
                    for (var t = [], r = 0, n = this.holes.length; r < n; r++)
                        t[r] = this.holes[r].getPoints(e);
                    return t
                },
                extractAllPoints: function(e) {
                    return {
                        shape: this.getPoints(e),
                        holes: this.getPointsHoles(e)
                    }
                },
                extractPoints: function(e) {
                    return this.extractAllPoints(e)
                }
            }),
            _n.prototype = {
                moveTo: function(e, t) {
                    this.currentPath = new bn,
                    this.subPaths.push(this.currentPath),
                    this.currentPath.moveTo(e, t)
                },
                lineTo: function(e, t) {
                    this.currentPath.lineTo(e, t)
                },
                quadraticCurveTo: function(e, t, r, n) {
                    this.currentPath.quadraticCurveTo(e, t, r, n)
                },
                bezierCurveTo: function(e, t, r, n, i, a) {
                    this.currentPath.bezierCurveTo(e, t, r, n, i, a)
                },
                splineThru: function(e) {
                    this.currentPath.splineThru(e)
                },
                toShapes: function(e, t) {
                    function r(e) {
                        for (var t = [], r = 0, n = e.length; r < n; r++) {
                            var i = e[r]
                              , a = new Tn;
                            a.curves = i.curves,
                            t.push(a)
                        }
                        return t
                    }
                    function n(e, t) {
                        for (var r = t.length, n = !1, i = r - 1, a = 0; a < r; i = a++) {
                            var o = t[i]
                              , s = t[a]
                              , u = s.x - o.x
                              , l = s.y - o.y;
                            if (Math.abs(l) > Number.EPSILON) {
                                if (l < 0 && (o = t[a],
                                u = -u,
                                s = t[i],
                                l = -l),
                                e.y < o.y || e.y > s.y)
                                    continue;
                                if (e.y === o.y) {
                                    if (e.x === o.x)
                                        return !0
                                } else {
                                    var c = l * (e.x - o.x) - u * (e.y - o.y);
                                    if (0 === c)
                                        return !0;
                                    if (c < 0)
                                        continue;
                                    n = !n
                                }
                            } else {
                                if (e.y !== o.y)
                                    continue;
                                if (s.x <= e.x && e.x <= o.x || o.x <= e.x && e.x <= s.x)
                                    return !0
                            }
                        }
                        return n
                    }
                    var i = Bl.isClockWise
                      , a = this.subPaths;
                    if (0 === a.length)
                        return [];
                    if (t === !0)
                        return r(a);
                    var o, s, u, l = [];
                    if (1 === a.length)
                        return s = a[0],
                        u = new Tn,
                        u.curves = s.curves,
                        l.push(u),
                        l;
                    var c = !i(a[0].getPoints());
                    c = e ? !c : c;
                    var h, f = [], d = [], p = [], m = 0;
                    d[m] = void 0,
                    p[m] = [];
                    for (var g = 0, v = a.length; g < v; g++)
                        s = a[g],
                        h = s.getPoints(),
                        o = i(h),
                        o = e ? !o : o,
                        o ? (!c && d[m] && m++,
                        d[m] = {
                            s: new Tn,
                            p: h
                        },
                        d[m].s.curves = s.curves,
                        c && m++,
                        p[m] = []) : p[m].push({
                            h: s,
                            p: h[0]
                        });
                    if (!d[0])
                        return r(a);
                    if (d.length > 1) {
                        for (var y = !1, M = [], w = 0, x = d.length; w < x; w++)
                            f[w] = [];
                        for (var w = 0, x = d.length; w < x; w++)
                            for (var A = p[w], b = 0; b < A.length; b++) {
                                for (var T = A[b], _ = !0, E = 0; E < d.length; E++)
                                    n(T.p, d[E].p) && (w !== E && M.push({
                                        froms: w,
                                        tos: E,
                                        hole: b
                                    }),
                                    _ ? (_ = !1,
                                    f[E].push(T)) : y = !0);
                                _ && f[w].push(T)
                            }
                        M.length > 0 && (y || (p = f))
                    }
                    for (var S, g = 0, D = d.length; g < D; g++) {
                        u = d[g].s,
                        l.push(u),
                        S = p[g];
                        for (var N = 0, I = S.length; N < I; N++)
                            u.holes.push(S[N].h)
                    }
                    return l
                }
            },
            Object.assign(En.prototype, {
                isFont: !0,
                generateShapes: function(e, t, r) {
                    function n(e) {
                        for (var r = String(e).split(""), n = t / a.resolution, o = 0, s = [], u = 0; u < r.length; u++) {
                            var l = i(r[u], n, o);
                            o += l.offset,
                            s.push(l.path)
                        }
                        return s
                    }
                    function i(e, t, n) {
                        var i = a.glyphs[e] || a.glyphs["?"];
                        if (i) {
                            var o, s, u, l, c, h, f, d, p, m, g, v = new _n, y = [];
                            if (i.o)
                                for (var M = i._cachedOutline || (i._cachedOutline = i.o.split(" ")), w = 0, x = M.length; w < x; ) {
                                    var A = M[w++];
                                    switch (A) {
                                    case "m":
                                        o = M[w++] * t + n,
                                        s = M[w++] * t,
                                        v.moveTo(o, s);
                                        break;
                                    case "l":
                                        o = M[w++] * t + n,
                                        s = M[w++] * t,
                                        v.lineTo(o, s);
                                        break;
                                    case "q":
                                        if (u = M[w++] * t + n,
                                        l = M[w++] * t,
                                        f = M[w++] * t + n,
                                        d = M[w++] * t,
                                        v.quadraticCurveTo(f, d, u, l),
                                        g = y[y.length - 1]) {
                                            c = g.x,
                                            h = g.y;
                                            for (var b = 1; b <= r; b++) {
                                                var T = b / r;
                                                cn(T, c, f, u),
                                                cn(T, h, d, l)
                                            }
                                        }
                                        break;
                                    case "b":
                                        if (u = M[w++] * t + n,
                                        l = M[w++] * t,
                                        f = M[w++] * t + n,
                                        d = M[w++] * t,
                                        p = M[w++] * t + n,
                                        m = M[w++] * t,
                                        v.bezierCurveTo(f, d, p, m, u, l),
                                        g = y[y.length - 1]) {
                                            c = g.x,
                                            h = g.y;
                                            for (var b = 1; b <= r; b++) {
                                                var T = b / r;
                                                mn(T, c, f, p, u),
                                                mn(T, h, d, m, l)
                                            }
                                        }
                                    }
                                }
                            return {
                                offset: i.ha * t,
                                path: v
                            }
                        }
                    }
                    void 0 === t && (t = 100),
                    void 0 === r && (r = 4);
                    for (var a = this.data, o = n(e), s = [], u = 0, l = o.length; u < l; u++)
                        Array.prototype.push.apply(s, o[u].toShapes());
                    return s
                }
            }),
            Object.assign(Sn.prototype, {
                load: function(e, t, r, n) {
                    var i = this
                      , a = new _r(this.manager);
                    a.load(e, function(e) {
                        var r;
                        try {
                            r = JSON.parse(e)
                        } catch (t) {
                            console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),
                            r = JSON.parse(e.substring(65, e.length - 2))
                        }
                        var n = i.parse(r);
                        t && t(n)
                    }, r, n)
                },
                parse: function(e) {
                    return new En(e)
                }
            });
            var Hl, Wl = {
                getContext: function() {
                    return void 0 === Hl && (Hl = new (window.AudioContext || window.webkitAudioContext)),
                    Hl
                },
                setContext: function(e) {
                    Hl = e
                }
            };
            Object.assign(Dn.prototype, {
                load: function(e, t, r, n) {
                    var i = new _r(this.manager);
                    i.setResponseType("arraybuffer"),
                    i.load(e, function(e) {
                        var r = Wl.getContext();
                        r.decodeAudioData(e, function(e) {
                            t(e)
                        })
                    }, r, n)
                }
            }),
            Nn.prototype = Object.assign(Object.create(Lr.prototype), {
                constructor: Nn,
                isRectAreaLight: !0,
                copy: function(e) {
                    return Lr.prototype.copy.call(this, e),
                    this.width = e.width,
                    this.height = e.height,
                    this
                }
            }),
            Object.assign(In.prototype, {
                update: function() {
                    var e, t, r, n, i, a, o, s = new l, u = new l;
                    return function(l) {
                        var c = e !== this || t !== l.focus || r !== l.fov || n !== l.aspect * this.aspect || i !== l.near || a !== l.far || o !== l.zoom;
                        if (c) {
                            e = this,
                            t = l.focus,
                            r = l.fov,
                            n = l.aspect * this.aspect,
                            i = l.near,
                            a = l.far,
                            o = l.zoom;
                            var h, f, d = l.projectionMatrix.clone(), p = this.eyeSep / 2, m = p * i / t, g = i * Math.tan(ms.DEG2RAD * r * .5) / o;
                            u.elements[12] = -p,
                            s.elements[12] = p,
                            h = -g * n + m,
                            f = g * n + m,
                            d.elements[0] = 2 * i / (f - h),
                            d.elements[8] = (f + h) / (f - h),
                            this.cameraL.projectionMatrix.copy(d),
                            h = -g * n - m,
                            f = g * n - m,
                            d.elements[0] = 2 * i / (f - h),
                            d.elements[8] = (f + h) / (f - h),
                            this.cameraR.projectionMatrix.copy(d)
                        }
                        this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(u),
                        this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(s)
                    }
                }()
            }),
            Ln.prototype = Object.create(ue.prototype),
            Ln.prototype.constructor = Ln,
            Cn.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: Cn,
                getInput: function() {
                    return this.gain
                },
                removeFilter: function() {
                    null !== this.filter && (this.gain.disconnect(this.filter),
                    this.filter.disconnect(this.context.destination),
                    this.gain.connect(this.context.destination),
                    this.filter = null)
                },
                getFilter: function() {
                    return this.filter
                },
                setFilter: function(e) {
                    null !== this.filter ? (this.gain.disconnect(this.filter),
                    this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination),
                    this.filter = e,
                    this.gain.connect(this.filter),
                    this.filter.connect(this.context.destination)
                },
                getMasterVolume: function() {
                    return this.gain.gain.value
                },
                setMasterVolume: function(e) {
                    this.gain.gain.value = e
                },
                updateMatrixWorld: function() {
                    var e = new u
                      , t = new s
                      , r = new u
                      , n = new u;
                    return function(i) {
                        ue.prototype.updateMatrixWorld.call(this, i);
                        var a = this.context.listener
                          , o = this.up;
                        this.matrixWorld.decompose(e, t, r),
                        n.set(0, 0, -1).applyQuaternion(t),
                        a.positionX ? (a.positionX.setValueAtTime(e.x, this.context.currentTime),
                        a.positionY.setValueAtTime(e.y, this.context.currentTime),
                        a.positionZ.setValueAtTime(e.z, this.context.currentTime),
                        a.forwardX.setValueAtTime(n.x, this.context.currentTime),
                        a.forwardY.setValueAtTime(n.y, this.context.currentTime),
                        a.forwardZ.setValueAtTime(n.z, this.context.currentTime),
                        a.upX.setValueAtTime(o.x, this.context.currentTime),
                        a.upY.setValueAtTime(o.y, this.context.currentTime),
                        a.upZ.setValueAtTime(o.z, this.context.currentTime)) : (a.setPosition(e.x, e.y, e.z),
                        a.setOrientation(n.x, n.y, n.z, o.x, o.y, o.z))
                    }
                }()
            }),
            On.prototype = Object.assign(Object.create(ue.prototype), {
                constructor: On,
                getOutput: function() {
                    return this.gain
                },
                setNodeSource: function(e) {
                    return this.hasPlaybackControl = !1,
                    this.sourceType = "audioNode",
                    this.source = e,
                    this.connect(),
                    this
                },
                setBuffer: function(e) {
                    return this.buffer = e,
                    this.sourceType = "buffer",
                    this.autoplay && this.play(),
                    this
                },
                play: function() {
                    if (this.isPlaying === !0)
                        return void console.warn("THREE.Audio: Audio is already playing.");
                    if (this.hasPlaybackControl === !1)
                        return void console.warn("THREE.Audio: this Audio has no playback control.");
                    var e = this.context.createBufferSource();
                    return e.buffer = this.buffer,
                    e.loop = this.loop,
                    e.onended = this.onEnded.bind(this),
                    e.playbackRate.setValueAtTime(this.playbackRate, this.startTime),
                    e.start(0, this.startTime),
                    this.isPlaying = !0,
                    this.source = e,
                    this.connect()
                },
                pause: function() {
                    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(),
                    this.startTime = this.context.currentTime,
                    this.isPlaying = !1,
                    this)
                },
                stop: function() {
                    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.source.stop(),
                    this.startTime = 0,
                    this.isPlaying = !1,
                    this)
                },
                connect: function() {
                    if (this.filters.length > 0) {
                        this.source.connect(this.filters[0]);
                        for (var e = 1, t = this.filters.length; e < t; e++)
                            this.filters[e - 1].connect(this.filters[e]);
                        this.filters[this.filters.length - 1].connect(this.getOutput())
                    } else
                        this.source.connect(this.getOutput());
                    return this
                },
                disconnect: function() {
                    if (this.filters.length > 0) {
                        this.source.disconnect(this.filters[0]);
                        for (var e = 1, t = this.filters.length; e < t; e++)
                            this.filters[e - 1].disconnect(this.filters[e]);
                        this.filters[this.filters.length - 1].disconnect(this.getOutput())
                    } else
                        this.source.disconnect(this.getOutput());
                    return this
                },
                getFilters: function() {
                    return this.filters
                },
                setFilters: function(e) {
                    return e || (e = []),
                    this.isPlaying === !0 ? (this.disconnect(),
                    this.filters = e,
                    this.connect()) : this.filters = e,
                    this
                },
                getFilter: function() {
                    return this.getFilters()[0]
                },
                setFilter: function(e) {
                    return this.setFilters(e ? [e] : [])
                },
                setPlaybackRate: function(e) {
                    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.playbackRate = e,
                    this.isPlaying === !0 && this.source.playbackRate.setValueAtTime(this.playbackRate, this.context.currentTime),
                    this)
                },
                getPlaybackRate: function() {
                    return this.playbackRate
                },
                onEnded: function() {
                    this.isPlaying = !1
                },
                getLoop: function() {
                    return this.hasPlaybackControl === !1 ? (console.warn("THREE.Audio: this Audio has no playback control."),
                    !1) : this.loop
                },
                setLoop: function(e) {
                    return this.hasPlaybackControl === !1 ? void console.warn("THREE.Audio: this Audio has no playback control.") : (this.loop = e,
                    this.isPlaying === !0 && (this.source.loop = this.loop),
                    this)
                },
                getVolume: function() {
                    return this.gain.gain.value
                },
                setVolume: function(e) {
                    return this.gain.gain.value = e,
                    this
                }
            }),
            jn.prototype = Object.assign(Object.create(On.prototype), {
                constructor: jn,
                getOutput: function() {
                    return this.panner
                },
                getRefDistance: function() {
                    return this.panner.refDistance
                },
                setRefDistance: function(e) {
                    this.panner.refDistance = e
                },
                getRolloffFactor: function() {
                    return this.panner.rolloffFactor
                },
                setRolloffFactor: function(e) {
                    this.panner.rolloffFactor = e
                },
                getDistanceModel: function() {
                    return this.panner.distanceModel
                },
                setDistanceModel: function(e) {
                    this.panner.distanceModel = e
                },
                getMaxDistance: function() {
                    return this.panner.maxDistance
                },
                setMaxDistance: function(e) {
                    this.panner.maxDistance = e
                },
                updateMatrixWorld: function() {
                    var e = new u;
                    return function(t) {
                        ue.prototype.updateMatrixWorld.call(this, t),
                        e.setFromMatrixPosition(this.matrixWorld),
                        this.panner.setPosition(e.x, e.y, e.z)
                    }
                }()
            }),
            Object.assign(Rn.prototype, {
                getFrequencyData: function() {
                    return this.analyser.getByteFrequencyData(this.data),
                    this.data
                },
                getAverageFrequency: function() {
                    for (var e = 0, t = this.getFrequencyData(), r = 0; r < t.length; r++)
                        e += t[r];
                    return e / t.length
                }
            }),
            Pn.prototype = {
                constructor: Pn,
                accumulate: function(e, t) {
                    var r = this.buffer
                      , n = this.valueSize
                      , i = e * n + n
                      , a = this.cumulativeWeight;
                    if (0 === a) {
                        for (var o = 0; o !== n; ++o)
                            r[i + o] = r[o];
                        a = t
                    } else {
                        a += t;
                        var s = t / a;
                        this._mixBufferRegion(r, i, 0, s, n)
                    }
                    this.cumulativeWeight = a
                },
                apply: function(e) {
                    var t = this.valueSize
                      , r = this.buffer
                      , n = e * t + t
                      , i = this.cumulativeWeight
                      , a = this.binding;
                    if (this.cumulativeWeight = 0,
                    i < 1) {
                        var o = 3 * t;
                        this._mixBufferRegion(r, n, o, 1 - i, t)
                    }
                    for (var s = t, u = t + t; s !== u; ++s)
                        if (r[s] !== r[s + t]) {
                            a.setValue(r, n);
                            break
                        }
                },
                saveOriginalState: function() {
                    var e = this.binding
                      , t = this.buffer
                      , r = this.valueSize
                      , n = 3 * r;
                    e.getValue(t, n);
                    for (var i = r, a = n; i !== a; ++i)
                        t[i] = t[n + i % r];
                    this.cumulativeWeight = 0
                },
                restoreOriginalState: function() {
                    var e = 3 * this.valueSize;
                    this.binding.setValue(this.buffer, e)
                },
                _select: function(e, t, r, n, i) {
                    if (n >= .5)
                        for (var a = 0; a !== i; ++a)
                            e[t + a] = e[r + a]
                },
                _slerp: function(e, t, r, n, i) {
                    s.slerpFlat(e, t, e, t, e, r, n)
                },
                _lerp: function(e, t, r, n, i) {
                    for (var a = 1 - n, o = 0; o !== i; ++o) {
                        var s = t + o;
                        e[s] = e[s] * a + e[r + o] * n
                    }
                }
            },
            zn.prototype = {
                constructor: zn,
                getValue: function(e, t) {
                    this.bind(),
                    this.getValue(e, t)
                },
                setValue: function(e, t) {
                    this.bind(),
                    this.setValue(e, t)
                },
                bind: function() {
                    var e = this.node
                      , t = this.parsedPath
                      , r = t.objectName
                      , n = t.propertyName
                      , i = t.propertyIndex;
                    if (e || (e = zn.findNode(this.rootNode, t.nodeName) || this.rootNode,
                    this.node = e),
                    this.getValue = this._getValue_unavailable,
                    this.setValue = this._setValue_unavailable,
                    !e)
                        return void console.error("  trying to update node for track: " + this.path + " but it wasn't found.");
                    if (r) {
                        var a = t.objectIndex;
                        switch (r) {
                        case "materials":
                            if (!e.material)
                                return void console.error("  can not bind to material as node does not have a material", this);
                            if (!e.material.materials)
                                return void console.error("  can not bind to material.materials as node.material does not have a materials array", this);
                            e = e.material.materials;
                            break;
                        case "bones":
                            if (!e.skeleton)
                                return void console.error("  can not bind to bones as node does not have a skeleton", this);
                            e = e.skeleton.bones;
                            for (var o = 0; o < e.length; o++)
                                if (e[o].name === a) {
                                    a = o;
                                    break
                                }
                            break;
                        default:
                            if (void 0 === e[r])
                                return void console.error("  can not bind to objectName of node, undefined", this);
                            e = e[r]
                        }
                        if (void 0 !== a) {
                            if (void 0 === e[a])
                                return void console.error("  trying to bind to objectIndex of objectName, but is undefined:", this, e);
                            e = e[a]
                        }
                    }
                    var s = e[n];
                    if (void 0 === s) {
                        var u = t.nodeName;
                        return void console.error("  trying to update property for track: " + u + "." + n + " but it wasn't found.", e)
                    }
                    var l = this.Versioning.None;
                    void 0 !== e.needsUpdate ? (l = this.Versioning.NeedsUpdate,
                    this.targetObject = e) : void 0 !== e.matrixWorldNeedsUpdate && (l = this.Versioning.MatrixWorldNeedsUpdate,
                    this.targetObject = e);
                    var c = this.BindingType.Direct;
                    if (void 0 !== i) {
                        if ("morphTargetInfluences" === n) {
                            if (!e.geometry)
                                return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry", this);
                            if (!e.geometry.morphTargets)
                                return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets", this);
                            for (var o = 0; o < this.node.geometry.morphTargets.length; o++)
                                if (e.geometry.morphTargets[o].name === i) {
                                    i = o;
                                    break
                                }
                        }
                        c = this.BindingType.ArrayElement,
                        this.resolvedProperty = s,
                        this.propertyIndex = i
                    } else
                        void 0 !== s.fromArray && void 0 !== s.toArray ? (c = this.BindingType.HasFromToArray,
                        this.resolvedProperty = s) : void 0 !== s.length ? (c = this.BindingType.EntireArray,
                        this.resolvedProperty = s) : this.propertyName = n;
                    this.getValue = this.GetterByBindingType[c],
                    this.setValue = this.SetterByBindingTypeAndVersioning[c][l]
                },
                unbind: function() {
                    this.node = null,
                    this.getValue = this._getValue_unbound,
                    this.setValue = this._setValue_unbound
                }
            },
            Object.assign(zn.prototype, {
                _getValue_unavailable: function() {},
                _setValue_unavailable: function() {},
                _getValue_unbound: zn.prototype.getValue,
                _setValue_unbound: zn.prototype.setValue,
                BindingType: {
                    Direct: 0,
                    EntireArray: 1,
                    ArrayElement: 2,
                    HasFromToArray: 3
                },
                Versioning: {
                    None: 0,
                    NeedsUpdate: 1,
                    MatrixWorldNeedsUpdate: 2
                },
                GetterByBindingType: [function(e, t) {
                    e[t] = this.node[this.propertyName]
                }
                , function(e, t) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        e[t++] = r[n]
                }
                , function(e, t) {
                    e[t] = this.resolvedProperty[this.propertyIndex]
                }
                , function(e, t) {
                    this.resolvedProperty.toArray(e, t)
                }
                ],
                SetterByBindingTypeAndVersioning: [[function(e, t) {
                    this.node[this.propertyName] = e[t]
                }
                , function(e, t) {
                    this.node[this.propertyName] = e[t],
                    this.targetObject.needsUpdate = !0
                }
                , function(e, t) {
                    this.node[this.propertyName] = e[t],
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ], [function(e, t) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        r[n] = e[t++]
                }
                , function(e, t) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        r[n] = e[t++];
                    this.targetObject.needsUpdate = !0
                }
                , function(e, t) {
                    for (var r = this.resolvedProperty, n = 0, i = r.length; n !== i; ++n)
                        r[n] = e[t++];
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ], [function(e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t]
                }
                , function(e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t],
                    this.targetObject.needsUpdate = !0
                }
                , function(e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t],
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ], [function(e, t) {
                    this.resolvedProperty.fromArray(e, t)
                }
                , function(e, t) {
                    this.resolvedProperty.fromArray(e, t),
                    this.targetObject.needsUpdate = !0
                }
                , function(e, t) {
                    this.resolvedProperty.fromArray(e, t),
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }
                ]]
            }),
            zn.Composite = function(e, t, r) {
                var n = r || zn.parseTrackName(t);
                this._targetGroup = e,
                this._bindings = e.subscribe_(t, n)
            }
            ,
            zn.Composite.prototype = {
                constructor: zn.Composite,
                getValue: function(e, t) {
                    this.bind();
                    var r = this._targetGroup.nCachedObjects_
                      , n = this._bindings[r];
                    void 0 !== n && n.getValue(e, t)
                },
                setValue: function(e, t) {
                    for (var r = this._bindings, n = this._targetGroup.nCachedObjects_, i = r.length; n !== i; ++n)
                        r[n].setValue(e, t)
                },
                bind: function() {
                    for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, r = e.length; t !== r; ++t)
                        e[t].bind()
                },
                unbind: function() {
                    for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, r = e.length; t !== r; ++t)
                        e[t].unbind()
                }
            },
            zn.create = function(e, t, r) {
                return e && e.isAnimationObjectGroup ? new zn.Composite(e,t,r) : new zn(e,t,r)
            }
            ,
            zn.parseTrackName = function(e) {
                var t = /^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/
                  , r = t.exec(e);
                if (!r)
                    throw new Error("cannot parse trackName at all: " + e);
                var n = {
                    nodeName: r[2],
                    objectName: r[3],
                    objectIndex: r[4],
                    propertyName: r[5],
                    propertyIndex: r[6]
                };
                if (null === n.propertyName || 0 === n.propertyName.length)
                    throw new Error("can not parse propertyName from trackName: " + e);
                return n
            }
            ,
            zn.findNode = function(e, t) {
                if (!t || "" === t || "root" === t || "." === t || t === -1 || t === e.name || t === e.uuid)
                    return e;
                if (e.skeleton) {
                    var r = function(e) {
                        for (var r = 0; r < e.bones.length; r++) {
                            var n = e.bones[r];
                            if (n.name === t)
                                return n
                        }
                        return null
                    }
                      , n = r(e.skeleton);
                    if (n)
                        return n
                }
                if (e.children) {
                    var i = function(e) {
                        for (var r = 0; r < e.length; r++) {
                            var n = e[r];
                            if (n.name === t || n.uuid === t)
                                return n;
                            var a = i(n.children);
                            if (a)
                                return a
                        }
                        return null
                    }
                      , a = i(e.children);
                    if (a)
                        return a
                }
                return null
            }
            ,
            Bn.prototype = {
                constructor: Bn,
                isAnimationObjectGroup: !0,
                add: function(e) {
                    for (var t = this._objects, r = t.length, n = this.nCachedObjects_, i = this._indicesByUUID, a = this._paths, o = this._parsedPaths, s = this._bindings, u = s.length, l = 0, c = arguments.length; l !== c; ++l) {
                        var h = arguments[l]
                          , f = h.uuid
                          , d = i[f]
                          , p = void 0;
                        if (void 0 === d) {
                            d = r++,
                            i[f] = d,
                            t.push(h);
                            for (var m = 0, g = u; m !== g; ++m)
                                s[m].push(new zn(h,a[m],o[m]))
                        } else if (d < n) {
                            p = t[d];
                            var v = --n
                              , y = t[v];
                            i[y.uuid] = d,
                            t[d] = y,
                            i[f] = v,
                            t[v] = h;
                            for (var m = 0, g = u; m !== g; ++m) {
                                var M = s[m]
                                  , w = M[v]
                                  , x = M[d];
                                M[d] = w,
                                void 0 === x && (x = new zn(h,a[m],o[m])),
                                M[v] = x
                            }
                        } else
                            t[d] !== p && console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")
                    }
                    this.nCachedObjects_ = n
                },
                remove: function(e) {
                    for (var t = this._objects, r = this.nCachedObjects_, n = this._indicesByUUID, i = this._bindings, a = i.length, o = 0, s = arguments.length; o !== s; ++o) {
                        var u = arguments[o]
                          , l = u.uuid
                          , c = n[l];
                        if (void 0 !== c && c >= r) {
                            var h = r++
                              , f = t[h];
                            n[f.uuid] = c,
                            t[c] = f,
                            n[l] = h,
                            t[h] = u;
                            for (var d = 0, p = a; d !== p; ++d) {
                                var m = i[d]
                                  , g = m[h]
                                  , v = m[c];
                                m[c] = g,
                                m[h] = v
                            }
                        }
                    }
                    this.nCachedObjects_ = r
                },
                uncache: function(e) {
                    for (var t = this._objects, r = t.length, n = this.nCachedObjects_, i = this._indicesByUUID, a = this._bindings, o = a.length, s = 0, u = arguments.length; s !== u; ++s) {
                        var l = arguments[s]
                          , c = l.uuid
                          , h = i[c];
                        if (void 0 !== h)
                            if (delete i[c],
                            h < n) {
                                var f = --n
                                  , d = t[f]
                                  , p = --r
                                  , m = t[p];
                                i[d.uuid] = h,
                                t[h] = d,
                                i[m.uuid] = f,
                                t[f] = m,
                                t.pop();
                                for (var g = 0, v = o; g !== v; ++g) {
                                    var y = a[g]
                                      , M = y[f]
                                      , w = y[p];
                                    y[h] = M,
                                    y[f] = w,
                                    y.pop()
                                }
                            } else {
                                var p = --r
                                  , m = t[p];
                                i[m.uuid] = h,
                                t[h] = m,
                                t.pop();
                                for (var g = 0, v = o; g !== v; ++g) {
                                    var y = a[g];
                                    y[h] = y[p],
                                    y.pop()
                                }
                            }
                    }
                    this.nCachedObjects_ = n
                },
                subscribe_: function(e, t) {
                    var r = this._bindingsIndicesByPath
                      , n = r[e]
                      , i = this._bindings;
                    if (void 0 !== n)
                        return i[n];
                    var a = this._paths
                      , o = this._parsedPaths
                      , s = this._objects
                      , u = s.length
                      , l = this.nCachedObjects_
                      , c = new Array(u);
                    n = i.length,
                    r[e] = n,
                    a.push(e),
                    o.push(t),
                    i.push(c);
                    for (var h = l, f = s.length; h !== f; ++h) {
                        var d = s[h];
                        c[h] = new zn(d,e,t)
                    }
                    return c
                },
                unsubscribe_: function(e) {
                    var t = this._bindingsIndicesByPath
                      , r = t[e];
                    if (void 0 !== r) {
                        var n = this._paths
                          , i = this._parsedPaths
                          , a = this._bindings
                          , o = a.length - 1
                          , s = a[o]
                          , u = e[o];
                        t[u] = r,
                        a[r] = s,
                        a.pop(),
                        i[r] = i[o],
                        i.pop(),
                        n[r] = n[o],
                        n.pop()
                    }
                }
            },
            Un.prototype = {
                constructor: Un,
                play: function() {
                    return this._mixer._activateAction(this),
                    this
                },
                stop: function() {
                    return this._mixer._deactivateAction(this),
                    this.reset()
                },
                reset: function() {
                    return this.paused = !1,
                    this.enabled = !0,
                    this.time = 0,
                    this._loopCount = -1,
                    this._startTime = null,
                    this.stopFading().stopWarping()
                },
                isRunning: function() {
                    return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this)
                },
                isScheduled: function() {
                    return this._mixer._isActiveAction(this)
                },
                startAt: function(e) {
                    return this._startTime = e,
                    this
                },
                setLoop: function(e, t) {
                    return this.loop = e,
                    this.repetitions = t,
                    this
                },
                setEffectiveWeight: function(e) {
                    return this.weight = e,
                    this._effectiveWeight = this.enabled ? e : 0,
                    this.stopFading()
                },
                getEffectiveWeight: function() {
                    return this._effectiveWeight
                },
                fadeIn: function(e) {
                    return this._scheduleFading(e, 0, 1)
                },
                fadeOut: function(e) {
                    return this._scheduleFading(e, 1, 0)
                },
                crossFadeFrom: function(e, t, r) {
                    if (e.fadeOut(t),
                    this.fadeIn(t),
                    r) {
                        var n = this._clip.duration
                          , i = e._clip.duration
                          , a = i / n
                          , o = n / i;
                        e.warp(1, a, t),
                        this.warp(o, 1, t)
                    }
                    return this
                },
                crossFadeTo: function(e, t, r) {
                    return e.crossFadeFrom(this, t, r)
                },
                stopFading: function() {
                    var e = this._weightInterpolant;
                    return null !== e && (this._weightInterpolant = null,
                    this._mixer._takeBackControlInterpolant(e)),
                    this
                },
                setEffectiveTimeScale: function(e) {
                    return this.timeScale = e,
                    this._effectiveTimeScale = this.paused ? 0 : e,
                    this.stopWarping()
                },
                getEffectiveTimeScale: function() {
                    return this._effectiveTimeScale
                },
                setDuration: function(e) {
                    return this.timeScale = this._clip.duration / e,
                    this.stopWarping()
                },
                syncWith: function(e) {
                    return this.time = e.time,
                    this.timeScale = e.timeScale,
                    this.stopWarping()
                },
                halt: function(e) {
                    return this.warp(this._effectiveTimeScale, 0, e)
                },
                warp: function(e, t, r) {
                    var n = this._mixer
                      , i = n.time
                      , a = this._timeScaleInterpolant
                      , o = this.timeScale;
                    null === a && (a = n._lendControlInterpolant(),
                    this._timeScaleInterpolant = a);
                    var s = a.parameterPositions
                      , u = a.sampleValues;
                    return s[0] = i,
                    s[1] = i + r,
                    u[0] = e / o,
                    u[1] = t / o,
                    this
                },
                stopWarping: function() {
                    var e = this._timeScaleInterpolant;
                    return null !== e && (this._timeScaleInterpolant = null,
                    this._mixer._takeBackControlInterpolant(e)),
                    this
                },
                getMixer: function() {
                    return this._mixer
                },
                getClip: function() {
                    return this._clip
                },
                getRoot: function() {
                    return this._localRoot || this._mixer._root
                },
                _update: function(e, t, r, n) {
                    var i = this._startTime;
                    if (null !== i) {
                        var a = (e - i) * r;
                        if (a < 0 || 0 === r)
                            return;
                        this._startTime = null,
                        t = r * a
                    }
                    t *= this._updateTimeScale(e);
                    var o = this._updateTime(t)
                      , s = this._updateWeight(e);
                    if (s > 0)
                        for (var u = this._interpolants, l = this._propertyBindings, c = 0, h = u.length; c !== h; ++c)
                            u[c].evaluate(o),
                            l[c].accumulate(n, s)
                },
                _updateWeight: function(e) {
                    var t = 0;
                    if (this.enabled) {
                        t = this.weight;
                        var r = this._weightInterpolant;
                        if (null !== r) {
                            var n = r.evaluate(e)[0];
                            t *= n,
                            e > r.parameterPositions[1] && (this.stopFading(),
                            0 === n && (this.enabled = !1))
                        }
                    }
                    return this._effectiveWeight = t,
                    t
                },
                _updateTimeScale: function(e) {
                    var t = 0;
                    if (!this.paused) {
                        t = this.timeScale;
                        var r = this._timeScaleInterpolant;
                        if (null !== r) {
                            var n = r.evaluate(e)[0];
                            t *= n,
                            e > r.parameterPositions[1] && (this.stopWarping(),
                            0 === t ? this.paused = !0 : this.timeScale = t)
                        }
                    }
                    return this._effectiveTimeScale = t,
                    t
                },
                _updateTime: function(e) {
                    var t = this.time + e;
                    if (0 === e)
                        return t;
                    var r = this._clip.duration
                      , n = this.loop
                      , i = this._loopCount;
                    if (n === Wo) {
                        i === -1 && (this._loopCount = 0,
                        this._setEndings(!0, !0, !1));
                        e: {
                            if (t >= r)
                                t = r;
                            else {
                                if (!(t < 0))
                                    break e;
                                t = 0
                            }
                            this.clampWhenFinished ? this.paused = !0 : this.enabled = !1,
                            this._mixer.dispatchEvent({
                                type: "finished",
                                action: this,
                                direction: e < 0 ? -1 : 1
                            })
                        }
                    } else {
                        var a = n === qo;
                        if (i === -1 && (e >= 0 ? (i = 0,
                        this._setEndings(!0, 0 === this.repetitions, a)) : this._setEndings(0 === this.repetitions, !0, a)),
                        t >= r || t < 0) {
                            var o = Math.floor(t / r);
                            t -= r * o,
                            i += Math.abs(o);
                            var s = this.repetitions - i;
                            if (s < 0)
                                this.clampWhenFinished ? this.paused = !0 : this.enabled = !1,
                                t = e > 0 ? r : 0,
                                this._mixer.dispatchEvent({
                                    type: "finished",
                                    action: this,
                                    direction: e > 0 ? 1 : -1
                                });
                            else {
                                if (0 === s) {
                                    var u = e < 0;
                                    this._setEndings(u, !u, a)
                                } else
                                    this._setEndings(!1, !1, a);
                                this._loopCount = i,
                                this._mixer.dispatchEvent({
                                    type: "loop",
                                    action: this,
                                    loopDelta: o
                                })
                            }
                        }
                        if (a && 1 === (1 & i))
                            return this.time = t,
                            r - t
                    }
                    return this.time = t,
                    t
                },
                _setEndings: function(e, t, r) {
                    var n = this._interpolantSettings;
                    r ? (n.endingStart = es,
                    n.endingEnd = es) : (e ? n.endingStart = this.zeroSlopeAtStart ? es : $o : n.endingStart = ts,
                    t ? n.endingEnd = this.zeroSlopeAtEnd ? es : $o : n.endingEnd = ts)
                },
                _scheduleFading: function(e, t, r) {
                    var n = this._mixer
                      , i = n.time
                      , a = this._weightInterpolant;
                    null === a && (a = n._lendControlInterpolant(),
                    this._weightInterpolant = a);
                    var o = a.parameterPositions
                      , s = a.sampleValues;
                    return o[0] = i,
                    s[0] = t,
                    o[1] = i + e,
                    s[1] = r,
                    this
                }
            },
            Vn.prototype = {
                constructor: Vn,
                clipAction: function(e, t) {
                    var r = t || this._root
                      , n = r.uuid
                      , i = "string" == typeof e ? $r.findByName(r, e) : e
                      , a = null !== i ? i.uuid : e
                      , o = this._actionsByClip[a]
                      , s = null;
                    if (void 0 !== o) {
                        var u = o.actionByRoot[n];
                        if (void 0 !== u)
                            return u;
                        s = o.knownActions[0],
                        null === i && (i = s._clip)
                    }
                    if (null === i)
                        return null;
                    var l = new Un(this,i,t);
                    return this._bindAction(l, s),
                    this._addInactiveAction(l, a, n),
                    l
                },
                existingAction: function(e, t) {
                    var r = t || this._root
                      , n = r.uuid
                      , i = "string" == typeof e ? $r.findByName(r, e) : e
                      , a = i ? i.uuid : e
                      , o = this._actionsByClip[a];
                    return void 0 !== o ? o.actionByRoot[n] || null : null
                },
                stopAllAction: function() {
                    var e = this._actions
                      , t = this._nActiveActions
                      , r = this._bindings
                      , n = this._nActiveBindings;
                    this._nActiveActions = 0,
                    this._nActiveBindings = 0;
                    for (var i = 0; i !== t; ++i)
                        e[i].reset();
                    for (var i = 0; i !== n; ++i)
                        r[i].useCount = 0;
                    return this
                },
                update: function(e) {
                    e *= this.timeScale;
                    for (var t = this._actions, r = this._nActiveActions, n = this.time += e, i = Math.sign(e), a = this._accuIndex ^= 1, o = 0; o !== r; ++o) {
                        var s = t[o];
                        s.enabled && s._update(n, e, i, a)
                    }
                    for (var u = this._bindings, l = this._nActiveBindings, o = 0; o !== l; ++o)
                        u[o].apply(a);
                    return this
                },
                getRoot: function() {
                    return this._root
                },
                uncacheClip: function(e) {
                    var t = this._actions
                      , r = e.uuid
                      , n = this._actionsByClip
                      , i = n[r];
                    if (void 0 !== i) {
                        for (var a = i.knownActions, o = 0, s = a.length; o !== s; ++o) {
                            var u = a[o];
                            this._deactivateAction(u);
                            var l = u._cacheIndex
                              , c = t[t.length - 1];
                            u._cacheIndex = null,
                            u._byClipCacheIndex = null,
                            c._cacheIndex = l,
                            t[l] = c,
                            t.pop(),
                            this._removeInactiveBindingsForAction(u)
                        }
                        delete n[r]
                    }
                },
                uncacheRoot: function(e) {
                    var t = e.uuid
                      , r = this._actionsByClip;
                    for (var n in r) {
                        var i = r[n].actionByRoot
                          , a = i[t];
                        void 0 !== a && (this._deactivateAction(a),
                        this._removeInactiveAction(a))
                    }
                    var o = this._bindingsByRootAndName
                      , s = o[t];
                    if (void 0 !== s)
                        for (var u in s) {
                            var l = s[u];
                            l.restoreOriginalState(),
                            this._removeInactiveBinding(l)
                        }
                },
                uncacheAction: function(e, t) {
                    var r = this.existingAction(e, t);
                    null !== r && (this._deactivateAction(r),
                    this._removeInactiveAction(r))
                }
            },
            Object.assign(Vn.prototype, {
                _bindAction: function(e, t) {
                    var r = e._localRoot || this._root
                      , n = e._clip.tracks
                      , i = n.length
                      , a = e._propertyBindings
                      , o = e._interpolants
                      , s = r.uuid
                      , u = this._bindingsByRootAndName
                      , l = u[s];
                    void 0 === l && (l = {},
                    u[s] = l);
                    for (var c = 0; c !== i; ++c) {
                        var h = n[c]
                          , f = h.name
                          , d = l[f];
                        if (void 0 !== d)
                            a[c] = d;
                        else {
                            if (d = a[c],
                            void 0 !== d) {
                                null === d._cacheIndex && (++d.referenceCount,
                                this._addInactiveBinding(d, s, f));
                                continue
                            }
                            var p = t && t._propertyBindings[c].binding.parsedPath;
                            d = new Pn(zn.create(r, f, p),h.ValueTypeName,h.getValueSize()),
                            ++d.referenceCount,
                            this._addInactiveBinding(d, s, f),
                            a[c] = d
                        }
                        o[c].resultBuffer = d.buffer
                    }
                },
                _activateAction: function(e) {
                    if (!this._isActiveAction(e)) {
                        if (null === e._cacheIndex) {
                            var t = (e._localRoot || this._root).uuid
                              , r = e._clip.uuid
                              , n = this._actionsByClip[r];
                            this._bindAction(e, n && n.knownActions[0]),
                            this._addInactiveAction(e, r, t)
                        }
                        for (var i = e._propertyBindings, a = 0, o = i.length; a !== o; ++a) {
                            var s = i[a];
                            0 === s.useCount++ && (this._lendBinding(s),
                            s.saveOriginalState())
                        }
                        this._lendAction(e)
                    }
                },
                _deactivateAction: function(e) {
                    if (this._isActiveAction(e)) {
                        for (var t = e._propertyBindings, r = 0, n = t.length; r !== n; ++r) {
                            var i = t[r];
                            0 === --i.useCount && (i.restoreOriginalState(),
                            this._takeBackBinding(i))
                        }
                        this._takeBackAction(e)
                    }
                },
                _initMemoryManager: function() {
                    this._actions = [],
                    this._nActiveActions = 0,
                    this._actionsByClip = {},
                    this._bindings = [],
                    this._nActiveBindings = 0,
                    this._bindingsByRootAndName = {},
                    this._controlInterpolants = [],
                    this._nActiveControlInterpolants = 0;
                    var e = this;
                    this.stats = {
                        actions: {
                            get total() {
                                return e._actions.length
                            },
                            get inUse() {
                                return e._nActiveActions
                            }
                        },
                        bindings: {
                            get total() {
                                return e._bindings.length
                            },
                            get inUse() {
                                return e._nActiveBindings
                            }
                        },
                        controlInterpolants: {
                            get total() {
                                return e._controlInterpolants.length
                            },
                            get inUse() {
                                return e._nActiveControlInterpolants;
                            }
                        }
                    }
                },
                _isActiveAction: function(e) {
                    var t = e._cacheIndex;
                    return null !== t && t < this._nActiveActions
                },
                _addInactiveAction: function(e, t, r) {
                    var n = this._actions
                      , i = this._actionsByClip
                      , a = i[t];
                    if (void 0 === a)
                        a = {
                            knownActions: [e],
                            actionByRoot: {}
                        },
                        e._byClipCacheIndex = 0,
                        i[t] = a;
                    else {
                        var o = a.knownActions;
                        e._byClipCacheIndex = o.length,
                        o.push(e)
                    }
                    e._cacheIndex = n.length,
                    n.push(e),
                    a.actionByRoot[r] = e
                },
                _removeInactiveAction: function(e) {
                    var t = this._actions
                      , r = t[t.length - 1]
                      , n = e._cacheIndex;
                    r._cacheIndex = n,
                    t[n] = r,
                    t.pop(),
                    e._cacheIndex = null;
                    var i = e._clip.uuid
                      , a = this._actionsByClip
                      , o = a[i]
                      , s = o.knownActions
                      , u = s[s.length - 1]
                      , l = e._byClipCacheIndex;
                    u._byClipCacheIndex = l,
                    s[l] = u,
                    s.pop(),
                    e._byClipCacheIndex = null;
                    var c = o.actionByRoot
                      , h = (t._localRoot || this._root).uuid;
                    delete c[h],
                    0 === s.length && delete a[i],
                    this._removeInactiveBindingsForAction(e)
                },
                _removeInactiveBindingsForAction: function(e) {
                    for (var t = e._propertyBindings, r = 0, n = t.length; r !== n; ++r) {
                        var i = t[r];
                        0 === --i.referenceCount && this._removeInactiveBinding(i)
                    }
                },
                _lendAction: function(e) {
                    var t = this._actions
                      , r = e._cacheIndex
                      , n = this._nActiveActions++
                      , i = t[n];
                    e._cacheIndex = n,
                    t[n] = e,
                    i._cacheIndex = r,
                    t[r] = i
                },
                _takeBackAction: function(e) {
                    var t = this._actions
                      , r = e._cacheIndex
                      , n = --this._nActiveActions
                      , i = t[n];
                    e._cacheIndex = n,
                    t[n] = e,
                    i._cacheIndex = r,
                    t[r] = i
                },
                _addInactiveBinding: function(e, t, r) {
                    var n = this._bindingsByRootAndName
                      , i = n[t]
                      , a = this._bindings;
                    void 0 === i && (i = {},
                    n[t] = i),
                    i[r] = e,
                    e._cacheIndex = a.length,
                    a.push(e)
                },
                _removeInactiveBinding: function(e) {
                    var t = this._bindings
                      , r = e.binding
                      , n = r.rootNode.uuid
                      , i = r.path
                      , a = this._bindingsByRootAndName
                      , o = a[n]
                      , s = t[t.length - 1]
                      , u = e._cacheIndex;
                    s._cacheIndex = u,
                    t[u] = s,
                    t.pop(),
                    delete o[i];
                    e: {
                        for (var l in o)
                            break e;
                        delete a[n]
                    }
                },
                _lendBinding: function(e) {
                    var t = this._bindings
                      , r = e._cacheIndex
                      , n = this._nActiveBindings++
                      , i = t[n];
                    e._cacheIndex = n,
                    t[n] = e,
                    i._cacheIndex = r,
                    t[r] = i
                },
                _takeBackBinding: function(e) {
                    var t = this._bindings
                      , r = e._cacheIndex
                      , n = --this._nActiveBindings
                      , i = t[n];
                    e._cacheIndex = n,
                    t[n] = e,
                    i._cacheIndex = r,
                    t[r] = i
                },
                _lendControlInterpolant: function() {
                    var e = this._controlInterpolants
                      , t = this._nActiveControlInterpolants++
                      , r = e[t];
                    return void 0 === r && (r = new Fr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),
                    r.__cacheIndex = t,
                    e[t] = r),
                    r
                },
                _takeBackControlInterpolant: function(e) {
                    var t = this._controlInterpolants
                      , r = e.__cacheIndex
                      , n = --this._nActiveControlInterpolants
                      , i = t[n];
                    e.__cacheIndex = n,
                    t[n] = e,
                    i.__cacheIndex = r,
                    t[r] = i
                },
                _controlInterpolantsResultBuffer: new Float32Array(1)
            }),
            Object.assign(Vn.prototype, t.prototype),
            kn.prototype.clone = function() {
                return new kn(void 0 === this.value.clone ? this.value : this.value.clone())
            }
            ,
            Fn.prototype = Object.create(Ee.prototype),
            Fn.prototype.constructor = Fn,
            Fn.prototype.isInstancedBufferGeometry = !0,
            Fn.prototype.addGroup = function(e, t, r) {
                this.groups.push({
                    start: e,
                    count: t,
                    materialIndex: r
                })
            }
            ,
            Fn.prototype.copy = function(e) {
                var t = e.index;
                null !== t && this.setIndex(t.clone());
                var r = e.attributes;
                for (var n in r) {
                    var i = r[n];
                    this.addAttribute(n, i.clone())
                }
                for (var a = e.groups, o = 0, s = a.length; o < s; o++) {
                    var u = a[o];
                    this.addGroup(u.start, u.count, u.materialIndex)
                }
                return this
            }
            ,
            Gn.prototype = {
                constructor: Gn,
                isInterleavedBufferAttribute: !0,
                get count() {
                    return this.data.count
                },
                get array() {
                    return this.data.array
                },
                setX: function(e, t) {
                    return this.data.array[e * this.data.stride + this.offset] = t,
                    this
                },
                setY: function(e, t) {
                    return this.data.array[e * this.data.stride + this.offset + 1] = t,
                    this
                },
                setZ: function(e, t) {
                    return this.data.array[e * this.data.stride + this.offset + 2] = t,
                    this
                },
                setW: function(e, t) {
                    return this.data.array[e * this.data.stride + this.offset + 3] = t,
                    this
                },
                getX: function(e) {
                    return this.data.array[e * this.data.stride + this.offset]
                },
                getY: function(e) {
                    return this.data.array[e * this.data.stride + this.offset + 1]
                },
                getZ: function(e) {
                    return this.data.array[e * this.data.stride + this.offset + 2]
                },
                getW: function(e) {
                    return this.data.array[e * this.data.stride + this.offset + 3]
                },
                setXY: function(e, t, r) {
                    return e = e * this.data.stride + this.offset,
                    this.data.array[e + 0] = t,
                    this.data.array[e + 1] = r,
                    this
                },
                setXYZ: function(e, t, r, n) {
                    return e = e * this.data.stride + this.offset,
                    this.data.array[e + 0] = t,
                    this.data.array[e + 1] = r,
                    this.data.array[e + 2] = n,
                    this
                },
                setXYZW: function(e, t, r, n, i) {
                    return e = e * this.data.stride + this.offset,
                    this.data.array[e + 0] = t,
                    this.data.array[e + 1] = r,
                    this.data.array[e + 2] = n,
                    this.data.array[e + 3] = i,
                    this
                }
            },
            Yn.prototype = {
                constructor: Yn,
                isInterleavedBuffer: !0,
                set needsUpdate(e) {
                    e === !0 && this.version++
                },
                setArray: function(e) {
                    if (Array.isArray(e))
                        throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
                    this.count = void 0 !== e ? e.length / this.stride : 0,
                    this.array = e
                },
                setDynamic: function(e) {
                    return this.dynamic = e,
                    this
                },
                copy: function(e) {
                    return this.array = new e.array.constructor(e.array),
                    this.count = e.count,
                    this.stride = e.stride,
                    this.dynamic = e.dynamic,
                    this
                },
                copyAt: function(e, t, r) {
                    e *= this.stride,
                    r *= t.stride;
                    for (var n = 0, i = this.stride; n < i; n++)
                        this.array[e + n] = t.array[r + n];
                    return this
                },
                set: function(e, t) {
                    return void 0 === t && (t = 0),
                    this.array.set(e, t),
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                onUpload: function(e) {
                    return this.onUploadCallback = e,
                    this
                }
            },
            Qn.prototype = Object.create(Yn.prototype),
            Qn.prototype.constructor = Qn,
            Qn.prototype.isInstancedInterleavedBuffer = !0,
            Qn.prototype.copy = function(e) {
                return Yn.prototype.copy.call(this, e),
                this.meshPerAttribute = e.meshPerAttribute,
                this
            }
            ,
            Hn.prototype = Object.create(de.prototype),
            Hn.prototype.constructor = Hn,
            Hn.prototype.isInstancedBufferAttribute = !0,
            Hn.prototype.copy = function(e) {
                return de.prototype.copy.call(this, e),
                this.meshPerAttribute = e.meshPerAttribute,
                this
            }
            ,
            Wn.prototype = {
                constructor: Wn,
                linePrecision: 1,
                set: function(e, t) {
                    this.ray.set(e, t)
                },
                setFromCamera: function(e, t) {
                    t && t.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld),
                    this.ray.direction.set(e.x, e.y, .5).unproject(t).sub(this.ray.origin).normalize()) : t && t.isOrthographicCamera ? (this.ray.origin.set(e.x, e.y, (t.near + t.far) / (t.near - t.far)).unproject(t),
                    this.ray.direction.set(0, 0, -1).transformDirection(t.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.")
                },
                intersectObject: function(e, t) {
                    var r = [];
                    return qn(e, this, r, t),
                    r.sort(Xn),
                    r
                },
                intersectObjects: function(e, t) {
                    var r = [];
                    if (Array.isArray(e) === !1)
                        return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
                        r;
                    for (var n = 0, i = e.length; n < i; n++)
                        qn(e[n], this, r, t);
                    return r.sort(Xn),
                    r
                }
            },
            Zn.prototype = {
                constructor: Zn,
                start: function() {
                    this.startTime = (performance || Date).now(),
                    this.oldTime = this.startTime,
                    this.elapsedTime = 0,
                    this.running = !0
                },
                stop: function() {
                    this.getElapsedTime(),
                    this.running = !1
                },
                getElapsedTime: function() {
                    return this.getDelta(),
                    this.elapsedTime
                },
                getDelta: function() {
                    var e = 0;
                    if (this.autoStart && !this.running && this.start(),
                    this.running) {
                        var t = (performance || Date).now();
                        e = (t - this.oldTime) / 1e3,
                        this.oldTime = t,
                        this.elapsedTime += e
                    }
                    return e
                }
            },
            Jn.prototype = {
                constructor: Jn,
                set: function(e, t, r) {
                    return this.radius = e,
                    this.phi = t,
                    this.theta = r,
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.radius = e.radius,
                    this.phi = e.phi,
                    this.theta = e.theta,
                    this
                },
                makeSafe: function() {
                    var e = 1e-6;
                    return this.phi = Math.max(e, Math.min(Math.PI - e, this.phi)),
                    this
                },
                setFromVector3: function(e) {
                    return this.radius = e.length(),
                    0 === this.radius ? (this.theta = 0,
                    this.phi = 0) : (this.theta = Math.atan2(e.x, e.z),
                    this.phi = Math.acos(ms.clamp(e.y / this.radius, -1, 1))),
                    this
                }
            },
            Kn.prototype = {
                constructor: Kn,
                set: function(e, t, r) {
                    return this.radius = e,
                    this.theta = t,
                    this.y = r,
                    this
                },
                clone: function() {
                    return (new this.constructor).copy(this)
                },
                copy: function(e) {
                    return this.radius = e.radius,
                    this.theta = e.theta,
                    this.y = e.y,
                    this
                },
                setFromVector3: function(e) {
                    return this.radius = Math.sqrt(e.x * e.x + e.z * e.z),
                    this.theta = Math.atan2(e.x, e.z),
                    this.y = e.y,
                    this
                }
            },
            $n.prototype = Object.create(Se.prototype),
            $n.prototype.constructor = $n,
            $n.prototype.createAnimation = function(e, t, r, n) {
                var i = {
                    start: t,
                    end: r,
                    length: r - t + 1,
                    fps: n,
                    duration: (r - t) / n,
                    lastFrame: 0,
                    currentFrame: 0,
                    active: !1,
                    time: 0,
                    direction: 1,
                    weight: 1,
                    directionBackwards: !1,
                    mirroredLoop: !1
                };
                this.animationsMap[e] = i,
                this.animationsList.push(i)
            }
            ,
            $n.prototype.autoCreateAnimations = function(e) {
                for (var t, r = /([a-z]+)_?(\d+)/i, n = {}, i = this.geometry, a = 0, o = i.morphTargets.length; a < o; a++) {
                    var s = i.morphTargets[a]
                      , u = s.name.match(r);
                    if (u && u.length > 1) {
                        var l = u[1];
                        n[l] || (n[l] = {
                            start: 1 / 0,
                            end: -(1 / 0)
                        });
                        var c = n[l];
                        a < c.start && (c.start = a),
                        a > c.end && (c.end = a),
                        t || (t = l)
                    }
                }
                for (var l in n) {
                    var c = n[l];
                    this.createAnimation(l, c.start, c.end, e)
                }
                this.firstAnimation = t
            }
            ,
            $n.prototype.setAnimationDirectionForward = function(e) {
                var t = this.animationsMap[e];
                t && (t.direction = 1,
                t.directionBackwards = !1)
            }
            ,
            $n.prototype.setAnimationDirectionBackward = function(e) {
                var t = this.animationsMap[e];
                t && (t.direction = -1,
                t.directionBackwards = !0)
            }
            ,
            $n.prototype.setAnimationFPS = function(e, t) {
                var r = this.animationsMap[e];
                r && (r.fps = t,
                r.duration = (r.end - r.start) / r.fps)
            }
            ,
            $n.prototype.setAnimationDuration = function(e, t) {
                var r = this.animationsMap[e];
                r && (r.duration = t,
                r.fps = (r.end - r.start) / r.duration)
            }
            ,
            $n.prototype.setAnimationWeight = function(e, t) {
                var r = this.animationsMap[e];
                r && (r.weight = t)
            }
            ,
            $n.prototype.setAnimationTime = function(e, t) {
                var r = this.animationsMap[e];
                r && (r.time = t)
            }
            ,
            $n.prototype.getAnimationTime = function(e) {
                var t = 0
                  , r = this.animationsMap[e];
                return r && (t = r.time),
                t
            }
            ,
            $n.prototype.getAnimationDuration = function(e) {
                var t = -1
                  , r = this.animationsMap[e];
                return r && (t = r.duration),
                t
            }
            ,
            $n.prototype.playAnimation = function(e) {
                var t = this.animationsMap[e];
                t ? (t.time = 0,
                t.active = !0) : console.warn("THREE.MorphBlendMesh: animation[" + e + "] undefined in .playAnimation()")
            }
            ,
            $n.prototype.stopAnimation = function(e) {
                var t = this.animationsMap[e];
                t && (t.active = !1)
            }
            ,
            $n.prototype.update = function(e) {
                for (var t = 0, r = this.animationsList.length; t < r; t++) {
                    var n = this.animationsList[t];
                    if (n.active) {
                        var i = n.duration / n.length;
                        n.time += n.direction * e,
                        n.mirroredLoop ? (n.time > n.duration || n.time < 0) && (n.direction *= -1,
                        n.time > n.duration && (n.time = n.duration,
                        n.directionBackwards = !0),
                        n.time < 0 && (n.time = 0,
                        n.directionBackwards = !1)) : (n.time = n.time % n.duration,
                        n.time < 0 && (n.time += n.duration));
                        var a = n.start + ms.clamp(Math.floor(n.time / i), 0, n.length - 1)
                          , o = n.weight;
                        a !== n.currentFrame && (this.morphTargetInfluences[n.lastFrame] = 0,
                        this.morphTargetInfluences[n.currentFrame] = 1 * o,
                        this.morphTargetInfluences[a] = 0,
                        n.lastFrame = n.currentFrame,
                        n.currentFrame = a);
                        var s = n.time % i / i;
                        n.directionBackwards && (s = 1 - s),
                        n.currentFrame !== n.lastFrame ? (this.morphTargetInfluences[n.currentFrame] = s * o,
                        this.morphTargetInfluences[n.lastFrame] = (1 - s) * o) : this.morphTargetInfluences[n.currentFrame] = o
                    }
                }
            }
            ,
            ei.prototype = Object.create(ue.prototype),
            ei.prototype.constructor = ei,
            ei.prototype.isImmediateRenderObject = !0,
            ti.prototype = Object.create(xt.prototype),
            ti.prototype.constructor = ti,
            ti.prototype.update = function() {
                var e = new u
                  , t = new u
                  , r = new te;
                return function() {
                    var n = ["a", "b", "c"];
                    this.object.updateMatrixWorld(!0),
                    r.getNormalMatrix(this.object.matrixWorld);
                    var i = this.object.matrixWorld
                      , a = this.geometry.attributes.position
                      , o = this.object.geometry;
                    if (o && o.isGeometry)
                        for (var s = o.vertices, u = o.faces, l = 0, c = 0, h = u.length; c < h; c++)
                            for (var f = u[c], d = 0, p = f.vertexNormals.length; d < p; d++) {
                                var m = s[f[n[d]]]
                                  , g = f.vertexNormals[d];
                                e.copy(m).applyMatrix4(i),
                                t.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),
                                a.setXYZ(l, e.x, e.y, e.z),
                                l += 1,
                                a.setXYZ(l, t.x, t.y, t.z),
                                l += 1
                            }
                    else if (o && o.isBufferGeometry)
                        for (var v = o.attributes.position, y = o.attributes.normal, l = 0, d = 0, p = v.count; d < p; d++)
                            e.set(v.getX(d), v.getY(d), v.getZ(d)).applyMatrix4(i),
                            t.set(y.getX(d), y.getY(d), y.getZ(d)),
                            t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),
                            a.setXYZ(l, e.x, e.y, e.z),
                            l += 1,
                            a.setXYZ(l, t.x, t.y, t.z),
                            l += 1;
                    return a.needsUpdate = !0,
                    this
                }
            }(),
            ri.prototype = Object.create(ue.prototype),
            ri.prototype.constructor = ri,
            ri.prototype.dispose = function() {
                this.cone.geometry.dispose(),
                this.cone.material.dispose()
            }
            ,
            ri.prototype.update = function() {
                var e = new u
                  , t = new u;
                return function() {
                    var r = this.light.distance ? this.light.distance : 1e3
                      , n = r * Math.tan(this.light.angle);
                    this.cone.scale.set(n, n, r),
                    e.setFromMatrixPosition(this.light.matrixWorld),
                    t.setFromMatrixPosition(this.light.target.matrixWorld),
                    this.cone.lookAt(t.sub(e)),
                    this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
                }
            }(),
            ni.prototype = Object.create(xt.prototype),
            ni.prototype.constructor = ni,
            ni.prototype.getBoneList = function(e) {
                var t = [];
                e && e.isBone && t.push(e);
                for (var r = 0; r < e.children.length; r++)
                    t.push.apply(t, this.getBoneList(e.children[r]));
                return t
            }
            ,
            ni.prototype.update = function() {
                var e = new u
                  , t = new l
                  , r = new l;
                return function() {
                    var n = this.geometry
                      , i = n.getAttribute("position");
                    r.getInverse(this.root.matrixWorld);
                    for (var a = 0, o = 0; a < this.bones.length; a++) {
                        var s = this.bones[a];
                        s.parent && s.parent.isBone && (t.multiplyMatrices(r, s.matrixWorld),
                        e.setFromMatrixPosition(t),
                        i.setXYZ(o, e.x, e.y, e.z),
                        t.multiplyMatrices(r, s.parent.matrixWorld),
                        e.setFromMatrixPosition(t),
                        i.setXYZ(o + 1, e.x, e.y, e.z),
                        o += 2)
                    }
                    n.getAttribute("position").needsUpdate = !0
                }
            }(),
            ii.prototype = Object.create(Se.prototype),
            ii.prototype.constructor = ii,
            ii.prototype.dispose = function() {
                this.geometry.dispose(),
                this.material.dispose()
            }
            ,
            ii.prototype.update = function() {
                this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
            }
            ,
            ai.prototype = Object.create(ue.prototype),
            ai.prototype.constructor = ai,
            ai.prototype.dispose = function() {
                this.children[0].geometry.dispose(),
                this.children[0].material.dispose(),
                this.children[1].geometry.dispose(),
                this.children[1].material.dispose()
            }
            ,
            ai.prototype.update = function() {
                var e = new u
                  , t = new u;
                return function() {
                    var r = this.children[0]
                      , n = this.children[1];
                    if (this.light.target) {
                        e.setFromMatrixPosition(this.light.matrixWorld),
                        t.setFromMatrixPosition(this.light.target.matrixWorld);
                        var i = t.clone().sub(e);
                        r.lookAt(i),
                        n.lookAt(i)
                    }
                    r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),
                    n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);
                    var a = .5 * this.light.width
                      , o = .5 * this.light.height
                      , s = r.geometry.getAttribute("position")
                      , u = s.array;
                    u[0] = a,
                    u[1] = -o,
                    u[2] = 0,
                    u[3] = a,
                    u[4] = o,
                    u[5] = 0,
                    u[6] = -a,
                    u[7] = o,
                    u[8] = 0,
                    u[9] = -a,
                    u[10] = o,
                    u[11] = 0,
                    u[12] = -a,
                    u[13] = -o,
                    u[14] = 0,
                    u[15] = a,
                    u[16] = -o,
                    u[17] = 0,
                    s.needsUpdate = !0
                }
            }(),
            oi.prototype = Object.create(ue.prototype),
            oi.prototype.constructor = oi,
            oi.prototype.dispose = function() {
                this.children[0].geometry.dispose(),
                this.children[0].material.dispose()
            }
            ,
            oi.prototype.update = function() {
                var e = new u
                  , t = new Q
                  , r = new Q;
                return function() {
                    var n = this.children[0]
                      , i = n.geometry.getAttribute("color");
                    t.copy(this.light.color).multiplyScalar(this.light.intensity),
                    r.copy(this.light.groundColor).multiplyScalar(this.light.intensity);
                    for (var a = 0, o = i.count; a < o; a++) {
                        var s = a < o / 2 ? t : r;
                        i.setXYZ(a, s.r, s.g, s.b)
                    }
                    n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),
                    i.needsUpdate = !0
                }
            }(),
            si.prototype = Object.create(xt.prototype),
            si.prototype.constructor = si,
            ui.prototype = Object.create(xt.prototype),
            ui.prototype.constructor = ui,
            li.prototype = Object.create(xt.prototype),
            li.prototype.constructor = li,
            li.prototype.update = function() {
                var e = new u
                  , t = new u
                  , r = new te;
                return function() {
                    this.object.updateMatrixWorld(!0),
                    r.getNormalMatrix(this.object.matrixWorld);
                    for (var n = this.object.matrixWorld, i = this.geometry.attributes.position, a = this.object.geometry, o = a.vertices, s = a.faces, u = 0, l = 0, c = s.length; l < c; l++) {
                        var h = s[l]
                          , f = h.normal;
                        e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(n),
                        t.copy(f).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),
                        i.setXYZ(u, e.x, e.y, e.z),
                        u += 1,
                        i.setXYZ(u, t.x, t.y, t.z),
                        u += 1
                    }
                    return i.needsUpdate = !0,
                    this
                }
            }(),
            ci.prototype = Object.create(ue.prototype),
            ci.prototype.constructor = ci,
            ci.prototype.dispose = function() {
                var e = this.children[0]
                  , t = this.children[1];
                e.geometry.dispose(),
                e.material.dispose(),
                t.geometry.dispose(),
                t.material.dispose()
            }
            ,
            ci.prototype.update = function() {
                var e = new u
                  , t = new u
                  , r = new u;
                return function() {
                    e.setFromMatrixPosition(this.light.matrixWorld),
                    t.setFromMatrixPosition(this.light.target.matrixWorld),
                    r.subVectors(t, e);
                    var n = this.children[0]
                      , i = this.children[1];
                    n.lookAt(r),
                    n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),
                    i.lookAt(r),
                    i.scale.z = r.length()
                }
            }(),
            hi.prototype = Object.create(xt.prototype),
            hi.prototype.constructor = hi,
            hi.prototype.update = function() {
                function e(e, a, o, s) {
                    n.set(a, o, s).unproject(i);
                    var u = r[e];
                    if (void 0 !== u)
                        for (var l = t.getAttribute("position"), c = 0, h = u.length; c < h; c++)
                            l.setXYZ(u[c], n.x, n.y, n.z)
                }
                var t, r, n = new u, i = new Le;
                return function() {
                    t = this.geometry,
                    r = this.pointMap;
                    var n = 1
                      , a = 1;
                    i.projectionMatrix.copy(this.camera.projectionMatrix),
                    e("c", 0, 0, -1),
                    e("t", 0, 0, 1),
                    e("n1", -n, -a, -1),
                    e("n2", n, -a, -1),
                    e("n3", -n, a, -1),
                    e("n4", n, a, -1),
                    e("f1", -n, -a, 1),
                    e("f2", n, -a, 1),
                    e("f3", -n, a, 1),
                    e("f4", n, a, 1),
                    e("u1", .7 * n, 1.1 * a, -1),
                    e("u2", .7 * -n, 1.1 * a, -1),
                    e("u3", 0, 2 * a, -1),
                    e("cf1", -n, 0, 1),
                    e("cf2", n, 0, 1),
                    e("cf3", 0, -a, 1),
                    e("cf4", 0, a, 1),
                    e("cn1", -n, 0, -1),
                    e("cn2", n, 0, -1),
                    e("cn3", 0, -a, -1),
                    e("cn4", 0, a, -1),
                    t.getAttribute("position").needsUpdate = !0
                }
            }(),
            fi.prototype = Object.create(xt.prototype),
            fi.prototype.constructor = fi,
            fi.prototype.update = function() {
                var e = new $;
                return function(t) {
                    if (t && t.isBox3 ? e.copy(t) : e.setFromObject(t),
                    !e.isEmpty()) {
                        var r = e.min
                          , n = e.max
                          , i = this.geometry.attributes.position
                          , a = i.array;
                        a[0] = n.x,
                        a[1] = n.y,
                        a[2] = n.z,
                        a[3] = r.x,
                        a[4] = n.y,
                        a[5] = n.z,
                        a[6] = r.x,
                        a[7] = r.y,
                        a[8] = n.z,
                        a[9] = n.x,
                        a[10] = r.y,
                        a[11] = n.z,
                        a[12] = n.x,
                        a[13] = n.y,
                        a[14] = r.z,
                        a[15] = r.x,
                        a[16] = n.y,
                        a[17] = r.z,
                        a[18] = r.x,
                        a[19] = r.y,
                        a[20] = r.z,
                        a[21] = n.x,
                        a[22] = r.y,
                        a[23] = r.z,
                        i.needsUpdate = !0,
                        this.geometry.computeBoundingSphere()
                    }
                }
            }();
            var Xl = new Ee;
            Xl.addAttribute("position", new xe([0, 0, 0, 0, 1, 0],3));
            var ql = new or(0,.5,1,5,1);
            ql.translate(0, -.5, 0),
            di.prototype = Object.create(ue.prototype),
            di.prototype.constructor = di,
            di.prototype.setDirection = function() {
                var e, t = new u;
                return function(r) {
                    r.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : r.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (t.set(r.z, 0, -r.x).normalize(),
                    e = Math.acos(r.y),
                    this.quaternion.setFromAxisAngle(t, e))
                }
            }(),
            di.prototype.setLength = function(e, t, r) {
                void 0 === t && (t = .2 * e),
                void 0 === r && (r = .2 * t),
                this.line.scale.set(1, Math.max(0, e - t), 1),
                this.line.updateMatrix(),
                this.cone.scale.set(r, t, r),
                this.cone.position.y = e,
                this.cone.updateMatrix()
            }
            ,
            di.prototype.setColor = function(e) {
                this.line.material.color.copy(e),
                this.cone.material.color.copy(e)
            }
            ,
            pi.prototype = Object.create(xt.prototype),
            pi.prototype.constructor = pi;
            var Zl = new u
              , Jl = new mi
              , Kl = new mi
              , $l = new mi;
            gi.prototype = Object.create(gn.prototype),
            gi.prototype.constructor = gi,
            gi.prototype.getPoint = function(e) {
                var t = this.points
                  , r = t.length;
                r < 2 && console.log("duh, you need at least 2 points");
                var n = (r - (this.closed ? 0 : 1)) * e
                  , i = Math.floor(n)
                  , a = n - i;
                this.closed ? i += i > 0 ? 0 : (Math.floor(Math.abs(i) / t.length) + 1) * t.length : 0 === a && i === r - 1 && (i = r - 2,
                a = 1);
                var o, s, l, c;
                if (this.closed || i > 0 ? o = t[(i - 1) % r] : (Zl.subVectors(t[0], t[1]).add(t[0]),
                o = Zl),
                s = t[i % r],
                l = t[(i + 1) % r],
                this.closed || i + 2 < r ? c = t[(i + 2) % r] : (Zl.subVectors(t[r - 1], t[r - 2]).add(t[r - 1]),
                c = Zl),
                void 0 === this.type || "centripetal" === this.type || "chordal" === this.type) {
                    var h = "chordal" === this.type ? .5 : .25
                      , f = Math.pow(o.distanceToSquared(s), h)
                      , d = Math.pow(s.distanceToSquared(l), h)
                      , p = Math.pow(l.distanceToSquared(c), h);
                    d < 1e-4 && (d = 1),
                    f < 1e-4 && (f = d),
                    p < 1e-4 && (p = d),
                    Jl.initNonuniformCatmullRom(o.x, s.x, l.x, c.x, f, d, p),
                    Kl.initNonuniformCatmullRom(o.y, s.y, l.y, c.y, f, d, p),
                    $l.initNonuniformCatmullRom(o.z, s.z, l.z, c.z, f, d, p)
                } else if ("catmullrom" === this.type) {
                    var m = void 0 !== this.tension ? this.tension : .5;
                    Jl.initCatmullRom(o.x, s.x, l.x, c.x, m),
                    Kl.initCatmullRom(o.y, s.y, l.y, c.y, m),
                    $l.initCatmullRom(o.z, s.z, l.z, c.z, m)
                }
                return new u(Jl.calc(a),Kl.calc(a),$l.calc(a))
            }
            ,
            vi.prototype = Object.create(gn.prototype),
            vi.prototype.constructor = vi,
            vi.prototype.getPoint = function(e) {
                var t = this.v0
                  , r = this.v1
                  , n = this.v2
                  , i = this.v3;
                return new u(mn(e, t.x, r.x, n.x, i.x),mn(e, t.y, r.y, n.y, i.y),mn(e, t.z, r.z, n.z, i.z))
            }
            ,
            yi.prototype = Object.create(gn.prototype),
            yi.prototype.constructor = yi,
            yi.prototype.getPoint = function(e) {
                var t = this.v0
                  , r = this.v1
                  , n = this.v2;
                return new u(cn(e, t.x, r.x, n.x),cn(e, t.y, r.y, n.y),cn(e, t.z, r.z, n.z))
            }
            ,
            Mi.prototype = Object.create(gn.prototype),
            Mi.prototype.constructor = Mi,
            Mi.prototype.getPoint = function(e) {
                if (1 === e)
                    return this.v2.clone();
                var t = new u;
                return t.subVectors(this.v2, this.v1),
                t.multiplyScalar(e),
                t.add(this.v1),
                t
            }
            ,
            wi.prototype = Object.create(Mn.prototype),
            wi.prototype.constructor = wi;
            var ec = {
                createMultiMaterialObject: function(e, t) {
                    for (var r = new Tt, n = 0, i = t.length; n < i; n++)
                        r.add(new Se(e,t[n]));
                    return r
                },
                detach: function(e, t, r) {
                    e.applyMatrix(t.matrixWorld),
                    t.remove(e),
                    r.add(e)
                },
                attach: function(e, t, r) {
                    var n = new l;
                    n.getInverse(r.matrixWorld),
                    e.applyMatrix(n),
                    t.remove(e),
                    r.add(e)
                }
            }
              , tc = 0
              , rc = 1;
            gn.create = function(e, t) {
                return console.log("THREE.Curve.create() has been deprecated"),
                e.prototype = Object.create(gn.prototype),
                e.prototype.constructor = e,
                e.prototype.getPoint = t,
                e
            }
            ,
            Vi.prototype = Object.create(gi.prototype),
            ki.prototype = Object.create(gi.prototype),
            Fi.prototype = Object.create(gi.prototype),
            Object.assign(Fi.prototype, {
                initFromArray: function(e) {
                    console.error("THREE.Spline: .initFromArray() has been removed.")
                },
                getControlPointsArray: function(e) {
                    console.error("THREE.Spline: .getControlPointsArray() has been removed.")
                },
                reparametrizeByArcLength: function(e) {
                    console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")
                }
            }),
            si.prototype.setColors = function() {
                console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")
            }
            ,
            Object.assign(W.prototype, {
                center: function(e) {
                    return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),
                    this.getCenter(e)
                },
                empty: function() {
                    return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),
                    this.isEmpty()
                },
                isIntersectionBox: function(e) {
                    return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),
                    this.intersectsBox(e)
                },
                size: function(e) {
                    return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),
                    this.getSize(e)
                }
            }),
            Object.assign($.prototype, {
                center: function(e) {
                    return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),
                    this.getCenter(e)
                },
                empty: function() {
                    return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),
                    this.isEmpty()
                },
                isIntersectionBox: function(e) {
                    return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),
                    this.intersectsBox(e)
                },
                isIntersectionSphere: function(e) {
                    return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),
                    this.intersectsSphere(e)
                },
                size: function(e) {
                    return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),
                    this.getSize(e)
                }
            }),
            le.prototype.center = function(e) {
                return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),
                this.getCenter(e)
            }
            ,
            ms.random16 = function() {
                return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),
                Math.random()
            }
            ,
            Object.assign(te.prototype, {
                flattenToArrayOffset: function(e, t) {
                    return console.warn("GASEngine.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),
                    this.toArray(e, t)
                },
                multiplyVector3: function(e) {
                    return console.warn("GASEngine.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),
                    e.applyMatrix3(this)
                },
                multiplyVector3Array: function(e) {
                    return console.warn("GASEngine.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
                    this.applyToVector3Array(e)
                },
                applyToBuffer: function(e, t, r) {
                    return console.warn("GASEngine.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),
                    this.applyToBufferAttribute(e)
                },
                applyToVector3Array: function(e, t, r) {
                    console.error("GASEngine.Matrix3: .applyToVector3Array() has been removed.")
                }
            }),
            Object.assign(l.prototype, {
                extractPosition: function(e) {
                    return console.warn("GASEngine.Matrix4: .extractPosition() has been renamed to .copyPosition()."),
                    this.copyPosition(e)
                },
                flattenToArrayOffset: function(e, t) {
                    return console.warn("GASEngine.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),
                    this.toArray(e, t)
                },
                getPosition: function() {
                    var e;
                    return function() {
                        return void 0 === e && (e = new u),
                        console.warn("GASEngine.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),
                        e.setFromMatrixColumn(this, 3)
                    }
                }(),
                setRotationFromQuaternion: function(e) {
                    return console.warn("GASEngine.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),
                    this.makeRotationFromQuaternion(e)
                },
                multiplyVector3: function(e) {
                    return console.warn("GASEngine.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                    e.applyMatrix4(this)
                },
                multiplyVector4: function(e) {
                    return console.warn("GASEngine.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                    e.applyMatrix4(this)
                },
                multiplyVector3Array: function(e) {
                    return console.warn("GASEngine.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
                    this.applyToVector3Array(e)
                },
                rotateAxis: function(e) {
                    console.warn("GASEngine.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),
                    e.transformDirection(this)
                },
                crossVector: function(e) {
                    return console.warn("GASEngine.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                    e.applyMatrix4(this)
                },
                translate: function() {
                    console.error("GASEngine.Matrix4: .translate() has been removed.")
                },
                rotateX: function() {
                    console.error("GASEngine.Matrix4: .rotateX() has been removed.")
                },
                rotateY: function() {
                    console.error("GASEngine.Matrix4: .rotateY() has been removed.")
                },
                rotateZ: function() {
                    console.error("GASEngine.Matrix4: .rotateZ() has been removed.")
                },
                rotateByAxis: function() {
                    console.error("GASEngine.Matrix4: .rotateByAxis() has been removed.")
                },
                applyToBuffer: function(e, t, r) {
                    return console.warn("GASEngine.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),
                    this.applyToBufferAttribute(e)
                },
                applyToVector3Array: function(e, t, r) {
                    console.error("GASEngine.Matrix4: .applyToVector3Array() has been removed.")
                },
                makeFrustum: function(e, t, r, n, i, a) {
                    return console.warn("GASEngine.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),
                    this.makePerspective(e, t, n, r, i, a)
                }
            }),
            re.prototype.isIntersectionLine = function(e) {
                return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),
                this.intersectsLine(e)
            }
            ,
            s.prototype.multiplyVector3 = function(e) {
                return console.warn("GASEngine.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),
                e.applyQuaternion(this)
            }
            ,
            Object.assign(ae.prototype, {
                isIntersectionBox: function(e) {
                    return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),
                    this.intersectsBox(e)
                },
                isIntersectionPlane: function(e) {
                    return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),
                    this.intersectsPlane(e)
                },
                isIntersectionSphere: function(e) {
                    return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),
                    this.intersectsSphere(e)
                }
            }),
            Object.assign(Tn.prototype, {
                extrude: function(e) {
                    return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),
                    new Xt(this,e)
                },
                makeGeometry: function(e) {
                    return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),
                    new ir(this,e)
                }
            }),
            Object.assign(r.prototype, {
                fromAttribute: function(e, t, r) {
                    return console.error("GASEngine.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),
                    this.fromBufferAttribute(e, t, r)
                }
            }),
            Object.assign(u.prototype, {
                setEulerFromRotationMatrix: function() {
                    console.error("GASEngine.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
                },
                setEulerFromQuaternion: function() {
                    console.error("GASEngine.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
                },
                getPositionFromMatrix: function(e) {
                    return console.warn("GASEngine.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),
                    this.setFromMatrixPosition(e)
                },
                getScaleFromMatrix: function(e) {
                    return console.warn("GASEngine.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),
                    this.setFromMatrixScale(e)
                },
                getColumnFromMatrix: function(e, t) {
                    return console.warn("GASEngine.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),
                    this.setFromMatrixColumn(t, e)
                },
                applyProjection: function(e) {
                    return console.warn("GASEngine.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),
                    this.applyMatrix4(e)
                },
                fromAttribute: function(e, t, r) {
                    return console.error("GASEngine.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),
                    this.fromBufferAttribute(e, t, r)
                }
            }),
            Object.assign(i.prototype, {
                fromAttribute: function(e, t, r) {
                    return console.error("GASEngine.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),
                    this.fromBufferAttribute(e, t, r)
                }
            }),
            _e.prototype.computeTangents = function() {
                console.warn("THREE.Geometry: .computeTangents() has been removed.")
            }
            ,
            Object.assign(ue.prototype, {
                getChildByName: function(e) {
                    return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),
                    this.getObjectByName(e)
                },
                renderDepth: function() {
                    console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")
                },
                translate: function(e, t) {
                    return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),
                    this.translateOnAxis(t, e)
                }
            }),
            Object.defineProperties(ue.prototype, {
                eulerOrder: {
                    get: function() {
                        return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),
                        this.rotation.order
                    },
                    set: function(e) {
                        console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),
                        this.rotation.order = e
                    }
                },
                useQuaternion: {
                    get: function() {
                        console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
                    },
                    set: function() {
                        console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
                    }
                }
            }),
            Object.defineProperties(mt.prototype, {
                objects: {
                    get: function() {
                        return console.warn("THREE.LOD: .objects has been renamed to .levels."),
                        this.levels
                    }
                }
            }),
            Ce.prototype.setLens = function(e, t) {
                console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),
                void 0 !== t && (this.filmGauge = t),
                this.setFocalLength(e)
            }
            ,
            Object.defineProperties(Lr.prototype, {
                onlyShadow: {
                    set: function() {
                        console.warn("THREE.Light: .onlyShadow has been removed.")
                    }
                },
                shadowCameraFov: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),
                        this.shadow.camera.fov = e
                    }
                },
                shadowCameraLeft: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),
                        this.shadow.camera.left = e
                    }
                },
                shadowCameraRight: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),
                        this.shadow.camera.right = e
                    }
                },
                shadowCameraTop: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),
                        this.shadow.camera.top = e
                    }
                },
                shadowCameraBottom: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),
                        this.shadow.camera.bottom = e
                    }
                },
                shadowCameraNear: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),
                        this.shadow.camera.near = e
                    }
                },
                shadowCameraFar: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),
                        this.shadow.camera.far = e
                    }
                },
                shadowCameraVisible: {
                    set: function() {
                        console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")
                    }
                },
                shadowBias: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowBias is now .shadow.bias."),
                        this.shadow.bias = e
                    }
                },
                shadowDarkness: {
                    set: function() {
                        console.warn("THREE.Light: .shadowDarkness has been removed.")
                    }
                },
                shadowMapWidth: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),
                        this.shadow.mapSize.width = e
                    }
                },
                shadowMapHeight: {
                    set: function(e) {
                        console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),
                        this.shadow.mapSize.height = e
                    }
                }
            }),
            Object.defineProperties(de.prototype, {
                length: {
                    get: function() {
                        return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),
                        this.array.length;
                    }
                }
            }),
            Object.assign(Ee.prototype, {
                addIndex: function(e) {
                    console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),
                    this.setIndex(e)
                },
                addDrawCall: function(e, t, r) {
                    void 0 !== r && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),
                    console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),
                    this.addGroup(e, t)
                },
                clearDrawCalls: function() {
                    console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),
                    this.clearGroups()
                },
                computeTangents: function() {
                    console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")
                },
                computeOffsets: function() {
                    console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")
                }
            }),
            Object.defineProperties(Ee.prototype, {
                drawcalls: {
                    get: function() {
                        return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),
                        this.groups
                    }
                },
                offsets: {
                    get: function() {
                        return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),
                        this.groups
                    }
                }
            }),
            Object.defineProperties(kn.prototype, {
                dynamic: {
                    set: function() {
                        console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")
                    }
                },
                onUpdate: {
                    value: function() {
                        return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),
                        this
                    }
                }
            }),
            Object.defineProperties(Z.prototype, {
                wrapAround: {
                    get: function() {
                        console.warn("THREE." + this.type + ": .wrapAround has been removed.")
                    },
                    set: function() {
                        console.warn("THREE." + this.type + ": .wrapAround has been removed.")
                    }
                },
                wrapRGB: {
                    get: function() {
                        return console.warn("THREE." + this.type + ": .wrapRGB has been removed."),
                        new Q
                    }
                }
            }),
            Object.defineProperties(yr.prototype, {
                metal: {
                    get: function() {
                        return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),
                        !1
                    },
                    set: function() {
                        console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")
                    }
                }
            }),
            Object.defineProperties(J.prototype, {
                derivatives: {
                    get: function() {
                        return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),
                        this.extensions.derivatives
                    },
                    set: function(e) {
                        console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),
                        this.extensions.derivatives = e
                    }
                }
            }),
            Object.assign(lt.prototype, {
                supportsFloatTextures: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),
                    this.extensions.get("OES_texture_float")
                },
                supportsHalfFloatTextures: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),
                    this.extensions.get("OES_texture_half_float")
                },
                supportsStandardDerivatives: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),
                    this.extensions.get("OES_standard_derivatives")
                },
                supportsCompressedTextureS3TC: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),
                    this.extensions.get("WEBGL_compressed_texture_s3tc")
                },
                supportsCompressedTexturePVRTC: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),
                    this.extensions.get("WEBGL_compressed_texture_pvrtc")
                },
                supportsBlendMinMax: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),
                    this.extensions.get("EXT_blend_minmax")
                },
                supportsVertexTextures: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),
                    this.capabilities.vertexTextures
                },
                supportsInstancedArrays: function() {
                    return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),
                    this.extensions.get("ANGLE_instanced_arrays")
                },
                enableScissorTest: function(e) {
                    console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),
                    this.setScissorTest(e)
                },
                initMaterial: function() {
                    console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
                },
                addPrePlugin: function() {
                    console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
                },
                addPostPlugin: function() {
                    console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
                },
                updateShadowMap: function() {
                    console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
                }
            }),
            Object.defineProperties(lt.prototype, {
                shadowMapEnabled: {
                    get: function() {
                        return this.shadowMap.enabled
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),
                        this.shadowMap.enabled = e
                    }
                },
                shadowMapType: {
                    get: function() {
                        return this.shadowMap.type
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),
                        this.shadowMap.type = e
                    }
                },
                shadowMapCullFace: {
                    get: function() {
                        return this.shadowMap.cullFace
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),
                        this.shadowMap.cullFace = e
                    }
                }
            }),
            Object.defineProperties(ie.prototype, {
                cullFace: {
                    get: function() {
                        return this.renderReverseSided ? ea : $i
                    },
                    set: function(e) {
                        var t = e !== $i;
                        console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to " + t + "."),
                        this.renderReverseSided = t
                    }
                }
            }),
            Object.defineProperties(a.prototype, {
                wrapS: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),
                        this.texture.wrapS
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),
                        this.texture.wrapS = e
                    }
                },
                wrapT: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),
                        this.texture.wrapT
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),
                        this.texture.wrapT = e
                    }
                },
                magFilter: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),
                        this.texture.magFilter
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),
                        this.texture.magFilter = e
                    }
                },
                minFilter: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),
                        this.texture.minFilter
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),
                        this.texture.minFilter = e
                    }
                },
                anisotropy: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),
                        this.texture.anisotropy
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),
                        this.texture.anisotropy = e
                    }
                },
                offset: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),
                        this.texture.offset
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),
                        this.texture.offset = e
                    }
                },
                repeat: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),
                        this.texture.repeat
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),
                        this.texture.repeat = e
                    }
                },
                format: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),
                        this.texture.format
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),
                        this.texture.format = e
                    }
                },
                type: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),
                        this.texture.type
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),
                        this.texture.type = e
                    }
                },
                generateMipmaps: {
                    get: function() {
                        return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),
                        this.texture.generateMipmaps
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),
                        this.texture.generateMipmaps = e
                    }
                }
            }),
            On.prototype.load = function(e) {
                console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
                var t = this
                  , r = new Dn;
                return r.load(e, function(e) {
                    t.setBuffer(e)
                }),
                this
            }
            ,
            Rn.prototype.getData = function() {
                return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),
                this.getFrequencyData()
            }
            ;
            var nc = {
                merge: function(e, t, r) {
                    console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
                    var n;
                    t.isMesh && (t.matrixAutoUpdate && t.updateMatrix(),
                    n = t.matrix,
                    t = t.geometry),
                    e.merge(t, n, r)
                },
                center: function(e) {
                    return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),
                    e.center()
                }
            }
              , ic = {
                crossOrigin: void 0,
                loadTexture: function(e, t, r, n) {
                    console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
                    var i = new Ir;
                    i.setCrossOrigin(this.crossOrigin);
                    var a = i.load(e, r, void 0, n);
                    return t && (a.mapping = t),
                    a
                },
                loadTextureCube: function(e, t, r, n) {
                    console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");
                    var i = new Nr;
                    i.setCrossOrigin(this.crossOrigin);
                    var a = i.load(e, r, void 0, n);
                    return t && (a.mapping = t),
                    a
                },
                loadCompressedTexture: function() {
                    console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
                },
                loadCompressedTextureCube: function() {
                    console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
                }
            };
            e.WebGLRenderTargetCube = o,
            e.WebGLRenderTarget = a,
            e.WebGLRenderer = lt,
            e.ShaderLib = Ll,
            e.UniformsLib = Il,
            e.UniformsUtils = As,
            e.ShaderChunk = Dl,
            e.FogExp2 = ct,
            e.Fog = ht,
            e.Scene = ut,
            e.LensFlare = ft,
            e.Sprite = pt,
            e.LOD = mt,
            e.SkinnedMesh = yt,
            e.Skeleton = gt,
            e.Bone = vt,
            e.Mesh = Se,
            e.LineSegments = xt,
            e.Line = wt,
            e.Points = bt,
            e.Group = Tt,
            e.VideoTexture = _t,
            e.DataTexture = H,
            e.CompressedTexture = Et,
            e.CubeTexture = c,
            e.CanvasTexture = St,
            e.DepthTexture = Dt,
            e.Texture = n,
            e.CompressedTextureLoader = Er,
            e.DataTextureLoader = Sr,
            e.CubeTextureLoader = Nr,
            e.TextureLoader = Ir,
            e.ObjectLoader = an,
            e.MaterialLoader = en,
            e.BufferGeometryLoader = tn,
            e.DefaultLoadingManager = Fl,
            e.LoadingManager = Tr,
            e.JSONLoader = nn,
            e.ImageLoader = Dr,
            e.FontLoader = Sn,
            e.FileLoader = _r,
            e.Loader = rn,
            e.Cache = kl,
            e.AudioLoader = Dn,
            e.SpotLightShadow = jr,
            e.SpotLight = Rr,
            e.PointLight = Pr,
            e.RectAreaLight = Nn,
            e.HemisphereLight = Cr,
            e.DirectionalLightShadow = zr,
            e.DirectionalLight = Br,
            e.AmbientLight = Ur,
            e.LightShadow = Or,
            e.Light = Lr,
            e.StereoCamera = In,
            e.PerspectiveCamera = Ce,
            e.OrthographicCamera = Oe,
            e.CubeCamera = Ln,
            e.Camera = Le,
            e.AudioListener = Cn,
            e.PositionalAudio = jn,
            e.AudioContext = Wl,
            e.AudioAnalyser = Rn,
            e.Audio = On,
            e.VectorKeyframeTrack = Qr,
            e.StringKeyframeTrack = qr,
            e.QuaternionKeyframeTrack = Wr,
            e.NumberKeyframeTrack = Xr,
            e.ColorKeyframeTrack = Jr,
            e.BooleanKeyframeTrack = Zr,
            e.PropertyMixer = Pn,
            e.PropertyBinding = zn,
            e.KeyframeTrack = Kr,
            e.AnimationUtils = Gl,
            e.AnimationObjectGroup = Bn,
            e.AnimationMixer = Vn,
            e.AnimationClip = $r,
            e.Uniform = kn,
            e.InstancedBufferGeometry = Fn,
            e.BufferGeometry = Ee,
            e.GeometryIdCount = Te,
            e.Geometry = _e,
            e.InterleavedBufferAttribute = Gn,
            e.InstancedInterleavedBuffer = Qn,
            e.InterleavedBuffer = Yn,
            e.InstancedBufferAttribute = Hn,
            e.Face3 = he,
            e.Object3D = ue,
            e.Raycaster = Wn,
            e.Layers = se,
            e.EventDispatcher = t,
            e.Clock = Zn,
            e.QuaternionLinearInterpolant = Hr,
            e.LinearInterpolant = Fr,
            e.DiscreteInterpolant = Gr,
            e.CubicInterpolant = kr,
            e.Interpolant = Vr,
            e.Triangle = ce,
            e.Math = ms,
            e.Spherical = Jn,
            e.Cylindrical = Kn,
            e.Plane = re,
            e.Frustum = ne,
            e.Sphere = ee,
            e.Ray = ae,
            e.Matrix4 = l,
            e.Matrix3 = te,
            e.Box3 = $,
            e.Box2 = W,
            e.Line3 = le,
            e.Euler = oe,
            e.Vector4 = i,
            e.Vector3 = u,
            e.Vector2 = r,
            e.Quaternion = s,
            e.Color = Q,
            e.MorphBlendMesh = $n,
            e.ImmediateRenderObject = ei,
            e.VertexNormalsHelper = ti,
            e.SpotLightHelper = ri,
            e.SkeletonHelper = ni,
            e.PointLightHelper = ii,
            e.RectAreaLightHelper = ai,
            e.HemisphereLightHelper = oi,
            e.GridHelper = si,
            e.PolarGridHelper = ui,
            e.FaceNormalsHelper = li,
            e.DirectionalLightHelper = ci,
            e.CameraHelper = hi,
            e.BoxHelper = fi,
            e.ArrowHelper = di,
            e.AxisHelper = pi,
            e.CatmullRomCurve3 = gi,
            e.CubicBezierCurve3 = vi,
            e.QuadraticBezierCurve3 = yi,
            e.LineCurve3 = Mi,
            e.ArcCurve = wi,
            e.EllipseCurve = Mn,
            e.SplineCurve = wn,
            e.CubicBezierCurve = xn,
            e.QuadraticBezierCurve = An,
            e.LineCurve = vn,
            e.Shape = Tn,
            e.Path = bn,
            e.ShapePath = _n,
            e.Font = En,
            e.CurvePath = yn,
            e.Curve = gn,
            e.ShapeUtils = Bl,
            e.SceneUtils = ec,
            e.WireframeGeometry = Nt,
            e.ParametricGeometry = Lt,
            e.ParametricBufferGeometry = It,
            e.TetrahedronGeometry = jt,
            e.TetrahedronBufferGeometry = Ot,
            e.OctahedronGeometry = Pt,
            e.OctahedronBufferGeometry = Rt,
            e.IcosahedronGeometry = Bt,
            e.IcosahedronBufferGeometry = zt,
            e.DodecahedronGeometry = Vt,
            e.DodecahedronBufferGeometry = Ut,
            e.PolyhedronGeometry = kt,
            e.PolyhedronBufferGeometry = Ct,
            e.TubeGeometry = Gt,
            e.TubeBufferGeometry = Ft,
            e.TorusKnotGeometry = Qt,
            e.TorusKnotBufferGeometry = Yt,
            e.TorusGeometry = Wt,
            e.TorusBufferGeometry = Ht,
            e.TextGeometry = qt,
            e.SphereBufferGeometry = Zt,
            e.SphereGeometry = Jt,
            e.RingGeometry = $t,
            e.RingBufferGeometry = Kt,
            e.PlaneBufferGeometry = Ne,
            e.PlaneGeometry = er,
            e.LatheGeometry = rr,
            e.LatheBufferGeometry = tr,
            e.ShapeGeometry = ir,
            e.ShapeBufferGeometry = nr,
            e.ExtrudeGeometry = Xt,
            e.EdgesGeometry = ar,
            e.ConeGeometry = ur,
            e.ConeBufferGeometry = lr,
            e.CylinderGeometry = sr,
            e.CylinderBufferGeometry = or,
            e.CircleBufferGeometry = cr,
            e.CircleGeometry = hr,
            e.BoxBufferGeometry = De,
            e.BoxGeometry = fr,
            e.ShadowMaterial = dr,
            e.SpriteMaterial = dt,
            e.RawShaderMaterial = pr,
            e.ShaderMaterial = J,
            e.PointsMaterial = At,
            e.MultiMaterial = mr,
            e.MeshPhysicalMaterial = vr,
            e.MeshStandardMaterial = gr,
            e.MeshPhongMaterial = yr,
            e.MeshToonMaterial = Mr;
            e.MeshNormalMaterial = wr;
            e.MeshLambertMaterial = xr,
            e.MeshDepthMaterial = K,
            e.MeshBasicMaterial = fe,
            e.MeshCubeMaterial = Ar,
            e.LineDashedMaterial = br,
            e.LineBasicMaterial = Mt,
            e.MaterialMap = Ie,
            e.Material = Z,
            e.Float64BufferAttribute = Ae,
            e.Float32BufferAttribute = xe,
            e.Uint32BufferAttribute = we,
            e.Int32BufferAttribute = Me,
            e.Uint16BufferAttribute = ye,
            e.Int16BufferAttribute = ve,
            e.Uint8ClampedBufferAttribute = ge,
            e.Uint8BufferAttribute = me,
            e.Int8BufferAttribute = pe,
            e.BufferAttribute = de,
            e.REVISION = Zi,
            e.MOUSE = Ji,
            e.CullFaceNone = Ki,
            e.CullFaceBack = $i,
            e.CullFaceFront = ea,
            e.CullFaceFrontBack = ta,
            e.FrontFaceDirectionCW = ra,
            e.FrontFaceDirectionCCW = na,
            e.BasicShadowMap = ia,
            e.PCFShadowMap = aa,
            e.PCFSoftShadowMap = oa,
            e.PCSSSoftShadowMap = sa,
            e.FrontSide = ua,
            e.BackSide = la,
            e.DoubleSide = ca,
            e.FlatShading = ha,
            e.SmoothShading = fa,
            e.NoColors = da,
            e.FaceColors = pa,
            e.VertexColors = ma,
            e.NoBlending = ga,
            e.NormalBlending = va,
            e.AdditiveBlending = ya,
            e.SubtractiveBlending = Ma,
            e.MultiplyBlending = wa,
            e.CustomBlending = xa,
            e.AddEquation = Aa,
            e.SubtractEquation = ba,
            e.ReverseSubtractEquation = Ta,
            e.MinEquation = _a,
            e.MaxEquation = Ea,
            e.ZeroFactor = Sa,
            e.OneFactor = Da,
            e.SrcColorFactor = Na,
            e.OneMinusSrcColorFactor = Ia,
            e.SrcAlphaFactor = La,
            e.OneMinusSrcAlphaFactor = Ca,
            e.DstAlphaFactor = Oa,
            e.OneMinusDstAlphaFactor = ja,
            e.DstColorFactor = Ra,
            e.OneMinusDstColorFactor = Pa,
            e.SrcAlphaSaturateFactor = za,
            e.NeverDepth = Ba,
            e.AlwaysDepth = Ua,
            e.LessDepth = Va,
            e.LessEqualDepth = ka,
            e.EqualDepth = Fa,
            e.GreaterEqualDepth = Ga,
            e.GreaterDepth = Ya,
            e.NotEqualDepth = Qa,
            e.MultiplyOperation = Ha,
            e.MixOperation = Wa,
            e.AddOperation = Xa,
            e.NoToneMapping = qa,
            e.LinearToneMapping = Za,
            e.ReinhardToneMapping = Ja,
            e.Uncharted2ToneMapping = Ka,
            e.CineonToneMapping = $a,
            e.UVMapping = eo,
            e.CubeReflectionMapping = to,
            e.CubeRefractionMapping = ro,
            e.EquirectangularReflectionMapping = no,
            e.EquirectangularRefractionMapping = io,
            e.SphericalReflectionMapping = ao,
            e.CubeUVReflectionMapping = oo,
            e.CubeUVRefractionMapping = so,
            e.RepeatWrapping = uo,
            e.ClampToEdgeWrapping = lo,
            e.MirroredRepeatWrapping = co,
            e.NearestFilter = ho,
            e.NearestMipMapNearestFilter = fo,
            e.NearestMipMapLinearFilter = po,
            e.LinearFilter = mo,
            e.LinearMipMapNearestFilter = go,
            e.LinearMipMapLinearFilter = vo,
            e.UnsignedByteType = yo,
            e.ByteType = Mo,
            e.ShortType = wo,
            e.UnsignedShortType = xo,
            e.IntType = Ao,
            e.UnsignedIntType = bo,
            e.FloatType = To,
            e.HalfFloatType = _o,
            e.UnsignedShort4444Type = Eo,
            e.UnsignedShort5551Type = So,
            e.UnsignedShort565Type = Do,
            e.UnsignedInt248Type = No,
            e.AlphaFormat = Io,
            e.RGBFormat = Lo,
            e.RGBAFormat = Co,
            e.LuminanceFormat = Oo,
            e.LuminanceAlphaFormat = jo,
            e.RGBEFormat = Ro,
            e.DepthFormat = Po,
            e.DepthStencilFormat = zo,
            e.RGB_S3TC_DXT1_Format = Bo,
            e.RGBA_S3TC_DXT1_Format = Uo,
            e.RGBA_S3TC_DXT3_Format = Vo,
            e.RGBA_S3TC_DXT5_Format = ko,
            e.RGB_PVRTC_4BPPV1_Format = Fo,
            e.RGB_PVRTC_2BPPV1_Format = Go,
            e.RGBA_PVRTC_4BPPV1_Format = Yo,
            e.RGBA_PVRTC_2BPPV1_Format = Qo,
            e.RGB_ETC1_Format = Ho,
            e.LoopOnce = Wo,
            e.LoopRepeat = Xo,
            e.LoopPingPong = qo,
            e.InterpolateDiscrete = Zo,
            e.InterpolateLinear = Jo,
            e.InterpolateSmooth = Ko,
            e.ZeroCurvatureEnding = $o,
            e.ZeroSlopeEnding = es,
            e.WrapAroundEnding = ts,
            e.TrianglesDrawMode = rs,
            e.TriangleStripDrawMode = ns,
            e.TriangleFanDrawMode = is,
            e.LinearEncoding = as,
            e.sRGBEncoding = os,
            e.GammaEncoding = ss,
            e.RGBEEncoding = us,
            e.LogLuvEncoding = ls,
            e.RGBM7Encoding = cs,
            e.RGBM16Encoding = hs,
            e.RGBDEncoding = fs,
            e.BasicDepthPacking = ds,
            e.RGBADepthPacking = ps,
            e.CubeGeometry = fr,
            e.Face4 = xi,
            e.LineStrip = tc,
            e.LinePieces = rc,
            e.MeshFaceMaterial = Ai,
            e.PointCloud = bi,
            e.Particle = Ti,
            e.ParticleSystem = _i,
            e.PointCloudMaterial = Ei,
            e.ParticleBasicMaterial = Si,
            e.ParticleSystemMaterial = Di,
            e.Vertex = Ni,
            e.DynamicBufferAttribute = Ii,
            e.Int8Attribute = Li,
            e.Uint8Attribute = Ci,
            e.Uint8ClampedAttribute = Oi,
            e.Int16Attribute = ji,
            e.Uint16Attribute = Ri,
            e.Int32Attribute = Pi,
            e.Uint32Attribute = zi,
            e.Float32Attribute = Bi,
            e.Float64Attribute = Ui,
            e.ClosedSplineCurve3 = Vi,
            e.SplineCurve3 = ki,
            e.Spline = Fi,
            e.BoundingBoxHelper = Gi,
            e.EdgesHelper = Yi,
            e.WireframeHelper = Qi,
            e.XHRLoader = Hi,
            e.BinaryTextureLoader = Wi,
            e.GeometryUtils = nc,
            e.ImageUtils = ic,
            e.Projector = Xi,
            e.CanvasRenderer = qi,
            Object.defineProperty(e, "__esModule", {
                value: !0
            })
        })
    }
    , /*!*******************************************!*\
  !*** ./~/util/support/isBufferBrowser.js ***!
  \*******************************************/
    function(e, t) {
        e.exports = function(e) {
            return e && "object" == typeof e && "function" == typeof e.copy && "function" == typeof e.fill && "function" == typeof e.readUInt8
        }
    }
    , /*!**************************************************!*\
  !*** ./~/webvr-polyfill/build/webvr-polyfill.js ***!
  \**************************************************/
    function(e, t, r) {
        var n, n;
        !function e(t, r, i) {
            function a(s, u) {
                if (!r[s]) {
                    if (!t[s]) {
                        var l = "function" == typeof n && n;
                        if (!u && l)
                            return n(s, !0);
                        if (o)
                            return o(s, !0);
                        var c = new Error("Cannot find module '" + s + "'");
                        throw c.code = "MODULE_NOT_FOUND",
                        c
                    }
                    var h = r[s] = {
                        exports: {}
                    };
                    t[s][0].call(h.exports, function(e) {
                        var r = t[s][1][e];
                        return a(r ? r : e)
                    }, h, h.exports, e, t, r, i)
                }
                return r[s].exports
            }
            for (var o = "function" == typeof n && n, s = 0; s < i.length; s++)
                a(i[s]);
            return a
        }({
            1: [function(e, t, r) {
                "use strict";
                function n(e) {
                    if (null === e || void 0 === e)
                        throw new TypeError("Object.assign cannot be called with null or undefined");
                    return Object(e)
                }
                function i() {
                    try {
                        if (!Object.assign)
                            return !1;
                        var e = new String("abc");
                        if (e[5] = "de",
                        "5" === Object.getOwnPropertyNames(e)[0])
                            return !1;
                        for (var t = {}, r = 0; r < 10; r++)
                            t["_" + String.fromCharCode(r)] = r;
                        var n = Object.getOwnPropertyNames(t).map(function(e) {
                            return t[e]
                        });
                        if ("0123456789" !== n.join(""))
                            return !1;
                        var i = {};
                        return "abcdefghijklmnopqrst".split("").forEach(function(e) {
                            i[e] = e
                        }),
                        "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, i)).join("")
                    } catch (e) {
                        return !1
                    }
                }
                var a = Object.prototype.hasOwnProperty
                  , o = Object.prototype.propertyIsEnumerable;
                t.exports = i() ? Object.assign : function(e, t) {
                    for (var r, i, s = n(e), u = 1; u < arguments.length; u++) {
                        r = Object(arguments[u]);
                        for (var l in r)
                            a.call(r, l) && (s[l] = r[l]);
                        if (Object.getOwnPropertySymbols) {
                            i = Object.getOwnPropertySymbols(r);
                            for (var c = 0; c < i.length; c++)
                                o.call(r, i[c]) && (s[i[c]] = r[i[c]])
                        }
                    }
                    return s
                }
            }
            , {}],
            2: [function(e, t, r) {
                function n() {
                    this.leftProjectionMatrix = new Float32Array(16),
                    this.leftViewMatrix = new Float32Array(16),
                    this.rightProjectionMatrix = new Float32Array(16),
                    this.rightViewMatrix = new Float32Array(16),
                    this.pose = null
                }
                function i() {
                    this.isPolyfilled = !0,
                    this.displayId = c++,
                    this.displayName = "webvr-polyfill displayName",
                    this.depthNear = .01,
                    this.depthFar = 1e4,
                    this.isConnected = !0,
                    this.isPresenting = !1,
                    this.capabilities = {
                        hasPosition: !1,
                        hasOrientation: !1,
                        hasExternalDisplay: !1,
                        canPresent: !1,
                        maxLayers: 1
                    },
                    this.stageParameters = null,
                    this.waitingForPresent_ = !1,
                    this.layer_ = null,
                    this.fullscreenElement_ = null,
                    this.fullscreenWrapper_ = null,
                    this.fullscreenElementCachedStyle_ = null,
                    this.fullscreenEventTarget_ = null,
                    this.fullscreenChangeHandler_ = null,
                    this.fullscreenErrorHandler_ = null,
                    this.wakelock_ = new l
                }
                function a() {
                    this.isPolyfilled = !0,
                    this.hardwareUnitId = "webvr-polyfill hardwareUnitId",
                    this.deviceId = "webvr-polyfill deviceId",
                    this.deviceName = "webvr-polyfill deviceName"
                }
                function o() {}
                function s() {}
                var u = e("./util.js")
                  , l = e("./wakelock.js")
                  , c = 1e3
                  , h = !1
                  , f = [0, 0, .5, 1]
                  , d = [.5, 0, .5, 1];
                i.prototype.getFrameData = function(e) {
                    return u.frameDataFromPose(e, this.getPose(), this)
                }
                ,
                i.prototype.getPose = function() {
                    return this.getImmediatePose()
                }
                ,
                i.prototype.requestAnimationFrame = function(e) {
                    return window.requestAnimationFrame(e)
                }
                ,
                i.prototype.cancelAnimationFrame = function(e) {
                    return window.cancelAnimationFrame(e)
                }
                ,
                i.prototype.wrapForFullscreen = function(e) {
                    function t() {
                        if (i.fullscreenElement_) {
                            var e = ["position: absolute", "top: 0", "left: 0", "width: " + Math.max(screen.width, screen.height) + "px", "height: " + Math.min(screen.height, screen.width) + "px", "border: 0", "margin: 0", "padding: 0"];
                            i.fullscreenElement_.setAttribute("style", e.join("; ") + ";")
                        }
                    }
                    if (u.isIOS())
                        return e;
                    if (!this.fullscreenWrapper_) {
                        this.fullscreenWrapper_ = document.createElement("div");
                        var r = ["height: " + Math.min(screen.height, screen.width) + "px !important", "top: 0 !important", "left: 0 !important", "right: 0 !important", "border: 0", "margin: 0", "padding: 0", "z-index: 999999 !important", "position: fixed"];
                        this.fullscreenWrapper_.setAttribute("style", r.join("; ") + ";"),
                        this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")
                    }
                    if (this.fullscreenElement_ == e)
                        return this.fullscreenWrapper_;
                    this.removeFullscreenWrapper(),
                    this.fullscreenElement_ = e;
                    var n = this.fullscreenElement_.parentElement;
                    n.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_),
                    n.removeChild(this.fullscreenElement_),
                    this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild),
                    this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute("style");
                    var i = this;
                    return t(),
                    this.fullscreenWrapper_
                }
                ,
                i.prototype.removeFullscreenWrapper = function() {
                    if (this.fullscreenElement_) {
                        var e = this.fullscreenElement_;
                        this.fullscreenElementCachedStyle_ ? e.setAttribute("style", this.fullscreenElementCachedStyle_) : e.removeAttribute("style"),
                        this.fullscreenElement_ = null,
                        this.fullscreenElementCachedStyle_ = null;
                        var t = this.fullscreenWrapper_.parentElement;
                        return this.fullscreenWrapper_.removeChild(e),
                        t.insertBefore(e, this.fullscreenWrapper_),
                        t.removeChild(this.fullscreenWrapper_),
                        e
                    }
                }
                ,
                i.prototype.requestPresent = function(e) {
                    var t = this.isPresenting
                      , r = this;
                    return e instanceof Array || (h || (console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),
                    h = !0),
                    e = [e]),
                    new Promise(function(n, i) {
                        function a() {
                            var e = u.getFullscreenElement();
                            r.isPresenting = m === e,
                            r.isPresenting ? (screen.orientation && screen.orientation.lock && screen.orientation.lock("landscape-primary").catch(function(e) {
                                console.error("screen.orientation.lock() failed due to", e.message)
                            }),
                            r.waitingForPresent_ = !1,
                            r.beginPresent_(),
                            n()) : (screen.orientation && screen.orientation.unlock && screen.orientation.unlock(),
                            r.removeFullscreenWrapper(),
                            r.wakelock_.release(),
                            r.endPresent_(),
                            r.removeFullscreenListeners_()),
                            r.fireVRDisplayPresentChange_()
                        }
                        function o() {
                            r.waitingForPresent_ && (r.removeFullscreenWrapper(),
                            r.removeFullscreenListeners_(),
                            r.wakelock_.release(),
                            r.waitingForPresent_ = !1,
                            r.isPresenting = !1,
                            i(new Error("Unable to present.")))
                        }
                        if (!r.capabilities.canPresent)
                            return void i(new Error("VRDisplay is not capable of presenting."));
                        if (0 == e.length || e.length > r.capabilities.maxLayers)
                            return void i(new Error("Invalid number of layers."));
                        var s = e[0];
                        if (!s.source)
                            return void n();
                        var l = s.leftBounds || f
                          , c = s.rightBounds || d;
                        if (t) {
                            var h = r.layer_;
                            h.source !== s.source && (h.source = s.source);
                            for (var p = 0; p < 4; p++)
                                h.leftBounds[p] !== l[p] && (h.leftBounds[p] = l[p]),
                                h.rightBounds[p] !== c[p] && (h.rightBounds[p] = c[p]);
                            return void n()
                        }
                        if (r.layer_ = {
                            predistorted: s.predistorted,
                            source: s.source,
                            leftBounds: l.slice(0),
                            rightBounds: c.slice(0)
                        },
                        r.waitingForPresent_ = !1,
                        r.layer_ && r.layer_.source) {
                            var m = r.wrapForFullscreen(r.layer_.source);
                            r.addFullscreenListeners_(m, a, o),
                            u.requestFullscreen(m) ? (r.wakelock_.request(),
                            r.waitingForPresent_ = !0) : u.isIOS() && (r.wakelock_.request(),
                            r.isPresenting = !0,
                            r.beginPresent_(),
                            r.fireVRDisplayPresentChange_(),
                            n())
                        }
                        r.waitingForPresent_ || u.isIOS() || (u.exitFullscreen(),
                        i(new Error("Unable to present.")))
                    }
                    )
                }
                ,
                i.prototype.exitPresent = function() {
                    var e = this.isPresenting
                      , t = this;
                    return this.isPresenting = !1,
                    this.layer_ = null,
                    this.wakelock_.release(),
                    new Promise(function(r, n) {
                        e ? (!u.exitFullscreen() && u.isIOS() && (t.endPresent_(),
                        t.fireVRDisplayPresentChange_()),
                        r()) : n(new Error("Was not presenting to VRDisplay."))
                    }
                    )
                }
                ,
                i.prototype.getLayers = function() {
                    return this.layer_ ? [this.layer_] : []
                }
                ,
                i.prototype.fireVRDisplayPresentChange_ = function() {
                    var e = new CustomEvent("vrdisplaypresentchange",{
                        detail: {
                            display: this
                        }
                    });
                    window.dispatchEvent(e)
                }
                ,
                i.prototype.addFullscreenListeners_ = function(e, t, r) {
                    this.removeFullscreenListeners_(),
                    this.fullscreenEventTarget_ = e,
                    this.fullscreenChangeHandler_ = t,
                    this.fullscreenErrorHandler_ = r,
                    t && (document.fullscreenEnabled ? e.addEventListener("fullscreenchange", t, !1) : document.webkitFullscreenEnabled ? e.addEventListener("webkitfullscreenchange", t, !1) : document.mozFullScreenEnabled ? document.addEventListener("mozfullscreenchange", t, !1) : document.msFullscreenEnabled && e.addEventListener("msfullscreenchange", t, !1)),
                    r && (document.fullscreenEnabled ? e.addEventListener("fullscreenerror", r, !1) : document.webkitFullscreenEnabled ? e.addEventListener("webkitfullscreenerror", r, !1) : document.mozFullScreenEnabled ? document.addEventListener("mozfullscreenerror", r, !1) : document.msFullscreenEnabled && e.addEventListener("msfullscreenerror", r, !1))
                }
                ,
                i.prototype.removeFullscreenListeners_ = function() {
                    if (this.fullscreenEventTarget_) {
                        var e = this.fullscreenEventTarget_;
                        if (this.fullscreenChangeHandler_) {
                            var t = this.fullscreenChangeHandler_;
                            e.removeEventListener("fullscreenchange", t, !1),
                            e.removeEventListener("webkitfullscreenchange", t, !1),
                            document.removeEventListener("mozfullscreenchange", t, !1),
                            e.removeEventListener("msfullscreenchange", t, !1)
                        }
                        if (this.fullscreenErrorHandler_) {
                            var r = this.fullscreenErrorHandler_;
                            e.removeEventListener("fullscreenerror", r, !1),
                            e.removeEventListener("webkitfullscreenerror", r, !1),
                            document.removeEventListener("mozfullscreenerror", r, !1),
                            e.removeEventListener("msfullscreenerror", r, !1)
                        }
                        this.fullscreenEventTarget_ = null,
                        this.fullscreenChangeHandler_ = null,
                        this.fullscreenErrorHandler_ = null
                    }
                }
                ,
                i.prototype.beginPresent_ = function() {}
                ,
                i.prototype.endPresent_ = function() {}
                ,
                i.prototype.submitFrame = function(e) {}
                ,
                i.prototype.getEyeParameters = function(e) {
                    return null
                }
                ,
                o.prototype = new a,
                s.prototype = new a,
                t.exports.VRFrameData = n,
                t.exports.VRDisplay = i,
                t.exports.VRDevice = a,
                t.exports.HMDVRDevice = o,
                t.exports.PositionSensorVRDevice = s
            }
            , {
                "./util.js": 22,
                "./wakelock.js": 24
            }],
            3: [function(e, t, r) {
                function n(e) {
                    this.gl = e,
                    this.ctxAttribs = e.getContextAttributes(),
                    this.meshWidth = 20,
                    this.meshHeight = 20,
                    this.bufferScale = WebVRConfig.BUFFER_SCALE,
                    this.bufferWidth = e.drawingBufferWidth,
                    this.bufferHeight = e.drawingBufferHeight,
                    this.realBindFramebuffer = e.bindFramebuffer,
                    this.realEnable = e.enable,
                    this.realDisable = e.disable,
                    this.realColorMask = e.colorMask,
                    this.realClearColor = e.clearColor,
                    this.realViewport = e.viewport,
                    a.isIOS() || (this.realCanvasWidth = Object.getOwnPropertyDescriptor(e.canvas.__proto__, "width"),
                    this.realCanvasHeight = Object.getOwnPropertyDescriptor(e.canvas.__proto__, "height")),
                    this.isPatched = !1,
                    this.lastBoundFramebuffer = null,
                    this.cullFace = !1,
                    this.depthTest = !1,
                    this.blend = !1,
                    this.scissorTest = !1,
                    this.stencilTest = !1,
                    this.viewport = [0, 0, 0, 0],
                    this.colorMask = [!0, !0, !0, !0],
                    this.clearColor = [0, 0, 0, 0],
                    this.attribs = {
                        position: 0,
                        texCoord: 1
                    },
                    this.program = a.linkProgram(e, s, u, this.attribs),
                    this.uniforms = a.getProgramUniforms(e, this.program),
                    this.viewportOffsetScale = new Float32Array(8),
                    this.setTextureBounds(),
                    this.vertexBuffer = e.createBuffer(),
                    this.indexBuffer = e.createBuffer(),
                    this.indexCount = 0,
                    this.renderTarget = e.createTexture(),
                    this.framebuffer = e.createFramebuffer(),
                    this.depthStencilBuffer = null,
                    this.depthBuffer = null,
                    this.stencilBuffer = null,
                    this.ctxAttribs.depth && this.ctxAttribs.stencil ? this.depthStencilBuffer = e.createRenderbuffer() : this.ctxAttribs.depth ? this.depthBuffer = e.createRenderbuffer() : this.ctxAttribs.stencil && (this.stencilBuffer = e.createRenderbuffer()),
                    this.patch(),
                    this.onResize(),
                    WebVRConfig.CARDBOARD_UI_DISABLED || (this.cardboardUI = new i(e))
                }
                var i = e("./cardboard-ui.js")
                  , a = e("./util.js")
                  , o = e("./deps/wglu-preserve-state.js")
                  , s = ["attribute vec2 position;", "attribute vec3 texCoord;", "varying vec2 vTexCoord;", "uniform vec4 viewportOffsetScale[2];", "void main() {", "  vec4 viewport = viewportOffsetScale[int(texCoord.z)];", "  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;", "  gl_Position = vec4( position, 1.0, 1.0 );", "}"].join("\n")
                  , u = ["precision mediump float;", "uniform sampler2D diffuse;", "varying vec2 vTexCoord;", "void main() {", "  gl_FragColor = texture2D(diffuse, vTexCoord);", "}"].join("\n");
                n.prototype.destroy = function() {
                    var e = this.gl;
                    this.unpatch(),
                    e.deleteProgram(this.program),
                    e.deleteBuffer(this.vertexBuffer),
                    e.deleteBuffer(this.indexBuffer),
                    e.deleteTexture(this.renderTarget),
                    e.deleteFramebuffer(this.framebuffer),
                    this.depthStencilBuffer && e.deleteRenderbuffer(this.depthStencilBuffer),
                    this.depthBuffer && e.deleteRenderbuffer(this.depthBuffer),
                    this.stencilBuffer && e.deleteRenderbuffer(this.stencilBuffer),
                    this.cardboardUI && this.cardboardUI.destroy()
                }
                ,
                n.prototype.onResize = function() {
                    var e = this.gl
                      , t = this
                      , r = [e.RENDERBUFFER_BINDING, e.TEXTURE_BINDING_2D, e.TEXTURE0];
                    o(e, r, function(e) {
                        t.realBindFramebuffer.call(e, e.FRAMEBUFFER, null),
                        t.scissorTest && t.realDisable.call(e, e.SCISSOR_TEST),
                        t.realColorMask.call(e, !0, !0, !0, !0),
                        t.realViewport.call(e, 0, 0, e.drawingBufferWidth, e.drawingBufferHeight),
                        t.realClearColor.call(e, 0, 0, 0, 1),
                        e.clear(e.COLOR_BUFFER_BIT),
                        t.realBindFramebuffer.call(e, e.FRAMEBUFFER, t.framebuffer),
                        e.bindTexture(e.TEXTURE_2D, t.renderTarget),
                        e.texImage2D(e.TEXTURE_2D, 0, t.ctxAttribs.alpha ? e.RGBA : e.RGB, t.bufferWidth, t.bufferHeight, 0, t.ctxAttribs.alpha ? e.RGBA : e.RGB, e.UNSIGNED_BYTE, null),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                        e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t.renderTarget, 0),
                        t.ctxAttribs.depth && t.ctxAttribs.stencil ? (e.bindRenderbuffer(e.RENDERBUFFER, t.depthStencilBuffer),
                        e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t.bufferWidth, t.bufferHeight),
                        e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.RENDERBUFFER, t.depthStencilBuffer)) : t.ctxAttribs.depth ? (e.bindRenderbuffer(e.RENDERBUFFER, t.depthBuffer),
                        e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_COMPONENT16, t.bufferWidth, t.bufferHeight),
                        e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t.depthBuffer)) : t.ctxAttribs.stencil && (e.bindRenderbuffer(e.RENDERBUFFER, t.stencilBuffer),
                        e.renderbufferStorage(e.RENDERBUFFER, e.STENCIL_INDEX8, t.bufferWidth, t.bufferHeight),
                        e.framebufferRenderbuffer(e.FRAMEBUFFER, e.STENCIL_ATTACHMENT, e.RENDERBUFFER, t.stencilBuffer)),
                        !e.checkFramebufferStatus(e.FRAMEBUFFER) === e.FRAMEBUFFER_COMPLETE && console.error("Framebuffer incomplete!"),
                        t.realBindFramebuffer.call(e, e.FRAMEBUFFER, t.lastBoundFramebuffer),
                        t.scissorTest && t.realEnable.call(e, e.SCISSOR_TEST),
                        t.realColorMask.apply(e, t.colorMask),
                        t.realViewport.apply(e, t.viewport),
                        t.realClearColor.apply(e, t.clearColor)
                    }),
                    this.cardboardUI && this.cardboardUI.onResize()
                }
                ,
                n.prototype.patch = function() {
                    if (!this.isPatched) {
                        var e = this
                          , t = this.gl.canvas
                          , r = this.gl;
                        a.isIOS() || (t.width = a.getScreenWidth() * this.bufferScale,
                        t.height = a.getScreenHeight() * this.bufferScale,
                        Object.defineProperty(t, "width", {
                            configurable: !0,
                            enumerable: !0,
                            get: function() {
                                return e.bufferWidth
                            },
                            set: function(r) {
                                e.bufferWidth = r,
                                e.realCanvasWidth.set.call(t, r),
                                e.onResize()
                            }
                        }),
                        Object.defineProperty(t, "height", {
                            configurable: !0,
                            enumerable: !0,
                            get: function() {
                                return e.bufferHeight
                            },
                            set: function(r) {
                                e.bufferHeight = r,
                                e.realCanvasHeight.set.call(t, r),
                                e.onResize()
                            }
                        })),
                        this.lastBoundFramebuffer = r.getParameter(r.FRAMEBUFFER_BINDING),
                        null == this.lastBoundFramebuffer && (this.lastBoundFramebuffer = this.framebuffer,
                        this.gl.bindFramebuffer(r.FRAMEBUFFER, this.framebuffer)),
                        this.gl.bindFramebuffer = function(t, n) {
                            e.lastBoundFramebuffer = n ? n : e.framebuffer,
                            e.realBindFramebuffer.call(r, t, e.lastBoundFramebuffer)
                        }
                        ,
                        this.cullFace = r.getParameter(r.CULL_FACE),
                        this.depthTest = r.getParameter(r.DEPTH_TEST),
                        this.blend = r.getParameter(r.BLEND),
                        this.scissorTest = r.getParameter(r.SCISSOR_TEST),
                        this.stencilTest = r.getParameter(r.STENCIL_TEST),
                        r.enable = function(t) {
                            switch (t) {
                            case r.CULL_FACE:
                                e.cullFace = !0;
                                break;
                            case r.DEPTH_TEST:
                                e.depthTest = !0;
                                break;
                            case r.BLEND:
                                e.blend = !0;
                                break;
                            case r.SCISSOR_TEST:
                                e.scissorTest = !0;
                                break;
                            case r.STENCIL_TEST:
                                e.stencilTest = !0
                            }
                            e.realEnable.call(r, t)
                        }
                        ,
                        r.disable = function(t) {
                            switch (t) {
                            case r.CULL_FACE:
                                e.cullFace = !1;
                                break;
                            case r.DEPTH_TEST:
                                e.depthTest = !1;
                                break;
                            case r.BLEND:
                                e.blend = !1;
                                break;
                            case r.SCISSOR_TEST:
                                e.scissorTest = !1;
                                break;
                            case r.STENCIL_TEST:
                                e.stencilTest = !1
                            }
                            e.realDisable.call(r, t)
                        }
                        ,
                        this.colorMask = r.getParameter(r.COLOR_WRITEMASK),
                        r.colorMask = function(t, n, i, a) {
                            e.colorMask[0] = t,
                            e.colorMask[1] = n,
                            e.colorMask[2] = i,
                            e.colorMask[3] = a,
                            e.realColorMask.call(r, t, n, i, a)
                        }
                        ,
                        this.clearColor = r.getParameter(r.COLOR_CLEAR_VALUE),
                        r.clearColor = function(t, n, i, a) {
                            e.clearColor[0] = t,
                            e.clearColor[1] = n,
                            e.clearColor[2] = i,
                            e.clearColor[3] = a,
                            e.realClearColor.call(r, t, n, i, a)
                        }
                        ,
                        this.viewport = r.getParameter(r.VIEWPORT),
                        r.viewport = function(t, n, i, a) {
                            e.viewport[0] = t,
                            e.viewport[1] = n,
                            e.viewport[2] = i,
                            e.viewport[3] = a,
                            e.realViewport.call(r, t, n, i, a)
                        }
                        ,
                        this.isPatched = !0,
                        a.safariCssSizeWorkaround(t)
                    }
                }
                ,
                n.prototype.unpatch = function() {
                    if (this.isPatched) {
                        var e = this.gl
                          , t = this.gl.canvas;
                        a.isIOS() || (Object.defineProperty(t, "width", this.realCanvasWidth),
                        Object.defineProperty(t, "height", this.realCanvasHeight)),
                        t.width = this.bufferWidth,
                        t.height = this.bufferHeight,
                        e.bindFramebuffer = this.realBindFramebuffer,
                        e.enable = this.realEnable,
                        e.disable = this.realDisable,
                        e.colorMask = this.realColorMask,
                        e.clearColor = this.realClearColor,
                        e.viewport = this.realViewport,
                        this.lastBoundFramebuffer == this.framebuffer && e.bindFramebuffer(e.FRAMEBUFFER, null),
                        this.isPatched = !1,
                        setTimeout(function() {
                            a.safariCssSizeWorkaround(t)
                        }, 1)
                    }
                }
                ,
                n.prototype.setTextureBounds = function(e, t) {
                    e || (e = [0, 0, .5, 1]),
                    t || (t = [.5, 0, .5, 1]),
                    this.viewportOffsetScale[0] = e[0],
                    this.viewportOffsetScale[1] = e[1],
                    this.viewportOffsetScale[2] = e[2],
                    this.viewportOffsetScale[3] = e[3],
                    this.viewportOffsetScale[4] = t[0],
                    this.viewportOffsetScale[5] = t[1],
                    this.viewportOffsetScale[6] = t[2],
                    this.viewportOffsetScale[7] = t[3]
                }
                ,
                n.prototype.submitFrame = function() {
                    var e = this.gl
                      , t = this
                      , r = [];
                    if (WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS || r.push(e.CURRENT_PROGRAM, e.ARRAY_BUFFER_BINDING, e.ELEMENT_ARRAY_BUFFER_BINDING, e.TEXTURE_BINDING_2D, e.TEXTURE0),
                    o(e, r, function(e) {
                        t.realBindFramebuffer.call(e, e.FRAMEBUFFER, null),
                        t.cullFace && t.realDisable.call(e, e.CULL_FACE),
                        t.depthTest && t.realDisable.call(e, e.DEPTH_TEST),
                        t.blend && t.realDisable.call(e, e.BLEND),
                        t.scissorTest && t.realDisable.call(e, e.SCISSOR_TEST),
                        t.stencilTest && t.realDisable.call(e, e.STENCIL_TEST),
                        t.realColorMask.call(e, !0, !0, !0, !0),
                        t.realViewport.call(e, 0, 0, e.drawingBufferWidth, e.drawingBufferHeight),
                        (t.ctxAttribs.alpha || a.isIOS()) && (t.realClearColor.call(e, 0, 0, 0, 1),
                        e.clear(e.COLOR_BUFFER_BIT)),
                        e.useProgram(t.program),
                        e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t.indexBuffer),
                        e.bindBuffer(e.ARRAY_BUFFER, t.vertexBuffer),
                        e.enableVertexAttribArray(t.attribs.position),
                        e.enableVertexAttribArray(t.attribs.texCoord),
                        e.vertexAttribPointer(t.attribs.position, 2, e.FLOAT, !1, 20, 0),
                        e.vertexAttribPointer(t.attribs.texCoord, 3, e.FLOAT, !1, 20, 8),
                        e.activeTexture(e.TEXTURE0),
                        e.uniform1i(t.uniforms.diffuse, 0),
                        e.bindTexture(e.TEXTURE_2D, t.renderTarget),
                        e.uniform4fv(t.uniforms.viewportOffsetScale, t.viewportOffsetScale),
                        e.drawElements(e.TRIANGLES, t.indexCount, e.UNSIGNED_SHORT, 0),
                        t.cardboardUI && t.cardboardUI.renderNoState(),
                        t.realBindFramebuffer.call(t.gl, e.FRAMEBUFFER, t.framebuffer),
                        t.ctxAttribs.preserveDrawingBuffer || (t.realClearColor.call(e, 0, 0, 0, 0),
                        e.clear(e.COLOR_BUFFER_BIT)),
                        WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS || t.realBindFramebuffer.call(e, e.FRAMEBUFFER, t.lastBoundFramebuffer),
                        t.cullFace && t.realEnable.call(e, e.CULL_FACE),
                        t.depthTest && t.realEnable.call(e, e.DEPTH_TEST),
                        t.blend && t.realEnable.call(e, e.BLEND),
                        t.scissorTest && t.realEnable.call(e, e.SCISSOR_TEST),
                        t.stencilTest && t.realEnable.call(e, e.STENCIL_TEST),
                        t.realColorMask.apply(e, t.colorMask),
                        t.realViewport.apply(e, t.viewport),
                        !t.ctxAttribs.alpha && t.ctxAttribs.preserveDrawingBuffer || t.realClearColor.apply(e, t.clearColor)
                    }),
                    a.isIOS()) {
                        var n = e.canvas;
                        n.width == t.bufferWidth && n.height == t.bufferHeight || (t.bufferWidth = n.width,
                        t.bufferHeight = n.height,
                        t.onResize())
                    }
                }
                ,
                n.prototype.updateDeviceInfo = function(e) {
                    var t = this.gl
                      , r = this
                      , n = [t.ARRAY_BUFFER_BINDING, t.ELEMENT_ARRAY_BUFFER_BINDING];
                    o(t, n, function(t) {
                        var n = r.computeMeshVertices_(r.meshWidth, r.meshHeight, e);
                        if (t.bindBuffer(t.ARRAY_BUFFER, r.vertexBuffer),
                        t.bufferData(t.ARRAY_BUFFER, n, t.STATIC_DRAW),
                        !r.indexCount) {
                            var i = r.computeMeshIndices_(r.meshWidth, r.meshHeight);
                            t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, r.indexBuffer),
                            t.bufferData(t.ELEMENT_ARRAY_BUFFER, i, t.STATIC_DRAW),
                            r.indexCount = i.length
                        }
                    })
                }
                ,
                n.prototype.computeMeshVertices_ = function(e, t, r) {
                    for (var n = new Float32Array(2 * e * t * 5), i = r.getLeftEyeVisibleTanAngles(), o = r.getLeftEyeNoLensTanAngles(), s = r.getLeftEyeVisibleScreenRect(o), u = 0, l = 0; l < 2; l++) {
                        for (var c = 0; c < t; c++)
                            for (var h = 0; h < e; h++,
                            u++) {
                                var f = h / (e - 1)
                                  , d = c / (t - 1)
                                  , p = f
                                  , m = d
                                  , g = a.lerp(i[0], i[2], f)
                                  , v = a.lerp(i[3], i[1], d)
                                  , y = Math.sqrt(g * g + v * v)
                                  , M = r.distortion.distortInverse(y)
                                  , w = g * M / y
                                  , x = v * M / y;
                                f = (w - o[0]) / (o[2] - o[0]),
                                d = (x - o[3]) / (o[1] - o[3]),
                                r.device.widthMeters / r.device.heightMeters,
                                f = 2 * (s.x + f * s.width - .5),
                                d = 2 * (s.y + d * s.height - .5),
                                n[5 * u + 0] = f,
                                n[5 * u + 1] = d,
                                n[5 * u + 2] = p,
                                n[5 * u + 3] = m,
                                n[5 * u + 4] = l
                            }
                        var A = i[2] - i[0];
                        i[0] = -(A + i[0]),
                        i[2] = A - i[2],
                        A = o[2] - o[0],
                        o[0] = -(A + o[0]),
                        o[2] = A - o[2],
                        s.x = 1 - (s.x + s.width)
                    }
                    return n
                }
                ,
                n.prototype.computeMeshIndices_ = function(e, t) {
                    for (var r = new Uint16Array(2 * (e - 1) * (t - 1) * 6), n = e / 2, i = t / 2, a = 0, o = 0, s = 0; s < 2; s++)
                        for (var u = 0; u < t; u++)
                            for (var l = 0; l < e; l++,
                            a++)
                                0 != l && 0 != u && (l <= n == u <= i ? (r[o++] = a,
                                r[o++] = a - e - 1,
                                r[o++] = a - e,
                                r[o++] = a - e - 1,
                                r[o++] = a,
                                r[o++] = a - 1) : (r[o++] = a - 1,
                                r[o++] = a - e,
                                r[o++] = a,
                                r[o++] = a - e,
                                r[o++] = a - 1,
                                r[o++] = a - e - 1));
                    return r
                }
                ,
                n.prototype.getOwnPropertyDescriptor_ = function(e, t) {
                    var r = Object.getOwnPropertyDescriptor(e, t);
                    return void 0 !== r.get && void 0 !== r.set || (r.configurable = !0,
                    r.enumerable = !0,
                    r.get = function() {
                        return this.getAttribute(t)
                    }
                    ,
                    r.set = function(e) {
                        this.setAttribute(t, e)
                    }
                    ),
                    r
                }
                ,
                t.exports = n
            }
            , {
                "./cardboard-ui.js": 4,
                "./deps/wglu-preserve-state.js": 6,
                "./util.js": 22
            }],
            4: [function(e, t, r) {
                function n(e) {
                    this.gl = e,
                    this.attribs = {
                        position: 0
                    },
                    this.program = i.linkProgram(e, o, s, this.attribs),
                    this.uniforms = i.getProgramUniforms(e, this.program),
                    this.vertexBuffer = e.createBuffer(),
                    this.gearOffset = 0,
                    this.gearVertexCount = 0,
                    this.arrowOffset = 0,
                    this.arrowVertexCount = 0,
                    this.projMat = new Float32Array(16),
                    this.listener = null,
                    this.onResize()
                }
                var i = e("./util.js")
                  , a = e("./deps/wglu-preserve-state.js")
                  , o = ["attribute vec2 position;", "uniform mat4 projectionMat;", "void main() {", "  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );", "}"].join("\n")
                  , s = ["precision mediump float;", "uniform vec4 color;", "void main() {", "  gl_FragColor = color;", "}"].join("\n")
                  , u = Math.PI / 180
                  , l = 60
                  , c = 12
                  , h = 20
                  , f = 1
                  , d = .75
                  , p = .3125
                  , m = 4
                  , g = 28
                  , v = 1.5;
                n.prototype.destroy = function() {
                    var e = this.gl;
                    this.listener && e.canvas.removeEventListener("click", this.listener, !1),
                    e.deleteProgram(this.program),
                    e.deleteBuffer(this.vertexBuffer)
                }
                ,
                n.prototype.listen = function(e, t) {
                    var r = this.gl.canvas;
                    this.listener = function(n) {
                        var i = r.clientWidth / 2
                          , a = g * v;
                        n.clientX > i - a && n.clientX < i + a && n.clientY > r.clientHeight - a ? e(n) : n.clientX < a && n.clientY < a && t(n)
                    }
                    ,
                    r.addEventListener("click", this.listener, !1)
                }
                ,
                n.prototype.onResize = function() {
                    var e = this.gl
                      , t = this
                      , r = [e.ARRAY_BUFFER_BINDING];
                    a(e, r, function(e) {
                        function r(e, t) {
                            var r = (90 - e) * u
                              , n = Math.cos(r)
                              , i = Math.sin(r);
                            a.push(p * n * w + o, p * i * w + w),
                            a.push(t * n * w + o, t * i * w + w)
                        }
                        function n(t, r) {
                            a.push(x + t, e.drawingBufferHeight - x - r)
                        }
                        var a = []
                          , o = e.drawingBufferWidth / 2
                          , s = e.drawingBufferWidth / (screen.width * window.devicePixelRatio);
                        i.isIOS() || (s *= window.devicePixelRatio);
                        var y = m * s / 2
                          , M = g * v * s
                          , w = g * s / 2
                          , x = (g * v - g) * s;
                        a.push(o - y, M),
                        a.push(o - y, e.drawingBufferHeight),
                        a.push(o + y, M),
                        a.push(o + y, e.drawingBufferHeight),
                        t.gearOffset = a.length / 2;
                        for (var A = 0; A <= 6; A++) {
                            var b = A * l;
                            r(b, f),
                            r(b + c, f),
                            r(b + h, d),
                            r(b + (l - h), d),
                            r(b + (l - c), f)
                        }
                        t.gearVertexCount = a.length / 2 - t.gearOffset,
                        t.arrowOffset = a.length / 2;
                        var T = y / Math.sin(45 * u);
                        n(0, w),
                        n(w, 0),
                        n(w + T, T),
                        n(T, w + T),
                        n(T, w - T),
                        n(0, w),
                        n(w, 2 * w),
                        n(w + T, 2 * w - T),
                        n(T, w - T),
                        n(0, w),
                        n(T, w - y),
                        n(g * s, w - y),
                        n(T, w + y),
                        n(g * s, w + y),
                        t.arrowVertexCount = a.length / 2 - t.arrowOffset,
                        e.bindBuffer(e.ARRAY_BUFFER, t.vertexBuffer),
                        e.bufferData(e.ARRAY_BUFFER, new Float32Array(a), e.STATIC_DRAW)
                    })
                }
                ,
                n.prototype.render = function() {
                    var e = this.gl
                      , t = this
                      , r = [e.CULL_FACE, e.DEPTH_TEST, e.BLEND, e.SCISSOR_TEST, e.STENCIL_TEST, e.COLOR_WRITEMASK, e.VIEWPORT, e.CURRENT_PROGRAM, e.ARRAY_BUFFER_BINDING];
                    a(e, r, function(e) {
                        e.disable(e.CULL_FACE),
                        e.disable(e.DEPTH_TEST),
                        e.disable(e.BLEND),
                        e.disable(e.SCISSOR_TEST),
                        e.disable(e.STENCIL_TEST),
                        e.colorMask(!0, !0, !0, !0),
                        e.viewport(0, 0, e.drawingBufferWidth, e.drawingBufferHeight),
                        t.renderNoState()
                    })
                }
                ,
                n.prototype.renderNoState = function() {
                    var e = this.gl;
                    e.useProgram(this.program),
                    e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer),
                    e.enableVertexAttribArray(this.attribs.position),
                    e.vertexAttribPointer(this.attribs.position, 2, e.FLOAT, !1, 8, 0),
                    e.uniform4f(this.uniforms.color, 1, 1, 1, 1),
                    i.orthoMatrix(this.projMat, 0, e.drawingBufferWidth, 0, e.drawingBufferHeight, .1, 1024),
                    e.uniformMatrix4fv(this.uniforms.projectionMat, !1, this.projMat),
                    e.drawArrays(e.TRIANGLE_STRIP, 0, 4),
                    e.drawArrays(e.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount),
                    e.drawArrays(e.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount)
                }
                ,
                t.exports = n
            }
            , {
                "./deps/wglu-preserve-state.js": 6,
                "./util.js": 22
            }],
            5: [function(e, t, r) {
                function n() {
                    this.displayName = "Cardboard VRDisplay (webvr-polyfill)",
                    this.capabilities.hasOrientation = !0,
                    this.capabilities.canPresent = !0,
                    this.bufferScale_ = WebVRConfig.BUFFER_SCALE,
                    this.poseSensor_ = new u,
                    this.distorter_ = null,
                    this.cardboardUI_ = null,
                    this.dpdb_ = new s(!0,this.onDeviceParamsUpdated_.bind(this)),
                    this.deviceInfo_ = new o(this.dpdb_.getDeviceParams()),
                    this.viewerSelector_ = new c,
                    this.viewerSelector_.on("change", this.onViewerChanged_.bind(this)),
                    this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),
                    WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED || (this.rotateInstructions_ = new l),
                    f.isIOS() && window.addEventListener("resize", this.onResize_.bind(this))
                }
                var i = e("./cardboard-distorter.js")
                  , a = e("./cardboard-ui.js")
                  , o = e("./device-info.js")
                  , s = e("./dpdb/dpdb.js")
                  , u = e("./sensor-fusion/fusion-pose-sensor.js")
                  , l = e("./rotate-instructions.js")
                  , c = e("./viewer-selector.js")
                  , h = e("./base.js").VRDisplay
                  , f = e("./util.js")
                  , d = {
                    LEFT: "left",
                    RIGHT: "right"
                };
                n.prototype = new h,
                n.prototype.getImmediatePose = function() {
                    return {
                        position: this.poseSensor_.getPosition(),
                        orientation: this.poseSensor_.getOrientation(),
                        linearVelocity: null,
                        linearAcceleration: null,
                        angularVelocity: null,
                        angularAcceleration: null
                    }
                }
                ,
                n.prototype.resetPose = function() {
                    this.poseSensor_.resetPose()
                }
                ,
                n.prototype.getEyeParameters = function(e) {
                    var t, r = [.5 * this.deviceInfo_.viewer.interLensDistance, 0, 0];
                    if (e == d.LEFT)
                        r[0] *= -1,
                        t = this.deviceInfo_.getFieldOfViewLeftEye();
                    else {
                        if (e != d.RIGHT)
                            return console.error("Invalid eye provided: %s", e),
                            null;
                        t = this.deviceInfo_.getFieldOfViewRightEye()
                    }
                    return {
                        fieldOfView: t,
                        offset: r,
                        renderWidth: .5 * this.deviceInfo_.device.width * this.bufferScale_,
                        renderHeight: this.deviceInfo_.device.height * this.bufferScale_
                    }
                }
                ,
                n.prototype.onDeviceParamsUpdated_ = function(e) {
                    console.log("DPDB reported that device params were updated."),
                    this.deviceInfo_.updateDeviceParams(e),
                    this.distorter_ && this.distorter_.updateDeviceInfo(this.deviceInfo_)
                }
                ,
                n.prototype.updateBounds_ = function() {
                    this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds) && this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds)
                }
                ,
                n.prototype.beginPresent_ = function() {
                    var e = this.layer_.source.getContext("webgl");
                    e || (e = this.layer_.source.getContext("experimental-webgl")),
                    e || (e = this.layer_.source.getContext("webgl2")),
                    e && (this.layer_.predistorted ? WebVRConfig.CARDBOARD_UI_DISABLED || (e.canvas.width = f.getScreenWidth() * this.bufferScale_,
                    e.canvas.height = f.getScreenHeight() * this.bufferScale_,
                    this.cardboardUI_ = new a(e)) : (this.distorter_ = new i(e),
                    this.distorter_.updateDeviceInfo(this.deviceInfo_),
                    this.cardboardUI_ = this.distorter_.cardboardUI),
                    this.cardboardUI_ && this.cardboardUI_.listen(function(e) {
                        this.viewerSelector_.show(this.layer_.source.parentElement),
                        e.stopPropagation(),
                        e.preventDefault()
                    }
                    .bind(this), function(e) {
                        this.exitPresent(),
                        e.stopPropagation(),
                        e.preventDefault()
                    }
                    .bind(this)),
                    this.rotateInstructions_ && (f.isLandscapeMode() && f.isMobile() ? this.rotateInstructions_.showTemporarily(3e3, this.layer_.source.parentElement) : this.rotateInstructions_.update()),
                    this.orientationHandler = this.onOrientationChange_.bind(this),
                    window.addEventListener("orientationchange", this.orientationHandler),
                    this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this),
                    window.addEventListener("vrdisplaypresentchange", this.vrdisplaypresentchangeHandler),
                    this.fireVRDisplayDeviceParamsChange_())
                }
                ,
                n.prototype.endPresent_ = function() {
                    this.distorter_ && (this.distorter_.destroy(),
                    this.distorter_ = null),
                    this.cardboardUI_ && (this.cardboardUI_.destroy(),
                    this.cardboardUI_ = null),
                    this.rotateInstructions_ && this.rotateInstructions_.hide(),
                    this.viewerSelector_.hide(),
                    window.removeEventListener("orientationchange", this.orientationHandler),
                    window.removeEventListener("vrdisplaypresentchange", this.vrdisplaypresentchangeHandler)
                }
                ,
                n.prototype.submitFrame = function(e) {
                    if (this.distorter_)
                        this.distorter_.submitFrame();
                    else if (this.cardboardUI_ && this.layer_) {
                        var t = this.layer_.source.getContext("webgl").canvas;
                        t.width == this.lastWidth && t.height == this.lastHeight || this.cardboardUI_.onResize(),
                        this.lastWidth = t.width,
                        this.lastHeight = t.height,
                        this.cardboardUI_.render()
                    }
                }
                ,
                n.prototype.onOrientationChange_ = function(e) {
                    console.log("onOrientationChange_"),
                    this.viewerSelector_.hide(),
                    this.rotateInstructions_ && this.rotateInstructions_.update(),
                    this.onResize_()
                }
                ,
                n.prototype.onResize_ = function(e) {
                    if (this.layer_) {
                        var t = this.layer_.source.getContext("webgl")
                          , r = ["position: absolute", "top: 0", "left: 0", "width: " + Math.max(screen.width, screen.height) + "px", "height: " + Math.min(screen.height, screen.width) + "px", "border: 0", "margin: 0", "padding: 0 10px 10px 0"];
                        t.canvas.setAttribute("style", r.join("; ") + ";"),
                        f.safariCssSizeWorkaround(t.canvas)
                    }
                }
                ,
                n.prototype.onViewerChanged_ = function(e) {
                    this.deviceInfo_.setViewer(e),
                    this.distorter_ && this.distorter_.updateDeviceInfo(this.deviceInfo_),
                    this.fireVRDisplayDeviceParamsChange_()
                }
                ,
                n.prototype.fireVRDisplayDeviceParamsChange_ = function() {
                    var e = new CustomEvent("vrdisplaydeviceparamschange",{
                        detail: {
                            vrdisplay: this,
                            deviceInfo: this.deviceInfo_
                        }
                    });
                    window.dispatchEvent(e)
                }
                ,
                t.exports = n
            }
            , {
                "./base.js": 2,
                "./cardboard-distorter.js": 3,
                "./cardboard-ui.js": 4,
                "./device-info.js": 7,
                "./dpdb/dpdb.js": 11,
                "./rotate-instructions.js": 16,
                "./sensor-fusion/fusion-pose-sensor.js": 18,
                "./util.js": 22,
                "./viewer-selector.js": 23
            }],
            6: [function(e, t, r) {
                function n(e, t, r) {
                    if (!t)
                        return void r(e);
                    for (var n = [], i = null, a = 0; a < t.length; ++a) {
                        var o = t[a];
                        switch (o) {
                        case e.TEXTURE_BINDING_2D:
                        case e.TEXTURE_BINDING_CUBE_MAP:
                            var s = t[++a];
                            if (s < e.TEXTURE0 || s > e.TEXTURE31) {
                                console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),
                                n.push(null, null);
                                break
                            }
                            i || (i = e.getParameter(e.ACTIVE_TEXTURE)),
                            e.activeTexture(s),
                            n.push(e.getParameter(o), null);
                            break;
                        case e.ACTIVE_TEXTURE:
                            i = e.getParameter(e.ACTIVE_TEXTURE),
                            n.push(null);
                            break;
                        default:
                            n.push(e.getParameter(o))
                        }
                    }
                    r(e);
                    for (var a = 0; a < t.length; ++a) {
                        var o = t[a]
                          , u = n[a];
                        switch (o) {
                        case e.ACTIVE_TEXTURE:
                            break;
                        case e.ARRAY_BUFFER_BINDING:
                            e.bindBuffer(e.ARRAY_BUFFER, u);
                            break;
                        case e.COLOR_CLEAR_VALUE:
                            e.clearColor(u[0], u[1], u[2], u[3]);
                            break;
                        case e.COLOR_WRITEMASK:
                            e.colorMask(u[0], u[1], u[2], u[3]);
                            break;
                        case e.CURRENT_PROGRAM:
                            e.useProgram(u);
                            break;
                        case e.ELEMENT_ARRAY_BUFFER_BINDING:
                            e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, u);
                            break;
                        case e.FRAMEBUFFER_BINDING:
                            e.bindFramebuffer(e.FRAMEBUFFER, u);
                            break;
                        case e.RENDERBUFFER_BINDING:
                            e.bindRenderbuffer(e.RENDERBUFFER, u);
                            break;
                        case e.TEXTURE_BINDING_2D:
                            var s = t[++a];
                            if (s < e.TEXTURE0 || s > e.TEXTURE31)
                                break;
                            e.activeTexture(s),
                            e.bindTexture(e.TEXTURE_2D, u);
                            break;
                        case e.TEXTURE_BINDING_CUBE_MAP:
                            var s = t[++a];
                            if (s < e.TEXTURE0 || s > e.TEXTURE31)
                                break;
                            e.activeTexture(s),
                            e.bindTexture(e.TEXTURE_CUBE_MAP, u);
                            break;
                        case e.VIEWPORT:
                            e.viewport(u[0], u[1], u[2], u[3]);
                            break;
                        case e.BLEND:
                        case e.CULL_FACE:
                        case e.DEPTH_TEST:
                        case e.SCISSOR_TEST:
                        case e.STENCIL_TEST:
                            u ? e.enable(o) : e.disable(o);
                            break;
                        default:
                            console.log("No GL restore behavior for 0x" + o.toString(16))
                        }
                        i && e.activeTexture(i)
                    }
                }
                t.exports = n
            }
            , {}],
            7: [function(e, t, r) {
                function n(e) {
                    this.width = e.width || u.getScreenWidth(),
                    this.height = e.height || u.getScreenHeight(),
                    this.widthMeters = e.widthMeters,
                    this.heightMeters = e.heightMeters,
                    this.bevelMeters = e.bevelMeters
                }
                function i(e) {
                    this.viewer = h.CardboardV2,
                    this.updateDeviceParams(e),
                    this.distortion = new o(this.viewer.distortionCoefficients)
                }
                function a(e) {
                    this.id = e.id,
                    this.label = e.label,
                    this.fov = e.fov,
                    this.interLensDistance = e.interLensDistance,
                    this.baselineLensDistance = e.baselineLensDistance,
                    this.screenLensDistance = e.screenLensDistance,
                    this.distortionCoefficients = e.distortionCoefficients,
                    this.inverseCoefficients = e.inverseCoefficients
                }
                var o = e("./distortion/distortion.js")
                  , s = e("./math-util.js")
                  , u = e("./util.js")
                  , l = new n({
                    widthMeters: .11,
                    heightMeters: .062,
                    bevelMeters: .004
                })
                  , c = new n({
                    widthMeters: .1038,
                    heightMeters: .0584,
                    bevelMeters: .004
                })
                  , h = {
                    CardboardV1: new a({
                        id: "CardboardV1",
                        label: "Cardboard I/O 2014",
                        fov: 40,
                        interLensDistance: .06,
                        baselineLensDistance: .035,
                        screenLensDistance: .042,
                        distortionCoefficients: [.441, .156],
                        inverseCoefficients: [-.4410035, .42756155, -.4804439, .5460139, -.58821183, .5733938, -.48303202, .33299083, -.17573841, .0651772, -.01488963, .001559834]
                    }),
                    CardboardV2: new a({
                        id: "CardboardV2",
                        label: "Cardboard I/O 2015",
                        fov: 60,
                        interLensDistance: .064,
                        baselineLensDistance: .035,
                        screenLensDistance: .039,
                        distortionCoefficients: [.34, .55],
                        inverseCoefficients: [-.33836704, -.18162185, .862655, -1.2462051, 1.0560602, -.58208317, .21609078, -.05444823, .009177956, -.0009904169, 6183535e-11, -16981803e-13]
                    })
                };
                i.prototype.updateDeviceParams = function(e) {
                    this.device = this.determineDevice_(e) || this.device
                }
                ,
                i.prototype.getDevice = function() {
                    return this.device
                }
                ,
                i.prototype.setViewer = function(e) {
                    this.viewer = e,
                    this.distortion = new o(this.viewer.distortionCoefficients)
                }
                ,
                i.prototype.determineDevice_ = function(e) {
                    if (!e)
                        return u.isIOS() ? (console.warn("Using fallback iOS device measurements."),
                        c) : (console.warn("Using fallback Android device measurements."),
                        l);
                    var t = .0254
                      , r = t / e.xdpi
                      , i = t / e.ydpi
                      , a = u.getScreenWidth()
                      , o = u.getScreenHeight();
                    return new n({
                        widthMeters: r * a,
                        heightMeters: i * o,
                        bevelMeters: .001 * e.bevelMm
                    })
                }
                ,
                i.prototype.getDistortedFieldOfViewLeftEye = function() {
                    var e = this.viewer
                      , t = this.device
                      , r = this.distortion
                      , n = e.screenLensDistance
                      , i = (t.widthMeters - e.interLensDistance) / 2
                      , a = e.interLensDistance / 2
                      , o = e.baselineLensDistance - t.bevelMeters
                      , u = t.heightMeters - o
                      , l = s.radToDeg * Math.atan(r.distort(i / n))
                      , c = s.radToDeg * Math.atan(r.distort(a / n))
                      , h = s.radToDeg * Math.atan(r.distort(o / n))
                      , f = s.radToDeg * Math.atan(r.distort(u / n));
                    return {
                        leftDegrees: Math.min(l, e.fov),
                        rightDegrees: Math.min(c, e.fov),
                        downDegrees: Math.min(h, e.fov),
                        upDegrees: Math.min(f, e.fov)
                    }
                }
                ,
                i.prototype.getLeftEyeVisibleTanAngles = function() {
                    var e = this.viewer
                      , t = this.device
                      , r = this.distortion
                      , n = Math.tan(-s.degToRad * e.fov)
                      , i = Math.tan(s.degToRad * e.fov)
                      , a = Math.tan(s.degToRad * e.fov)
                      , o = Math.tan(-s.degToRad * e.fov)
                      , u = t.widthMeters / 4
                      , l = t.heightMeters / 2
                      , c = e.baselineLensDistance - t.bevelMeters - l
                      , h = e.interLensDistance / 2 - u
                      , f = -c
                      , d = e.screenLensDistance
                      , p = r.distort((h - u) / d)
                      , m = r.distort((f + l) / d)
                      , g = r.distort((h + u) / d)
                      , v = r.distort((f - l) / d)
                      , y = new Float32Array(4);
                    return y[0] = Math.max(n, p),
                    y[1] = Math.min(i, m),
                    y[2] = Math.min(a, g),
                    y[3] = Math.max(o, v),
                    y
                }
                ,
                i.prototype.getLeftEyeNoLensTanAngles = function() {
                    var e = this.viewer
                      , t = this.device
                      , r = this.distortion
                      , n = new Float32Array(4)
                      , i = r.distortInverse(Math.tan(-s.degToRad * e.fov))
                      , a = r.distortInverse(Math.tan(s.degToRad * e.fov))
                      , o = r.distortInverse(Math.tan(s.degToRad * e.fov))
                      , u = r.distortInverse(Math.tan(-s.degToRad * e.fov))
                      , l = t.widthMeters / 4
                      , c = t.heightMeters / 2
                      , h = e.baselineLensDistance - t.bevelMeters - c
                      , f = e.interLensDistance / 2 - l
                      , d = -h
                      , p = e.screenLensDistance
                      , m = (f - l) / p
                      , g = (d + c) / p
                      , v = (f + l) / p
                      , y = (d - c) / p;
                    return n[0] = Math.max(i, m),
                    n[1] = Math.min(a, g),
                    n[2] = Math.min(o, v),
                    n[3] = Math.max(u, y),
                    n
                }
                ,
                i.prototype.getLeftEyeVisibleScreenRect = function(e) {
                    var t = this.viewer
                      , r = this.device
                      , n = t.screenLensDistance
                      , i = (r.widthMeters - t.interLensDistance) / 2
                      , a = t.baselineLensDistance - r.bevelMeters
                      , o = (e[0] * n + i) / r.widthMeters
                      , s = (e[1] * n + a) / r.heightMeters
                      , u = (e[2] * n + i) / r.widthMeters
                      , l = (e[3] * n + a) / r.heightMeters;
                    return {
                        x: o,
                        y: l,
                        width: u - o,
                        height: s - l
                    }
                }
                ,
                i.prototype.getFieldOfViewLeftEye = function(e) {
                    return e ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye()
                }
                ,
                i.prototype.getFieldOfViewRightEye = function(e) {
                    var t = this.getFieldOfViewLeftEye(e);
                    return {
                        leftDegrees: t.rightDegrees,
                        rightDegrees: t.leftDegrees,
                        upDegrees: t.upDegrees,
                        downDegrees: t.downDegrees
                    }
                }
                ,
                i.prototype.getUndistortedFieldOfViewLeftEye = function() {
                    var e = this.getUndistortedParams_();
                    return {
                        leftDegrees: s.radToDeg * Math.atan(e.outerDist),
                        rightDegrees: s.radToDeg * Math.atan(e.innerDist),
                        downDegrees: s.radToDeg * Math.atan(e.bottomDist),
                        upDegrees: s.radToDeg * Math.atan(e.topDist)
                    }
                }
                ,
                i.prototype.getUndistortedViewportLeftEye = function() {
                    var e = this.getUndistortedParams_()
                      , t = this.viewer
                      , r = this.device
                      , n = t.screenLensDistance
                      , i = r.widthMeters / n
                      , a = r.heightMeters / n
                      , o = r.width / i
                      , s = r.height / a
                      , u = Math.round((e.eyePosX - e.outerDist) * o)
                      , l = Math.round((e.eyePosY - e.bottomDist) * s);
                    return {
                        x: u,
                        y: l,
                        width: Math.round((e.eyePosX + e.innerDist) * o) - u,
                        height: Math.round((e.eyePosY + e.topDist) * s) - l
                    }
                }
                ,
                i.prototype.getUndistortedParams_ = function() {
                    var e = this.viewer
                      , t = this.device
                      , r = this.distortion
                      , n = e.screenLensDistance
                      , i = e.interLensDistance / 2 / n
                      , a = t.widthMeters / n
                      , o = t.heightMeters / n
                      , u = a / 2 - i
                      , l = (e.baselineLensDistance - t.bevelMeters) / n
                      , c = e.fov
                      , h = r.distortInverse(Math.tan(s.degToRad * c))
                      , f = Math.min(u, h)
                      , d = Math.min(i, h)
                      , p = Math.min(l, h)
                      , m = Math.min(o - l, h);
                    return {
                        outerDist: f,
                        innerDist: d,
                        topDist: m,
                        bottomDist: p,
                        eyePosX: u,
                        eyePosY: l
                    }
                }
                ,
                i.Viewers = h,
                t.exports = i
            }
            , {
                "./distortion/distortion.js": 9,
                "./math-util.js": 14,
                "./util.js": 22
            }],
            8: [function(e, t, r) {
                function n(e) {
                    this.display = e,
                    this.hardwareUnitId = e.displayId,
                    this.deviceId = "webvr-polyfill:HMD:" + e.displayId,
                    this.deviceName = e.displayName + " (HMD)"
                }
                function i(e) {
                    this.display = e,
                    this.hardwareUnitId = e.displayId,
                    this.deviceId = "webvr-polyfill:PositionSensor: " + e.displayId,
                    this.deviceName = e.displayName + " (PositionSensor)"
                }
                var a = (e("./base.js").VRDisplay,
                e("./base.js").HMDVRDevice)
                  , o = e("./base.js").PositionSensorVRDevice;
                n.prototype = new a,
                n.prototype.getEyeParameters = function(e) {
                    var t = this.display.getEyeParameters(e);
                    return {
                        currentFieldOfView: t.fieldOfView,
                        maximumFieldOfView: t.fieldOfView,
                        minimumFieldOfView: t.fieldOfView,
                        recommendedFieldOfView: t.fieldOfView,
                        eyeTranslation: {
                            x: t.offset[0],
                            y: t.offset[1],
                            z: t.offset[2]
                        },
                        renderRect: {
                            x: "right" == e ? t.renderWidth : 0,
                            y: 0,
                            width: t.renderWidth,
                            height: t.renderHeight
                        }
                    }
                }
                ,
                n.prototype.setFieldOfView = function(e, t, r, n) {}
                ,
                i.prototype = new o,
                i.prototype.getState = function() {
                    var e = this.display.getPose();
                    return {
                        position: e.position ? {
                            x: e.position[0],
                            y: e.position[1],
                            z: e.position[2]
                        } : null,
                        orientation: e.orientation ? {
                            x: e.orientation[0],
                            y: e.orientation[1],
                            z: e.orientation[2],
                            w: e.orientation[3]
                        } : null,
                        linearVelocity: null,
                        linearAcceleration: null,
                        angularVelocity: null,
                        angularAcceleration: null
                    }
                }
                ,
                i.prototype.resetState = function() {
                    return this.positionDevice.resetPose()
                }
                ,
                t.exports.VRDisplayHMDDevice = n,
                t.exports.VRDisplayPositionSensorDevice = i
            }
            , {
                "./base.js": 2
            }],
            9: [function(e, t, r) {
                function n(e) {
                    this.coefficients = e
                }
                n.prototype.distortInverse = function(e) {
                    for (var t = 0, r = 1, n = e - this.distort(t); Math.abs(r - t) > 1e-4; ) {
                        var i = e - this.distort(r)
                          , a = r - i * ((r - t) / (i - n));
                        t = r,
                        r = a,
                        n = i
                    }
                    return r
                }
                ,
                n.prototype.distort = function(e) {
                    for (var t = e * e, r = 0, n = 0; n < this.coefficients.length; n++)
                        r = t * (r + this.coefficients[n]);
                    return (r + 1) * e
                }
                ,
                n.prototype.solveLinear_ = function(e, t) {
                    for (var r = e.length, n = 0; n < r - 1; ++n)
                        for (var i = n + 1; i < r; ++i) {
                            for (var a = e[n][i] / e[n][n], o = n + 1; o < r; ++o)
                                e[o][i] -= a * e[o][n];
                            t[i] -= a * t[n]
                        }
                    for (var s = new Array(r), n = r - 1; n >= 0; --n) {
                        for (var u = t[n], o = n + 1; o < r; ++o)
                            u -= e[o][n] * s[o];
                        s[n] = u / e[n][n]
                    }
                    return s
                }
                ,
                n.prototype.solveLeastSquares_ = function(e, t) {
                    var r, n, i, a, o = e.length, s = e[0].length;
                    if (o != t.Length)
                        throw new Error("Matrix / vector dimension mismatch");
                    var u = new Array(s);
                    for (i = 0; i < s; ++i)
                        for (u[i] = new Array(s),
                        n = 0; n < s; ++n) {
                            for (a = 0,
                            r = 0; r < o; ++r)
                                a += e[n][r] * e[i][r];
                            u[i][n] = a
                        }
                    var l = new Array(s);
                    for (n = 0; n < s; ++n) {
                        for (a = 0,
                        r = 0; r < o; ++r)
                            a += e[n][r] * t[r];
                        l[n] = a
                    }
                    return this.solveLinear_(u, l)
                }
                ,
                n.prototype.approximateInverse = function(e, t) {
                    e = e || 1,
                    t = t || 100;
                    var r, i, a = 6, o = new Array(a);
                    for (i = 0; i < a; ++i)
                        o[i] = new Array(t);
                    var s = new Array(t);
                    for (r = 0; r < t; ++r) {
                        var u = e * (r + 1) / t
                          , l = this.distort(u)
                          , c = l;
                        for (i = 0; i < a; ++i)
                            c *= l * l,
                            o[i][r] = c;
                        s[r] = u - l
                    }
                    var h = this.solveLeastSquares_(o, s);
                    return new n(h)
                }
                ,
                t.exports = n
            }
            , {}],
            10: [function(e, t, r) {
                var n = {
                    format: 1,
                    last_updated: "2016-01-20T00:18:35Z",
                    devices: [{
                        type: "android",
                        rules: [{
                            mdmh: "asus/*/Nexus 7/*"
                        }, {
                            ua: "Nexus 7"
                        }],
                        dpi: [320.8, 323],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "asus/*/ASUS_Z00AD/*"
                        }, {
                            ua: "ASUS_Z00AD"
                        }],
                        dpi: [403, 404.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "HTC/*/HTC6435LVW/*"
                        }, {
                            ua: "HTC6435LVW"
                        }],
                        dpi: [449.7, 443.3],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "HTC/*/HTC One XL/*"
                        }, {
                            ua: "HTC One XL"
                        }],
                        dpi: [315.3, 314.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "htc/*/Nexus 9/*"
                        }, {
                            ua: "Nexus 9"
                        }],
                        dpi: 289,
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "HTC/*/HTC One M9/*"
                        }, {
                            ua: "HTC One M9"
                        }],
                        dpi: [442.5, 443.3],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "HTC/*/HTC One_M8/*"
                        }, {
                            ua: "HTC One_M8"
                        }],
                        dpi: [449.7, 447.4],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "HTC/*/HTC One/*"
                        }, {
                            ua: "HTC One"
                        }],
                        dpi: 472.8,
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Huawei/*/Nexus 6P/*"
                        }, {
                            ua: "Nexus 6P"
                        }],
                        dpi: [515.1, 518],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/Nexus 5X/*"
                        }, {
                            ua: "Nexus 5X"
                        }],
                        dpi: [422, 419.9],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/LGMS345/*"
                        }, {
                            ua: "LGMS345"
                        }],
                        dpi: [221.7, 219.1],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/LG-D800/*"
                        }, {
                            ua: "LG-D800"
                        }],
                        dpi: [422, 424.1],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/LG-D850/*"
                        }, {
                            ua: "LG-D850"
                        }],
                        dpi: [537.9, 541.9],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/VS985 4G/*"
                        }, {
                            ua: "VS985 4G"
                        }],
                        dpi: [537.9, 535.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/Nexus 5/*"
                        }, {
                            ua: "Nexus 5 "
                        }],
                        dpi: [442.4, 444.8],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/Nexus 4/*"
                        }, {
                            ua: "Nexus 4"
                        }],
                        dpi: [319.8, 318.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/LG-P769/*"
                        }, {
                            ua: "LG-P769"
                        }],
                        dpi: [240.6, 247.5],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/LGMS323/*"
                        }, {
                            ua: "LGMS323"
                        }],
                        dpi: [206.6, 204.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "LGE/*/LGLS996/*"
                        }, {
                            ua: "LGLS996"
                        }],
                        dpi: [403.4, 401.5],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Micromax/*/4560MMX/*"
                        }, {
                            ua: "4560MMX"
                        }],
                        dpi: [240, 219.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Micromax/*/A250/*"
                        }, {
                            ua: "Micromax A250"
                        }],
                        dpi: [480, 446.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Micromax/*/Micromax AQ4501/*"
                        }, {
                            ua: "Micromax AQ4501"
                        }],
                        dpi: 240,
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/DROID RAZR/*"
                        }, {
                            ua: "DROID RAZR"
                        }],
                        dpi: [368.1, 256.7],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT830C/*"
                        }, {
                            ua: "XT830C"
                        }],
                        dpi: [254, 255.9],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1021/*"
                        }, {
                            ua: "XT1021"
                        }],
                        dpi: [254, 256.7],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1023/*"
                        }, {
                            ua: "XT1023"
                        }],
                        dpi: [254, 256.7],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1028/*"
                        }, {
                            ua: "XT1028"
                        }],
                        dpi: [326.6, 327.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1034/*"
                        }, {
                            ua: "XT1034"
                        }],
                        dpi: [326.6, 328.4],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1053/*"
                        }, {
                            ua: "XT1053"
                        }],
                        dpi: [315.3, 316.1],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1562/*"
                        }, {
                            ua: "XT1562"
                        }],
                        dpi: [403.4, 402.7],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/Nexus 6/*"
                        }, {
                            ua: "Nexus 6 "
                        }],
                        dpi: [494.3, 489.7],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1063/*"
                        }, {
                            ua: "XT1063"
                        }],
                        dpi: [295, 296.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1064/*"
                        }, {
                            ua: "XT1064"
                        }],
                        dpi: [295, 295.6],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1092/*"
                        }, {
                            ua: "XT1092"
                        }],
                        dpi: [422, 424.1],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "motorola/*/XT1095/*"
                        }, {
                            ua: "XT1095"
                        }],
                        dpi: [422, 423.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "OnePlus/*/A0001/*"
                        }, {
                            ua: "A0001"
                        }],
                        dpi: [403.4, 401],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "OnePlus/*/ONE E1005/*"
                        }, {
                            ua: "ONE E1005"
                        }],
                        dpi: [442.4, 441.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "OnePlus/*/ONE A2005/*"
                        }, {
                            ua: "ONE A2005"
                        }],
                        dpi: [391.9, 405.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "OPPO/*/X909/*"
                        }, {
                            ua: "X909"
                        }],
                        dpi: [442.4, 444.1],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9082/*"
                        }, {
                            ua: "GT-I9082"
                        }],
                        dpi: [184.7, 185.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G360P/*"
                        }, {
                            ua: "SM-G360P"
                        }],
                        dpi: [196.7, 205.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/Nexus S/*"
                        }, {
                            ua: "Nexus S"
                        }],
                        dpi: [234.5, 229.8],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9300/*"
                        }, {
                            ua: "GT-I9300"
                        }],
                        dpi: [304.8, 303.9],
                        bw: 5,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-T230NU/*"
                        }, {
                            ua: "SM-T230NU"
                        }],
                        dpi: 216,
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SGH-T399/*"
                        }, {
                            ua: "SGH-T399"
                        }],
                        dpi: [217.7, 231.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-N9005/*"
                        }, {
                            ua: "SM-N9005"
                        }],
                        dpi: [386.4, 387],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SAMSUNG-SM-N900A/*"
                        }, {
                            ua: "SAMSUNG-SM-N900A"
                        }],
                        dpi: [386.4, 387.7],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9500/*"
                        }, {
                            ua: "GT-I9500"
                        }],
                        dpi: [442.5, 443.3],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9505/*"
                        }, {
                            ua: "GT-I9505"
                        }],
                        dpi: 439.4,
                        bw: 4,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G900F/*"
                        }, {
                            ua: "SM-G900F"
                        }],
                        dpi: [415.6, 431.6],
                        bw: 5,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G900M/*"
                        }, {
                            ua: "SM-G900M"
                        }],
                        dpi: [415.6, 431.6],
                        bw: 5,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G800F/*"
                        }, {
                            ua: "SM-G800F"
                        }],
                        dpi: 326.8,
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G906S/*"
                        }, {
                            ua: "SM-G906S"
                        }],
                        dpi: [562.7, 572.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9300/*"
                        }, {
                            ua: "GT-I9300"
                        }],
                        dpi: [306.7, 304.8],
                        bw: 5,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-T535/*"
                        }, {
                            ua: "SM-T535"
                        }],
                        dpi: [142.6, 136.4],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-N920C/*"
                        }, {
                            ua: "SM-N920C"
                        }],
                        dpi: [515.1, 518.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9300I/*"
                        }, {
                            ua: "GT-I9300I"
                        }],
                        dpi: [304.8, 305.8],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-I9195/*"
                        }, {
                            ua: "GT-I9195"
                        }],
                        dpi: [249.4, 256.7],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SPH-L520/*"
                        }, {
                            ua: "SPH-L520"
                        }],
                        dpi: [249.4, 255.9],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SAMSUNG-SGH-I717/*"
                        }, {
                            ua: "SAMSUNG-SGH-I717"
                        }],
                        dpi: 285.8,
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SPH-D710/*"
                        }, {
                            ua: "SPH-D710"
                        }],
                        dpi: [217.7, 204.2],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/GT-N7100/*"
                        }, {
                            ua: "GT-N7100"
                        }],
                        dpi: 265.1,
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SCH-I605/*"
                        }, {
                            ua: "SCH-I605"
                        }],
                        dpi: 265.1,
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/Galaxy Nexus/*"
                        }, {
                            ua: "Galaxy Nexus"
                        }],
                        dpi: [315.3, 314.2],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-N910H/*"
                        }, {
                            ua: "SM-N910H"
                        }],
                        dpi: [515.1, 518],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-N910C/*"
                        }, {
                            ua: "SM-N910C"
                        }],
                        dpi: [515.2, 520.2],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G130M/*"
                        }, {
                            ua: "SM-G130M"
                        }],
                        dpi: [165.9, 164.8],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G928I/*"
                        }, {
                            ua: "SM-G928I"
                        }],
                        dpi: [515.1, 518.4],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G920F/*"
                        }, {
                            ua: "SM-G920F"
                        }],
                        dpi: 580.6,
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G920P/*"
                        }, {
                            ua: "SM-G920P"
                        }],
                        dpi: [522.5, 577],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G925F/*"
                        }, {
                            ua: "SM-G925F"
                        }],
                        dpi: 580.6,
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "samsung/*/SM-G925V/*"
                        }, {
                            ua: "SM-G925V"
                        }],
                        dpi: [522.5, 576.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Sony/*/C6903/*"
                        }, {
                            ua: "C6903"
                        }],
                        dpi: [442.5, 443.3],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Sony/*/D6653/*"
                        }, {
                            ua: "D6653"
                        }],
                        dpi: [428.6, 427.6],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Sony/*/E6653/*"
                        }, {
                            ua: "E6653"
                        }],
                        dpi: [428.6, 425.7],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Sony/*/E6853/*"
                        }, {
                            ua: "E6853"
                        }],
                        dpi: [403.4, 401.9],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "Sony/*/SGP321/*"
                        }, {
                            ua: "SGP321"
                        }],
                        dpi: [224.7, 224.1],
                        bw: 3,
                        ac: 500
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "TCT/*/ALCATEL ONE TOUCH Fierce/*"
                        }, {
                            ua: "ALCATEL ONE TOUCH Fierce"
                        }],
                        dpi: [240, 247.5],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "THL/*/thl 5000/*"
                        }, {
                            ua: "thl 5000"
                        }],
                        dpi: [480, 443.3],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "android",
                        rules: [{
                            mdmh: "ZTE/*/ZTE Blade L2/*"
                        }, {
                            ua: "ZTE Blade L2"
                        }],
                        dpi: 240,
                        bw: 3,
                        ac: 500
                    }, {
                        type: "ios",
                        rules: [{
                            res: [640, 960]
                        }],
                        dpi: [325.1, 328.4],
                        bw: 4,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [640, 960]
                        }],
                        dpi: [325.1, 328.4],
                        bw: 4,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [640, 1136]
                        }],
                        dpi: [317.1, 320.2],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [640, 1136]
                        }],
                        dpi: [317.1, 320.2],
                        bw: 3,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [750, 1334]
                        }],
                        dpi: 326.4,
                        bw: 4,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [750, 1334]
                        }],
                        dpi: 326.4,
                        bw: 4,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [1242, 2208]
                        }],
                        dpi: [453.6, 458.4],
                        bw: 4,
                        ac: 1e3
                    }, {
                        type: "ios",
                        rules: [{
                            res: [1242, 2208]
                        }],
                        dpi: [453.6, 458.4],
                        bw: 4,
                        ac: 1e3
                    }]
                };
                t.exports = n
            }
            , {}],
            11: [function(e, t, r) {
                function n(e, t) {
                    if (this.dpdb = a,
                    this.recalculateDeviceParams_(),
                    e) {
                        this.onDeviceParamsUpdated = t,
                        console.log("Fetching DPDB...");
                        var r = new XMLHttpRequest
                          , n = this;
                        r.open("GET", s, !0),
                        r.addEventListener("load", function() {
                            n.loading = !1,
                            r.status >= 200 && r.status <= 299 ? (console.log("Successfully loaded online DPDB."),
                            n.dpdb = JSON.parse(r.response),
                            n.recalculateDeviceParams_()) : console.error("Error loading online DPDB!")
                        }),
                        r.send()
                    }
                }
                function i(e) {
                    this.xdpi = e.xdpi,
                    this.ydpi = e.ydpi,
                    this.bevelMm = e.bevelMm
                }
                var a = e("./dpdb-cache.js")
                  , o = e("../util.js")
                  , s = "https://storage.googleapis.com/cardboard-dpdb/dpdb.json";
                n.prototype.getDeviceParams = function() {
                    return this.deviceParams
                }
                ,
                n.prototype.recalculateDeviceParams_ = function() {
                    console.log("Recalculating device params.");
                    var e = this.calcDeviceParams_();
                    console.log("New device parameters:"),
                    console.log(e),
                    e ? (this.deviceParams = e,
                    this.onDeviceParamsUpdated && this.onDeviceParamsUpdated(this.deviceParams)) : console.error("Failed to recalculate device parameters.")
                }
                ,
                n.prototype.calcDeviceParams_ = function() {
                    var e = this.dpdb;
                    if (!e)
                        return console.error("DPDB not available."),
                        null;
                    if (1 != e.format)
                        return console.error("DPDB has unexpected format version."),
                        null;
                    if (!e.devices || !e.devices.length)
                        return console.error("DPDB does not have a devices section."),
                        null;
                    var t = navigator.userAgent || navigator.vendor || window.opera
                      , r = o.getScreenWidth()
                      , n = o.getScreenHeight();
                    if (console.log("User agent: " + t),
                    console.log("Pixel width: " + r),
                    console.log("Pixel height: " + n),
                    !e.devices)
                        return console.error("DPDB has no devices section."),
                        null;
                    for (var a = 0; a < e.devices.length; a++) {
                        var s = e.devices[a];
                        if (s.rules)
                            if ("ios" == s.type || "android" == s.type) {
                                if (o.isIOS() == ("ios" == s.type)) {
                                    for (var u = !1, l = 0; l < s.rules.length; l++) {
                                        var c = s.rules[l];
                                        if (this.matchRule_(c, t, r, n)) {
                                            console.log("Rule matched:"),
                                            console.log(c),
                                            u = !0;
                                            break
                                        }
                                    }
                                    if (u) {
                                        var h = s.dpi[0] || s.dpi
                                          , f = s.dpi[1] || s.dpi;
                                        return new i({
                                            xdpi: h,
                                            ydpi: f,
                                            bevelMm: s.bw
                                        })
                                    }
                                }
                            } else
                                console.warn("Device[" + a + "] has invalid type.");
                        else
                            console.warn("Device[" + a + "] has no rules section.")
                    }
                    return console.warn("No DPDB device match."),
                    null
                }
                ,
                n.prototype.matchRule_ = function(e, t, r, n) {
                    if (!e.ua && !e.res)
                        return !1;
                    if (e.ua && t.indexOf(e.ua) < 0)
                        return !1;
                    if (e.res) {
                        if (!e.res[0] || !e.res[1])
                            return !1;
                        var i = e.res[0]
                          , a = e.res[1];
                        if (Math.min(r, n) != Math.min(i, a) || Math.max(r, n) != Math.max(i, a))
                            return !1
                    }
                    return !0
                }
                ,
                t.exports = n
            }
            , {
                "../util.js": 22,
                "./dpdb-cache.js": 10
            }],
            12: [function(e, t, r) {
                function n() {
                    this.callbacks = {}
                }
                n.prototype.emit = function(e) {
                    var t = this.callbacks[e];
                    if (t) {
                        var r = [].slice.call(arguments);
                        r.shift();
                        for (var n = 0; n < t.length; n++)
                            t[n].apply(this, r)
                    }
                }
                ,
                n.prototype.on = function(e, t) {
                    e in this.callbacks ? this.callbacks[e].push(t) : this.callbacks[e] = [t]
                }
                ,
                t.exports = n
            }
            , {}],
            13: [function(e, t, r) {
                var n = e("./util.js")
                  , i = e("./webvr-polyfill.js").WebVRPolyfill;
                window.WebVRConfig = n.extend({
                    FORCE_ENABLE_VR: !1,
                    K_FILTER: .98,
                    PREDICTION_TIME_S: .04,
                    TOUCH_PANNER_DISABLED: !0,
                    CARDBOARD_UI_DISABLED: !1,
                    ROTATE_INSTRUCTIONS_DISABLED: !1,
                    YAW_ONLY: !1,
                    MOUSE_KEYBOARD_CONTROLS_DISABLED: !1,
                    DEFER_INITIALIZATION: !1,
                    ENABLE_DEPRECATED_API: !1,
                    BUFFER_SCALE: .5,
                    DIRTY_SUBMIT_FRAME_BINDINGS: !1
                }, window.WebVRConfig),
                window.WebVRConfig.DEFER_INITIALIZATION ? window.InitializeWebVRPolyfill = function() {
                    new i
                }
                : new i
            }
            , {
                "./util.js": 22,
                "./webvr-polyfill.js": 25
            }],
            14: [function(e, t, r) {
                var n = window.MathUtil || {};
                n.degToRad = Math.PI / 180,
                n.radToDeg = 180 / Math.PI,
                n.Vector2 = function(e, t) {
                    this.x = e || 0,
                    this.y = t || 0
                }
                ,
                n.Vector2.prototype = {
                    constructor: n.Vector2,
                    set: function(e, t) {
                        return this.x = e,
                        this.y = t,
                        this
                    },
                    copy: function(e) {
                        return this.x = e.x,
                        this.y = e.y,
                        this
                    },
                    subVectors: function(e, t) {
                        return this.x = e.x - t.x,
                        this.y = e.y - t.y,
                        this
                    }
                },
                n.Vector3 = function(e, t, r) {
                    this.x = e || 0,
                    this.y = t || 0,
                    this.z = r || 0
                }
                ,
                n.Vector3.prototype = {
                    constructor: n.Vector3,
                    set: function(e, t, r) {
                        return this.x = e,
                        this.y = t,
                        this.z = r,
                        this
                    },
                    copy: function(e) {
                        return this.x = e.x,
                        this.y = e.y,
                        this.z = e.z,
                        this
                    },
                    length: function() {
                        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
                    },
                    normalize: function() {
                        var e = this.length();
                        if (0 !== e) {
                            var t = 1 / e;
                            this.multiplyScalar(t)
                        } else
                            this.x = 0,
                            this.y = 0,
                            this.z = 0;
                        return this
                    },
                    multiplyScalar: function(e) {
                        this.x *= e,
                        this.y *= e,
                        this.z *= e
                    },
                    applyQuaternion: function(e) {
                        var t = this.x
                          , r = this.y
                          , n = this.z
                          , i = e.x
                          , a = e.y
                          , o = e.z
                          , s = e.w
                          , u = s * t + a * n - o * r
                          , l = s * r + o * t - i * n
                          , c = s * n + i * r - a * t
                          , h = -i * t - a * r - o * n;
                        return this.x = u * s + h * -i + l * -o - c * -a,
                        this.y = l * s + h * -a + c * -i - u * -o,
                        this.z = c * s + h * -o + u * -a - l * -i,
                        this
                    },
                    dot: function(e) {
                        return this.x * e.x + this.y * e.y + this.z * e.z
                    },
                    crossVectors: function(e, t) {
                        var r = e.x
                          , n = e.y
                          , i = e.z
                          , a = t.x
                          , o = t.y
                          , s = t.z;
                        return this.x = n * s - i * o,
                        this.y = i * a - r * s,
                        this.z = r * o - n * a,
                        this
                    }
                },
                n.Quaternion = function(e, t, r, n) {
                    this.x = e || 0,
                    this.y = t || 0,
                    this.z = r || 0,
                    this.w = void 0 !== n ? n : 1
                }
                ,
                n.Quaternion.prototype = {
                    constructor: n.Quaternion,
                    set: function(e, t, r, n) {
                        return this.x = e,
                        this.y = t,
                        this.z = r,
                        this.w = n,
                        this
                    },
                    copy: function(e) {
                        return this.x = e.x,
                        this.y = e.y,
                        this.z = e.z,
                        this.w = e.w,
                        this
                    },
                    setFromEulerXYZ: function(e, t, r) {
                        var n = Math.cos(e / 2)
                          , i = Math.cos(t / 2)
                          , a = Math.cos(r / 2)
                          , o = Math.sin(e / 2)
                          , s = Math.sin(t / 2)
                          , u = Math.sin(r / 2);
                        return this.x = o * i * a + n * s * u,
                        this.y = n * s * a - o * i * u,
                        this.z = n * i * u + o * s * a,
                        this.w = n * i * a - o * s * u,
                        this
                    },
                    setFromEulerYXZ: function(e, t, r) {
                        var n = Math.cos(e / 2)
                          , i = Math.cos(t / 2)
                          , a = Math.cos(r / 2)
                          , o = Math.sin(e / 2)
                          , s = Math.sin(t / 2)
                          , u = Math.sin(r / 2);
                        return this.x = o * i * a + n * s * u,
                        this.y = n * s * a - o * i * u,
                        this.z = n * i * u - o * s * a,
                        this.w = n * i * a + o * s * u,
                        this
                    },
                    setFromAxisAngle: function(e, t) {
                        var r = t / 2
                          , n = Math.sin(r);
                        return this.x = e.x * n,
                        this.y = e.y * n,
                        this.z = e.z * n,
                        this.w = Math.cos(r),
                        this
                    },
                    multiply: function(e) {
                        return this.multiplyQuaternions(this, e)
                    },
                    multiplyQuaternions: function(e, t) {
                        var r = e.x
                          , n = e.y
                          , i = e.z
                          , a = e.w
                          , o = t.x
                          , s = t.y
                          , u = t.z
                          , l = t.w;
                        return this.x = r * l + a * o + n * u - i * s,
                        this.y = n * l + a * s + i * o - r * u,
                        this.z = i * l + a * u + r * s - n * o,
                        this.w = a * l - r * o - n * s - i * u,
                        this
                    },
                    inverse: function() {
                        return this.x *= -1,
                        this.y *= -1,
                        this.z *= -1,
                        this.normalize(),
                        this
                    },
                    normalize: function() {
                        var e = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
                        return 0 === e ? (this.x = 0,
                        this.y = 0,
                        this.z = 0,
                        this.w = 1) : (e = 1 / e,
                        this.x = this.x * e,
                        this.y = this.y * e,
                        this.z = this.z * e,
                        this.w = this.w * e),
                        this
                    },
                    slerp: function(e, t) {
                        if (0 === t)
                            return this;
                        if (1 === t)
                            return this.copy(e);
                        var r = this.x
                          , n = this.y
                          , i = this.z
                          , a = this.w
                          , o = a * e.w + r * e.x + n * e.y + i * e.z;
                        if (o < 0 ? (this.w = -e.w,
                        this.x = -e.x,
                        this.y = -e.y,
                        this.z = -e.z,
                        o = -o) : this.copy(e),
                        o >= 1)
                            return this.w = a,
                            this.x = r,
                            this.y = n,
                            this.z = i,
                            this;
                        var s = Math.acos(o)
                          , u = Math.sqrt(1 - o * o);
                        if (Math.abs(u) < .001)
                            return this.w = .5 * (a + this.w),
                            this.x = .5 * (r + this.x),
                            this.y = .5 * (n + this.y),
                            this.z = .5 * (i + this.z),
                            this;
                        var l = Math.sin((1 - t) * s) / u
                          , c = Math.sin(t * s) / u;
                        return this.w = a * l + this.w * c,
                        this.x = r * l + this.x * c,
                        this.y = n * l + this.y * c,
                        this.z = i * l + this.z * c,
                        this
                    },
                    setFromUnitVectors: function() {
                        var e, t, r = 1e-6;
                        return function(i, a) {
                            return void 0 === e && (e = new n.Vector3),
                            t = i.dot(a) + 1,
                            t < r ? (t = 0,
                            Math.abs(i.x) > Math.abs(i.z) ? e.set(-i.y, i.x, 0) : e.set(0, -i.z, i.y)) : e.crossVectors(i, a),
                            this.x = e.x,
                            this.y = e.y,
                            this.z = e.z,
                            this.w = t,
                            this.normalize(),
                            this
                        }
                    }()
                },
                t.exports = n
            }
            , {}],
            15: [function(e, t, r) {
                function n() {
                    this.displayName = "Mouse and Keyboard VRDisplay (webvr-polyfill)",
                    this.capabilities.hasOrientation = !0,
                    window.addEventListener("keydown", this.onKeyDown_.bind(this)),
                    window.addEventListener("mousemove", this.onMouseMove_.bind(this)),
                    window.addEventListener("mousedown", this.onMouseDown_.bind(this)),
                    window.addEventListener("mouseup", this.onMouseUp_.bind(this)),
                    this.phi_ = 0,
                    this.theta_ = 0,
                    this.targetAngle_ = null,
                    this.angleAnimation_ = null,
                    this.orientation_ = new a.Quaternion,
                    this.rotateStart_ = new a.Vector2,
                    this.rotateEnd_ = new a.Vector2,
                    this.rotateDelta_ = new a.Vector2,
                    this.isDragging_ = !1,
                    this.orientationOut_ = new Float32Array(4)
                }
                var i = e("./base.js").VRDisplay
                  , a = e("./math-util.js")
                  , o = e("./util.js")
                  , s = .15
                  , u = 80
                  , l = .5
                  , c = .3;
                n.prototype = new i,
                n.prototype.getImmediatePose = function() {
                    return this.orientation_.setFromEulerYXZ(this.phi_, this.theta_, 0),
                    this.orientationOut_[0] = this.orientation_.x,
                    this.orientationOut_[1] = this.orientation_.y,
                    this.orientationOut_[2] = this.orientation_.z,
                    this.orientationOut_[3] = this.orientation_.w,
                    {
                        position: null,
                        orientation: this.orientationOut_,
                        linearVelocity: null,
                        linearAcceleration: null,
                        angularVelocity: null,
                        angularAcceleration: null
                    }
                }
                ,
                n.prototype.onKeyDown_ = function(e) {
                    38 == e.keyCode ? this.animatePhi_(this.phi_ + s) : 39 == e.keyCode ? this.animateTheta_(this.theta_ - s) : 40 == e.keyCode ? this.animatePhi_(this.phi_ - s) : 37 == e.keyCode && this.animateTheta_(this.theta_ + s)
                }
                ,
                n.prototype.animateTheta_ = function(e) {
                    this.animateKeyTransitions_("theta_", e)
                }
                ,
                n.prototype.animatePhi_ = function(e) {
                    e = o.clamp(e, -Math.PI / 2, Math.PI / 2),
                    this.animateKeyTransitions_("phi_", e)
                }
                ,
                n.prototype.animateKeyTransitions_ = function(e, t) {
                    this.angleAnimation_ && cancelAnimationFrame(this.angleAnimation_);
                    var r = this[e]
                      , n = new Date;
                    this.angleAnimation_ = requestAnimationFrame(function i() {
                        var a = new Date - n;
                        if (a >= u)
                            return this[e] = t,
                            void cancelAnimationFrame(this.angleAnimation_);
                        this.angleAnimation_ = requestAnimationFrame(i.bind(this));
                        var o = a / u;
                        this[e] = r + (t - r) * o
                    }
                    .bind(this))
                }
                ,
                n.prototype.onMouseDown_ = function(e) {
                    this.rotateStart_.set(e.clientX, e.clientY),
                    this.isDragging_ = !0
                }
                ,
                n.prototype.onMouseMove_ = function(e) {
                    if (this.isDragging_ || this.isPointerLocked_()) {
                        if (this.isPointerLocked_()) {
                            var t = e.movementX || e.mozMovementX || 0
                              , r = e.movementY || e.mozMovementY || 0;
                            this.rotateEnd_.set(this.rotateStart_.x - t, this.rotateStart_.y - r)
                        } else
                            this.rotateEnd_.set(e.clientX, e.clientY);
                        this.rotateDelta_.subVectors(this.rotateEnd_, this.rotateStart_),
                        this.rotateStart_.copy(this.rotateEnd_),
                        this.phi_ += 2 * Math.PI * this.rotateDelta_.y / screen.height * c,
                        this.theta_ += 2 * Math.PI * this.rotateDelta_.x / screen.width * l,
                        this.phi_ = o.clamp(this.phi_, -Math.PI / 2, Math.PI / 2)
                    }
                }
                ,
                n.prototype.onMouseUp_ = function(e) {
                    this.isDragging_ = !1
                }
                ,
                n.prototype.isPointerLocked_ = function() {
                    var e = document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement;
                    return void 0 !== e
                }
                ,
                n.prototype.resetPose = function() {
                    this.phi_ = 0,
                    this.theta_ = 0
                }
                ,
                t.exports = n
            }
            , {
                "./base.js": 2,
                "./math-util.js": 14,
                "./util.js": 22
            }],
            16: [function(e, t, r) {
                function n() {
                    this.loadIcon_();
                    var e = document.createElement("div")
                      , t = e.style;
                    t.position = "fixed",
                    t.top = 0,
                    t.right = 0,
                    t.bottom = 0,
                    t.left = 0,
                    t.backgroundColor = "gray",
                    t.fontFamily = "sans-serif",
                    t.zIndex = 1e6;
                    var r = document.createElement("img");
                    r.src = this.icon;
                    var t = r.style;
                    t.marginLeft = "25%",
                    t.marginTop = "25%",
                    t.width = "50%",
                    e.appendChild(r);
                    var n = document.createElement("div")
                      , t = n.style;
                    t.textAlign = "center",
                    t.fontSize = "16px",
                    t.lineHeight = "24px",
                    t.margin = "24px 25%",
                    t.width = "50%",
                    n.innerHTML = "Place your phone into your Cardboard viewer.",
                    e.appendChild(n);
                    var i = document.createElement("div")
                      , t = i.style;
                    t.backgroundColor = "#CFD8DC",
                    t.position = "fixed",
                    t.bottom = 0,
                    t.width = "100%",
                    t.height = "48px",
                    t.padding = "14px 24px",
                    t.boxSizing = "border-box",
                    t.color = "#656A6B",
                    e.appendChild(i);
                    var a = document.createElement("div");
                    a.style.float = "left",
                    a.innerHTML = "No Cardboard viewer?";
                    var o = document.createElement("a");
                    o.href = "https://www.google.com/get/cardboard/get-cardboard/",
                    o.innerHTML = "get one",
                    o.target = "_blank";
                    var t = o.style;
                    t.float = "right",
                    t.fontWeight = 600,
                    t.textTransform = "uppercase",
                    t.borderLeft = "1px solid gray",
                    t.paddingLeft = "24px",
                    t.textDecoration = "none",
                    t.color = "#656A6B",
                    i.appendChild(a),
                    i.appendChild(o),
                    this.overlay = e,
                    this.text = n,
                    this.hide()
                }
                var i = e("./util.js");
                n.prototype.show = function(e) {
                    e || this.overlay.parentElement ? e && (this.overlay.parentElement && this.overlay.parentElement != e && this.overlay.parentElement.removeChild(this.overlay),
                    e.appendChild(this.overlay)) : document.body.appendChild(this.overlay),
                    this.overlay.style.display = "block";
                    var t = this.overlay.querySelector("img")
                      , r = t.style;
                    i.isLandscapeMode() ? (r.width = "20%",
                    r.marginLeft = "40%",
                    r.marginTop = "3%") : (r.width = "50%",
                    r.marginLeft = "25%",
                    r.marginTop = "25%")
                }
                ,
                n.prototype.hide = function() {
                    this.overlay.style.display = "none"
                }
                ,
                n.prototype.showTemporarily = function(e, t) {
                    this.show(t),
                    this.timer = setTimeout(this.hide.bind(this), e)
                }
                ,
                n.prototype.disableShowTemporarily = function() {
                    clearTimeout(this.timer)
                }
                ,
                n.prototype.update = function() {
                    this.disableShowTemporarily(),
                    !i.isLandscapeMode() && i.isMobile() ? this.show() : this.hide()
                }
                ,
                n.prototype.loadIcon_ = function() {
                    this.icon = i.base64("image/svg+xml", "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");
                }
                ,
                t.exports = n
            }
            , {
                "./util.js": 22
            }],
            17: [function(e, t, r) {
                function n(e) {
                    this.kFilter = e,
                    this.currentAccelMeasurement = new i,
                    this.currentGyroMeasurement = new i,
                    this.previousGyroMeasurement = new i,
                    o.isIOS() ? this.filterQ = new a.Quaternion(-1,0,0,1) : this.filterQ = new a.Quaternion(1,0,0,1),
                    this.previousFilterQ = new a.Quaternion,
                    this.previousFilterQ.copy(this.filterQ),
                    this.accelQ = new a.Quaternion,
                    this.isOrientationInitialized = !1,
                    this.estimatedGravity = new a.Vector3,
                    this.measuredGravity = new a.Vector3,
                    this.gyroIntegralQ = new a.Quaternion
                }
                var i = e("./sensor-sample.js")
                  , a = e("../math-util.js")
                  , o = e("../util.js")
                  , s = !1;
                n.prototype.addAccelMeasurement = function(e, t) {
                    this.currentAccelMeasurement.set(e, t)
                }
                ,
                n.prototype.addGyroMeasurement = function(e, t) {
                    this.currentGyroMeasurement.set(e, t);
                    var r = t - this.previousGyroMeasurement.timestampS;
                    o.isTimestampDeltaValid(r) && this.run_(),
                    this.previousGyroMeasurement.copy(this.currentGyroMeasurement)
                }
                ,
                n.prototype.run_ = function() {
                    if (!this.isOrientationInitialized)
                        return this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample),
                        this.previousFilterQ.copy(this.accelQ),
                        void (this.isOrientationInitialized = !0);
                    var e = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS
                      , t = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, e);
                    this.gyroIntegralQ.multiply(t),
                    this.filterQ.copy(this.previousFilterQ),
                    this.filterQ.multiply(t);
                    var r = new a.Quaternion;
                    r.copy(this.filterQ),
                    r.inverse(),
                    this.estimatedGravity.set(0, 0, -1),
                    this.estimatedGravity.applyQuaternion(r),
                    this.estimatedGravity.normalize(),
                    this.measuredGravity.copy(this.currentAccelMeasurement.sample),
                    this.measuredGravity.normalize();
                    var n = new a.Quaternion;
                    n.setFromUnitVectors(this.estimatedGravity, this.measuredGravity),
                    n.inverse(),
                    s && console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)", a.radToDeg * o.getQuaternionAngle(n), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));
                    var i = new a.Quaternion;
                    i.copy(this.filterQ),
                    i.multiply(n),
                    this.filterQ.slerp(i, 1 - this.kFilter),
                    this.previousFilterQ.copy(this.filterQ)
                }
                ,
                n.prototype.getOrientation = function() {
                    return this.filterQ
                }
                ,
                n.prototype.accelToQuaternion_ = function(e) {
                    var t = new a.Vector3;
                    t.copy(e),
                    t.normalize();
                    var r = new a.Quaternion;
                    return r.setFromUnitVectors(new a.Vector3(0,0,-1), t),
                    r.inverse(),
                    r
                }
                ,
                n.prototype.gyroToQuaternionDelta_ = function(e, t) {
                    var r = new a.Quaternion
                      , n = new a.Vector3;
                    return n.copy(e),
                    n.normalize(),
                    r.setFromAxisAngle(n, e.length() * t),
                    r
                }
                ,
                t.exports = n
            }
            , {
                "../math-util.js": 14,
                "../util.js": 22,
                "./sensor-sample.js": 20
            }],
            18: [function(e, t, r) {
                function n() {
                    this.deviceId = "webvr-polyfill:fused",
                    this.deviceName = "VR Position Device (webvr-polyfill:fused)",
                    this.accelerometer = new s.Vector3,
                    this.gyroscope = new s.Vector3,
                    window.addEventListener("devicemotion", this.onDeviceMotionChange_.bind(this)),
                    window.addEventListener("orientationchange", this.onScreenOrientationChange_.bind(this)),
                    this.filter = new i(WebVRConfig.K_FILTER),
                    this.posePredictor = new a(WebVRConfig.PREDICTION_TIME_S),
                    this.touchPanner = new o,
                    this.filterToWorldQ = new s.Quaternion,
                    u.isIOS() ? this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0), Math.PI / 2) : this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0), -Math.PI / 2),
                    this.inverseWorldToScreenQ = new s.Quaternion,
                    this.worldToScreenQ = new s.Quaternion,
                    this.originalPoseAdjustQ = new s.Quaternion,
                    this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1), -window.orientation * Math.PI / 180),
                    this.setScreenTransform_(),
                    u.isLandscapeMode() && this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),
                    this.resetQ = new s.Quaternion,
                    this.isFirefoxAndroid = u.isFirefoxAndroid(),
                    this.isIOS = u.isIOS(),
                    this.orientationOut_ = new Float32Array(4)
                }
                var i = e("./complementary-filter.js")
                  , a = e("./pose-predictor.js")
                  , o = e("../touch-panner.js")
                  , s = e("../math-util.js")
                  , u = e("../util.js");
                n.prototype.getPosition = function() {
                    return null
                }
                ,
                n.prototype.getOrientation = function() {
                    var e = this.filter.getOrientation();
                    this.predictedQ = this.posePredictor.getPrediction(e, this.gyroscope, this.previousTimestampS);
                    var t = new s.Quaternion;
                    return t.copy(this.filterToWorldQ),
                    t.multiply(this.resetQ),
                    WebVRConfig.TOUCH_PANNER_DISABLED || t.multiply(this.touchPanner.getOrientation()),
                    t.multiply(this.predictedQ),
                    t.multiply(this.worldToScreenQ),
                    WebVRConfig.YAW_ONLY && (t.x = 0,
                    t.z = 0,
                    t.normalize()),
                    this.orientationOut_[0] = t.x,
                    this.orientationOut_[1] = t.y,
                    this.orientationOut_[2] = t.z,
                    this.orientationOut_[3] = t.w,
                    this.orientationOut_
                }
                ,
                n.prototype.resetPose = function() {
                    this.resetQ.copy(this.filter.getOrientation()),
                    this.resetQ.x = 0,
                    this.resetQ.y = 0,
                    this.resetQ.z *= -1,
                    this.resetQ.normalize(),
                    u.isLandscapeMode() && this.resetQ.multiply(this.inverseWorldToScreenQ),
                    this.resetQ.multiply(this.originalPoseAdjustQ),
                    WebVRConfig.TOUCH_PANNER_DISABLED || this.touchPanner.resetSensor()
                }
                ,
                n.prototype.onDeviceMotionChange_ = function(e) {
                    var t = e.accelerationIncludingGravity
                      , r = e.rotationRate
                      , n = e.timeStamp / 1e3;
                    this.isFirefoxAndroid && (n /= 1e3);
                    var i = n - this.previousTimestampS;
                    return i <= u.MIN_TIMESTEP || i > u.MAX_TIMESTEP ? (console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),
                    void (this.previousTimestampS = n)) : (this.accelerometer.set(-t.x, -t.y, -t.z),
                    this.gyroscope.set(r.alpha, r.beta, r.gamma),
                    (this.isIOS || this.isFirefoxAndroid) && this.gyroscope.multiplyScalar(Math.PI / 180),
                    this.filter.addAccelMeasurement(this.accelerometer, n),
                    this.filter.addGyroMeasurement(this.gyroscope, n),
                    void (this.previousTimestampS = n))
                }
                ,
                n.prototype.onScreenOrientationChange_ = function(e) {
                    this.setScreenTransform_()
                }
                ,
                n.prototype.setScreenTransform_ = function() {
                    switch (this.worldToScreenQ.set(0, 0, 0, 1),
                    window.orientation) {
                    case 0:
                        break;
                    case 90:
                        this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1), -Math.PI / 2);
                        break;
                    case -90:
                        this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1), Math.PI / 2);
                        break;
                    case 180:
                    }
                    this.inverseWorldToScreenQ.copy(this.worldToScreenQ),
                    this.inverseWorldToScreenQ.inverse()
                }
                ,
                t.exports = n
            }
            , {
                "../math-util.js": 14,
                "../touch-panner.js": 21,
                "../util.js": 22,
                "./complementary-filter.js": 17,
                "./pose-predictor.js": 19
            }],
            19: [function(e, t, r) {
                function n(e) {
                    this.predictionTimeS = e,
                    this.previousQ = new i.Quaternion,
                    this.previousTimestampS = null,
                    this.deltaQ = new i.Quaternion,
                    this.outQ = new i.Quaternion
                }
                var i = e("../math-util.js")
                  , a = !1;
                n.prototype.getPrediction = function(e, t, r) {
                    if (!this.previousTimestampS)
                        return this.previousQ.copy(e),
                        this.previousTimestampS = r,
                        e;
                    var n = new i.Vector3;
                    n.copy(t),
                    n.normalize();
                    var o = t.length();
                    if (o < 20 * i.degToRad)
                        return a && console.log("Moving slowly, at %s deg/s: no prediction", (i.radToDeg * o).toFixed(1)),
                        this.outQ.copy(e),
                        this.previousQ.copy(e),
                        this.outQ;
                    var s = (r - this.previousTimestampS,
                    o * this.predictionTimeS);
                    return this.deltaQ.setFromAxisAngle(n, s),
                    this.outQ.copy(this.previousQ),
                    this.outQ.multiply(this.deltaQ),
                    this.previousQ.copy(e),
                    this.previousTimestampS = r,
                    this.outQ
                }
                ,
                t.exports = n
            }
            , {
                "../math-util.js": 14
            }],
            20: [function(e, t, r) {
                function n(e, t) {
                    this.set(e, t)
                }
                n.prototype.set = function(e, t) {
                    this.sample = e,
                    this.timestampS = t
                }
                ,
                n.prototype.copy = function(e) {
                    this.set(e.sample, e.timestampS)
                }
                ,
                t.exports = n
            }
            , {}],
            21: [function(e, t, r) {
                function n() {
                    window.addEventListener("touchstart", this.onTouchStart_.bind(this)),
                    window.addEventListener("touchmove", this.onTouchMove_.bind(this)),
                    window.addEventListener("touchend", this.onTouchEnd_.bind(this)),
                    this.isTouching = !1,
                    this.rotateStart = new i.Vector2,
                    this.rotateEnd = new i.Vector2,
                    this.rotateDelta = new i.Vector2,
                    this.theta = 0,
                    this.orientation = new i.Quaternion
                }
                var i = e("./math-util.js")
                  , a = e("./util.js")
                  , o = .5;
                n.prototype.getOrientation = function() {
                    return this.orientation.setFromEulerXYZ(0, 0, this.theta),
                    this.orientation
                }
                ,
                n.prototype.resetSensor = function() {
                    this.theta = 0
                }
                ,
                n.prototype.onTouchStart_ = function(e) {
                    1 == e.touches.length && (this.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY),
                    this.isTouching = !0)
                }
                ,
                n.prototype.onTouchMove_ = function(e) {
                    if (this.isTouching) {
                        this.rotateEnd.set(e.touches[0].pageX, e.touches[0].pageY),
                        this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart),
                        this.rotateStart.copy(this.rotateEnd),
                        a.isIOS() && (this.rotateDelta.x *= -1);
                        var t = document.body;
                        this.theta += 2 * Math.PI * this.rotateDelta.x / t.clientWidth * o
                    }
                }
                ,
                n.prototype.onTouchEnd_ = function(e) {
                    this.isTouching = !1
                }
                ,
                t.exports = n
            }
            , {
                "./math-util.js": 14,
                "./util.js": 22
            }],
            22: [function(e, t, r) {
                var n = e("object-assign")
                  , i = window.Util || {};
                i.MIN_TIMESTEP = .001,
                i.MAX_TIMESTEP = 1,
                i.base64 = function(e, t) {
                    return "data:" + e + ";base64," + t
                }
                ,
                i.clamp = function(e, t, r) {
                    return Math.min(Math.max(t, e), r)
                }
                ,
                i.lerp = function(e, t, r) {
                    return e + (t - e) * r
                }
                ,
                i.isIOS = function() {
                    var e = /iPad|iPhone|iPod/.test(navigator.platform);
                    return function() {
                        return e
                    }
                }(),
                i.isSafari = function() {
                    var e = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
                    return function() {
                        return e
                    }
                }(),
                i.isFirefoxAndroid = function() {
                    var e = navigator.userAgent.indexOf("Firefox") !== -1 && navigator.userAgent.indexOf("Android") !== -1;
                    return function() {
                        return e
                    }
                }(),
                i.isLandscapeMode = function() {
                    return 90 == window.orientation || window.orientation == -90
                }
                ,
                i.isTimestampDeltaValid = function(e) {
                    return !(isNaN(e) || e <= i.MIN_TIMESTEP || e > i.MAX_TIMESTEP)
                }
                ,
                i.getScreenWidth = function() {
                    return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio
                }
                ,
                i.getScreenHeight = function() {
                    return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio
                }
                ,
                i.requestFullscreen = function(e) {
                    if (e.requestFullscreen)
                        e.requestFullscreen();
                    else if (e.webkitRequestFullscreen)
                        e.webkitRequestFullscreen();
                    else if (e.mozRequestFullScreen)
                        e.mozRequestFullScreen();
                    else {
                        if (!e.msRequestFullscreen)
                            return !1;
                        e.msRequestFullscreen()
                    }
                    return !0
                }
                ,
                i.exitFullscreen = function() {
                    if (document.exitFullscreen)
                        document.exitFullscreen();
                    else if (document.webkitExitFullscreen)
                        document.webkitExitFullscreen();
                    else if (document.mozCancelFullScreen)
                        document.mozCancelFullScreen();
                    else {
                        if (!document.msExitFullscreen)
                            return !1;
                        document.msExitFullscreen()
                    }
                    return !0
                }
                ,
                i.getFullscreenElement = function() {
                    return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement
                }
                ,
                i.linkProgram = function(e, t, r, n) {
                    var i = e.createShader(e.VERTEX_SHADER);
                    e.shaderSource(i, t),
                    e.compileShader(i);
                    var a = e.createShader(e.FRAGMENT_SHADER);
                    e.shaderSource(a, r),
                    e.compileShader(a);
                    var o = e.createProgram();
                    e.attachShader(o, i),
                    e.attachShader(o, a);
                    for (var s in n)
                        e.bindAttribLocation(o, n[s], s);
                    return e.linkProgram(o),
                    e.deleteShader(i),
                    e.deleteShader(a),
                    o
                }
                ,
                i.getProgramUniforms = function(e, t) {
                    for (var r = {}, n = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), i = "", a = 0; a < n; a++) {
                        var o = e.getActiveUniform(t, a);
                        i = o.name.replace("[0]", ""),
                        r[i] = e.getUniformLocation(t, i)
                    }
                    return r
                }
                ,
                i.orthoMatrix = function(e, t, r, n, i, a, o) {
                    var s = 1 / (t - r)
                      , u = 1 / (n - i)
                      , l = 1 / (a - o);
                    return e[0] = -2 * s,
                    e[1] = 0,
                    e[2] = 0,
                    e[3] = 0,
                    e[4] = 0,
                    e[5] = -2 * u,
                    e[6] = 0,
                    e[7] = 0,
                    e[8] = 0,
                    e[9] = 0,
                    e[10] = 2 * l,
                    e[11] = 0,
                    e[12] = (t + r) * s,
                    e[13] = (i + n) * u,
                    e[14] = (o + a) * l,
                    e[15] = 1,
                    e
                }
                ,
                i.isMobile = function() {
                    var e = !1;
                    return function(t) {
                        (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))) && (e = !0)
                    }(navigator.userAgent || navigator.vendor || window.opera),
                    e
                }
                ,
                i.extend = n,
                i.safariCssSizeWorkaround = function(e) {
                    if (i.isIOS()) {
                        var t = e.style.width
                          , r = e.style.height;
                        e.style.width = parseInt(t) + 1 + "px",
                        e.style.height = parseInt(r) + "px",
                        console.log("Resetting width to...", t),
                        setTimeout(function() {
                            console.log("Done. Width is now", t),
                            e.style.width = t,
                            e.style.height = r
                        }, 100)
                    }
                    window.Util = i,
                    window.canvas = e
                }
                ,
                i.frameDataFromPose = function() {
                    function e(e, t, r, n) {
                        var o = Math.tan(t ? t.upDegrees * i : a)
                          , s = Math.tan(t ? t.downDegrees * i : a)
                          , u = Math.tan(t ? t.leftDegrees * i : a)
                          , l = Math.tan(t ? t.rightDegrees * i : a)
                          , c = 2 / (u + l)
                          , h = 2 / (o + s);
                        return e[0] = c,
                        e[1] = 0,
                        e[2] = 0,
                        e[3] = 0,
                        e[4] = 0,
                        e[5] = h,
                        e[6] = 0,
                        e[7] = 0,
                        e[8] = -((u - l) * c * .5),
                        e[9] = (o - s) * h * .5,
                        e[10] = n / (r - n),
                        e[11] = -1,
                        e[12] = 0,
                        e[13] = 0,
                        e[14] = n * r / (r - n),
                        e[15] = 0,
                        e
                    }
                    function t(e, t, r) {
                        var n = t[0]
                          , i = t[1]
                          , a = t[2]
                          , o = t[3]
                          , s = n + n
                          , u = i + i
                          , l = a + a
                          , c = n * s
                          , h = n * u
                          , f = n * l
                          , d = i * u
                          , p = i * l
                          , m = a * l
                          , g = o * s
                          , v = o * u
                          , y = o * l;
                        return e[0] = 1 - (d + m),
                        e[1] = h + y,
                        e[2] = f - v,
                        e[3] = 0,
                        e[4] = h - y,
                        e[5] = 1 - (c + m),
                        e[6] = p + g,
                        e[7] = 0,
                        e[8] = f + v,
                        e[9] = p - g,
                        e[10] = 1 - (c + d),
                        e[11] = 0,
                        e[12] = r[0],
                        e[13] = r[1],
                        e[14] = r[2],
                        e[15] = 1,
                        e
                    }
                    function r(e, t, r) {
                        var n, i, a, o, s, u, l, c, h, f, d, p, m = r[0], g = r[1], v = r[2];
                        return t === e ? (e[12] = t[0] * m + t[4] * g + t[8] * v + t[12],
                        e[13] = t[1] * m + t[5] * g + t[9] * v + t[13],
                        e[14] = t[2] * m + t[6] * g + t[10] * v + t[14],
                        e[15] = t[3] * m + t[7] * g + t[11] * v + t[15]) : (n = t[0],
                        i = t[1],
                        a = t[2],
                        o = t[3],
                        s = t[4],
                        u = t[5],
                        l = t[6],
                        c = t[7],
                        h = t[8],
                        f = t[9],
                        d = t[10],
                        p = t[11],
                        e[0] = n,
                        e[1] = i,
                        e[2] = a,
                        e[3] = o,
                        e[4] = s,
                        e[5] = u,
                        e[6] = l,
                        e[7] = c,
                        e[8] = h,
                        e[9] = f,
                        e[10] = d,
                        e[11] = p,
                        e[12] = n * m + s * g + h * v + t[12],
                        e[13] = i * m + u * g + f * v + t[13],
                        e[14] = a * m + l * g + d * v + t[14],
                        e[15] = o * m + c * g + p * v + t[15]),
                        e
                    }
                    function n(n, i, a, u, l) {
                        e(n, u ? u.fieldOfView : null, l.depthNear, l.depthFar);
                        var c = a.orientation || o
                          , h = a.position || s;
                        t(i, c, h),
                        u && r(i, i, u.offset),
                        mat4_invert(i, i)
                    }
                    var i = Math.PI / 180
                      , a = .25 * Math.PI;
                    mat4_invert = function(e, t) {
                        var r = t[0]
                          , n = t[1]
                          , i = t[2]
                          , a = t[3]
                          , o = t[4]
                          , s = t[5]
                          , u = t[6]
                          , l = t[7]
                          , c = t[8]
                          , h = t[9]
                          , f = t[10]
                          , d = t[11]
                          , p = t[12]
                          , m = t[13]
                          , g = t[14]
                          , v = t[15]
                          , y = r * s - n * o
                          , M = r * u - i * o
                          , w = r * l - a * o
                          , x = n * u - i * s
                          , A = n * l - a * s
                          , b = i * l - a * u
                          , T = c * m - h * p
                          , _ = c * g - f * p
                          , E = c * v - d * p
                          , S = h * g - f * m
                          , D = h * v - d * m
                          , N = f * v - d * g
                          , I = y * N - M * D + w * S + x * E - A * _ + b * T;
                        return I ? (I = 1 / I,
                        e[0] = (s * N - u * D + l * S) * I,
                        e[1] = (i * D - n * N - a * S) * I,
                        e[2] = (m * b - g * A + v * x) * I,
                        e[3] = (f * A - h * b - d * x) * I,
                        e[4] = (u * E - o * N - l * _) * I,
                        e[5] = (r * N - i * E + a * _) * I,
                        e[6] = (g * w - p * b - v * M) * I,
                        e[7] = (c * b - f * w + d * M) * I,
                        e[8] = (o * D - s * E + l * T) * I,
                        e[9] = (n * E - r * D - a * T) * I,
                        e[10] = (p * A - m * w + v * y) * I,
                        e[11] = (h * w - c * A - d * y) * I,
                        e[12] = (s * _ - o * S - u * T) * I,
                        e[13] = (r * S - n * _ + i * T) * I,
                        e[14] = (m * M - p * x - g * y) * I,
                        e[15] = (c * x - h * M + f * y) * I,
                        e) : null
                    }
                    ;
                    var o = new Float32Array([0, 0, 0, 1])
                      , s = new Float32Array([0, 0, 0]);
                    return function(e, t, r) {
                        return !(!e || !t || (e.pose = t,
                        e.timestamp = t.timestamp,
                        n(e.leftProjectionMatrix, e.leftViewMatrix, t, r.getEyeParameters("left"), r),
                        n(e.rightProjectionMatrix, e.rightViewMatrix, t, r.getEyeParameters("right"), r),
                        0))
                    }
                }(),
                t.exports = i
            }
            , {
                "object-assign": 1
            }],
            23: [function(e, t, r) {
                function n() {
                    try {
                        this.selectedKey = localStorage.getItem(s) || o
                    } catch (e) {
                        console.error("Failed to load viewer profile: %s", e)
                    }
                    this.dialog = this.createDialog_(a.Viewers),
                    this.root = null
                }
                var i = e("./emitter.js")
                  , a = (e("./util.js"),
                e("./device-info.js"))
                  , o = "CardboardV1"
                  , s = "WEBVR_CARDBOARD_VIEWER"
                  , u = "webvr-polyfill-viewer-selector";
                n.prototype = new i,
                n.prototype.show = function(e) {
                    this.root = e,
                    e.appendChild(this.dialog);
                    var t = this.dialog.querySelector("#" + this.selectedKey);
                    t.checked = !0,
                    this.dialog.style.display = "block"
                }
                ,
                n.prototype.hide = function() {
                    this.root && this.root.contains(this.dialog) && this.root.removeChild(this.dialog),
                    this.dialog.style.display = "none"
                }
                ,
                n.prototype.getCurrentViewer = function() {
                    return a.Viewers[this.selectedKey]
                }
                ,
                n.prototype.getSelectedKey_ = function() {
                    var e = this.dialog.querySelector("input[name=field]:checked");
                    return e ? e.id : null
                }
                ,
                n.prototype.onSave_ = function() {
                    if (this.selectedKey = this.getSelectedKey_(),
                    !this.selectedKey || !a.Viewers[this.selectedKey])
                        return void console.error("ViewerSelector.onSave_: this should never happen!");
                    this.emit("change", a.Viewers[this.selectedKey]);
                    try {
                        localStorage.setItem(s, this.selectedKey)
                    } catch (e) {
                        console.error("Failed to save viewer profile: %s", e)
                    }
                    this.hide()
                }
                ,
                n.prototype.createDialog_ = function(e) {
                    var t = document.createElement("div");
                    t.classList.add(u),
                    t.style.display = "none";
                    var r = document.createElement("div")
                      , n = r.style;
                    n.position = "fixed",
                    n.left = 0,
                    n.top = 0,
                    n.width = "100%",
                    n.height = "100%",
                    n.background = "rgba(0, 0, 0, 0.3)",
                    r.addEventListener("click", this.hide.bind(this));
                    var i = 280
                      , a = document.createElement("div")
                      , n = a.style;
                    n.boxSizing = "border-box",
                    n.position = "fixed",
                    n.top = "24px",
                    n.left = "50%",
                    n.marginLeft = -i / 2 + "px",
                    n.width = i + "px",
                    n.padding = "24px",
                    n.overflow = "hidden",
                    n.background = "#fafafa",
                    n.fontFamily = "'Roboto', sans-serif",
                    n.boxShadow = "0px 5px 20px #666",
                    a.appendChild(this.createH1_("Select your viewer"));
                    for (var o in e)
                        a.appendChild(this.createChoice_(o, e[o].label));
                    return a.appendChild(this.createButton_("Save", this.onSave_.bind(this))),
                    t.appendChild(r),
                    t.appendChild(a),
                    t
                }
                ,
                n.prototype.createH1_ = function(e) {
                    var t = document.createElement("h1")
                      , r = t.style;
                    return r.color = "black",
                    r.fontSize = "20px",
                    r.fontWeight = "bold",
                    r.marginTop = 0,
                    r.marginBottom = "24px",
                    t.innerHTML = e,
                    t
                }
                ,
                n.prototype.createChoice_ = function(e, t) {
                    var r = document.createElement("div");
                    r.style.marginTop = "8px",
                    r.style.color = "black";
                    var n = document.createElement("input");
                    n.style.fontSize = "30px",
                    n.setAttribute("id", e),
                    n.setAttribute("type", "radio"),
                    n.setAttribute("value", e),
                    n.setAttribute("name", "field");
                    var i = document.createElement("label");
                    return i.style.marginLeft = "4px",
                    i.setAttribute("for", e),
                    i.innerHTML = t,
                    r.appendChild(n),
                    r.appendChild(i),
                    r
                }
                ,
                n.prototype.createButton_ = function(e, t) {
                    var r = document.createElement("button");
                    r.innerHTML = e;
                    var n = r.style;
                    return n.float = "right",
                    n.textTransform = "uppercase",
                    n.color = "#1094f7",
                    n.fontSize = "14px",
                    n.letterSpacing = 0,
                    n.border = 0,
                    n.background = "none",
                    n.marginTop = "16px",
                    r.addEventListener("click", t),
                    r
                }
                ,
                t.exports = n
            }
            , {
                "./device-info.js": 7,
                "./emitter.js": 12,
                "./util.js": 22
            }],
            24: [function(e, t, r) {
                function n() {
                    var e = document.createElement("video");
                    e.addEventListener("ended", function() {
                        e.play()
                    }),
                    this.request = function() {
                        e.paused && (e.src = o.base64("video/mp4", "AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B"),
                        e.play())
                    }
                    ,
                    this.release = function() {
                        e.pause(),
                        e.src = ""
                    }
                }
                function i() {
                    var e = null;
                    this.request = function() {
                        e || (e = setInterval(function() {
                            window.location = window.location,
                            setTimeout(window.stop, 0)
                        }, 3e4))
                    }
                    ,
                    this.release = function() {
                        e && (clearInterval(e),
                        e = null)
                    }
                }
                function a() {
                    var e = navigator.userAgent || navigator.vendor || window.opera;
                    return e.match(/iPhone/i) || e.match(/iPod/i) ? i : n
                }
                var o = e("./util.js");
                t.exports = a()
            }
            , {
                "./util.js": 22
            }],
            25: [function(e, t, r) {
                function n() {
                    this.displays = [],
                    this.devices = [],
                    this.devicesPopulated = !1,
                    this.nativeWebVRAvailable = this.isWebVRAvailable(),
                    this.nativeLegacyWebVRAvailable = this.isDeprecatedWebVRAvailable(),
                    this.nativeLegacyWebVRAvailable || (this.nativeWebVRAvailable || this.enablePolyfill(),
                    WebVRConfig.ENABLE_DEPRECATED_API && this.enableDeprecatedPolyfill()),
                    i()
                }
                function i() {
                    "VRDisplay"in window && !("VRFrameData"in window) && (window.VRFrameData = l,
                    "depthNear"in window.VRDisplay.prototype || (window.VRDisplay.prototype.depthNear = .01),
                    "depthFar"in window.VRDisplay.prototype || (window.VRDisplay.prototype.depthFar = 1e4),
                    window.VRDisplay.prototype.getFrameData = function(e) {
                        return a.frameDataFromPose(e, this.getPose(), this)
                    }
                    )
                }
                var a = e("./util.js")
                  , o = e("./cardboard-vr-display.js")
                  , s = e("./mouse-keyboard-vr-display.js")
                  , u = e("./base.js").VRDisplay
                  , l = e("./base.js").VRFrameData
                  , c = e("./base.js").HMDVRDevice
                  , h = e("./base.js").PositionSensorVRDevice
                  , f = e("./display-wrappers.js").VRDisplayHMDDevice
                  , d = e("./display-wrappers.js").VRDisplayPositionSensorDevice;
                n.prototype.isWebVRAvailable = function() {
                    return "getVRDisplays"in navigator
                }
                ,
                n.prototype.isDeprecatedWebVRAvailable = function() {
                    return "getVRDevices"in navigator || "mozGetVRDevices"in navigator
                }
                ,
                n.prototype.populateDevices = function() {
                    if (!this.devicesPopulated) {
                        var e = null;
                        this.isCardboardCompatible() && (e = new o,
                        this.displays.push(e),
                        WebVRConfig.ENABLE_DEPRECATED_API && (this.devices.push(new f(e)),
                        this.devices.push(new d(e)))),
                        this.isMobile() || WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED || (e = new s,
                        this.displays.push(e),
                        WebVRConfig.ENABLE_DEPRECATED_API && (this.devices.push(new f(e)),
                        this.devices.push(new d(e)))),
                        this.devicesPopulated = !0
                    }
                }
                ,
                n.prototype.enablePolyfill = function() {
                    navigator.getVRDisplays = this.getVRDisplays.bind(this),
                    window.VRDisplay = u;
                    var e = this;
                    Object.defineProperty(navigator, "vrEnabled", {
                        get: function() {
                            return e.isCardboardCompatible() && (document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || !1)
                        }
                    }),
                    window.VRFrameData = l
                }
                ,
                n.prototype.enableDeprecatedPolyfill = function() {
                    navigator.getVRDevices = this.getVRDevices.bind(this),
                    window.HMDVRDevice = c,
                    window.PositionSensorVRDevice = h
                }
                ,
                n.prototype.getVRDisplays = function() {
                    this.populateDevices();
                    var e = this.displays;
                    return new Promise(function(t, r) {
                        try {
                            t(e)
                        } catch (e) {
                            r(e)
                        }
                    }
                    )
                }
                ,
                n.prototype.getVRDevices = function() {
                    console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");
                    var e = this;
                    return new Promise(function(t, r) {
                        try {
                            if (!e.devicesPopulated) {
                                if (e.nativeWebVRAvailable)
                                    return navigator.getVRDisplays(function(r) {
                                        for (var n = 0; n < r.length; ++n)
                                            e.devices.push(new f(r[n])),
                                            e.devices.push(new d(r[n]));
                                        e.devicesPopulated = !0,
                                        t(e.devices)
                                    }, r);
                                if (e.nativeLegacyWebVRAvailable)
                                    return (navigator.getVRDDevices || navigator.mozGetVRDevices)(function(r) {
                                        for (var n = 0; n < r.length; ++n)
                                            r[n]instanceof c && e.devices.push(r[n]),
                                            r[n]instanceof h && e.devices.push(r[n]);
                                        e.devicesPopulated = !0,
                                        t(e.devices)
                                    }, r)
                            }
                            e.populateDevices(),
                            t(e.devices)
                        } catch (e) {
                            r(e)
                        }
                    }
                    )
                }
                ,
                n.prototype.isMobile = function() {
                    return /Android/i.test(navigator.userAgent) || /iPhone|iPad|iPod/i.test(navigator.userAgent)
                }
                ,
                n.prototype.isCardboardCompatible = function() {
                    return this.isMobile() || WebVRConfig.FORCE_ENABLE_VR
                }
                ,
                t.exports.WebVRPolyfill = n
            }
            , {
                "./base.js": 2,
                "./cardboard-vr-display.js": 5,
                "./display-wrappers.js": 8,
                "./mouse-keyboard-vr-display.js": 15,
                "./util.js": 22
            }]
        }, {}, [13])
    }
    , /*!************************!*\
  !*** ./vendor/flyd.js ***!
  \************************/
    function(e, t, r) {
        function n(e) {
            return !!(e && e.constructor && e.call && e.apply)
        }
        function i(e, t) {
            return S(function(t, r) {
                r(e(t.val))
            }, [t])
        }
        function a(e, t) {
            return S(function(t) {
                e(t.val)
            }, [t])
        }
        function o(e) {
            return i(e, this)
        }
        function s(e) {
            var t = this;
            return S(function(e, t, r) {
                r(e.val(t.val))
            }, [t, e])
        }
        function u(e) {
            return e.depsMet = e.deps.every(function(e) {
                return e.hasVal
            }),
            !e.depsMet
        }
        function l(e) {
            if (!(e.depsMet !== !0 && u(e) || void 0 !== e.end && e.end.val === !0)) {
                if (void 0 !== N)
                    return void L.push(e);
                N = e,
                e.depsChanged && (e.fnArgs[e.fnArgs.length - 1] = e.depsChanged);
                var t = e.fn.apply(e.fn, e.fnArgs);
                void 0 !== t && e(t),
                N = void 0,
                void 0 !== e.depsChanged && (e.depsChanged = []),
                e.shouldUpdate = !1,
                P === !1 && f()
            }
        }
        function c(e) {
            var t, r = e.listeners;
            if (e.queued === !1) {
                for (e.queued = !0,
                t = 0; t < r.length; ++t)
                    c(r[t]);
                j[++R] = e
            }
        }
        function h(e) {
            var t, r, n, i = e.listeners;
            for (t = 0; t < i.length; ++t)
                n = i[t],
                n.end === e ? b(n) : (void 0 !== n.depsChanged && n.depsChanged.push(e),
                n.shouldUpdate = !0,
                c(n));
            for (; R >= 0; --R)
                r = j[R],
                r.shouldUpdate === !0 && l(r),
                r.queued = !1
        }
        function f() {
            for (P = !0; L.length > 0; ) {
                var e = L.shift();
                e.vals.length > 0 && (e.val = e.vals.shift()),
                h(e)
            }
            P = !1
        }
        function d(e) {
            return n(e) && "hasVal"in e
        }
        function p() {
            return "stream(" + this.val + ")"
        }
        function m(e, t) {
            return void 0 !== t && null !== t && n(t.then) ? void t.then(e) : (e.val = t,
            e.hasVal = !0,
            void (void 0 === N ? (P = !0,
            h(e),
            L.length > 0 ? f() : P = !1) : N === e ? g(e, e.listeners) : (e.vals.push(t),
            L.push(e))))
        }
        function g(e, t) {
            var r, n;
            for (r = 0; r < t.length; ++r)
                n = t[r],
                n.end !== e ? (void 0 !== n.depsChanged && n.depsChanged.push(e),
                n.shouldUpdate = !0) : b(n)
        }
        function v() {
            function e(t) {
                return arguments.length > 0 ? (m(e, t),
                e) : e.val
            }
            return e.hasVal = !1,
            e.val = void 0,
            e.vals = [],
            e.listeners = [],
            e.queued = !1,
            e.end = void 0,
            e.map = o,
            e.ap = s,
            e.of = E,
            e.toString = p,
            e
        }
        function y(e, t) {
            for (var r = 0; r < e.length; ++r)
                e[r].listeners.push(t)
        }
        function M(e, t) {
            var r = v();
            return r.fn = t,
            r.deps = e,
            r.depsMet = !1,
            r.depsChanged = e.length > 0 ? [] : void 0,
            r.shouldUpdate = !1,
            y(e, r),
            r
        }
        function w(e) {
            return e.depsMet === !1 && (e.depsMet = !0,
            l(e)),
            e
        }
        function x(e, t) {
            var r = t.indexOf(e);
            t[r] = t[t.length - 1],
            t.length--
        }
        function A(e) {
            for (var t = 0; t < e.deps.length; ++t)
                x(e, e.deps[t].listeners);
            e.deps.length = 0
        }
        function b(e) {
            void 0 !== e.deps && A(e),
            void 0 !== e.end && A(e.end)
        }
        function T(e, t) {
            return A(t.end),
            e.listeners.push(t.end),
            t.end.deps.push(e),
            t
        }
        function _() {
            return !0
        }
        function E(e) {
            var t = M([], _)
              , r = v();
            return r.end = t,
            r.fnArgs = [],
            t.listeners.push(r),
            arguments.length > 0 && r(e),
            r
        }
        function S(e, t) {
            var r, n, i, a, o = M([], _);
            for (i = [],
            a = [],
            r = 0; r < t.length; ++r)
                void 0 !== t[r] && (i.push(t[r]),
                void 0 !== t[r].end && a.push(t[r].end));
            return n = M(i, e),
            n.depsChanged = [],
            n.fnArgs = n.deps.concat([n, n.depsChanged]),
            n.end = o,
            o.listeners.push(n),
            y(a, o),
            o.deps = a,
            l(n),
            n
        }
        function D() {}
        var N, I = r(/*! ramda */
        3).curryN, L = [], C = I(3, function(e, t, r) {
            var n = S(function(r, n) {
                n(t = e(t, r.val))
            }, [r]);
            return n.hasVal || n(t),
            n
        }), O = I(2, function(e, t) {
            var r = w(S(function(e, t, r, n) {
                n[0] ? r(n[0]()) : e.hasVal ? r(e.val) : t.hasVal && r(t.val)
            }, [e, t]));
            return T(S(function() {
                return !0
            }, [e.end, t.end]), r),
            r
        }), j = [], R = -1, P = !1, z = I(2, function(e, t) {
            return e = e(new D),
            S(function(t, r) {
                var n = e["@@transducer/step"](void 0, t.val);
                return n && n["@@transducer/reduced"] === !0 ? (r.end(!0),
                n["@@transducer/value"]) : n
            }, [t])
        });
        D.prototype["@@transducer/init"] = function() {}
        ,
        D.prototype["@@transducer/result"] = function() {}
        ,
        D.prototype["@@transducer/step"] = function(e, t) {
            return t
        }
        ,
        e.exports = {
            stream: E,
            combine: I(2, S),
            isStream: d,
            transduce: z,
            merge: O,
            scan: C,
            endsOn: T,
            map: I(2, i),
            on: I(2, a),
            curryN: I,
            immediate: w
        }
    }
    , /*!************************!*\
  !*** ./vendor/lzma.js ***!
  \************************/
    function(e, t) {
        var r = r || {};
        r.OutWindow = function() {
            this._windowSize = 0
        }
        ,
        r.OutWindow.prototype.create = function(e) {
            this._buffer && this._windowSize === e || (this._buffer = []),
            this._windowSize = e,
            this._pos = 0,
            this._streamPos = 0
        }
        ,
        r.OutWindow.prototype.flush = function() {
            var e = this._pos - this._streamPos;
            if (0 !== e) {
                for (; e--; )
                    this._stream.writeByte(this._buffer[this._streamPos++]);
                this._pos >= this._windowSize && (this._pos = 0),
                this._streamPos = this._pos
            }
        }
        ,
        r.OutWindow.prototype.releaseStream = function() {
            this.flush(),
            this._stream = null
        }
        ,
        r.OutWindow.prototype.setStream = function(e) {
            this.releaseStream(),
            this._stream = e
        }
        ,
        r.OutWindow.prototype.init = function(e) {
            e || (this._streamPos = 0,
            this._pos = 0)
        }
        ,
        r.OutWindow.prototype.copyBlock = function(e, t) {
            var r = this._pos - e - 1;
            for (r < 0 && (r += this._windowSize); t--; )
                r >= this._windowSize && (r = 0),
                this._buffer[this._pos++] = this._buffer[r++],
                this._pos >= this._windowSize && this.flush()
        }
        ,
        r.OutWindow.prototype.putByte = function(e) {
            this._buffer[this._pos++] = e,
            this._pos >= this._windowSize && this.flush()
        }
        ,
        r.OutWindow.prototype.getByte = function(e) {
            var t = this._pos - e - 1;
            return t < 0 && (t += this._windowSize),
            this._buffer[t]
        }
        ,
        r.RangeDecoder = function() {}
        ,
        r.RangeDecoder.prototype.setStream = function(e) {
            this._stream = e
        }
        ,
        r.RangeDecoder.prototype.releaseStream = function() {
            this._stream = null
        }
        ,
        r.RangeDecoder.prototype.init = function() {
            var e = 5;
            for (this._code = 0,
            this._range = -1; e--; )
                this._code = this._code << 8 | this._stream.readByte()
        }
        ,
        r.RangeDecoder.prototype.decodeDirectBits = function(e) {
            for (var t, r = 0, n = e; n--; )
                this._range >>>= 1,
                t = this._code - this._range >>> 31,
                this._code -= this._range & t - 1,
                r = r << 1 | 1 - t,
                0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(),
                this._range <<= 8);
            return r
        }
        ,
        r.RangeDecoder.prototype.decodeBit = function(e, t) {
            var r = e[t]
              , n = (this._range >>> 11) * r;
            return (2147483648 ^ this._code) < (2147483648 ^ n) ? (this._range = n,
            e[t] += 2048 - r >>> 5,
            0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(),
            this._range <<= 8),
            0) : (this._range -= n,
            this._code -= n,
            e[t] -= r >>> 5,
            0 === (4278190080 & this._range) && (this._code = this._code << 8 | this._stream.readByte(),
            this._range <<= 8),
            1)
        }
        ,
        r.initBitModels = function(e, t) {
            for (; t--; )
                e[t] = 1024
        }
        ,
        r.BitTreeDecoder = function(e) {
            this._models = [],
            this._numBitLevels = e
        }
        ,
        r.BitTreeDecoder.prototype.init = function() {
            r.initBitModels(this._models, 1 << this._numBitLevels)
        }
        ,
        r.BitTreeDecoder.prototype.decode = function(e) {
            for (var t = 1, r = this._numBitLevels; r--; )
                t = t << 1 | e.decodeBit(this._models, t);
            return t - (1 << this._numBitLevels)
        }
        ,
        r.BitTreeDecoder.prototype.reverseDecode = function(e) {
            for (var t, r = 1, n = 0, i = 0; i < this._numBitLevels; ++i)
                t = e.decodeBit(this._models, r),
                r = r << 1 | t,
                n |= t << i;
            return n
        }
        ,
        r.reverseDecode2 = function(e, t, r, n) {
            for (var i, a = 1, o = 0, s = 0; s < n; ++s)
                i = r.decodeBit(e, t + a),
                a = a << 1 | i,
                o |= i << s;
            return o
        }
        ,
        r.LenDecoder = function() {
            this._choice = [],
            this._lowCoder = [],
            this._midCoder = [],
            this._highCoder = new r.BitTreeDecoder(8),
            this._numPosStates = 0
        }
        ,
        r.LenDecoder.prototype.create = function(e) {
            for (; this._numPosStates < e; ++this._numPosStates)
                this._lowCoder[this._numPosStates] = new r.BitTreeDecoder(3),
                this._midCoder[this._numPosStates] = new r.BitTreeDecoder(3)
        }
        ,
        r.LenDecoder.prototype.init = function() {
            var e = this._numPosStates;
            for (r.initBitModels(this._choice, 2); e--; )
                this._lowCoder[e].init(),
                this._midCoder[e].init();
            this._highCoder.init()
        }
        ,
        r.LenDecoder.prototype.decode = function(e, t) {
            return 0 === e.decodeBit(this._choice, 0) ? this._lowCoder[t].decode(e) : 0 === e.decodeBit(this._choice, 1) ? 8 + this._midCoder[t].decode(e) : 16 + this._highCoder.decode(e)
        }
        ,
        r.Decoder2 = function() {
            this._decoders = []
        }
        ,
        r.Decoder2.prototype.init = function() {
            r.initBitModels(this._decoders, 768)
        }
        ,
        r.Decoder2.prototype.decodeNormal = function(e) {
            var t = 1;
            do
                t = t << 1 | e.decodeBit(this._decoders, t);
            while (t < 256);return 255 & t
        }
        ,
        r.Decoder2.prototype.decodeWithMatchByte = function(e, t) {
            var r, n, i = 1;
            do
                if (r = t >> 7 & 1,
                t <<= 1,
                n = e.decodeBit(this._decoders, (1 + r << 8) + i),
                i = i << 1 | n,
                r !== n) {
                    for (; i < 256; )
                        i = i << 1 | e.decodeBit(this._decoders, i);
                    break
                }
            while (i < 256);return 255 & i
        }
        ,
        r.LiteralDecoder = function() {}
        ,
        r.LiteralDecoder.prototype.create = function(e, t) {
            var n;
            if (!this._coders || this._numPrevBits !== t || this._numPosBits !== e)
                for (this._numPosBits = e,
                this._posMask = (1 << e) - 1,
                this._numPrevBits = t,
                this._coders = [],
                n = 1 << this._numPrevBits + this._numPosBits; n--; )
                    this._coders[n] = new r.Decoder2
        }
        ,
        r.LiteralDecoder.prototype.init = function() {
            for (var e = 1 << this._numPrevBits + this._numPosBits; e--; )
                this._coders[e].init()
        }
        ,
        r.LiteralDecoder.prototype.getDecoder = function(e, t) {
            return this._coders[((e & this._posMask) << this._numPrevBits) + ((255 & t) >>> 8 - this._numPrevBits)]
        }
        ,
        r.Decoder = function() {
            this._outWindow = new r.OutWindow,
            this._rangeDecoder = new r.RangeDecoder,
            this._isMatchDecoders = [],
            this._isRepDecoders = [],
            this._isRepG0Decoders = [],
            this._isRepG1Decoders = [],
            this._isRepG2Decoders = [],
            this._isRep0LongDecoders = [],
            this._posSlotDecoder = [],
            this._posDecoders = [],
            this._posAlignDecoder = new r.BitTreeDecoder(4),
            this._lenDecoder = new r.LenDecoder,
            this._repLenDecoder = new r.LenDecoder,
            this._literalDecoder = new r.LiteralDecoder,
            this._dictionarySize = -1,
            this._dictionarySizeCheck = -1,
            this._posSlotDecoder[0] = new r.BitTreeDecoder(6),
            this._posSlotDecoder[1] = new r.BitTreeDecoder(6),
            this._posSlotDecoder[2] = new r.BitTreeDecoder(6),
            this._posSlotDecoder[3] = new r.BitTreeDecoder(6)
        }
        ,
        r.Decoder.prototype.setDictionarySize = function(e) {
            return !(e < 0 || (this._dictionarySize !== e && (this._dictionarySize = e,
            this._dictionarySizeCheck = Math.max(this._dictionarySize, 1),
            this._outWindow.create(Math.max(this._dictionarySizeCheck, 4096))),
            0))
        }
        ,
        r.Decoder.prototype.setLcLpPb = function(e, t, r) {
            var n = 1 << r;
            return !(e > 8 || t > 4 || r > 4 || (this._literalDecoder.create(t, e),
            this._lenDecoder.create(n),
            this._repLenDecoder.create(n),
            this._posStateMask = n - 1,
            0))
        }
        ,
        r.Decoder.prototype.init = function() {
            var e = 4;
            for (this._outWindow.init(!1),
            r.initBitModels(this._isMatchDecoders, 192),
            r.initBitModels(this._isRep0LongDecoders, 192),
            r.initBitModels(this._isRepDecoders, 12),
            r.initBitModels(this._isRepG0Decoders, 12),
            r.initBitModels(this._isRepG1Decoders, 12),
            r.initBitModels(this._isRepG2Decoders, 12),
            r.initBitModels(this._posDecoders, 114),
            this._literalDecoder.init(); e--; )
                this._posSlotDecoder[e].init();
            this._lenDecoder.init(),
            this._repLenDecoder.init(),
            this._posAlignDecoder.init(),
            this._rangeDecoder.init()
        }
        ,
        r.Decoder.prototype.decode = function(e, t, n) {
            var i, a, o, s, u, l, c = 0, h = 0, f = 0, d = 0, p = 0, m = 0, g = 0;
            for (this._rangeDecoder.setStream(e),
            this._outWindow.setStream(t),
            this.init(); n < 0 || m < n; )
                if (i = m & this._posStateMask,
                0 === this._rangeDecoder.decodeBit(this._isMatchDecoders, (c << 4) + i))
                    a = this._literalDecoder.getDecoder(m++, g),
                    g = c >= 7 ? a.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(h)) : a.decodeNormal(this._rangeDecoder),
                    this._outWindow.putByte(g),
                    c = c < 4 ? 0 : c - (c < 10 ? 3 : 6);
                else {
                    if (1 === this._rangeDecoder.decodeBit(this._isRepDecoders, c))
                        o = 0,
                        0 === this._rangeDecoder.decodeBit(this._isRepG0Decoders, c) ? 0 === this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (c << 4) + i) && (c = c < 7 ? 9 : 11,
                        o = 1) : (0 === this._rangeDecoder.decodeBit(this._isRepG1Decoders, c) ? s = f : (0 === this._rangeDecoder.decodeBit(this._isRepG2Decoders, c) ? s = d : (s = p,
                        p = d),
                        d = f),
                        f = h,
                        h = s),
                        0 === o && (o = 2 + this._repLenDecoder.decode(this._rangeDecoder, i),
                        c = c < 7 ? 8 : 11);
                    else if (p = d,
                    d = f,
                    f = h,
                    o = 2 + this._lenDecoder.decode(this._rangeDecoder, i),
                    c = c < 7 ? 7 : 10,
                    u = this._posSlotDecoder[o <= 5 ? o - 2 : 3].decode(this._rangeDecoder),
                    u >= 4) {
                        if (l = (u >> 1) - 1,
                        h = (2 | 1 & u) << l,
                        u < 14)
                            h += r.reverseDecode2(this._posDecoders, h - u - 1, this._rangeDecoder, l);
                        else if (h += this._rangeDecoder.decodeDirectBits(l - 4) << 4,
                        h += this._posAlignDecoder.reverseDecode(this._rangeDecoder),
                        h < 0) {
                            if (h === -1)
                                break;
                            return !1
                        }
                    } else
                        h = u;
                    if (h >= m || h >= this._dictionarySizeCheck)
                        return !1;
                    this._outWindow.copyBlock(h, o),
                    m += o,
                    g = this._outWindow.getByte(0)
                }
            return this._outWindow.flush(),
            this._outWindow.releaseStream(),
            this._rangeDecoder.releaseStream(),
            !0
        }
        ,
        r.Decoder.prototype.setDecoderProperties = function(e) {
            var t, r, n, i, a;
            return !(e.size < 5) && (t = e.readByte(),
            r = t % 9,
            t = ~~(t / 9),
            n = t % 5,
            i = ~~(t / 5),
            !!this.setLcLpPb(r, n, i) && (a = e.readByte(),
            a |= e.readByte() << 8,
            a |= e.readByte() << 16,
            a += 16777216 * e.readByte(),
            this.setDictionarySize(a)))
        }
        ,
        r.decompress = function(e, t, n, i) {
            var a = new r.Decoder;
            if (!a.setDecoderProperties(e))
                throw "Incorrect stream properties";
            if (!a.decode(t, n, i))
                throw "Error in data stream";
            return !0
        }
        ,
        r.decompressFile = function(e, t) {
            var n, i = new r.Decoder;
            if (!i.setDecoderProperties(e))
                throw "Incorrect stream properties";
            if (n = e.readByte(),
            n |= e.readByte() << 8,
            n |= e.readByte() << 16,
            n += 16777216 * e.readByte(),
            e.readByte(),
            e.readByte(),
            e.readByte(),
            e.readByte(),
            !i.decode(e, t, n))
                throw "Error in data stream";
            return !0
        }
        ,
        e.exports = r
    }
    , /*!***************************************!*\
  !*** ./vendor/transit-0.8.837-min.js ***!
  \***************************************/
    function(e, t, r) {
        (function(t) {
            !function() {
                function e(e) {
                    var t = typeof e;
                    if ("object" == t) {
                        if (!e)
                            return "null";
                        if (e instanceof Array)
                            return "array";
                        if (e instanceof Object)
                            return t;
                        var r = Object.prototype.toString.call(e);
                        if ("[object Window]" == r)
                            return "object";
                        if ("[object Array]" == r || "number" == typeof e.length && "undefined" != typeof e.splice && "undefined" != typeof e.propertyIsEnumerable && !e.propertyIsEnumerable("splice"))
                            return "array";
                        if ("[object Function]" == r || "undefined" != typeof e.call && "undefined" != typeof e.propertyIsEnumerable && !e.propertyIsEnumerable("call"))
                            return "function"
                    } else if ("function" == t && "undefined" == typeof e.call)
                        return "object";
                    return t
                }
                function r(e, t) {
                    var r = e.split(".")
                      , n = rt;
                    r[0]in n || !n.execScript || n.execScript("var " + r[0]);
                    for (var i; r.length && (i = r.shift()); )
                        r.length || void 0 === t ? n = n[i] ? n[i] : n[i] = {} : n[i] = t
                }
                function n(e, t) {
                    this.v = 0 | e,
                    this.j = 0 | t
                }
                function i(e) {
                    if (-128 <= e && 128 > e) {
                        var t = nt[e];
                        if (t)
                            return t
                    }
                    return t = new n(0 | e,0 > e ? -1 : 0),
                    -128 <= e && 128 > e && (nt[e] = t),
                    t
                }
                function a(e) {
                    return isNaN(e) || !isFinite(e) ? e = u() : e <= -at ? e = h() : e + 1 >= at ? ($e || ($e = o(-1, 2147483647)),
                    e = $e) : e = 0 > e ? v(a(-e)) : new n(e % it | 0,e / it | 0),
                    e
                }
                function o(e, t) {
                    return new n(e,t)
                }
                function s(e, t) {
                    if (0 == e.length)
                        throw Error("number format error: empty string");
                    var r = t || 10;
                    if (2 > r || 36 < r)
                        throw Error("radix out of range: " + r);
                    if ("-" == e.charAt(0))
                        return v(s(e.substring(1), r));
                    if (0 <= e.indexOf("-"))
                        throw Error('number format error: interior "-" character: ' + e);
                    for (var n = a(Math.pow(r, 8)), i = u(), o = 0; o < e.length; o += 8) {
                        var l = Math.min(8, e.length - o)
                          , c = parseInt(e.substring(o, o + l), r);
                        8 > l ? (l = a(Math.pow(r, l)),
                        i = M(i, l).add(a(c))) : (i = M(i, n),
                        i = i.add(a(c)))
                    }
                    return i
                }
                function u() {
                    return Ze || (Ze = i(0)),
                    Ze
                }
                function l() {
                    return Je || (Je = i(1)),
                    Je
                }
                function c() {
                    return Ke || (Ke = i(-1)),
                    Ke
                }
                function h() {
                    return et || (et = o(0, -2147483648)),
                    et
                }
                function f() {
                    return tt || (tt = i(16777216)),
                    tt
                }
                function d(e) {
                    return e.j * it + (0 <= e.v ? e.v : it + e.v)
                }
                function p(e) {
                    return 0 == e.j && 0 == e.v
                }
                function m(e, t) {
                    return e.j == t.j && e.v == t.v
                }
                function g(e, t) {
                    if (m(e, t))
                        return 0;
                    var r = 0 > e.j
                      , n = 0 > t.j;
                    return r && !n ? -1 : !r && n ? 1 : 0 > y(e, t).j ? -1 : 1
                }
                function v(e) {
                    return m(e, h()) ? h() : o(~e.v, ~e.j).add(l())
                }
                function y(e, t) {
                    return e.add(v(t))
                }
                function M(e, t) {
                    if (p(e) || p(t))
                        return u();
                    if (m(e, h()))
                        return 1 == (1 & t.v) ? h() : u();
                    if (m(t, h()))
                        return 1 == (1 & e.v) ? h() : u();
                    if (0 > e.j)
                        return 0 > t.j ? M(v(e), v(t)) : v(M(v(e), t));
                    if (0 > t.j)
                        return v(M(e, v(t)));
                    var r = f();
                    if ((r = 0 > g(e, r)) && (r = f(),
                    r = 0 > g(t, r)),
                    r)
                        return a(d(e) * d(t));
                    var n, i, s, l, r = e.j >>> 16, c = 65535 & e.j, y = e.v >>> 16, w = 65535 & e.v, x = t.j >>> 16, A = 65535 & t.j, b = t.v >>> 16, T = 65535 & t.v;
                    return l = 0 + w * T,
                    s = 0 + (l >>> 16),
                    s += y * T,
                    i = 0 + (s >>> 16),
                    s = (65535 & s) + w * b,
                    i += s >>> 16,
                    s &= 65535,
                    i += c * T,
                    n = 0 + (i >>> 16),
                    i = (65535 & i) + y * b,
                    n += i >>> 16,
                    i &= 65535,
                    i += w * A,
                    n += i >>> 16,
                    i &= 65535,
                    n = n + (r * T + c * b + y * A + w * x) & 65535,
                    o(s << 16 | 65535 & l, n << 16 | i)
                }
                function w(e, t) {
                    if (p(t))
                        throw Error("division by zero");
                    if (p(e))
                        return u();
                    if (m(e, h())) {
                        if (m(t, l()) || m(t, c()))
                            return h();
                        if (m(t, h()))
                            return l();
                        var r;
                        if (r = 1,
                        0 == r)
                            r = e;
                        else {
                            var n = e.j;
                            r = 32 > r ? o(e.v >>> r | n << 32 - r, n >> r) : o(n >> r - 32, 0 <= n ? 0 : -1)
                        }
                        return r = x(w(r, t), 1),
                        m(r, u()) ? 0 > t.j ? l() : c() : (n = y(e, M(t, r)),
                        r.add(w(n, t)))
                    }
                    if (m(t, h()))
                        return u();
                    if (0 > e.j)
                        return 0 > t.j ? w(v(e), v(t)) : v(w(v(e), t));
                    if (0 > t.j)
                        return v(w(e, v(t)));
                    for (var i = u(), n = e; 0 <= g(n, t); ) {
                        r = Math.max(1, Math.floor(d(n) / d(t)));
                        for (var s = Math.ceil(Math.log(r) / Math.LN2), s = 48 >= s ? 1 : Math.pow(2, s - 48), f = a(r), A = M(f, t); 0 > A.j || 0 < g(A, n); )
                            r -= s,
                            f = a(r),
                            A = M(f, t);
                        p(f) && (f = l()),
                        i = i.add(f),
                        n = y(n, A)
                    }
                    return i
                }
                function x(e, t) {
                    if (t &= 63,
                    0 == t)
                        return e;
                    var r = e.v;
                    return 32 > t ? o(r << t, e.j << t | r >>> 32 - t) : o(0, r << t - 32)
                }
                function A(e, t) {
                    if (t &= 63,
                    0 == t)
                        return e;
                    var r = e.j;
                    return 32 > t ? o(e.v >>> t | r << 32 - t, r >>> t) : 32 == t ? o(r, 0) : o(r >>> t - 32, 0)
                }
                function b(e, t) {
                    if (3 < e.length) {
                        if (t)
                            return !0;
                        var r = e.charAt(1);
                        return "~" === e.charAt(0) && (":" === r || "$" === r || "#" === r)
                    }
                    return !1
                }
                function T(e) {
                    var t = Math.floor(e / 44);
                    return e = String.fromCharCode(e % 44 + 48),
                    0 === t ? "^" + e : "^" + String.fromCharCode(t + 48) + e
                }
                function _() {
                    this.a = this.s = 0,
                    this.g = {}
                }
                function E() {
                    this.s = 0,
                    this.a = []
                }
                function S() {
                    return Math.round(15 * Math.random()).toString(16)
                }
                function D() {
                    var e = (8 | 3 & Math.round(14 * Math.random())).toString(16);
                    return S() + S() + S() + S() + S() + S() + S() + S() + "-" + S() + S() + S() + S() + "-4" + S() + S() + S() + "-" + e + S() + S() + S() + "-" + S() + S() + S() + S() + S() + S() + S() + S() + S() + S() + S() + S()
                }
                function N(e, t) {
                    if (null == e)
                        return null == t;
                    if (e === t)
                        return !0;
                    if ("object" == typeof e) {
                        if (st(e)) {
                            if (st(t) && e.length === t.length) {
                                for (var r = 0; r < e.length; r++)
                                    if (!N(e[r], t[r]))
                                        return !1;
                                return !0
                            }
                            return !1
                        }
                        if (e.C)
                            return e.C(t);
                        if (null != t && "object" == typeof t) {
                            if (t.C)
                                return t.C(e);
                            var n, r = 0, i = ot(t).length;
                            for (n in e)
                                if (e.hasOwnProperty(n) && (r++,
                                !t.hasOwnProperty(n) || !N(e[n], t[n])))
                                    return !1;
                            return r === i
                        }
                    }
                    return !1
                }
                function I(e, t) {
                    return e ^ t + 2654435769 + (e << 6) + (e >> 2)
                }
                function L(e) {
                    var t = 0;
                    if (null != e.forEach)
                        e.forEach(function(e, r) {
                            t = (t + (O(r) ^ O(e))) % 4503599627370496
                        });
                    else
                        for (var r = ot(e), n = 0; n < r.length; n++)
                            var i = r[n]
                              , a = e[i]
                              , t = (t + (O(i) ^ O(a))) % 4503599627370496;
                    return t
                }
                function C(e) {
                    var t = 0;
                    if (st(e))
                        for (var r = 0; r < e.length; r++)
                            t = I(t, O(e[r]));
                    else
                        e.forEach && e.forEach(function(e) {
                            t = I(t, O(e))
                        });
                    return t
                }
                function O(e) {
                    if (null == e)
                        return 0;
                    switch (typeof e) {
                    case "number":
                        return e;
                    case "boolean":
                        return !0 === e ? 1 : 0;
                    case "string":
                        var t = lt[e];
                        if (null == t) {
                            for (var r = t = 0; r < e.length; ++r)
                                t = 31 * t + e.charCodeAt(r),
                                t %= 4294967296;
                            ct++,
                            256 <= ct && (lt = {},
                            ct = 1),
                            lt[e] = t
                        }
                        return e = t;
                    case "function":
                        return (t = e.transit$hashCode$) ? t : (t = ut,
                        "undefined" != typeof Object.defineProperty ? Object.defineProperty(e, "transit$hashCode$", {
                            value: t,
                            enumerable: !1
                        }) : e.transit$hashCode$ = t,
                        ut++,
                        t);
                    default:
                        return e instanceof Date ? e.valueOf() : st(e) ? C(e) : e.D ? e.D() : L(e)
                    }
                }
                function j(e, t) {
                    this.tag = e,
                    this.rep = t,
                    this.a = -1
                }
                function R(e, t) {
                    return new j(e,t)
                }
                function P(e) {
                    return "number" == typeof e ? e : e instanceof n ? e : (e = s(e, 10),
                    0 < g(e, ft) || 0 > g(e, dt) ? e : d(e))
                }
                function z(e) {
                    return R("n", e)
                }
                function B(e) {
                    return R("f", e)
                }
                function U(e) {
                    this.w = e,
                    this.a = -1
                }
                function V(e) {
                    return new U(e)
                }
                function k(e) {
                    this.w = e,
                    this.a = -1
                }
                function F(e) {
                    return new k(e)
                }
                function G(e, t, r) {
                    var n = "";
                    r = r || t + 1;
                    for (var a = 8 * (7 - t), s = x(i(255), a); t < r; t++,
                    a -= 8,
                    s = A(s, 8)) {
                        var u = A(o(e.v & s.v, e.j & s.j), a).toString(16);
                        1 == u.length && (u = "0" + u),
                        n += u
                    }
                    return n
                }
                function Y(e, t) {
                    this.g = e,
                    this.o = t,
                    this.a = -1
                }
                function Q(e) {
                    e = e.replace(/-/g, "");
                    for (var t = null, r = null, n = r = 0, i = 24, a = 0, a = r = 0, i = 24; 8 > a; a += 2,
                    i -= 8)
                        r |= parseInt(e.substring(a, a + 2), 16) << i;
                    for (n = 0,
                    a = 8,
                    i = 24; 16 > a; a += 2,
                    i -= 8)
                        n |= parseInt(e.substring(a, a + 2), 16) << i;
                    for (t = o(n, r),
                    r = 0,
                    a = 16,
                    i = 24; 24 > a; a += 2,
                    i -= 8)
                        r |= parseInt(e.substring(a, a + 2), 16) << i;
                    for (n = 0,
                    i = a = 24; 32 > a; a += 2,
                    i -= 8)
                        n |= parseInt(e.substring(a, a + 2), 16) << i;
                    return r = o(n, r),
                    new Y(t,r)
                }
                function H(e) {
                    return e = "number" == typeof e ? e : parseInt(e, 10),
                    new Date(e)
                }
                function W(e, r) {
                    var n;
                    if (r && !1 === r.O || "undefined" == typeof t)
                        if ("undefined" != typeof Uint8Array) {
                            if ("undefined" != typeof atob)
                                n = atob(e);
                            else {
                                if (n = String(e).replace(/=+$/, ""),
                                1 == n.length % 4)
                                    throw Error("'atob' failed: The string to be decoded is not correctly encoded.");
                                for (var i, a, o = 0, s = 0, u = ""; a = n.charAt(s++); ~a && (i = o % 4 ? 64 * i + a : a,
                                o++ % 4) ? u += String.fromCharCode(255 & i >> (-2 * o & 6)) : 0)
                                    a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);
                                n = u
                            }
                            for (o = n.length,
                            i = new Uint8Array(o),
                            a = 0; a < o; a++)
                                i[a] = n.charCodeAt(a);
                            n = i
                        } else
                            n = R("b", e);
                    else
                        n = new t(e,"base64");
                    return n
                }
                function X(e) {
                    return R("r", e)
                }
                function q(e, t) {
                    this.a = e,
                    this.type = t || 0,
                    this.s = 0
                }
                function Z(e, t) {
                    this.map = e,
                    this.type = t || 0,
                    this.keys = ie(this.map),
                    this.s = 0,
                    this.g = null,
                    this.a = 0
                }
                function J(e, t) {
                    if (e instanceof ne && oe(t)) {
                        if (e.size !== t.size)
                            return !1;
                        for (var r in e.map)
                            for (var n = e.map[r], i = 0; i < n.length; i += 2)
                                if (!N(n[i + 1], t.get(n[i])))
                                    return !1;
                        return !0
                    }
                    if (e instanceof te && oe(t)) {
                        if (e.size !== t.size)
                            return !1;
                        for (r = e.l,
                        i = 0; i < r.length; i += 2)
                            if (!N(r[i + 1], t.get(r[i])))
                                return !1;
                        return !0
                    }
                    if (null != t && "object" == typeof t && (i = ot(t),
                    r = i.length,
                    e.size === r)) {
                        for (n = 0; n < r; n++) {
                            var a = i[n];
                            if (!e.has(a) || !N(t[a], e.get(a)))
                                return !1
                        }
                        return !0
                    }
                    return !1
                }
                function K(t) {
                    return null == t ? "null" : "array" == e(t) ? "[" + t.toString() + "]" : "string" == typeof t ? '"' + t + '"' : t.toString()
                }
                function $(e) {
                    var t = 0
                      , r = "TransitMap {";
                    return e.forEach(function(n, i) {
                        r += K(i) + " => " + K(n),
                        t < e.size - 1 && (r += ", "),
                        t++
                    }),
                    r + "}"
                }
                function ee(e) {
                    var t = 0
                      , r = "TransitSet {";
                    return e.forEach(function(n) {
                        r += K(n),
                        t < e.size - 1 && (r += ", "),
                        t++
                    }),
                    r + "}"
                }
                function te(e) {
                    this.l = e,
                    this.h = null,
                    this.a = -1,
                    this.size = e.length / 2,
                    this.g = 0
                }
                function re(e) {
                    if (e.h)
                        throw Error("Invalid operation, already converted");
                    return !(8 > e.size) && (e.g++,
                    32 < e.g && (e.h = ae(e.l, !1, !0),
                    e.l = [],
                    !0))
                }
                function ne(e, t, r) {
                    this.map = t || {},
                    this.a = e || [],
                    this.size = r || 0,
                    this.g = -1
                }
                function ie(e) {
                    return null != e.a ? e.a : ot(e.map)
                }
                function ae(e, t, r) {
                    if (e = e || [],
                    t = !1 !== t || t,
                    (!0 !== r || !r) && 64 >= e.length) {
                        if (t) {
                            var n = e;
                            for (e = [],
                            t = 0; t < n.length; t += 2) {
                                var i = !1;
                                for (r = 0; r < e.length; r += 2)
                                    if (N(e[r], n[t])) {
                                        e[r + 1] = n[t + 1],
                                        i = !0;
                                        break
                                    }
                                i || (e.push(n[t]),
                                e.push(n[t + 1]))
                            }
                        }
                        return new te(e)
                    }
                    var n = {}
                      , i = []
                      , a = 0;
                    for (t = 0; t < e.length; t += 2) {
                        r = O(e[t]);
                        var o = n[r];
                        if (null == o)
                            i.push(r),
                            n[r] = [e[t], e[t + 1]],
                            a++;
                        else {
                            var s = !0;
                            for (r = 0; r < o.length; r += 2)
                                if (N(o[r], e[t])) {
                                    o[r + 1] = e[t + 1],
                                    s = !1;
                                    break
                                }
                            s && (o.push(e[t]),
                            o.push(e[t + 1]),
                            a++)
                        }
                    }
                    return new ne(i,n,a)
                }
                function oe(e) {
                    return e instanceof te || e instanceof ne
                }
                function se(e) {
                    this.map = e,
                    this.size = e.size
                }
                function ue(e) {
                    e = e || [];
                    for (var t = {}, r = [], n = 0, i = 0; i < e.length; i++) {
                        var a = O(e[i])
                          , o = t[a];
                        if (null == o)
                            r.push(a),
                            t[a] = [e[i], e[i]],
                            n++;
                        else {
                            for (var a = !0, s = 0; s < o.length; s += 2)
                                if (N(o[s], e[i])) {
                                    a = !1;
                                    break
                                }
                            a && (o.push(e[i]),
                            o.push(e[i]),
                            n++)
                        }
                    }
                    return new se(new ne(r,t,n))
                }
                function le(e) {
                    return R("'", e)
                }
                function ce(e) {
                    return R("list", e)
                }
                function he(e) {
                    return R("link", e)
                }
                function fe(e) {
                    if (null == e)
                        return "null";
                    if (e === String)
                        return "string";
                    if (e === Boolean)
                        return "boolean";
                    if (e === Number)
                        return "number";
                    if (e === Array)
                        return "array";
                    if (e === Object)
                        return "map";
                    var t = e[mt];
                    return null == t && ("undefined" != typeof Object.defineProperty ? (t = ++pt,
                    Object.defineProperty(e, mt, {
                        value: t,
                        enumerable: !1
                    })) : e[mt] = t = ++pt),
                    t
                }
                function de(e, t) {
                    for (var r = e.toString(), n = r.length; n < t; n++)
                        r = "0" + r;
                    return r
                }
                function pe() {}
                function me() {}
                function ge() {}
                function ve() {}
                function ye() {}
                function Me() {}
                function we() {}
                function xe() {}
                function Ae() {}
                function be() {}
                function Te() {}
                function _e() {}
                function Ee() {}
                function Se() {}
                function De() {}
                function Ne() {}
                function Ie() {}
                function Le() {}
                function Ce() {
                    this.A = {},
                    this.set(null, new pe),
                    this.set(String, new me),
                    this.set(Number, new ge),
                    this.set(n, new ve),
                    this.set(Boolean, new ye),
                    this.set(Array, new Me),
                    this.set(Object, new we),
                    this.set(Date, new Ae),
                    this.set(Y, new be),
                    this.set(U, new Te),
                    this.set(k, new _e),
                    this.set(j, new Ee),
                    this.set(se, new Se),
                    this.set(te, new De),
                    this.set(ne, new Ne),
                    "undefined" != typeof t && this.set(t, new Ie),
                    "undefined" != typeof Uint8Array && this.set(Uint8Array, new Le)
                }
                function Oe(e) {
                    this.K = e
                }
                function je(e) {
                    this.o = e || {},
                    this.A = {};
                    for (var t in this.G.A)
                        this.A[t] = this.G.A[t];
                    for (t in this.o.handlers) {
                        e: {
                            switch (t) {
                            case "_":
                            case "s":
                            case "?":
                            case "i":
                            case "d":
                            case "b":
                            case "'":
                            case "array":
                            case "map":
                                e = !0;
                                break e
                            }
                            e = !1
                        }
                        if (e)
                            throw Error('Cannot override handler for ground type "' + t + '"');
                        this.A[t] = this.o.handlers[t]
                    }
                    this.J = null != this.o.preferStrings ? this.o.preferStrings : this.G.J,
                    this.O = null != this.o.preferBuffers ? this.o.preferBuffers : this.G.O,
                    this.M = this.o.defaultHandler || this.G.M,
                    this.g = this.o.mapBuilder,
                    this.F = this.o.arrayBuilder
                }
                function Re(e, t, r, n, i) {
                    if (i) {
                        var a = [];
                        for (i = 0; i < t.length; i++)
                            a.push(e.a(t[i], r, n, !1));
                        return a
                    }
                    if (a = r && r.s,
                    2 === t.length && "string" == typeof t[0] && (i = e.a(t[0], r, !1, !1)) && i instanceof Oe)
                        return t = t[1],
                        a = e.A[i.K],
                        null != a ? a = a(e.a(t, r, n, !0), e) : R(i.K, e.a(t, r, n, !1));
                    if (r && a != r.s && (r.s = a),
                    e.F) {
                        if (32 >= t.length && e.F.fromArray) {
                            for (a = [],
                            i = 0; i < t.length; i++)
                                a.push(e.a(t[i], r, n, !1));
                            return e.F.fromArray(a, t)
                        }
                        for (a = e.F.init(t),
                        i = 0; i < t.length; i++)
                            a = e.F.add(a, e.a(t[i], r, n, !1), t);
                        return e.F.finalize(a, t)
                    }
                    for (a = [],
                    i = 0; i < t.length; i++)
                        a.push(e.a(t[i], r, n, !1));
                    return a
                }
                function Pe(e, t) {
                    if ("~" === t.charAt(0)) {
                        var r = t.charAt(1);
                        if ("~" === r || "^" === r || "`" === r)
                            return t.substring(1);
                        if ("#" === r)
                            return new Oe(t.substring(2));
                        var n = e.A[r];
                        return null == n ? e.M(r, t.substring(2)) : n(t.substring(2), e)
                    }
                    return t
                }
                function ze(e) {
                    this.a = new je(e)
                }
                function Be(e, t) {
                    this.o = e,
                    this.g = t || {},
                    this.a = this.g.cache ? this.g.cache : new E
                }
                function Ue(e) {
                    if (this.a = e || {},
                    this.J = null == this.a.preferStrings || this.a.preferStrings,
                    this.S = this.a.objectBuilder || null,
                    this.A = new Ce,
                    e = this.a.handlers) {
                        if (st(e) || !e.forEach)
                            throw Error('transit writer "handlers" option must be a map');
                        var t = this;
                        e.forEach(function(e, r) {
                            if (void 0 === r)
                                throw Error("Cannot create handler for JavaScript undefined");
                            t.A.set(r, e)
                        })
                    }
                    this.H = this.a.handlerForForeign,
                    this.L = this.a.unpack || function(e) {
                        return e instanceof te && null === e.h && e.l
                    }
                    ,
                    this.I = this.a && this.a.verbose || !1
                }
                function Ve(e, t) {
                    var r = e.A.get(null == t ? null : t.constructor);
                    return null != r ? r : (r = t && t.transitTag) ? e.A.get(r) : null
                }
                function ke(e, t, r, n, i) {
                    return e = e + t + r,
                    i ? i.write(e, n) : e
                }
                function Fe(e, t, r) {
                    var n = [];
                    if (st(t))
                        for (var i = 0; i < t.length; i++)
                            n.push(We(e, t[i], !1, r));
                    else
                        t.forEach(function(t) {
                            n.push(We(e, t, !1, r))
                        });
                    return n
                }
                function Ge(e, t) {
                    if ("string" != typeof t) {
                        var r = Ve(e, t);
                        return r && 1 === r.tag(t).length
                    }
                    return !0
                }
                function Ye(e, t) {
                    var r = e.L(t)
                      , n = !0;
                    if (r) {
                        for (var i = 0; i < r.length && (n = Ge(e, r[i])); i += 2)
                            ;
                        return n
                    }
                    if (t.keys && (r = t.keys(),
                    i = null,
                    r.next)) {
                        for (i = r.next(); !i.done && (n = Ge(e, i.value)); )
                            i = r.next();
                        return n
                    }
                    if (t.forEach)
                        return t.forEach(function(t, r) {
                            n = n && Ge(e, r)
                        }),
                        n;
                    throw Error("Cannot walk keys of object type " + (null == t ? null : t.constructor).name)
                }
                function Qe(e) {
                    if (e.constructor.transit$isObject)
                        return !0;
                    var t = e.constructor.toString()
                      , t = t.substr(9)
                      , t = t.substr(0, t.indexOf("("))
                      , t = "Object" == t;
                    return "undefined" != typeof Object.defineProperty ? Object.defineProperty(e.constructor, "transit$isObject", {
                        value: t,
                        enumerable: !1
                    }) : e.constructor.transit$isObject = t,
                    t
                }
                function He(e, t, r) {
                    if (t.constructor === Object || null != t.forEach || e.H && Qe(t)) {
                        if (e.I) {
                            if (null != t.forEach) {
                                if (Ye(e, t)) {
                                    var n = {};
                                    return t.forEach(function(t, i) {
                                        n[We(e, i, !0, !1)] = We(e, t, !1, r)
                                    }),
                                    n
                                }
                                var i = e.L(t)
                                  , a = []
                                  , o = ke("~#", "cmap", "", !0, r);
                                if (i)
                                    for (var s = 0; s < i.length; s += 2)
                                        a.push(We(e, i[s], !0, !1)),
                                        a.push(We(e, i[s + 1], !1, r));
                                else
                                    t.forEach(function(t, n) {
                                        a.push(We(e, n, !0, !1)),
                                        a.push(We(e, t, !1, r))
                                    });
                                return n = {},
                                n[o] = a,
                                n
                            }
                            for (n = {},
                            i = ot(t),
                            s = 0; s < i.length; s++)
                                n[We(e, i[s], !0, !1)] = We(e, t[i[s]], !1, r);
                            return n
                        }
                        if (null != t.forEach) {
                            if (Ye(e, t)) {
                                if (i = e.L(t),
                                n = ["^ "],
                                i)
                                    for (s = 0; s < i.length; s += 2)
                                        n.push(We(e, i[s], !0, r)),
                                        n.push(We(e, i[s + 1], !1, r));
                                else
                                    t.forEach(function(t, i) {
                                        n.push(We(e, i, !0, r)),
                                        n.push(We(e, t, !1, r))
                                    });
                                return n
                            }
                            if (i = e.L(t),
                            a = [],
                            o = ke("~#", "cmap", "", !0, r),
                            i)
                                for (s = 0; s < i.length; s += 2)
                                    a.push(We(e, i[s], !0, r)),
                                    a.push(We(e, i[s + 1], !1, r));
                            else
                                t.forEach(function(t, n) {
                                    a.push(We(e, n, !0, r)),
                                    a.push(We(e, t, !1, r))
                                });
                            return [o, a]
                        }
                        for (n = ["^ "],
                        i = ot(t),
                        s = 0; s < i.length; s++)
                            n.push(We(e, i[s], !0, r)),
                            n.push(We(e, t[i[s]], !1, r));
                        return n
                    }
                    if (null != e.S)
                        return e.S(t, function(t) {
                            return We(e, t, !0, r)
                        }, function(t) {
                            return We(e, t, !1, r)
                        });
                    throw s = (null == t ? null : t.constructor).name,
                    i = Error("Cannot write " + s),
                    i.data = {
                        N: t,
                        type: s
                    },
                    i
                }
                function We(e, t, r, i) {
                    var a = Ve(e, t) || (e.H ? e.H(t, e.A) : null)
                      , o = a ? a.tag(t) : null
                      , s = a ? a.rep(t) : null;
                    if (null == a || null == o)
                        throw i = (null == t ? null : t.constructor).name,
                        e = Error("Cannot write " + i),
                        e.data = {
                            N: t,
                            type: i
                        },
                        e;
                    switch (o) {
                    case "_":
                        return r ? ke("~", "_", "", r, i) : null;
                    case "s":
                        return 0 < s.length ? (e = s.charAt(0),
                        e = "~" === e || "^" === e || "`" === e ? "~" + s : s) : e = s,
                        ke("", "", e, r, i);
                    case "?":
                        return r ? ke("~", "?", s.toString()[0], r, i) : s;
                    case "i":
                        return 1 / 0 === s ? ke("~", "z", "INF", r, i) : -(1 / 0) === s ? ke("~", "z", "-INF", r, i) : isNaN(s) ? ke("~", "z", "NaN", r, i) : r || "string" == typeof s || s instanceof n ? ke("~", "i", s.toString(), r, i) : s;
                    case "d":
                        return r ? ke(s.T, "d", s, r, i) : s;
                    case "b":
                        return ke("~", "b", s, r, i);
                    case "'":
                        return e.I ? (t = {},
                        r = ke("~#", "'", "", !0, i),
                        t[r] = We(e, s, !1, i),
                        i = t) : i = [ke("~#", "'", "", !0, i), We(e, s, !1, i)],
                        i;
                    case "array":
                        return Fe(e, s, i);
                    case "map":
                        return He(e, s, i);
                    default:
                        e: {
                            if (1 === o.length) {
                                if ("string" == typeof s) {
                                    i = ke("~", o, s, r, i);
                                    break e
                                }
                                if (r || e.J) {
                                    if ((e = e.I && a.R()) ? (o = e.tag(t),
                                    s = e.B(t, e)) : s = a.B(t, a),
                                    null !== s) {
                                        i = ke("~", o, s, r, i);
                                        break e
                                    }
                                    throw i = Error('Tag "' + o + '" cannot be encoded as string'),
                                    i.data = {
                                        tag: o,
                                        rep: s,
                                        N: t
                                    },
                                    i
                                }
                            }
                            t = o,
                            r = s,
                            e.I ? (s = {},
                            s[ke("~#", t, "", !0, i)] = We(e, r, !1, i),
                            i = s) : i = [ke("~#", t, "", !0, i), We(e, r, !1, i)]
                        }
                        return i
                    }
                }
                function Xe(e, t) {
                    var r = Ve(e, t) || (e.H ? e.H(t, e.A) : null);
                    if (null != r)
                        return 1 === r.tag(t).length ? le(t) : t;
                    var r = (null == t ? null : t.constructor).name
                      , n = Error("Cannot write " + r);
                    throw n.data = {
                        N: t,
                        type: r
                    },
                    n
                }
                function qe(e, t) {
                    this.a = e,
                    this.o = t || {},
                    !1 === this.o.cache ? this.g = null : this.g = this.o.cache ? this.o.cache : new _
                }
                var Ze, Je, Ke, $e, et, tt, rt = this, nt = {}, it = 4294967296, at = it * it / 2;
                n.prototype.toString = function(e) {
                    if (e = e || 10,
                    2 > e || 36 < e)
                        throw Error("radix out of range: " + e);
                    if (p(this))
                        return "0";
                    if (0 > this.j) {
                        if (m(this, h())) {
                            var t = a(e)
                              , r = w(this, t)
                              , t = y(M(r, t), this);
                            return r.toString(e) + t.v.toString(e)
                        }
                        return "-" + v(this).toString(e)
                    }
                    for (var r = a(Math.pow(e, 6)), t = this, n = ""; ; ) {
                        var i = w(t, r)
                          , o = y(t, M(i, r)).v.toString(e)
                          , t = i;
                        if (p(t))
                            return o + n;
                        for (; 6 > o.length; )
                            o = "0" + o;
                        n = "" + o + n
                    }
                }
                ,
                n.prototype.add = function(e) {
                    var t, r = this.j >>> 16, n = 65535 & this.j, i = this.v >>> 16, a = e.j >>> 16, s = 65535 & e.j, u = e.v >>> 16;
                    return t = 0 + ((65535 & this.v) + (65535 & e.v)),
                    e = 0 + (t >>> 16),
                    e += i + u,
                    i = 0 + (e >>> 16),
                    i += n + s,
                    n = 0 + (i >>> 16),
                    n = n + (r + a) & 65535,
                    o((65535 & e) << 16 | 65535 & t, n << 16 | 65535 & i)
                }
                ,
                _.prototype.write = function(e, t) {
                    if (b(e, t)) {
                        1936 === this.s && this.clear();
                        var r = this.g[e];
                        return null == r ? (this.g[e] = [T(this.s), this.a],
                        this.s++,
                        e) : r[1] != this.a ? (r[1] = this.a,
                        r[0] = T(this.s),
                        this.s++,
                        e) : r[0]
                    }
                    return e
                }
                ,
                _.prototype.clear = function() {
                    this.s = 0,
                    this.a++
                }
                ,
                E.prototype.write = function(e) {
                    return 1936 == this.s && (this.s = 0),
                    this.a[this.s] = e,
                    this.s++,
                    e
                }
                ,
                E.prototype.P = function(e) {
                    return this.a[2 === e.length ? e.charCodeAt(1) - 48 : 44 * (e.charCodeAt(1) - 48) + (e.charCodeAt(2) - 48)]
                }
                ,
                E.prototype.clear = function() {
                    this.s = 0
                }
                ;
                var ot = "undefined" != typeof Object.keys ? function(e) {
                    return Object.keys(e)
                }
                : function(e) {
                    var t, r = [], n = 0;
                    for (t in e)
                        r[n++] = t;
                    return r
                }
                  , st = "undefined" != typeof Array.isArray ? function(e) {
                    return Array.isArray(e)
                }
                : function(t) {
                    return "array" === e(t)
                }
                  , ut = 1
                  , lt = {}
                  , ct = 0
                  , ht = "undefined" != typeof Symbol ? Symbol.iterator : "@@iterator";
                j.prototype.toString = function() {
                    return "[TaggedValue: " + this.tag + ", " + this.rep + "]"
                }
                ,
                j.prototype.g = function(e) {
                    return N(this, e)
                }
                ,
                j.prototype.equiv = j.prototype.g,
                j.prototype.C = function(e) {
                    return e instanceof j && this.tag === e.tag && N(this.rep, e.rep)
                }
                ,
                j.prototype.D = function() {
                    return -1 === this.a && (this.a = I(O(this.tag), O(this.rep))),
                    this.a
                }
                ;
                var ft = s("9007199254740991")
                  , dt = s("-9007199254740991");
                n.prototype.a = function(e) {
                    return N(this, e)
                }
                ,
                n.prototype.equiv = n.prototype.a,
                n.prototype.C = function(e) {
                    return e instanceof n && m(this, e)
                }
                ,
                n.prototype.D = function() {
                    return this.v
                }
                ,
                U.prototype.toString = function() {
                    return ":" + this.w
                }
                ,
                U.prototype.namespace = function() {
                    var e = this.w.indexOf("/");
                    return -1 != e ? this.w.substring(0, e) : null
                }
                ,
                U.prototype.name = function() {
                    var e = this.w.indexOf("/");
                    return -1 != e ? this.w.substring(e + 1, this.w.length) : this.w
                }
                ,
                U.prototype.g = function(e) {
                    return N(this, e)
                }
                ,
                U.prototype.equiv = U.prototype.g,
                U.prototype.C = function(e) {
                    return e instanceof U && this.w == e.w
                }
                ,
                U.prototype.D = function() {
                    return -1 === this.a && (this.a = O(this.w)),
                    this.a
                }
                ,
                k.prototype.namespace = function() {
                    var e = this.w.indexOf("/");
                    return -1 != e ? this.w.substring(0, e) : null
                }
                ,
                k.prototype.name = function() {
                    var e = this.w.indexOf("/");
                    return -1 != e ? this.w.substring(e + 1, this.w.length) : this.w
                }
                ,
                k.prototype.toString = function() {
                    return this.w
                }
                ,
                k.prototype.g = function(e) {
                    return N(this, e)
                }
                ,
                k.prototype.equiv = k.prototype.g,
                k.prototype.C = function(e) {
                    return e instanceof k && this.w == e.w
                }
                ,
                k.prototype.D = function() {
                    return -1 === this.a && (this.a = O(this.w)),
                    this.a
                }
                ,
                Y.prototype.toString = function() {
                    var e, t = this.g, r = this.o;
                    return e = "" + (G(t, 0, 4) + "-"),
                    e += G(t, 4, 6) + "-",
                    e += G(t, 6, 8) + "-",
                    e += G(r, 0, 2) + "-",
                    e += G(r, 2, 8)
                }
                ,
                Y.prototype.F = function(e) {
                    return N(this, e)
                }
                ,
                Y.prototype.equiv = Y.prototype.F,
                Y.prototype.C = function(e) {
                    return e instanceof Y && m(this.g, e.g) && m(this.o, e.o)
                }
                ,
                Y.prototype.D = function() {
                    return -1 === this.a && (this.a = O(this.toString())),
                    this.a
                }
                ,
                Date.prototype.C = function(e) {
                    return e instanceof Date && this.valueOf() === e.valueOf()
                }
                ,
                Date.prototype.D = function() {
                    return this.valueOf()
                }
                ,
                q.prototype.next = function() {
                    if (this.s < this.a.length) {
                        var e = null;
                        return e = 0 === this.type ? this.a[this.s] : 1 === this.type ? this.a[this.s + 1] : [this.a[this.s], this.a[this.s + 1]],
                        e = {
                            value: e,
                            done: !1
                        },
                        this.s += 2,
                        e
                    }
                    return {
                        value: null,
                        done: !0
                    }
                }
                ,
                q.prototype.next = q.prototype.next,
                q.prototype[ht] = function() {
                    return this
                }
                ,
                Z.prototype.next = function() {
                    if (this.s < this.map.size) {
                        null != this.g && this.a < this.g.length || (this.g = this.map.map[this.keys[this.s]],
                        this.a = 0);
                        var e = null;
                        return e = 0 === this.type ? this.g[this.a] : 1 === this.type ? this.g[this.a + 1] : [this.g[this.a], this.g[this.a + 1]],
                        e = {
                            value: e,
                            done: !1
                        },
                        this.s++,
                        this.a += 2,
                        e
                    }
                    return {
                        value: null,
                        done: !0
                    }
                }
                ,
                Z.prototype.next = Z.prototype.next,
                Z.prototype[ht] = function() {
                    return this
                }
                ,
                te.prototype.toString = function() {
                    return $(this)
                }
                ,
                te.prototype.inspect = function() {
                    return this.toString()
                }
                ,
                te.prototype.clear = function() {
                    this.a = -1,
                    this.h ? this.h.clear() : this.l = [],
                    this.size = 0
                }
                ,
                te.prototype.clear = te.prototype.clear,
                te.prototype.keys = function() {
                    return this.h ? this.h.keys() : new q(this.l,0)
                }
                ,
                te.prototype.keys = te.prototype.keys,
                te.prototype.o = function() {
                    if (this.h)
                        return this.h.o();
                    for (var e = [], t = 0, r = 0; r < this.l.length; t++,
                    r += 2)
                        e[t] = this.l[r];
                    return e
                }
                ,
                te.prototype.keySet = te.prototype.o,
                te.prototype.entries = function() {
                    return this.h ? this.h.entries() : new q(this.l,2)
                }
                ,
                te.prototype.entries = te.prototype.entries,
                te.prototype.values = function() {
                    return this.h ? this.h.values() : new q(this.l,1)
                }
                ,
                te.prototype.values = te.prototype.values,
                te.prototype.forEach = function(e) {
                    if (this.h)
                        this.h.forEach(e);
                    else
                        for (var t = 0; t < this.l.length; t += 2)
                            e(this.l[t + 1], this.l[t])
                }
                ,
                te.prototype.forEach = te.prototype.forEach,
                te.prototype.get = function(e, t) {
                    if (this.h)
                        return this.h.get(e);
                    if (re(this))
                        return this.get(e);
                    for (var r = 0; r < this.l.length; r += 2)
                        if (N(this.l[r], e))
                            return this.l[r + 1];
                    return t
                }
                ,
                te.prototype.get = te.prototype.get,
                te.prototype.has = function(e) {
                    if (this.h)
                        return this.h.has(e);
                    if (re(this))
                        return this.has(e);
                    for (var t = 0; t < this.l.length; t += 2)
                        if (N(this.l[t], e))
                            return !0;
                    return !1
                }
                ,
                te.prototype.has = te.prototype.has,
                te.prototype.set = function(e, t) {
                    if (this.a = -1,
                    this.h)
                        this.h.set(e, t),
                        this.size = this.h.size;
                    else {
                        for (var r = 0; r < this.l.length; r += 2)
                            if (N(this.l[r], e))
                                return void (this.l[r + 1] = t);
                        this.l.push(e),
                        this.l.push(t),
                        this.size++,
                        32 < this.size && (this.h = ae(this.l, !1, !0),
                        this.l = null)
                    }
                }
                ,
                te.prototype.set = te.prototype.set,
                te.prototype.delete = function(e) {
                    if (this.a = -1,
                    this.h)
                        return e = this.h.delete(e),
                        this.size = this.h.size,
                        e;
                    for (var t = 0; t < this.l.length; t += 2)
                        if (N(this.l[t], e))
                            return e = this.l[t + 1],
                            this.l.splice(t, 2),
                            this.size--,
                            e
                }
                ,
                te.prototype.clone = function() {
                    var e = ae();
                    return this.forEach(function(t, r) {
                        e.set(r, t)
                    }),
                    e
                }
                ,
                te.prototype.clone = te.prototype.clone,
                te.prototype[ht] = function() {
                    return this.entries()
                }
                ,
                te.prototype.D = function() {
                    return this.h ? this.h.D() : (-1 === this.a && (this.a = L(this)),
                    this.a)
                }
                ,
                te.prototype.C = function(e) {
                    return this.h ? J(this.h, e) : J(this, e)
                }
                ,
                ne.prototype.toString = function() {
                    return $(this)
                }
                ,
                ne.prototype.inspect = function() {
                    return this.toString()
                }
                ,
                ne.prototype.clear = function() {
                    this.g = -1,
                    this.map = {},
                    this.a = [],
                    this.size = 0
                }
                ,
                ne.prototype.clear = ne.prototype.clear,
                ne.prototype.delete = function(e) {
                    this.g = -1,
                    this.a = null;
                    for (var t = O(e), r = this.map[t], n = 0; n < r.length; n += 2)
                        if (N(e, r[n]))
                            return e = r[n + 1],
                            r.splice(n, 2),
                            0 === r.length && delete this.map[t],
                            this.size--,
                            e
                }
                ,
                ne.prototype.entries = function() {
                    return new Z(this,2)
                }
                ,
                ne.prototype.entries = ne.prototype.entries,
                ne.prototype.forEach = function(e) {
                    for (var t = ie(this), r = 0; r < t.length; r++)
                        for (var n = this.map[t[r]], i = 0; i < n.length; i += 2)
                            e(n[i + 1], n[i], this)
                }
                ,
                ne.prototype.forEach = ne.prototype.forEach,
                ne.prototype.get = function(e, t) {
                    var r = O(e)
                      , r = this.map[r];
                    if (null == r)
                        return t;
                    for (var n = 0; n < r.length; n += 2)
                        if (N(e, r[n]))
                            return r[n + 1]
                }
                ,
                ne.prototype.get = ne.prototype.get,
                ne.prototype.has = function(e) {
                    var t = O(e)
                      , t = this.map[t];
                    if (null != t)
                        for (var r = 0; r < t.length; r += 2)
                            if (N(e, t[r]))
                                return !0;
                    return !1
                }
                ,
                ne.prototype.has = ne.prototype.has,
                ne.prototype.keys = function() {
                    return new Z(this,0)
                }
                ,
                ne.prototype.keys = ne.prototype.keys,
                ne.prototype.o = function() {
                    for (var e = ie(this), t = [], r = 0; r < e.length; r++)
                        for (var n = this.map[e[r]], i = 0; i < n.length; i += 2)
                            t.push(n[i]);
                    return t
                }
                ,
                ne.prototype.keySet = ne.prototype.o,
                ne.prototype.set = function(e, t) {
                    this.g = -1;
                    var r = O(e)
                      , n = this.map[r];
                    if (null == n)
                        this.a && this.a.push(r),
                        this.map[r] = [e, t],
                        this.size++;
                    else {
                        for (var r = !0, i = 0; i < n.length; i += 2)
                            if (N(t, n[i])) {
                                r = !1,
                                n[i] = t;
                                break
                            }
                        r && (n.push(e),
                        n.push(t),
                        this.size++)
                    }
                }
                ,
                ne.prototype.set = ne.prototype.set,
                ne.prototype.values = function() {
                    return new Z(this,1)
                }
                ,
                ne.prototype.values = ne.prototype.values,
                ne.prototype.clone = function() {
                    var e = ae();
                    return this.forEach(function(t, r) {
                        e.set(r, t)
                    }),
                    e
                }
                ,
                ne.prototype.clone = ne.prototype.clone,
                ne.prototype[ht] = function() {
                    return this.entries()
                }
                ,
                ne.prototype.D = function() {
                    return -1 === this.g && (this.g = L(this)),
                    this.g
                }
                ,
                ne.prototype.C = function(e) {
                    return J(this, e)
                }
                ,
                se.prototype.toString = function() {
                    return ee(this)
                }
                ,
                se.prototype.inspect = function() {
                    return this.toString()
                }
                ,
                se.prototype.add = function(e) {
                    this.map.set(e, e),
                    this.size = this.map.size
                }
                ,
                se.prototype.add = se.prototype.add,
                se.prototype.clear = function() {
                    this.map = new ne,
                    this.size = 0
                }
                ,
                se.prototype.clear = se.prototype.clear,
                se.prototype.delete = function(e) {
                    return e = this.map.delete(e),
                    this.size = this.map.size,
                    e
                }
                ,
                se.prototype.g = function() {
                    return this.map.entries()
                }
                ,
                se.prototype.entries = se.prototype.g,
                se.prototype.forEach = function(e) {
                    var t = this;
                    this.map.forEach(function(r, n) {
                        e(n, t)
                    })
                }
                ,
                se.prototype.forEach = se.prototype.forEach,
                se.prototype.has = function(e) {
                    return this.map.has(e)
                }
                ,
                se.prototype.has = se.prototype.has,
                se.prototype.keys = function() {
                    return this.map.keys()
                }
                ,
                se.prototype.keys = se.prototype.keys,
                se.prototype.o = function() {
                    return this.map.o()
                }
                ,
                se.prototype.keySet = se.prototype.o,
                se.prototype.a = function() {
                    return this.map.values()
                }
                ,
                se.prototype.values = se.prototype.a,
                se.prototype.clone = function() {
                    var e = ue();
                    return this.forEach(function(t) {
                        e.add(t)
                    }),
                    e
                }
                ,
                se.prototype.clone = se.prototype.clone,
                se.prototype[ht] = function() {
                    return this.a()
                }
                ,
                se.prototype.C = function(e) {
                    return e instanceof se && (this.size === e.size ? N(this.map, e.map) : void 0)
                }
                ,
                se.prototype.D = function() {
                    return O(this.map)
                }
                ;
                var pt = 0
                  , mt = "transit$guid$" + D();
                pe.prototype.tag = function() {
                    return "_"
                }
                ,
                pe.prototype.rep = function() {
                    return null
                }
                ,
                pe.prototype.B = function() {
                    return "null"
                }
                ,
                me.prototype.tag = function() {
                    return "s"
                }
                ,
                me.prototype.rep = function(e) {
                    return e
                }
                ,
                me.prototype.B = function(e) {
                    return e
                }
                ,
                ge.prototype.tag = function() {
                    return "i"
                }
                ,
                ge.prototype.rep = function(e) {
                    return e
                }
                ,
                ge.prototype.B = function(e) {
                    return e.toString()
                }
                ,
                ve.prototype.tag = function() {
                    return "i"
                }
                ,
                ve.prototype.rep = function(e) {
                    return e.toString()
                }
                ,
                ve.prototype.B = function(e) {
                    return e.toString()
                }
                ,
                ye.prototype.tag = function() {
                    return "?"
                }
                ,
                ye.prototype.rep = function(e) {
                    return e
                }
                ,
                ye.prototype.B = function(e) {
                    return e.toString()
                }
                ,
                Me.prototype.tag = function() {
                    return "array"
                }
                ,
                Me.prototype.rep = function(e) {
                    return e
                }
                ,
                Me.prototype.B = function() {
                    return null
                }
                ,
                we.prototype.tag = function() {
                    return "map"
                }
                ,
                we.prototype.rep = function(e) {
                    return e
                }
                ,
                we.prototype.B = function() {
                    return null
                }
                ,
                xe.prototype.tag = function() {
                    return "t"
                }
                ,
                xe.prototype.rep = function(e) {
                    return e.getUTCFullYear() + "-" + de(e.getUTCMonth() + 1, 2) + "-" + de(e.getUTCDate(), 2) + "T" + de(e.getUTCHours(), 2) + ":" + de(e.getUTCMinutes(), 2) + ":" + de(e.getUTCSeconds(), 2) + "." + de(e.getUTCMilliseconds(), 3) + "Z"
                }
                ,
                xe.prototype.B = function(e, t) {
                    return t.rep(e)
                }
                ,
                Ae.prototype.tag = function() {
                    return "m"
                }
                ,
                Ae.prototype.rep = function(e) {
                    return e.valueOf()
                }
                ,
                Ae.prototype.B = function(e) {
                    return e.valueOf().toString()
                }
                ,
                Ae.prototype.R = function() {
                    return new xe
                }
                ,
                be.prototype.tag = function() {
                    return "u"
                }
                ,
                be.prototype.rep = function(e) {
                    return e.toString()
                }
                ,
                be.prototype.B = function(e) {
                    return e.toString()
                }
                ,
                Te.prototype.tag = function() {
                    return ":"
                }
                ,
                Te.prototype.rep = function(e) {
                    return e.w
                }
                ,
                Te.prototype.B = function(e, t) {
                    return t.rep(e)
                }
                ,
                _e.prototype.tag = function() {
                    return "$"
                }
                ,
                _e.prototype.rep = function(e) {
                    return e.w
                }
                ,
                _e.prototype.B = function(e, t) {
                    return t.rep(e)
                }
                ,
                Ee.prototype.tag = function(e) {
                    return e.tag
                }
                ,
                Ee.prototype.rep = function(e) {
                    return e.rep
                }
                ,
                Ee.prototype.B = function() {
                    return null
                }
                ,
                Se.prototype.tag = function() {
                    return "set"
                }
                ,
                Se.prototype.rep = function(e) {
                    var t = [];
                    return e.forEach(function(e) {
                        t.push(e)
                    }),
                    R("array", t)
                }
                ,
                Se.prototype.B = function() {
                    return null
                }
                ,
                De.prototype.tag = function() {
                    return "map"
                }
                ,
                De.prototype.rep = function(e) {
                    return e
                }
                ,
                De.prototype.B = function() {
                    return null
                }
                ,
                Ne.prototype.tag = function() {
                    return "map"
                }
                ,
                Ne.prototype.rep = function(e) {
                    return e
                }
                ,
                Ne.prototype.B = function() {
                    return null
                }
                ,
                Ie.prototype.tag = function() {
                    return "b"
                }
                ,
                Ie.prototype.rep = function(e) {
                    return e.toString("base64")
                }
                ,
                Ie.prototype.B = function() {
                    return null
                }
                ,
                Le.prototype.tag = function() {
                    return "b"
                }
                ,
                Le.prototype.rep = function(e) {
                    for (var t = 0, r = e.length, n = "", i = null; t < r; )
                        i = e.subarray(t, Math.min(t + 32768, r)),
                        n += String.fromCharCode.apply(null, i),
                        t += 32768;
                    var a;
                    if ("undefined" != typeof btoa)
                        a = btoa(n);
                    else {
                        for (e = String(n),
                        r = 0,
                        n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                        i = ""; e.charAt(0 | r) || (n = "=",
                        r % 1); i += n.charAt(63 & a >> 8 - r % 1 * 8)) {
                            if (t = e.charCodeAt(r += .75),
                            255 < t)
                                throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");
                            a = a << 8 | t
                        }
                        a = i
                    }
                    return a
                }
                ,
                Le.prototype.B = function() {
                    return null
                }
                ,
                Ce.prototype.get = function(e) {
                    var t = null
                      , t = "string" == typeof e ? this.A[e] : this.A[fe(e)];
                    return null != t ? t : this.A.default
                }
                ,
                Ce.prototype.get = Ce.prototype.get,
                Ce.prototype.set = function(e, t) {
                    var r;
                    if (r = "string" == typeof e)
                        e: {
                            switch (e) {
                            case "null":
                            case "string":
                            case "boolean":
                            case "number":
                            case "array":
                            case "map":
                                r = !1;
                                break e
                            }
                            r = !0
                        }
                    r ? this.A[e] = t : this.A[fe(e)] = t
                }
                ,
                je.prototype.G = {
                    A: {
                        _: function() {
                            return null
                        },
                        "?": function(e) {
                            return "t" === e
                        },
                        b: function(e, t) {
                            return W(e, t)
                        },
                        i: function(e) {
                            return P(e)
                        },
                        n: function(e) {
                            return z(e)
                        },
                        d: function(e) {
                            return parseFloat(e)
                        },
                        f: function(e) {
                            return B(e)
                        },
                        c: function(e) {
                            return e
                        },
                        ":": function(e) {
                            return V(e)
                        },
                        $: function(e) {
                            return F(e)
                        },
                        r: function(e) {
                            return X(e)
                        },
                        z: function(e) {
                            e: switch (e) {
                            case "-INF":
                                e = -(1 / 0);
                                break e;
                            case "INF":
                                e = 1 / 0;
                                break e;
                            case "NaN":
                                e = NaN;
                                break e;
                            default:
                                throw Error("Invalid special double value " + e)
                            }
                            return e
                        },
                        "'": function(e) {
                            return e
                        },
                        m: function(e) {
                            return H(e)
                        },
                        t: function(e) {
                            return new Date(e)
                        },
                        u: function(e) {
                            return Q(e)
                        },
                        set: function(e) {
                            return ue(e)
                        },
                        list: function(e) {
                            return ce(e)
                        },
                        link: function(e) {
                            return he(e)
                        },
                        cmap: function(e) {
                            return ae(e, !1)
                        }
                    },
                    M: function(e, t) {
                        return R(e, t)
                    },
                    J: !0,
                    O: !0
                },
                je.prototype.a = function(e, t, r, n) {
                    if (null == e)
                        return null;
                    switch (typeof e) {
                    case "string":
                        return b(e, r) ? (e = Pe(this, e),
                        t && t.write(e, r),
                        t = e) : t = "^" === e.charAt(0) && " " !== e.charAt(1) ? t.P(e, r) : Pe(this, e),
                        t;
                    case "object":
                        if (st(e))
                            if ("^ " === e[0])
                                if (this.g)
                                    if (17 > e.length && this.g.fromArray) {
                                        for (n = [],
                                        r = 1; r < e.length; r += 2)
                                            n.push(this.a(e[r], t, !0, !1)),
                                            n.push(this.a(e[r + 1], t, !1, !1));
                                        t = this.g.fromArray(n, e)
                                    } else {
                                        for (n = this.g.init(e),
                                        r = 1; r < e.length; r += 2)
                                            n = this.g.add(n, this.a(e[r], t, !0, !1), this.a(e[r + 1], t, !1, !1), e);
                                        t = this.g.finalize(n, e)
                                    }
                                else {
                                    for (n = [],
                                    r = 1; r < e.length; r += 2)
                                        n.push(this.a(e[r], t, !0, !1)),
                                        n.push(this.a(e[r + 1], t, !1, !1));
                                    t = ae(n, !1)
                                }
                            else
                                t = Re(this, e, t, r, n);
                        else {
                            r = ot(e);
                            var i = r[0];
                            if ((n = 1 == r.length ? this.a(i, t, !1, !1) : null) && n instanceof Oe)
                                e = e[i],
                                r = this.A[n.K],
                                t = null != r ? r(this.a(e, t, !1, !0), this) : R(n.K, this.a(e, t, !1, !1));
                            else if (this.g)
                                if (16 > r.length && this.g.fromArray) {
                                    var a = [];
                                    for (n = 0; n < r.length; n++)
                                        i = r[n],
                                        a.push(this.a(i, t, !0, !1)),
                                        a.push(this.a(e[i], t, !1, !1));
                                    t = this.g.fromArray(a, e)
                                } else {
                                    for (a = this.g.init(e),
                                    n = 0; n < r.length; n++)
                                        i = r[n],
                                        a = this.g.add(a, this.a(i, t, !0, !1), this.a(e[i], t, !1, !1), e);
                                    t = this.g.finalize(a, e)
                                }
                            else {
                                for (a = [],
                                n = 0; n < r.length; n++)
                                    i = r[n],
                                    a.push(this.a(i, t, !0, !1)),
                                    a.push(this.a(e[i], t, !1, !1));
                                t = ae(a, !1)
                            }
                        }
                        return t
                    }
                    return e
                }
                ,
                je.prototype.decode = je.prototype.a,
                Be.prototype.P = function(e) {
                    var t = this.a;
                    return e = this.o.a.a(JSON.parse(e), t),
                    this.a.clear(),
                    e
                }
                ,
                Be.prototype.read = Be.prototype.P,
                qe.prototype.G = function() {
                    return this.a
                }
                ,
                qe.prototype.marshaller = qe.prototype.G,
                qe.prototype.write = function(e, t) {
                    var r = null
                      , n = t || {}
                      , r = n.asMapKey || !1
                      , i = !this.a.I && this.g;
                    return !1 === n.marshalTop ? r = We(this.a, e, r, i) : (n = this.a,
                    r = JSON.stringify(We(n, Xe(n, e), r, i))),
                    null != this.g && this.g.clear(),
                    r
                }
                ,
                qe.prototype.write = qe.prototype.write,
                qe.prototype.F = function(e, t) {
                    this.a.A.set(e, t)
                }
                ,
                qe.prototype.register = qe.prototype.F;
                var gt = ae;
                r("transit.reader", function(e, t) {
                    if ("json" === e || "json-verbose" === e || null == e) {
                        var r = new ze(t);
                        return new Be(r,t)
                    }
                    throw Error("Cannot create reader of type " + e)
                }),
                r("transit.writer", function(e, t) {
                    if ("json" === e || "json-verbose" === e || null == e) {
                        "json-verbose" === e && (null == t && (t = {}),
                        t.verbose = !0);
                        var r = new Ue(t);
                        return new qe(r,t)
                    }
                    throw r = Error('Type must be "json"'),
                    r.data = {
                        type: e
                    },
                    r
                }),
                r("transit.makeBuilder", function(e) {
                    function t() {}
                    return t.prototype.init = e.init,
                    t.prototype.add = e.add,
                    t.prototype.finalize = e.finalize,
                    t.prototype.fromArray = e.fromArray,
                    new t
                }),
                r("transit.makeWriteHandler", function(e) {
                    function t() {}
                    return t.prototype.tag = e.tag,
                    t.prototype.rep = e.rep,
                    t.prototype.B = e.stringRep,
                    t.prototype.R = e.getVerboseHandler,
                    new t
                }),
                r("transit.date", H),
                r("transit.integer", P),
                r("transit.isInteger", function(e) {
                    return e instanceof n || "number" == typeof e && !isNaN(e) && 1 / 0 !== e && parseFloat(e) === parseInt(e, 10)
                }),
                r("transit.uuid", function(e) {
                    return Q(e)
                }),
                r("transit.isUUID", function(e) {
                    return e instanceof Y
                }),
                r("transit.bigInt", z),
                r("transit.isBigInt", function(e) {
                    return e instanceof j && "n" === e.tag
                }),
                r("transit.bigDec", B),
                r("transit.isBigDec", function(e) {
                    return e instanceof j && "f" === e.tag
                }),
                r("transit.keyword", V),
                r("transit.isKeyword", function(e) {
                    return e instanceof U
                }),
                r("transit.symbol", F),
                r("transit.isSymbol", function(e) {
                    return e instanceof k
                }),
                r("transit.binary", W),
                r("transit.isBinary", function(e) {
                    return "undefined" != typeof t && e instanceof t || "undefined" != typeof Uint8Array && e instanceof Uint8Array || e instanceof j && "b" === e.tag
                }),
                r("transit.uri", X),
                r("transit.isURI", function(e) {
                    return e instanceof j && "r" === e.tag
                }),
                r("transit.map", ae),
                r("transit.isMap", oe),
                r("transit.set", ue),
                r("transit.isSet", function(e) {
                    return e instanceof se
                }),
                r("transit.list", ce),
                r("transit.isList", function(e) {
                    return e instanceof j && "list" === e.tag
                }),
                r("transit.quoted", le),
                r("transit.isQuoted", function(e) {
                    return e instanceof j && "'" === e.tag
                }),
                r("transit.tagged", R),
                r("transit.isTaggedValue", function(e) {
                    return e instanceof j
                }),
                r("transit.link", he),
                r("transit.isLink", function(e) {
                    return e instanceof j && "link" === e.tag
                }),
                r("transit.hash", O),
                r("transit.hashMapLike", L),
                r("transit.hashArrayLike", C),
                r("transit.equals", N),
                r("transit.extendToEQ", function(e, t) {
                    return e.D = t.hashCode,
                    e.C = t.equals,
                    e
                }),
                r("transit.mapToObject", function(e) {
                    var t = {};
                    return e.forEach(function(e, r) {
                        if ("string" != typeof r)
                            throw Error("Cannot convert map with non-string keys");
                        t[r] = e
                    }),
                    t
                }),
                r("transit.objectToMap", function(e) {
                    var t, r = gt();
                    for (t in e)
                        e.hasOwnProperty(t) && r.set(t, e[t]);
                    return r
                }),
                r("transit.decoder", function(e) {
                    return new je(e)
                }),
                r("transit.UUIDfromString", Q),
                r("transit.randomUUID", D),
                r("transit.stringableKeys", Ye),
                r("transit.readCache", function() {
                    return new E
                }),
                r("transit.writeCache", function() {
                    return new _
                })
            }(),
            e.exports = transit
        }
        ).call(t, r(/*! ./~/buffer/index.js */
        18).Buffer)
    }
    , /*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
    function(e, t) {}
    , /*!***********************!*\
  !*** vertx (ignored) ***!
  \***********************/
    370, /*!*********************************!*\
  !*** ./~/query-string/index.js ***!
  \*********************************/
    function(e, t, r) {
        "use strict";
        var n = r(/*! strict-uri-encode */
        379);
        t.extract = function(e) {
            return e.split("?")[1] || ""
        }
        ,
        t.parse = function(e) {
            return "string" != typeof e ? {} : (e = e.trim().replace(/^(\?|#|&)/, ""),
            e ? e.split("&").reduce(function(e, t) {
                var r = t.replace(/\+/g, " ").split("=")
                  , n = r.shift()
                  , i = r.length > 0 ? r.join("=") : void 0;
                return n = decodeURIComponent(n),
                i = void 0 === i ? null : decodeURIComponent(i),
                e.hasOwnProperty(n) ? Array.isArray(e[n]) ? e[n].push(i) : e[n] = [e[n], i] : e[n] = i,
                e
            }, {}) : {})
        }
        ,
        t.stringify = function(e) {
            return e ? Object.keys(e).sort().map(function(t) {
                var r = e[t];
                return void 0 === r ? "" : null === r ? t : Array.isArray(r) ? r.slice().sort().map(function(e) {
                    return n(t) + "=" + n(e)
                }).join("&") : n(t) + "=" + n(r)
            }).filter(function(e) {
                return e.length > 0
            }).join("&") : ""
        }
    }
    , /*!**********************************!*\
  !*** ./src/components/player.js ***!
  \**********************************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function i(e, t) {
            var r = t.isFlex
              , n = t.isRelative
              , i = (t.parentEl,
            (0,
            x.isSceneRendered)(e))
              , o = e.getIn(["sceneIO", "id"])
              , u = i || !o || !(0,
            w.shouldDisplayThumbnail)(e)
              , c = "\n  div.claraplayer canvas {\n    box-sizing: content-box;\n    -webkit-box-sizing: content-box;\n  }\n  div.claraplayer canvas:focus {\n    outline: none;\n  }\n"
              , f = [(0,
            l.default)("style", {
                props: {
                    innerHTML: c
                }
            })]
              , p = e.getIn(["player", "fullscreenBackgroundColor"])
              , g = (0,
            s.default)({}, d.default.player, {
                backgroundImage: u ? "" : "url(https://clara.io/api/scenes/" + o + "/v2thumbnail)",
                backgroundRepeat: "no-repeat",
                backgroundSize: "auto 100%",
                backgroundPosition: "center",
                position: r || n ? "absolute" : "relative",
                boxSizing: "border-box",
                backgroundColor: (0,
                w.isFullscreen)(e) ? p : "transparent",
                overflow: "hidden"
            });
            return (0,
            x.numErrors)(e) ? f.push((0,
            m.default)(e)) : (f.push((0,
            h.default)(e, "player")),
            i ? f.push((0,
            v.default)(e)) : f.push((0,
            M.default)(e))),
            (0,
            l.default)("div.claraplayer", {
                style: g,
                hook: {
                    insert: a(e)
                }
            }, f)
        }
        function a(e) {
            return function() {
                [["webkitfullscreenchange", "webkitIsFullScreen"], ["mozfullscreenchange", "mozFullScreen"], ["MSFullscreenChange", "msFullscreenElement"]].forEach(function(t) {
                    document.addEventListener(t[0], function() {
                        e.dispatch((0,
                        w.setFullscreen)(!!document[t[1]]))
                    })
                })
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var o = r(/*! babel-runtime/core-js/object/assign */
        2)
          , s = n(o);
        t.default = i;
        var u = r(/*! snabbdom/h */
        23)
          , l = n(u)
          , c = r(/*! ./canvas */
        163)
          , h = n(c)
          , f = r(/*! ./styles */
        76)
          , d = n(f)
          , p = r(/*! ./error */
        164)
          , m = n(p)
          , g = r(/*! ./manipulatorTools */
        165)
          , v = n(g)
          , y = r(/*! ./progress */
        167)
          , M = n(y)
          , w = r(/*! ../modules/player */
        5)
          , x = r(/*! ../modules/sceneIO */
        19)
    }
    , /*!***********************!*\
  !*** ./src/player.js ***!
  \***********************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            if (e && e.__esModule)
                return e;
            var t = {};
            if (null != e)
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);
            return t.default = e,
            t
        }
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function a(e, t) {
            var r = void 0
              , n = void 0;
            "function" == typeof t ? (r = t,
            n = {},
            console.warn("DEPRECATED: second argument to `claraplayer` should be an options object")) : (n = t || {},
            r = n.callback);
            var i = d.default.init({
                accessToken: "74f3517e176d41cfa5e9c41f446b5531",
                verbose: !1,
                captureUncaught: !n.devMode,
                payload: {
                    environment: "production",
                    context: "playerv2"
                }
            })
              , a = "string" == typeof e ? document.getElementById(e) : e;
            a.appendChild(document.createElement("div"));
            var o = a.getBoundingClientRect();
            if (!o.height)
                throw new Error("Player element must have a height");
            var u = (0,
            he.default)(Ae, se.default, le.default, Te);
            i && u.useRollbar(i);
            var c = u.dispatch.bind(u)
              , h = (0,
            Me.default)(u);
            u.setTranslator(h),
            u.setApi(R.default);
            var f = (0,
            de.default)(u, {
                animation: U.default,
                annotations: k.default,
                assets: W.default,
                commands: ae.default,
                configuration: te.default,
                scene: J.default,
                sceneIO: Q.default,
                sceneGraph: G.default,
                player: q.default,
                plugins: $.default,
                selection: ne.default
            })
              , p = (0,
            l.default)({}, (0,
            L.default)(), {
                deps: _e,
                three: {
                    scene: h.scene,
                    camera: h.camera
                },
                _store: u
            }, f);
            p.version = "2.2.34",
            r && r(p);
            var m = a.children[0]
              , g = window.getComputedStyle(a, null)
              , v = "flex" === g.display
              , y = "relative" === g.position
              , M = be(m, (0,
            me.default)(u, {
                isFlex: v,
                isRelative: y,
                parentEl: a
            }));
            u.subscribe(function(e) {
                M = be(M, (0,
                me.default)(u, {
                    isFlex: v,
                    isRelative: y,
                    parentEl: a
                })),
                e.length && e.forEach(function(e) {
                    p.emit.apply(p, [e.type].concat((0,
                    s.default)(e.args)))
                }),
                p.emit("change")
            }),
            c((0,
            K.setApi)(p)),
            xe(function(e, t) {
                c((0,
                ie.addCommand)("function" == typeof e ? e(u, h) : e, t))
            }, ve.default);
            var w = (0,
            we.autoRotateTool)(u);
            return c((0,
            ie.addCommand)(w, "autoRotate")),
            p.on("loaded", function() {
                w.tool.start(1e3)
            }),
            p
        }
        var o = r(/*! babel-runtime/helpers/toConsumableArray */
        87)
          , s = i(o)
          , u = r(/*! babel-runtime/core-js/object/assign */
        2)
          , l = i(u)
          , c = r(/*! three */
        1)
          , h = n(c)
          , f = r(/*! rollbar-browser */
        352)
          , d = i(f)
          , p = r(/*! immutable */
        11)
          , m = i(p);
        r(/*! jspolyfill-array.prototype.find */
        378),
        r(/*! es6-promise/auto */
        376);
        var g = r(/*! snabbdom */
        363)
          , v = i(g)
          , y = r(/*! snabbdom/h */
        23)
          , M = i(y)
          , w = r(/*! snabbdom/modules/class */
        359)
          , x = i(w)
          , A = r(/*! snabbdom/modules/props */
        361)
          , b = i(A)
          , T = r(/*! snabbdom/modules/attributes */
        358)
          , _ = i(T)
          , E = r(/*! snabbdom/modules/style */
        362)
          , S = i(E)
          , D = r(/*! snabbdom/modules/eventlisteners */
        360)
          , N = i(D)
          , I = r(/*! ./utils/eventEmitter */
        258)
          , L = i(I)
          , C = r(/*! ramda */
        3)
          , O = i(C)
          , j = r(/*! ./store/api */
        229)
          , R = i(j)
          , P = r(/*! ./store/clientMiddleware */
        233)
          , z = i(P)
          , B = r(/*! ./modules/animation */
        37)
          , U = i(B)
          , V = r(/*! ./modules/annotations */
        58)
          , k = i(V)
          , F = r(/*! ./modules/sceneGraph */
        9)
          , G = i(F)
          , Y = r(/*! ./modules/sceneIO */
        19)
          , Q = i(Y)
          , H = r(/*! ./modules/assets */
        26)
          , W = i(H)
          , X = r(/*! ./modules/player */
        5)
          , q = i(X)
          , Z = r(/*! ./modules/scene */
        4)
          , J = i(Z)
          , K = r(/*! ./modules/plugins */
        170)
          , $ = i(K)
          , ee = r(/*! ./modules/configuration */
        169)
          , te = i(ee)
          , re = r(/*! ./modules/selection */
        36)
          , ne = i(re)
          , ie = r(/*! ./modules/commands */
        44)
          , ae = i(ie)
          , oe = r(/*! ./operators */
        194)
          , se = i(oe)
          , ue = r(/*! ./operators/primitives */
        197)
          , le = i(ue)
          , ce = r(/*! ./store */
        235)
          , he = i(ce)
          , fe = r(/*! ./store/bindActionCreatorsAndSelectors */
        232)
          , de = i(fe)
          , pe = r(/*! ./components/player */
        373)
          , me = i(pe)
          , ge = r(/*! ./translators/tools */
        248)
          , ve = i(ge)
          , ye = r(/*! ./translators/three */
        244)
          , Me = i(ye)
          , we = r(/*! ./autoRotate */
        161)
          , xe = O.default.mapObjIndexed;
        window.WebVRConfig.CARDBOARD_UI_DISABLED = !0,
        window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED = !0,
        window.WebVRConfig.BUFFER_SCALE = 1;
        var Ae = {
            animation: U.default.reducer,
            annotations: k.default.reducer,
            assets: W.default.reducer,
            commands: ae.default.reducer,
            sceneGraph: G.default.reducer(se.default),
            sceneIO: Q.default.reducer,
            player: q.default.reducer,
            plugins: $.default.reducer,
            selection: ne.default.reducer
        }
          , be = v.default.init([x.default, b.default, _.default, S.default, N.default])
          , Te = [z.default]
          , _e = {
            immutable: m.default,
            patch: be,
            h: M.default,
            ramda: O.default,
            THREE: h
        };
        a.deps = _e,
        a.hasWebGL = function() {
            var e = document.createElement("canvas");
            return !!e.getContext("webgl") || !!e.getContext("experimental-webgl")
        }
        ,
        e.exports = a
    }
    , , /*!*******************************!*\
  !*** ./~/es6-promise/auto.js ***!
  \*******************************/
    function(e, t, r) {
        "use strict";
        e.exports = r(/*! ./ */
        377).polyfill()
    }
    , /*!*******************************************!*\
  !*** ./~/es6-promise/dist/es6-promise.js ***!
  \*******************************************/
    function(e, t, r) {
        (function(t, n) {
            /*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
            !function(t, r) {
                e.exports = r()
            }(this, function() {
                "use strict";
                function e(e) {
                    return "function" == typeof e || "object" == typeof e && null !== e
                }
                function i(e) {
                    return "function" == typeof e
                }
                function a(e) {
                    q = e
                }
                function o(e) {
                    Z = e
                }
                function s() {
                    return function() {
                        return t.nextTick(f)
                    }
                }
                function u() {
                    return "undefined" != typeof X ? function() {
                        X(f)
                    }
                    : h()
                }
                function l() {
                    var e = 0
                      , t = new $(f)
                      , r = document.createTextNode("");
                    return t.observe(r, {
                        characterData: !0
                    }),
                    function() {
                        r.data = e = ++e % 2
                    }
                }
                function c() {
                    var e = new MessageChannel;
                    return e.port1.onmessage = f,
                    function() {
                        return e.port2.postMessage(0)
                    }
                }
                function h() {
                    var e = setTimeout;
                    return function() {
                        return e(f, 1)
                    }
                }
                function f() {
                    for (var e = 0; e < W; e += 2) {
                        var t = re[e]
                          , r = re[e + 1];
                        t(r),
                        re[e] = void 0,
                        re[e + 1] = void 0
                    }
                    W = 0
                }
                function d() {
                    try {
                        var e = r(/*! vertx */
                        381);
                        return X = e.runOnLoop || e.runOnContext,
                        u()
                    } catch (e) {
                        return h()
                    }
                }
                function p(e, t) {
                    var r = arguments
                      , n = this
                      , i = new this.constructor(g);
                    void 0 === i[ie] && R(i);
                    var a = n._state;
                    return a ? !function() {
                        var e = r[a - 1];
                        Z(function() {
                            return C(a, i, e, n._result)
                        })
                    }() : D(n, i, e, t),
                    i
                }
                function m(e) {
                    var t = this;
                    if (e && "object" == typeof e && e.constructor === t)
                        return e;
                    var r = new t(g);
                    return T(r, e),
                    r
                }
                function g() {}
                function v() {
                    return new TypeError("You cannot resolve a promise with itself")
                }
                function y() {
                    return new TypeError("A promises callback cannot return that same promise.")
                }
                function M(e) {
                    try {
                        return e.then
                    } catch (e) {
                        return ue.error = e,
                        ue
                    }
                }
                function w(e, t, r, n) {
                    try {
                        e.call(t, r, n)
                    } catch (e) {
                        return e
                    }
                }
                function x(e, t, r) {
                    Z(function(e) {
                        var n = !1
                          , i = w(r, t, function(r) {
                            n || (n = !0,
                            t !== r ? T(e, r) : E(e, r))
                        }, function(t) {
                            n || (n = !0,
                            S(e, t))
                        }, "Settle: " + (e._label || " unknown promise"));
                        !n && i && (n = !0,
                        S(e, i))
                    }, e)
                }
                function A(e, t) {
                    t._state === oe ? E(e, t._result) : t._state === se ? S(e, t._result) : D(t, void 0, function(t) {
                        return T(e, t)
                    }, function(t) {
                        return S(e, t)
                    })
                }
                function b(e, t, r) {
                    t.constructor === e.constructor && r === p && t.constructor.resolve === m ? A(e, t) : r === ue ? S(e, ue.error) : void 0 === r ? E(e, t) : i(r) ? x(e, t, r) : E(e, t)
                }
                function T(t, r) {
                    t === r ? S(t, v()) : e(r) ? b(t, r, M(r)) : E(t, r)
                }
                function _(e) {
                    e._onerror && e._onerror(e._result),
                    N(e)
                }
                function E(e, t) {
                    e._state === ae && (e._result = t,
                    e._state = oe,
                    0 !== e._subscribers.length && Z(N, e))
                }
                function S(e, t) {
                    e._state === ae && (e._state = se,
                    e._result = t,
                    Z(_, e))
                }
                function D(e, t, r, n) {
                    var i = e._subscribers
                      , a = i.length;
                    e._onerror = null,
                    i[a] = t,
                    i[a + oe] = r,
                    i[a + se] = n,
                    0 === a && e._state && Z(N, e)
                }
                function N(e) {
                    var t = e._subscribers
                      , r = e._state;
                    if (0 !== t.length) {
                        for (var n = void 0, i = void 0, a = e._result, o = 0; o < t.length; o += 3)
                            n = t[o],
                            i = t[o + r],
                            n ? C(r, n, i, a) : i(a);
                        e._subscribers.length = 0
                    }
                }
                function I() {
                    this.error = null
                }
                function L(e, t) {
                    try {
                        return e(t)
                    } catch (e) {
                        return le.error = e,
                        le
                    }
                }
                function C(e, t, r, n) {
                    var a = i(r)
                      , o = void 0
                      , s = void 0
                      , u = void 0
                      , l = void 0;
                    if (a) {
                        if (o = L(r, n),
                        o === le ? (l = !0,
                        s = o.error,
                        o = null) : u = !0,
                        t === o)
                            return void S(t, y())
                    } else
                        o = n,
                        u = !0;
                    t._state !== ae || (a && u ? T(t, o) : l ? S(t, s) : e === oe ? E(t, o) : e === se && S(t, o))
                }
                function O(e, t) {
                    try {
                        t(function(t) {
                            T(e, t)
                        }, function(t) {
                            S(e, t)
                        })
                    } catch (t) {
                        S(e, t)
                    }
                }
                function j() {
                    return ce++
                }
                function R(e) {
                    e[ie] = ce++,
                    e._state = void 0,
                    e._result = void 0,
                    e._subscribers = []
                }
                function P(e, t) {
                    this._instanceConstructor = e,
                    this.promise = new e(g),
                    this.promise[ie] || R(this.promise),
                    H(t) ? (this._input = t,
                    this.length = t.length,
                    this._remaining = t.length,
                    this._result = new Array(this.length),
                    0 === this.length ? E(this.promise, this._result) : (this.length = this.length || 0,
                    this._enumerate(),
                    0 === this._remaining && E(this.promise, this._result))) : S(this.promise, z())
                }
                function z() {
                    return new Error("Array Methods must be provided an Array")
                }
                function B(e) {
                    return new P(this,e).promise
                }
                function U(e) {
                    var t = this;
                    return new t(H(e) ? function(r, n) {
                        for (var i = e.length, a = 0; a < i; a++)
                            t.resolve(e[a]).then(r, n)
                    }
                    : function(e, t) {
                        return t(new TypeError("You must pass an array to race."))
                    }
                    )
                }
                function V(e) {
                    var t = this
                      , r = new t(g);
                    return S(r, e),
                    r
                }
                function k() {
                    throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
                }
                function F() {
                    throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
                }
                function G(e) {
                    this[ie] = j(),
                    this._result = this._state = void 0,
                    this._subscribers = [],
                    g !== e && ("function" != typeof e && k(),
                    this instanceof G ? O(this, e) : F())
                }
                function Y() {
                    var e = void 0;
                    if ("undefined" != typeof n)
                        e = n;
                    else if ("undefined" != typeof self)
                        e = self;
                    else
                        try {
                            e = Function("return this")()
                        } catch (e) {
                            throw new Error("polyfill failed because global object is unavailable in this environment")
                        }
                    var t = e.Promise;
                    if (t) {
                        var r = null;
                        try {
                            r = Object.prototype.toString.call(t.resolve())
                        } catch (e) {}
                        if ("[object Promise]" === r && !t.cast)
                            return
                    }
                    e.Promise = G
                }
                var Q = void 0;
                Q = Array.isArray ? Array.isArray : function(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                }
                ;
                var H = Q
                  , W = 0
                  , X = void 0
                  , q = void 0
                  , Z = function(e, t) {
                    re[W] = e,
                    re[W + 1] = t,
                    W += 2,
                    2 === W && (q ? q(f) : ne())
                }
                  , J = "undefined" != typeof window ? window : void 0
                  , K = J || {}
                  , $ = K.MutationObserver || K.WebKitMutationObserver
                  , ee = "undefined" == typeof self && "undefined" != typeof t && "[object process]" === {}.toString.call(t)
                  , te = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel
                  , re = new Array(1e3)
                  , ne = void 0;
                ne = ee ? s() : $ ? l() : te ? c() : void 0 === J ? d() : h();
                var ie = Math.random().toString(36).substring(16)
                  , ae = void 0
                  , oe = 1
                  , se = 2
                  , ue = new I
                  , le = new I
                  , ce = 0;
                return P.prototype._enumerate = function() {
                    for (var e = this.length, t = this._input, r = 0; this._state === ae && r < e; r++)
                        this._eachEntry(t[r], r)
                }
                ,
                P.prototype._eachEntry = function(e, t) {
                    var r = this._instanceConstructor
                      , n = r.resolve;
                    if (n === m) {
                        var i = M(e);
                        if (i === p && e._state !== ae)
                            this._settledAt(e._state, t, e._result);
                        else if ("function" != typeof i)
                            this._remaining--,
                            this._result[t] = e;
                        else if (r === G) {
                            var a = new r(g);
                            b(a, e, i),
                            this._willSettleAt(a, t)
                        } else
                            this._willSettleAt(new r(function(t) {
                                return t(e)
                            }
                            ), t)
                    } else
                        this._willSettleAt(n(e), t)
                }
                ,
                P.prototype._settledAt = function(e, t, r) {
                    var n = this.promise;
                    n._state === ae && (this._remaining--,
                    e === se ? S(n, r) : this._result[t] = r),
                    0 === this._remaining && E(n, this._result)
                }
                ,
                P.prototype._willSettleAt = function(e, t) {
                    var r = this;
                    D(e, void 0, function(e) {
                        return r._settledAt(oe, t, e)
                    }, function(e) {
                        return r._settledAt(se, t, e)
                    })
                }
                ,
                G.all = B,
                G.race = U,
                G.resolve = m,
                G.reject = V,
                G._setScheduler = a,
                G._setAsap = o,
                G._asap = Z,
                G.prototype = {
                    constructor: G,
                    then: p,
                    catch: function(e) {
                        return this.then(null, e)
                    }
                },
                G.polyfill = Y,
                G.Promise = G,
                G
            })
        }
        ).call(t, r(/*! ./~/process/browser.js */
        57), function() {
            return this
        }())
    }
    , /*!***************************************************!*\
  !*** ./~/jspolyfill-array.prototype.find/find.js ***!
  \***************************************************/
    function(e, t) {
        "use strict";
        Array.prototype.find = Array.prototype.find || function(e) {
            if (null === this)
                throw new TypeError("Array.prototype.find called on null or undefined");
            if ("function" != typeof e)
                throw new TypeError("callback must be a function");
            for (var t = Object(this), r = t.length >>> 0, n = arguments[1], i = 0; i < r; i++) {
                var a = t[i];
                if (e.call(n, a, i, t))
                    return a
            }
        }
    }
    , /*!**************************************!*\
  !*** ./~/strict-uri-encode/index.js ***!
  \**************************************/
    function(e, t) {
        "use strict";
        e.exports = function(e) {
            return encodeURIComponent(e).replace(/[!'()*]/g, function(e) {
                return "%" + e.charCodeAt(0).toString(16).toUpperCase()
            })
        }
    }
    , , /*!***********************!*\
  !*** vertx (ignored) ***!
  \***********************/
    370, , , , , , /*!**********************!*\
  !*** ./src/embed.js ***!
  \**********************/
    function(e, t, r) {
        "use strict";
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var i = r(/*! babel-runtime/core-js/object/keys */
        8)
          , a = n(i)
          , o = r(/*! ./player */
        374)
          , s = n(o)
          , u = r(/*! ./utils/queryArgs */
        388)
          , l = r(/*! query-string */
        372)
          , c = n(l)
          , h = r(/*! ramda */
        3)
          , f = new Date
          , d = c.default.parse(location.search)
          , p = window.location.pathname.split("/")
          , m = p[p.length - 1]
          , g = window.player = (0,
        s.default)("container", function(e) {
            (0,
            u.isTruthy)(d.thumbnail, !0) && !(0,
            u.isTruthy)(d.hideThumbnail) || e.player.displayThumbnail(!1),
            e.sceneIO.useScene(m)
        });
        if (g.on("preloaded", function() {
            (0,
            u.isTruthy)(d.subd) && g.scene.filter({
                type: ["PolyMesh", "BinMesh"]
            }).map(function(e) {
                var t = g.scene.get({
                    id: e,
                    property: "type"
                });
                g.sceneGraph.addOperator(e, t, ["MeshSmooth", {}])
            })
        }),
        g.on("rendered", function() {
            console.log("Player 2.2.34 is loaded and ready", new Date - f),
            (0,
            h.forEach)(function(e) {
                console.warn(e.type + ": '" + e.name + "', " + e.id),
                e.warnings.forEach(function(e) {
                    return console.warn("  - " + e)
                })
            }, g.scene.getWarnings())
        }),
        !m || 36 !== m.length)
            throw g.sceneIO.reportError("Invalid sceneId"),
            new Error("Required sceneId to be a uuid");
        d.setupCommand && g.sceneIO.preloadCommand(g.plugins.getSetupCommand(d.setupCommand, d.setupData)),
        "undefined" != typeof claraPlayerExternal ? (claraPlayerExternal.content && g.sceneIO.loadScene(m, claraPlayerExternal.content, new Date - f).then(function() {
            g.sceneIO.useScene(m),
            console.log("Loaded", m)
        }),
        claraPlayerExternal.error && g.sceneIO.reportError(claraPlayerExternal.error)) : g.sceneIO.fetchAndUse(m, d.published).then(function() {
            console.log("Loaded", m)
        });
        var v = !(0,
        u.isTruthy)(d.tools, !0);
        (0,
        h.forEach)(function(e) {
            if (v)
                return g.player.removeTool(e);
            var t = d["tools." + e]
              , r = (0,
            u.parseQueryArg)(t);
            void 0 != r && "hide" !== t && g.player[r ? "showTool" : "removeTool"](e),
            "hide" !== d.tools && "hide" !== t || g.player.hideTool(e)
        }, ["orbit", "pan", "zoom", "home", "fullscreen", "vrMode", "nodeRotate", "nodeMove", "nodeScale", "select"]);
        var y = {};
        (0,
        h.forEach)(function(e) {
            null == d[e] || "" === d[e] || isNaN(d[e]) || (y[e] = Number(d[e]))
        }, ["polarAngle", "azimuthAngle", "boundingRadius"]),
        (0,
        a.default)(y).length && g.player.setCameraAttrs(y)
    }
    , /*!********************************!*\
  !*** ./src/utils/queryArgs.js ***!
  \********************************/
    function(e, t) {
        "use strict";
        function r(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            return void 0 === e ? t : !(!e || "0" === e || "false" === e)
        }
        function n(e) {
            if (void 0 != e)
                return !(!e || "0" === e || "false" === e)
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.isTruthy = r,
        t.parseQueryArg = n
    }
    ]))
});
//# sourceMappingURL=claraplayerEmbed-2.2.34.min.js.map
